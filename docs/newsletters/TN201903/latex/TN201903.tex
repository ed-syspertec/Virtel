%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax

\PassOptionsToPackage{warn}{textcomp}


\usepackage{cmap}

\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}

\usepackage[Bjarne]{fncychap}
\usepackage[,numfigreset=1,mathnumfig]{sphinx}

\fvset{fontsize=\small}
\usepackage{geometry}

% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}

\addto\captionsenglish{\renewcommand{\figurename}{Fig.\@ }}
\makeatletter
\def\fnum@figure{\figurename\thefigure{}}
\makeatother
\addto\captionsenglish{\renewcommand{\tablename}{Table }}
\makeatletter
\def\fnum@table{\tablename\thetable{}}
\makeatother
\addto\captionsenglish{\renewcommand{\literalblockname}{Listing}}

\addto\captionsenglish{\renewcommand{\literalblockcontinuedname}{continued from previous page}}
\addto\captionsenglish{\renewcommand{\literalblockcontinuesname}{continues on next page}}
\addto\captionsenglish{\renewcommand{\sphinxnonalphabeticalgroupname}{Non-alphabetical}}
\addto\captionsenglish{\renewcommand{\sphinxsymbolsname}{Symbols}}
\addto\captionsenglish{\renewcommand{\sphinxnumbersname}{Numbers}}

\addto\extrasenglish{\def\pageautorefname{page}}




% Enable unicode and use Courier New to ensure the card suit
% characters that are part of the 'random' module examples
% appear properly in the PDF output.
\usepackage{fontspec}
\setmonofont{Courier New}


\title{Maintaining centralized macros with batch scripts}
\date{Jul 21, 2020}
\release{1.00}
\author{Syspertec Communications}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{Release}
\makeindex
\begin{document}

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{TN201903::doc}}


The following newsletter documents how to maintain centralized macros using a batch process. The process uses the “CURL” program, a browser client, to interface with Virtel and to upload the macros from a PC. The benefits of using a batch process is macros can be managed on a PC and uploaded to the relevant Virtel directories as a batch process rather than the default “Drag and Drop”.

The following steps are implemented to support this process. A CURL request is made to Virtel to obtain they key for either the GROUP id, USER id or the GLOBAL DDI directory. The key is then used in a subsequent HTTP POST to upload a macros.json file to that directory indexed by the key. This is effectively what occurs when you perform the same process using the standard Drag and Drop technique.

The process is driven through batch scripts which are generated and downloaded from the mainframe following a extract from the RACF database. The extract provides the GROUP and USERID relationship required by the upload process.


\chapter{Pre-requisites}
\label{\detokenize{TN201903:pre-requisites}}

\section{Virtel Setup}
\label{\detokenize{TN201903:virtel-setup}}
You must be a Virtel administration to perform this procedure and you must have configured Virtel to use centralized DDI. For example, on the default client line, 41002, the macro list icon should be a “Blue” triangle. If it is “Green”, then your DDI setup is not correctly configured. See the ‘Virtel Users Guide’ for further details on setting up the “centralized” macro environment. Alternatively, information can be found in technical newsletter TN201704.

There should also be a local macro facility available so as to be able to modify existing macros or generate new ones. It is suggested that the Admin. Portal, port 41001 by default, be used for this purpose.


\section{Macro Sub-Directory Organization}
\label{\detokenize{TN201903:macro-sub-directory-organization}}
You should also have the relevant macros.json file for each of the group/user related directories that you wish to build. The GROUP and USERID names must be valid RACF constructs. The ‘ddiMacro.bat’ script will upload a macros.json file from the associated PC directories as identified in the output from the LISTUSRS JCL. See “Running LISTUSRS for further details. The associated directories can be any arbitrary name but must exist within the c:\textbackslash{}virtel\textbackslash{}macros\textbackslash{}ddiBatch directory as sub-directories and each sub-directory must contain a relevant macros.json file.

Either organize sub-directories by user or type. For example, a type structure would look something like this:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{.}\PYG{o}{/}\PYG{k}{global}
    \PYG{n}{macros}\PYG{o}{.}\PYG{n}{json}
\PYG{o}{.}\PYG{o}{/}\PYG{n}{adminGroup}
    \PYG{n}{macros}\PYG{o}{.}\PYG{n}{json}
\PYG{o}{.}\PYG{o}{/}\PYG{n}{adminUser}
    \PYG{n}{macros}\PYG{o}{.}\PYG{n}{json}
\PYG{o}{.}\PYG{o}{/}\PYG{n}{userGroup1}
    \PYG{n}{macros}\PYG{o}{.}\PYG{n}{json}
\PYG{o}{.}\PYG{o}{/}\PYG{n}{userGroup2}
    \PYG{n}{macros}\PYG{o}{.}\PYG{n}{json}
\PYG{o}{.}\PYG{o}{/}\PYG{n}{users1}
    \PYG{n}{macros}\PYG{o}{.}\PYG{n}{json}
\PYG{o}{.}\PYG{o}{/}\PYG{n}{users2}
    \PYG{n}{macros}\PYG{o}{.}\PYG{n}{json}
\end{sphinxVerbatim}

The advantage of a “type” structure is that multiple users can upload common files. A user sub-directory structure would look like :-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{.}\PYG{o}{/}\PYG{k}{global}
    \PYG{n}{macros}\PYG{o}{.}\PYG{n}{json}
\PYG{o}{.}\PYG{o}{/}\PYG{n}{RACFGRP}
    \PYG{n}{macros}\PYG{o}{.}\PYG{n}{json}
\PYG{o}{.}\PYG{o}{/}\PYG{n}{ADM0010}
    \PYG{n}{macros}\PYG{o}{.}\PYG{n}{json}
\PYG{o}{.}\PYG{o}{/}\PYG{n}{ADM0020}
    \PYG{n}{macros}\PYG{o}{.}\PYG{n}{json}
\PYG{o}{.}\PYG{o}{/}\PYG{n}{SYSPGRP}
    \PYG{n}{macros}\PYG{o}{.}\PYG{n}{json}
\PYG{o}{.}\PYG{o}{/}\PYG{n}{SPTHOLT}
    \PYG{n}{macros}\PYG{o}{.}\PYG{n}{json}
\PYG{o}{.}\PYG{o}{/}\PYG{n}{SPTBOWL}
    \PYG{n}{macros}\PYG{o}{.}\PYG{n}{json}
\PYG{o}{.}\PYG{o}{/}\PYG{n}{USRGRP}
    \PYG{n}{macros}\PYG{o}{.}\PYG{n}{json}
\PYG{o}{.}\PYG{o}{/}\PYG{n}{USRPETE}
    \PYG{n}{macros}\PYG{o}{.}\PYG{n}{json}
\PYG{o}{.}\PYG{o}{/}\PYG{n}{USRMARY}
    \PYG{n}{macros}\PYG{o}{.}\PYG{n}{json}
\end{sphinxVerbatim}

In this structure type, each user has there own “user” macro.json.


\section{Macro.json files}
\label{\detokenize{TN201903:macro-json-files}}
A macro.json file is a JSON object that represents the macros available to a user, group or global macro entity within Virtel. Here is an example:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{macros}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{p}{[}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SDSF}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{rev}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{2}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{def}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{move(435)}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ENTER}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{txt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{=M}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ErEof}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ENTER}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{txt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{5}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ENTER}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{\PYGZcb{}}\PYG{p}{]}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{desc}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{global macros}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{fmt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{1}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

Creating these macros is best done through Virtel. Use a local macro environment to create your macros. For example, from within a TSO or a CICS application within the Administration portal. After creating the macros, export them to a file as a JSON structure. Copy the file to the relevant batch sub-directory. In all cases the file must be called macros.json. Alternatively, get you users to create the own “macros.json”, and ship them to you.

\begin{sphinxadmonition}{note}{Note:}
You cannot export macros from a centralized DDI macro environment.
\end{sphinxadmonition}


\chapter{Installation}
\label{\detokenize{TN201903:installation}}
All the modules and scripts to implement this package are available as a zip file on the Syspertec FTP web server.


\section{Unzip package}
\label{\detokenize{TN201903:unzip-package}}
Download the zip package “ddimacros.zip” from the Virtel ftp website and unzip into a directory on your PC. In the following examples the zip file has been unzip into a directory called ‘c:\textbackslash{}virtel\textbackslash{}macros’. After unzipping the file you should find a batch sub-directory which will have the the following directory structure and files.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZbs{}\PYG{k}{global}
    \PYG{n}{macros}\PYG{o}{.}\PYG{n}{json}
\PYGZbs{}\PYG{n}{sysgroup}
    \PYG{n}{macros}\PYG{o}{.}\PYG{n}{json}
\PYGZbs{}\PYG{n}{sysprog}
    \PYG{n}{macros}\PYG{o}{.}\PYG{n}{json}
\PYGZbs{}\PYG{n}{user}
    \PYG{n}{macros}\PYG{o}{.}\PYG{n}{json}
\PYGZbs{}\PYG{n}{usergroup}
    \PYG{n}{macros}\PYG{o}{.}\PYG{n}{json}
\PYG{n}{curl}\PYG{o}{.}\PYG{n}{exe}
\PYG{n}{ddiMacro}\PYG{o}{.}\PYG{n}{bat}
\PYG{n}{listuser}\PYG{o}{.}\PYG{n}{rexx}
\PYG{n}{listusr1}\PYG{o}{.}\PYG{n}{jcl}
\end{sphinxVerbatim}


\section{Upload files}
\label{\detokenize{TN201903:upload-files}}
Upload files LISTUSER.rexx and LISTUSRS.jcl to your VIRTnnn.CNTL as members LISTUSER and LISTUSRS.


\section{Running LISTUSRS}
\label{\detokenize{TN201903:running-listusrs}}
Modify the LISTUSRS member to your site standards and run this JCL to list RACF groups and associated users. See the comments in the JCL for information on how to set the correct arguments. Running with ‘Y’ as option 2 will create a ‘bat’ file in the dataset pointed to by SYSUT1. In the sample LISTUSRS JCL this dataset is called userid.temp. In the JCL example, options are set to create a “bat” job that will upload “macros.json” files for the users of the RACF GROUP SPGPTEH. The supporting PC directories will be “sysgroup” and “sysprog”. These directories will have to be created as sub directories in the C:\textbackslash{}virtel\textbackslash{}macros\textbackslash{}ddiBatch directory. Each directory must contain a relevant macros.json file.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{/}\PYG{n}{STEP0}    \PYG{n}{EXEC} \PYG{n}{PGM}\PYG{o}{=}\PYG{n}{IEFBR14}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{DDA}      \PYG{n}{DD} \PYG{n}{DSN}\PYG{o}{=}\PYG{n}{SPTHOLT}\PYG{o}{.}\PYG{n}{TEMP}\PYG{p}{,}\PYG{n}{DISP}\PYG{o}{=}\PYG{p}{(}\PYG{n}{MOD}\PYG{p}{,}\PYG{n}{DELETE}\PYG{p}{)}\PYG{p}{,}\PYG{n}{UNIT}\PYG{o}{=}\PYG{n}{SYSDA}\PYG{p}{,}
\PYG{o}{/}\PYG{o}{/}         \PYG{n}{SPACE}\PYG{o}{=}\PYG{p}{(}\PYG{n}{TRK}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{STEP1}    \PYG{n}{EXEC} \PYG{n}{PGM}\PYG{o}{=}\PYG{n}{IKJEFT1A}\PYG{p}{,}\PYG{n}{DYNAMNBR}\PYG{o}{=}\PYG{l+m+mi}{20}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSEXEC}  \PYG{n}{DD}  \PYG{n}{DSN}\PYG{o}{=}\PYG{n}{SPTHOLT}\PYG{o}{.}\PYG{n}{RACF}\PYG{o}{.}\PYG{n}{REXX}\PYG{p}{,}\PYG{n}{DISP}\PYG{o}{=}\PYG{n}{SHR}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSTSPRT} \PYG{n}{DD}  \PYG{n}{SYSOUT}\PYG{o}{=}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSUT1}   \PYG{n}{DD}  \PYG{n}{DSN}\PYG{o}{=}\PYG{n}{SPTHOLT}\PYG{o}{.}\PYG{n}{TEMP}\PYG{p}{,}\PYG{n}{DISP}\PYG{o}{=}\PYG{p}{(}\PYG{p}{,}\PYG{n}{CATLG}\PYG{p}{)}\PYG{p}{,}\PYG{n}{UNIT}\PYG{o}{=}\PYG{n}{SYSDA}\PYG{p}{,}\PYG{n}{SPACE}\PYG{o}{=}\PYG{p}{(}\PYG{n}{TRK}\PYG{p}{,}\PYG{l+m+mi}{5}\PYG{p}{)}\PYG{p}{,}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{DCB}\PYG{o}{=}\PYG{p}{(}\PYG{n}{RECFM}\PYG{o}{=}\PYG{n}{VB}\PYG{p}{,}\PYG{n}{LRECL}\PYG{o}{=}\PYG{l+m+mi}{255}\PYG{p}{,}\PYG{n}{BLKSIZE}\PYG{o}{=}\PYG{l+m+mi}{10000}\PYG{p}{)}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSTSIN}  \PYG{n}{DD}  \PYG{o}{*}
\PYG{o}{\PYGZpc{}}\PYG{n}{LISTUSER} \PYG{n}{SPGPTECH} \PYG{n}{Y} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.48} \PYG{n}{sysgroup} \PYG{n}{sysprog}
\end{sphinxVerbatim}

Download the temp file that is created by the LISTUSRS job to the c:\textbackslash{}vitel\textbackslash{}macros\textbackslash{}ddiBatch directory. Call it UPLOAD.BAT. When executed, this file will call the “ddiMacro.bat” file installed from the package. The ddiMacro script will invoke the CURL program, also included with the packaged, to upload a macros.json file to the associated RACF GROUP and USER directory structure within the Virtel DDI centralized TRSF file. This is normally the HTMLTRSF VSAM file.

The UPLOAD.BAT file created by the REXX script will look something like this:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nd}{@echo} \PYG{n}{off}
\PYG{n}{rem} \PYG{n}{Upload} \PYG{n}{DDI} \PYG{n}{macros} \PYG{n}{to} \PYG{n}{Virtel} \PYG{n}{via} \PYG{n}{CURL}
\PYG{n}{rem} \PYG{n}{GROUP}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{1} \PYG{n}{USERID}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{2} \PYG{n}{Global}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3} \PYG{n}{ip} \PYG{n}{address}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{4}
\PYG{n}{rem} \PYG{n}{Group} \PYG{n}{Directory}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{5} \PYG{n}{User} \PYG{n}{Directory}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{6}
\PYG{n+nb}{set} \PYG{o}{/}\PYG{n}{p} \PYG{n}{u}\PYG{o}{=}\PYG{n}{Enter} \PYG{n}{your} \PYG{n}{userid} \PYG{p}{:}
\PYG{n+nb}{set} \PYG{o}{/}\PYG{n}{p} \PYG{n}{p}\PYG{o}{=}\PYG{n}{Enter} \PYG{n}{your} \PYG{n}{password} \PYG{p}{:}
\PYG{n+nb}{set} \PYG{n}{flag}\PYG{o}{=}\PYG{l+m+mi}{0}
\PYG{n}{call} \PYG{n}{ddiMacro}\PYG{o}{.}\PYG{n}{bat} \PYG{n}{SPGPTECH} \PYG{n}{CAULIER} \PYG{n}{N} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.48} \PYG{n}{sysgroup} \PYG{n}{sysprog} \PYG{o}{\PYGZpc{}}\PYG{n}{u}\PYG{o}{\PYGZpc{}} \PYG{o}{\PYGZpc{}}\PYG{n}{p}\PYG{o}{\PYGZpc{}} \PYG{o}{\PYGZpc{}}\PYG{n}{flag}\PYG{o}{\PYGZpc{}}
\PYG{n}{call} \PYG{n}{ddiMacro}\PYG{o}{.}\PYG{n}{bat} \PYG{n}{SPGPTECH} \PYG{n}{CICDUSER} \PYG{n}{N} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.48} \PYG{n}{sysgroup} \PYG{n}{sysprog} \PYG{o}{\PYGZpc{}}\PYG{n}{u}\PYG{o}{\PYGZpc{}} \PYG{o}{\PYGZpc{}}\PYG{n}{p}\PYG{o}{\PYGZpc{}} \PYG{o}{\PYGZpc{}}\PYG{n}{flag}\PYG{o}{\PYGZpc{}}
\PYG{o}{.}
\PYG{o}{.}
\PYG{o}{.}
\end{sphinxVerbatim}

The arguments passed to the “ddiMacro” script are :-
\begin{enumerate}
\def\theenumi{\arabic{enumi}}
\def\labelenumi{\theenumi .}
\makeatletter\def\p@enumii{\p@enumi \theenumi .}\makeatother
\item {} 
RACF GROUP

\item {} 
RACF USERID

\item {} 
Global Option

\item {} 
URL address of Virtel

\item {} 
Local PC sub-directory for group containing macros.json file.

\item {} 
Local PC sub-directory for user containing macros.json file.

\end{enumerate}

By default, the upload.bat job does not upload a macros.json file from the global sub-directory. To alter this behavior modify the first “call” statement and change option ‘3’ to “Y”. This will force and upload to the Virtel globals macro directory from the local global sub-directory.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nd}{@echo} \PYG{n}{off}
\PYG{n}{rem} \PYG{n}{Upload} \PYG{n}{DDI} \PYG{n}{macros} \PYG{n}{to} \PYG{n}{Virtel} \PYG{n}{via} \PYG{n}{CURL}
\PYG{n}{rem} \PYG{n}{GROUP}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{1} \PYG{n}{USERID}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{2} \PYG{n}{Global}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3} \PYG{n}{ip} \PYG{n}{address}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{4}
\PYG{n}{rem} \PYG{n}{Group} \PYG{n}{Directory}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{5} \PYG{n}{User} \PYG{n}{Directory}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{6}
\PYG{n+nb}{set} \PYG{o}{/}\PYG{n}{p} \PYG{n}{u}\PYG{o}{=}\PYG{n}{Enter} \PYG{n}{your} \PYG{n}{userid} \PYG{p}{:}
\PYG{n+nb}{set} \PYG{o}{/}\PYG{n}{p} \PYG{n}{p}\PYG{o}{=}\PYG{n}{Enter} \PYG{n}{your} \PYG{n}{password} \PYG{p}{:}
\PYG{n+nb}{set} \PYG{n}{flag}\PYG{o}{=}\PYG{l+m+mi}{0}
\PYG{n}{call} \PYG{n}{ddiMacro}\PYG{o}{.}\PYG{n}{bat} \PYG{n}{SPGPTECH} \PYG{n}{CAULIER} \PYG{n}{Y} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.48} \PYG{n}{sysgroup} \PYG{n}{sysprog} \PYG{o}{\PYGZpc{}}\PYG{n}{u}\PYG{o}{\PYGZpc{}} \PYG{o}{\PYGZpc{}}\PYG{n}{p}\PYG{o}{\PYGZpc{}} \PYG{o}{\PYGZpc{}}\PYG{n}{flag}\PYG{o}{\PYGZpc{}}
\PYG{n}{call} \PYG{n}{ddiMacro}\PYG{o}{.}\PYG{n}{bat} \PYG{n}{SPGPTECH} \PYG{n}{CICDUSER} \PYG{n}{N} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.48} \PYG{n}{sysgroup} \PYG{n}{sysprog} \PYG{o}{\PYGZpc{}}\PYG{n}{u}\PYG{o}{\PYGZpc{}} \PYG{o}{\PYGZpc{}}\PYG{n}{p}\PYG{o}{\PYGZpc{}} \PYG{o}{\PYGZpc{}}\PYG{n}{flag}\PYG{o}{\PYGZpc{}}
\PYG{o}{.}
\PYG{o}{.}
\PYG{o}{.}
\end{sphinxVerbatim}


\section{Uploading the macros}
\label{\detokenize{TN201903:uploading-the-macros}}
Start virtel. Your Virtel should be running with DDi customized to support centralized macros, i.e. macros maintained on the mainframe and synchronized with users local storage environments as and when they connect to the Vitel server. See technical letter TN201704 for further information on Virtel Macros and DDI or the section “Macros in Virtel Storage in the chapter on “Macros” in the Virtel Users Guide.

Before running the “created” upload.bat job make sure that the macro directory structures are correctly defined and that each directory contains a supporting “macros.json” file.

Run the upload.bat job. This will upload the macros.json files to the customized DDI macro structure supported by Virtel. You will be prompted for your userid and password. If you need to cancel the “upload.bat” script press CTRL-C. After the job has completed check the the Virtel DDI entries have been correctly populated.

The upload job writes the CURL output to output.txt. This can be used for diagnostics if uploads are failing.


\section{Writing Macros}
\label{\detokenize{TN201903:writing-macros}}
Unless you have knowledge of JSON constructs and can understand the internal macro.json structure it is not advisable to attempt ot create your own macros. The recommended procedure is to let Virtel create the macros through a local Macros setup - “Green” macro list ICON in the Virtel tool bar. Within this framework you can import and export macros and make any modifications to the macros using the “edit” facility. See technical newsletter TN201704 for more information on writtle Virtel Macros.

\newpage


\chapter{Appendix A}
\label{\detokenize{TN201903:appendix-a}}
\sphinxstylestrong{REXX Procedure LISTUSER}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{*} \PYG{n}{REXX} \PYG{o}{*}\PYG{o}{/}
\PYG{n}{parse} \PYG{n}{arg} \PYG{n}{opt1} \PYG{n}{opt2} \PYG{n}{url} \PYG{n}{ugdir} \PYG{n}{udir} \PYG{o}{.}
\PYG{n}{global\PYGZus{}opt} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{N}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{k}{if} \PYG{p}{(}\PYG{n}{opt1} \PYG{o}{==} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)} \PYG{n}{then}
\PYG{n}{opt1} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ALL}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{k}{if} \PYG{p}{(}\PYG{n}{opt2} \PYG{o}{==} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)} \PYG{n}{then}
\PYG{n}{opt2} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{N}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{k}{if} \PYG{p}{(}\PYG{n}{url}  \PYG{o}{==} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)} \PYG{n}{then}
\PYG{n}{url}  \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{192.168.0.1}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{k}{if} \PYG{p}{(}\PYG{n}{ugdir}  \PYG{o}{==} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)} \PYG{n}{then}
\PYG{n}{ugdir} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{usergroup}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{k}{if} \PYG{p}{(}\PYG{n}{udir}  \PYG{o}{==} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)} \PYG{n}{then}
\PYG{n}{udir} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{user}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{n}{x} \PYG{o}{=} \PYG{n}{OUTTRAP}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{users.}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{address} \PYG{n}{tso} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{sr class(USER)}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{n}{x} \PYG{o}{=} \PYG{n}{OUTTRAP}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{OFF}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{groups}\PYG{o}{.}\PYG{l+m+mi}{0} \PYG{o}{=} \PYG{l+m+mi}{0}
\PYG{n}{say} \PYG{n}{users}\PYG{o}{.}\PYG{l+m+mi}{0} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{users are present on the system}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{n}{call} \PYG{n}{build\PYGZus{}bat}
\PYG{n}{do} \PYG{n}{i}\PYG{o}{=}\PYG{l+m+mi}{1} \PYG{n}{to} \PYG{n}{users}\PYG{o}{.}\PYG{l+m+mi}{0}
\PYG{n}{call} \PYG{n}{get\PYGZus{}infos} \PYG{n}{users}\PYG{o}{.}\PYG{n}{i}
\PYG{n}{end}
\PYG{n}{do} \PYG{n}{i}\PYG{o}{=}\PYG{l+m+mi}{1} \PYG{n}{to} \PYG{n}{groups}\PYG{o}{.}\PYG{l+m+mi}{0}
\PYG{n}{name} \PYG{o}{=} \PYG{n}{groups}\PYG{o}{.}\PYG{n}{i}

\PYG{k}{if} \PYG{p}{(}\PYG{n}{opt1} \PYG{o}{\PYGZlt{}}\PYG{o}{\PYGZgt{}} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ALL}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)} \PYG{n}{then} \PYG{n}{do}
    \PYG{k}{if} \PYG{p}{(}\PYG{n}{opt1} \PYG{o}{==} \PYG{n}{name}\PYG{p}{)} \PYG{n}{then} \PYG{n}{do}
        \PYG{n}{Say} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Group = }\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{groups}\PYG{o}{.}\PYG{n}{i}
        \PYG{n}{z} \PYG{o}{=} \PYG{n}{groups}\PYG{o}{.}\PYG{n}{name}\PYG{o}{.}\PYG{l+m+mi}{0}
        \PYG{n}{do} \PYG{n}{x} \PYG{o}{=} \PYG{l+m+mi}{1} \PYG{n}{to} \PYG{n}{groups}\PYG{o}{.}\PYG{n}{z}\PYG{o}{.}\PYG{l+m+mi}{0}
        \PYG{k}{if} \PYG{p}{(}\PYG{n}{opt2} \PYG{o}{==} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Y}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)} \PYG{n}{then} \PYG{n}{do}
        \PYG{n}{queue} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{call ddiMacro.bat }\PYG{l+s+s2}{\PYGZdq{}}\PYG{n}{groups}\PYG{o}{.}\PYG{n}{i}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ }\PYG{l+s+s2}{\PYGZdq{}}\PYG{n}{groups}\PYG{o}{.}\PYG{n}{z}\PYG{o}{.}\PYG{n}{x}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ }\PYG{l+s+s2}{\PYGZdq{}}\PYG{n}{global\PYGZus{}opt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ }\PYG{l+s+s2}{\PYGZdq{}}\PYG{n}{url}\PYG{p}{,}
        \PYG{n}{ugdir} \PYG{n}{udir}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ }\PYG{l+s+si}{\PYGZpc{}u}\PYG{l+s+si}{\PYGZpc{} \PYGZpc{}}\PYG{l+s+s2}{p}\PYG{l+s+si}{\PYGZpc{} \PYGZpc{}}\PYG{l+s+s2}{flag}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{n}{end}
        \PYG{k}{else}
        \PYG{n}{say} \PYG{n}{groups}\PYG{o}{.}\PYG{n}{z}\PYG{o}{.}\PYG{n}{x}
        \PYG{n}{end}
    \PYG{n}{end}
\PYG{n}{end}

\PYG{k}{else} \PYG{n}{do}
    \PYG{n}{Say} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Group = }\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{groups}\PYG{o}{.}\PYG{n}{i}
    \PYG{n}{z} \PYG{o}{=} \PYG{n}{groups}\PYG{o}{.}\PYG{n}{name}\PYG{o}{.}\PYG{l+m+mi}{0}
    \PYG{n}{do} \PYG{n}{x} \PYG{o}{=} \PYG{l+m+mi}{1} \PYG{n}{to} \PYG{n}{groups}\PYG{o}{.}\PYG{n}{z}\PYG{o}{.}\PYG{l+m+mi}{0}
        \PYG{k}{if} \PYG{p}{(}\PYG{n}{opt2} \PYG{o}{==} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Y}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)} \PYG{n}{then} \PYG{n}{do}
        \PYG{n}{queue} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{call ddiMacro.bat }\PYG{l+s+s2}{\PYGZdq{}}\PYG{n}{groups}\PYG{o}{.}\PYG{n}{i}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ }\PYG{l+s+s2}{\PYGZdq{}}\PYG{n}{groups}\PYG{o}{.}\PYG{n}{z}\PYG{o}{.}\PYG{n}{x}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ }\PYG{l+s+s2}{\PYGZdq{}}\PYG{n}{global\PYGZus{}opt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ }\PYG{l+s+s2}{\PYGZdq{}}\PYG{n}{url}\PYG{p}{,}
        \PYG{n}{ugdir} \PYG{n}{udir}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ }\PYG{l+s+si}{\PYGZpc{}u}\PYG{l+s+si}{\PYGZpc{} \PYGZpc{}}\PYG{l+s+s2}{p}\PYG{l+s+si}{\PYGZpc{} \PYGZpc{}}\PYG{l+s+s2}{flag}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{n}{end}
        \PYG{k}{else}
        \PYG{n}{say} \PYG{n}{groups}\PYG{o}{.}\PYG{n}{z}\PYG{o}{.}\PYG{n}{x}
    \PYG{n}{end}
\PYG{n}{end}

\PYG{n}{end}
\PYG{k}{if} \PYG{p}{(}\PYG{n}{opt2} \PYG{o}{==} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Y}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)} \PYG{n}{then} \PYG{n}{do}
\PYG{n}{queue} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{cls}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{queue} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{echo Upload Ended.}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{queue} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{set /p str=}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{Do you wish to delete the CURL output. y\textbar{}n?}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{n}{queue} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{if /I }\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+si}{\PYGZpc{}s}\PYG{l+s+s1}{tr}\PYG{l+s+s1}{\PYGZpc{}}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{ EQU }\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{y}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{ del output.txt}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{n}{queue} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{color}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{queue} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pause}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{EXECIO}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{queued}\PYG{p}{(}\PYG{p}{)} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{DISKW SYSUT1}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{n}{end}
\PYG{n}{exit}

\PYG{n}{get\PYGZus{}infos}\PYG{p}{:} \PYG{n}{procedure} \PYG{n}{expose} \PYG{n}{groups}\PYG{o}{.} \PYG{n}{userid}\PYG{o}{.}
\PYG{n}{USER}  \PYG{o}{=} \PYG{n}{arg}\PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{)}
\PYG{n}{y} \PYG{o}{=} \PYG{n}{OUTTRAP}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{group.}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{address} \PYG{n}{tso} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{lu (}\PYG{l+s+s1}{\PYGZsq{}}\PYG{n}{USER}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{)}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{n}{y} \PYG{o}{=} \PYG{n}{OUTTRAP}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{OFF}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
\PYG{n}{parse} \PYG{n}{var} \PYG{n}{group}\PYG{o}{.}\PYG{l+m+mi}{1} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{USER=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{n}{userid} \PYG{o}{.} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{OWNER=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{n}{group} \PYG{o}{.}
\PYG{k}{if} \PYG{n}{group} \PYG{o}{\PYGZlt{}}\PYG{o}{\PYGZgt{}} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{then} \PYG{n}{do}
    \PYG{k}{if} \PYG{p}{(}\PYG{n}{groups}\PYG{o}{.}\PYG{n}{group} \PYG{o}{\PYGZlt{}}\PYG{o}{\PYGZgt{}} \PYG{n}{group}\PYG{p}{)} \PYG{n}{then} \PYG{n}{do}
        \PYG{n}{groups}\PYG{o}{.}\PYG{n}{group} \PYG{o}{=} \PYG{n}{group}
        \PYG{n}{n} \PYG{o}{=} \PYG{n}{groups}\PYG{o}{.}\PYG{l+m+mi}{0}
        \PYG{n}{n} \PYG{o}{=} \PYG{n}{n} \PYG{o}{+} \PYG{l+m+mi}{1}
        \PYG{n}{groups}\PYG{o}{.}\PYG{l+m+mi}{0} \PYG{o}{=} \PYG{n}{n}
        \PYG{n}{groups}\PYG{o}{.}\PYG{n}{n} \PYG{o}{=} \PYG{n}{group}
        \PYG{n}{groups}\PYG{o}{.}\PYG{n}{n}\PYG{o}{.}\PYG{l+m+mi}{0} \PYG{o}{=}\PYG{l+m+mi}{0}
        \PYG{n}{groups}\PYG{o}{.}\PYG{n}{group}\PYG{o}{.}\PYG{l+m+mi}{0} \PYG{o}{=} \PYG{n}{n}
    \PYG{n}{end}
    \PYG{n}{x} \PYG{o}{=} \PYG{n}{groups}\PYG{o}{.}\PYG{n}{group}\PYG{o}{.}\PYG{l+m+mi}{0}
    \PYG{n}{n} \PYG{o}{=} \PYG{n}{groups}\PYG{o}{.}\PYG{n}{x}\PYG{o}{.}\PYG{l+m+mi}{0}
    \PYG{n}{n} \PYG{o}{=} \PYG{n}{n} \PYG{o}{+} \PYG{l+m+mi}{1}
    \PYG{n}{groups}\PYG{o}{.}\PYG{n}{x}\PYG{o}{.}\PYG{l+m+mi}{0} \PYG{o}{=} \PYG{n}{n}
    \PYG{n}{groups}\PYG{o}{.}\PYG{n}{x}\PYG{o}{.}\PYG{n}{n} \PYG{o}{=} \PYG{n}{userid}
\PYG{n}{end}
\PYG{k}{return}

\PYG{n}{build\PYGZus{}bat}\PYG{p}{:} \PYG{n}{procedure}
\PYG{n}{queue} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{@echo off}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{queue} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{rem Upload DDI macros to Virtel via CURL}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{queue} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{rem GROUP=}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{1 USERID=}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{2 Global=}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{3 ip address=}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{4}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{queue} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{rem Group Directory=}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{5 User Directory=}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{6}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{queue} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{title Virtel Macro Upload V1.0}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{queue} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{if exist }\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{output.txt}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{ del output.txt}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{queue} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{curl \PYGZhy{}V}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{queue} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{echo This program will invoke CURL. See https://curl.haxx.se/}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{queue} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pause}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{queue} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{cls}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{queue} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{color 4}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{queue} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{set /p u=Enter your userid :}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{queue} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{set /p p=Enter your password :}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{queue} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{set flag=0}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{queue} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{cls}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{k}{return}
\end{sphinxVerbatim}


\chapter{Appendix B}
\label{\detokenize{TN201903:appendix-b}}
\sphinxstylestrong{JCL to run REXX Procedure LISTUSRS}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{/}\PYG{n}{yourhlqB} \PYG{n}{JOB} \PYG{n}{CLASS}\PYG{o}{=}\PYG{n}{A}\PYG{p}{,}\PYG{n}{MSGCLASS}\PYG{o}{=}\PYG{n}{X}\PYG{p}{,}\PYG{n}{NOTIFY}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{SYSUID}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}  \PYG{n}{RACF} \PYG{p}{:} \PYG{n}{List} \PYG{n}{Groups} \PYG{o+ow}{and} \PYG{n}{users}                           \PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}} \PYG{n}{Change} \PYG{n+nb}{all} \PYG{n}{occurences} \PYG{n}{of} \PYG{n}{yourhlq} \PYG{n}{to} \PYG{n}{your} \PYG{n}{HLQ}\PYG{o}{.}         \PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}} \PYG{n}{Change} \PYG{n+nb}{all} \PYG{n}{occurences} \PYG{n}{nnn} \PYG{n}{to} \PYG{n}{your} \PYG{n}{Virtel} \PYG{n}{release}      \PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}} \PYG{n}{List} \PYG{n+nb}{all} \PYG{n}{groups} \PYG{o+ow}{and} \PYG{n}{users}                             \PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}                                                       \PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}  \PYG{o}{\PYGZpc{}}\PYG{n}{LISTUSER}                                              \PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}                                                       \PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}} \PYG{n}{List} \PYG{n}{a} \PYG{n}{group} \PYG{o+ow}{and} \PYG{n}{its} \PYG{n}{users}                            \PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}                                                       \PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}  \PYG{o}{\PYGZpc{}}\PYG{n}{LISTUSER} \PYG{n}{CTKGROUP}                                     \PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}                                                       \PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}} \PYG{n}{Create} \PYG{n}{ddiMacro} \PYG{n}{bat} \PYG{n}{file}\PYG{o}{.} \PYG{n}{Write} \PYG{n}{to} \PYG{n}{SYSUT1}\PYG{o}{.} \PYG{n}{Use}        \PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}} \PYG{n}{defaults} \PYG{k}{for} \PYG{n}{url}\PYG{p}{,} \PYG{n}{group} \PYG{n}{directory} \PYG{o+ow}{and} \PYG{n}{user} \PYG{n}{directory}  \PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}                                                       \PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}  \PYG{o}{\PYGZpc{}}\PYG{n}{LISTUSER} \PYG{n}{CTKGROUP} \PYG{n}{Y}                                   \PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}                                                       \PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}} \PYG{n}{Create} \PYG{n}{ddiMacro} \PYG{n}{bat} \PYG{n}{file}\PYG{o}{.} \PYG{n}{Write} \PYG{n}{to} \PYG{n}{SYSUT1}\PYG{o}{.} \PYG{n}{Use} \PYG{n}{defined} \PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}} \PYG{n}{url}\PYG{p}{,} \PYG{n}{group} \PYG{n}{directory} \PYG{o+ow}{and} \PYG{n}{user} \PYG{n}{directory}\PYG{o}{.}              \PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}                                                       \PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}  \PYG{o}{\PYGZpc{}}\PYG{n}{LISTUSER} \PYG{n}{SPGPTECH} \PYG{n}{Y} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.48} \PYG{n}{sysgroup} \PYG{n}{sysprog}   \PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}                                                       \PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{STEP0}    \PYG{n}{EXEC} \PYG{n}{PGM}\PYG{o}{=}\PYG{n}{IEFBR14}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{DDA}      \PYG{n}{DD} \PYG{n}{DSN}\PYG{o}{=}\PYG{n}{yourhlq}\PYG{o}{.}\PYG{n}{TEMP}\PYG{p}{,}\PYG{n}{DISP}\PYG{o}{=}\PYG{p}{(}\PYG{n}{MOD}\PYG{p}{,}\PYG{n}{DELETE}\PYG{p}{)}\PYG{p}{,}\PYG{n}{UNIT}\PYG{o}{=}\PYG{n}{SYSDA}\PYG{p}{,}
\PYG{o}{/}\PYG{o}{/}         \PYG{n}{SPACE}\PYG{o}{=}\PYG{p}{(}\PYG{n}{TRK}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{)}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{STEP1}    \PYG{n}{EXEC} \PYG{n}{PGM}\PYG{o}{=}\PYG{n}{IKJEFT1A}\PYG{p}{,}\PYG{n}{DYNAMNBR}\PYG{o}{=}\PYG{l+m+mi}{20}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSEXEC}  \PYG{n}{DD}  \PYG{n}{DSN}\PYG{o}{=}\PYG{n}{yourhlq}\PYG{o}{.}\PYG{n}{VIRTnnn}\PYG{o}{.}\PYG{n}{CNTL}\PYG{p}{,}\PYG{n}{DISP}\PYG{o}{=}\PYG{n}{SHR} \PYG{o}{\PYGZlt{}}\PYG{o}{==}\PYG{o}{=} \PYG{n}{CHANGE}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSTSPRT} \PYG{n}{DD}  \PYG{n}{SYSOUT}\PYG{o}{=}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSUT1}   \PYG{n}{DD}  \PYG{n}{DSN}\PYG{o}{=}\PYG{n}{yourhlq}\PYG{o}{.}\PYG{n}{TEMP}\PYG{p}{,}\PYG{n}{DISP}\PYG{o}{=}\PYG{p}{(}\PYG{p}{,}\PYG{n}{CATLG}\PYG{p}{)}\PYG{p}{,}\PYG{n}{UNIT}\PYG{o}{=}\PYG{n}{SYSDA}\PYG{p}{,}\PYG{n}{SPACE}\PYG{o}{=}\PYG{p}{(}\PYG{n}{TRK}\PYG{p}{,}\PYG{l+m+mi}{5}\PYG{p}{)}\PYG{p}{,}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{DCB}\PYG{o}{=}\PYG{p}{(}\PYG{n}{RECFM}\PYG{o}{=}\PYG{n}{VB}\PYG{p}{,}\PYG{n}{LRECL}\PYG{o}{=}\PYG{l+m+mi}{255}\PYG{p}{,}\PYG{n}{BLKSIZE}\PYG{o}{=}\PYG{l+m+mi}{10000}\PYG{p}{)}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{EXAMPLES} \PYG{n}{DD}  \PYG{o}{*}
\PYG{o}{\PYGZpc{}}\PYG{n}{LISTUSER}
\PYG{o}{\PYGZpc{}}\PYG{n}{LISTUSER} \PYG{n}{CTKGROUP}
\PYG{o}{\PYGZpc{}}\PYG{n}{LISTUSER} \PYG{n}{CTKGROUP} \PYG{n}{Y}
\PYG{o}{\PYGZpc{}}\PYG{n}{LISTUSER} \PYG{n}{CTKGROUP} \PYG{n}{Y} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.48} \PYG{n}{usergroup} \PYG{n}{user}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSTSIN}  \PYG{n}{DD}  \PYG{o}{*}
\PYG{o}{\PYGZpc{}}\PYG{n}{LISTUSER} \PYG{n}{SPGPTECH} \PYG{n}{Y} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.48} \PYG{n}{sysgroup} \PYG{n}{sysprog}
\end{sphinxVerbatim}


\chapter{Appendix C}
\label{\detokenize{TN201903:appendix-c}}
\sphinxstylestrong{ddiMacros.bat script}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nd}{@echo} \PYG{n}{off}
\PYG{n}{color} \PYG{n}{F}
\PYG{n}{rem} \PYG{n}{echo} \PYG{n}{Group}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{1} \PYG{n}{User}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{2} \PYG{n}{Global}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3} \PYG{n}{URL}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{4} \PYG{n}{AssociateGroup}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{5} \PYG{n}{AssociateUser}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{6} \PYG{n}{Admin}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{7} \PYG{n}{PW}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{8}
\PYG{n+nb}{set} \PYG{n}{group}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{1}
\PYG{n+nb}{set} \PYG{n}{user}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{2}
\PYG{n+nb}{set} \PYG{n}{ag}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{5}
\PYG{n+nb}{set} \PYG{n}{au}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{6}
\PYG{n+nb}{set} \PYG{n}{userid}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{7}
\PYG{n+nb}{set} \PYG{n}{password}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{8}
\PYG{n+nb}{set} \PYG{n}{url\PYGZus{}getGroup}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{http://}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{4}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{:41001/SECURE/capabilityCode.json+USRCAP?GROUP=}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n+nb}{set} \PYG{n}{url\PYGZus{}getUser}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{http://}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{4}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{:41001/SECURE/capabilityCode.json+USRCAP?USER=}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n+nb}{set} \PYG{n}{url\PYGZus{}glb}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{http://}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{4}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{:41001/SECURE/upload.txt+uplglb}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n+nb}{set} \PYG{n}{url\PYGZus{}grp}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{http://}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{4}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{:41001/SECURE/upload.txt+uplgrp+x\PYGZhy{}Virtel\PYGZhy{}group\PYGZhy{}Directory:}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n+nb}{set} \PYG{n}{url\PYGZus{}usr}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{http://}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{4}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{:41001/SECURE/upload.txt+uplusr+x\PYGZhy{}Virtel\PYGZhy{}user\PYGZhy{}Directory:}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n+nb}{set} \PYG{n}{\PYGZus{}global}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}
\PYG{n+nb}{set} \PYG{n}{flag}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{9}

\PYG{k}{if}  \PYG{p}{[}\PYG{o}{\PYGZpc{}}\PYG{n}{\PYGZus{}global}\PYG{o}{\PYGZpc{}}\PYG{p}{]} \PYG{o}{==} \PYG{p}{[}\PYG{n}{Y}\PYG{p}{]}  \PYG{p}{(}
    \PYG{n}{curl} \PYG{o}{\PYGZhy{}}\PYG{n}{v} \PYG{o}{\PYGZhy{}}\PYG{n}{F} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{file=@global/macros.json;type=application/json}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{\PYGZhy{}}\PYG{n}{u} \PYG{o}{\PYGZpc{}}\PYG{n}{userid}\PYG{o}{\PYGZpc{}}\PYG{p}{:}\PYG{o}{\PYGZpc{}}\PYG{n}{password}\PYG{o}{\PYGZpc{}} \PYG{o}{\PYGZpc{}}\PYG{n}{url\PYGZus{}glb}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{1} \PYG{o}{\PYGZgt{}\PYGZgt{}} \PYG{n}{output}\PYG{o}{.}\PYG{n}{txt} \PYG{l+m+mi}{2}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZam{}}\PYG{l+m+mi}{1}
\PYG{p}{)}
\PYG{n}{curl} \PYG{o}{\PYGZhy{}}\PYG{n}{v} \PYG{o}{\PYGZhy{}}\PYG{n}{u} \PYG{o}{\PYGZpc{}}\PYG{n}{userid}\PYG{o}{\PYGZpc{}}\PYG{p}{:}\PYG{o}{\PYGZpc{}}\PYG{n}{password}\PYG{o}{\PYGZpc{}}  \PYG{o}{\PYGZpc{}}\PYG{n}{url\PYGZus{}getGroup}\PYG{o}{\PYGZpc{}}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{1} \PYG{o}{\PYGZgt{}} \PYG{n}{curl}\PYG{o}{.}\PYG{n}{txt} \PYG{l+m+mi}{2}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZam{}}\PYG{l+m+mi}{1}
\PYG{k}{for} \PYG{o}{/}\PYG{n}{f} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{delims==}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{\PYGZpc{}}\PYG{o}{\PYGZpc{}}\PYG{n}{a} \PYG{o+ow}{in} \PYG{p}{(}\PYG{n}{curl}\PYG{o}{.}\PYG{n}{txt}\PYG{p}{)} \PYG{n}{do} \PYG{n+nb}{set} \PYG{n}{var}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{o}{\PYGZpc{}}\PYG{n}{a}\PYG{o}{\PYGZam{}}\PYG{n}{call} \PYG{p}{:}\PYG{n}{getGroup}
\PYG{n}{curl} \PYG{o}{\PYGZhy{}}\PYG{n}{v} \PYG{o}{\PYGZhy{}}\PYG{n}{u} \PYG{o}{\PYGZpc{}}\PYG{n}{userid}\PYG{o}{\PYGZpc{}}\PYG{p}{:}\PYG{o}{\PYGZpc{}}\PYG{n}{password}\PYG{o}{\PYGZpc{}}  \PYG{o}{\PYGZpc{}}\PYG{n}{url\PYGZus{}getUser}\PYG{o}{\PYGZpc{}}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{2} \PYG{o}{\PYGZgt{}} \PYG{n}{curl}\PYG{o}{.}\PYG{n}{txt} \PYG{l+m+mi}{2}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZam{}}\PYG{l+m+mi}{1}
\PYG{k}{for} \PYG{o}{/}\PYG{n}{f} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{delims==}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{\PYGZpc{}}\PYG{o}{\PYGZpc{}}\PYG{n}{a} \PYG{o+ow}{in} \PYG{p}{(}\PYG{n}{curl}\PYG{o}{.}\PYG{n}{txt}\PYG{p}{)} \PYG{n}{do} \PYG{n+nb}{set} \PYG{n}{var}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{o}{\PYGZpc{}}\PYG{n}{a}\PYG{o}{\PYGZam{}}\PYG{n}{call} \PYG{p}{:}\PYG{n}{getUser}
\PYG{n}{color} \PYG{l+m+mi}{4}
\PYG{n}{exit} \PYG{o}{/}\PYG{n}{b}

\PYG{p}{:}\PYG{n}{getGroup}
\PYG{k}{if} \PYG{o+ow}{not} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{x}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{var:x\PYGZhy{}Virtel\PYGZhy{}group\PYGZhy{}Directory:=}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{==} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{x}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{var}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{(}
    \PYG{n}{call} \PYG{p}{:}\PYG{n}{uploadGroup} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{x}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{var}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{p}{)}
\PYG{n}{goto} \PYG{p}{:}\PYG{n}{eof}

\PYG{p}{:}\PYG{n}{uploadGroup}
\PYG{k}{if} \PYG{o}{\PYGZpc{}}\PYG{n}{flag}\PYG{o}{\PYGZpc{}}\PYG{o}{==}\PYG{l+m+mi}{0} \PYG{p}{(}
\PYG{n}{echo} \PYG{n}{Uploading} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{macros.json}\PYG{l+s+s1}{\PYGZsq{}} \PYG{k}{for} \PYG{n}{group} \PYG{o}{\PYGZpc{}}\PYG{n}{group}\PYG{o}{\PYGZpc{}} \PYG{k+kn}{from} \PYG{n+nn}{directory} \PYG{o}{\PYGZpc{}}\PYG{n}{ag}\PYG{o}{\PYGZpc{}}\PYG{o}{.}
\PYG{k}{for} \PYG{o}{/}\PYG{n}{F} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{tokens=1\PYGZhy{}2 delims=:,}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{\PYGZpc{}}\PYG{o}{\PYGZpc{}}\PYG{n}{i} \PYG{o+ow}{in} \PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{\PYGZti{}1}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{n}{do} \PYG{p}{(}
    \PYG{n}{curl} \PYG{o}{\PYGZhy{}}\PYG{n}{v} \PYG{o}{\PYGZhy{}}\PYG{n}{F} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{file=@}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZpc{}}\PYG{n}{ag}\PYG{o}{\PYGZpc{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{/macros.json;type=application/json}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{\PYGZhy{}}\PYG{n}{u} \PYG{o}{\PYGZpc{}}\PYG{n}{userid}\PYG{o}{\PYGZpc{}}\PYG{p}{:}\PYG{o}{\PYGZpc{}}\PYG{n}{password}\PYG{o}{\PYGZpc{}} \PYG{o}{\PYGZpc{}}\PYG{n}{url\PYGZus{}grp}\PYG{o}{\PYGZpc{}}\PYG{o}{\PYGZpc{}}\PYG{o}{\PYGZpc{}}\PYG{n}{j1} \PYG{o}{\PYGZgt{}\PYGZgt{}} \PYG{n}{output}\PYG{o}{.}\PYG{n}{txt} \PYG{l+m+mi}{2}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZam{}}\PYG{l+m+mi}{1}
\PYG{p}{)}
\PYG{n+nb}{set} \PYG{n}{flag}\PYG{o}{=}\PYG{l+m+mi}{1}
\PYG{p}{)}
\PYG{n}{exit} \PYG{o}{/}\PYG{n}{b}

\PYG{p}{:}\PYG{n}{getUser}
\PYG{k}{if} \PYG{o+ow}{not} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{x}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{var:x\PYGZhy{}Virtel\PYGZhy{}user\PYGZhy{}Directory:=}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{==} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{x}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{var}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{call} \PYG{p}{:}\PYG{n}{uploadUser} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{x}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{var}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{goto} \PYG{p}{:}\PYG{n}{eof}

\PYG{p}{:}\PYG{n}{uploadUser}
\PYG{n}{echo} \PYG{n}{Uploading} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{macros.json}\PYG{l+s+s1}{\PYGZsq{}} \PYG{k}{for} \PYG{n}{user} \PYG{o}{\PYGZpc{}}\PYG{n}{user}\PYG{o}{\PYGZpc{}} \PYG{k+kn}{from} \PYG{n+nn}{directory} \PYG{o}{\PYGZpc{}}\PYG{n}{au}\PYG{o}{\PYGZpc{}}\PYG{o}{.}
\PYG{k}{for} \PYG{o}{/}\PYG{n}{F} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{tokens=1\PYGZhy{}2 delims=:,}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{\PYGZpc{}}\PYG{o}{\PYGZpc{}}\PYG{n}{i} \PYG{o+ow}{in} \PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{\PYGZti{}1}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{n}{do} \PYG{p}{(}
    \PYG{n}{curl} \PYG{o}{\PYGZhy{}}\PYG{n}{v} \PYG{o}{\PYGZhy{}}\PYG{n}{F} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{file=@}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZpc{}}\PYG{n}{au}\PYG{o}{\PYGZpc{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{/macros.json;type=application/json}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{\PYGZhy{}}\PYG{n}{u} \PYG{o}{\PYGZpc{}}\PYG{n}{userid}\PYG{o}{\PYGZpc{}}\PYG{p}{:}\PYG{o}{\PYGZpc{}}\PYG{n}{password}\PYG{o}{\PYGZpc{}} \PYG{o}{\PYGZpc{}}\PYG{n}{url\PYGZus{}usr}\PYG{o}{\PYGZpc{}}\PYG{o}{\PYGZpc{}}\PYG{o}{\PYGZpc{}}\PYG{n}{j1} \PYG{o}{\PYGZgt{}\PYGZgt{}} \PYG{n}{output}\PYG{o}{.}\PYG{n}{txt} \PYG{l+m+mi}{2}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZam{}}\PYG{l+m+mi}{1}
\PYG{p}{)}
\PYG{n}{exit} \PYG{o}{/}\PYG{n}{b}
\end{sphinxVerbatim}



\renewcommand{\indexname}{Index}
\printindex
\end{document}
%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax

\PassOptionsToPackage{warn}{textcomp}


\usepackage{cmap}

\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}

\usepackage[Bjarne]{fncychap}
\usepackage[,numfigreset=1,mathnumfig]{sphinx}

\fvset{fontsize=\small}
\usepackage{geometry}

% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}
\addto\captionsenglish{\renewcommand{\contentsname}{Table of Contents:}}

\addto\captionsenglish{\renewcommand{\figurename}{Fig.\@ }}
\makeatletter
\def\fnum@figure{\figurename\thefigure{}}
\makeatother
\addto\captionsenglish{\renewcommand{\tablename}{Table }}
\makeatletter
\def\fnum@table{\tablename\thetable{}}
\makeatother
\addto\captionsenglish{\renewcommand{\literalblockname}{Listing}}

\addto\captionsenglish{\renewcommand{\literalblockcontinuedname}{continued from previous page}}
\addto\captionsenglish{\renewcommand{\literalblockcontinuesname}{continues on next page}}
\addto\captionsenglish{\renewcommand{\sphinxnonalphabeticalgroupname}{Non-alphabetical}}
\addto\captionsenglish{\renewcommand{\sphinxsymbolsname}{Symbols}}
\addto\captionsenglish{\renewcommand{\sphinxnumbersname}{Numbers}}

\addto\extrasenglish{\def\pageautorefname{page}}

\setcounter{tocdepth}{2}


% Enable unicode and use Courier New to ensure the card suit
% characters that are part of the 'random' module examples
% appear properly in the PDF output.
\usepackage{fontspec}
\setmonofont{Courier New}


\title{Virtel Connectivity Guide}
\date{Aug 22, 2021}
\release{4.60}
\author{Syspertec Communications}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{Release}
\makeindex
\begin{document}

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{connectivity_guide::doc}}


\sphinxincludegraphics[scale=0.5]{{logo_virtel_web}.png}

\sphinxstylestrong{VIRTEL Connectivity Reference}

\begin{sphinxadmonition}{warning}{Warning:}
This is a draft version of the document.
\end{sphinxadmonition}

Version : 4.60 Draft

Release Date : 11 October 2020. Publication Date : 25/11/2020

Syspertec Communication

196, Bureaux de la Colline 92213 Saint-Cloud Cedex Tél. : +33 (0) 1 46 02 60 42

\sphinxhref{http://www.syspertec.com/}{www.syspertec.com}

\begin{sphinxadmonition}{note}{Note:}
Reproduction, transfer, distribution, or storage, in any form, of all or any part of
the contents of this document, except by prior authorization of SysperTec
Communication, is prohibited.

Every possible effort has been made by SysperTec Communication to ensure that this document
is complete and relevant. In no case can SysperTec Communication be held responsible for
any damages, direct or indirect, caused by errors or omissions in this document.

As SysperTec Communication uses a continuous development methodology; the information
contained in this document may be subject to change without notice. Nothing in this
document should be construed in any manner as conferring a right to use, in whole or in
part, the products or trademarks quoted herein.

“SysperTec Communication” and “VIRTEL” are registered trademarks. Names of other products
and companies mentioned in this document may be trademarks or registered trademarks of
their respective owners.
\end{sphinxadmonition}


\chapter{Configuring Virtel}
\label{\detokenize{connectivity_guide:configuring-virtel}}\label{\detokenize{connectivity_guide:v460cn-introduction}}

\section{Accessing the configuration manager}
\label{\detokenize{connectivity_guide:accessing-the-configuration-manager}}
The configuration manager can be access in one of three ways.


\subsection{Virtel 3270 Application}
\label{\detokenize{connectivity_guide:virtel-3270-application}}\begin{enumerate}
\def\theenumi{\arabic{enumi}}
\def\labelenumi{\theenumi .}
\makeatletter\def\p@enumii{\p@enumi \theenumi .}\makeatother
\item {} 
By logging onto the Virtel application as defined by the APPLNAME in the TCT or at start up in the Virtel JCL parameters.

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{LOGON} \PYG{n}{APPLID}\PYG{o}{=}\PYG{n}{VIRTEL}
\end{sphinxVerbatim}

The following main menu will appear:-

\sphinxincludegraphics{{image76}.png}

Enter you security credentials and the primary menu will appear.

\sphinxincludegraphics[scale=0.45]{{image77}.png}

Enter F1 to enter the configuration menu of the configuration manager.

\sphinxincludegraphics[scale=0.45]{{image78}.png}

\newpage


\subsection{THe Web Portal (3270)}
\label{\detokenize{connectivity_guide:the-web-portal-3270}}\begin{enumerate}
\def\theenumi{\arabic{enumi}}
\def\labelenumi{\theenumi .}
\makeatletter\def\p@enumii{\p@enumi \theenumi .}\makeatother
\setcounter{enumi}{1}
\item {} 
By accessing Virtel through the administration port 41001.

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.33}\PYG{p}{:}\PYG{l+m+mi}{41001}\PYG{o}{/}
\end{sphinxVerbatim}

The following page will be displayed:-

\sphinxincludegraphics[scale=0.3]{{image79}.png}

Click the Admin (3270) link and the configuration menu will appear.

\sphinxincludegraphics[scale=0.3]{{image80}.png}

\newpage


\subsection{The Web Portal (GUI)}
\label{\detokenize{connectivity_guide:the-web-portal-gui}}\begin{enumerate}
\def\theenumi{\arabic{enumi}}
\def\labelenumi{\theenumi .}
\makeatletter\def\p@enumii{\p@enumi \theenumi .}\makeatother
\setcounter{enumi}{2}
\item {} 
Accessing Virtel as in the Web Portal (3270) but instead of clicking Admin (3270) click Admin (GUI). You will be presented with a GUI view of the 3270 configuration screens.

\end{enumerate}

\sphinxincludegraphics[scale=0.3]{{image81}.png}

\newpage


\section{Configurable Elements}
\label{\detokenize{connectivity_guide:configurable-elements}}
The VIRTEL configuration is stored in a VSAM file called the “ARBO file” (VIRARBO). The ARBO file contains various types of elements, which are described in this chapter:
\begin{itemize}
\item {} 
Lines, which represent connections between VIRTEL and other network entities

\item {} 
Rules, which are applied to incoming calls in order to establish the appropriate entry point for the call

\item {} 
Terminals, which represent the virtual circuits through which calls flow between VIRTEL and its partners

\item {} 
Entry points, which define how the call is processed by VIRTEL and contain a list of transactions available to the incoming call

\item {} 
Transactions, which define VTAM applications or external servers which process incoming calls

\item {} 
External servers, which define the connection parameters used by VIRTEL to connect outgoing calls to other network entities

\end{itemize}

\sphinxincludegraphics{{image69}.png}

\sphinxstyleemphasis{Configurable elements of Virtel}

The diagram above describes the data flow between a TSO user accessing TSO on the mainframe. To support this session various Virtel configurable elements, which are maintained in the ARBO file, are used. The Virtel line definition represents an open port in TCP/IP which is the target of the browser’s URL. The Virtel line is associated with a Virtel Entry point which in turn is associated with a list of Virtel transactions. One of these transactions is a VTAM application definition representing TSO. The incoming URL determines the transaction to associate with this session call. In this example the transaction TSO has been identified in the URL string as a HTTP parameter. When the Virtel engine processes the incoming call it will establish a SNA session with the TSO VTAM application. From the TSO VTAM application perspective it will be as if a user had connected using a standard LU2 type terminal (3270). Virtel will convert datastreams between 3270 and HTML in support of the underlying session between the browser and TSO. This conversion process will use several Virtel terminal definitions; 1 or more to represent the browser and another to represent the VTAM interface with TSO. By convention “LOC” terminals reflect units of work in supporting the browser and “VTA” terminals represent the interface to the VTAM applications. Virtel terminal definitions are associated with a Virtel line.


\subsection{Unloading Configurable Elements}
\label{\detokenize{connectivity_guide:unloading-configurable-elements}}
The Virtel program VIRCONF can be used to LOAD or UNLOAD the ARBO VSAM file which contains the configurable elements. The default statements that are used to build the initial ARBO VSAM file are contained in the CNTL library as member ARBOLOAD. This member contains every statement that could potentially be used when defining the Virtel ARBO VSAM file, including optional statements which may not be applicable. To unload the default ARBO VSAM file run the following JCL:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
//VIRARBOU JOB 1,ARBOUNLD,CLASS=A,MSGCLASS=X,NOTIFY=\PYGZam{}SYSUID
//*
//* THIS JOB UNLOADS AN ARBO FILE
//*
// SET LOAD=yourqual.VIRTnnn.LOADLIB
// SET ARBO=yourqual.VIRTnnn.ARBO
//*
//UNLOAD  EXEC PGM=VIRCONF,PARM=UNLOAD
//STEPLIB  DD  DSN=\PYGZam{}LOAD,DISP=SHR
//SYSPRINT DD  SYSOUT=*
//SYSUDUMP DD  SYSOUT=*
//VIRARBO  DD  DSN=\PYGZam{}ARBO,DISP=SHR,AMP=(\PYGZsq{}RMODE31=NONE\PYGZsq{})
//SYSPUNCH DD  DSN=\PYGZam{}SYSUID..VIRCONF.SYSIN,DISP=(,CATLG),
//             UNIT=SYSDA,VOL=SER=??????,SPACE=(TRK,(5,1)),
//             DCB=(RECFM=FB,LRECL=80,BLKSIZE=6080)
\end{sphinxVerbatim}

\sphinxstyleemphasis{The ARBO UNLOAD Job}

The output file contains all the default definitions that make up the configurable Virtel elements. These definitions can be used as a template for building new configurable elements such as lines, entry points, transactions, etc. See the VIRCONF utility section in the \sphinxstylestrong{Virtel Installation Guide} for further information on the VIRCONF utility and maintaining the VSAM ARBO file.

\newpage


\subsection{Line Element}
\label{\detokenize{connectivity_guide:line-element}}
The Line element is the main control element in the definition hierarchy. When Virtel receives a call in from a user, via their browser, it is targeted towards a particular port which is associated with a Line element.  The Line element points to the default entry point and also identifies the listening port. By default, Virtel delivers two HTTP line elements in its default configuration. Line W-HTTP associated with port 41001 and Line C-HTTP associated with port 41002. Line W-HTTP(41001) is usually associated with administration functions and should be secured for administration use only. Line C-HTTP(41002) is an example of a line for for client applications. It is not advisable to use 41001 as your client port. USe 41002 or set-up another line using 41002 as a template, for example 41003.

\sphinxincludegraphics{{image70}.png}
\sphinxstyleemphasis{Line Detail Definition}

It is also defined in the Arbo Configuration statements:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{LINE} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{C}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}\PYG{p}{,}                                         \PYG{o}{\PYGZhy{}}
\PYG{n}{NAME}\PYG{o}{=}\PYG{n}{HTTP}\PYG{o}{\PYGZhy{}}\PYG{n}{CLI}\PYG{p}{,}                                          \PYG{o}{\PYGZhy{}}
\PYG{n}{LOCADDR}\PYG{o}{=}\PYG{p}{:}\PYG{l+m+mi}{41002}\PYG{p}{,}                                         \PYG{o}{\PYGZhy{}}
\PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{HTTP line (entry point CLIWHOST)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                \PYG{o}{\PYGZhy{}}
\PYG{n}{TERMINAL}\PYG{o}{=}\PYG{n}{CL}\PYG{p}{,}                                            \PYG{o}{\PYGZhy{}}
\PYG{n}{ENTRY}\PYG{o}{=}\PYG{n}{CLIWHOST}\PYG{p}{,}                                         \PYG{o}{\PYGZhy{}}
\PYG{n}{TYPE}\PYG{o}{=}\PYG{n}{TCP1}\PYG{p}{,}                                              \PYG{o}{\PYGZhy{}}
\PYG{n}{INOUT}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,}                                                \PYG{o}{\PYGZhy{}}
\PYG{n}{PROTOCOL}\PYG{o}{=}\PYG{n}{VIRHTTP}\PYG{p}{,}                                       \PYG{o}{\PYGZhy{}}
\PYG{n}{TIMEOUT}\PYG{o}{=}\PYG{l+m+mi}{0000}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
\PYG{n}{ACTION}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,}                                               \PYG{o}{\PYGZhy{}}
\PYG{n}{WINSZ}\PYG{o}{=}\PYG{l+m+mi}{0000}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
\PYG{n}{PKTSZ}\PYG{o}{=}\PYG{l+m+mi}{0000}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
\PYG{n}{RETRY}\PYG{o}{=}\PYG{l+m+mi}{0010}
\end{sphinxVerbatim}

The same information is reflected in both. The ARBO definitions are used to build the ARBO VSAM file which the Virtel Sub Applications access to display, modify and delete configuration elements. Another key item in the line definition is the TERMINAL prefix. This prefix is used to associate a line with the terminal definitions. In the example above the prefix of CL means that this line will only use terminal beginning “CL”.


\subsection{Entry Point Element}
\label{\detokenize{connectivity_guide:entry-point-element}}
The Entry point element is associated with a group of transactions. Transactions are the interface to external components like VTAM applications (CICS, TSO, IMS etc.) or external servers. Transactions are also used to define internal Virtel tasks and configuration elements like directory entries, upload programs, menu programs, signon programs. A line can be associated with any entry point defined within the configuration. Every line must have a default entry point. Virtel Rule definitions can be used to assign a different Entry point to a call in request based upon a range of criteria - incoming IP Address, Work Station Name, Userid etc.

\sphinxincludegraphics{{image71}.png}
\sphinxstyleemphasis{Entry Point Definition}

It can also defined with the Arbo Configuration statements:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{ENTRY} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{CLIWHOST}\PYG{p}{,}                                      \PYG{o}{\PYGZhy{}}
\PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{HTTP entry point (CLIENT application)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}           \PYG{o}{\PYGZhy{}}
\PYG{n}{TRANSACT}\PYG{o}{=}\PYG{n}{CLI}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
\PYG{n}{TIMEOUT}\PYG{o}{=}\PYG{l+m+mi}{0720}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
\PYG{n}{ACTION}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,}                                               \PYG{o}{\PYGZhy{}}
\PYG{n}{EMUL}\PYG{o}{=}\PYG{n}{HTML}\PYG{p}{,}                                              \PYG{o}{\PYGZhy{}}
\PYG{n}{SIGNON}\PYG{o}{=}\PYG{n}{VIR0020H}\PYG{p}{,}                                        \PYG{o}{\PYGZhy{}}
\PYG{n}{MENU}\PYG{o}{=}\PYG{n}{VIR0021A}\PYG{p}{,}                                          \PYG{o}{\PYGZhy{}}
\PYG{n}{IDENT}\PYG{o}{=}\PYG{n}{SCENLOGM}\PYG{p}{,}                                         \PYG{o}{\PYGZhy{}}
\PYG{n}{EXTCOLOR}\PYG{o}{=}\PYG{n}{E}
\end{sphinxVerbatim}

The salient point in the Entry Point element is the TRANSACT prefix. This associates transactions with a particular Entry point. In the sample above transactions that begin with CLI will be associated with entry point CLIWHOST which is the default entry point for line C-HTTP(41002). An example of using an Entry point is that you might want to associate productions users with line 41004 and other users with line 41005. In this example you would define two new lines, set default entry points PRODHOST and USERHOST. In those entry point definitions the prefix for production transactions would PRD and for user transactions USR.


\subsection{Transaction Element}
\label{\detokenize{connectivity_guide:transaction-element}}
Transactions define the programs that Virtel will run in order to support a session requirement. Transactions are normally identified within the incoming URL. For example the following URL requests that Virtel starts a Virtel transaction called CICS:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.33}\PYG{p}{:}\PYG{l+m+mi}{41002}\PYG{o}{/}\PYG{n}{w2h}\PYG{o}{/}\PYG{n}{WEB2AJAX}\PYG{o}{.}\PYG{n}{htm}\PYG{o}{+}\PYG{n}{Cics}
\end{sphinxVerbatim}

When the Virtel Engine receives this call-in it directs to line C-HTTP(41002) and established a session with the user’s browser. Session initiation begins with the downloading of various Virtel web elements such as templates, JavasSrcipt and CSS pages. The line will invoke a transaction called CICS which will be associated with the entry point defined for this call-in. This normally would be a transaction associated with the default entry point CLIWHOST. However, Virtel Rules may well associate a different entry point depending on call-in criteria. The transaction CICS is an external name, the Virtel Internal name for this transactions is CLI-10. It is the internal name that is related to the transaction prefix defined in the Entry Point.

\sphinxincludegraphics{{image72}.png}
\sphinxstyleemphasis{Transaction Definition}

It can also defined with the Arbo Configuration statements:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{TRANSACT} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{CLI}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{10}\PYG{p}{,}                                     \PYG{o}{\PYGZhy{}}
\PYG{n}{NAME}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Cics}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                                            \PYG{o}{\PYGZhy{}}
\PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Logon to CICS}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                                   \PYG{o}{\PYGZhy{}}
\PYG{n}{APPL}\PYG{o}{=}\PYG{n}{SPCICST}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
\PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,}                                                 \PYG{o}{\PYGZhy{}}
\PYG{n}{TERMINAL}\PYG{o}{=}\PYG{n}{CLVTA}\PYG{p}{,}                                         \PYG{o}{\PYGZhy{}}
\PYG{n}{STARTUP}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,}                                              \PYG{o}{\PYGZhy{}}
\PYG{n}{SECURITY}\PYG{o}{=}\PYG{l+m+mi}{1}
\end{sphinxVerbatim}

The salient points here are the internal name or ID, CLI-10 which ties up with the Entry Point transaction prefix of transactions beginning “CLI”, the external name, “CICS” relates to the transaction name identified in the call-in URL. The APPL keyword identifies a name that will be used depending on the transaction type. The transaction type for this particular transaction definition is a VTAM transaction, TYPE=1. Virtel will attempt to logon to VTAM application identified by the VTAM APPL name SPCICST. The final point is the terminal prefix which identifies what Virtel terminals should be used to support this connection. In this instance the terminals must be prefixed with the characters “CLVTA”.


\subsection{Terminal Elements}
\label{\detokenize{connectivity_guide:terminal-elements}}
Terminal elements are used to support units of work within Virtel such as running a program, transmitting data to a browser, representing a VTAM LU to a VTAM APPLICATION. These are just a few examples. Terminal elements are defined to Virtel as either dynamic, static or pool. The following Summary Display lists the terminals delivered in the default installation.

\sphinxincludegraphics{{image73}.png}
\sphinxstyleemphasis{Terminal Definitions}

The terminal name is used to associate terminals with lines and transactions. In the example for the line C-HTTP(41002) we had a terminal prefix of CL. So terminals CLLOC000-CLLOC079 and CLVTA000-CLVTA079 will be associated with this line. Our Transaction CLI-10 requires a terminal whose prefix is CLVTA. CL terminals are allocated top down, meaning that the terminal allocated to the transaction will be the highest CLVTA079. The display shows that CLLOC000-CLLOC079 are static terminal entries. CLVTA000-CLVTA079 are dynamic entries and point to a pool called *W2HPOOL. Whenever a terminal is required from a pool the terminal name returned will be the first free terminal within the pool. Defining pool terminals is through the use of the Pool name in the terminal definition. So in the pool *W2HPOOL terminals whose name begin with W2HTP000-WH2HTP079 have been defined. So, when the TSO transaction is kicked off Virtel will request a terminal whose name begins CLVTA, CLVTA079 will be assigned. This will grab the first available terminal in the *W2HPOOL as that is where CLVTA points to. The first available terminal in the pool will be W2HTP000. Virtel always works from the lowest free name entry when returning pool entries.

\sphinxincludegraphics{{image74}.png}
\sphinxstyleemphasis{Terminal Pool definition}

Terminal Definitions defined with Arbo configuration statements:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{TERMINAL} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{CLLOC000}\PYG{p}{,}                        \PYG{n}{Static} \PYG{n}{Definition}
\PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{HTTP terminals (no relay)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
\PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}
\PYG{n}{COMPRESS}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}
\PYG{n}{INOUT}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}
\PYG{n}{STATS}\PYG{o}{=}\PYG{l+m+mi}{26}\PYG{p}{,}
\PYG{n}{REPEAT}\PYG{o}{=}\PYG{l+m+mi}{0050}

\PYG{n}{TERMINAL} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{CLVTA000}\PYG{p}{,}                        \PYG{n}{Dynamic} \PYG{n}{Definition}
\PYG{n}{RELAY}\PYG{o}{=}\PYGZbs{}\PYG{o}{*}\PYG{n}{W2HPOOL}\PYG{p}{,}                             \PYG{o}{\PYGZlt{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{n}{Use} \PYG{n}{this} \PYG{n}{pool}
\PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{HTTP terminals (with relay)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
\PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}
\PYG{n}{COMPRESS}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}
\PYG{n}{INOUT}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}
\PYG{n}{STATS}\PYG{o}{=}\PYG{l+m+mi}{26}\PYG{p}{,}
\PYG{n}{REPEAT}\PYG{o}{=}\PYG{l+m+mi}{0080}

\PYG{n}{TERMINAL} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{W2HTP000}\PYG{p}{,}                        \PYG{n}{Pool} \PYG{n}{definition}
\PYG{n}{RELAY}\PYG{o}{=}\PYG{n}{REHVT000}\PYG{p}{,}
\PYG{n}{POOL}\PYG{o}{=}\PYGZbs{}\PYG{o}{*}\PYG{n}{W2HPOOL}\PYG{p}{,}                              \PYG{o}{\PYGZlt{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{n}{Defines} \PYG{n}{which} \PYG{n}{pool}
\PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Relay pool for HTTP}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
\PYG{n}{RELAY2}\PYG{o}{=}\PYG{n}{REHIM000}\PYG{p}{,}
\PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}
\PYG{n}{COMPRESS}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}
\PYG{n}{INOUT}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}
\PYG{n}{STATS}\PYG{o}{=}\PYG{l+m+mi}{26}\PYG{p}{,}
\PYG{n}{REPEAT}\PYG{o}{=}\PYG{l+m+mi}{0080}
\end{sphinxVerbatim}

In the case of logging onto CICS, the Virtel transaction will request a CLVTA terminal(CLVTA079) and terminal WH2TP000 will be returned from *W2HPOOL. This terminal has an association with a relay name represented by a VTAM terminal definition - in this case REHVT000. This relay name should be defined to VTAM. Also, this terminal definition has a 2nd relay called REHIM000. Again, this is a VTAM APPL definition which represents a SNA printer associated with the screen LU REHVT000. This name must also be defined to VTAM. REHIM000 is a relay name associated with the static terminal definitions beginning W2HIM000. In the logon to CICS we have three terminal names associated with the VTAM interface - CLVTA079, W2HTP000(REHVT000) and W2HIM000(REHIM000).

Here are the VTAM definitions:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
VIRTAPPL VBUILD TYPE=APPL
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} *
* Product     :  VIRTEL                                              *
* Description :  Main ACB for VIRTEL application                     *
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} *
APPLHOLT APPL  EAS=160,AUTH=(ACQ,BLOCK,PASS,SPO),ACBNAME=APPLHOLT               \PYGZlt{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} VIRTEL ACB
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} *
* REHVTxxx    : VTAM application relays for VIRTEL Web Access        *
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} *
REHVT??? APPL  AUTH=(ACQ,PASS),MODETAB=ISTINCLM,DLOGMOD=SNX32702,EAS=1          \PYGZlt{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} Terminal  Relay definitions
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} *
* REHIMxxx    : Printer relays for VIRTEL Web Access terminals       *
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} *
REHIM??? APPL  AUTH=(ACQ,PASS),MODETAB=ISTINCLM,DLOGMOD=SCS,EAS=1               \PYGZlt{}\PYGZhy{}\PYGZhy{}\PYGZhy{} Printer definitions SCS
REHIP??? APPL  AUTH=(ACQ,PASS),MODETAB=ISTINCLM,DLOGMOD=DSILGMOD,EAS=1          \PYGZlt{}\PYGZhy{}\PYGZhy{}\PYGZhy{} Printer definitions 3270
\end{sphinxVerbatim}

\newpage

Example of configurable Elements

\sphinxincludegraphics{{image75}.png}

\newpage


\subsection{Adding new configurable elements}
\label{\detokenize{connectivity_guide:adding-new-configurable-elements}}
Adding new configurable elements can be online, through the Virtel Portal (Port 41001), or via batch using the VIRCONF util. The following is an example of adding a new interface to Virtel. The interface is line E-HTTP(41003) which uses entry point EDSHOST. Entry point EDSHOST has the following transactions:-
\begin{description}
\item[{EDS-00}] \leavevmode
Transaction to support the Entry Point. Must have an external name the same as the Entry Point. In this case EDSHOST. Identifies the default transaction. That being what transaction should be initiated is none is specified in the URL.

\item[{EDS-03W}] \leavevmode
Point to the w2h directory where all the Virtel web artifacts are maintained. In this case the W2H directory.

\item[{EDS-03X}] \leavevmode
Point to the directory that is associated with this line. This would contain customized web elements such as a company image or logo. The directory is EDS-DIR which has a pathname of /eds.

\item[{EDS-04}] \leavevmode
Vtam transaction identifying SPCICST

\item[{EDS-90}] \leavevmode
Application menu transaction used as the default transaction and identified in the TIOA string in transaction EDS-00

\item[{W2H-80S}] \leavevmode
A transaction added to the W2H Entry point to support uploading web articfacts to the EDS-DIR. When adding a new diorectory to Virtel you must also add a new upload transaction to the W2H transaction group. The external name and logmsg of the transaction should identify the directory. For example in this case name = upleds and logmsg = EDS-DIR. If you do not specify this “upload” transaction the new directory will not appear in the administration portal display of in the directory summary display.

\end{description}

Apart from the LINE, Entry Point and Transaction there is one other configurable element which must also be added to support a new interface. This is the SUBDIR element. The SUBDIR element identifies a new directory.

\newpage

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{/}\PYG{n}{VIRTELV} \PYG{n}{JOB} \PYG{l+m+mi}{1}\PYG{p}{,}\PYG{n}{ARBOLOAD}\PYG{p}{,}\PYG{n}{CLASS}\PYG{o}{=}\PYG{n}{A}\PYG{p}{,}\PYG{n}{MSGCLASS}\PYG{o}{=}\PYG{n}{X}\PYG{p}{,}\PYG{n}{NOTIFY}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{SYSUID}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}                                                              \PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*} \PYG{n}{ARBO} \PYG{n}{MIGRATION}\PYG{o}{.} \PYG{n}{UPDATE} \PYG{n}{ARBO} \PYG{n}{TO} \PYG{n}{ADD} \PYG{n}{NEW} \PYG{n}{ELEMENTS}              \PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}                                                              \PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*} \PYG{n}{Change}          \PYG{n}{Description}                       \PYG{n}{Release}    \PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}                 \PYG{n}{Create} \PYG{n}{directory} \PYG{k}{for} \PYG{n}{poc} \PYG{n}{test}     \PYG{n}{V460}       \PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}                                                              \PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{SET} \PYG{n}{LOAD}\PYG{o}{=}\PYG{n}{VIRTEL}\PYG{o}{.}\PYG{n}{VIRT460}\PYG{o}{.}\PYG{n}{LOADLIB}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{SET} \PYG{n}{ARBO}\PYG{o}{=}\PYG{n}{VIRTEL}\PYG{o}{.}\PYG{n}{VIRT460}\PYG{o}{.}\PYG{n}{ARBO}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{CONFIG}  \PYG{n}{EXEC} \PYG{n}{PGM}\PYG{o}{=}\PYG{n}{VIRCONF}\PYG{p}{,}\PYG{n}{PARM}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{LOAD,NOREPL}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}\PYG{n}{REGION}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{n}{M}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{STEPLIB}  \PYG{n}{DD}  \PYG{n}{DSN}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{LOAD}\PYG{p}{,}\PYG{n}{DISP}\PYG{o}{=}\PYG{n}{SHR}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSPRINT} \PYG{n}{DD}  \PYG{n}{SYSOUT}\PYG{o}{=}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSUDUMP} \PYG{n}{DD}  \PYG{n}{SYSOUT}\PYG{o}{=}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{VIRARBO}  \PYG{n}{DD}  \PYG{n}{DSN}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{ARBO}\PYG{p}{,}\PYG{n}{DISP}\PYG{o}{=}\PYG{n}{SHR}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSIN}      \PYG{n}{DD} \PYG{o}{*}
    \PYG{n}{TERMINAL} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{EHLOC000}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
            \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Psuedo Terminals}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                                \PYG{o}{\PYGZhy{}}
            \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}                                                 \PYG{o}{\PYGZhy{}}
            \PYG{n}{COMPRESS}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
            \PYG{n}{INOUT}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}                                                \PYG{o}{\PYGZhy{}}
            \PYG{n}{REPEAT}\PYG{o}{=}\PYG{l+m+mi}{0016}
    \PYG{n}{TERMINAL} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{EHVTA000}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
            \PYG{n}{RELAY}\PYG{o}{=}\PYG{o}{*}\PYG{n}{W2HPOOL}\PYG{p}{,}                                         \PYG{o}{\PYGZhy{}}
            \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{HTTP terminals (with relay)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                     \PYG{o}{\PYGZhy{}}
            \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}                                                 \PYG{o}{\PYGZhy{}}
            \PYG{n}{COMPRESS}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
            \PYG{n}{INOUT}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}                                                \PYG{o}{\PYGZhy{}}
            \PYG{n}{STATS}\PYG{o}{=}\PYG{l+m+mi}{26}\PYG{p}{,}                                               \PYG{o}{\PYGZhy{}}
            \PYG{n}{REPEAT}\PYG{o}{=}\PYG{l+m+mi}{0016}
    \PYG{n}{SUBDIR}  \PYG{n}{ID}\PYG{o}{=}\PYG{n}{EDS}\PYG{o}{\PYGZhy{}}\PYG{n}{DIR}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
            \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{EDS directory}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                                   \PYG{o}{\PYGZhy{}}
            \PYG{n}{DDNAME}\PYG{o}{=}\PYG{n}{HTMLTRSF}\PYG{p}{,}                                        \PYG{o}{\PYGZhy{}}
            \PYG{n}{KEY}\PYG{o}{=}\PYG{n}{EDS}\PYG{o}{\PYGZhy{}}\PYG{n}{KEY}\PYG{p}{,}                                            \PYG{o}{\PYGZhy{}}
            \PYG{n}{NAMELEN}\PYG{o}{=}\PYG{l+m+mi}{0064}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
            \PYG{n}{AUTHUP}\PYG{o}{=}\PYG{n}{X}\PYG{p}{,}                                               \PYG{o}{\PYGZhy{}}
            \PYG{n}{AUTHDOWN}\PYG{o}{=}\PYG{n}{X}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
            \PYG{n}{AUTHDEL}\PYG{o}{=}\PYG{n}{X}
    \PYG{n}{ENTRY}   \PYG{n}{ID}\PYG{o}{=}\PYG{n}{EDSHOST}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
            \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{HTTP entry point (EDS application)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}              \PYG{o}{\PYGZhy{}}
            \PYG{n}{TRANSACT}\PYG{o}{=}\PYG{n}{EDS}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
            \PYG{n}{TIMEOUT}\PYG{o}{=}\PYG{l+m+mi}{0720}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
            \PYG{n}{ACTION}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,}                                               \PYG{o}{\PYGZhy{}}
            \PYG{n}{EMUL}\PYG{o}{=}\PYG{n}{HTML}\PYG{p}{,}                                              \PYG{o}{\PYGZhy{}}
            \PYG{n}{SIGNON}\PYG{o}{=}\PYG{n}{VIR0020H}\PYG{p}{,}                                        \PYG{o}{\PYGZhy{}}
            \PYG{n}{MENU}\PYG{o}{=}\PYG{n}{VIR0021A}\PYG{p}{,}                                          \PYG{o}{\PYGZhy{}}
            \PYG{n}{IDENT}\PYG{o}{=}\PYG{n}{SCENLOGM}\PYG{p}{,}                                         \PYG{o}{\PYGZhy{}}
            \PYG{n}{SCENDIR}\PYG{o}{=}\PYG{n}{SCE}\PYG{o}{\PYGZhy{}}\PYG{n}{DIR}\PYG{p}{,}                                        \PYG{o}{\PYGZhy{}}
            \PYG{n}{EXTCOLOR}\PYG{o}{=}\PYG{n}{E}
    \PYG{n}{TRANSACT} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{EDS}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{00}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
            \PYG{n}{NAME}\PYG{o}{=}\PYG{n}{EDSHOST}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
            \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Default Directory}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                               \PYG{o}{\PYGZhy{}}
            \PYG{n}{APPL}\PYG{o}{=}\PYG{n}{EDS}\PYG{o}{\PYGZhy{}}\PYG{n}{DIR}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
            \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{4}\PYG{p}{,}                                                 \PYG{o}{\PYGZhy{}}
            \PYG{n}{TERMINAL}\PYG{o}{=}\PYG{n}{EHLOC}\PYG{p}{,}                                         \PYG{o}{\PYGZhy{}}
            \PYG{n}{STARTUP}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}                                              \PYG{o}{\PYGZhy{}}
            \PYG{n}{SECURITY}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
            \PYG{n}{TIOASTA}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/w2h/appmenu.htm+applist}\PYG{l+s+s1}{\PYGZsq{}}
    \PYG{n}{TRANSACT} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{EDS}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{03}\PYG{n}{W}\PYG{p}{,}                                            \PYG{o}{\PYGZhy{}}
            \PYG{n}{NAME}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{w2h}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
            \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{W2H toolkit directory (/w2h)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                    \PYG{o}{\PYGZhy{}}
            \PYG{n}{APPL}\PYG{o}{=}\PYG{n}{W2H}\PYG{o}{\PYGZhy{}}\PYG{n}{DIR}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
            \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{4}\PYG{p}{,}                                                 \PYG{o}{\PYGZhy{}}
            \PYG{n}{STARTUP}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}                                              \PYG{o}{\PYGZhy{}}
            \PYG{n}{SECURITY}\PYG{o}{=}\PYG{l+m+mi}{0}
    \PYG{n}{TRANSACT} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{EDS}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{03}\PYG{n}{X}\PYG{p}{,}                                            \PYG{o}{\PYGZhy{}}
            \PYG{n}{NAME}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{eds}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
            \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{EDS directory (/eds)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                            \PYG{o}{\PYGZhy{}}
            \PYG{n}{APPL}\PYG{o}{=}\PYG{n}{EDS}\PYG{o}{\PYGZhy{}}\PYG{n}{DIR}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
            \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{4}\PYG{p}{,}                                                 \PYG{o}{\PYGZhy{}}
            \PYG{n}{STARTUP}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}                                              \PYG{o}{\PYGZhy{}}
            \PYG{n}{SECURITY}\PYG{o}{=}\PYG{l+m+mi}{0}
    \PYG{n}{TRANSACT} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{EDS}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{04}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
            \PYG{n}{NAME}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{CICS}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                                            \PYG{o}{\PYGZhy{}}
            \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{CICS}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                                            \PYG{o}{\PYGZhy{}}
            \PYG{n}{APPL}\PYG{o}{=}\PYG{n}{SPCICST}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
            \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,}                                                 \PYG{o}{\PYGZhy{}}
            \PYG{n}{TERMINAL}\PYG{o}{=}\PYG{n}{EHVTA}\PYG{p}{,}                                         \PYG{o}{\PYGZhy{}}
            \PYG{n}{STARTUP}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,}                                              \PYG{o}{\PYGZhy{}}
            \PYG{n}{SECURITY}\PYG{o}{=}\PYG{l+m+mi}{0}
    \PYG{n}{TRANSACT} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{EDS}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{90}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
            \PYG{n}{NAME}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{applist}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                                         \PYG{o}{\PYGZhy{}}
            \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{List of applications for appmenu.htm}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}            \PYG{o}{\PYGZhy{}}
            \PYG{n}{APPL}\PYG{o}{=}\PYG{n}{VIR0021S}\PYG{p}{,}                                          \PYG{o}{\PYGZhy{}}
            \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}                                                 \PYG{o}{\PYGZhy{}}
            \PYG{n}{TERMINAL}\PYG{o}{=}\PYG{n}{EHLOC}\PYG{p}{,}                                         \PYG{o}{\PYGZhy{}}
            \PYG{n}{STARTUP}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}                                              \PYG{o}{\PYGZhy{}}
            \PYG{n}{SECURITY}\PYG{o}{=}\PYG{l+m+mi}{1}
    \PYG{n}{TRANSACT} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{W2H}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{80}\PYG{n}{S}\PYG{p}{,}                                            \PYG{o}{\PYGZhy{}}
            \PYG{n}{NAME}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{upleds}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                                          \PYG{o}{\PYGZhy{}}
            \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Upload macros (EDS\PYGZhy{}DIR directory)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}               \PYG{o}{\PYGZhy{}}
            \PYG{n}{APPL}\PYG{o}{=}\PYG{n}{VIR0041C}\PYG{p}{,}                                          \PYG{o}{\PYGZhy{}}
            \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}                                                 \PYG{o}{\PYGZhy{}}
            \PYG{n}{TERMINAL}\PYG{o}{=}\PYG{n}{DELOC}\PYG{p}{,}                                         \PYG{o}{\PYGZhy{}}
            \PYG{n}{STARTUP}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}                                              \PYG{o}{\PYGZhy{}}
            \PYG{n}{SECURITY}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
            \PYG{n}{LOGMSG}\PYG{o}{=}\PYG{n}{EDS}\PYG{o}{\PYGZhy{}}\PYG{n}{DIR}
    \PYG{n}{LINE}    \PYG{n}{ID}\PYG{o}{=}\PYG{n}{E}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}\PYG{p}{,}                                              \PYG{o}{\PYGZhy{}}
            \PYG{n}{NAME}\PYG{o}{=}\PYG{n}{HTTP}\PYG{o}{\PYGZhy{}}\PYG{n}{EDS}\PYG{p}{,}                                          \PYG{o}{\PYGZhy{}}
            \PYG{n}{LOCADDR}\PYG{o}{=}\PYG{p}{:}\PYG{l+m+mi}{41003}\PYG{p}{,}                                         \PYG{o}{\PYGZhy{}}
            \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{HTTP line (entry point EDSHOST)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                 \PYG{o}{\PYGZhy{}}
            \PYG{n}{TERMINAL}\PYG{o}{=}\PYG{n}{EH}\PYG{p}{,}                                            \PYG{o}{\PYGZhy{}}
            \PYG{n}{ENTRY}\PYG{o}{=}\PYG{n}{EDSHOST}\PYG{p}{,}                                          \PYG{o}{\PYGZhy{}}
            \PYG{n}{TYPE}\PYG{o}{=}\PYG{n}{TCP1}\PYG{p}{,}                                              \PYG{o}{\PYGZhy{}}
            \PYG{n}{INOUT}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,}                                                \PYG{o}{\PYGZhy{}}
            \PYG{n}{PROTOCOL}\PYG{o}{=}\PYG{n}{VIRHTTP}\PYG{p}{,}                                       \PYG{o}{\PYGZhy{}}
            \PYG{n}{TIMEOUT}\PYG{o}{=}\PYG{l+m+mi}{0000}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
            \PYG{n}{ACTION}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,}                                               \PYG{o}{\PYGZhy{}}
            \PYG{n}{WINSZ}\PYG{o}{=}\PYG{l+m+mi}{0000}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
            \PYG{n}{PKTSZ}\PYG{o}{=}\PYG{l+m+mi}{0000}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
            \PYG{n}{RETRY}\PYG{o}{=}\PYG{l+m+mi}{0010}
\end{sphinxVerbatim}

\sphinxstyleemphasis{Configuration statements to add a new interface}

After running the VIRCONF utility check to make sure that the condition code is zero and that all elements have been added.

\newpage

\index{Administration@\spxentry{Administration}}\ignorespaces 

\section{Administration}
\label{\detokenize{connectivity_guide:administration}}\label{\detokenize{connectivity_guide:index-0}}
The VIRTEL system administrator uses a set of programs called sub-applications to display and update the various elements in the VIRTEL configuration. The sub-applications are invoked via the Configuration Menu or the Sub- Application Menu. The Configuration Menu, introduced in VIRTEL version 4.27, provides access to the most commonly- used sub-applications required for VIRTEL Web Access and XOT. It is invoked from the VIRTEL Multi-Session menu via a transaction which calls module VIR0022. The Sub-Application Menu,
invoked from the Configuration Menu, gives access to all of the sub-applications, including those rarely used today.

If you log on to VIRTEL in 3270 mode using the default entry point (“PC”), the VIRTEL Multi-Session menu offers the choice F1 \textendash{} Admin to invoke the Configuration Menu.

The first screen you will see is the Multi-Session menu:

\sphinxincludegraphics[width=6.49562in,height=4.01500in]{{image1}.png}
\sphinxstyleemphasis{The VIRTEL Multi-Session menu}

Press {[}F1{]} to display the Configuration Menu:

\newpage

\index{Administration@\spxentry{Administration}!Configuration Menu@\spxentry{Configuration Menu}}\index{Configuration Menu@\spxentry{Configuration Menu}!Administration@\spxentry{Administration}}\ignorespaces 

\subsection{Configuration Menu}
\label{\detokenize{connectivity_guide:configuration-menu}}\label{\detokenize{connectivity_guide:index-1}}
The configuration Menu presents a list of sub applications which can be invoked to manage various Virtel entities such as lines, terminals, entry points etc.

\sphinxincludegraphics[width=6.49562in,height=4.01500in]{{image2}.png}
\sphinxstyleemphasis{Configuration Menu}

To invoke a sub-application, press one of the function keys shown in the menu (for example, F1 \textendash{} Lines). To exit from the Configuration Menu and return to the Multi-Session menu, press CLEAR.

From within the configuration Menu a further set of sub-applications can be accessible by pressing {[}PA2{]}

\newpage

\index{Administration@\spxentry{Administration}!Sub-Application Menu@\spxentry{Sub-Application Menu}}\index{Sub-Application Menu@\spxentry{Sub-Application Menu}!Administration@\spxentry{Administration}}\ignorespaces 

\subsection{Sub-Application Menu}
\label{\detokenize{connectivity_guide:sub-application-menu}}\label{\detokenize{connectivity_guide:index-2}}
This menu presents a menu of additional sub-applications that can be used to manage Virtel.

\sphinxincludegraphics[width=6.49562in,height=4.01500in]{{image3}.png}
\sphinxstyleemphasis{Sub-Application Menu}

To invoke a sub-application from this menu, press one of the function keys shown in the menu (for example, F7 \textendash{} Videotex Definitions). To exit from the Sub-Application Menu and return to the Configuration Menu, press CLEAR or PA2.

\index{Administration@\spxentry{Administration}!Screen Navigation@\spxentry{Screen Navigation}}\index{Screen Navigation@\spxentry{Screen Navigation}!Administration@\spxentry{Administration}}\ignorespaces 

\subsection{Screen Navigation}
\label{\detokenize{connectivity_guide:screen-navigation}}\label{\detokenize{connectivity_guide:index-3}}
The sub-applications have certain common operational characteristics:
\begin{itemize}
\item {} 
Most of the sub-applications start by displaying a list of the elements currently defined in the configuration file.

\item {} 
To scroll up or down the list, press {[}F7{]} or {[}F8{]}.

\item {} 
To find an element in the list, overtype the name of the first element displayed with the first few characters of the element name you are looking for, then press {[}ENTER{]}.

\item {} 
To display the detail screen for a particular element, place the cursor on the element name in the list and press {[}F12{]}.

\item {} 
To alter the definition of an element, type the desired changes into the appropriate fields in the list and press {[}F1{]}. VIRTEL recognizes the changes only when you press {[}F1{]}. If you change a transaction you must also press {[}F1{]} on the entry point that the transaction belongs to.

\item {} 
To delete an element, place the cursor on the element name in the list and press {[}F2{]}. Then press {[}F2{]} again to confirm the deletion.

\item {} 
To create a new element, place the cursor on a part of the screen outside the list, and press {[}F12{]}. A detail screen will be displayed with all fields blank. Fill in the fields and press {[}ENTER{]}.

\item {} 
To copy an existing element, first press {[}F12{]} to display the detail screen for the existing element, then overtype the element name with the desired name of the new element, and press {[}ENTER{]}.

\item {} 
To rename an element, first copy it to a new element as above, then delete the old element.

\item {} 
To exiting a sub-application, return to the previous menu, press {[}PF3{]}. To return to the Configuration Menu, press {[}Clear{]}.

\end{itemize}

\index{Lines@\spxentry{Lines}}\ignorespaces 

\chapter{Lines}
\label{\detokenize{connectivity_guide:lines}}\label{\detokenize{connectivity_guide:index-4}}

\section{Introduction}
\label{\detokenize{connectivity_guide:introduction}}
The “Line” is one of the basic elements of the VIRTEL configuration. A line represents a connection between VIRTEL and another network element: an NPSI MCH, an X25 router, an X25 application (GATE, PCNE), a CICS system, a VIRNT server, an SMTP server; alternatively, a line can represent a VIRTEL server (HTTP, SMTP) listening on a TCP/IP port. VIRTEL call routing is performed by sets of interrelated definitions. A call arriving on a line is processed by a set of rules which assign an entry point. The entry point contains a set of transactions which indicate the application or external server which will process the call. An external server refers to one or more lines on which the call may exit from VIRTEL. Each type of entity (lines, terminals, entry points, external servers) is defined by a separate sub-application but it is often useful to have an overall view of all the related definitions.

This chapter describes all the functions associated with the definition of lines using the Line Management sub-application. A detailed example will be presented later in
this chapter for each type of line.

\index{Lines@\spxentry{Lines}!Line Management Sub-Application@\spxentry{Line Management Sub-Application}}\index{Line Management Sub-Application@\spxentry{Line Management Sub-Application}!Lines@\spxentry{Lines}}\ignorespaces 

\section{Line Management Sub-Applications}
\label{\detokenize{connectivity_guide:line-management-sub-applications}}\label{\detokenize{connectivity_guide:index-5}}
This sub-application facilitates the definition of X25 and Reverse X25 lines, APPC connections, and TCP/IP lines. When the sub-application is started, it first displays a summary of existing definitions in alphanumeric order. The Line Management sub-application is invoked by pressing {[}PF1{]} in the Configuration Menu, by pressing {[}PF14{]} in the Sub-Application Menu, or via the Multi-Session Menu using a transaction which calls module VIR0046. This sub- application allows the management of all the line parameters under VIRTEL control.


\subsection{Security}
\label{\detokenize{connectivity_guide:security}}
When the security subsystem is active, access to Line Management sub-application from the Configuration Menu or the Sub-Application Menu is controlled by the resource \$\$LINE\$\$.
When accessed by a transaction, normal transaction security rules will apply. Security management and securing access to sub-applications is described in the VIRTEL Installation Guide.

\index{Line Management Sub-Application@\spxentry{Line Management Sub-Application}!Summary Display@\spxentry{Summary Display}}\index{Summary Display@\spxentry{Summary Display}!Line Management Sub-Application@\spxentry{Line Management Sub-Application}}\ignorespaces 

\subsection{Summary Display}
\label{\detokenize{connectivity_guide:summary-display}}\label{\detokenize{connectivity_guide:index-6}}
The first screen shows a summary of existing line definitions in alphanumeric order:

\sphinxincludegraphics{{image4}.png}
\sphinxstyleemphasis{Line Summary Display}


\subsubsection{Navigation}
\label{\detokenize{connectivity_guide:navigation}}\begin{description}
\item[{Search}] \leavevmode
Type the name (or partial name) of the required entity on the first line under the heading “Internal Name”, then press {[}Enter{]}.

\item[{{[}PF2{]}}] \leavevmode
Delete Line under cursor position.

\item[{{[}PF3{]}}] \leavevmode
Return to Configuration menu.

\item[{{[}PF4{]}}] \leavevmode
List terminals associated with line.

\item[{{[}PF6{]}}] \leavevmode
Return to the first page of the list.

\item[{{[}PF7{]}}] \leavevmode
Display the previous page.

\item[{{[}PF8{]}}] \leavevmode
Display the next page.

\item[{{[}PF12{]}}] \leavevmode
Enter Line detail Screen for line under cursor position.

\end{description}

\sphinxstylestrong{Modifying a line} - In the summary screen position the cursor under the name of the entity to be modified. Press {[}PF12{]}. The line detail definition screen is displayed. Type the desired modifications into the appropriate fields then press {[}PF1{]}. Multiple definitions can be modified at the same time. Modifications are not recognized until you press the {[}PF1{]} key. Certain modifications require a restart of the VIRTEL system.

\sphinxstylestrong{Deleing a line} - In the summary screen position the cursor under the name of the entity to be deleted, then press {[}PF2{]}. The line associated with the entity to be deleted then appears highlighted, accompanied by the message CONFIRM DELETE. Then press {[}PF2{]} again to confirm deletion. The message DELETE OK confirms successful completion of the operation. Repeat the procedure for each entity to be deleted.

\sphinxstylestrong{Adding a line} - To add a new definition, press {[}PF12{]} at the summary screen, either with the cursor on an existing definition to copy its attributes, or on an empty line to create a new definition from a blank screen.

\newpage

\index{Line Management Sub-Application@\spxentry{Line Management Sub-Application}!Detail Display@\spxentry{Detail Display}}\index{Detail Display@\spxentry{Detail Display}!Line Management Sub-Application@\spxentry{Line Management Sub-Application}}\ignorespaces 

\subsection{Detail Display}
\label{\detokenize{connectivity_guide:detail-display}}\label{\detokenize{connectivity_guide:index-7}}
The Line detail display is accessed from the Line summary screen via PF12(EDIT) on a selected line identified by the cursor position. The screen shows a line detail display.

\sphinxincludegraphics{{image5}.png}
\sphinxstyleemphasis{Line Detail Display}


\subsubsection{Navigation}
\label{\detokenize{connectivity_guide:id1}}\begin{description}
\item[{{[}PF1{]}}] \leavevmode
Update fields.

\item[{{[}PF3{]}}] \leavevmode
Return to Line Summary Display.

\item[{{[}PF4{]}}] \leavevmode
Display associated terminals.

\item[{{[}PF5{]}}] \leavevmode
Display associated rules.

\item[{{[}ENTER}] \leavevmode
Add new line or update fields of current line.

\end{description}

\index{Line Management Sub-Application@\spxentry{Line Management Sub-Application}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!Line Management Sub-Application@\spxentry{Line Management Sub-Application}}\ignorespaces 

\subsection{Parameters}
\label{\detokenize{connectivity_guide:parameters}}\label{\detokenize{connectivity_guide:index-8}}\begin{description}
\item[{Internal name}] \leavevmode
Internal name of the line. This is the name by which VIRTEL refers to the line internally. It must be unique within a VIRTEL instance.

\item[{External name}] \leavevmode
External name of the line. This name appears in certain console messages. It can be used, for example, to display the real name of the line or link.

\item[{Remote ident}] \leavevmode
This field contains the name or address of the remote partner. Usage
depends on the line type and protocol. The contents of this field
are described for each line type in the detailed examples which
follow.

\end{description}
\phantomsection\label{\detokenize{connectivity_guide:bookmark13}}\begin{description}
\item[{Local ident}] \leavevmode
This field contains the name or address used by VIRTEL. Usage depends on the line type and protocol. The contents of this field are described for each line type in the detailed examples which
follow.

For an IP connection, this field represents the listening port opened by VIRTEL. In the ARBO definitions it is defined by the LOCADDR= keyword. The port can be specified in any of the following forms:
\begin{description}
\item[{: ppppp}] \leavevmode
VIRTEL opens port ppppp on the default home IP address of the host
TCP/IP. For example, :41002

\item[{nnn.nnn.nnn.nnn: ppppp}] \leavevmode
VIRTEL opens port ppppp on the indicated IPV4 address. nnn.nnn.nnn.nnn
must be a valid HOME address defined in the host TCP/IP. For
example, 192.168.0.100:41002

\item[{{[}IPV6 Address{]}: ppppp}] \leavevmode
VIRTEL opens port ppppp on the indicated IPV6 address. {[}IPV6{]}
must be a valid IPV6 address defined within the square brackets. For
example, {[}fd10:15c1:1921:1000::129{]}:41002

\item[{dns\_name: ppppp}] \leavevmode
Virtel opens port ppppp on the IP address associated with the DNS name. For example, myvirtel.syspertec.com:41002

\item[{0: ppppp}] \leavevmode
VIRTEL opens port ppppp without associating itself with a particular
IP address. VIRTEL can receive calls on any HOME address defined in
the host TCP/IP. For example, 0:2048 (or 0.0.0.0:41002)

\end{description}

The combination of IP address and port number must be unique. No two VIRTELs can contain a TCP/IP line with the same IP address and port number, except that:
\begin{quote}
\begin{itemize}
\item {} 
multiple VIRTELs can use a single distributed VIPA address, provided that the address is defined with a non-zero value for the TIMEDAFFINITY parameter.

\item {} 
multiple XOT lines within a single VIRTEL can listen on the same IP address and port number, providing that this same address and port number are not used by another VIRTEL.

\end{itemize}

\begin{sphinxadmonition}{note}{Note:}
Note that the use of port numbers less than 1024 may require authorization in the profile of the TCP/IP stack (see for example the RESTRICTLOWPORTS, PORT, and PORTRANGE parameters of the z/OS Communications Server). In general, port numbers 1024 and above do not require authorization.
\end{sphinxadmonition}
\end{quote}

The default IP address can be specified via the IP= parameter of the Virtel startup JCL. This can be an IPV4, IPV6 or DNS name. Two access a single instance of Virtel with both IPV4 and IPV6 addresses you will have two define separate lines, one for the IPV4 connect and another for IPV6 connections.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{LINE}     \PYG{n}{ID}\PYG{o}{=}\PYG{n}{C}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP4}\PYG{p}{,}\PYG{n}{LOCADDR}\PYG{o}{=}\PYG{n}{virtel\PYGZus{}dns1pv4\PYGZus{}name}\PYG{p}{:}\PYG{l+m+mi}{41002}\PYG{p}{,}\PYG{n}{TERMINAL}\PYG{o}{=}\PYG{n}{C4}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
\PYG{n}{TERMINAL} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{C4LOC000}\PYG{p}{,}\PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{HTTP terminals via IPV4 \PYGZhy{} no relay}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
\PYG{n}{TERMINAL} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{C4VTA000}\PYG{p}{,}\PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{HTTP terminals via IPV4 relay}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}

\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}

\PYG{n}{LINE}     \PYG{n}{ID}\PYG{o}{=}\PYG{n}{C}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP6}\PYG{p}{,}\PYG{n}{LOCADDR}\PYG{o}{=}\PYG{n}{virtel\PYGZus{}dns1pv6\PYGZus{}name}\PYG{p}{:}\PYG{l+m+mi}{41002}\PYG{p}{,}\PYG{n}{TERMINAL}\PYG{o}{=}\PYG{n}{C6}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
\PYG{n}{TERMINAL} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{C6LOC000}\PYG{p}{,}\PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{HTTP terminals via IPV6 \PYGZhy{} no relay}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
\PYG{n}{TERMINAL} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{C6VTA000}\PYG{p}{,}\PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{HTTP terminals via IPV6 relay}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
\end{sphinxVerbatim}

\item[{Description}] \leavevmode
Free-form description with no particular significance or syntax requirement, except for SMTP lines (see the detailed example of an SMTP line which follows).

\item[{Prefix}] \leavevmode
Terminal prefix associated with the line. As a general rule, the terminal prefix is a required field. It allows VIRTEL to associate a series of terminals to a line. Two lines cannot share the same group of terminals. The particular details of this field are described for each line type in the detailed examples which follow.

\item[{Pool}] \leavevmode
The name of a logical pool of terminals associated with the line. This pool is used for HTTP connections without predefined terminals
(see {\hyperref[\detokenize{connectivity_guide:v460cn-forceluname}]{\sphinxcrossref{\DUrole{std,std-ref}{“HTTP connections with non-predefined LU names”,}}}}). In all other cases this field can be left blank.

\item[{Entry Point}] \leavevmode
Defines the default entry point used by the line. This is a required field for HTTP and SMTP lines. It is optional in all other cases.

\item[{Rule Set}] \leavevmode
The name of the rule set used by this line. The same rule set can be used by more than one line. If this field is blank, no rules are used. Rules are described in detail in section .

For compatability with VIRTEL versions prior to 4.26, the rule set name is usually the same as the internal name of the line.

\item[{Line type}] \leavevmode
Defines the category to which the line belongs. VIRTEL supports the following categories of lines:
\begin{description}
\item[{X25 lines}] \leavevmode
Represented by the values GATE or FASTC

Support for this type of line is governed by the presence of the
parameters MINITEL=YES, GATE=GENERAL and possibly FASTC=YES in the
VIRTCT.

\item[{Reverse-X25 lines}] \leavevmode
Represented by the values /GATE, /FASTC, or /PCNE

Support for this type of line does not require any special
parameters in the VIRTCT.

\item[{APPC lines}] \leavevmode
Represented by the values APPC1 or APPC2.

APPC1 represents a link with a BATCH environment

APPC2 represents all other types of APPC link with partners such as
CICS or NT. Support for this type of line does not require any
special parameters in the VIRTCT.

\item[{TCP/IP lines}] \leavevmode
Represented by the values TCP1 or TCP2.

Support for this type of line is governed by the presence of the
parameter TCP1 or TCP2 in the VIRTCT. Used for HTTP, SMTP, ICONNECT,
XOT, NATIVE, VIRPESIT, VIRNEOX, or VIRPASS TCP lines.

\item[{Cross-memory lines}] \leavevmode
Represented by the values XM1 or XM2

Support for this type of line is governed by the presence of the
parameter XM1 or XM2 in the VIRTCT. Used for VIRPASS XM lines.

\item[{MQSeries lines}] \leavevmode
Represented by the values MQ1 or MQ2

Support for this type of line is governed by the presence of the
parameter MQ1 or MQ2 in the VIRTCT.

\item[{Batch lines}] \leavevmode
Represented by the values BATCH1 or BATCH2

Support for this type of line is governed by the presence of the
parameter BATCH1 or BATCH2 in the VIRTCT.

\end{description}

\item[{Possible calls}] \leavevmode
Determines which calls can be made on this line. Since the line
management interface is common to all types of lines, all values
between 0 and 3 are accepted.

In addition to being used to authorize incoming, outgoing, or both
incoming and outgoing calls, this parameter also has an effect
during VIRTEL startup. Any line which has “Possible calls” set to 0
will not be activated at VIRTEL startup. Also note the“Possible
calls” field in the definition of the associated terminals.

\item[{Startup prerequisite}] \leavevmode
Allows conditional startup of the line. If this field is blank,
VIRTEL starts the line automatically at system startup.
\begin{description}
\item[{WAIT-LINE(n-xxxxxx)}] \leavevmode
Waits for line n-xxxxxx to start. The name specified can be either
the internal or external name of the other line.

\item[{WAIT-MINUTES(nn)}] \leavevmode
Waits nn minutes after system startup before starting this line.

\item[{WAIT-COMMAND}] \leavevmode
Waits for a console command LINE=linename,START (see “List of
commands” in the VIRTEL Audit And Performance Guide)

\item[{WAIT-PARTNER}] \leavevmode
Waits until VIRTEL receives an SNA BIND command from its partner LU.

\item[{MIMIC-LINE(n-xxxxxx)}] \leavevmode
specifies that this line starts and stops in synchronisation with
line n-xxxxxx. The name specified can be either the internal or
external name of the other line.

\end{description}

\item[{Protocol program}] \leavevmode
Indicates the protocol used for a TCP, XM, or MQ type line. The
following values are valid for a TCP line:
\begin{description}
\item[{HTTP or VIRHTTP}] \leavevmode
For an HTTP line

\item[{NATIVE2(P) or NATIVE4(P)}] \leavevmode
For a line in native TCP/IP mode

\item[{SMTP or VIRSMTP}] \leavevmode
For an SMTP line

\item[{ICONNECT}] \leavevmode
For a RESUME TPIPE connection with IMS Connect

\item[{VIRPASS}] \leavevmode
For a VIRPASS TCP connection with an VIRNT or VIRKIX system

\item[{VIRPESIT}] \leavevmode
For a TCP connection with a file transfer program such as CFT/IP

\item[{VIRNEOX}] \leavevmode
For a TCP connection with a remote program using the VIRNEOX
protocol

\item[{XOT or VIRXOT}] \leavevmode
For an XOT line

\end{description}

The following values are valid for an XM line:
\begin{description}
\item[{VIRPASS}] \leavevmode
For a VIRPASS XM connection with a VIRKIX system running on the same MVS

\end{description}

The following values are valid for an MQ line:
\begin{description}
\item[{RAW}] \leavevmode
For communication via an MQSeries message queue

\item[{PREFIXED or PREFIX12}] \leavevmode
For communication via an MQSeries message queue. This is similar to
the RAW protocol except that VIRTEL adds 12 bytes of additional
context information for the application program.

\item[{PREFIX20}] \leavevmode
For communication via an MQSeries message queue. This is similar to
the RAW protocol except that VIRTEL adds 20 bytes of additional
context information for the application program.

\begin{sphinxadmonition}{note}{Note:}
This field must not be completed for lines whose type is APPC1, APPC2, GATE, FASTC, /GATE, /FASTC, or /PCNE.
\end{sphinxadmonition}

\end{description}

\item[{Security program}] \leavevmode
Reserved for future use.

\item[{Time out}] \leavevmode
Inactivity time in seconds after which the action specified in the
following field will be taken. The value 0 inhibits the time out.

\item[{Action if T/O}] \leavevmode
Action taken if a time out occurs. 0 = no action

1 = keepalive

\item[{KEEPALIVE}] \leavevmode
is a message sent by the TCP/IP stack, during periods of inactivity,
to check whether the connection has been broken. The value 1 is thus
only valid for lines of type TCP. After a certain number of
KEEPALIVE messages have been sent without being acknowledged by the
partner (the number is determined by the TCP/IP stack), the session
will be considered unusable and the connection will be terminated.

\item[{OS/390 and z/OS}] \leavevmode
KEEPALIVE must also be activated in the PROFILE of the TCP/IP stack
(refer to parameters KEEPALIVEOPTIONS or TCPCONFIG INTERVAL). For
z/OS V1R7 and later, the time out value specified in the preceding
field determines the interval between KEEPALIVE messages. If the
time out value is zero then the default TCPCONFIG INTERVAL will be
used. For OS/390 and z/OS prior to V1R7, the TCP/IP stack uses a
single KEEPALIVE interval which applies to all sessions, and the
time out value specified in the preceding field is ignored.

\item[{TCP/IP for VSE}] \leavevmode
KEEPALIVE is managed globally by the TCP/IP command SET PULSE\_TIME,
and the parameters “Time Out” and “Action=1” are ignored.

\item[{Window}] \leavevmode
Window size at the packet level. This parameter is meaningful only
for X25 (GATE or FASTC) and XOT lines.

Must correspond with your X25 service provider subscription, or with
the X25 switch parameters if this type of equipment is used.

\item[{Packet}] \leavevmode
Packet size. Usually 128. This parameter is meaningful only for X25
(GATE or FASTC) and XOT lines.

Must correspond with your TRANSPAC subscription, or with the X25
switch parameters if this type of equipment is used.

Replaces the PACKET global parameter in the VIRTCT for versions
prior to 4.0.

\item[{Pad}] \leavevmode
This parameter is meaningful only for X25 GATE non Fast-Connect
lines and AntiGATE lines.
\begin{description}
\item[{INTEG}] \leavevmode
Data without X’00’ prefix

\item[{TRANSP}] \leavevmode
Data with prefix

\item[{NO}] \leavevmode
Data with prefix

\end{description}

Must correspond with the NPSI parameters, or with the X25 switch
parameters if this type of equipment is used.

\item[{Tran}] \leavevmode
This parameter is meaningful only for Reverse-X25 AntiPCNE lines.
Specifies whether EBCDIC/ASCII translation occurs.
\begin{description}
\item[{EVEN}] \leavevmode
ASCII data from the network is translated to EBCDIC when presented
to the application, and vice versa (Even Parity)

\item[{ODD}] \leavevmode
Ditto (Odd Parity)

\item[{NO}] \leavevmode
No ASCII/EBCDIC translation

\end{description}

\item[{Retries}] \leavevmode
Number of attempts to reacquire auto-activated terminals during
VIRTEL startup. The delay between attempts is specified by the
“Delay” parameter.

\item[{Delay}] \leavevmode
Interval in seconds between attempts to reacquire terminals. The
default delay is 2 seconds.

\end{description}

\newpage

\index{Lines@\spxentry{Lines}!Line Overview Sub-Application@\spxentry{Line Overview Sub-Application}}\index{Line Overview Sub-Application@\spxentry{Line Overview Sub-Application}!Lines@\spxentry{Lines}}\ignorespaces 

\section{Line Overview Sub-Application}
\label{\detokenize{connectivity_guide:line-overview-sub-application}}\label{\detokenize{connectivity_guide:index-9}}
The Lines Overiew display presents an overall view and allows the administrator to zoom in on individual definitions to display and optionally modify the detailed definition. Missing definitions (those referenced by another entity but not defined in the configuration) are highlighted in red. This sub-application allows the administrator to display and optionally modify the various entities associated with each line defined in the VIRTEL configuration. The Lines Overview sub-application is invoked by pressing {[}PF8{]} at the Configuration Menu, by pressing {[}PF15{]} at the Sub-Application Menu, or via the Multi-Session using a transaction which calls module VIR0049.

\sphinxincludegraphics{{image57}.png}
\sphinxstyleemphasis{Lines overview summary display}

\newpage

\index{Lines@\spxentry{Lines}!HTTP Inbound Line@\spxentry{HTTP Inbound Line}}\index{HTTP Inbound Line@\spxentry{HTTP Inbound Line}!Lines@\spxentry{Lines}}\ignorespaces 

\section{HTTP Inbound line}
\label{\detokenize{connectivity_guide:http-inbound-line}}\label{\detokenize{connectivity_guide:index-10}}
When an HTTP line is started, VIRTEL becomes an HTTP server, authorising connections from a web browser to applications at the host site. Activation of this type of line is subject to the presence of the TCP1 parameter in the VIRTCT, as well as to a definition providing linkage to a file containing the HTML pages.

\sphinxincludegraphics{{image6}.png}
\sphinxstyleemphasis{Definition of an HTTP line}

\index{HTTP Inbound Line@\spxentry{HTTP Inbound Line}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!HTTP Inbound Line@\spxentry{HTTP Inbound Line}}\ignorespaces \begin{description}
\item[{Remote ident}] \leavevmode
Always blank.

\item[{Local ident}] \leavevmode
This is the VIRTEL IP address and port number which browser users must specify in order to connect to VIRTEL. If the port number is omitted then the default is port 80. See the description of the
“Local ident” field under the heading {\hyperref[\detokenize{connectivity_guide:bookmark13}]{\sphinxcrossref{\DUrole{std,std-ref}{“Line Parameters”,}}}} for more details about how to code this field.

\item[{Prefix}] \leavevmode
Terminal name prefix (see below).

\item[{Entry Point}] \leavevmode
When defining an HTTP line, it is obligatory to define a default entry point. This entry point will be used for all incoming calls which do not match any of the rules of the line. The entry point contains a list of transactions, and these transactions determine which directories are used to retrieve the HTML pages, and which 3270 applications are accessible to the user.

\begin{sphinxadmonition}{note}{Note:}
According to the type of application accessed, each transaction must
refer to one of the terminal sub-groups associated with the HTTP
line (see ”HTTP terminals” below).
\end{sphinxadmonition}
\begin{description}
\item[{For type 1 (Application) transactions}] \leavevmode
The prefix will be that of the terminal sub-group with an associated relay.

\item[{For type 2 (Virtel) or type 4 (Page) transactions}] \leavevmode
The prefix will be that of the terminal sub-group without an associated relay.

\item[{For type 3 (Server) transactions}] \leavevmode
No terminal prefix is required.

\end{description}

\item[{Line type}] \leavevmode
One of the TCP/IP protocols defined in the VIRTCT, for example TCP1.

\item[{Possible calls}] \leavevmode
Specify 1 (incoming calls only) to indicate that this line
represents a listening port where VIRTEL is acting as an HTTP
server.

For the case where VIRTEL acts as an HTTP requester, refer to the following section {\hyperref[\detokenize{connectivity_guide:v460cn-httpoutbound}]{\sphinxcrossref{\DUrole{std,std-ref}{“Definition of a HTTP Outbound line”}}}}.

\item[{Protocol}] \leavevmode
VIRHTTP or HTTP.

\item[{Window}] \leavevmode
Always 0.

\item[{Packet}] \leavevmode
Always 0.

\item[{Pad}] \leavevmode
Always blank.

\item[{Tran}] \leavevmode
Always blank.

\end{description}

\index{HTTP Inbound Line@\spxentry{HTTP Inbound Line}!Terminal Definitions@\spxentry{Terminal Definitions}}\index{Terminal Definitions@\spxentry{Terminal Definitions}!HTTP Inbound Line@\spxentry{HTTP Inbound Line}}\ignorespaces 

\subsection{Terminal Definitions}
\label{\detokenize{connectivity_guide:terminal-definitions}}\label{\detokenize{connectivity_guide:index-12}}
An HTTP line uses two sub-groups of type-3 terminals having a common prefix (in this case CL). Each terminal in the first sub-group represents one session between the client browser and VIRTEL; no relay is configured for this sub-group. Each terminal in the second sub-group represents one session between VIRTEL and a host application; in this sub-group, either a relay must be configured for each terminal, or the sub-group must refer to {\hyperref[\detokenize{connectivity_guide:v460cn-logicalpool}]{\sphinxcrossref{\DUrole{std,std-ref}{“logical pool of relays”}}}}. Whichever method is chosen, each relay must be defined by an APPL statement in a VTAM node of type APPL. Either explicit or repeated terminal definitions may be used.

Press {[}PF4{]} at the HTTP line detail definition screen to display the list of associated terminals whose prefix matches the prefix specified in the line definition. If the terminals refer to a logical pool, the pool itself may have a different prefix and will therefore not be displayed. In this case you can press {[}PF2{]} at the Configuration Menu to display a list of all terminals.

The example below shows the terminals for two HTTP lines which share a logical pool of relays. This list was displayed by pressing {[}PF2{]} at the Configuration Menu. The terminals with prefix CL belong to line C-HTTP, while the terminals with prefix DE belong to line W-HTTP. For line C-HTTP, the first sub-group consists of terminals CLLOC000-049 without a relay. The second sub-group consists of terminals CLVTA000-079 which refer to a logical pool of relays named

*W2HPOOL. For line W-HTTP, the first sub-group is DELOC000-009, and the second sub-group is DEVTA000-015 which also refers to the logical pool named *W2HPOOL. The logical pool itself consists of terminals W2HTP000-015 whose relay LU names are REHVT000-079. The logical pool also refers to a pool of associated printer LU’s. The printers are defined with
terminal names W2HIP000-079 and LU names REHIP000-079. In each case, the terminal name is an internal name used only within VIRTEL, while the relay name is an LU name defined by a VTAM APPL statement. The relay LU name is the name by which the terminal is known to CICS or other VTAM applications.

\sphinxincludegraphics{{image7}.png}
\sphinxstyleemphasis{Terminals associated with an HTTP line}

\sphinxincludegraphics{{image8}.png}
\sphinxstyleemphasis{HTTP terminals without relay}

\sphinxincludegraphics{{image9}.png}
\sphinxstyleemphasis{HTTP terminals with relay}

\sphinxincludegraphics{{image10}.png}
\sphinxstyleemphasis{logical pool of relays for HTTP}

\sphinxincludegraphics{{image11}.png}
\sphinxstyleemphasis{Associated printer relays for HTTP}

Refer to the VIRTEL Web Access Guide for further information about printers.

\index{HTTP Inbound Line@\spxentry{HTTP Inbound Line}!VTAM Terminal Definitions@\spxentry{VTAM Terminal Definitions}}\index{VTAM Terminal Definitions@\spxentry{VTAM Terminal Definitions}!HTTP Inbound Line@\spxentry{HTTP Inbound Line}}\ignorespaces 

\subsection{VTAM Terminal Definitions}
\label{\detokenize{connectivity_guide:vtam-terminal-definitions}}\label{\detokenize{connectivity_guide:index-13}}
HTTP relay LU’s must be defined to VTAM by means of APPL statements in an application major node, as shown in the following example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{n}{C52VIRTM} \PYG{n}{VBUILD} \PYG{n}{TYPE}\PYG{o}{=}\PYG{n}{APPL}
\PYG{o}{*} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{*}
\PYG{o}{*} \PYG{n}{RHTVTxxx} \PYG{p}{:} \PYG{n}{Relay} \PYG{k}{for} \PYG{n}{VTAM} \PYG{n}{appl} \PYG{n}{accessed} \PYG{n}{by} \PYG{n}{WEB} \PYG{n}{to} \PYG{n}{HOST} \PYG{o}{*}
\PYG{o}{*} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{*}
\PYG{n}{RHTVT000} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{ISTINCLM}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{SNX32702}\PYG{p}{,}\PYG{n}{EAS}\PYG{o}{=}\PYG{l+m+mi}{1}
\PYG{n}{RHTVT001} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{ISTINCLM}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{SNX32702}\PYG{p}{,}\PYG{n}{EAS}\PYG{o}{=}\PYG{l+m+mi}{1}
\PYG{n}{RHTVT002} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{ISTINCLM}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{SNX32702}\PYG{p}{,}\PYG{n}{EAS}\PYG{o}{=}\PYG{l+m+mi}{1}
\PYG{n}{RHTVT003} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{ISTINCLM}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{SNX32702}\PYG{p}{,}\PYG{n}{EAS}\PYG{o}{=}\PYG{l+m+mi}{1}
\PYG{o}{*} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{*}
\PYG{o}{*} \PYG{n}{RHTIPxxx} \PYG{p}{:} \PYG{n}{Printer} \PYG{n}{relays} \PYG{k}{for} \PYG{n}{WEB} \PYG{n}{to} \PYG{n}{HOST} \PYG{n}{terminals} \PYG{o}{*}
\PYG{o}{*} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{*}
\PYG{n}{RHTIP000} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{ISTINCLM}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DSILGMOD}\PYG{p}{,}\PYG{n}{EAS}\PYG{o}{=}\PYG{l+m+mi}{1}
\PYG{n}{RHTIP001} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{ISTINCLM}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DSILGMOD}\PYG{p}{,}\PYG{n}{EAS}\PYG{o}{=}\PYG{l+m+mi}{1}
\PYG{n}{RHTIP003} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{ISTINCLM}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DSILGMOD}\PYG{p}{,}\PYG{n}{EAS}\PYG{o}{=}\PYG{l+m+mi}{1}
\PYG{n}{RHTIP004} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{ISTINCLM}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DSILGMOD}\PYG{p}{,}\PYG{n}{EAS}\PYG{o}{=}\PYG{l+m+mi}{1}
\end{sphinxVerbatim}

\sphinxstyleemphasis{VTAM definitions for HTTP terminals}

\index{HTTP Inbound Line@\spxentry{HTTP Inbound Line}!CICS Definitions@\spxentry{CICS Definitions}}\index{CICS Definitions@\spxentry{CICS Definitions}!HTTP Inbound Line@\spxentry{HTTP Inbound Line}}\ignorespaces 

\subsection{CICS Definitions}
\label{\detokenize{connectivity_guide:cics-definitions}}\label{\detokenize{connectivity_guide:index-14}}
The HTTP relay LU’s must also be defined to CICS, as shown in the following example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{*} \PYG{n}{VIRTEL} \PYG{l+m+mi}{3270} \PYG{n}{TERMINALS} \PYG{n}{FOR} \PYG{n}{WEB2HOST}
\PYG{n}{DEFINE} \PYG{n}{TERMINAL}\PYG{p}{(}\PYG{n}{T000}\PYG{p}{)} \PYG{n}{GROUP}\PYG{p}{(}\PYG{n}{VIRTEL}\PYG{p}{)} \PYG{n}{TYPETERM}\PYG{p}{(}\PYG{n}{DFHLU2E2}\PYG{p}{)}
\PYG{n}{NETNAME}\PYG{p}{(}\PYG{n}{RHTVT000}\PYG{p}{)} \PYG{n}{PRINTER}\PYG{p}{(}\PYG{n}{I000}\PYG{p}{)}
\PYG{n}{DESC}\PYG{p}{(}\PYG{n}{VIRTEL} \PYG{n}{WEB} \PYG{n}{TO} \PYG{n}{HOST} \PYG{n}{TERMINAL}\PYG{p}{)}
\PYG{n}{DEFINE} \PYG{n}{TERMINAL}\PYG{p}{(}\PYG{n}{T001}\PYG{p}{)} \PYG{n}{GROUP}\PYG{p}{(}\PYG{n}{VIRTEL}\PYG{p}{)} \PYG{n}{TYPETERM}\PYG{p}{(}\PYG{n}{DFHLU2E2}\PYG{p}{)}
\PYG{n}{NETNAME}\PYG{p}{(}\PYG{n}{RHTVT001}\PYG{p}{)} \PYG{n}{PRINTER}\PYG{p}{(}\PYG{n}{I001}\PYG{p}{)}
\PYG{n}{DESC}\PYG{p}{(}\PYG{n}{VIRTEL} \PYG{n}{WEB} \PYG{n}{TO} \PYG{n}{HOST} \PYG{n}{TERMINAL}\PYG{p}{)}
\PYG{n}{DEFINE} \PYG{n}{TERMINAL}\PYG{p}{(}\PYG{n}{T002}\PYG{p}{)} \PYG{n}{GROUP}\PYG{p}{(}\PYG{n}{VIRTEL}\PYG{p}{)} \PYG{n}{TYPETERM}\PYG{p}{(}\PYG{n}{DFHLU2E2}\PYG{p}{)}
\PYG{n}{NETNAME}\PYG{p}{(}\PYG{n}{RHTVT002}\PYG{p}{)} \PYG{n}{PRINTER}\PYG{p}{(}\PYG{n}{I002}\PYG{p}{)}
\PYG{n}{DESC}\PYG{p}{(}\PYG{n}{VIRTEL} \PYG{n}{WEB} \PYG{n}{TO} \PYG{n}{HOST} \PYG{n}{TERMINAL}\PYG{p}{)}
\PYG{n}{DEFINE} \PYG{n}{TERMINAL}\PYG{p}{(}\PYG{n}{T003}\PYG{p}{)} \PYG{n}{GROUP}\PYG{p}{(}\PYG{n}{VIRTEL}\PYG{p}{)} \PYG{n}{TYPETERM}\PYG{p}{(}\PYG{n}{DFHLU2E2}\PYG{p}{)}
\PYG{n}{NETNAME}\PYG{p}{(}\PYG{n}{RHTVT003}\PYG{p}{)} \PYG{n}{PRINTER}\PYG{p}{(}\PYG{n}{I003}\PYG{p}{)}
\PYG{n}{DESC}\PYG{p}{(}\PYG{n}{VIRTEL} \PYG{n}{WEB} \PYG{n}{TO} \PYG{n}{HOST} \PYG{n}{TERMINAL}\PYG{p}{)}
\PYG{o}{*} \PYG{n}{VIRTEL} \PYG{l+m+mi}{3284} \PYG{n}{PRINTERS} \PYG{n}{FOR} \PYG{n}{WEB2HOST}
\PYG{n}{DEFINE} \PYG{n}{TERMINAL}\PYG{p}{(}\PYG{n}{I000}\PYG{p}{)} \PYG{n}{GROUP}\PYG{p}{(}\PYG{n}{VIRTEL}\PYG{p}{)} \PYG{n}{TYPETERM}\PYG{p}{(}\PYG{n}{DFHLU3}\PYG{p}{)}
\PYG{n}{NETNAME}\PYG{p}{(}\PYG{n}{RHTIP000}\PYG{p}{)}
\PYG{n}{DESC}\PYG{p}{(}\PYG{n}{VIRTEL} \PYG{n}{WEB} \PYG{n}{TO} \PYG{n}{HOST} \PYG{n}{PRINTER}\PYG{p}{)}
\PYG{n}{DEFINE} \PYG{n}{TERMINAL}\PYG{p}{(}\PYG{n}{I001}\PYG{p}{)} \PYG{n}{GROUP}\PYG{p}{(}\PYG{n}{VIRTEL}\PYG{p}{)} \PYG{n}{TYPETERM}\PYG{p}{(}\PYG{n}{DFHLU3}\PYG{p}{)}
\PYG{n}{NETNAME}\PYG{p}{(}\PYG{n}{RHTIP001}\PYG{p}{)}
\PYG{n}{DESC}\PYG{p}{(}\PYG{n}{VIRTEL} \PYG{n}{WEB} \PYG{n}{TO} \PYG{n}{HOST} \PYG{n}{PRINTER}\PYG{p}{)}
\PYG{n}{DEFINE} \PYG{n}{TERMINAL}\PYG{p}{(}\PYG{n}{I002}\PYG{p}{)} \PYG{n}{GROUP}\PYG{p}{(}\PYG{n}{VIRTEL}\PYG{p}{)} \PYG{n}{TYPETERM}\PYG{p}{(}\PYG{n}{DFHLU3}\PYG{p}{)}
\PYG{n}{NETNAME}\PYG{p}{(}\PYG{n}{RHTIP002}\PYG{p}{)}
\PYG{n}{DESC}\PYG{p}{(}\PYG{n}{VIRTEL} \PYG{n}{WEB} \PYG{n}{TO} \PYG{n}{HOST} \PYG{n}{PRINTER}\PYG{p}{)}
\PYG{n}{DEFINE} \PYG{n}{TERMINAL}\PYG{p}{(}\PYG{n}{I003}\PYG{p}{)} \PYG{n}{GROUP}\PYG{p}{(}\PYG{n}{VIRTEL}\PYG{p}{)} \PYG{n}{TYPETERM}\PYG{p}{(}\PYG{n}{DFHLU3}\PYG{p}{)}
\PYG{n}{NETNAME}\PYG{p}{(}\PYG{n}{RHTIP003}\PYG{p}{)}
\PYG{n}{DESC}\PYG{p}{(}\PYG{n}{VIRTEL} \PYG{n}{WEB} \PYG{n}{TO} \PYG{n}{HOST} \PYG{n}{PRINTER}\PYG{p}{)}
\end{sphinxVerbatim}

This job is supplied in member CSDW2H of the VIRTEL SAMPLIB.

\index{Lines@\spxentry{Lines}!HTTP Outbound line@\spxentry{HTTP Outbound line}}\index{HTTP Outbound line@\spxentry{HTTP Outbound line}!Lines@\spxentry{Lines}}\ignorespaces 

\section{HTTP Outbound line}
\label{\detokenize{connectivity_guide:http-outbound-line}}\label{\detokenize{connectivity_guide:v460cn-httpoutbound}}\label{\detokenize{connectivity_guide:index-15}}
An HTTP Outbound line allows VIRTEL to act as an HTTP requester. Activation of this type of line is subject to the presence of the TCP1 parameter in the VIRTCT.

By means of the OPTION\$ FOR-HTTP and SEND\$ TO-LINE instructions, a VIRTEL scenario can make requests to the remote HTTP server whose address is specified in the HTTP Outbound line definition. Multiple HTTP Outbound lines may be defined to allow requests to be sent to different HTTP servers. Refer to “VIRTEL Web Modernisation Scenarios” in the VIRTEL Web Access Guide for examples of the OPTION\$ FOR-HTTP instruction. The \$SITE\$ defines the IP address of the outbound server. It is passed via a sceanrio. See the OPTION\$ FOR-HTTP scenario instruction.

\sphinxincludegraphics{{image15}.png}
\sphinxstyleemphasis{Definition of an HTTP Outbound line}

\index{HTTP Outbound Line@\spxentry{HTTP Outbound Line}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!HTTP Outbound Line@\spxentry{HTTP Outbound Line}}\ignorespaces 

\subsection{Parameters}
\label{\detokenize{connectivity_guide:index-16}}\label{\detokenize{connectivity_guide:id2}}\begin{description}
\item[{Internal name}] \leavevmode
Must be unique.

\item[{External name}] \leavevmode
Should be unique. Either the internal name or the external name may be specified in the SEND\$ TO-LINE instruction in the scenario.

\item[{Remote ident}] \leavevmode
This is the IP address and port number of the remote HTTP server. The format is \sphinxstylestrong{nnn.nnn.nnn.nnn:pppp} where nnn.nnn.nnn.nnn is the
IP address and pppp is the port number. The port number (normallyport 80) must be specified, there is no default.

The remote HTTP server may also be specified by its DNS name and port number, for example webservices.mycompany.com:80

The special value \$SITE\$ indicates that the name and port number of the remote HTTP server are specified in the SITE parameter of the OPTION\$ FOR-HTTP instruction.

\item[{Local ident}] \leavevmode
\$NONE\$ indicates that VIRTEL will not open a listening port for this line.

\item[{Prefix}] \leavevmode
Leave blank. No terminals are required for an HTTP Outbound line.

\item[{Line type}] \leavevmode
One of the TCP/IP protocols defined in the VIRTCT, for example TCP1.

\item[{Possible calls}] \leavevmode
Specify 2 to indicate that this line is used for outbound calls.

\item[{Protocol}] \leavevmode
VIRHTTP or HTTP.

\end{description}

\index{Lines@\spxentry{Lines}!HTTP Outbound SMTP line@\spxentry{HTTP Outbound SMTP line}}\index{HTTP Outbound SMTP line@\spxentry{HTTP Outbound SMTP line}!Lines@\spxentry{Lines}}\ignorespaces 

\section{HTTP Outbound SMTP line}
\label{\detokenize{connectivity_guide:http-outbound-smtp-line}}\label{\detokenize{connectivity_guide:index-17}}
An SMTP line establishes a TCP/IP link between VIRTEL and an external SMTP server. The external SMTP server receives outgoing mail from VIRTEL for distribution to users. The SMTP line also defines the characteristics of VIRTEL’s internal SMTP server which receives incoming mail sent to VIRTEL.  The activation of this type of line requires the presence of the TCP1 parameter in the VIRTCT.
\begin{description}
\item[{..note::}] \leavevmode
In case of SMTP problems, use the command F VIRTEL,TRACE,L=S-SMTP to trace the dialog between VIRTEL and the SMTP server. The trace output is written to SYSPRINT or SYSLST.

\end{description}

\sphinxincludegraphics{{image16}.png}
\sphinxstyleemphasis{SMTP line definition}

\index{HTTP Outbound SMTP Line@\spxentry{HTTP Outbound SMTP Line}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!HTTP Outbound SMTP Line@\spxentry{HTTP Outbound SMTP Line}}\ignorespaces 

\subsection{Parameters}
\label{\detokenize{connectivity_guide:index-18}}\label{\detokenize{connectivity_guide:id3}}\begin{description}
\item[{Remote ident}] \leavevmode
This field is required and represents the IP address and port number of the SMTP server to which VIRTEL sends outgoing mail.

\item[{Local ident}] \leavevmode
The IP address and port number on which VIRTEL listens for incoming mail. For details of how to code this field, refer to “Local ident” under the heading {\hyperref[\detokenize{connectivity_guide:bookmark13}]{\sphinxcrossref{\DUrole{std,std-ref}{“Line Parameters”,}}}}.

\item[{Description}] \leavevmode
The sender name generated in outgoing e-mails. Not used for incoming e-mails.

Generally, the description field does not contain any significant information. However, in the case of an SMTP line, the contents of this field are used by VIRTEL.

The description field for an SMTP line must be in a specific format. It must contain a domain name, followed by an e-mail address enclosed in angle brackets (characters “\textless{}” and “\textgreater{}”). Everything up to the first angle bracket is the operand of the HELO command which VIRTEL sends to the SMTP server. The e-mail address in angle brackets is the default operand of the MAIL FROM command which VIRTEL sends to the SMTP server. This default e-mail address can optionally be overridden by the sending application by means of the
FAD4 structured field. The e-mail address used will normally need to be defined to the SMTP server.

\item[{Prefix}] \leavevmode
Terminal name prefix (see below).

\item[{Entry Point}] \leavevmode
When defining an SMTP line, it is obligatory to define a default entry point. This entry point will be used for all incoming calls which do not match any of the rules of the line.

Entry points for use with SMTP lines are described under the heading “Incoming E-mails” in the VIRTEL Web Access Guide.

\item[{Line type}] \leavevmode
One of the TCP/IP protocols defined in the VIRTCT, for example TCP1.

\item[{Possible calls}] \leavevmode
Direction of calls.

The value 3 must be used in order to allow exchanges in both directions between VIRTEL and the partner SMTP server.

\item[{Protocol}] \leavevmode
Always SMTP.

\item[{Window}] \leavevmode
Always 0.

\item[{Packet}] \leavevmode
Always 0.

\item[{Pad}] \leavevmode
Always blank.

\item[{Tran}] \leavevmode
Always blank.

\end{description}

\sphinxstyleemphasis{SMTP terminals}
\begin{quote}

By pressing {[}PF4{]}, the list of terminals associated with the SMTP line will be displayed. An SMTP line uses a single sub- group of type-3 terminals having a common prefix (in this case SM). The number of terminals defined determines the number of simultaneous SMTP sessions authorised. Either explicit or repeated Terminal Definitions may be used.

The example below shows a group of 16 SMTP terminals with associated relays:
\end{quote}

\sphinxincludegraphics{{image17}.png}
\sphinxstyleemphasis{SMTP Terminal Definitions}

\index{HTTP Outbound SMTP Line@\spxentry{HTTP Outbound SMTP Line}!Terminal Definitions@\spxentry{Terminal Definitions}}\index{Terminal Definitions@\spxentry{Terminal Definitions}!HTTP Outbound SMTP Line@\spxentry{HTTP Outbound SMTP Line}}\ignorespaces 

\subsection{Terminal Definitions}
\label{\detokenize{connectivity_guide:index-19}}\label{\detokenize{connectivity_guide:id4}}\begin{description}
\item[{Terminal}] \leavevmode
The terminal name must match the prefix of the line.

\item[{Relay}] \leavevmode
A relay LU must be specified if incoming e-mails are used to trigger the start of a CICS transaction (or another VTAM application). The relay LU’s must be defined by APPL statements in a VTAM application major node, as described below.

\item[{Entry point}] \leavevmode
Leave blank. The entry point is defined in the line (or in the rules of the line) for this type of terminal.

\item[{Type de terminal}] \leavevmode
Always 3.

\item[{Compression}] \leavevmode
Always 2.

\item[{Possible Calls}] \leavevmode
Always 3.

\item[{Repeat}] \leavevmode
The number of terminals defined.

\end{description}

\index{HTTP Outbound SMTP Line@\spxentry{HTTP Outbound SMTP Line}!VTAM Terminal Definitions@\spxentry{VTAM Terminal Definitions}}\index{VTAM Terminal Definitions@\spxentry{VTAM Terminal Definitions}!HTTP Outbound SMTP Line@\spxentry{HTTP Outbound SMTP Line}}\ignorespaces 

\subsection{VTAM Terminal Definitions}
\label{\detokenize{connectivity_guide:index-20}}\label{\detokenize{connectivity_guide:id5}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{RWSVT200} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{MODVIRT}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DLOGREL}
\PYG{n}{RWSVT201} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{MODVIRT}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DLOGREL}
\PYG{n}{RWSVT202} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{MODVIRT}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DLOGREL}
\PYG{n}{RWSVT203} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{MODVIRT}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DLOGREL}
\end{sphinxVerbatim}

\sphinxstyleemphasis{VTAM definitions for SMTP relay LUs}

\index{HTTP Ôutbound SMTP Line@\spxentry{HTTP Ôutbound SMTP Line}!CICS Definitions@\spxentry{CICS Definitions}}\index{CICS Definitions@\spxentry{CICS Definitions}!HTTP Ôutbound SMTP Line@\spxentry{HTTP Ôutbound SMTP Line}}\ignorespaces 

\subsection{CICS Definitions}
\label{\detokenize{connectivity_guide:index-21}}\label{\detokenize{connectivity_guide:id6}}
Where incoming e-mails are used to trigger a CICS transaction (or other VTAM application), the SMTP relay LU’s must be defined by APPL statements in a VTAM application major node, as shown in this example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{DEFINE} \PYG{n}{TYPETERM}\PYG{p}{(}\PYG{n}{SMTP3270}\PYG{p}{)} \PYG{n}{GROUP}\PYG{p}{(}\PYG{n}{VIRTSMTP}\PYG{p}{)}
\PYG{n}{DESCRIPTION}\PYG{p}{(}\PYG{n}{TYPETERM} \PYG{n}{FOR} \PYG{n}{SMTP} \PYG{n}{PSEUDO}\PYG{o}{\PYGZhy{}}\PYG{n}{TERMINAL}\PYG{p}{)}
\PYG{n}{DEVICE}\PYG{p}{(}\PYG{l+m+mi}{3270}\PYG{p}{)} \PYG{n}{TERMMODEL}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{)} \PYG{n}{SHIPPABLE}\PYG{p}{(}\PYG{n}{YES}\PYG{p}{)} \PYG{n}{RECEIVESIZE}\PYG{p}{(}\PYG{l+m+mi}{16384}\PYG{p}{)}
\PYG{n}{PAGESIZE}\PYG{p}{(}\PYG{l+m+mi}{24}\PYG{p}{,}\PYG{l+m+mi}{80}\PYG{p}{)} \PYG{n}{DEFSCREEN}\PYG{p}{(}\PYG{l+m+mi}{24}\PYG{p}{,}\PYG{l+m+mi}{80}\PYG{p}{)} \PYG{n}{EXTENDEDDS}\PYG{p}{(}\PYG{n}{YES}\PYG{p}{)} \PYG{n}{QUERY}\PYG{p}{(}\PYG{n}{ALL}\PYG{p}{)}
\PYG{n}{TTI}\PYG{p}{(}\PYG{n}{YES}\PYG{p}{)} \PYG{n}{RELREQ}\PYG{p}{(}\PYG{n}{YES}\PYG{p}{)} \PYG{n}{DISCREQ}\PYG{p}{(}\PYG{n}{YES}\PYG{p}{)} \PYG{n}{LOGONMSG}\PYG{p}{(}\PYG{n}{NO}\PYG{p}{)} \PYG{n}{UCTRAN}\PYG{p}{(}\PYG{n}{NO}\PYG{p}{)}
\PYG{n}{DEFINE} \PYG{n}{TERMINAL}\PYG{p}{(}\PYG{n}{SM00}\PYG{p}{)} \PYG{n}{GROUP}\PYG{p}{(}\PYG{n}{VIRTSMTP}\PYG{p}{)}
\PYG{n}{DESCRIPTION}\PYG{p}{(}\PYG{n}{PSEUDO}\PYG{o}{\PYGZhy{}}\PYG{n}{TERMINAL} \PYG{n}{FOR} \PYG{n}{SMTP}\PYG{p}{)}
\PYG{n}{TYPETERM}\PYG{p}{(}\PYG{n}{SMTP3270}\PYG{p}{)} \PYG{n}{NETNAME}\PYG{p}{(}\PYG{n}{RWSVT200}\PYG{p}{)} \PYG{n}{USERID}\PYG{p}{(}\PYG{n}{SPVIRSTC}\PYG{p}{)}
\PYG{n}{DEFINE} \PYG{n}{TERMINAL}\PYG{p}{(}\PYG{n}{SM01}\PYG{p}{)} \PYG{n}{GROUP}\PYG{p}{(}\PYG{n}{VIRTSMTP}\PYG{p}{)}
\PYG{n}{DESCRIPTION}\PYG{p}{(}\PYG{n}{PSEUDO}\PYG{o}{\PYGZhy{}}\PYG{n}{TERMINAL} \PYG{n}{FOR} \PYG{n}{SMTP}\PYG{p}{)}
\PYG{n}{TYPETERM}\PYG{p}{(}\PYG{n}{SMTP3270}\PYG{p}{)} \PYG{n}{NETNAME}\PYG{p}{(}\PYG{n}{RWSVT201}\PYG{p}{)} \PYG{n}{USERID}\PYG{p}{(}\PYG{n}{SPVIRSTC}\PYG{p}{)}
\PYG{n}{DEFINE} \PYG{n}{TERMINAL}\PYG{p}{(}\PYG{n}{SM02}\PYG{p}{)} \PYG{n}{GROUP}\PYG{p}{(}\PYG{n}{VIRTSMTP}\PYG{p}{)}
\PYG{n}{DESCRIPTION}\PYG{p}{(}\PYG{n}{PSEUDO}\PYG{o}{\PYGZhy{}}\PYG{n}{TERMINAL} \PYG{n}{FOR} \PYG{n}{SMTP}\PYG{p}{)}
\PYG{n}{TYPETERM}\PYG{p}{(}\PYG{n}{SMTP3270}\PYG{p}{)} \PYG{n}{NETNAME}\PYG{p}{(}\PYG{n}{RWSVT202}\PYG{p}{)} \PYG{n}{USERID}\PYG{p}{(}\PYG{n}{SPVIRSTC}\PYG{p}{)}
\PYG{n}{DEFINE} \PYG{n}{TERMINAL}\PYG{p}{(}\PYG{n}{SM03}\PYG{p}{)} \PYG{n}{GROUP}\PYG{p}{(}\PYG{n}{VIRTSMTP}\PYG{p}{)}
\PYG{n}{DESCRIPTION}\PYG{p}{(}\PYG{n}{PSEUDO}\PYG{o}{\PYGZhy{}}\PYG{n}{TERMINAL} \PYG{n}{FOR} \PYG{n}{SMTP}\PYG{p}{)}
\PYG{n}{TYPETERM}\PYG{p}{(}\PYG{n}{SMTP3270}\PYG{p}{)} \PYG{n}{NETNAME}\PYG{p}{(}\PYG{n}{RWSVT203}\PYG{p}{)} \PYG{n}{USERID}\PYG{p}{(}\PYG{n}{SPVIRSTC}\PYG{p}{)}
\end{sphinxVerbatim}

\newpage

\index{Lines@\spxentry{Lines}!IMS Connect Line@\spxentry{IMS Connect Line}}\index{IMS Connect Line@\spxentry{IMS Connect Line}!Lines@\spxentry{Lines}}\ignorespaces 

\section{IMS Connect line}
\label{\detokenize{connectivity_guide:ims-connect-line}}\label{\detokenize{connectivity_guide:index-22}}
An IMS Connect line establishes a TCP/IP connection between VIRTEL and IMS Connect using the RESUME TPIPE protocol. Once the connection is established, IMS application programs running in an MPP or BMP region can send requests to VIRTEL using the ICAL DL/I call. VIRTEL processes these requests by launching a customer-written scenario. The scenario can perform actions such as making an outbound HTTP call to a web service before returning the result to the IMS application program. Activation of this type of line requires the presence of the TCP1 parameter in the VIRTCT.

\sphinxincludegraphics{{image18}.png}
\sphinxstyleemphasis{Definition of an IMS Connect line}


\subsection{Parameters}
\label{\detokenize{connectivity_guide:id7}}\begin{description}
\item[{Internal name}] \leavevmode
The VIRTEL internal name for this connection.

\item[{External name}] \leavevmode
Must match the IMS destination id (IRM\_IMSDestId).

\item[{Remote ident}] \leavevmode
IP address of IMS Connect followed by the port number.

\item[{Local ident}] \leavevmode
Leave blank.

\item[{Prefix}] \leavevmode
Terminal name prefix (see below).

\item[{Entry Point}] \leavevmode
The entry point name must match the IMS TPIPE name (IRM\_CLIENTID).

\item[{Line type}] \leavevmode
One of the TCP/IP protocols defined in the VIRTCT, for example TCP1.

\item[{Possible calls}] \leavevmode
Always 1.

\item[{Protocol}] \leavevmode
Always ICONNECT.

\end{description}

\index{IMS Connect@\spxentry{IMS Connect}!Terminal Definitions@\spxentry{Terminal Definitions}}\index{Terminal Definitions@\spxentry{Terminal Definitions}!IMS Connect@\spxentry{IMS Connect}}\ignorespaces 

\subsection{Terminals Definitions}
\label{\detokenize{connectivity_guide:terminals-definitions}}\label{\detokenize{connectivity_guide:index-23}}
Press {[}PF4{]} at the Line Detail Definition screen to display the list of terminals associated with an IMS Connect line. An IMS Connect line uses a single sub-group of type-3 terminals having a common prefix (ICAL in this example). No relays are defined for this type of line. The number of terminals defined determines the maximum number of simultaneous RESUME TPIPE sessions between VIRTEL and IMS Connect.

\sphinxincludegraphics{{image19}.png}
\sphinxstyleemphasis{Definition of terminals associated with an IMS Connect line}
\begin{description}
\item[{Terminal}] \leavevmode
The terminal name must match the prefix of the line.

\item[{Relais}] \leavevmode
Leave blank.

\item[{Entry point}] \leavevmode
Leave blank.

\item[{Terminal Type}] \leavevmode
Always 3.

\item[{Compression}] \leavevmode
Always 2.

\item[{Possible calls}] \leavevmode
Always 1.

\item[{Repeat}] \leavevmode
Number of terminals (RESUME TPIPE sessions) defined.

\end{description}

\index{IMS Connect@\spxentry{IMS Connect}!Entry Point@\spxentry{Entry Point}}\index{Entry Point@\spxentry{Entry Point}!IMS Connect@\spxentry{IMS Connect}}\ignorespaces 

\subsection{Entry Point}
\label{\detokenize{connectivity_guide:entry-point}}\label{\detokenize{connectivity_guide:index-24}}
Each IMS Connect line must have an associated Entry Point whose name is specified in the line definition. An example is shown below:

\sphinxincludegraphics{{image20}.png}
\sphinxstyleemphasis{Definition of entry point associated with an IMS Connect line}
\begin{description}
\item[{Name}] \leavevmode
The name of the entry point must match the IMS TPIPE name specified
in the IRM\_CLIENTID parameter of the IMS Connect definition.

\item[{Transactions}] \leavevmode
Prefix of associated transaction names (see next section).

\item[{Emulation}] \leavevmode
Always SCENARIO.

\item[{Directory for scenarios}] \leavevmode
The name of the VIRTEL directory which contains the scenario(s) for
processing requests from IMS.

\end{description}

\index{IMS Connect@\spxentry{IMS Connect}!Transactions@\spxentry{Transactions}}\index{Transactions@\spxentry{Transactions}!IMS Connect@\spxentry{IMS Connect}}\ignorespaces 

\subsection{Transactions}
\label{\detokenize{connectivity_guide:transactions}}\label{\detokenize{connectivity_guide:index-25}}
Each IMS Connect entry point must have one or more associated transactions. Press {[}PF4{]} at the Entry Point Detail Definition screen to display the list of transactions associated with an IMS Connect entry point. The transaction definition specifies the name of the scenario which will be invoked to process an incoming request from IMS. If the incoming request does not specify a transaction name, or if the specified transaction name is not defined in the entry point, then VIRTEL will invoke the transaction whose external name is the same as the entry point name. If there is no such default transaction, then the request is rejected and VIRTEL issues message VIRIC57E.

\sphinxincludegraphics{{image21}.png}
\sphinxstyleemphasis{Definition of a transaction associated with an IMS Connect entry point}
\begin{description}
\item[{Internal name}] \leavevmode
Must match the transaction prefix specified in the entry point.

\item[{External name}] \leavevmode
This is the transaction name specified by the IMS application in the
message header. For the default transaction, the external name must
be the same as the entry point name.

\item[{Application}] \leavevmode
Always \$NONE\$.

\item[{Application type}] \leavevmode
Always 2.

\item[{Security}] \leavevmode
Always 0.

\item[{TIOA at logon}] \leavevmode
Always \&/S.

\item[{Initial scenario}] \leavevmode
The name of the VIRTEL scenario which will process requests from IMS
for this transaction.

\end{description}

\index{ÎMS Connect@\spxentry{ÎMS Connect}!Scenarios@\spxentry{Scenarios}}\index{Scenarios@\spxentry{Scenarios}!ÎMS Connect@\spxentry{ÎMS Connect}}\ignorespaces 

\subsection{Scenarios}
\label{\detokenize{connectivity_guide:scenarios}}\label{\detokenize{connectivity_guide:index-26}}\begin{quote}

When a scenario is invoked to process a request message from IMS connect, VIRTEL places the contents of the request message in the variable \$INFILE\$. After processing the message, the scenario  returns a response message to IMS by means of the SEND\$ AS-ANSWER instruction. By way of illustration, the simple example shown below converts the request message to uppercase before sending it back as a response message to IMS:
\end{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
OTMACL SCREENS APPL=OTMACL
*
* Scenario for testing an IMS CONNECT connection
*
SCENARIO INITIAL
*
CONVERT\PYGZdl{} EBCDIC\PYGZhy{}TO\PYGZhy{}UPPERCASE,VAR=\PYGZsq{}\PYGZdl{}INFILE\PYGZdl{}\PYGZsq{}
SEND\PYGZdl{} AS\PYGZhy{}ANSWER,VAR=\PYGZsq{}\PYGZdl{}INFILE\PYGZdl{}\PYGZsq{},TYPE=\PYGZsq{}TEXT\PYGZsq{}
*
SCENARIO END
*
SCRNEND
END
\end{sphinxVerbatim}

\sphinxstyleemphasis{Example scenario for processing an IMS Connect request}

..note:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{More} \PYG{n+nb}{complex} \PYG{n}{scenarios} \PYG{n}{may} \PYG{n}{be} \PYG{n}{constructed} \PYG{k}{with} \PYG{n}{the} \PYG{n}{aid} \PYG{n}{of} \PYG{n}{VIRTEL} \PYG{n}{Studio}\PYG{o}{.}
\end{sphinxVerbatim}

\index{ÎMS Connect@\spxentry{ÎMS Connect}!Message format@\spxentry{Message format}}\index{Message format@\spxentry{Message format}!ÎMS Connect@\spxentry{ÎMS Connect}}\ignorespaces 

\subsection{Message format}
\label{\detokenize{connectivity_guide:message-format}}\label{\detokenize{connectivity_guide:index-27}}\begin{quote}

Messages sent from an IMS application to VIRTEL may be prefixed by a 12-byte header. The format of the header is shown in the figure below:
\end{quote}


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|T|T|T|}
\hline
\sphinxstartmulticolumn{2}%
\sphinxmultirow{2}{1}{%
\begin{varwidth}[t]{\sphinxcolwidth{2}{5}}
\sphinxstyletheadfamily Bytes
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
\sphinxstopmulticolumn
&\sphinxmultirow{2}{2}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{5}}
\sphinxstyletheadfamily Length
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
&\sphinxmultirow{2}{3}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{5}}
\sphinxstyletheadfamily EBCDIC
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
&\sphinxmultirow{2}{4}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{5}}
\sphinxstyletheadfamily Meaning
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
\\
\multicolumn{2}{|l|}{\sphinxtablestrut{1}}&\sphinxtablestrut{2}&\sphinxtablestrut{3}&\sphinxtablestrut{4}\\
\hline\sphinxstartmulticolumn{2}%
\sphinxmultirow{2}{5}{%
\begin{varwidth}[t]{\sphinxcolwidth{2}{5}}
0 - 3
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
\sphinxstopmulticolumn
&\sphinxmultirow{2}{6}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{5}}
4
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
&\sphinxmultirow{2}{7}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{5}}
/V1/
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
&\sphinxmultirow{2}{8}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{5}}
Identifies type of prefix
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
\\
\multicolumn{2}{|l|}{\sphinxtablestrut{5}}&\sphinxtablestrut{6}&\sphinxtablestrut{7}&\sphinxtablestrut{8}\\
\hline\sphinxstartmulticolumn{2}%
\sphinxmultirow{3}{9}{%
\begin{varwidth}[t]{\sphinxcolwidth{2}{5}}
4 - 11
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
\sphinxstopmulticolumn
&\sphinxmultirow{3}{10}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{5}}
8
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
&\sphinxmultirow{3}{11}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{5}}
xxxxxx
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
&\sphinxmultirow{3}{12}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{5}}
Externql transaction name. Left
justified and padded with blanks
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
\\
\multicolumn{2}{|l|}{\sphinxtablestrut{9}}&\sphinxtablestrut{10}&\sphinxtablestrut{11}&\sphinxtablestrut{12}\\
\multicolumn{2}{|l|}{\sphinxtablestrut{9}}&\sphinxtablestrut{10}&\sphinxtablestrut{11}&\sphinxtablestrut{12}\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}

\sphinxstyleemphasis{Format of an IMS Connect message header}

All data following the header is treated as binary data which is passed to the scenario without translation in the \$INFILE\$ variable.

\newpage

\index{Lines@\spxentry{Lines}!MQ Line@\spxentry{MQ Line}}\index{MQ Line@\spxentry{MQ Line}!Lines@\spxentry{Lines}}\ignorespaces 

\section{MQ line}
\label{\detokenize{connectivity_guide:mq-line}}\label{\detokenize{connectivity_guide:index-28}}
An MQ line establishes a connection between VIRTEL and an MQSeries message queue. Each MQ line can receive messages from, or send messages to, one MQSeries message queue. Activation of this type of line requires the presence of the MQ1 or MQ2 parameter in the VIRTCT. The queue can be shared with another application (another VIRTEL for instance) or used in exclusive mode depending on its own definition.

\sphinxincludegraphics{{image24}.png}

\index{MQ Line@\spxentry{MQ Line}!MQ Line parameters@\spxentry{MQ Line parameters}}\index{MQ Line parameters@\spxentry{MQ Line parameters}!MQ Line@\spxentry{MQ Line}}\ignorespaces 

\subsection{Parameters}
\label{\detokenize{connectivity_guide:index-29}}\label{\detokenize{connectivity_guide:id8}}\begin{description}
\item[{Remote ident}] \leavevmode
For the RAW protocol: Leave blank.

For the PREFIXED, PREFIX12, and PREFIX20 protocols: The special
value \$REPLYTOQ indicates that outbound messages are sent to the
destination indicated by the REPLYTOQ and REPLYTOQMGR parameters
taken from the inbound message and saved in the 12- or 20-byte
header.

\item[{Local ident}] \leavevmode
The name of the MQSeries message queue. The queue name prefix
specified in the MQn parameter of the VIRTCT will be added to the
front of this name. Refer to “Parameters of the VIRTCT” in the
VIRTEL Installation Guide for details of the MQn parameter.

\item[{Prefix}] \leavevmode
Terminal name prefix (see below).

\item[{Entry Point}] \leavevmode
Required for MQ input queue.

\item[{Line type}] \leavevmode
One of the MQn protocols defined in the VIRTCT, for example MQ1.

\item[{Possible calls}] \leavevmode
Specify one of the following values:

-1 = Input: VIRTEL receives messages from the MQSeries queue
-2 = Output: VIRTEL writes messages to the MQSeries queue

\item[{Protocol}] \leavevmode
RAW, PREFIXED, PREFIX12, or PREFIX20.

\item[{Tran}] \leavevmode\begin{quote}

Specify the way in which messages are processed on the line.
\end{quote}

-STR = The messages are processed as MQFMT\_STRING formatted messages. This will allow MQ to perform the appropriate character set translations between the communicating systems. To support this feature, the PTF5135 must be applied on the system.

-no value = The messages are processed as MQFMT\_NONE formatted messages.

\end{description}


\subsubsection{Navigation}
\label{\detokenize{connectivity_guide:id9}}
Press {[}PF4{]} at the line definition screen to display the list of terminals associated with an MQ line. An MQ line uses a single sub-group of type-3 terminals having a common prefix (MQIN in this example). The number of terminals defined determines the maximum number of messages which can be processed simultaneously by VIRTEL.

\sphinxincludegraphics{{image25}.png}

\index{MQ Line@\spxentry{MQ Line}!Terminals Parameters@\spxentry{Terminals Parameters}}\index{Terminals Parameters@\spxentry{Terminals Parameters}!MQ Line@\spxentry{MQ Line}}\ignorespaces 

\subsection{Terminal Parameters}
\label{\detokenize{connectivity_guide:terminal-parameters}}\label{\detokenize{connectivity_guide:index-30}}\begin{description}
\item[{Terminal}] \leavevmode
The terminal name must match the prefix of the line.

\item[{Relais}] \leavevmode
Leave blank.

\item[{Entry point}] \leavevmode
Leave blank.

\item[{Terminal Type}] \leavevmode
Always 3.

\item[{Compression}] \leavevmode
Always 2.

\item[{Possible calls}] \leavevmode
Always 3.

\item[{Repeat}] \leavevmode
Number of terminals defined.

\end{description}

\newpage

\index{Lines@\spxentry{Lines}!Batch Line@\spxentry{Batch Line}}\index{Batch Line@\spxentry{Batch Line}!Lines@\spxentry{Lines}}\ignorespaces 

\section{Batch line}
\label{\detokenize{connectivity_guide:batch-line}}\label{\detokenize{connectivity_guide:index-31}}
A batch line allows VIRTEL to process HTTP requests in batch mode. When a batch line is defined in the VIRTEL configuration, VIRTEL reads HTTP requests from an input sequential file at startup, processes the requests, writes the responses to an output sequential file, and shuts down. Activation of this type of line is subject to the presence of the BATCHn parameter in the VIRTCT.

\sphinxincludegraphics{{image26}.png}

\index{Batch Line@\spxentry{Batch Line}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!Batch Line@\spxentry{Batch Line}}\ignorespaces 

\subsection{Parameters}
\label{\detokenize{connectivity_guide:index-32}}\label{\detokenize{connectivity_guide:id10}}\begin{description}
\item[{Remote ident}] \leavevmode
Always blank.

\item[{Local ident}] \leavevmode
Always blank.

\item[{Prefix}] \leavevmode
Terminal name prefix (see below).

\item[{Entry Point}] \leavevmode
When defining a batch line, it is obligatory to define a default entry point. This entry point is similar to the entry point used for an HTTP line. The entry point contains a list of transactions, and these transactions determine which directories are used to retrieve page templates, and which 3270 applications are accessible to the batch requests.

Each transaction must refer to one of the terminal sub-groups associated with the batch line (see ”Batch terminals” below).
\begin{description}
\item[{For type 1 (Application) transactions:}] \leavevmode
The prefix will be that of the terminal sub-group with an associated relay.

\item[{For type 2 (Virtel) or type 4 (Page) transactions}] \leavevmode
The prefix will be that of the terminal sub-group without an associated relay.

\item[{For type 3 (Server) transactions}] \leavevmode
No terminal prefix is required.

\end{description}

\item[{Line type}] \leavevmode
BATCH1 or BATCH2, corresponding to one of the BATCH parameters defined in the VIRTCT.

\item[{Possible calls}] \leavevmode
Specify 1 (incoming calls only).

\item[{Protocol}] \leavevmode
VIRHTTP or HTTP.

\item[{Window}] \leavevmode
Always 0.

\item[{Packet}] \leavevmode
Always 0.

\item[{Pad}] \leavevmode
Always blank.

\item[{Tran}] \leavevmode
Always blank.

\end{description}

\index{Batch Line@\spxentry{Batch Line}!Terminal Definitions@\spxentry{Terminal Definitions}}\index{Terminal Definitions@\spxentry{Terminal Definitions}!Batch Line@\spxentry{Batch Line}}\ignorespaces 

\subsection{Terminal Definitions}
\label{\detokenize{connectivity_guide:index-33}}\label{\detokenize{connectivity_guide:id11}}\begin{quote}

Like an HTTP line, a batch line uses up to two sub-groups of type-3 terminals having a common prefix (in this case BT1). Refer to “HTTP terminals” 26 for further details. If the batch requests do not require connection to a host VTAM application, then it is only necessary to define the first terminal sub-group (the sub-group without relays).

Press {[}PF4{]} at the line detail definition screen to display the list of associated terminals whose prefix matches the prefix specified in the line definition. Then press {[}PF12{]} to display the terminal detail definition. The example below shows the terminals for a batch line without relays:
\end{quote}

\sphinxincludegraphics{{image27}.png}

\sphinxstyleemphasis{Definition of terminals without relay for a batch line}

\newpage

\index{Lines@\spxentry{Lines}!Native TCP/IP Gateway line@\spxentry{Native TCP/IP Gateway line}}\index{Native TCP/IP Gateway line@\spxentry{Native TCP/IP Gateway line}!Lines@\spxentry{Lines}}\ignorespaces 

\section{Native TCP/IP Gateway line}
\label{\detokenize{connectivity_guide:native-tcp-ip-gateway-line}}\label{\detokenize{connectivity_guide:index-34}}\begin{quote}

VIRTEL can act as an IP-to-SNA gateway allowing existing VTAM applications to communicate with partner applications via the IP network. By connecting to a VIRTEL NATIVE TCP/IP port, a remote application can establish a TCP/IP session with VIRTEL and exchange messages with a host VTAM application using a simple record-oriented protocol.

The connection is always established by the remote TCP/IP application, but messages can flow in both directions. Each message  exchanged between VIRTEL and the partner application is preceded by a two- or four-byte length field.

Typically the host application is a CICS application designed to communicate with banking terminals such as the IBM 3650.

The activation of this type of line requires the presence of the \textgreater{}TCP1 parameter in the VIRTCT.
\end{quote}

\sphinxincludegraphics{{image28}.png}

\index{Native Gateway Line@\spxentry{Native Gateway Line}!Native TCP/IP Gateway line parameters@\spxentry{Native TCP/IP Gateway line parameters}}\index{Native TCP/IP Gateway line parameters@\spxentry{Native TCP/IP Gateway line parameters}!Native Gateway Line@\spxentry{Native Gateway Line}}\ignorespaces 

\subsection{Parameters}
\label{\detokenize{connectivity_guide:index-35}}\label{\detokenize{connectivity_guide:id12}}\begin{description}
\item[{Remote ident}] \leavevmode
Not used for a NATIVE TCP/IP line.

\item[{Local ident}] \leavevmode
The IP address and port number on which VIRTEL listens for incoming connections from the partner application. For details of how to code this field, refer to “Local ident” under the heading {\hyperref[\detokenize{connectivity_guide:bookmark13}]{\sphinxcrossref{\DUrole{std,std-ref}{“Line Parameters”}}}}.

\item[{Prefix}] \leavevmode
Terminal name prefix (see below).

\item[{Entry Point}] \leavevmode
The default entry point will be used for all incoming calls which do not match any of the rules of the line. Entry points for use with native TCP/IP lines must specify Emulation type \$NONE\$

\item[{Line type}] \leavevmode
One of the TCP/IP protocols defined in the VIRTCT, for example TCP1.

\item[{Possible calls}] \leavevmode
Specify 1 to allow inbound calls.

\item[{Protocol}] \leavevmode
NATIVE2 or NATIVE2P for native TCP/IP protocol with a two-byte length field NATIVE4 or NATIVE4P for native TCP/IP protocol with a four-byte length field

\item[{Packet}] \leavevmode
Specify a packet size sufficient to contain the largest message sent by either the host or the partner application, plus 2 or 4 bytes for the length field.

\end{description}

\index{Native Gateway Line@\spxentry{Native Gateway Line}!Line terminals@\spxentry{Line terminals}}\index{Line terminals@\spxentry{Line terminals}!Native Gateway Line@\spxentry{Native Gateway Line}}\ignorespaces 

\subsection{Line Terminals}
\label{\detokenize{connectivity_guide:line-terminals}}\label{\detokenize{connectivity_guide:index-36}}\begin{quote}

By pressing {[}PF4{]}, the list of terminals associated with the NATIVE TCP/IP line will be displayed. A NATIVE TCP/IP line uses a single group of type-3 terminals having a common prefix (VIP in this example). The number of terminals defined determines the number of simultaneous conversations authorised.

The example below shows a group of 4 NATIVE TCP/IP terminals:
\end{quote}

\sphinxincludegraphics{{image29}.png}

\index{Native Gateway Line@\spxentry{Native Gateway Line}!Terminal Parameters@\spxentry{Terminal Parameters}}\index{Terminal Parameters@\spxentry{Terminal Parameters}!Native Gateway Line@\spxentry{Native Gateway Line}}\ignorespaces 

\subsection{Terminal Parameters}
\label{\detokenize{connectivity_guide:index-37}}\label{\detokenize{connectivity_guide:id13}}\begin{description}
\item[{Terminal}] \leavevmode
The terminal name must match the prefix of the line.

\item[{Relay}] \leavevmode
Specify the name of the relay pool which defines the terminal LU
names as seen by the VTAM application. The first character is an
asterisk indicating that this is the name of a pool.

\item[{Entry point}] \leavevmode
Leave blank. The entry point is defined in the line (or in the rules
of the line) for this type of terminal.

\item[{Terminal type}] \leavevmode
Always 3.

\item[{Compression}] \leavevmode
Always 2.

\item[{Possible Calls}] \leavevmode
Always 3.

\item[{Repeat}] \leavevmode
The number of terminals defined.

\end{description}

\index{Native Gateway Line@\spxentry{Native Gateway Line}!Relay Pool@\spxentry{Relay Pool}}\index{Relay Pool@\spxentry{Relay Pool}!Native Gateway Line@\spxentry{Native Gateway Line}}\ignorespaces 

\subsection{Relay Pool}
\label{\detokenize{connectivity_guide:relay-pool}}\label{\detokenize{connectivity_guide:index-38}}
The figure below shows the definition of the NATIVE TCP/IP relay pool:

\sphinxincludegraphics{{image30}.png}

\index{Native Gateway Line@\spxentry{Native Gateway Line}!VTAM Terminal Definitions@\spxentry{VTAM Terminal Definitions}}\index{VTAM Terminal Definitions@\spxentry{VTAM Terminal Definitions}!Native Gateway Line@\spxentry{Native Gateway Line}}\ignorespaces 

\subsection{VTAM terminals definitions}
\label{\detokenize{connectivity_guide:vtam-terminals-definitions}}\label{\detokenize{connectivity_guide:index-39}}
Relay LU’s must be defined to VTAM by means of APPL statements in an application major node, as shown in the following example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{VIRTAPPL} \PYG{n}{VBUILD} \PYG{n}{TYPE}\PYG{o}{=}\PYG{n}{APPL}
\PYG{o}{*} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{*}
\PYG{o}{*} \PYG{n}{RVIPLU00} \PYG{p}{:} \PYG{n}{VTAM} \PYG{n}{relays} \PYG{k}{for} \PYG{n}{VIRTEL} \PYG{n}{NATIVE} \PYG{n}{TCP}\PYG{o}{/}\PYG{n}{IP} \PYG{n}{terminals}          \PYG{o}{*}
\PYG{o}{*} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{*}
\PYG{n}{RVIPLU00} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{MODVIRT}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DLOGREL}
\PYG{n}{RVIPLU01} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{MODVIRT}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DLOGREL}
\PYG{n}{RVIPLU02} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{MODVIRT}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DLOGREL}
\PYG{n}{RVIPLU03} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{MODVIRT}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DLOGREL}
\end{sphinxVerbatim}

\sphinxstyleemphasis{VTAM definitions for NATIVE TCP/IP relay LU’s}

\index{Native Gateway Line@\spxentry{Native Gateway Line}!CICS Definitions@\spxentry{CICS Definitions}}\index{CICS Definitions@\spxentry{CICS Definitions}!Native Gateway Line@\spxentry{Native Gateway Line}}\ignorespaces 

\subsection{CICS Definitions}
\label{\detokenize{connectivity_guide:index-40}}\label{\detokenize{connectivity_guide:id14}}
The NATIVE TCP/IP relay LU’s must also be defined to CICS, as shown in the following example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{DEFINE} \PYG{n}{TYPETERM}\PYG{p}{(}\PYG{n}{DT3650}\PYG{p}{)} \PYG{n}{GROUP}\PYG{p}{(}\PYG{n}{VIRTEL}\PYG{p}{)}
\PYG{n}{DESC}\PYG{p}{(}\PYG{l+m+mi}{3650} \PYG{n}{FOR} \PYG{n}{VIRTEL} \PYG{n}{TCP}\PYG{o}{/}\PYG{n}{IP}\PYG{p}{)}
\PYG{n}{DEVICE}\PYG{p}{(}\PYG{l+m+mi}{3650}\PYG{p}{)} \PYG{n}{SESSIONTYPE}\PYG{p}{(}\PYG{n}{USERPROG}\PYG{p}{)}
\PYG{n}{SENDSIZE}\PYG{p}{(}\PYG{l+m+mi}{1536}\PYG{p}{)} \PYG{n}{RECEIVESIZE}\PYG{p}{(}\PYG{l+m+mi}{1536}\PYG{p}{)}
\PYG{n}{DEFINE} \PYG{n}{TERMINAL}\PYG{p}{(}\PYG{n}{VR00}\PYG{p}{)} \PYG{n}{GROUP}\PYG{p}{(}\PYG{n}{VIRTEL}\PYG{p}{)} \PYG{n}{NETNAME}\PYG{p}{(}\PYG{n}{RVIPLU00}\PYG{p}{)}
\PYG{n}{DESC}\PYG{p}{(}\PYG{n}{VIRTEL} \PYG{n}{NATIVE} \PYG{n}{TCP}\PYG{o}{/}\PYG{n}{IP} \PYG{n}{TERMINAL}\PYG{p}{)} \PYG{n}{TYPETERM}\PYG{p}{(}\PYG{n}{DT3650}\PYG{p}{)}
\PYG{n}{DEFINE} \PYG{n}{TERMINAL}\PYG{p}{(}\PYG{n}{VR01}\PYG{p}{)} \PYG{n}{GROUP}\PYG{p}{(}\PYG{n}{VIRTEL}\PYG{p}{)} \PYG{n}{NETNAME}\PYG{p}{(}\PYG{n}{RVIPLU01}\PYG{p}{)}
\PYG{n}{DESC}\PYG{p}{(}\PYG{n}{VIRTEL} \PYG{n}{NATIVE} \PYG{n}{TCP}\PYG{o}{/}\PYG{n}{IP} \PYG{n}{TERMINAL}\PYG{p}{)} \PYG{n}{TYPETERM}\PYG{p}{(}\PYG{n}{DT3650}\PYG{p}{)}
\PYG{n}{DEFINE} \PYG{n}{TERMINAL}\PYG{p}{(}\PYG{n}{VR02}\PYG{p}{)} \PYG{n}{GROUP}\PYG{p}{(}\PYG{n}{VIRTEL}\PYG{p}{)} \PYG{n}{NETNAME}\PYG{p}{(}\PYG{n}{RVIPLU02}\PYG{p}{)}
\PYG{n}{DESC}\PYG{p}{(}\PYG{n}{VIRTEL} \PYG{n}{NATIVE} \PYG{n}{TCP}\PYG{o}{/}\PYG{n}{IP} \PYG{n}{TERMINAL}\PYG{p}{)} \PYG{n}{TYPETERM}\PYG{p}{(}\PYG{n}{DT3650}\PYG{p}{)}
\PYG{n}{DEFINE} \PYG{n}{TERMINAL}\PYG{p}{(}\PYG{n}{VR03}\PYG{p}{)} \PYG{n}{GROUP}\PYG{p}{(}\PYG{n}{VIRTEL}\PYG{p}{)} \PYG{n}{NETNAME}\PYG{p}{(}\PYG{n}{RVIPLU03}\PYG{p}{)}
\PYG{n}{DESC}\PYG{p}{(}\PYG{n}{VIRTEL} \PYG{n}{NATIVE} \PYG{n}{TCP}\PYG{o}{/}\PYG{n}{IP} \PYG{n}{TERMINAL}\PYG{p}{)} \PYG{n}{TYPETERM}\PYG{p}{(}\PYG{n}{DT3650}\PYG{p}{)}
\end{sphinxVerbatim}

\index{Native Gateway Line@\spxentry{Native Gateway Line}!Message Format@\spxentry{Message Format}}\index{Message Format@\spxentry{Message Format}!Native Gateway Line@\spxentry{Native Gateway Line}}\ignorespaces 

\subsection{Message format}
\label{\detokenize{connectivity_guide:index-41}}\label{\detokenize{connectivity_guide:id15}}
All messages sent on a NATIVE TCP/IP conversation are prefixed by a 2-byte or 4-byte header. The format of the header for the NATIVE2 protocol is shown in the figure below:


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|T|}
\hline
\sphinxmultirow{2}{1}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxstyletheadfamily Bytes
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
&\sphinxmultirow{2}{2}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxstyletheadfamily Length
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
&\sphinxmultirow{2}{3}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxstyletheadfamily Meaning
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
\\
\sphinxtablestrut{1}&\sphinxtablestrut{2}&\sphinxtablestrut{3}\\
\hline\sphinxmultirow{4}{4}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
0 - 1
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
&\sphinxmultirow{4}{5}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
2
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
&\sphinxmultirow{4}{6}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
Message length in bytes, excluding the length field itself
This is a 16-bit unsigned binary number in big-endian format
(Most significant byte first)
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
\\
\sphinxtablestrut{4}&\sphinxtablestrut{5}&\sphinxtablestrut{6}\\
\sphinxtablestrut{4}&\sphinxtablestrut{5}&\sphinxtablestrut{6}\\
\sphinxtablestrut{4}&\sphinxtablestrut{5}&\sphinxtablestrut{6}\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}

\sphinxstyleemphasis{Format of NATIVE2 message header}

The format of the header for the NATIVE4 protocol is shown in the figure below:


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|T|}
\hline
\sphinxmultirow{2}{1}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxstyletheadfamily Bytes
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
&\sphinxmultirow{2}{2}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxstyletheadfamily Length
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
&\sphinxmultirow{2}{3}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxstyletheadfamily Meaning
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
\\
\sphinxtablestrut{1}&\sphinxtablestrut{2}&\sphinxtablestrut{3}\\
\hline\sphinxmultirow{4}{4}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
0 - 3
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
&\sphinxmultirow{4}{5}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
4
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
&\sphinxmultirow{4}{6}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
Message length in bytes, excluding the length field itself
This is a 32-bit unsigned binary number in big-endian format
(Most significant byte first)
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
\\
\sphinxtablestrut{4}&\sphinxtablestrut{5}&\sphinxtablestrut{6}\\
\sphinxtablestrut{4}&\sphinxtablestrut{5}&\sphinxtablestrut{6}\\
\sphinxtablestrut{4}&\sphinxtablestrut{5}&\sphinxtablestrut{6}\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}

\sphinxstyleemphasis{Format of NATIVE4 message header}

All data following the header is treated as binary data which is passed to the CICS application without translation. The maximum message length is specified in the definition of the NATIVE TCP/IP line.

The variants NATIVE2P and NATIVE4P may be used if the terminal is defined to the application as a 3270 (LU2) device. In this case, VIRTEL will add the prefix X’7D4040’ to inbound messages before sending them to the application, and will remove the 3270 prefix (for example X’F1C1’) from outbound messages before sending them to the terminal. The message format to the terminal is the same as described above for NATIVE2 and NATIVE4.

\newpage

\index{Lines@\spxentry{Lines}!VIRPASS TCP line (VIRKIX)@\spxentry{VIRPASS TCP line}\spxextra{VIRKIX}}\index{VIRPASS TCP line (VIRKIX)@\spxentry{VIRPASS TCP line}\spxextra{VIRKIX}!Lines@\spxentry{Lines}}\ignorespaces 

\section{VIRPASS TCP line (VIRKIX)}
\label{\detokenize{connectivity_guide:virpass-tcp-line-virkix}}\label{\detokenize{connectivity_guide:index-42}}
Communication between VIRTEL and CICS can be established via APPC, TCP/IP, or Cross-memory. This section describes communications in TCP/IP mode using the VIRKIX program on the CICS side.

\sphinxincludegraphics{{image31}.png}

\index{VIRPASS (VIRKIX) line@\spxentry{VIRPASS (VIRKIX) line}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!VIRPASS (VIRKIX) line@\spxentry{VIRPASS (VIRKIX) line}}\ignorespaces 

\subsection{Parameters}
\label{\detokenize{connectivity_guide:index-43}}\label{\detokenize{connectivity_guide:id16}}\begin{description}
\item[{Remote ident}] \leavevmode
Contains the IP address and port number of the CICS side of the link. It must match the fields “adresse TCP/IP” and “port serveur” of the TCP/IP interface defined in VIRKIX. This field should only be used when the VIRKIX relay type is “Virpass TCP/IP” (previously known as “Virpass Symétrique”). If the VIRKIX relay type is “Virpass Asymétrique” (previously known as “Virtel TCP/IP”), this field must be blank, and VIRTEL will wait for VIRKIX to make the connection on he address specified in the “Local ident” field.

\item[{Local ident}] \leavevmode
Must be specified. Contains the IP address and port number of the VIRTEL side of the link. Must match the fields “Adresse TCP/IP” and “port du serveur” specified in the VIRPASS interface (relay type “Virpass TCP/IP” or “Virpass Asymétrique”) defined in VIRKIX.

\item[{Prefix}] \leavevmode
Terminal name prefix (see below).

\item[{Entry point}] \leavevmode
Leave blank.

\item[{Line type}] \leavevmode
TCP1

\item[{Possible calls}] \leavevmode
Always 3.

\item[{Protocol}] \leavevmode
Always VIRPASS.

\item[{Window}] \leavevmode
Always 0.

\item[{Packet}] \leavevmode
Always 0.

\item[{Pad, Tran}] \leavevmode
Always blank.

\end{description}

\index{VIRPASS (VIRKIX) line@\spxentry{VIRPASS (VIRKIX) line}!Terminal Definitions@\spxentry{Terminal Definitions}}\index{Terminal Definitions@\spxentry{Terminal Definitions}!VIRPASS (VIRKIX) line@\spxentry{VIRPASS (VIRKIX) line}}\ignorespaces 

\subsection{Terminal Definitions}
\label{\detokenize{connectivity_guide:index-44}}\label{\detokenize{connectivity_guide:id17}}\begin{quote}

A VIRPASS TCP line for communication with VIRKIX uses a single sub-group of terminals dedicated to outgoing calls. Either explicit or repeated definitions can be used. The terminals are defined as type 3, compression 2, and the “Possible calls” field must be set to 2. The “Relay” field in the terminal definition must contain the name of the VIRKIX relay which will be activated at connection time. In the case of incoming X25 calls this relay is defined in the VIRKIX menu “Interface X25” \textendash{} “Appels X25 entrant”. The “Type of
line” field in the relay definition must contain the value X25VIRPA (or E25TCPIP in previous versions of VIRKIX). Unlike other terminal types, the relay name specified here is not the name of a VTAM LU.
\end{quote}

\sphinxincludegraphics{{image32}.png}
\sphinxstyleemphasis{Terminals on a VIRPASS TCP line for VIRKIX}

\newpage

\index{Lines@\spxentry{Lines}!VIRPASS TCP line (VIRNT)@\spxentry{VIRPASS TCP line}\spxextra{VIRNT}}\index{VIRPASS TCP line (VIRNT)@\spxentry{VIRPASS TCP line}\spxextra{VIRNT}!Lines@\spxentry{Lines}}\ignorespaces 

\section{VIRPASS TCP line (VIRNT)}
\label{\detokenize{connectivity_guide:virpass-tcp-line-virnt}}\label{\detokenize{connectivity_guide:index-45}}
A VIRNT system can be connected to VIRTEL to act as an X25 gateway handling incoming and outgoing connections to and from VIRTEL, or to act as a LECAM server. Communication between VIRTEL and VIRNT can be established using either an APPC line or a TCP/IP line. This section describes TCP/IP mode.

\sphinxincludegraphics{{image33}.png}

\index{VIRPASS (VIRNT) line@\spxentry{VIRPASS (VIRNT) line}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!VIRPASS (VIRNT) line@\spxentry{VIRPASS (VIRNT) line}}\ignorespaces 

\subsection{Parameters}
\label{\detokenize{connectivity_guide:index-46}}\label{\detokenize{connectivity_guide:id18}}\begin{description}
\item[{Remote ident}] \leavevmode
Always blank.

\item[{Local ident}] \leavevmode
This field must be the same as the TCP/IP port referenced under the heading “HOST IP Port” in the VIRPASS.INI file on the VIRNT system.

\item[{Prefix}] \leavevmode
Terminal name prefix (see below).

\item[{Entry Point}] \leavevmode
Not required for this type of line.

\item[{Line type}] \leavevmode
TCP1

\item[{Possible calls}] \leavevmode
No special restriction.

\item[{Protocol}] \leavevmode
Always VIRPASS.

\item[{Window}] \leavevmode
Always 0.

\item[{Packet}] \leavevmode
Always 0.

\item[{Pad, Tran}] \leavevmode
Always blank.

\end{description}

A VIRPASS TCP connection with a VIRNT system can use up to two sub-groups of terminals. The first sub-group is dedicated to incoming calls and has an associated relay. The second sub-group is dedicated to outgoing calls and has no associated relay. The two sub-groups have a common prefix which associates them with the line. Either explicit or repeated terminal definitions may be used.


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|T|T|T|T|}
\hline
\sphinxstyletheadfamily 
NTTCE980
&\sphinxstyletheadfamily 
0020
&\sphinxstyletheadfamily 
RNTTC000
&\sphinxstyletheadfamily 
\$X25\$
&\sphinxstyletheadfamily 
3
&\sphinxstyletheadfamily 
1
\\
\hline
NTTCS980
&
0020
&&
\$X25\$
&
3
&
2
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}

\index{VIRPASS (VIRNT) line@\spxentry{VIRPASS (VIRNT) line}!Terminal Definitions@\spxentry{Terminal Definitions}}\index{Terminal Definitions@\spxentry{Terminal Definitions}!VIRPASS (VIRNT) line@\spxentry{VIRPASS (VIRNT) line}}\ignorespaces 

\subsection{Terminal Definitions}
\label{\detokenize{connectivity_guide:index-47}}\label{\detokenize{connectivity_guide:id19}}
Each terminal in the pool dedicated to incoming calls must have an associated relay. The terminals are defined as type 3, compression 2, and the “Possible Calls” field must be set to 1:

\sphinxincludegraphics{{image34}.png}
\sphinxstyleemphasis{Inbound terminals for a VIRPASS TCP line for VIRNT}
\begin{quote}

Terminals in the pool dedicated to outgoing calls do not have an associated relay. The terminals are defined as type 3, compression 2, and the “Possible Calls” field must be set to 2:
\end{quote}

\sphinxincludegraphics{{image35}.png}
\sphinxstyleemphasis{Outbound terminals for a VIRPASS TCP line for VIRNT}

\newpage

\index{Lines@\spxentry{Lines}!VIRPASS XM line (VIRKIX)@\spxentry{VIRPASS XM line}\spxextra{VIRKIX}}\index{VIRPASS XM line (VIRKIX)@\spxentry{VIRPASS XM line}\spxextra{VIRKIX}!Lines@\spxentry{Lines}}\ignorespaces 

\section{VIRPASS XM line (VIRKIX)}
\label{\detokenize{connectivity_guide:virpass-xm-line-virkix}}\label{\detokenize{connectivity_guide:index-48}}
Communication between VIRTEL and CICS can be established via APPC, TCP/IP, or Cross-memory. This section describes communications in Cross-memory (XM) mode using the VIRKIX program on the CICS side.

\sphinxincludegraphics{{image36}.png}

\index{VIRPASS XM Line (VIRKIX)@\spxentry{VIRPASS XM Line}\spxextra{VIRKIX}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!VIRPASS XM Line (VIRKIX)@\spxentry{VIRPASS XM Line}\spxextra{VIRKIX}}\ignorespaces 

\subsection{Parameters}
\label{\detokenize{connectivity_guide:index-49}}\label{\detokenize{connectivity_guide:id20}}\begin{description}
\item[{External name}] \leavevmode
Must match the relay name of a VIRPASS cross-memory interface in VIRKIX.

\item[{Remote ident}] \leavevmode
Contains the jobname of the CICS region in which VIRKIX is running.
The CICS region must be in the same MVS system as VIRTEL.

\item[{Local ident}] \leavevmode
Must match the field “Nom de la liaison” specified in the definition
of the VIRPASS cross-memory interface in VIRKIX.

\item[{Prefix}] \leavevmode
Terminal name prefix (see below).

\item[{Entry point}] \leavevmode
Leave blank.

\item[{Line type}] \leavevmode
XM1

\item[{Possible calls}] \leavevmode
Always 3.

\item[{Protocol}] \leavevmode
Always VIRPASS.

\item[{Window}] \leavevmode
Always 0.

\item[{Packet}] \leavevmode
Always 0.

\item[{Pad, Tran}] \leavevmode
Always blank.

\end{description}

\index{VIRPASS XM Line (VIRKIX)@\spxentry{VIRPASS XM Line}\spxextra{VIRKIX}!Terminal Definitions@\spxentry{Terminal Definitions}}\index{Terminal Definitions@\spxentry{Terminal Definitions}!VIRPASS XM Line (VIRKIX)@\spxentry{VIRPASS XM Line}\spxextra{VIRKIX}}\ignorespaces 

\subsection{Terminal Definitions}
\label{\detokenize{connectivity_guide:index-50}}\label{\detokenize{connectivity_guide:id21}}
A VIRPASS XM line for communication with VIRKIX uses a single sub-group of terminals dedicated to outgoing calls. Either explicit or repeated definitions can be used. The terminals are defined as type 3, compression 2, and the “Possible calls” field must be set to 2. The “Relay” field in the terminal definition must contain the name of the VIRKIX relay which will be activated at connection time. In the case of incoming X25 calls this relay is defined in the VIRKIX menu “Interface X25” \textendash{} “Appels X25 entrant”. The “Type de line” field in the relay definition must contain the value X25VIRPA (this is the same value as for VIRPASS TCP, which was coded as E25TCPIP in previous versions of VIRKIX).

Unlike other terminal types, the relay name specified here is not the name of a VTAM LU.

\sphinxincludegraphics{{image37}.png}
\sphinxstyleemphasis{Terminals on a VIRPASS XM line for VIRKIX}

A VIRPASS cross-memory connection is defined in VIRKIX by means of an entity known as a “Virpass cross-memory interface”:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{KIXADMIN} \PYG{o}{\PYGZhy{}} \PYG{n}{Virpass} \PYG{n}{Cross}\PYG{o}{\PYGZhy{}}\PYG{n}{Memory} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}        \PYG{n}{V2R5} \PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{30}\PYG{o}{/}\PYG{l+m+mi}{06}\PYG{o}{/}\PYG{l+m+mi}{2005} \PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{10}\PYG{p}{:}\PYG{l+m+mi}{54}\PYG{p}{:}\PYG{l+m+mi}{55}
                                                              \PYG{n}{Sysid} \PYG{n}{CICS}\PYG{p}{:} \PYG{n}{CICT}
\PYG{n}{Nom} \PYG{n}{interface} \PYG{n}{XM}\PYG{p}{:} \PYG{n}{VIRTELXM}
\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}
\PYG{n}{Nom} \PYG{n}{du} \PYG{n}{job} \PYG{n}{partenaire} \PYG{p}{:} \PYG{n}{SPTSABYV}
\PYG{n}{Nom} \PYG{n}{de} \PYG{n}{la} \PYG{n}{liaison} \PYG{p}{:}     \PYG{n}{XM44000}
\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}
\PYG{n}{Autres} \PYG{n}{définitions}\PYG{p}{:}
\PYG{n}{Lancement} \PYG{p}{:}                             \PYG{n}{A} \PYG{n}{M}\PYG{p}{:}\PYG{n}{Manuel} \PYG{n}{A}\PYG{p}{:}\PYG{n}{Autom}\PYG{p}{,}\PYG{n}{évt} \PYG{n}{dans} \PYG{n}{SYSID}\PYG{p}{:}
\PYG{n}{Nbr} \PYG{n}{maxi} \PYG{n}{de} \PYG{n}{connexions}\PYG{p}{:} \PYG{l+m+mi}{0010}            \PYG{n}{de} \PYG{l+m+mi}{01} \PYG{n}{à} \PYG{l+m+mi}{1024}
\PYG{n}{Transaction} \PYG{n}{associée} \PYG{p}{:} \PYG{n}{APIW}             \PYG{n}{APIW} \PYG{n}{par} \PYG{n}{défaut}
\PYG{n}{Trace} \PYG{n}{et} \PYG{n}{Snap} \PYG{p}{:} \PYG{n}{O}                       \PYG{n}{O}\PYG{p}{:}\PYG{n}{Oui} \PYG{n}{N}\PYG{p}{:}\PYG{n}{Non}
\PYG{n}{Trace} \PYG{n}{Connexion} \PYG{p}{:} \PYG{n}{O}                     \PYG{n}{O}\PYG{p}{:}\PYG{n}{Oui} \PYG{n}{N}\PYG{p}{:}\PYG{n}{Non}
\PYG{n}{Snap} \PYG{n}{centralisé} \PYG{p}{:} \PYG{n}{O}                     \PYG{n}{O}\PYG{p}{:}\PYG{n}{Oui} \PYG{n}{N}\PYG{p}{:}\PYG{n}{Non}
\PYG{n}{Priorité} \PYG{p}{:} \PYG{l+m+mi}{080}                          \PYG{n}{de} \PYG{l+m+mi}{000} \PYG{n}{à} \PYG{l+m+mi}{255}
\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}


\PYG{n}{P3}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{P4}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{P5}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{P6}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{P7}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{P8}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{P12}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{ENTER}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}
\PYG{n}{Menu} \PYG{n}{Quitter} \PYG{n}{M}\PYG{o}{.}\PYG{n}{A}\PYG{o}{.}\PYG{n}{J} \PYG{n}{Supprimer} \PYG{n}{Saisir} \PYG{n}{Valider}
\end{sphinxVerbatim}

\sphinxstyleemphasis{VIRKIX definitions for a VIRPASS XM connection}
\begin{description}
\item[{Nom interface}] \leavevmode
The name of the VIRPASS cross-memory interface (also known as the
relay name or “nom relais”) must match the “external name” of the
VIRPASS XM line in VIRTEL.

\item[{Nom du job partenaire}] \leavevmode
Specifies the jobname of the VIRTEL STC, which must be in the same
MVS system as VIRKIX.

\item[{Nom de la liaison}] \leavevmode
Must match the “Local ident” of the VIRPASS XM line in VIRTEL.

Refer to the VIRKIX Configuration documentation for details of the
other fields on this panel.

\end{description}

\newpage

\index{Lines@\spxentry{Lines}!X25 XOT line@\spxentry{X25 XOT line}}\index{X25 XOT line@\spxentry{X25 XOT line}!Lines@\spxentry{Lines}}\ignorespaces 

\section{X25 XOT line}
\label{\detokenize{connectivity_guide:x25-xot-line}}\label{\detokenize{connectivity_guide:index-51}}
An XOT line establishes a connection between VIRTEL and a CISCO router. Across this type of line, VIRTEL processes incoming and outgoing calls to and from the X25 network. Activation of this type of line requires the presence of the TCP1 parameter in the VIRTCT.

\sphinxincludegraphics{{image22}.png}

\index{X25 XOT line@\spxentry{X25 XOT line}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!X25 XOT line@\spxentry{X25 XOT line}}\ignorespaces 

\subsection{Parameters}
\label{\detokenize{connectivity_guide:index-52}}\label{\detokenize{connectivity_guide:id22}}\begin{description}
\item[{Remote ident}] \leavevmode
IP address of the router followed by the port number 1998.

The address specified here is used by VIRTEL as the destination address for outgoing calls. Incoming calls are accepted from any IP address, except in the case of XOT lines which share a common IP address and port (specified in the “Local ident” field). Such lines only accept calls whose IP source address matches the router address specified in the “Remote ident” field. This allows VIRTEL to allocate incoming calls to the correct XOT line. The parameter UNIQUEP=Y (which can be specified only in batch definition mode
using the VIRCONF utility) allows this check to be enforced regardless of whether the “Local ident” field specifies a shared
address.
\begin{description}
\item[{..note::}] \leavevmode
Take care to ensure that the router presents the expected address to VIRTEL. You may need to use the xot-source parameter in the router configuration to ensure that the router presents the correct IP address to VIRTEL for incoming calls. Example:

\end{description}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{x25} \PYG{n}{route} \PYG{o}{.}\PYG{o}{*} \PYG{n}{xot} \PYG{l+m+mf}{10.0}\PYG{o}{.}\PYG{l+m+mf}{1.1} \PYG{n}{xot}\PYG{o}{\PYGZhy{}}\PYG{n}{source} \PYG{n}{loopback0}
\end{sphinxVerbatim}

\item[{Local ident}] \leavevmode
The IP address and port number on the VIRTEL side. For details of how to code this field, refer to “Local ident” under the heading {\hyperref[\detokenize{connectivity_guide:bookmark13}]{\sphinxcrossref{\DUrole{std,std-ref}{“Line Parameters”,}}}}.

The port number must be 1998. This port number is fixed by the XOT protocol, and the router does not provide any configuration statement which allows the port number to be altered.

From VIRTEL version 4.24 onwards, multiple XOT lines with the same local IP address and port number can be defined within a single instance of VIRTEL. As explained above, VIRTEL uses the router IP address (“Remote ident”) to match calls from a router with the correct XOT line. However, if multiple instances of VIRTEL are started on a single MVS system, each VIRTEL must have its own distinct IP address for XOT. The use of VIPA allows multiple IP addresses to be defined within a single TCP/IP stack (see the IBM manual z/OS Communications Server IP Configuration Guide for details of VIPA).

\item[{Prefix}] \leavevmode
Terminal name prefix (see below).

\item[{Entry Point}] \leavevmode
Not required for this type of line.

\item[{Line type}] \leavevmode
One of the TCP/IP protocols defined in the VIRTCT, for example TCP1.

\item[{Possible calls}] \leavevmode
No special restriction.

\item[{Protocol}] \leavevmode
Always XOT.

\item[{Window}] \leavevmode
In accordance with the window size for the X25 line specified in the router configuration (see note below).

\item[{Packet}] \leavevmode
In accordance with the packet size for the X25 line specified in the router configuration (see note below).

Note: VIRTEL will normally use the window size and packet size negotiated with the partner during call setup. The Window and Packet values specified in the line definition are the default values which will be used if no values are supplied by the partner in the Call or Call Accepted packets.

\item[{Pad}] \leavevmode
Always blank.

\item[{Tran}] \leavevmode
Normally blank, unless non-standard ASCII translation is required for special applications.

\end{description}

\index{X25 XOT line@\spxentry{X25 XOT line}!Terminal Definitions@\spxentry{Terminal Definitions}}\index{Terminal Definitions@\spxentry{Terminal Definitions}!X25 XOT line@\spxentry{X25 XOT line}}\ignorespaces 

\subsection{Terminal Definitions}
\label{\detokenize{connectivity_guide:index-53}}\label{\detokenize{connectivity_guide:id23}}\begin{quote}

Press {[}PF4{]} at the line definition screen to display the list of terminals associated with an XOT line. An XOT line uses a single sub-group of type-3 terminals having a common prefix (XOTF in this example). Each terminal may be associated with an application relay defined by a VTAM APPL statement. The number of terminals defined determines the maximum number of simultaneous sessions (or virtual circuits) between the router and VIRTEL.
\end{quote}

\sphinxincludegraphics{{image23}.png}

\sphinxstyleemphasis{Definition of terminals associated with an XOT line}
\begin{description}
\item[{Terminal}] \leavevmode
The terminal name must match the prefix of the line.

\item[{Relais}] \leavevmode
The name of a relay LU must be specified if incoming calls are
routed to a type-1 transaction (VTAM application). The relay LU’s
must be defined by APPL statements in a VTAM application major node,
as described below. If all incoming calls are routed to a type-3
transaction (external server), as is the case for calls routed to a
GATE or PCNE application such as CFT or Inter.PEL, no relay is
required on the terminals attached to the XOT line.

\item[{Entry point}] \leavevmode
Leave blank.

\item[{Terminal Type}] \leavevmode
Always 3.

\item[{Compression}] \leavevmode
Always 2.

\item[{Possible calls}] \leavevmode
Always 3.

\item[{Repeat}] \leavevmode
Number of terminals (virtual circuits) defined.\textasciicircum{}

\end{description}

\index{X25 XOT line@\spxentry{X25 XOT line}!VTAM Terminal Definitions@\spxentry{VTAM Terminal Definitions}}\index{VTAM Terminal Definitions@\spxentry{VTAM Terminal Definitions}!X25 XOT line@\spxentry{X25 XOT line}}\ignorespaces 

\subsection{VTAM Terminal Definition}
\label{\detokenize{connectivity_guide:vtam-terminal-definition}}\label{\detokenize{connectivity_guide:index-54}}\begin{description}
\item[{When incoming calls are routed to a type-1 transaction (VTAM}] \leavevmode
application), the relay LU’s must be defined by APPL statements in a
VTAM application major node, as shown in the example below:

\end{description}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{RXOTF000} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{MODVIRT}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DLOGREL}
\PYG{n}{RXOTF001} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{MODVIRT}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DLOGREL}
\PYG{n}{RXOTF002} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{MODVIRT}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DLOGREL}
\PYG{n}{RXOTF003} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{MODVIRT}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DLOGREL}
\end{sphinxVerbatim}

\newpage

\index{Lines@\spxentry{Lines}!X25 VIRPESIT line@\spxentry{X25 VIRPESIT line}}\index{X25 VIRPESIT line@\spxentry{X25 VIRPESIT line}!Lines@\spxentry{Lines}}\ignorespaces 

\section{X25 VIRPESIT line}
\label{\detokenize{connectivity_guide:x25-virpesit-line}}\label{\detokenize{connectivity_guide:index-55}}
A VIRPESIT line establishes a TCP/IP link between VIRTEL and a file transfer application such as CFT. A VIRPESIT line allows VIRTEL to act as an IP-to-X25 gateway for file transfer sessions using the PESIT and ETEBAC protocols. File transfer requests arriving via IP on a VIRPESIT line may be routed either to a local GATE or PCNE application, or to a remote partner via the X25 network. Similarly, file transfer requests from the X25 network or from local GATE or PCNE applications may be routed to the IP network via a VIRPESIT line.

The activation of this type of line requires the presence of the TCP1 parameter in the VIRTCT.

\sphinxincludegraphics{{image38}.png}

\index{X25 VIRPESIT line@\spxentry{X25 VIRPESIT line}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!X25 VIRPESIT line@\spxentry{X25 VIRPESIT line}}\ignorespaces 

\subsection{Parameters}
\label{\detokenize{connectivity_guide:index-56}}\label{\detokenize{connectivity_guide:id24}}\begin{description}
\item[{Remote ident}] \leavevmode
(optional) IP address and port number of the default partner (for outbound calls when the external server does not specify a partner IP address).

\item[{Local ident}] \leavevmode
The IP address and port number on which VIRTEL listens for incoming connections from the partner application. For details of how to code this field, refer to “Local ident” under the heading {\hyperref[\detokenize{connectivity_guide:bookmark13}]{\sphinxcrossref{\DUrole{std,std-ref}{“Line Parameters”}}}}.

\item[{Prefix}] \leavevmode
Terminal name prefix (see below).

\item[{Entry Point}] \leavevmode
The default entry point will be used for all incoming calls which do not match any of the rules of the line.

Entry points for use with VIRPESIT lines are described under the heading “VIRPESIT gateway” in the “Incoming calls” section of the VIRTEL Technical Documentation.

\item[{Line type}] \leavevmode
One of the TCP/IP protocols defined in the VIRTCT, for example TCP1.

\item[{Possible calls}] \leavevmode
Specify 3 to allow exchanges in both directions.

\item[{Protocol}] \leavevmode
Always VIRPESIT.

\end{description}

By pressing {[}PF4{]}, the list of terminals associated with the VIRPESIT line will be displayed. A VIRPESIT line uses a single group of type-3 terminals having a common prefix (I001T in this example). The number of terminals defined determines the number of simultaneous file transfer sessions authorised. The example below shows a group of 8 VIRPESIT terminals:

\sphinxincludegraphics{{image39}.png}

\index{X25 VIRPESIT line@\spxentry{X25 VIRPESIT line}!Terminal Definitions@\spxentry{Terminal Definitions}}\index{Terminal Definitions@\spxentry{Terminal Definitions}!X25 VIRPESIT line@\spxentry{X25 VIRPESIT line}}\ignorespaces 

\subsection{Terminal Definitions}
\label{\detokenize{connectivity_guide:index-57}}\label{\detokenize{connectivity_guide:id25}}\begin{description}
\item[{Terminal}] \leavevmode
The terminal name must match the prefix of the line.

\item[{Relay}] \leavevmode
Leave blank.

\item[{Entry point}] \leavevmode
Leave blank. The entry point is defined in the line (or in the rules
of the line) for this type of terminal.

\item[{Terminal type}] \leavevmode
Always 3.

\item[{Compression}] \leavevmode
Always 2.

\item[{Possible Calls}] \leavevmode
Always 3.

\item[{Repeat}] \leavevmode
The number of terminals defined.

\end{description}

\newpage

\index{Lines@\spxentry{Lines}!X25 VIRNEOX line@\spxentry{X25 VIRNEOX line}}\index{X25 VIRNEOX line@\spxentry{X25 VIRNEOX line}!Lines@\spxentry{Lines}}\ignorespaces 

\section{X25 VIRNEOX line}
\label{\detokenize{connectivity_guide:x25-virneox-line}}\label{\detokenize{connectivity_guide:index-58}}
A VIRNEOX line allows VIRTEL to act as a server for communications with application programs over a TCP/IP connection using a simplified X25-like protocol. Typically the application will be an  existing X25 application which has been converted to TCP/IP. The activation of this type of line requires the presence of the TCP1 parameter in the VIRTCT.

\sphinxincludegraphics{{image40}.png}

\index{X25 VIRNEOX line@\spxentry{X25 VIRNEOX line}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!X25 VIRNEOX line@\spxentry{X25 VIRNEOX line}}\ignorespaces 

\subsection{Parameters}
\label{\detokenize{connectivity_guide:index-59}}\label{\detokenize{connectivity_guide:id26}}\begin{description}
\item[{Local ident}] \leavevmode
The IP address and port number on which VIRTEL listens for incoming connections from the partner application. For details of how to code this field, refer to “Local ident” under the heading {\hyperref[\detokenize{connectivity_guide:bookmark13}]{\sphinxcrossref{\DUrole{std,std-ref}{“Line Parameters”}}}}.

\item[{Prefix}] \leavevmode
Terminal name prefix (see below).

\item[{Entry Point}] \leavevmode
The default entry point will be used for all incoming calls which do not match any of the rules of the line. Entry points for use with VIRNEOX lines must specify Emulation type \$NONE\$

\item[{Line type}] \leavevmode
One of the TCP/IP protocols defined in the VIRTCT, for example TCP1.

\item[{Possible calls}] \leavevmode
Specify 1 to allow inbound calls.

\item[{Protocol}] \leavevmode
Always VIRNEOX.

\item[{Packet}] \leavevmode
Specify a packet size sufficient to contain the largest message sent by either the host or the partner application.

By pressing {[}PF4{]}, the list of terminals associated with the VIRNEOX line will be displayed. A VIRNEOX line uses a single group of type-3 terminals having a common prefix (XNE3 in this example). The number of terminals defined determines the number of simultaneous conversations authorised.

The example below shows a group of 8 VIRNEOX terminals:

\end{description}

\sphinxincludegraphics{{image41}.png}

\index{X25 VIRNEOX line@\spxentry{X25 VIRNEOX line}!Terminal Definitions@\spxentry{Terminal Definitions}}\index{Terminal Definitions@\spxentry{Terminal Definitions}!X25 VIRNEOX line@\spxentry{X25 VIRNEOX line}}\ignorespaces 

\subsection{Terminal Definitions}
\label{\detokenize{connectivity_guide:index-60}}\label{\detokenize{connectivity_guide:id27}}\begin{description}
\item[{Terminal}] \leavevmode
The terminal name must match the prefix of the line.

\item[{Relay}] \leavevmode
Leave blank.

\item[{Entry point}] \leavevmode
Leave blank. The entry point is defined in the line (or in the rules of the line) for this type of terminal.

\item[{Terminal type}] \leavevmode
Always 3.

\item[{Compression}] \leavevmode
Always 2.

\item[{Possible Calls}] \leavevmode
Always 3.

\item[{Repeat}] \leavevmode
The number of terminals defined.

\end{description}

\newpage

\index{Lines@\spxentry{Lines}!X25 GATE Non Fast-Connect (NFC) line@\spxentry{X25 GATE Non Fast-Connect (NFC) line}}\index{X25 GATE Non Fast-Connect (NFC) line@\spxentry{X25 GATE Non Fast-Connect (NFC) line}!Lines@\spxentry{Lines}}\ignorespaces 

\section{X25 GATE Non Fast-Connect (NFC) line}
\label{\detokenize{connectivity_guide:x25-gate-non-fast-connect-nfc-line}}\label{\detokenize{connectivity_guide:v460cn-x25gateline}}\label{\detokenize{connectivity_guide:index-61}}
An X25 GATE Non Fast-Connect line establishes a connection between VIRTEL and an X25 line connected to an IBM 3745 communications controller. Across this type of line, VIRTEL handles incoming and outgoing calls to and from the X25 network. Activation of this type of line requires the presence of the GATE and MINITEL parameters in the VIRTCT.

\sphinxincludegraphics{{image42}.png}
\sphinxstyleemphasis{Definition of an X25 GATE non-Fast Connect line}

\index{X25 GATE NFC line@\spxentry{X25 GATE NFC line}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!X25 GATE NFC line@\spxentry{X25 GATE NFC line}}\ignorespaces 

\subsection{Parameters}
\label{\detokenize{connectivity_guide:index-62}}\label{\detokenize{connectivity_guide:id28}}\begin{description}
\item[{Remote ident}] \leavevmode
Name of the MCH LU generated by NPSI.

\item[{Local ident}] \leavevmode
Always blank.

\item[{Prefix}] \leavevmode
Terminal name prefix (see below). The terminal names must be
identical to the virtual circuit LU names generated by NPSI.

\item[{Entry Point}] \leavevmode
Not required for this type of line.

\item[{Line type}] \leavevmode
Always GATE.

\item[{Possible calls}] \leavevmode
No special restriction.

\item[{Protocol}] \leavevmode
Always blank.

\item[{Window}] \leavevmode
Must agree with the NPSI definition.

\item[{Packet}] \leavevmode
Must agree with the NPSI definition.

\item[{Pad}] \leavevmode
Must agree with the NPSI definition.

\item[{Tran}] \leavevmode
Must agree with the NPSI definition.

\end{description}

From VIRTEL version 4.15 onwards, TRAN must be blank if TRAN=EVEN is specified in the NPSI definition.

An X25 GATE Non Fast-Connect line uses a single sub-group of terminals dedicated to the management of sessions between VIRTEL and the switched virtual circuits on the one hand, and between VIRTEL and the host applications on the other hand. Each terminal is associated with an application relay defined by a VTAM APPL statement.

The relay name is compulsory for this type of terminal.

\sphinxincludegraphics{{image43}.png}

\index{X25 GATE NFC line@\spxentry{X25 GATE NFC line}!Terminal Definitions@\spxentry{Terminal Definitions}}\index{Terminal Definitions@\spxentry{Terminal Definitions}!X25 GATE NFC line@\spxentry{X25 GATE NFC line}}\ignorespaces 

\subsection{Terminal Definitions}
\label{\detokenize{connectivity_guide:index-63}}\label{\detokenize{connectivity_guide:id29}}\begin{description}
\item[{Terminal}] \leavevmode
The terminal name must match the virtual circuit LU names generated by the X25.VC macro in the NPSI.

\item[{Relay}] \leavevmode
The application relay is a VTAM LU which represents the VIRTEL side of the session with NPSI for each virtual circuit. Relay LUs are defined in a VTAM application major node.

\item[{Terminal type}] \leavevmode
Always 1.

\item[{Compression}] \leavevmode
Always 2.

\item[{Possible calls}] \leavevmode
Specify 3 to allow both incoming and outgoing calls.

\item[{Repeat}] \leavevmode
The number of virtual circuits defined by NPSI.

\end{description}

\index{X25 GATE NFC line@\spxentry{X25 GATE NFC line}!VTAM Terminal Definitions@\spxentry{VTAM Terminal Definitions}}\index{VTAM Terminal Definitions@\spxentry{VTAM Terminal Definitions}!X25 GATE NFC line@\spxentry{X25 GATE NFC line}}\ignorespaces 

\subsection{VTAM Terminal Definitions}
\label{\detokenize{connectivity_guide:index-64}}\label{\detokenize{connectivity_guide:id30}}
Each Minitel or PC wishing to benefit from VIRTEL functionality must be defined in a VTAM switched major node similar to the one shown below.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{VIRTMINI} \PYG{n}{VBUILD} \PYG{n}{TYPE}\PYG{o}{=}\PYG{n}{SWNET}
\PYG{n}{PU01} \PYG{n}{PU} \PYG{n}{ADDR}\PYG{o}{=}\PYG{l+m+mi}{01}\PYG{p}{,}                   \PYG{o}{*}
\PYG{n}{IDBLK}\PYG{o}{=}\PYG{l+m+mi}{003}\PYG{p}{,}                         \PYG{o}{*}
\PYG{n}{IDNUM}\PYG{o}{=}\PYG{n}{xxyyy}\PYG{p}{,}              \PYG{n}{Note} \PYG{l+m+mi}{1}   \PYG{o}{*}
\PYG{n}{MAXDATA}\PYG{o}{=}\PYG{l+m+mi}{4101}\PYG{p}{,}             \PYG{n}{Note} \PYG{l+m+mi}{2}   \PYG{o}{*}
\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{MODVIRT}\PYG{p}{,}          \PYG{n}{Note} \PYG{l+m+mi}{3}   \PYG{o}{*}
\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DLOGMINI}\PYG{p}{,}                  \PYG{o}{*}
\PYG{n}{PACING}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,}                          \PYG{o}{*}
\PYG{n}{VPACING}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}                         \PYG{o}{*}
\PYG{n}{PUTYPE}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,}                          \PYG{o}{*}
\PYG{n}{DISCNT}\PYG{o}{=}\PYG{n}{YES}\PYG{p}{,}                        \PYG{o}{*}
\PYG{n}{SSCPFM}\PYG{o}{=}\PYG{n}{USSNTO}\PYG{p}{,}                     \PYG{o}{*}
\PYG{n}{LOGAPPL}\PYG{o}{=}\PYG{n}{vvvvvv}            \PYG{n}{Note} \PYG{l+m+mi}{4}   \PYG{o}{*}
\PYG{n}{MINI1} \PYG{n}{LU} \PYG{n}{LOCADDR}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,}                \PYG{o}{*}
\PYG{n}{TERM}\PYG{o}{=}\PYG{n}{TWX}
\end{sphinxVerbatim}

..note:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{The} \PYG{n}{switched} \PYG{n}{major} \PYG{n}{nodes} \PYG{n}{must} \PYG{n}{be} \PYG{n}{defined} \PYG{k}{as} \PYG{n}{shown} \PYG{o+ow}{in} \PYG{n}{the} \PYG{n}{above} \PYG{n}{example}\PYG{o}{.} \PYG{n}{The} \PYG{n}{associated} \PYG{n}{relays} \PYG{n}{must} \PYG{n}{refer} \PYG{n}{to} \PYG{n}{DLOGMODE} \PYG{n}{DLOGREL} \PYG{o+ow}{in} \PYG{n}{the} \PYG{n}{MODVIRT} \PYG{n}{mode} \PYG{n}{table}\PYG{o}{.}
\end{sphinxVerbatim}
\begin{description}
\item[{Note 1}] \leavevmode
IDNUM takes the value xxyyy with xx equal to the value of the parameter IDNUMH in the NPSI X25MCH MACRO; yyy is a hexadecimal value decrementing in steps of 2 from the CVC number assigned to the LU.

Let us suppose for example that we have a configuration made up of two TRANSPAC lines, L1 and L2, containing respectively 16 and 8 entries. The Minitels are installed on line L2. The value yyy assigned to the first Minitel is X’030’ ((16 + 8) x 2) in hexadecimal. The values of yyy respectively assigned to the other Minitels are X’02E’, X’02C’, X’02A’, X’028’, etc.

\item[{Note 2}] \leavevmode
The value of MAXDATA must not exceed MAXBFRU times UNITSZ, nor must it exceed the NCP MAXDATA value.

\item[{Note 3}] \leavevmode
The MODVIRT mode table must be placed in an executable module library (VSE) or in a LOADLIB (MVS, VM) known to VTAM before activation of the switched major node.

\item[{Note 4}] \leavevmode
LOGAPPL takes the value specified in the APPLID TYPE=INITIAL parameter in the VIRTCT. If both Minitels and PC’s are used simultaneously, the LOGAPPL parameter must be replaced by the value USSTAB=USSVIRT (the source of this USSTAB is in the VIRTEL SSL for VSE and in the MACLIB for MVS).

\end{description}

..note:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
The LOGAPPL and USSTAB parameters are valid only for non GATE lines. For sites making outgoing calls, from NCP 5.40 onwards, USSTAB and GATE are incompatible, and therefore the USSTAB keyword should be omitted for a switched major node describing type 1 LU’s.
\end{sphinxVerbatim}

\index{X25 GATE NFC line@\spxentry{X25 GATE NFC line}!NCP Parameters@\spxentry{NCP Parameters}}\index{NCP Parameters@\spxentry{NCP Parameters}!X25 GATE NFC line@\spxentry{X25 GATE NFC line}}\ignorespaces 

\subsection{NCP Parameters}
\label{\detokenize{connectivity_guide:ncp-parameters}}\label{\detokenize{connectivity_guide:index-65}}
The LUDRPOOL MACRO must contain an NUMTYP1 parameter with a value greater than or equal to the number of CVC available on the lines. For LU6.2 connections, check for the presence of the NUMILU parameter which indicates the number of available PU type 2.1.

\index{X25 GATE NFC line@\spxentry{X25 GATE NFC line}!NPSI Parameters@\spxentry{NPSI Parameters}}\index{NPSI Parameters@\spxentry{NPSI Parameters}!X25 GATE NFC line@\spxentry{X25 GATE NFC line}}\ignorespaces 

\subsection{NPSI Parameters}
\label{\detokenize{connectivity_guide:npsi-parameters}}\label{\detokenize{connectivity_guide:index-66}}
The following parameters must agree with the specification of your TRANSPAC subscription.

\sphinxstylestrong{Macro X25VCCPT}
\begin{description}
\item[{MAXPKTL (packet length)}] \leavevmode
Must equal the value given for “Packet Size” on your TRANSPAC subscription (usually 128).

\item[{VWINDOW (packet level window size)}] \leavevmode
Must equal the value given for “Packet Window Size” on your TRANSPAC subscription (usually 3).

\end{description}

\sphinxstylestrong{Macro X25MCH}
\begin{description}
\item[{CONNECT}] \leavevmode
Must be specified as NO.

\item[{GATE}] \leavevmode
Must be specified as GENERAL.

\item[{LLCLIST}] \leavevmode
Must have the value LLC4. LLC0,LLC2,LLC3,LLC4 and LLC5 can for example take the values 0, 2, 3, 4 et 5. Only the value assigned to the LLC4 parameter is important, because it will be appended to the TRANSPAC number allowing access to the server.

\item[{MWINDOW (frame level window size)}] \leavevmode
Must equal the value given for “Frame Window Size” on your TRANSPAC subscription (usually 7).

\item[{FRMLENGTH}] \leavevmode
Must equal MAXPKTL + 3 (usually 131).

\item[{PAD}] \leavevmode
Permissible values are NO, INTEG or TRANSP. If the value is INTEG, support for DARK (invisible fields) is not provided on Minitels in
80 column mode. It is provided where PAD=TRANSP.

In GATE mode, VIRTEL supports DARK in 80 column mode whatever the value of the PAD parameter.

\item[{SUBADDR}] \leavevmode
Must be YES.

\item[{TRAN}] \leavevmode
Must be EVEN or NO.

\end{description}

\index{X25 GATE NFC line@\spxentry{X25 GATE NFC line}!Routing Incoming Calls@\spxentry{Routing Incoming Calls}}\index{Routing Incoming Calls@\spxentry{Routing Incoming Calls}!X25 GATE NFC line@\spxentry{X25 GATE NFC line}}\ignorespaces 

\subsection{Routing on incoming calls}
\label{\detokenize{connectivity_guide:routing-on-incoming-calls}}\label{\detokenize{connectivity_guide:index-67}}
Incoming calls are routed by means of an entry point name specified in the Call User Data of the incoming call packet. If no Call User Data is specified, the value specified in the “Entry Point” parameter of the terminal definition is used. If this field is not supplied, the second value of the DEFENTR parameter in the VIRTCT is used.

Other possibilities are available through the use of a type 1 user exit.

While the sharing of a line in Fast-Connect mode would give better performance, it may prove necessary to use another method if, for example, the line is used for 3174 connections, or by another product which does not support Fast-Connect. Except for the definition of the line itself, the remainder of the configuration is similar to that of a non- shared GATE line. Be aware, however, that the implementation of such a solution can be complex.

To be able to support line sharing without Fast-Connect mode, the line must be defined as GATE=GENERAL and the X25MCH CONNECT parameter must be set to NO. The parameters SUBADDR, CTCP and CUD0 define the routing of connections and the use of the associated QLLC’s.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{X25}\PYG{o}{.}\PYG{n}{MCH} \PYG{n}{RESS}\PYG{o}{=}\PYG{l+m+mi}{003}\PYG{p}{,}                                              \PYG{o}{*}
\PYG{n}{FRMLENGTH}\PYG{o}{=}\PYG{l+m+mi}{131}\PYG{p}{,}                                                 \PYG{o}{*}
\PYG{n}{LUNAME}\PYG{o}{=}\PYG{p}{(}\PYG{n}{XU01}\PYG{p}{,}\PYG{n}{XU02}\PYG{p}{)}\PYG{p}{,} \PYG{n}{LU} \PYG{n}{MCH} \PYG{p}{(}\PYG{n}{Application} \PYG{n}{x}\PYG{p}{,} \PYG{n}{VIRTEL}\PYG{p}{)}             \PYG{o}{*}
\PYG{n}{LCGDEF}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{19}\PYG{p}{)}\PYG{p}{,}                                                 \PYG{o}{*}
\PYG{n}{MWINDOW}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}                                                     \PYG{o}{*}
\PYG{n}{ANS}\PYG{o}{=}\PYG{n}{CONT}\PYG{p}{,}                                                      \PYG{o}{*}
\PYG{n}{DBIT}\PYG{o}{=}\PYG{n}{NO}\PYG{p}{,}                                                       \PYG{o}{*}
\PYG{n}{GATE}\PYG{o}{=}\PYG{n}{GENERAL}\PYG{p}{,}                                                  \PYG{o}{*}
\PYG{n}{CONNECT}\PYG{o}{=}\PYG{n}{NO}\PYG{p}{,}               \PYG{n}{Multi} \PYG{n}{applications} \PYG{n}{without} \PYG{n}{F}\PYG{o}{\PYGZhy{}}\PYG{n}{C}       \PYG{o}{*}
\PYG{n}{CTCP}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{00}\PYG{p}{,}\PYG{l+m+mi}{01}\PYG{p}{)}\PYG{p}{,}             \PYG{n}{Reference} \PYG{n}{CTCP}                       \PYG{o}{*}
\PYG{n}{CUD0}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{09}\PYG{p}{,}\PYG{l+m+mi}{01}\PYG{p}{)}\PYG{p}{,}                                                  \PYG{o}{*}
\PYG{o}{*} \PYG{n}{Calls} \PYG{k}{with} \PYG{n}{subaddr} \PYG{l+m+mi}{9} \PYG{n}{connect} \PYG{n}{the} \PYG{n}{terminal} \PYG{n}{to} \PYG{n}{the} \PYG{n}{application}
\PYG{o}{*} \PYG{n}{controlling} \PYG{n}{line} \PYG{n}{XU01} \PYG{p}{(}\PYG{n}{CTCP}\PYG{o}{=}\PYG{l+m+mi}{00}\PYG{p}{)}
\PYG{o}{*} \PYG{n}{Calls} \PYG{k}{with} \PYG{n}{subaddr} \PYG{l+m+mi}{1} \PYG{n}{connect} \PYG{n}{the} \PYG{n}{terminal} \PYG{n}{to} \PYG{n}{the} \PYG{n}{application}
\PYG{o}{*} \PYG{n}{VIRTEL} \PYG{n}{controlling} \PYG{n}{line} \PYG{n}{XU02} \PYG{p}{(}\PYG{n}{CTCP}\PYG{o}{=}\PYG{l+m+mi}{01}\PYG{p}{)}
\PYG{n}{LLCLIST}\PYG{o}{=}\PYG{p}{(}\PYG{n}{LLC0}\PYG{p}{,}\PYG{n}{LLC4}\PYG{p}{,}\PYG{n}{LLCn}\PYG{p}{,}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{)}\PYG{p}{,}                                  \PYG{o}{*}
\PYG{n}{LOGAPPL}\PYG{o}{=}\PYG{p}{(}\PYG{n}{PELC00}\PYG{p}{,}\PYG{n}{VIRTEL}\PYG{p}{)}\PYG{p}{,}                                       \PYG{o}{*}
\PYG{n}{SUBADDR}\PYG{o}{=}\PYG{n}{YES}\PYG{p}{,}                                                   \PYG{o}{*}
\PYG{n}{IDBLKC}\PYG{o}{=}\PYG{l+m+mi}{62}\PYG{p}{,} \PYG{n}{Idblk} \PYG{k}{for} \PYG{n}{PCNE} \PYG{p}{(}\PYG{n}{LLC0}\PYG{p}{)}                               \PYG{o}{*}
\PYG{n}{IDBLKG}\PYG{o}{=}\PYG{l+m+mi}{63}\PYG{p}{,} \PYG{n}{Idblk} \PYG{k}{for} \PYG{n}{GATE} \PYG{p}{(}\PYG{n}{LLC4}\PYG{p}{)}                               \PYG{o}{*}
\PYG{o}{*} \PYG{n}{In} \PYG{n}{VTAM} \PYG{n}{there} \PYG{n}{are} \PYG{l+m+mi}{2} \PYG{n}{switched} \PYG{n}{major} \PYG{n}{nodes} \PYG{k}{with} \PYG{n}{the} \PYG{n}{same} \PYG{n}{IDNUM}
\PYG{o}{*} \PYG{n}{but} \PYG{n}{different} \PYG{n}{IDBLK} \PYG{p}{(}\PYG{l+m+mi}{062} \PYG{k}{for} \PYG{n}{the} \PYG{n}{first}\PYG{p}{,} \PYG{l+m+mi}{063} \PYG{k}{for} \PYG{n}{VIRTEL}\PYG{p}{)}
\PYG{n}{PAD}\PYG{o}{=}\PYG{n}{INTEG}\PYG{p}{,}                                                     \PYG{o}{*}
\PYG{n}{PKTMODL}\PYG{o}{=}\PYG{l+m+mi}{8}\PYG{p}{,}                                                     \PYG{o}{*}
\PYG{n}{STATION}\PYG{o}{=}\PYG{n}{DTE}\PYG{p}{,}                                                   \PYG{o}{*}
\PYG{n}{SPPED}\PYG{o}{=}\PYG{l+m+mi}{19200}\PYG{p}{,}                                                   \PYG{o}{*}
\PYG{n}{TRAN}\PYG{o}{=}\PYG{n}{EVEN}
\PYG{n}{X25}\PYG{o}{.}\PYG{n}{LCG} \PYG{n}{LCGN}\PYG{o}{=}\PYG{l+m+mi}{0}
\PYG{n}{X25}\PYG{o}{.}\PYG{n}{VC} \PYG{n}{LCN}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{19}\PYG{p}{)}\PYG{p}{,}                             \PYG{l+m+mi}{20} \PYG{n}{physical} \PYG{n}{CVC} \PYG{o}{*}
\PYG{n}{TYPE}\PYG{o}{=}\PYG{n}{SWITCHED}\PYG{p}{,}                                                 \PYG{o}{*}
\PYG{n}{MAXDATA}\PYG{o}{=}\PYG{l+m+mi}{4101}\PYG{p}{,}                        \PYG{n}{Largest} \PYG{n}{VTAM} \PYG{n}{message} \PYG{n}{size} \PYG{o}{*}
\PYG{n}{VCCINDX}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,}                                                     \PYG{o}{*}
\PYG{n}{CALL}\PYG{o}{=}\PYG{n}{INOUT}                         \PYG{n}{Incoming} \PYG{o+ow}{and} \PYG{n}{outgoing} \PYG{n}{calls}
\end{sphinxVerbatim}

..note:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Each application can potentially use up to 20 CVC’s. It is not possible to limit the number of circuits which can be used by each application, as can be done with Fast\PYGZhy{}Connect.
\end{sphinxVerbatim}

\newpage

\index{Lines@\spxentry{Lines}!X25 GATE Fast-Connect (FC) line@\spxentry{X25 GATE Fast-Connect (FC) line}}\index{X25 GATE Fast-Connect (FC) line@\spxentry{X25 GATE Fast-Connect (FC) line}!Lines@\spxentry{Lines}}\ignorespaces 

\section{X25 GATE Fast-Connect (FastC) line}
\label{\detokenize{connectivity_guide:x25-gate-fast-connect-fastc-line}}\label{\detokenize{connectivity_guide:index-68}}
An X25 GATE Fast-Connect line establishes a connection between VIRTEL and an X25 line connected to an IBM 3745 communications controller. Across this type of line, VIRTEL handles incoming and outgoing calls to and from the X25 network. Activation of this type of line requires the presence of the FASTC, GATE and MINITEL parameters in the VIRTCT.

\sphinxincludegraphics{{image44}.png}

\index{X25 GATE FastC line@\spxentry{X25 GATE FastC line}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!X25 GATE FastC line@\spxentry{X25 GATE FastC line}}\ignorespaces 

\subsection{Parameters}
\label{\detokenize{connectivity_guide:index-69}}\label{\detokenize{connectivity_guide:id31}}\begin{description}
\item[{Remote ident}] \leavevmode
Name of the MCH LU generated by NPSI.

\item[{Local ident}] \leavevmode
Always blank.

\item[{Prefix}] \leavevmode
An X25 GATE Fast-Connect line uses a single sub-group of terminals dedicated to the management of sessions between VIRTEL and the switched virtual circuits on the one hand, and between VIRTEL and the host applications on the other hand. Each terminal is associated with an application relay defined by a VTAM APPL statement.

\item[{Entry Point}] \leavevmode
Not required for this type of line.

\item[{Line type}] \leavevmode
Always FASTC.

\item[{Possible calls}] \leavevmode
No special restriction.

\item[{Protocol}] \leavevmode
Always blank.

\item[{Window}] \leavevmode
Must agree with the NPSI definition.

\item[{Packet}] \leavevmode
Must agree with the NPSI definition.

\item[{Pad}] \leavevmode
Must agree with the NPSI definition.

\item[{Tran}] \leavevmode
Must agree with the NPSI definition.

\end{description}

Terminals on a X25 GATE Fast-Connect line

An X25 GATE Fast-Connect line uses a single sub-group of terminals dedicated to the management of sessions between VIRTEL and the switched virtual circuits on the one hand, and between VIRTEL and the host applications on the other hand. Each terminal is associated with an application relay defined by a VTAM APPL statement.

The relay name is compulsory for this type of terminal.

\sphinxincludegraphics{{image45}.png}

\index{X25 GATE FastC line@\spxentry{X25 GATE FastC line}!Terminal Definitions@\spxentry{Terminal Definitions}}\index{Terminal Definitions@\spxentry{Terminal Definitions}!X25 GATE FastC line@\spxentry{X25 GATE FastC line}}\ignorespaces 

\subsection{Terminal Definitions}
\label{\detokenize{connectivity_guide:index-70}}\label{\detokenize{connectivity_guide:id32}}\begin{description}
\item[{Terminal}] \leavevmode
The terminal name must match the virtual circuit LU names generated
by the X25.VC macro in the NPSI.

\item[{Relay}] \leavevmode
The application relay is a VTAM LU which represents the VIRTEL side
of the session with NPSI for each virtual circuit. Relay LUs are
defined in a VTAM application major node.

\item[{Terminal type}] \leavevmode
Always 1.

\item[{Compression}] \leavevmode
Always 2.

\item[{Possible calls}] \leavevmode
Specify 3 to allow both incoming and outgoing calls.

\item[{Repeat}] \leavevmode
The number of virtual circuits defined by NPSI.

\end{description}

\index{X25 GATE FastC line@\spxentry{X25 GATE FastC line}!VTAM Terminal Definitions@\spxentry{VTAM Terminal Definitions}}\index{VTAM Terminal Definitions@\spxentry{VTAM Terminal Definitions}!X25 GATE FastC line@\spxentry{X25 GATE FastC line}}\ignorespaces 

\subsection{VTAM Terminal Definitions}
\label{\detokenize{connectivity_guide:index-71}}\label{\detokenize{connectivity_guide:id33}}
Each Minitel or PC wishing to take advantage of VIRTEL functionality must be defined to VTAM in a switched major node similar to that shown in section {\hyperref[\detokenize{connectivity_guide:v460cn-x25gateline}]{\sphinxcrossref{\DUrole{std,std-ref}{“Definition of a X25 GATE Non Fast-Connect line”}}}}.

\index{X25 GATE FastC line@\spxentry{X25 GATE FastC line}!NCP/NPSI Definitions@\spxentry{NCP/NPSI Definitions}}\index{NCP/NPSI Definitions@\spxentry{NCP/NPSI Definitions}!X25 GATE FastC line@\spxentry{X25 GATE FastC line}}\ignorespaces 

\subsection{NCP/NPSI Definitions}
\label{\detokenize{connectivity_guide:ncp-npsi-definitions}}\label{\detokenize{connectivity_guide:index-72}}
As well as offering a noticable performance improvement, the use of Fast-Connect allows one line to be shared between several CTCP’s. When the Fast-Connect option is used, there is no VTAM switched major node. The switched virtual circuit is directly connected to the CTCP. This permanent connection minimizes connection time as well as the consumption of memory and CPU resources.

The definition of a Fast-Connect line is similar to that of a GATE line, apart from:

\sphinxstylestrong{Macro X25MCH}
\begin{description}
\item[{CONNECT}] \leavevmode
Must have a value other than NO. The remaining parameters depend on
the value of the CONNECT parameter.

\item[{LLCLIST}] \leavevmode
Must contain the value LLC5.

\end{description}

\index{X25 GATE FastC line@\spxentry{X25 GATE FastC line}!Sharing of FastC Lines@\spxentry{Sharing of FastC Lines}}\index{Sharing of FastC Lines@\spxentry{Sharing of FastC Lines}!X25 GATE FastC line@\spxentry{X25 GATE FastC line}}\ignorespaces 

\subsection{Sharing of FastC lines}
\label{\detokenize{connectivity_guide:sharing-of-fastc-lines}}\label{\detokenize{connectivity_guide:index-73}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{X25}\PYG{o}{.}\PYG{n}{MCH} \PYG{n}{ADRESS}\PYG{o}{=}\PYG{l+m+mi}{003}\PYG{p}{,}                                \PYG{o}{*}
\PYG{n}{FRMLENGTH}\PYG{o}{=}\PYG{l+m+mi}{131}\PYG{p}{,}                                     \PYG{o}{*}
\PYG{n}{LUNAME}\PYG{o}{=}\PYG{p}{(}\PYG{n}{XU01}\PYG{p}{,}\PYG{n}{XU02}\PYG{p}{)}\PYG{p}{,} \PYG{n}{LU} \PYG{n}{associated} \PYG{k}{with} \PYG{n}{each} \PYG{n}{VIRTEL} \PYG{o}{*}
\PYG{n}{LCGDEF}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{19}\PYG{p}{)}\PYG{p}{,}                                     \PYG{o}{*}
\PYG{n}{MWINDOW}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}                                         \PYG{o}{*}
\PYG{n}{ANS}\PYG{o}{=}\PYG{n}{CONT}\PYG{p}{,}                                          \PYG{o}{*}
\PYG{n}{DBIT}\PYG{o}{=}\PYG{n}{NO}\PYG{p}{,}                                           \PYG{o}{*}
\PYG{n}{GATE}\PYG{o}{=}\PYG{n}{GENERAL}\PYG{p}{,}                                      \PYG{o}{*}
\PYG{n}{CONNECT}\PYG{o}{=}\PYG{n}{SUBD}\PYG{p}{,} \PYG{n}{F}\PYG{o}{\PYGZhy{}}\PYG{n}{C} \PYG{n}{to} \PYG{n}{multiple} \PYG{n}{VIRTEL}               \PYG{o}{*}
\PYG{n}{SUBD}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{,}\PYG{l+m+mi}{9}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{,}                 \PYG{n}{Subaddresses} \PYG{l+m+mi}{4}\PYG{p}{,} \PYG{l+m+mi}{9}\PYG{p}{,} \PYG{l+m+mi}{1} \PYG{o}{*}
\PYG{n}{CTCP}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{)}                  \PYG{l+m+mi}{1}\PYG{n}{st} \PYG{n}{VIRTEL} \PYG{k}{if} \PYG{l+m+mi}{4}\PYG{p}{,}     \PYG{o}{*}
                              \PYG{l+m+mi}{2}\PYG{n}{nd} \PYG{n}{VIRTEL} \PYG{k}{if} \PYG{l+m+mi}{9} \PYG{o+ow}{or} \PYG{l+m+mi}{1} \PYG{o}{*}
\PYG{n}{LOGAPPL}\PYG{o}{=}\PYG{p}{(}\PYG{n}{VIRTEL1}\PYG{p}{,}\PYG{n}{VIRTEL2}\PYG{p}{)}    \PYG{n}{Applid} \PYG{n}{of} \PYG{n}{each} \PYG{n}{VIRTEL} \PYG{o}{*}
\PYG{n}{LLCLIST}\PYG{o}{=}\PYG{p}{(}\PYG{n}{LLC4}\PYG{p}{)}                                     \PYG{o}{*}
\PYG{n}{SUBADDR}\PYG{o}{=}\PYG{n}{NO}\PYG{p}{,}                                        \PYG{o}{*}
\PYG{n}{PAD}\PYG{o}{=}\PYG{n}{NO}\PYG{p}{,}                                            \PYG{o}{*}
\PYG{n}{PKTMODL}\PYG{o}{=}\PYG{l+m+mi}{8}\PYG{p}{,}                                         \PYG{o}{*}
\PYG{n}{STATION}\PYG{o}{=}\PYG{n}{DTE}\PYG{p}{,}                                       \PYG{o}{*}
\PYG{n}{SPEED}\PYG{o}{=}\PYG{l+m+mi}{19200}\PYG{p}{,}                                       \PYG{o}{*}
\PYG{n}{TRAN}\PYG{o}{=}\PYG{n}{NO}
\PYG{n}{X25}\PYG{o}{.}\PYG{n}{LCG} \PYG{n}{LCGN}\PYG{o}{=}\PYG{l+m+mi}{0}
\PYG{n}{X25}\PYG{o}{.}\PYG{n}{VC} \PYG{n}{LCN}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{19}\PYG{p}{)}\PYG{p}{,}                 \PYG{l+m+mi}{20} \PYG{n}{physical} \PYG{n}{CVC} \PYG{o}{*}
\PYG{n}{TYPE}\PYG{o}{=}\PYG{n}{SWITCHED}\PYG{p}{,}                                     \PYG{o}{*}
\PYG{n}{MAXDATA}\PYG{o}{=}\PYG{l+m+mi}{4101}\PYG{p}{,}            \PYG{n}{Largest} \PYG{n}{VTAM} \PYG{n}{message} \PYG{n}{size} \PYG{o}{*}
\PYG{n}{VCCINDX}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,}                                         \PYG{o}{*}
\PYG{n}{CALL}\PYG{o}{=}\PYG{n}{INOUT}              \PYG{n}{Incoming} \PYG{o+ow}{and} \PYG{n}{outgoing} \PYG{n}{calls}
\PYG{n}{X25}\PYG{o}{.}\PYG{n}{FCG} \PYG{n}{QTY}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{15}\PYG{p}{)}\PYG{p}{,}        \PYG{n}{No}\PYG{o}{.}\PYG{n}{of} \PYG{n}{CVC} \PYG{n}{used} \PYG{k}{for} \PYG{n}{CTCP} \PYG{l+m+mi}{0} \PYG{o}{*}
\PYG{n}{CTCPNO}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{)}\PYG{p}{,}                            \PYG{n}{CTCP} \PYG{n}{number} \PYG{o}{*}
\PYG{n}{ANS}\PYG{o}{=}\PYG{n}{CONT}\PYG{p}{,}                                          \PYG{o}{*}
\PYG{n}{MAXDATA}\PYG{o}{=}\PYG{l+m+mi}{4101}\PYG{p}{,}                                      \PYG{o}{*}
\PYG{n}{PRFLINE}\PYG{o}{=}\PYG{n}{XU01}\PYG{p}{,} \PYG{n}{Line} \PYG{n}{name} \PYG{n}{prefix}                     \PYG{o}{*}
\PYG{n}{PRFPU}\PYG{o}{=}\PYG{n}{XP01}\PYG{p}{,} \PYG{n}{PU} \PYG{n}{name} \PYG{n}{prefix}                         \PYG{o}{*}
\PYG{n}{PRFLU}\PYG{o}{=}\PYG{n}{XL01}\PYG{p}{,} \PYG{n}{Virtual} \PYG{n}{LU} \PYG{n}{name} \PYG{n}{prefix}                 \PYG{o}{*}
\PYG{n}{SUFFIX}\PYG{o}{=}\PYG{l+m+mi}{0001}             \PYG{n}{LU} \PYG{n}{numbers} \PYG{n}{incremented} \PYG{n}{by} \PYG{l+m+mi}{1}
\PYG{n}{X25}\PYG{o}{.}\PYG{n}{FCG} \PYG{n}{QTY}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{15}\PYG{p}{)}\PYG{p}{,}        \PYG{n}{No} \PYG{n}{of} \PYG{n}{CVC} \PYG{n}{used} \PYG{k}{for} \PYG{n}{CTCP} \PYG{l+m+mi}{1} \PYG{o}{*}
\PYG{n}{CTCPNO}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{,}                            \PYG{n}{CTCP} \PYG{n}{number} \PYG{o}{*}
\PYG{n}{ANS}\PYG{o}{=}\PYG{n}{CONT}\PYG{p}{,}                                          \PYG{o}{*}
\PYG{n}{MAXDATA}\PYG{o}{=}\PYG{l+m+mi}{4101}\PYG{p}{,}                                      \PYG{o}{*}
\PYG{n}{PRFLINE}\PYG{o}{=}\PYG{n}{XU02}\PYG{p}{,}                     \PYG{n}{Line} \PYG{n}{name} \PYG{n}{prefix} \PYG{o}{*}
\PYG{n}{PRFPU}\PYG{o}{=}\PYG{n}{XP02}\PYG{p}{,}                         \PYG{n}{PU} \PYG{n}{name} \PYG{n}{prefix} \PYG{o}{*}
\PYG{n}{PRFLU}\PYG{o}{=}\PYG{n}{XL02}\PYG{p}{,}                 \PYG{n}{Virtual} \PYG{n}{LU} \PYG{n}{name} \PYG{n}{prefix} \PYG{o}{*}
\PYG{n}{SUFFIX}\PYG{o}{=}\PYG{l+m+mi}{0001}             \PYG{n}{LU} \PYG{n}{numbers} \PYG{n}{incremented} \PYG{n}{by} \PYG{l+m+mi}{1}
\end{sphinxVerbatim}

\sphinxstyleemphasis{Example of a Fast-Connect line shared between 2 VIRTELs using subaddressing}

..note:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
The number of “logical” virtual circuits can be greater than the number of “physical” virtual circuits. This example has 20 physical virtual circuits for 30 (2 X 15) logical virtual circuits.
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{X25}\PYG{o}{.}\PYG{n}{MCH} \PYG{n}{ADRESS}\PYG{o}{=}\PYG{l+m+mi}{003}\PYG{p}{,}                                \PYG{o}{*}
\PYG{n}{FRMLENGTH}\PYG{o}{=}\PYG{l+m+mi}{131}\PYG{p}{,}                                     \PYG{o}{*}
\PYG{n}{LUNAME}\PYG{o}{=}\PYG{n}{XU01}\PYG{p}{,}         \PYG{n}{MCH} \PYG{n}{LU} \PYG{n}{associated} \PYG{k}{with} \PYG{n}{VIRTEL} \PYG{o}{*}
\PYG{n}{LCGDEF}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{19}\PYG{p}{)}\PYG{p}{,}                                     \PYG{o}{*}
\PYG{n}{MWINDOW}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}                                         \PYG{o}{*}
\PYG{n}{ANS}\PYG{o}{=}\PYG{n}{CONT}\PYG{p}{,}                                          \PYG{o}{*}
\PYG{n}{DBIT}\PYG{o}{=}\PYG{n}{NO}\PYG{p}{,}                                           \PYG{o}{*}
\PYG{n}{GATE}\PYG{o}{=}\PYG{n}{GENERAL}\PYG{p}{,}                                      \PYG{o}{*}
\PYG{n}{CONNECT}\PYG{o}{=}\PYG{n}{YES}\PYG{p}{,}                \PYG{n}{F}\PYG{o}{\PYGZhy{}}\PYG{n}{C} \PYG{n}{to} \PYG{n}{multiple} \PYG{n}{VIRTEL} \PYG{o}{*}
\PYG{n}{LOGAPPL}\PYG{o}{=}\PYG{n}{VIRTEL1}\PYG{p}{,}                  \PYG{n}{Applid} \PYG{n}{of} \PYG{n}{VIRTEL} \PYG{o}{*}
\PYG{n}{LLCLIST}\PYG{o}{=}\PYG{n}{LLC4}\PYG{p}{,}                                      \PYG{o}{*}
\PYG{n}{SUBD}\PYG{o}{=}\PYG{n}{NO}\PYG{p}{,}                    \PYG{n}{SUBD}\PYG{o}{=}\PYG{n}{NO}                \PYG{o}{*}
\PYG{n}{PAD}\PYG{o}{=}\PYG{n}{NO}\PYG{p}{,}                                            \PYG{o}{*}
\PYG{n}{PKTMODL}\PYG{o}{=}\PYG{l+m+mi}{8}\PYG{p}{,}                                         \PYG{o}{*}
\PYG{n}{STATION}\PYG{o}{=}\PYG{n}{DTE}\PYG{p}{,}                                       \PYG{o}{*}
\PYG{n}{SPPED}\PYG{o}{=}\PYG{l+m+mi}{19200}\PYG{p}{,}                                       \PYG{o}{*}
\PYG{n}{TRAN}\PYG{o}{=}\PYG{n}{NO}
\PYG{n}{X25}\PYG{o}{.}\PYG{n}{LCG}                     \PYG{n}{LCGN}\PYG{o}{=}\PYG{l+m+mi}{0}
\PYG{n}{X25}\PYG{o}{.}\PYG{n}{VC} \PYG{n}{LCN}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{19}\PYG{p}{)}\PYG{p}{,}                 \PYG{l+m+mi}{20} \PYG{n}{physical} \PYG{n}{CVC} \PYG{o}{*}
\PYG{n}{TYPE}\PYG{o}{=}\PYG{n}{SWITCHED}\PYG{p}{,}                                     \PYG{o}{*}
\PYG{n}{MAXDATA}\PYG{o}{=}\PYG{l+m+mi}{4101}\PYG{p}{,}            \PYG{n}{Largest} \PYG{n}{VTAM} \PYG{n}{message} \PYG{n}{size} \PYG{o}{*}
\PYG{n}{PRFLINE}\PYG{o}{=}\PYG{n}{ZL01}\PYG{p}{,}                                      \PYG{o}{*}
\PYG{n}{PRFPU}\PYG{o}{=}\PYG{n}{ZPU01}\PYG{p}{,}                                       \PYG{o}{*}
\PYG{n}{PRFLU}\PYG{o}{=}\PYG{n}{ZLU01}\PYG{p}{,}                                       \PYG{o}{*}
\PYG{n}{VCCINDX}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,}                                         \PYG{o}{*}
\PYG{n}{CALL}\PYG{o}{=}\PYG{n}{INOUT} \PYG{n}{Incoming} \PYG{o+ow}{and} \PYG{n}{outgoing} \PYG{n}{calls}
\end{sphinxVerbatim}

\sphinxstyleemphasis{Example of a Fast-Connect line with a single CTCP without subaddressing}

\newpage

\index{Lines@\spxentry{Lines}!X25 AntiGATE line@\spxentry{X25 AntiGATE line}}\index{X25 AntiGATE line@\spxentry{X25 AntiGATE line}!Lines@\spxentry{Lines}}\ignorespaces 

\section{X25 AntiGATE line}
\label{\detokenize{connectivity_guide:x25-antigate-line}}\label{\detokenize{connectivity_guide:index-74}}
A Reverse-X25 AntiGATE line establishes a link between VIRTEL and a Communication and Transmission Control Program (CTCP) application. On this type of line, VIRTEL communicates with the CTCP to manage incoming and outgoing calls to and from the X25 network. Once a virtual circuit is established, data flows across LU-LU sessions between the VIRTEL terminals and the CTCP. In this way, VIRTEL emulates an IBM 3745 controller with NPSI.

\sphinxincludegraphics{{image46}.png}

\index{X25 AntiGATE line@\spxentry{X25 AntiGATE line}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!X25 AntiGATE line@\spxentry{X25 AntiGATE line}}\ignorespaces 

\subsection{Parameters}
\label{\detokenize{connectivity_guide:index-75}}\label{\detokenize{connectivity_guide:id34}}\begin{description}
\item[{Remote ident}] \leavevmode
LU name of the CTCP (CFT, Inter.PEL, etc). May be blank if WAIT-PARTNER is coded in the “Startup pre-requisite” field.

\item[{Local ident}] \leavevmode
Name of the LU which represents the physical circuit for the AntiGATE line (analogous to the LU generated by the NPSI X25.MCH
macro in the NCP). This LU must be defined by a VTAM APPL statement.

\item[{Prefix}] \leavevmode
Terminal name prefix (see below).

\item[{Entry Point}] \leavevmode
The default entry point, if no entry point is defined at the terminal level, or in the line rules or call user data.

\item[{Line type}] \leavevmode
Always /GATE.

\item[{Possible calls}] \leavevmode
No special restriction.

\item[{Startup prerequisite}] \leavevmode
WAIT-PARTNER is recommended for AntiGATE lines. WAIT-PARTNER must be specified if the partner is CFT.

\item[{Protocol}] \leavevmode
Always blank.

\item[{Window, Packet}] \leavevmode
Must agree with the definition in the CTCP.

\item[{Pad, Tran}] \leavevmode
Must agree with the definition in the CTCP.

\end{description}

\index{X25 AntiGATE line@\spxentry{X25 AntiGATE line}!Terminal Definitions@\spxentry{Terminal Definitions}}\index{Terminal Definitions@\spxentry{Terminal Definitions}!X25 AntiGATE line@\spxentry{X25 AntiGATE line}}\ignorespaces 

\subsection{Terminal Definitions}
\label{\detokenize{connectivity_guide:index-76}}\label{\detokenize{connectivity_guide:id35}}
An AntiGATE line uses a single sub-group of terminals which represent the virtual circuits allocated to the line (analogous to the LU’s linked to the virtual circuits defined by the NPSI macro X25.VC in the NCP). The terminal name is an internal name which is used to associate the terminal definition with the AntiGATE line. The associated relay name must match the name of a VTAM APPL statement. Either explicit or repeated terminal definitions may be used.

\sphinxincludegraphics{{image47}.png}

\sphinxstyleemphasis{Terminals on an X25 AntiGATE line}

\index{X25 AntiGATE line@\spxentry{X25 AntiGATE line}!VTAM Terminals Definitions@\spxentry{VTAM Terminals Definitions}}\index{VTAM Terminals Definitions@\spxentry{VTAM Terminals Definitions}!X25 AntiGATE line@\spxentry{X25 AntiGATE line}}\ignorespaces 

\subsection{VTAM Terminal Definitions}
\label{\detokenize{connectivity_guide:index-77}}\label{\detokenize{connectivity_guide:id36}}
The The LU’s representing the line and the virtual circuits must be defined by APPL statements in a VTAM application major node similar to the following example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{VIRAGATE} \PYG{n}{VBUILD} \PYG{n}{TYPE}\PYG{o}{=}\PYG{n}{APPL}
\PYG{o}{*} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{*}
\PYG{o}{*} \PYG{n}{Pseudo} \PYG{n}{ligne} \PYG{n}{gate} \PYG{n}{émulée} \PYG{n}{par} \PYG{n}{Virtel} \PYG{p}{(}\PYG{n}{note} \PYG{l+m+mi}{1}\PYG{p}{)} \PYG{o}{*}
\PYG{o}{*} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{*}
\PYG{n}{VXU21} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{MODVIRT}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DLOGANTI}
\PYG{o}{*} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{*}
\PYG{o}{*} \PYG{n}{Pseudo} \PYG{n}{cvcs} \PYG{n}{pour} \PYG{n}{ligne} \PYG{n}{gate} \PYG{n}{émulée} \PYG{n}{par} \PYG{n}{Virtel} \PYG{p}{(}\PYG{n}{note} \PYG{l+m+mi}{1}\PYG{p}{)} \PYG{o}{*}
\PYG{o}{*} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{*}
\PYG{n}{AG21LU01} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{MODVIRT}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DLOGANTI}
\PYG{n}{AG21LU02} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{MODVIRT}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DLOGANTI}
\PYG{n}{AG21LU03} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{MODVIRT}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DLOGANTI}
\PYG{n}{AG21LU04} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{MODVIRT}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DLOGANTI}
\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
\end{sphinxVerbatim}

\sphinxstyleemphasis{VTAM definitions for an X25 AntiGATE line}
\begin{description}
\item[{Note 1}] \leavevmode
The LU’s defined in the “Local ident” field of the line must specify logmode DLOGANTI.

\item[{Note 2}] \leavevmode
The LU’s for the terminal relays can use a logmode appropriate for the application.

\item[{Note 3}] \leavevmode
The MODVIRT phase must be placed in an executable library (VSE) or in a LOADLIB (MVS, VM) defined to VTAM before the application major node can be activated.

\end{description}

\newpage

\index{Lines@\spxentry{Lines}!X25 Anti Fast Connect (FastC) line@\spxentry{X25 Anti Fast Connect (FastC) line}}\index{X25 Anti Fast Connect (FastC) line@\spxentry{X25 Anti Fast Connect (FastC) line}!Lines@\spxentry{Lines}}\ignorespaces 

\section{X25 Anti Fast Connect (FastC) line}
\label{\detokenize{connectivity_guide:x25-anti-fast-connect-fastc-line}}\label{\detokenize{connectivity_guide:index-78}}
Similar to an AntiGATE line, a Reverse-X25 AntiFastC line establishes a link between VIRTEL and a Communication and Transmission Control Program (CTCP) application. On this type of   line, VIRTEL communicates with the CTCP to manage incoming and outgoing calls to and from the X25 network. Once a virtual circuit is established, data flows across LU-LU sessions between the VIRTEL terminals and the CTCP. In this way, VIRTEL emulates an IBM 3745 controller with NPSI.

\sphinxincludegraphics{{image48}.png}

\index{X25 Anti-FastC line@\spxentry{X25 Anti-FastC line}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!X25 Anti-FastC line@\spxentry{X25 Anti-FastC line}}\ignorespaces 

\subsection{Parameters}
\label{\detokenize{connectivity_guide:index-79}}\label{\detokenize{connectivity_guide:id37}}\begin{description}
\item[{Remote ident}] \leavevmode
CTCP LU name.

\item[{Local ident}] \leavevmode
Name of the LU which represents the physical circuit for the AntiFastC line (analogous to the LU generated by the NPSI X25.MCH macro in the NCP). This LU must be defined by a VTAM APPL statement.

\item[{Prefix}] \leavevmode
Terminal name prefix (see below).

\item[{Entry Point}] \leavevmode
The default entry point, if no entry point is defined at the terminal level, or in the line rules or call user data.

\item[{Line type}] \leavevmode
Always /FASTC.

\item[{Possible calls}] \leavevmode
No special restriction.

\item[{Protocol}] \leavevmode
Always blank.

\item[{Window, Packet}] \leavevmode
Must agree with the definition in the CTCP.

\item[{Pad}] \leavevmode
Must agree with the definition in the CTCP.

\item[{Tran}] \leavevmode
Specify EVEN, ODD, or NO according to the requirements of the CTCP. Additionally, for AntiFastC lines only: the special value EBCD indicates that VIRTEL will perform the necessary conversion to allow a Videotex server CTCP to be accessed in 3270 mode (VIRTEL Multisession or Web Access).

\end{description}

\index{X25 Anti-FastC line@\spxentry{X25 Anti-FastC line}!Terminal Definitions@\spxentry{Terminal Definitions}}\index{Terminal Definitions@\spxentry{Terminal Definitions}!X25 Anti-FastC line@\spxentry{X25 Anti-FastC line}}\ignorespaces 

\subsection{Terminal Definitions}
\label{\detokenize{connectivity_guide:index-80}}\label{\detokenize{connectivity_guide:id38}}
An AntiFastC link uses a single sub-group of terminals which represent the virtual circuits allocated to the line (analogous to the LU’s linked to the virtual circuits defined by the NPSI macro X25.VC in the NCP). The terminal name is an internal name which is used to associate the terminal definition with the AntiFastC line. The associated relay name must match the name of a VTAM APPL statement. Either explicit or repeated terminal definitions may be used.

\sphinxincludegraphics{{image49}.png}
\sphinxstyleemphasis{Terminals on an X25 AntiFastC line}

The LU’s representing the line and the virtual circuits must be defined by APPL statements in a VTAM application major node similar to the following example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{VIRAFAST} \PYG{n}{VBUILD} \PYG{n}{TYPE}\PYG{o}{=}\PYG{n}{APPL}
\PYG{o}{*} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{*}
\PYG{o}{*} \PYG{n}{Pseudo} \PYG{n}{ligne} \PYG{n}{fastc} \PYG{n}{émulée} \PYG{n}{par} \PYG{n}{Virtel} \PYG{p}{(}\PYG{n}{note} \PYG{l+m+mi}{1}\PYG{p}{)} \PYG{o}{*}
\PYG{o}{*} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{*}
\PYG{n}{VXU14} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{MODVIRT}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DLOGANTI}
\PYG{o}{*} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{*}
\PYG{o}{*} \PYG{n}{Pseudo} \PYG{n}{cvcs} \PYG{n}{pour} \PYG{n}{ligne} \PYG{n}{fastc} \PYG{n}{émulée} \PYG{n}{par} \PYG{n}{Virtel} \PYG{p}{(}\PYG{n}{note} \PYG{l+m+mi}{1}\PYG{p}{)} \PYG{o}{*}
\PYG{o}{*} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{*}
\PYG{n}{X25AF500} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{MODVIRT}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DLOGANTI}
\PYG{n}{X25AF501} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{MODVIRT}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DLOGANTI}
\PYG{n}{X25AF502} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{MODVIRT}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DLOGANTI}
\PYG{n}{X25AF503} \PYG{n}{APPL} \PYG{n}{AUTH}\PYG{o}{=}\PYG{p}{(}\PYG{n}{ACQ}\PYG{p}{,}\PYG{n}{PASS}\PYG{p}{)}\PYG{p}{,}\PYG{n}{MODETAB}\PYG{o}{=}\PYG{n}{MODVIRT}\PYG{p}{,}\PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{n}{DLOGANTI}
\end{sphinxVerbatim}

\index{X25 Anti-FastC line@\spxentry{X25 Anti-FastC line}!VTAM Terminal Definitions@\spxentry{VTAM Terminal Definitions}}\index{VTAM Terminal Definitions@\spxentry{VTAM Terminal Definitions}!X25 Anti-FastC line@\spxentry{X25 Anti-FastC line}}\ignorespaces 

\subsection{VTAM Terminal Definitions}
\label{\detokenize{connectivity_guide:index-81}}\label{\detokenize{connectivity_guide:id39}}\begin{description}
\item[{Note 1}] \leavevmode
The LU’s defined in the “Local ident” field of the line must specify logmode DLOGANTI.

\item[{Note 2}] \leavevmode
The LU’s for the terminal relays can use a logmode appropriate for the application.

\item[{Note 3}] \leavevmode
The MODVIRT phase must be placed in an executable library (VSE) or in a LOADLIB (MVS, VM) defined to VTAM before the application major node can be activated.

\end{description}

\newpage

\index{Lines@\spxentry{Lines}!X25 AntiPCNE line@\spxentry{X25 AntiPCNE line}}\index{X25 AntiPCNE line@\spxentry{X25 AntiPCNE line}!Lines@\spxentry{Lines}}\ignorespaces 

\section{X25 AntiPCNE line}
\label{\detokenize{connectivity_guide:x25-antipcne-line}}\label{\detokenize{connectivity_guide:index-82}}
Like an AntiGATE or AntiFastC line, a Reverse-X25 AntiPCNE line establishes a link between VIRTEL and an application. By contrast however, VIRTEL does not use a line-level LU to manage call setup, and the application does not supply VIRTEL with a call packet. Instead, the application makes outgoing calls by choosing a particular LU associated with the AntiPCNE line. The X25 called number is defined at the terminal level by means of an associated external server definition. In this way, VIRTEL emulates an IBM 3745 controller with NPSI.

\sphinxincludegraphics{{image50}.png}

\index{X25 AntiPCNE line@\spxentry{X25 AntiPCNE line}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!X25 AntiPCNE line@\spxentry{X25 AntiPCNE line}}\ignorespaces 

\subsection{Parameters}
\label{\detokenize{connectivity_guide:index-83}}\label{\detokenize{connectivity_guide:id40}}\begin{description}
\item[{Remote ident}] \leavevmode
Partner application LU name.

\item[{Local ident}] \leavevmode
Always blank.

\item[{Prefix}] \leavevmode
Terminal name prefix (see below).

\item[{Entry Point}] \leavevmode
Leave blank. The entry point should be defined in the rules of the line.

\item[{Line type}] \leavevmode
Always /PCNE.

\item[{Possible calls}] \leavevmode
No special restriction.

\item[{Protocol}] \leavevmode
Always blank.

\item[{Window}] \leavevmode
Not used for an AntiPCNE line.

\item[{Packet}] \leavevmode
Not used for an AntiPCNE line.

\item[{Pad}] \leavevmode
Always NO.

\item[{Tran}] \leavevmode
Always NO.

\end{description}

\index{X25 AntiPCNE line@\spxentry{X25 AntiPCNE line}!Terminal Definitions@\spxentry{Terminal Definitions}}\index{Terminal Definitions@\spxentry{Terminal Definitions}!X25 AntiPCNE line@\spxentry{X25 AntiPCNE line}}\ignorespaces 

\subsection{Terminal Definitions}
\label{\detokenize{connectivity_guide:index-84}}\label{\detokenize{connectivity_guide:id41}}
An AntiPCNE line uses two sub-groups of terminals. In each case, the terminal name is an internal name which is used to associate the terminal definition with the AntiPCNE line. The associated relay name must match the name of a VTAM APPL statement.

The first sub-group is used for outgoing calls (from the point of view of the application), and consists of explicitly defined  terminals with the “Possible calls” field set to 1. Each terminal in this first sub-group corresponds to a single remote partner. The “Relay” field of each terminal in this first sub-group must contain the LU name which the application uses to make outgoing calls to the remote partner concerned. The entry point specified by the rules of the line contains a type-3 transaction which specifies “\&R” as the
application name. This makes the link with an external server whose name is identical to the Relay LU name. The external server contains the call parameters (X25 number, etc) needed to route calls to the required partner.

The example below shows the definition of an AntiPCNE terminal for outbound calls made using LU name AP1LU01O, and the associated external server containing the X25 call parameters:

\sphinxincludegraphics{{image51}.png}
\sphinxstyleemphasis{Outbound Terminal Definition for X25 AntiPCNE}

\sphinxincludegraphics{{image52}.png}
\sphinxstyleemphasis{External server definition for X25 AntiPCNE}

The second sub-group is used for incoming calls (from the point of view of the application). In this sub-group, the “Possible calls” field is set to 2. Either explicit or repeated terminal definitions may be used for this second sub-group, and no entry point is necessary. Each terminal in the second sub-group can be used for calls originating from any remote partner. This method is suitable for applications such as CFT which do not verify the LU name for incoming calls.

\sphinxincludegraphics{{image53}.png}
\sphinxstyleemphasis{Inbound terminal definition for X25 AntiPCNE (method 1)}

A second method of defining AntiPCNE terminals allows the administrator to specify the selection of an LU name according to the characteristics of the incoming call. This method is suitable for applications such as Inter.PEL which require incoming calls to arrive on specific LU names according to the identity of the partner which originated the call. In this case, the terminals in the second sub-group specify the name of a logical pool instead of a relay LU name (see {\hyperref[\detokenize{connectivity_guide:v460cn-logicalpool}]{\sphinxcrossref{\DUrole{std,std-ref}{“logical pool of relays”}}}}). The terminals in the logical pool contain the relay LU’s. The selection of an LU is done by means of the rule which routes the incoming call, by specifying the required LU name in the “Parameter” field of the rule. Note that the rules which route incoming calls are those attached to the line on which the call arrives (for example, an XOT line) and not those attached to the AntiPCNE line.

The example below shows the definition of a set of inbound terminals (PCN1TM51-54) attached to an AntiPCNE line. These terminals, which are defined using the repeated method, all refer to a logical pool *POOLPCN. Terminal Definitions PCNETM51-54 are explicitly defined and constitute the logical pool. The relay names AP30LU51-54 are defined in the logical pool. A set of rules attached to the XOT line on which incoming calls arrive assigns an LU from the pool to each incoming call according to the contents of the CUD0 field in the incoming call packet.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}
\PYG{o}{\textbar{}} \PYG{n}{Terminal} \PYG{o}{\textbar{}} \PYG{n}{Repeated} \PYG{o}{\textbar{}}  \PYG{n}{Relay}   \PYG{o}{\textbar{}} \PYG{n}{Entry} \PYG{o}{\textbar{}} \PYG{n}{Type} \PYG{o}{\textbar{}} \PYG{n}{I}\PYG{o}{/}\PYG{n}{O} \PYG{o}{\textbar{}}   \PYG{n}{Pool}  \PYG{o}{\textbar{}} \PYG{l+m+mi}{2}\PYG{n}{nd} \PYG{n}{Relay} \PYG{o}{\textbar{}}
\PYG{o}{+}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{+}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{+}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{+}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{=}\PYG{o}{+}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{+}\PYG{o}{==}\PYG{o}{==}\PYG{o}{=}\PYG{o}{+}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{=}\PYG{o}{+}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{=}\PYG{o}{+}
\PYG{o}{\textbar{}} \PYG{n}{PCNETM51} \PYG{o}{\textbar{}}  \PYG{l+m+mi}{0001}    \PYG{o}{\textbar{}} \PYG{n}{AP30LU51} \PYG{o}{\textbar{}}       \PYG{o}{\textbar{}}  \PYG{l+m+mi}{3}   \PYG{o}{\textbar{}}  \PYG{l+m+mi}{2}  \PYG{o}{\textbar{}}\PYG{o}{*}\PYG{n}{POOLPCN} \PYG{o}{\textbar{}}           \PYG{o}{\textbar{}}
\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}
\PYG{o}{\textbar{}} \PYG{n}{PCNETM52} \PYG{o}{\textbar{}}  \PYG{l+m+mi}{0001}    \PYG{o}{\textbar{}} \PYG{n}{AP30LU52} \PYG{o}{\textbar{}}       \PYG{o}{\textbar{}}  \PYG{l+m+mi}{3}   \PYG{o}{\textbar{}}  \PYG{l+m+mi}{2}  \PYG{o}{\textbar{}}\PYG{o}{*}\PYG{n}{POOLPCN} \PYG{o}{\textbar{}}           \PYG{o}{\textbar{}}
\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}
\PYG{o}{\textbar{}} \PYG{n}{PCNETM53} \PYG{o}{\textbar{}}  \PYG{l+m+mi}{0001}    \PYG{o}{\textbar{}} \PYG{n}{AP30LU53} \PYG{o}{\textbar{}}       \PYG{o}{\textbar{}}  \PYG{l+m+mi}{3}   \PYG{o}{\textbar{}}  \PYG{l+m+mi}{2}  \PYG{o}{\textbar{}}\PYG{o}{*}\PYG{n}{POOLPCN} \PYG{o}{\textbar{}}           \PYG{o}{\textbar{}}
\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}
\PYG{o}{\textbar{}} \PYG{n}{PCNETM54} \PYG{o}{\textbar{}}  \PYG{l+m+mi}{0001}    \PYG{o}{\textbar{}} \PYG{n}{AP30LU54} \PYG{o}{\textbar{}}       \PYG{o}{\textbar{}}  \PYG{l+m+mi}{3}   \PYG{o}{\textbar{}}  \PYG{l+m+mi}{2}  \PYG{o}{\textbar{}}\PYG{o}{*}\PYG{n}{POOLPCN} \PYG{o}{\textbar{}}           \PYG{o}{\textbar{}}
\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}
\PYG{o}{\textbar{}} \PYG{n}{PCN1TM01} \PYG{o}{\textbar{}}  \PYG{l+m+mi}{0000}    \PYG{o}{\textbar{}} \PYG{n}{AP30LU01} \PYG{o}{\textbar{}}       \PYG{o}{\textbar{}}  \PYG{l+m+mi}{3}   \PYG{o}{\textbar{}}  \PYG{l+m+mi}{1}  \PYG{o}{\textbar{}}         \PYG{o}{\textbar{}}           \PYG{o}{\textbar{}}
\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}
\PYG{o}{\textbar{}} \PYG{n}{PCN1TM02} \PYG{o}{\textbar{}}  \PYG{l+m+mi}{0001}    \PYG{o}{\textbar{}} \PYG{n}{AP30LU02} \PYG{o}{\textbar{}}       \PYG{o}{\textbar{}}  \PYG{l+m+mi}{3}   \PYG{o}{\textbar{}}  \PYG{l+m+mi}{1}  \PYG{o}{\textbar{}}         \PYG{o}{\textbar{}}           \PYG{o}{\textbar{}}
\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}
\PYG{o}{\textbar{}} \PYG{n}{PCN1TM03} \PYG{o}{\textbar{}}  \PYG{l+m+mi}{0001}    \PYG{o}{\textbar{}} \PYG{n}{AP30LU03} \PYG{o}{\textbar{}}       \PYG{o}{\textbar{}}  \PYG{l+m+mi}{3}   \PYG{o}{\textbar{}}  \PYG{l+m+mi}{1}  \PYG{o}{\textbar{}}         \PYG{o}{\textbar{}}           \PYG{o}{\textbar{}}
\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}
\PYG{o}{\textbar{}} \PYG{n}{PCN1TM04} \PYG{o}{\textbar{}}  \PYG{l+m+mi}{0001}    \PYG{o}{\textbar{}} \PYG{n}{AP30LU04} \PYG{o}{\textbar{}}       \PYG{o}{\textbar{}}  \PYG{l+m+mi}{3}   \PYG{o}{\textbar{}}  \PYG{l+m+mi}{1}  \PYG{o}{\textbar{}}         \PYG{o}{\textbar{}}           \PYG{o}{\textbar{}}
\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}
\PYG{o}{\textbar{}} \PYG{n}{PCN1TM51} \PYG{o}{\textbar{}}  \PYG{l+m+mi}{0004}    \PYG{o}{\textbar{}} \PYG{o}{*}\PYG{n}{POOLPCN} \PYG{o}{\textbar{}}       \PYG{o}{\textbar{}}  \PYG{l+m+mi}{3}   \PYG{o}{\textbar{}}  \PYG{l+m+mi}{2}  \PYG{o}{\textbar{}}         \PYG{o}{\textbar{}}           \PYG{o}{\textbar{}}
\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}
\end{sphinxVerbatim}

\sphinxstyleemphasis{List of inbound terminal definitions for X25 AntiPCNE}

\sphinxincludegraphics{{image54}.png}
\sphinxstyleemphasis{Inbound terminal definition for X25 AntiPCNE}

\sphinxincludegraphics{{image55}.png}
\sphinxstyleemphasis{Logical pool definition for X25 AntiPCNE}

\sphinxincludegraphics{{image56}.png}
\sphinxstyleemphasis{Rule for incoming X25 AntiPCNE calls}

\index{X25 AntiPCNE line@\spxentry{X25 AntiPCNE line}!VTAM Terminal Definitions@\spxentry{VTAM Terminal Definitions}}\index{VTAM Terminal Definitions@\spxentry{VTAM Terminal Definitions}!X25 AntiPCNE line@\spxentry{X25 AntiPCNE line}}\ignorespaces 

\subsection{VTAM Terminal Definitions}
\label{\detokenize{connectivity_guide:index-85}}\label{\detokenize{connectivity_guide:id42}}
The LU’s representing the line and the virtual circuits must be defined by APPL statements in a VTAM application major node similar to the following example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
VIRAPCNE VBUILD TYPE=APPL
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} *
* Pseudo cvcs pour ligne pcne émulée par Virtel (note 1) *
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} *
AP30LU01 APPL AUTH=(ACQ,PASS),MODETAB=MODVIRT,DLOGMOD=DLOGPCNE
AP30LU02 APPL AUTH=(ACQ,PASS),MODETAB=MODVIRT,DLOGMOD=DLOGPCNE
AP30LU03 APPL AUTH=(ACQ,PASS),MODETAB=MODVIRT,DLOGMOD=DLOGPCNE
AP30LU04 APPL AUTH=(ACQ,PASS),MODETAB=MODVIRT,DLOGMOD=DLOGPCNE
AP30LU51 APPL AUTH=(ACQ,PASS),MODETAB=MODVIRT,DLOGMOD=DLOGPCNE
AP30LU52 APPL AUTH=(ACQ,PASS),MODETAB=MODVIRT,DLOGMOD=DLOGPCNE
AP30LU53 APPL AUTH=(ACQ,PASS),MODETAB=MODVIRT,DLOGMOD=DLOGPCNE
AP30LU54 APPL AUTH=(ACQ,PASS),MODETAB=MODVIRT,DLOGMOD=DLOGPCNE

Note 1
    The LU’s for the terminal relays must specify logmode DLOGPCNE.

Note 2
    The MODVIRT phase must be placed in an executable library (VSE) or in a LOADLIB (MVS, VM) defined to VTAM before the application major node can be activated.
\end{sphinxVerbatim}

\index{X25 AntiPCNE line@\spxentry{X25 AntiPCNE line}!Add or changing LU Names@\spxentry{Add or changing LU Names}}\index{Add or changing LU Names@\spxentry{Add or changing LU Names}!X25 AntiPCNE line@\spxentry{X25 AntiPCNE line}}\ignorespaces 

\subsection{Add or changing AntiPCNE LU names}
\label{\detokenize{connectivity_guide:add-or-changing-antipcne-lu-names}}\label{\detokenize{connectivity_guide:index-86}}
From VIRTEL version 4.28 onwards, it is possible to add a new terminal to an AntiPCNE line, or to change the relay LU name in an existing terminal, without stopping and restarting VIRTEL.

\sphinxstylestrong{The procedure for adding a new AntiPCNE terminal is as follows:}
\begin{enumerate}
\def\theenumi{\arabic{enumi}}
\def\labelenumi{\theenumi .}
\makeatletter\def\p@enumii{\p@enumi \theenumi .}\makeatother
\item {} 
For an outbound terminal, add a new terminal definition by pressing {[}PF12{]} at the List of Terminals screen (position the cursor on an existing terminal if desired to copy its definition). Specify the new terminal name and LU name in the “Terminal” and “Relay” fields, and specify “Terminal type 3” “Compression 0” and “Possible Calls 1”. Then press {[}Enter{]} to add the new definition. While still in the Terminal Detail Definition screen, press {[}PF12{]} to define a new external server with the same name as the relay. Fill in the outbound   call parameters and press {[}Enter{]} to add the new definition.

\item {} 
For an inbound terminal, add a new terminal definition as above but with “Possible Calls 2”. Specify either an LU name or the name of a logical pool in the “Relay” field. If using a logical pool, also add a new terminal definition to the logical pool specifying the LU name in the “Relay” field, and add a rule to the XOT line to allocate incoming calls to this LU.

\item {} 
Define the new LU name as an APPL statement in a VTAM application major node and activate it.

\item {} 
Use the VIRTEL LINE START command to activate the new terminal(s) on the AntiPCNE line. For example:

\end{enumerate}
\begin{description}
\item[{::}] \leavevmode
F VIRTEL,LINE=P-PCNE1,START

\end{description}

\sphinxstylestrong{The procedure for changing the LU name of an existing AntiPCNE terminal is as follows:}
\begin{enumerate}
\def\theenumi{\arabic{enumi}}
\def\labelenumi{\theenumi .}
\makeatletter\def\p@enumii{\p@enumi \theenumi .}\makeatother
\item {} 
Enter the new LU name in the “Relay” field of the Terminal Detail Definition screen for the terminal or logical pool concerned, and press {[}PF1{]} to record the change.

\item {} 
For an outbound terminal, copy the existing external server definition for the old LU name, renaming it using the new LU name. For an inbound terminal, go to the XOT line definition and alter the rule (if any) which specifies the old LU name in its “Parameter” field, replacing the old LU name by the new LU name, and press {[}PF1{]}.

\item {} 
Inactivate the existing VTAM LU.

\item {} 
Define the new LU name as an APPL statement in a VTAM application major node and activate it.

\item {} 
Use the VIRTEL LINE START command to reactivate the changed terminal(s) on the AntiPCNE line. For example: \sphinxstylestrong{F VIRTEL,LINE=P-PCNE1,START}

\end{enumerate}

\index{X25 AntiPCNE line@\spxentry{X25 AntiPCNE line}!Support of non GATE terminals@\spxentry{Support of non GATE terminals}}\index{Support of non GATE terminals@\spxentry{Support of non GATE terminals}!X25 AntiPCNE line@\spxentry{X25 AntiPCNE line}}\ignorespaces 

\subsection{Support of X25 non GATE terminals}
\label{\detokenize{connectivity_guide:support-of-x25-non-gate-terminals}}\label{\detokenize{connectivity_guide:index-87}}
Support for incoming connections via an X25 non GATE line still exists. This type of connection does not require a line definition in VIRTEL. All that is needed is to create a series of terminals using the Terminal Management sub- application. Each terminal is defined as type 1 compression 2 and is associated with an application relay.

..note:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{This} \PYG{n}{mode} \PYG{n}{allows} \PYG{n}{only} \PYG{n}{incoming} \PYG{n}{calls}\PYG{p}{,} \PYG{k}{with} \PYG{n}{no} \PYG{n}{facility} \PYG{k}{for} \PYG{n}{call} \PYG{n}{routing}\PYG{o}{.}
\end{sphinxVerbatim}

\index{X25 AntiPCNE line@\spxentry{X25 AntiPCNE line}!VTAM Terminal Definitions for X25 Non Gate terminals.@\spxentry{VTAM Terminal Definitions for X25 Non Gate terminals.}}\index{VTAM Terminal Definitions for X25 Non Gate terminals.@\spxentry{VTAM Terminal Definitions for X25 Non Gate terminals.}!X25 AntiPCNE line@\spxentry{X25 AntiPCNE line}}\ignorespaces 

\subsection{VTAM definitions for X25 non GATE terminals}
\label{\detokenize{connectivity_guide:vtam-definitions-for-x25-non-gate-terminals}}\label{\detokenize{connectivity_guide:index-88}}
Each Minitel or PC which is to log on to VIRTEL must be defined in a VTAM switched major node as described in {\hyperref[\detokenize{connectivity_guide:v460cn-x25gateline}]{\sphinxcrossref{\DUrole{std,std-ref}{“Definition of an X25 GATE Non Fast-Connect line”}}}}.

\index{X25 AntiPCNE line@\spxentry{X25 AntiPCNE line}!NCP/NPSI definitions for X25 Non Gate terminals@\spxentry{NCP/NPSI definitions for X25 Non Gate terminals}}\index{NCP/NPSI definitions for X25 Non Gate terminals@\spxentry{NCP/NPSI definitions for X25 Non Gate terminals}!X25 AntiPCNE line@\spxentry{X25 AntiPCNE line}}\ignorespaces 

\subsection{NCP/NPSI parameters for X25 non GATE terminals}
\label{\detokenize{connectivity_guide:ncp-npsi-parameters-for-x25-non-gate-terminals}}\label{\detokenize{connectivity_guide:index-89}}
The information presented in the section “Definition of an X25 GATE Non Fast-Connect line” applies here with the following addition:

\sphinxstylestrong{Macro X25.MCH}
\begin{description}
\item[{LLCLIST}] \leavevmode
Must contain the value LLC5.

\end{description}

\index{Virtel Rules@\spxentry{Virtel Rules}}\ignorespaces 

\chapter{Virtel Rules}
\label{\detokenize{connectivity_guide:virtel-rules}}\label{\detokenize{connectivity_guide:v460cn-virtelrules}}\label{\detokenize{connectivity_guide:index-90}}

\section{Introduction}
\label{\detokenize{connectivity_guide:id43}}
Each Virtel line can have a set of rules which allow the selection of an entry point for each incoming call according to the characteristics of the call and the rule criteria. Rules are processed in alphanumeric order of name, so it is important that the name you choose gaurantees order of the rule processing. As sonn as a match is found within the definied rule criteria the designated entry point will be assigned to the caller. Rules are useful to force or nail Virtel Relay LU names or to establish different application lists depending on the incoming IP address. The last rule should be the “default” rule which is used to catch callers that didn’t match with previous rules. If no default rule is present then the caller will drop through the rule processing and the connection will be closed. See {\hyperref[\detokenize{connectivity_guide:v460cn-forceluname}]{\sphinxcrossref{\DUrole{std,std-ref}{“Controlling LUNames”}}}}) for examples on how to define and use Virtel Rules to control LU names.

\index{Virtel Rules@\spxentry{Virtel Rules}!Summary Display@\spxentry{Summary Display}}\index{Summary Display@\spxentry{Summary Display}!Virtel Rules@\spxentry{Virtel Rules}}\ignorespaces 

\subsection{Summary Display}
\label{\detokenize{connectivity_guide:index-91}}\label{\detokenize{connectivity_guide:id44}}
Press {[}PF5{]} at the line detail definition screen to display the summary list of rules associated with the line:

\sphinxincludegraphics{{image58}.png}
\sphinxstyleemphasis{Rule Summary Display}

\sphinxstylestrong{Field Contents}
\begin{description}
\item[{Name}] \leavevmode
The name of the rule. Rules associated with a line are processed in alphanumeric order.

\item[{Status}] \leavevmode
Indicates whether the rule is ACTIVE or INACTIVE. To change the status, display the detailed definition of the rule {[}PF12{]}, then press {[}PF4{]} to activate, or {[}PF5{]} to inactivate.

\item[{Description}] \leavevmode
Free-form description of the rule.

\item[{Entry Point}] \leavevmode
Name of the entry point which will be assigned to incoming calls whose characteristics match this rule.

\end{description}


\subsubsection{Navigation}
\label{\detokenize{connectivity_guide:id45}}\begin{description}
\item[{Search}] \leavevmode
Type the name (or partial name) of the required entity on the first line under the heading “Name”, then press {[}Enter{]}.

\item[{{[}PF6{]}}] \leavevmode
Return to the first page of the list.

\item[{{[}PF7{]}}] \leavevmode
Display the previous page.

\item[{{[}PF8{]}}] \leavevmode
Display the next page.

\end{description}

\sphinxstylestrong{Modifying a rule} - Pressing {[}PF12{]} at the Rules screen displays the rule detail definition screen. Type the desired modifications into the appropriate fields then press {[}PF1{]}. Multiple definitions can be modified at the same time. If the modification affects a field not displayed on the summary screen, first position the cursor on the definition concerned, then press {[}PF12{]} to access the definition detail screen.
\begin{description}
\item[{..warning::}] \leavevmode
Modifications are not recognized until you press the {[}PF1{]} key. Certain modifications require a restart of the VIRTEL system.

\end{description}

\sphinxstylestrong{Deleting a rule} - In the summary screen position the cursor under the name of the entity to be deleted, then press {[}PF2{]}. The line associated with the entity to be deleted then appears highlighted, accompanied by the message CONFIRM DELETE. Then press {[}PF2{]} again to confirm deletion. The message DELETE OK confirms successful completion of the operation. Repeat the procedure for each entity to be deleted.

\sphinxstylestrong{Adding a rule} - To add a new definition, press {[}PF12{]} at the summary screen, either with the cursor on an existing definition to copy its attributes, or on an empty line to create a new definition from a blank screen.

\index{Virtel Rules@\spxentry{Virtel Rules}!Detail Display@\spxentry{Detail Display}}\index{Detail Display@\spxentry{Detail Display}!Virtel Rules@\spxentry{Virtel Rules}}\ignorespaces 

\subsection{Detail Display}
\label{\detokenize{connectivity_guide:index-92}}\label{\detokenize{connectivity_guide:id46}}
To display or update the detailed definition of an entity, place the cursor on the name of the entity within the summary display and press {[}PF12{]}. The detail definition screen will then be displayed.

\sphinxincludegraphics{{image59}.png}
\sphinxstyleemphasis{Rule detail definition screen}

\index{Virtel Rules@\spxentry{Virtel Rules}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!Virtel Rules@\spxentry{Virtel Rules}}\ignorespaces 

\subsection{Parameters}
\label{\detokenize{connectivity_guide:index-93}}\label{\detokenize{connectivity_guide:id47}}\begin{description}
\item[{Name}] \leavevmode
The name of the rule. This name must be unique across all rules in the system. The rules associated with a line are processed in alphanumeric order of this name. The rule name thus determines the priority of the rule within the line.

\item[{Status}] \leavevmode
Indicates whether the rule is ACTIVE or INACTIVE. To activate a rule, press {[}PF4{]}. To inactivate a rule, press {[}PF5{]}.

\item[{Description}] \leavevmode
Description of the rule. This information is not used.

\item[{Entry point}] \leavevmode
The name of the entry point which will be assigned to the incoming call if this rule matches the call characteristics.

\end{description}

\begin{sphinxadmonition}{note}{Note:}
The value \$COOKIE\$ in the “Entry Point” field has a special meaning. This value is meaningful only in rules attached to an HTTP line. If a rule with this value is found, and if the HTTP request contains a cookie named VirtelRef, then the value of the cookie is used to identify the user, and VIRTEL switches to the rule set associated with the user, instead of processing the remainder of the rules attached to the line. If the HTTP request does not contain a cookie named VirtelRef, VIRTEL ignores this rule, and continues with the next rule attached to the line. See “Correspondent management” in the VIRTEL Web Access Guide.
\end{sphinxadmonition}
\begin{description}
\item[{Parameter}] \leavevmode
(optional) A parameter which will be associated with incoming calls matched by this rule. This parameter can be used in the following cases:
\begin{itemize}
\item {} 
the value of the parameter can be retrieved in a connection script via the ‘\&1’ variable (see “Connection \textendash{} Disconnection Scripts”)

\item {} 
For an XOT line: the parameter can specify the LU name for an incoming PCNE call. The terminals on the AntiPCNE line to which the call is routed must be defined in a logical pool (see “Terminals on an AntiPCNE line”)

\item {} 
For an HTTP line: the parameter can specify the LU name to be used as the VTAM relay for an incoming HTTP call. The relay terminals on the HTTP line must be defined in a logical pool (see “Terminals on an HTTP line”).

\end{itemize}

\end{description}

An asterisk at the end of the LU name signifies that the parameter is a prefix rather than a specific value.

For an HTTP line: The value \$URL\$ in the “Parameter” field indicates that the actual parameter value will be obtained
from the userdata field of the URL (see “VIRTEL URL formats” in the VIRTEL Web Access Guide).

\begin{sphinxadmonition}{note}{Note:}
The value \$COOKIE\$ in the “Parameter” field has a special meaning. This value is meaningful only in rules attached to an HTTP line. If a rule with this value is found, and if the HTTP request contains a cookie named VirtelRef, and the value of the cookie matches a record in the VIRTEL correspondent file (see “Correspondent management” in the VIRTEL Web Access Guide), then VIRTEL selects this rule and uses the VTAM LU name contained in the correspondent record as the VTAM relay for the incoming HTTP call. If the HTTP request does not contain a cookie named VirtelRef, or if the value of the cookie does not match any user in the correspondent file, then VIRTEL ignores this rule, and continues with the next rule attached to the line.
\end{sphinxadmonition}
\begin{description}
\item[{Trace}] \leavevmode
Trace indicator for incoming calls which match this rule.
\begin{description}
\item[{Blank}] \leavevmode
No trace.

\item[{1}] \leavevmode
Trace X25 commands.

\item[{2}] \leavevmode
Trace X25 data.

\item[{12}] \leavevmode
Trace X25 commands + data.

\item[{123}] \leavevmode
Where the call is rerouted via an external server, the trace will also be applied on the line used for the outgoing call.

\end{description}

\end{description}

\begin{sphinxadmonition}{note}{Note:}
Each of the following fields is preceded by a comparison indicator. The comparison indicator can be 0 (ignore), 1 (must equal), 2 (must not equal), 3 (must begin with), 4 (must not begin with), 5 (must end with), or 6 (must not end with). An incoming call matches this rule if all of the fields (except those whose comparison indicator is 0) match the corresponding characteristic of the call. A rule with all its comparison indicators set to 0 is an unconditional rule, which matches all incoming calls not matched by a higher priority rule.
\end{sphinxadmonition}
\begin{description}
\item[{IP Subnet}] \leavevmode
For an HTTP or SMTP line: The originating IP address or subnet address.

\item[{Mask}] \leavevmode
Indicates which bit positions in the IP address form the subnet address. For example, IP address 192.168.210.0 combined with mask 255.255.255.0 corresponds to addresses 192.168.210.0 through 192.168.210.255.

\item[{HTTP Host}] \leavevmode
For an HTTP line: The host name (possibly followed by a port number) supplied by the browser in the Host: HTTP header when connecting to VIRTEL.

For example, www.virtel.com:21000

In the case of requests forwarded by a reverse proxy (bastion host), the rule compares the value of this field with the X-Forwarded-Host: header (if present) instead of the Host: header.

For an SMTP line: The recipient’s email address.

\item[{eMail}] \leavevmode
For an SMTP line: The sender’s email address.

\item[{Calling DTE}] \leavevmode
For an X25 line: The calling number specified in the X25 call packet.

For an HTTP line: The IP address of the reverse proxy (bastion host) which forwarded the request on behalf of the originating user. If this field is present in the rule, and matches the source IP address of the HTTP request, then a “forwarding header” (see below) in the HTTP request is considered to contain the real originating IP address. This real originating IP address will be the one used for testing against the “IP Subnet” and “Mask” fields (if any) in the rule. If the rule matches, then message VIRHT56I will be issued and the call will henceforth be considered to have originated from the real originating IP address for the purposes of console messages and VIRLOG.

VIRTEL recognizes the following “forwarding headers” (in order of priority):
\begin{itemize}
\item {} 
iv-remote-address:

\item {} 
X-Forwarded-For:

\end{itemize}

\begin{sphinxadmonition}{note}{Note:}
When the “Calling DTE” field contains an IP address, leading zeroes must be included where necessary. For example, 192.168.001.020
\end{sphinxadmonition}

Reverse proxy addresses may also be specified in the HTFORWD parameter of the VIRTCT (see “Parameters of the VIRTCT” in the VIRTEL Installation Guide).

\item[{Called}] \leavevmode
For an X25 line: The called number specified in the X25 call packet. CUD0 (Hex)For an X25 line: Up to 8 hexadecimal digits representing the first 4 bytes of the CUD field of the X25 call packet. For example, 01000000 (PAD), C0123450 (PCNE), C4 (GATE).

\item[{User Data}] \leavevmode
For an X25 line: The remaining part of the CUD (call user data) in the X25 call packet. The data in this field is expressed in character format. It is compared with the ASCII data starting at the 5th byte of the CUD field in the X25 call packet. VIRTEL performs the necessary ASCII-EBCDIC translation prior to comparing the contents of this field. To test the first 4 bytes of the CUD, use the CUD0 field in the rule instead. Example: a call packet whose “Call User Data” field contains: C0123450 41424331 matches a rule which specifies CUD0=C0123450 and UserData=ABC1. For an HTTP line: The contents of the userdata field of the URL (see “VIRTEL URL formats” in the VIRTEL Web Access Guide).

\end{description}

\begin{sphinxadmonition}{note}{Note:}
The following fields indicate the time periods during which this rule is active. The comparison indicator can be 0, 1, or 2.
\end{sphinxadmonition}
\begin{description}
\item[{Days}] \leavevmode
The days of the week on which this rule applies. Applicable days are marked by an ‘X’.

\item[{Start Time / End Time}] \leavevmode
Indicates the period of operation of this rule for each applicable day.

\end{description}

\index{Terminals@\spxentry{Terminals}}\ignorespaces 

\chapter{Terminals}
\label{\detokenize{connectivity_guide:terminals}}\label{\detokenize{connectivity_guide:index-94}}

\section{Introduction}
\label{\detokenize{connectivity_guide:id48}}
All terminals, whether physical or virtual, using the services of VIRTEL must be referenced. This chapter describes the group of functions associated with the management of the terminals as well as their existing relationship to other administration functions, for example, management of lines or entry points.

\index{Terminals@\spxentry{Terminals}!Terminal Management Sub-Application@\spxentry{Terminal Management Sub-Application}}\index{Terminal Management Sub-Application@\spxentry{Terminal Management Sub-Application}!Terminals@\spxentry{Terminals}}\ignorespaces 

\subsection{Terminal Management Sub-Application}
\label{\detokenize{connectivity_guide:terminal-management-sub-application}}\label{\detokenize{connectivity_guide:index-95}}
This sub-application enables the definition of VIRTEL terminals either in the form of a pool, or individually. When the sub-application is started, it first presents a summary of existing terminal definitions presented in alphanumeric order.

The terminal management sub-application is accessed by pressing {[}PF2{]} in the Configuration Menu, or {[}PF5{]} in the Sub Application Menu, or from the Multi-session Menu via a transaction referencing module VIR0023. This sub-application allows for the management of the parameters associated with each terminal under control of VIRTEL. This subapplication
is also accessible by pressing {[}PF4{]} from the line management sub-application.

\index{Terminal Sub-Application@\spxentry{Terminal Sub-Application}!Security@\spxentry{Security}}\index{Security@\spxentry{Security}!Terminal Sub-Application@\spxentry{Terminal Sub-Application}}\ignorespaces 

\subsection{Security}
\label{\detokenize{connectivity_guide:index-96}}\label{\detokenize{connectivity_guide:id49}}
When security is active, access to the terminal management menu from the Configuration Menu or the Sub-Application Menu is controlled by the resource \$\$TERM\$\$. When this menu is accessed via a transaction, the rules governing the security management of transactions will apply. Security management is described in chapter 4 of the VIRTEL Technical Documentation.

\index{Terminal Management Sub-Application@\spxentry{Terminal Management Sub-Application}!Summary Display@\spxentry{Summary Display}}\index{Summary Display@\spxentry{Summary Display}!Terminal Management Sub-Application@\spxentry{Terminal Management Sub-Application}}\ignorespaces 

\subsection{Summary Display}
\label{\detokenize{connectivity_guide:index-97}}\label{\detokenize{connectivity_guide:id50}}
The first screen displayed by the terminal management sub-application shows a summary of existing definitions in alphanumeric order. A complete description of each field is given in the following paragraphs. Place the cursor under an entry a press {[}PF12{]} to display the terminal details.

\sphinxincludegraphics{{image67}.png}
\sphinxstyleemphasis{Terminal Summary Display}

\index{Terminal Management Sub-Application@\spxentry{Terminal Management Sub-Application}!Navigation@\spxentry{Navigation}}\index{Navigation@\spxentry{Navigation}!Terminal Management Sub-Application@\spxentry{Terminal Management Sub-Application}}\ignorespaces 

\subsubsection{Navigation}
\label{\detokenize{connectivity_guide:index-98}}\label{\detokenize{connectivity_guide:id51}}
In browse, alter, or delete mode, it is possible to scroll the list of terminals under the control of VIRTEL.
\begin{description}
\item[{Search}] \leavevmode
Type the name (or partial name) of the required entity on the first line under the heading “Terminal”, then press {[}Enter{]}.

\item[{{[}PF6{]}}] \leavevmode
Return to the first page of the list.

\item[{{[}PF7{]}}] \leavevmode
Display the previous page.

\item[{{[}PF8{]}}] \leavevmode
Display the next page.

\end{description}

\sphinxstylestrong{Modifying a terminal entry} - Pressing {[}PF12{]} at the summary screen displays the Terminal Detail Definition screen, which allows creation of a new terminal definition, or modification of an existing definition. Type the desired modifications into the appropriate fields then press {[}PF1{]}. Multiple definitions can be modified at the same time. If the modification affects a field not displayed on the summary screen, first position the cursor on the definition concerned, then press {[}PF12{]} to access the definition detail screen. Modifications are not recognized until you press the {[}PF1{]} key. Certain modifications require a restart of the VIRTEL
system.

\sphinxstylestrong{Adding a terminal entry} - To add a new definition, press {[}PF12{]} at the summary screen, either with the cursor on an existing definition to copy its attributes, or on an empty line to create a new definition.

\sphinxstylestrong{Deleting a terminal entry} - Position the cursor under the name of the entry to be deleted, then press {[}PF2{]}. The line associated with the terminal to be deleted then appears highlighted, accompanied by the message CONFIRM DELETE. Then press {[}PF2{]} again to confirm deletion. The message DELETE OK confirms successful completion of the operation. Repeat the procedure for each entry to be deleted.

\index{Terminal Management Sub-Application@\spxentry{Terminal Management Sub-Application}!Detail Display@\spxentry{Detail Display}}\index{Detail Display@\spxentry{Detail Display}!Terminal Management Sub-Application@\spxentry{Terminal Management Sub-Application}}\ignorespaces 

\subsection{Detail Display}
\label{\detokenize{connectivity_guide:index-99}}\label{\detokenize{connectivity_guide:id52}}
\sphinxincludegraphics{{image68}.png}
\sphinxstyleemphasis{Terminal Definition detail screen}

From within the detail display parameters can be updated.

\index{Terminal Management Sub-Application@\spxentry{Terminal Management Sub-Application}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!Terminal Management Sub-Application@\spxentry{Terminal Management Sub-Application}}\ignorespaces 

\subsection{Parameters}
\label{\detokenize{connectivity_guide:index-100}}\label{\detokenize{connectivity_guide:id53}}\begin{description}
\item[{Terminal}] \leavevmode
Maximum of 8 characters containing:
\begin{quote}
\begin{itemize}
\item {} 
For a 3270 terminal which logs on to the VIRTEL application: The VTAM-defined LU name of the terminal

\item {} 
For an LU which connects to VIRTEL via a GATE or FASTC line: The NPSI-defined LU name, whose prefix associates the terminal with the VIRTEL GATE or FASTC line

\item {} 
For all other types of terminal: An internal name whose prefix associates the terminal with a VIRTEL line.

\item {} 
For a logical pool: An internal name of no significance.

\item {} 
For a physical pool: A sequence of 8 characters starting with “?” (see “Physical pool of terminals”).

\end{itemize}

If the “Repeat” field contains a value greater than 1, then the terminal name must contain a numeric portion which will be incremented for each occurrence of the terminal (see “Repeat” parameter below).
\end{quote}

\item[{Relay}] \leavevmode
(Optional) The name of the relay LU associated with this terminal. The relay name corresponds to a VTAM APPL statement. The same relay cannot be shared between multiple definitions.

The “Relay” field may alternatively contain a name in the form *POOLNAM which refers to the logical pool which has the same name *POOLNAM specified in its “*Pool name” field. In this case, a relay will be assigned dynamically from the specified logical pool each time a relay is required. See “logical pool of relays”. Certain terminals (those associated with an AntiPCNE line) require the definition of an external server whose name is equal to the relay name of the terminal. In this case, you can press {[}PF12{]} to display the external server detail definition. If the “Repeat” field contains a value greater than 1, then the relay name, if supplied, must contain a numeric portion which will be incremented for each occurrence of the terminal (see “Repeat” parameter below), or it must refer to a logical pool. If SYSPLUS=YES is specified (see “Parameters of the VIRTCT” in the VIRTEL Installation Guide), any ‘+’ character in the relay name will be replaced by the value of the SYSCLONE system symbol. SYSCLONE is specified in the IEASYMxx member of SYS1.PARMLIB, and identifies the particular LPAR that VIRTEL is running on in a sysplex environment.

Terminal Definition records in the VIRARBO file whose repeat count is greater than 1 may now contain special pattern characters in the “terminal name”, “relay”, and “2nd relay” fields. Multiple instances of the terminal will be generated at Virtel startup by incrementing the pattern characters according to the rules shown below. If a name contains no pattern characters then Virtel will increment the rightmost numeric portion of the name, as before.

\end{description}
\phantomsection\label{\detokenize{connectivity_guide:v460cn-patterncharacters}}
\index{Terminal Management Sub-Application@\spxentry{Terminal Management Sub-Application}!Pattern Characters@\spxentry{Pattern Characters}}\index{Pattern Characters@\spxentry{Pattern Characters}!Terminal Management Sub-Application@\spxentry{Terminal Management Sub-Application}}\ignorespaces 
Pattern characters:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZgt{}  Alphabetic A\PYGZhy{}Z
?  Alphanumeric A\PYGZhy{}Z, 0\PYGZhy{}9, \PYGZdl{}, \PYGZsh{}, @
\PYGZpc{}  Hexadecimal digits 0\PYGZhy{}9, A\PYGZhy{}F
\PYGZlt{}  Decimal digits 0\PYGZhy{}9
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{Note:}
Different combinations of pattern characters may be specified within a single field, for example RH\textgreater{}VT?\%\% the terminal name and relay names do not have to follow the same pattern (see example below). The ‘?’ character cannot be used in the first character position of the terminal name field because this indicates a physical pool
\end{sphinxadmonition}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{Example}\PYG{p}{:}\PYG{o}{\PYGZhy{}}
\PYG{n}{Terminal} \PYG{n}{name}    \PYG{n}{W2HVT000}
\PYG{n}{Relay} \PYG{n}{name}       \PYG{n}{RHTERM}\PYG{o}{\PYGZpc{}}\PYG{o}{\PYGZpc{}}
\PYG{n}{Relay2} \PYG{n}{name}      \PYG{n}{RH}\PYG{o}{\PYGZgt{}}\PYG{n}{X}\PYG{o}{\PYGZlt{}}\PYG{n}{Z00}
\PYG{n}{Repeat} \PYG{n}{count}     \PYG{l+m+mi}{256}
\end{sphinxVerbatim}

Would generate terminals W2HVT000-W2HVT255 with relay names RHTERM00-RHTERMFF and relay2 names RHAX0Z00-RHIX5Z00
\begin{description}
\item[{*Pool name}] \leavevmode
In the definition of a logical pool, this field contains the name of the pool. A logical pool name is a 7 character name preceded by an asterisk, in the form *POOLNAM, which matches the logical pool name specified in the “Relay” field of all terminals which use the logical pool. See “logical pool of relays”. For regular terminals, this field must be blank.

\item[{Description}] \leavevmode
Free-format field.

\item[{Entry Point}] \leavevmode
An optional field which may contains the name of the associated entry point. For details of how VIRTEL uses this field, see “Choosing the Entry Point”. It is only useful to specify the entry point at the terminal level in the following cases:
\begin{itemize}
\item {} 
3270 terminals

\item {} 
Asynchronous terminals on X25 non-GATE lines.Since this type of terminal is not associated with a VIRTEL line, it may be useful to specify a default entry point at the terminal level. This overrides the default defined by the DEFENTR parameter in the VIRTCT.

\item {} 
Terminals on VIRNT or VIRKIX lines in APPC mode. If the link between the NT or CICS system and VIRTEL is of type APPC2, the terminal must specify entry point \$X25\$ (for a connection with VIRNT) or VAPI (for a connection with VIRKIX). It is not necessary to create entry point definitions for these special names, as they are entry points implicitly defined by VIRTEL.

\item {} 
Type P or S printer terminals on HTTP lines.This type of printer will be automatically connected to the host application defined by the first transaction under the specified entry point.

\end{itemize}

In all other cases, the “Entry Point” field in the terminal definition should be blank, as the preferred method of defining the entry point is by the rules of the line (see “Rules”). Rules have the advantage that they can be
altered dynamically, while allowing more flexibility in the selection of the entry point according to the characteristics of the incoming call.

\item[{2nd Relay}] \leavevmode
Contains the name of a relay associated with an virtual printer simulated by VIRTEL. Each of these relays corresponds to an APPL statement known to VTAM. This virtual printer must be defined in VIRTEL in the form of a terminal of type
1, 2, P, or S.

This field must only be completed for type 1 or type 3 terminals.

If the “Repeat” field contains a value greater than 1, then the 2nd relay name, if supplied, must contain a numeric portion which will be incremented for each occurrence of the terminal (see “Repeat” parameter below).

\item[{Terminal type}] \leavevmode
Indicates the type of terminal. Permissible values are:
\begin{description}
\item[{1}] \leavevmode
for an asynchronous Non Fast-Connect terminal (Minitel, PC or VT) or a pseudo-printer of type SCS (LUTYPE1)

\item[{2}] \leavevmode
for a 3270 synchronous terminal (LUTYPE2) or a pseudo-printer of type 3270 (LUTYPE3)

\item[{3}] \leavevmode
for all terminals other than type 1 and 2

\item[{P}] \leavevmode
for a virtual printer of type 3270 (LUTYPE3) with auto-connection to the application defined by the “Entry Point” field

\item[{S}] \leavevmode
for a virtual printer of type SCS (LUTYPE1) with auto-connection to the application defined by the “Entry Point” field

\end{description}

The concept of an APPC connection now being at the line level, definitions of type 6 no longer exist at the terminal
level.

\item[{Compression}] \leavevmode
Indicates the optimization mode applicable during transmission of 3270 messages towards the terminal. Permissible values are:
\begin{description}
\item[{0}] \leavevmode
no optimisation.
No message compression is performed by VIRTEL. This value is usually used at sites which only use VIRTEL Multi-Session or file-transfer terminals. This value is only allowed for type 2 terminals.

\item[{1}] \leavevmode
simple message optimisation.
Replacement of repeated characters by Repeat-to-Address orders, allowing a throughput gain of approximately 30\%. This value could for example be used for local 3270 terminals.
This value is only allowed for type 2 terminals.

\item[{2}] \leavevmode
simple message optimisation + logical compression.
Replacement of repeated characters by Repeat-to-Address orders, and VIRTEL only sends to the terminal those characters which have changed compared with the contents of the 3270 buffer. The management of the MDT bits allows a further
optimization for inbound data, i.e. in the terminal to host direction. This level of compression allows a gain of 40\% to 60 \%. This value is mandatory for type 1 and type 3 terminals.

\item[{3}] \leavevmode
message optimisation + logical compression + learning of screen types. (VIRTEL/PC only)
All messages destined for these terminals are subject to special processing. VIRTEL determines gradually from their frequency of use which the most commonly used screen images and automatically creates a “screen type” referenced by number and stored at the host. When a message is to be sent to a PC type terminal, VIRTEL performs a lookup to determine whether the message to be sent can be associated with a “screen type”. If it can, then it sends a datastream representing the difference between the screen type and the final desired result. The PC automatically learns the “screen types” which it must use.

\end{description}

This level of compression allows a reduction of approximately 80\% of the message volume. It can for example be used for PC’s connected at 1200 or 2400 Bps, thereby allowing response times approaching those of a 9600 Bps synchronous line.

\begin{sphinxadmonition}{note}{Note:}
This value can only be used for VIRTEL/PC connections. It is however possible to assign this value to type 2 color terminals in order to facilitate the learning of “screen types”.
\end{sphinxadmonition}

\item[{Possible calls}] \leavevmode
Determines which calls can be made on this terminal. Depending on the associated line, certain values are meaningless. For example, the value 2 (outgoing calls) is not appropriate for a definition associated with an HTTP line since outgoing calls are impossible on this type of line.

In addition to being used to authorize incoming, outgoing, or both incoming and outgoing calls, this parameter also has an effect during VIRTEL startup. Any terminal which has “Possible calls” set to 0 will not be activated at VIRTEL startup. Also note the“Possible calls” field in the definition of the associated line.

\item[{Write stats to}] \leavevmode
Indicates the recording of statistics for the terminal entry.
\begin{description}
\item[{Blank}] \leavevmode
No statistics.

\item[{1}] \leavevmode
Recording in VIRSTAT (classic format).

\item[{2}] \leavevmode
Recording in VIRLOG.

\item[{4}] \leavevmode
Recording in VIRSTAT (alternate format for X25).

\item[{5}] \leavevmode
Recording in VIRSTAT (web format, alphanumeric).

\item[{6}] \leavevmode
Recording in VIRSTAT (web format, with binary fields for the PRTSTATW program).

\end{description}

More than one value may be specified. For example:
\begin{description}
\item[{12}] \leavevmode
Recording in both VIRSTAT (classic format) and VIRLOG.

\item[{24}] \leavevmode
Recording in both VIRLOG and VIRSTAT (alternate format).

\item[{124}] \leavevmode
Recording in VIRSTAT (classic and alternate formats) and VIRLOG.

\end{description}

VIRSTAT classic format recording is intended for use with Minitel calls on terminals associated with NPSI lines (Gate or Fast Connect). VIRSTAT alternate format recording may be requested for terminals associated with any X25 line (GATE, FASTC, XOT). Either of the two VIRSTAT web formats may be requested for terminals associated with HTTP lines.VIRLOG recording may be requested for terminals associated with X25 lines (GATE, FASTC, XOT) and HTTP lines. For terminals associated with all other line types (including /GATE, /PCNE, and /FASTC) the statistics field should be left blank. Refer to the “Audit and Performance” chapter of the VIRTEL Messages and Operations Guide for details of the VIRSTAT and VIRLOG record formats.

\item[{Repeat}] \leavevmode
Up to 4 decimal digits indicating the number of desired repetitions of this terminal definition. See “Repeated fixed entries” for more details and examples.
A repeat count of blank, zero, or 1 indicates definition of a single terminal.

\end{description}

\index{Entry Points@\spxentry{Entry Points}}\ignorespaces 

\chapter{Entry Points}
\label{\detokenize{connectivity_guide:entry-points}}\label{\detokenize{connectivity_guide:index-102}}

\section{Introduction}
\label{\detokenize{connectivity_guide:id54}}
Entry points define the session context for a terminal or for certain types of lines. A terminal connecting to VIRTEL must connect via an entry point. This section describes the functions associated with entry point management, as well as the correlation with other elements of VIRTEL system administration, for example, line and terminal management.

An entry point is a named entity that groups certain information designed to authorise, personalise and protect access to the host site. Entry points define the type of emulation required, the type of security control, which sign-on screen must be sent to the user at log on time, what type of Multi-session menu must be used and what applications are to be made available to the user.

\index{Entry Points@\spxentry{Entry Points}!Entry Point Management Sub-Application@\spxentry{Entry Point Management Sub-Application}}\index{Entry Point Management Sub-Application@\spxentry{Entry Point Management Sub-Application}!Entry Points@\spxentry{Entry Points}}\ignorespaces 

\subsection{Entry Point Management Sub-Application}
\label{\detokenize{connectivity_guide:entry-point-management-sub-application}}\label{\detokenize{connectivity_guide:index-103}}
The Entry Point Management sub-application is accessed by pressing {[}PF3{]} in the Configuration Menu, or {[}PF13{]} in the Sub-Application Menu, or from the Multi-Session Menu via a transaction referencing module VIR0044. This subapplication allows management of the parameters associated with each entry point.

\index{Entry Point Management Sub-Application@\spxentry{Entry Point Management Sub-Application}!Security@\spxentry{Security}}\index{Security@\spxentry{Security}!Entry Point Management Sub-Application@\spxentry{Entry Point Management Sub-Application}}\ignorespaces 

\subsection{Security}
\label{\detokenize{connectivity_guide:index-104}}\label{\detokenize{connectivity_guide:id55}}
When security is active, access to entry point management from the Configuration Menu or the Sub-Application Menu is controlled by the resource \$\$GLOG\$\$. When accessed by a transaction, the rules governing the management of transaction security apply. Security management is described in chapter 4 of the VIRTEL Technical Documentation.

\index{Entry Point Management Sub-Application@\spxentry{Entry Point Management Sub-Application}!Selection an Entry Point@\spxentry{Selection an Entry Point}}\index{Selection an Entry Point@\spxentry{Selection an Entry Point}!Entry Point Management Sub-Application@\spxentry{Entry Point Management Sub-Application}}\ignorespaces 

\subsection{Selecting an Entry Point}
\label{\detokenize{connectivity_guide:selecting-an-entry-point}}\label{\detokenize{connectivity_guide:index-105}}
The entry point used in the connection from a terminal may be specified in various ways:


\subsubsection{3270 Terminals}
\label{\detokenize{connectivity_guide:id56}}
The entry point to be used for a connection from a 3270 terminal can be specified:
- In the DATA parameter of a logon sequence. For example: LOGON APPLID(VIRTEL) DATA(PE-0001)
- In the VIRTEL terminal definition (see “Parameters Of The Terminal”).
- If no entry point is specified, the default entry point is the first value of the DEFENTR parameter in the VIRTCT. If this value does not exist, the terminal receives a signon screen compatible with the original Multi-Session VIRTEL (before version 3.0).


\subsubsection{Asynchronous terminals on X25 non-GATE lines}
\label{\detokenize{connectivity_guide:asynchronous-terminals-on-x25-non-gate-lines}}
A Minitel connecting to VIRTEL in LLC5 mode uses a VIRTEL terminal not associated with any line (see “Support of X25 non GATE terminals”, page 71). The entry point used for this type of connection can be specified:
- In the X25 call packet. The entry point is specified in the CUD (Call User Data) field of the call packet. The entry point name is in ASCII character format starting at the 5th byte of the CUD field, following the 4-byte protocol identifier.
- In the VIRTEL terminal definition (see “Parameters Of The Terminal”, page 109).
- If no entry point is specified, the default entry point is the second value of the DEFENTR parameter in the VIRTCT. If this value does not exist, the terminal is rejected.


\subsubsection{Incoming calls on X25 lines - GATE, FastC, XOT}
\label{\detokenize{connectivity_guide:incoming-calls-on-x25-lines-gate-fastc-xot}}
The entry point to be used for an X25 connection (GATE, FastConnect, XOT) can be specified:
- By the rules of the line. If one of the rules associated with the line matches the characteristics of the call, the entry point chosen by the rule takes precedence over that specified in the call packet.
- In the X25 call packet. The entry point is specified in the CUD (Call User Data) field of the call packet. The entry point name is in ASCII character format starting at the 5th byte of the CUD field, following the 4-byte protocol identifier.
- A default entry point can be specified in the line definition (see “Line Parameters”, page 11).
- If no entry point is specified, the default entry point is the second value of the DEFENTR parameter in the VIRTCT. If this value does not exist, the call is rejected.


\subsubsection{Incoming calls on HTTP or SMTP lines}
\label{\detokenize{connectivity_guide:incoming-calls-on-http-or-smtp-lines}}
For an incoming call on this type of line, the entry point is chosen:
- By the rules of the line, if a rule exists which matches the characteristics of the request.
- Otherwise the default entry point specified in the definition of the HTTP or SMTP line will be used.


\subsubsection{Outgoing calls from an X25 application via a reverse X25 line - /GATE, /FASTC, or /PCNE}
\label{\detokenize{connectivity_guide:outgoing-calls-from-an-x25-application-via-a-reverse-x25-line-gate-fastc-or-pcne}}
For an outgoing call from an application connected to VIRTEL via this type of line, the entry point is chosen according
to the following procedure. Note that incoming calls (network to application) on this type of line are processed by the
rules attached to the incoming line (X25 GATE, FASTC, XOT) and not by the rules attached to the reverse X25 line.
- The entry point defined in the terminal associated with the reverse X25 line, if specified. This value takes precedence over all other values.
- The entry point chosen by the rules of the reverse X25 line, if a rule matches the characteristics of the outgoing call from the application.
- The entry point specified in the Call User Data of the call packet sent by the application, if present.
- The default entry point defined in the reverse X25 line, if specified.
- If no entry point was specified by any of the preceding steps, the default is the second value of the DEFENTR parameter in the VIRTCT. If this value does not exist, the call is rejected.

\index{Entry Point Sub-Application@\spxentry{Entry Point Sub-Application}!Summary Display@\spxentry{Summary Display}}\index{Summary Display@\spxentry{Summary Display}!Entry Point Sub-Application@\spxentry{Entry Point Sub-Application}}\ignorespaces 

\subsection{Summary Display}
\label{\detokenize{connectivity_guide:index-106}}\label{\detokenize{connectivity_guide:id57}}
The entry point management application manages the entry points and their associated transactions. The first screen displayed shows a summary of existing entry points in alphanumeric order. A complete description of each field is presented in the following section.

\sphinxincludegraphics{{image60}.png}
\sphinxstyleemphasis{Entry Point Summary Display}


\subsubsection{Field Contents}
\label{\detokenize{connectivity_guide:field-contents}}\begin{quote}
\begin{description}
\item[{Name:}] \leavevmode
The name of the entry point.

\item[{Description:}] \leavevmode
Description of the entry point.

\item[{Transaction:}] \leavevmode
Prefix of the names of the transactions associated with this entry point (maximum 6 characters).

\end{description}
\end{quote}

\sphinxstylestrong{Modifying an entry point definition:} - To modify the definition of an entry point, enter the required information in the field then press {[}PF1{]}. Several definitions may be modified simultaneously. If the field you wish to modify does not appear on the summary screen, position the cursor on the entry and press {[}PF12{]} to display the definition detail screen. Modifications do not take effect until you press {[}PF1{]}. Certain modifications, for instance a modification to an entry point used by a line, require a restart of VIRTEL.

\sphinxstylestrong{Deleting an entry point definition:} - To delete a definition, position the cursor on the name of the entry to be deleted and press {[}PF2{]}. The line associated with the entry to be deleted will appear highlighted with the message CONFIRM DELETE. Press {[}PF2{]} again to confirm deletion. The message DELETE OK confirms successful completion of the operation. Repeat the procedure for each entry to be deleted.

\sphinxstylestrong{Adding an entry point definition:} - To add a new definition, press {[}PF12{]} at the summary screen, either with the cursor on an existing definition to copy certain of its attributes, or on an empty line to create a new definition.

\index{Entry Point Management Sub-Application@\spxentry{Entry Point Management Sub-Application}!Transaction list Display@\spxentry{Transaction list Display}}\index{Transaction list Display@\spxentry{Transaction list Display}!Entry Point Management Sub-Application@\spxentry{Entry Point Management Sub-Application}}\ignorespaces 

\subsection{Transaction Display}
\label{\detokenize{connectivity_guide:transaction-display}}\label{\detokenize{connectivity_guide:index-107}}
To access the list of transactions associated with an entry point, position the cursor on the desired entry point and press {[}PF4{]}. The transaction management menu will then appear.

\index{Entry Point Management Sub-Application@\spxentry{Entry Point Management Sub-Application}!Detail Display@\spxentry{Detail Display}}\index{Detail Display@\spxentry{Detail Display}!Entry Point Management Sub-Application@\spxentry{Entry Point Management Sub-Application}}\ignorespaces 

\subsection{Detail Display}
\label{\detokenize{connectivity_guide:index-108}}\label{\detokenize{connectivity_guide:id58}}
To display the details of an entry point, position the cursor on the desired entry point in the summary screen and press {[}PF12{]}.

\sphinxincludegraphics{{image61}.png}
\sphinxstyleemphasis{Entry point detail display}

\index{Entry Point Management Sub-Application@\spxentry{Entry Point Management Sub-Application}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!Entry Point Management Sub-Application@\spxentry{Entry Point Management Sub-Application}}\ignorespaces 

\subsection{Parameters}
\label{\detokenize{connectivity_guide:index-109}}\label{\detokenize{connectivity_guide:id59}}\begin{description}
\item[{Name}] \leavevmode
Represents the name of the entry point as specified in a logon sequence, or in the “Entry point” field of a terminal, line, or rule definition.

\item[{Description}] \leavevmode
Describes the entry point.

\item[{Transactions}] \leavevmode
Indicates the prefix (0 to 6 charaters) of the transactions associated with this entry point.

\item[{Last page}] \leavevmode
This field, which is used only for HTTP connections, indicates the name of the HTML page which will be displayed after the connection with the host application terminates. If blank, then the default page (whose name is equal to the entry point name) will be displayed.

\begin{sphinxadmonition}{note}{Note:}
For Minitel entry points, the “Last page” field is not displayed, and the “Videotex key” field is displayed instead.
\end{sphinxadmonition}

\item[{Videotex key}] \leavevmode
This field, which is used only for Minitel connections, indicates the key word used to direct the request to the Minitel tree structure.

\begin{sphinxadmonition}{note}{Note:}
If routing is not necessary, for example for STI or JOUTEL, the keyword \$NONE\$ may be used.
\end{sphinxadmonition}

\item[{Transparency}] \leavevmode
Indicates the type(s) of external server(s) where translation from ASCII to EBCDIC must not used.

\item[{Time Out}] \leavevmode
User inactivity timeout period (in minutes). If the user (or calling terminal) sends no messages during this period,the “Do if timeout” procedure is invoked. This timeout takes effect only for terminals using this entry point via HTTP, VIRTELPC, or X25 connections. It has no effect for 3270 connections. The default is 720 minutes. A value of 0 implies no timeout.

\item[{Do if timeout}] \leavevmode
Action to be taken if the value specified in the “Time Out” field is exceeded.
\begin{quote}
\begin{description}
\item[{0}] \leavevmode
Break the session.

\item[{1}] \leavevmode
Sound an alarm, the break the session if user takes no action.

\item[{2}] \leavevmode
Generate an inaudible alarm to avoid X25 PAD timeout.

\end{description}
\end{quote}

\begin{sphinxadmonition}{note}{Note:}
While the terminal is connected to an external server application, session outage can also occur if the timeouts specified in the external server definition are exceeded.
\end{sphinxadmonition}

\item[{Emulation}] \leavevmode
Indicates the type of emulation if the terminal using the entry point is not a 3270.
\begin{quote}
\begin{description}
\item[{BORNE}] \leavevmode
For Minitels without accentuated character support.

\item[{EBCDIC}] \leavevmode
For asynchronous connections without ASCII / EBCDIC translation.

\item[{EMAIL}] \leavevmode
For SMTP connections.

\item[{HTML}] \leavevmode
For HTTP connections.

\item[{HOST4WEB or H4W}] \leavevmode
For HTTP connections. Same as HTML, except that it also allows HOST4WEB commands to be embedded in 3270 screens (for details, refer to the “Programming Interfaces” section in the VIRTEL Web Access Guide).

\item[{MINITEL}] \leavevmode
For Minitel connections in 40 or 80 column mode.

\item[{PC}] \leavevmode
For connections via VIRTEL/PC.

\item[{VT}] \leavevmode
For VT100 or VT200 type connections.

\item[{X25}] \leavevmode
For connections via Reverse-X25 or APPC2 lines.

\item[{\$NONE\$}] \leavevmode
For simple terminals in LUTYPE0 mode with ASCII translation. Even or odd parity, if required, can be specified at the line level.

\item[{\$NONE\$-E}] \leavevmode
Same as \$NONE\$ but without ASCII translation.

\end{description}
\end{quote}

\item[{Signon program}] \leavevmode
Indicates the name of the program used to control user sign-on with the active security tool. If this field is not completed, no sign-on control is performed. Allowable values for this field are listed in section 1.4.4 117.

\item[{Menu program}] \leavevmode
Indicates the name of the program which presents the list of transactions which the user is allowed to access. Permissible values are listed in section 1.4.5.

\item[{Identification scenario}] \leavevmode
For emulation type MINITEL: Indicates the name of the program responsible for physical identification of Minitels connecting to VIRTEL. For all other emulation types: Indicates the name of the presentation module containing the identification scenario for this entry point.

Scenarios are described under the heading “Presentation modules” in the VIRTEL Web Access Guide.

\item[{Type 3 compression}] \leavevmode
Indicates whether this entry point allows the use of level 3 compression. For more information on this subject, refer to “Parameters Of The Terminal”. An ‘X’ in this field activates support for level 3 compression.

\item[{Mandatory identification}] \leavevmode
Indicates whether connections made via VIRTEL/PC must present a physical identification of the connecting PC. Refer to the chapter VIRTEL PC/VT100 for more information on this subject. An ‘X’ in this field activates the PC identification process.

\item[{3270 swap key}] \leavevmode
Indicates the function key which allows the user to return from a transaction to the Multi-Session Menu. Permissible values are PF1 to PF24, PA1, PA2, PA3. If this field is blank, the swap key is specified by the SWAP parameter in the VIRTCT.

\item[{Extended colors}] \leavevmode
An ‘E’ in this field indicates support for 3270 extended attributes and colors. An ‘X’ indicates support for 3270 extended attributes and colors together with support for DBCS (Double Byte Character Set).

\end{description}

\index{Entry Point Management Sub-Application@\spxentry{Entry Point Management Sub-Application}!Signon Programs@\spxentry{Signon Programs}}\index{Signon Programs@\spxentry{Signon Programs}!Entry Point Management Sub-Application@\spxentry{Entry Point Management Sub-Application}}\ignorespaces 

\subsection{Signon Programs}
\label{\detokenize{connectivity_guide:signon-programs}}\label{\detokenize{connectivity_guide:index-110}}
The Signon Program field of the entry point indicates the name of the program used to control user sign-on. The following signon programs are supplied with VIRTEL:
\begin{description}
\item[{VIR0020A}] \leavevmode
Standard program for sign-on processing by entry of USER/PASSWORD sequence via sign-on screen.

\item[{VIR0020B}] \leavevmode
Program used to process a logon sequence containing USER and PASSWORD. The logon sequence must conform to the following format: LOGON APPLID(ACBVIRTEL) DATA(EP USER PASSWORD) or EP (where EP is the entry point name).

\item[{VIR0020C}] \leavevmode
Program identical to VIR0020B, but without any validity check on the password.

\item[{VIR0020H}] \leavevmode
Sign-on program with WINDOWS user interface for HTTP mode.

\item[{VIR0020M}] \leavevmode
Standard sign-on program for 40-column Minitel.

\item[{VIR0020L}] \leavevmode
Standard sign-on program for 40-column Minitel by entry of USER and PASSWORD. The sign-on screen is produced with the help of a Videotex overlay whose name is the same as the entry point used. The source of this screen is in the member MAPSIGN. After changing the source, the resultant phase or load module can be placed into a separate LOADLIB concatenated to DFHRPL.

\item[{VIR0020P}] \leavevmode
Program similar to VIR0020L which allows access to public transactions (those defined with security = 0), if sign-on is rejected by the security system.

\end{description}

\index{Entry Point Management Sub-Application@\spxentry{Entry Point Management Sub-Application}!Menu Programs@\spxentry{Menu Programs}}\index{Menu Programs@\spxentry{Menu Programs}!Entry Point Management Sub-Application@\spxentry{Entry Point Management Sub-Application}}\ignorespaces 

\subsection{Menu Programs}
\label{\detokenize{connectivity_guide:menu-programs}}\label{\detokenize{connectivity_guide:index-111}}
The Menu Program field of the entry point indicates the name of the program which presents the list of transactions which the user is allowed to access. The following program names can be specified:
\begin{description}
\item[{VIR0021A}] \leavevmode
Standard menu program for VIRTEL Multi-Session and HTTP.

\item[{VIR0021B}] \leavevmode
Program for connecting to a single transaction. This program only manages transactions defined in startup mode 1. The terminal is directly connected to the first transaction defined in startup mode 1.

\item[{VIR0021C}] \leavevmode
Program for connecting in Flip-Flop mode to authorized transactions. This program only manages transactions defined in startup mode 1. The user is directly connected to the first transaction defined in startup mode 1. When the user exits this application, the user is automatically connected to the next one and so on. When the last transaction in the list is reached, the user is reconnected to the first one. The use of a transaction referencing the LOGOFF subapplication allows the user to exit from VIRTEL.

\item[{VIR0021D}] \leavevmode
Program reserved for STI.

\item[{VIR0021E}] \leavevmode
Program for connecting incoming X25 calls destined for an AntiPCNE line. This program emulates the function of a VTAM logon interpret table. It reads the first message and selects the transaction whose external name matches the first 8 characters of the message. If there is no matching transaction then message VIR2151E is issued and the call is cleared.

\item[{VIR0021F}] \leavevmode
Program for connecting incoming X25 calls destined for an AntiPCNE line. This program emulates the function of a VTAM logon interpret table. It reads the first message sent by the partner (known as the pre-connexion message) and selects the transaction whose “Logon message” field matches the start of the pre-connextion message. The “Logon message” field can contain an EBCDIC character string enclosed in apostrophes (case sensitive), or a hexadecimal string in the format X’hh…hh’. An empty string (two apostrophes) matches any message. The pre-connexion message is passed on to the application. If there is no transaction whose “Logon message” matches the pre-connexion message, then console message VIR2161E is issued and the call is cleared.

\item[{VIR0021G}] \leavevmode
Program for connecting incoming X25 calls destined for an AntiPCNE line. This program is similar to VIR0021F except that (a) the pre-connexion message is not passed on to the transaction, and (b) if the pre-connexion message does not match any transaction, the program continues to read incoming messages until a match is found. The entry point may contain additional transactions whose external name is USSMSGnn. These transactions do not participate in the matching of pre-connexion messages, but instead are used to generate responses to the terminal during the preconnexion phase. If a transaction with external name USSMSG10 is present, the contents of its “Logon message” field are sent to the terminal upon receipt of the call packet. If a pre-connexion message arrives from the terminal which does not match any transaction, then the program looks for a transaction whose external name is USSMSG01 and sends the contents of its “Logon message” field to the terminal; if there is no transaction named USSMSG01 then message VIR2172E is issued and the call is cleared. If a transaction with external name USSMSG00 is present, the contents of its “Logon message” field are sent to the terminal immediately before the call is connected to the target application.

\item[{VIR0021J}] \leavevmode
Program for connecting to the first available transaction in a list. This program is similar to VIR0021B, but instead of connecting to the first transaction, it connects to the first transaction whose application is active. This allows VIRTEL to automatically select a backup application if the primary application is down.

\item[{VIR0021M}] \leavevmode
Standard menu program for 40-column Minitel. Identical to VIR0021A, this program is not a Multi-Session program.

\item[{VIR0021O}] \leavevmode
Program for connecting to a single transaction. Identical to VIR0021B, except that it does not disconnect the terminal when the application finishes.

\end{description}

\index{Transactions@\spxentry{Transactions}}\ignorespaces 

\chapter{Transactions}
\label{\detokenize{connectivity_guide:index-112}}\label{\detokenize{connectivity_guide:id60}}

\section{Introduction}
\label{\detokenize{connectivity_guide:id61}}
A transaction is a named entity that allows access to an “application” at the host site. The term “application” may be either a VTAM application, a VIRTEL sub-application, an external server, or an HTML directory. Each transaction is known to the user by its external name, and defines the rules of connection / disconnection of the referenced application. When a security tool is used, for example VIRTEL security, only the transactions defined as resources appearing in the profiles of a user are accessible by that user. Each entry point has a list of associated transactions. The entry point management sub-application allows the administrator to manage the entry point and its associated transactions.

\index{Transactions@\spxentry{Transactions}!Summary Display@\spxentry{Summary Display}}\index{Summary Display@\spxentry{Summary Display}!Transactions@\spxentry{Transactions}}\ignorespaces 

\subsection{Summary Display}
\label{\detokenize{connectivity_guide:index-113}}\label{\detokenize{connectivity_guide:id62}}
Press {[}PF4{]} at the entry point detail screen to display the list of associated transactions:

\sphinxincludegraphics{{image62}.png}
\sphinxstyleemphasis{Transaction Summary Display}

\sphinxstylestrong{Field Contents}
\begin{description}
\item[{Internal name}] \leavevmode
Indicates the internal name of the transaction as it is known to the system. If a security tool is used, this name must be defined as a resource. Only those users with the resource in one of their profiles can access this transaction.

\end{description}

\begin{sphinxadmonition}{note}{Note:}
Note that on the Multi-Session Menu, these transactions appear by alphanumeric order of their internal name.
\end{sphinxadmonition}
\begin{description}
\item[{External name}] \leavevmode
Indicates the name of the transaction as it is known to the end user. This name appears in field {[}10{]} of the Multi-Session Menu, as shown in the chapter describing Multi-Session. This is also the name by which the transaction is referenced in an HTTP request.

\item[{Description}] \leavevmode
Caption associated with the transaction. This caption appears on the Multi-Session Menu.

\item[{Application}] \leavevmode
Indicates the name of the application accessed via the transaction. This application can be a VTAM application, a VIRTEL sub-application, an external server, or a directory of HTML pages.

\end{description}


\subsubsection{Navigation}
\label{\detokenize{connectivity_guide:id63}}
The list can be positioned in the following ways:
\begin{description}
\item[{Search}] \leavevmode
Type the name, or the partial name, of the desired entity in the first line of the first column and press {[}Enter{]}.

\item[{{[}PF6{]}}] \leavevmode
Return to the first page of the list.

\item[{{[}PF7{]}}] \leavevmode
Display the previous page of the list.

\item[{{[}PF8{]}}] \leavevmode
Display the next page of the list.

\end{description}

\sphinxstylestrong{Modifying a transaction definition} - To modify the details of a transaction, type the required changes in the appropriate fields and press {[}PF1{]}. You can change more than one definition at a time. To modify a field not shown on the summary screen, position the cursor on the transaction and press {[}PF12{]} to display the transaction detail screen. Important note: Changes do not take effect until you press {[}PF1{]}. After updating a transaction definition, you must also update the entry point(s) concerned by pressing {[}PF3{]} twice (to return to the list of entry points) then {[}PF1{]} to register the change(s) to the entry point.

\sphinxstylestrong{Deleting a transaction definition} - To delete a definition, position the cursor on the name of the transaction to be deleted and press {[}PF2{]}. The line associated with the transaction to be deleted will appear highlighted with the message CONFIRM DELETE. Press {[}PF2{]} again to confirm deletion. The message DELETE OK confirms successful completion of the operation. Repeat the procedure for each transaction to be deleted.

\sphinxstylestrong{Adding a transaction definition} - To add a new definition, press {[}PF12{]} at the summary screen, either with the cursor on an existing definition to copy certain of its attributes, or on an empty line to create a new definition. Complete all required fields and press {[}ENTER{]}. The message CREATE OK indicates that the operation completed successfully

\index{Transactions@\spxentry{Transactions}!Detail Display@\spxentry{Detail Display}}\index{Detail Display@\spxentry{Detail Display}!Transactions@\spxentry{Transactions}}\ignorespaces 

\subsection{Detail Display}
\label{\detokenize{connectivity_guide:index-114}}\label{\detokenize{connectivity_guide:id64}}
To access the detailed transaction definition, position the cursor on the desired transaction and press {[}PF12{]}. The transaction detail definition screen will then be displayed.

\sphinxincludegraphics{{image63}.png}
\sphinxstyleemphasis{Transaction Detail Screen - non-HTML transaction}

\sphinxincludegraphics{{image64}.png}
\sphinxstyleemphasis{Transaction Definition Screen - HTML transaction}

\index{Transactions@\spxentry{Transactions}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!Transactions@\spxentry{Transactions}}\ignorespaces 

\subsection{Parameters}
\label{\detokenize{connectivity_guide:index-115}}\label{\detokenize{connectivity_guide:id65}}\begin{description}
\item[{Internal name}] \leavevmode
The name of the transaction as it is known to the system. The first “n” characters of this name are the prefix by which the transaction is linked to one or more entry points. Transaction security is based on this internal name. It should be noted that the transactions are placed on the Multi-Session Menu in alphanumeric order of the internal name.

\item[{External name}] \leavevmode
The name of the transaction as it is presented to the user in the selection screen. This is also the name by which the transaction is referenced in an HTTP request (see “VIRTEL URL formats” in the VIRTEL Web Access Guide).

\item[{Description}] \leavevmode
The descriptive label associated with the transaction as it is presented to the user in the selection screen.

\item[{Application}] \leavevmode
The name of the application associated with the transaction. This application can be a VTAM application, a VIRTEL sub-application, an external server, a directory containing HTML pages, or the name of a VIRTEL line. When the “Application Type” is 3 (external server), the following values have special meaning:
\begin{quote}
\begin{description}
\item[{\&L}] \leavevmode
the server name is the same as the terminal name

\item[{\&R}] \leavevmode
the server name is the same as the relay name

\item[{\&1}] \leavevmode
the server name is the same as the “parameter” field of the rule which matched the incoming call

\item[{=}] \leavevmode
(for incoming calls via a VIRPESIT line only) the server name is the same as the destination partner name specified in the PESIT file transfer header.

\end{description}
\end{quote}

For application type 3 or 4, you can press {[}PF12{]} to display the detailed definition of the external server or HTML directory.

When the “Application Type” is 5, this field contains the internal or external name of a VIRTEL line. Application type 5 is used by the SEND\$ TO and SEND\$ VARIABLE-TO instructions (see “VIRTEL Scenarios” in the VIRTEL Web Access Guide)

\item[{PassTicket}] \leavevmode
Indicates whether VIRTEL should generate les PassTickets for this application. Possible values are:
\begin{quote}
\begin{description}
\item[{0}] \leavevmode
(default value) indicates that VIRTEL should not generate PassTickets for this application.

\item[{1}] \leavevmode
specifies that VIRTEL should generate a PassTicket, using the specified RACF application name, if the user has signed on to VIRTEL. The PASSTCK=YES parameter must also be specified in the VIRTCT.

\item[{2}] \leavevmode
specifies that VIRTEL should generate a PassTicket, even if the user has not signed on to VIRTEL. The PASSTCK=YES parameter must also be specified in the VIRTCT.

\end{description}
\end{quote}

\end{description}

\begin{sphinxadmonition}{note}{Note:}
Note: The value 2 implies that the user has supplied the userid in some other way, for example by means of a scenario containing the COPY\$ VARIABLE-TO-SYSTEM,FIELD=(NAME-OF,USER) instruction (see VIRTEL Web Access Guide)
\end{sphinxadmonition}
\begin{description}
\item[{Name}] \leavevmode
The name of the application as known to RACF for generation of PassTickets. This may be different from the VTAM application name.

\item[{Application Type}] \leavevmode
Defines the type of application described in the “Application” field. Permissible values for this field are:
\begin{quote}
\begin{description}
\item[{1}] \leavevmode
for a VTAM application

\item[{2}] \leavevmode
for a VIRTEL sub-application

\item[{3}] \leavevmode
for an external server

\item[{4}] \leavevmode
for a directory containing HTML pages

\item[{5}] \leavevmode
for a reference to a VIRTEL line

\end{description}
\end{quote}

\item[{Pseudo Terminals}] \leavevmode
Specifies the prefix of the name of the VIRTEL terminal which will be used to connect to the application. The value \$LINE\$ in the “Pseudo Terminals” field indicates that this transaction is reserved for HTTP connections using non-predefined terminals (see {\hyperref[\detokenize{connectivity_guide:v460cn-forceluname}]{\sphinxcrossref{\DUrole{std,std-ref}{“HTTP connections with non-predefined LU names”}}}}).

\item[{Logmode}] \leavevmode
The name of the new LOGMODE that \sphinxstylestrong{MUST} be used to connect to the application. This overrides any LOGMODE parameter specified in the URL or in an identification scenario.

\item[{How started}] \leavevmode
Represents the desired startup mode for the transaction. Permissible values are as follows:
\begin{quote}
\begin{description}
\item[{1}] \leavevmode
The transaction is integrated in the primary list. If authorised after security checking, it will appear in the primary Multi-Session menu. User intervention will be required to access this application, unless menu programs VIR0021B or VIR0021C are used.

\item[{2}] \leavevmode
The transaction is integrated in the secondary list. If authorised after security checking, it will appear in the Multi-Session sub-menu. User intervention will be required to access this application.

\item[{3}] \leavevmode
The transaction is integrated in the primary list with automatic startup when the terminal connects to VIRTEL. If several transactions defined with automatic startup appear in the primary list, only the last one in the hierarchy is activated at connection time.

\end{description}
\end{quote}

Do not confuse automatic startup in transparent mode (menu program VIR0021B + transaction startup mode 1) with automatic startup offering the possibility to return to a selection menu screen (menu program other than VIR0021B or VIR0021C + transaction startup mode 3).

\end{description}

\begin{sphinxadmonition}{note}{Note:}
Note than startup mode 4 which was present in VIRTEL prior to version 4.0 has been replaced by value 0 in the “Security” field.
\end{sphinxadmonition}
\begin{description}
\item[{Security}] \leavevmode
The type of security applied to the transaction.
\begin{quote}
\begin{description}
\item[{0}] \leavevmode
Public transaction. A public transaction is always available whatever security tool is used.

\item[{1}] \leavevmode
Secure transaction (Basic security). A secure transaction is only available to a user if authorized by the active security tool. For HTTP access, the user is prompted, if necessary, for a userid and password.

\begin{sphinxadmonition}{note}{Note:}
if passphrase is not active then passwords will be truncated to the first 8 characters. Passphrase support is activated by the PASSPHRASE option of the SECUR keyword in the TCT. See the Virtel Installation Guide for further details.
\end{sphinxadmonition}

\item[{2}] \leavevmode
Secure transaction (NTLM security). For HTTP access only, security type 2 allows VIRTEL to obtain the Windows userid of the user, without prompting the user to signon again. The active security tool must recognize the userid and grant access to the transaction. This type of security should only be used on a LAN or on an encrypted session.

\item[{3}] \leavevmode
Secure transaction (Certificate security). A transaction with type 3 security must be accessed via HTTPS (secure session), and the client browser must present a certificate recognized by the active security tool (RACF). The userid associated with the certificate must be granted permission by the security tool to access the transaction. Type 3 security is only possible when running z/OS V1R7 or later, using a secure connection provided by AT-TLS

\item[{4}] \leavevmode
Secure transaction (HTML security). Used with HTTP access, security type 4 allows VIRTEL to obtain the userid and password of the user from fields supplied in the HTML page. The fields must be declared by means of the DECLARE-FIELD-AS tag in the page template. For more details, refer to the section “Creating HTML and XML template pages: Signon and password management” in the VIRTEL Web Access Guide.

\end{description}
\end{quote}

\item[{Translation(s)}] \leavevmode
Type(s) of translation supported for MINITEL connections. Specify one or more of the following values:
\begin{quote}
\begin{description}
\item[{0}] \leavevmode
Same type of translation required in the sub-server node definition.

\item[{1}] \leavevmode
3270 messages are processed in 80 column format but are only displayed as 40 columns unless otherwise specified (for example, if \$\%80 is present in the data stream).

\item[{2}] \leavevmode
3270 messages are processed in and displayed in 80 column format unless otherwise specified (for example, if \$\%40 is present in the data stream).
Modes 1 and 2 are mutually exclusive.

\item[{3}] \leavevmode
3270 messages are processed in 40 column format. This mode is used only for certain IMS applications.

\item[{4}] \leavevmode
Automatic detection of translation mode.
This mode supports applications which produce both 3270 messages and videotex messages. VIRTEL adapts the display format automatically according to the type of message being processed. For example suppose a transaction defined with translation modes 2 and 4 is accessed from a sub-server node. Messages from this application will be automatically displayed as if they were already in videotex format (mode 4) or displayed directly in 80 column format for other cases (mode 2).
This translation mode is compulsory for SRTV applications.
For transactions attached to an entry point type HTML, HOST4WEB, or H4W the field “Translation(s)” is replaced by the field “H4W commands”

\end{description}
\end{quote}

\item[{H4W commands}] \leavevmode
For HTTP connections, this field indicates under what conditions HOST4WEB commands should be processed. Specify one of the following values:
\begin{quote}
\begin{description}
\item[{0}] \leavevmode
Never process HOST4WEB commands.

\item[{1}] \leavevmode
Always process HOST4WEB commands.

\item[{2}] \leavevmode
Process HOST4WEB commands only if the first field of the message begins with the characters “2VIRTEL”.

\item[{4}] \leavevmode
Process HOST4WEB commands if either (a) the entry point specifies emulation type HOST4WEB or H4W, or (b) the entry point specifies HTML and the first field of the message begins with the characters “2VIRTEL”.
These values are meaningful only when the entry point specifies emulation type HTML, HOST4WEB, or H4W. For further details, refer to the “Programming Interfaces” section in the VIRTEL Web Access Guide.

\end{description}
\end{quote}

\item[{Logon message}] \leavevmode
Application type 1: Character string sent to the application as “Logon data” at connection time. This string may also contain certain script variables and orders as described below.
Application type 3: For transactions associated with an entry point which specifies menu program VIR0021F or VIR0021G (see “Menu Programs”) this field is used to identify incoming calls. For type 4 (HTML directory definition) transactions, the field “Logon message” is replaced by the field “Check URL Prefix”

\item[{Check URL Prefix}] \leavevmode
Application type 4: If the pathname of a URL matches the character string specified in this field, then the pathname corresponds to the VIRTEL directory whose name is specified in the “Application” field. See “How the path name corresponds to a VIRTEL directory” in the “VIRTEL URL formats” section of the VIRTEL Web Access Guide.

\item[{TIOA at logon}] \leavevmode
Application types 1-3: Script to be run at application connection time. Scripts are described under the heading “Connection \textendash{} Disconnection Scripts”. Application type 4: For type 4 (HTML directory definition) transactions having the same name as an entry point, the “TIOA at logon” field contains the default URL for the entry point. Refer to the “VIRTEL URL formats” section of the VIRTEL Web Access Guide for further details.

\item[{TIOA at logoff}] \leavevmode
Application types 1-3: Script to be run before disconnecting from the application.

\end{description}

Initial Scenario

Final Scenario

Input Scenario

Output Scenario

For HTML transactions, each of these fields may contain the name of an HTML presentation module. For each field which is non-blank, VIRTEL will call the corresponding scenario (INITIAL, FINAL, INPUT, or OUTPUT) in the named presentation module. An OUTPUT scenario may also be referenced by a VIRTEL Multi-Session transaction.

\begin{sphinxadmonition}{note}{Note:}
Scenarios are described under the heading “Presentation modules” in the VIRTEL User Guide.
\end{sphinxadmonition}

\begin{sphinxadmonition}{warning}{Warning:}
After adding, deleting or updating a transaction, it is essential to update the entry points used by this transaction by pressing {[}PF1{]} at the entry point summary screen.
\end{sphinxadmonition}

\index{Connection / Disconnection Scripts@\spxentry{Connection / Disconnection Scripts}}\ignorespaces 

\chapter{Connection / Disconnection Scripts}
\label{\detokenize{connectivity_guide:connection-disconnection-scripts}}\label{\detokenize{connectivity_guide:index-116}}
When connecting to an application, it may be useful, if desired, to automatically execute certain operations to direct the user to a defined point within the application. The most commonly used operations are application signon procedures. Similarly, when the user logs off from an application, it can be useful to run various commands to release application resources. These operations are called “connection and disconnection scripts”. Scripts are entered in the fields “TIOA at logon” and “TIOA at logoff” of a transaction, or in the “TIOA at start up” field of an external server, with the help of the language described below. A script can send data and 3270 attention keys to the application, send data to the terminal, and wait for specific data from the application.

\index{Connection / Disconnection Scripts@\spxentry{Connection / Disconnection Scripts}!Script Programming Language@\spxentry{Script Programming Language}}\index{Script Programming Language@\spxentry{Script Programming Language}!Connection / Disconnection Scripts@\spxentry{Connection / Disconnection Scripts}}\ignorespaces 

\section{Script Programming Language}
\label{\detokenize{connectivity_guide:script-programming-language}}\label{\detokenize{connectivity_guide:index-117}}
A connection / disconnection script consists of a sequence of “clauses”. A clause consists of some data (which may contain embedded variables and orders) followed by a command. All commands, variables, and orders begin with the ‘\&’ character.

\index{Connection / Disconnection Scripts@\spxentry{Connection / Disconnection Scripts}!Transmission and filter commands@\spxentry{Transmission and filter commands}}\index{Transmission and filter commands@\spxentry{Transmission and filter commands}!Connection / Disconnection Scripts@\spxentry{Connection / Disconnection Scripts}}\ignorespaces 

\subsection{Transmission and filter commands}
\label{\detokenize{connectivity_guide:transmission-and-filter-commands}}\label{\detokenize{connectivity_guide:index-118}}
The command acts upon the data which precedes it. The commands are as follows:-


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|}
\hline
\sphinxstyletheadfamily 
Desired operation
&\sphinxstyletheadfamily 
Command
\\
\hline
Transmit the preceding data to the application
&
\&/A
\\
\hline
Transmit the preceding data to the terminal
&
\&/T
\\
\hline
Ignore and discard the current application message
&
\&/I
\\
\hline
Wait until the application sends a message containing the character string specified in the preceding data
&
\&/W
\\
\hline
Same as \&/W except that messages are still sent to the terminal while being filtered
&
\&/F
\\
\hline
Kill the script (connection / disconnection)
&
\&/K
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}

\begin{sphinxadmonition}{note}{Note:}
Any blanks immediately following a \&/ command are ignored.
\end{sphinxadmonition}

For compatibility with versions of VIRTEL prior to 4.31, the / (slash) in the above commands may also be coded as the EBCDIC character whose hexadecimal value is X’4F’. In the US, Canada, and UK codepages, X’4F’ is represented by a vertical bar. In some European countries, X’4F’ appears as an exclamation point.

\index{Connection / Disconnection Scripts@\spxentry{Connection / Disconnection Scripts}!System Variables@\spxentry{System Variables}}\index{System Variables@\spxentry{System Variables}!Connection / Disconnection Scripts@\spxentry{Connection / Disconnection Scripts}}\ignorespaces 

\subsection{System variables}
\label{\detokenize{connectivity_guide:system-variables}}\label{\detokenize{connectivity_guide:index-119}}
System variables are information known only to VIRTEL at the time of accessing an application. These variables are in the format \&n where “n” represents the desired variable.
Available information Corresponding variable:-


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|}
\hline
\sphinxstyletheadfamily 
Available information
&\sphinxstyletheadfamily 
Corressponding variable
\\
\hline
Transaction name
&
\&T
\\
\hline
VTAM terminal name
&
\&L
\\
\hline
Transaction external name
&
\&X
\\
\hline
Transaction description
&
\&D
\\
\hline
Application name
&
\&A
\\
\hline
Call User Data (12 bytes)
&
\&C
\\
\hline
Relay name
&
\&R
\\
\hline
User name
&
\&U
\\
\hline
User password
&
\&P
\\
\hline
Rerouting parameters
&
\&1, \&82, \&83,…, \&8F
\\
\hline
URL parameter
&
\&=paramn=
\\
\hline
VIRTEL variable
&
\&=varname=
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}
\begin{description}
\item[{Note 1}] \leavevmode
System variables may also be coded in the Logon Message field.

\item[{Note 2}] \leavevmode
The system variable \&=name= is used to obtain the value of either a URL parameter or of a VIRTEL variable created by a scenario (described in the VIRTEL Web Access Guide). If both a URL parameter and a VIRTEL variable exist with the same name then the VIRTEL variable takes precedence.

\end{description}

\index{Connection / Disconnection Scripts@\spxentry{Connection / Disconnection Scripts}!Orders@\spxentry{Orders}}\index{Orders@\spxentry{Orders}!Connection / Disconnection Scripts@\spxentry{Connection / Disconnection Scripts}}\ignorespaces 

\subsection{Orders}
\label{\detokenize{connectivity_guide:orders}}\label{\detokenize{connectivity_guide:index-120}}
Orders may be embedded in the clause data. Orders are used to set the 3270 (or Minitel) attention key to be sent by the following \&/A command, to embed hexadecimal or special values in the data, or to cause the script to wait for the first message from the application, or to process a scenario.


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|}
\hline
\sphinxstyletheadfamily 
Information to be sent
&\sphinxstyletheadfamily 
Corresponding order
\\
\hline
Set the AID and cursor address for a 3270
read operation. See note 1
&
\&*xxrrcc where xx is:
F1-F9=PF1-PF9, 7A-7C=PF10-PF12, C1-C9=PF13-PF21, 4A-4C=PF22-24, 7D=Enter;
rrcc is the cursor address in 3270 buffer address format
\\
\hline
Set the AID for a 3270 short read operation (note 2)
&
\&\#yy or \&*yy where yy is:
6C=PA1, 6E=PA2, 6B=PA3,
6D=Clear, FD=Attn
\\
\hline
Minitel keys in external server
&
\&*0Dxx40 where xx is:
F1=Guide, F2=Repet, F3=Somm, F4=Annul, F7=Retour, F8=Suite, F9=Copier,
7B=EndPage, 7C=Corr, 7D=Envoi, 6D=Conn/Fin
\\
\hline
Data in hexadecimal (note 4)
&
\&’hhhhhhhhhhh’
\\
\hline
Ampersand character (note 4)
&
\&\&
\\
\hline
Wait for first message (note 3)
&
\&W
\\
\hline
Write preceding character string to console and discard
&
\&/M
\\
\hline
Start of repeating script for service transaction (note 5)
&
\&(
\\
\hline
End of repeating script for service transaction (note 5)
&
\&)
\\
\hline
Execute scenario (note 6)
&
\&/S
\\
\hline
Use tab key to skip to next available input field (note 7)
&
\&\textgreater{}
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}
\begin{description}
\item[{Note 1}] \leavevmode
If a function key occurs in the middle of a script, the transmission sequence for the function key must be \&*xxrrcc\&/A. Where the function key is at the end of the script, there is no need to add \&/A. If \&/A or end of script occurs with no AID key specified, the default is \&*7D4040 (Enter with cursor at row 1 col 1).

\item[{Note 2}] \leavevmode
Never use \&/A to send PA keys or Clear to the application.

\item[{Note 3}] \leavevmode
The \&W order is processed only if it appears at the start of the script; otherwise it is ignored.

\item[{Note 4}] \leavevmode
Orders \&’hh…hh’ and \&\& may also be coded in the Logon Message field.

\item[{Note 5}] \leavevmode
\&( and \&) enclose a section of the script which will be repeated. When the script reaches the \&) order, the transaction is converted into a “service transaction” and remains active waiting for similar requests from other users (see “Service transactions” in the VIRTEL Web Access Guide).

\item[{Note 6}] \leavevmode
The \&/S order executes a scenario. If coded in the connexion script (“TIOA at logon”), it executes the INITIAL scenario of the presentation module named in the “Initial Scenario” field of the transaction. If coded in the disconnexion script (“TIOA at logoff”), it executes the FINAL scenario of the presentation module named in the “Final Scenario” field of the transaction (see “Presentation modules” in the VIRTEL Web Access Guide). Any data preceding the \&/S order is ignored. Any blanks immediately following the \&/S order are ignored.

\item[{Note 7}] \leavevmode
The \&\textgreater{} order does not transmit anything and must be completed with a transmission order. This order can be concatenated as many times as necessary before transmission. Exemple : \&\textgreater{}\&\textgreater{} can be used to simulate two tab key usage.

\end{description}

\index{Connection / Disconnection Scripts@\spxentry{Connection / Disconnection Scripts}!Method of Operation@\spxentry{Method of Operation}}\index{Method of Operation@\spxentry{Method of Operation}!Connection / Disconnection Scripts@\spxentry{Connection / Disconnection Scripts}}\ignorespaces 

\subsection{Method of operation}
\label{\detokenize{connectivity_guide:method-of-operation}}\label{\detokenize{connectivity_guide:index-121}}
If present, a script is first called when the initial connection is made to the application. VIRTEL examines the start of the script to see if it begins with the order \&W (wait for first message from application). If so, then no further action is taken at this time, and script processing continues after the first message is received from the application. Otherwise, the first clause of the script is actioned according to its command code, as follows:
\begin{itemize}
\item {} 
\&/W, \&/F, \&/I : no further action is taken at this time, the clause will be reprocessed when the first message arrives from the application

\item {} 
\&/T, \&/A : the data preceding the command is transmitted to the terminal or application

\item {} 
\&/K : the connection is scheduled for termination

\end{itemize}

Subsequently, VIRTEL processes one clause of the script each time a message arrives from the application. Each clause is actioned according to its command code, as follows:
\begin{itemize}
\item {} 
\&/W : VIRTEL tests whether the data preceding the \&/W command appears in the message. If the data is not found, then the message is discarded, and the \&/W clause is processed again when the next message arrives from the application. If the data is found, then the message is discarded and the next clause in the script is immediately processed.

\item {} 
\&/F : VIRTEL tests whether the data preceding the \&/F command appears in the message. If the data is not found, then the message is sent to the terminal, and the \&/F clause is processed again when the next message arrives from the application. If the data is found, then the message is discarded and the next clause in the script is immediatelyprocessed.

\item {} 
\&/I : the application message is discarded.

\item {} 
\&/T, \&/A : the data preceding the command is transmitted to the terminal or application.

\item {} 
\&/K : VIRTEL will send the message and immediately disconnect the communication, without waiting for the response (asynchronous mode used with certain servers).

\end{itemize}

Data sent to the application by means of the \&/A command must be constructed in the format expected by the application. In the case of a 3270 application, the message is in the form of a 3270 data stream. VIRTEL adds a standard 3-byte 3270 prefix (consisting of AID character and cursor SBA) which defaults to default is 7D4040 but may be overridden by a \&* or \&£ order embedded in the preceding script data. In the case of a Minitel application, VIRTEL adds the appropriate suffix (0Dxx) as indicated by an \&* order embedded in the preceding script data (see table of script orders below).

Data sent to the terminal by means of the \&/T command must be constructed in the same format as the application would generate. In the case of a 3270 application, the message must be in the form of a 3270 data stream prefixed by a 3270 command code and WCC. VIRTEL will translate the message to the format required by the terminal (for example, HTML or Minitel) as appropriate.

\index{Scripts Examples@\spxentry{Scripts Examples}}\ignorespaces 

\section{Script Examples}
\label{\detokenize{connectivity_guide:script-examples}}\label{\detokenize{connectivity_guide:index-122}}
\begin{sphinxadmonition}{note}{Note:}
In these examples, script commands are introduced by the preferred sequence \&/ (ampersand slash). For compatibility with existing scripts created before version 4.31 of VIRTEL, the slash may optionally be replaced by the EBCDIC character whose hexadecimal value is X’4F’.
\end{sphinxadmonition}

\index{Scripts Examples@\spxentry{Scripts Examples}!Connect to CICS and autostart transaction@\spxentry{Connect to CICS and autostart transaction}}\index{Connect to CICS and autostart transaction@\spxentry{Connect to CICS and autostart transaction}!Scripts Examples@\spxentry{Scripts Examples}}\ignorespaces 

\subsection{Connect to CICS (no sign-on) with automatic start of a transaction}
\label{\detokenize{connectivity_guide:connect-to-cics-no-sign-on-with-automatic-start-of-a-transaction}}\label{\detokenize{connectivity_guide:index-123}}
In the simplest case, the CICS transaction code is entered in the field “TIOA at logon”. The script below simply sends the ABC1 transaction code to CICS at connection time:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{Internal} \PYG{n}{name} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{W2H}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{10}               \PYG{n}{To} \PYG{n}{associate} \PYG{k}{with} \PYG{n}{an} \PYG{n}{entry} \PYG{n}{point} \PYG{n}{name}
\PYG{n}{External} \PYG{n}{name} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{Cics}                 \PYG{n}{Name} \PYG{n}{displayed} \PYG{n}{on} \PYG{n}{user} \PYG{n}{menu}
\PYG{n}{Description} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}   \PYG{n}{Logon} \PYG{n}{to} \PYG{n}{CICS}
\PYG{n}{Application} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}   \PYG{n}{ACBCICS}              \PYG{n}{Application} \PYG{n}{to} \PYG{n}{be} \PYG{n}{called}
\PYG{n}{Application} \PYG{n+nb}{type} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{1}                 \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{VTAM} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{VIRTEL} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{SERV} \PYG{l+m+mi}{4}\PYG{o}{=}\PYG{n}{PAGE} \PYG{l+m+mi}{5}\PYG{o}{=}\PYG{n}{LINE}
\PYG{n}{Pseudo}\PYG{o}{\PYGZhy{}}\PYG{n}{terminals} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{DEVT}              \PYG{n}{Prefix} \PYG{n}{of} \PYG{n}{name} \PYG{n}{of} \PYG{n}{partner} \PYG{n}{terminals}
\PYG{n}{Security}         \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{0}                 \PYG{l+m+mi}{0}\PYG{o}{=}\PYG{n}{none} \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{basic} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{NTLM} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{TLS} \PYG{l+m+mi}{4}\PYG{o}{=}\PYG{n}{HTML}
\PYG{n}{Logon} \PYG{n}{message}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}
\PYG{n}{TIOA} \PYG{n}{at} \PYG{n}{logon}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{ABC1}
\end{sphinxVerbatim}

\sphinxstyleemphasis{Connection script to start a CICS transaction}

This example works only if the CICS TYPETERM definition specifies LOGONMSG(NO). If CICS is configured to send an initial message to the terminal at logon, by means of the LOGONMSG(YES) parameter, then a bracket error would occur when the above script is executed. To avoid this, the transaction code must be prefixed by \&W to wait for the initial message to be delivered, as shown in the next example.

\index{Scripts Examples@\spxentry{Scripts Examples}!Connect to CICS and transmission of credentials@\spxentry{Connect to CICS and transmission of credentials}}\index{Connect to CICS and transmission of credentials@\spxentry{Connect to CICS and transmission of credentials}!Scripts Examples@\spxentry{Scripts Examples}}\ignorespaces 

\subsection{Connect to CICS and start transaction CESN with transmission of credentials}
\label{\detokenize{connectivity_guide:connect-to-cics-and-start-transaction-cesn-with-transmission-of-credentials}}\label{\detokenize{connectivity_guide:index-124}}
The variables \&U and \&P can be used to pass the current VIRTEL userid and password to the CICS signon transaction:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{Internal} \PYG{n}{name} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{W2H}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{11}                \PYG{n}{To} \PYG{n}{associate} \PYG{k}{with} \PYG{n}{an} \PYG{n}{entry} \PYG{n}{point} \PYG{n}{name}
\PYG{n}{External} \PYG{n}{name} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{Cics2}                 \PYG{n}{Name} \PYG{n}{displayed} \PYG{n}{on} \PYG{n}{user} \PYG{n}{menu}
\PYG{n}{Description}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{Logon} \PYG{n}{to} \PYG{n}{CICS}
\PYG{n}{Application}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{ACBCICS2}              \PYG{n}{Application} \PYG{n}{to} \PYG{n}{be} \PYG{n}{called}
\PYG{n}{Application} \PYG{n+nb}{type} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{1}                  \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{VTAM} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{VIRTEL} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{SERV} \PYG{l+m+mi}{4}\PYG{o}{=}\PYG{n}{PAGE} \PYG{l+m+mi}{5}\PYG{o}{=}\PYG{n}{LINE}
\PYG{n}{Security}         \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{1}                  \PYG{l+m+mi}{0}\PYG{o}{=}\PYG{n}{none} \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{basic} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{NTLM} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{TLS} \PYG{l+m+mi}{4}\PYG{o}{=}\PYG{n}{HTML}
\PYG{n}{Logon} \PYG{n}{message}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}
\PYG{n}{TIOA} \PYG{n}{at} \PYG{n}{logon}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{o}{\PYGZam{}}\PYG{n}{WCESN}\PYG{o}{\PYGZam{}}\PYG{o}{/}\PYG{n}{ASignon}\PYG{o}{\PYGZam{}}\PYG{o}{/}\PYG{n}{F}\PYG{o}{\PYGZam{}}\PYG{o}{*}\PYG{l+m+mi}{7}\PYG{n}{D4EC9}\PYG{o}{\PYGZam{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{114BE9}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{\PYGZam{}}\PYG{n}{U}\PYG{o}{\PYGZam{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{114CF9}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{\PYGZam{}}\PYG{n}{P}\PYG{o}{\PYGZam{}}\PYG{o}{/}\PYG{n}{A}
\end{sphinxVerbatim}

\sphinxstyleemphasis{Connection script with automatic signon to CICS}

This script waits for the initial message from CICS, then enters the transaction code CESN. It waits for the “Signon” prompt to be displayed, then enters the userid and password in two separate fields and sends the completed screen to the host. Security=1 is specified to ensure that the user is signed on to VIRTEL. The SBA orders 11xxxx identify the position of the userid and password fields in the CESN signon panel and may vary as a function of the site.

\index{Scripts Examples@\spxentry{Scripts Examples}!Connect to CICS VSE with ICCF signon and start of CEMT transaction@\spxentry{Connect to CICS VSE with ICCF signon and start of CEMT transaction}}\index{Connect to CICS VSE with ICCF signon and start of CEMT transaction@\spxentry{Connect to CICS VSE with ICCF signon and start of CEMT transaction}!Scripts Examples@\spxentry{Scripts Examples}}\ignorespaces 

\subsection{Connect to CICS VSE with ICCF sign-on and start transaction CEMT}
\label{\detokenize{connectivity_guide:connect-to-cics-vse-with-iccf-sign-on-and-start-transaction-cemt}}\label{\detokenize{connectivity_guide:index-125}}
The following script illustrates the use of a PF key:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{Internal} \PYG{n}{name} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{W2H}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{12}                \PYG{n}{To} \PYG{n}{associate} \PYG{k}{with} \PYG{n}{an} \PYG{n}{entry} \PYG{n}{point} \PYG{n}{name}
\PYG{n}{External} \PYG{n}{name} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{ICCF}                  \PYG{n}{Name} \PYG{n}{displayed} \PYG{n}{on} \PYG{n}{user} \PYG{n}{menu}
\PYG{n}{Description}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{Logon} \PYG{n}{to} \PYG{n}{CICS} \PYG{n}{VSE}
\PYG{n}{Application}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{DBDCCICS}              \PYG{n}{Application} \PYG{n}{to} \PYG{n}{be} \PYG{n}{called}
\PYG{n}{Application} \PYG{n+nb}{type} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{1}                  \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{VTAM} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{VIRTEL} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{SERV} \PYG{l+m+mi}{4}\PYG{o}{=}\PYG{n}{PAGE} \PYG{l+m+mi}{5}\PYG{o}{=}\PYG{n}{LINE}
\PYG{n}{Security}         \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{1}                  \PYG{l+m+mi}{0}\PYG{o}{=}\PYG{n}{none} \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{basic} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{NTLM} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{TLS} \PYG{l+m+mi}{4}\PYG{o}{=}\PYG{n}{HTML}
\PYG{n}{Logon} \PYG{n}{message}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}
\PYG{n}{TIOA} \PYG{n}{at} \PYG{n}{logon}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{REMOTE}\PYG{o}{\PYGZam{}}\PYG{o}{/}\PYG{n}{W}\PYG{o}{\PYGZam{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{11E35C}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{\PYGZam{}}\PYG{n}{U}\PYG{o}{\PYGZam{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{11E560}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{\PYGZam{}}\PYG{n}{P}\PYG{o}{\PYGZam{}}\PYG{o}{/}\PYG{n}{AEscape}\PYG{o}{\PYGZam{}}\PYG{o}{/}\PYG{n}{W}\PYG{o}{\PYGZam{}}\PYG{o}{*}\PYG{n}{F64040}\PYG{o}{\PYGZam{}}\PYG{o}{/}\PYG{n}{ACEMT}\PYG{o}{\PYGZam{}}\PYG{o}{/}\PYG{n}{A}
\end{sphinxVerbatim}

\sphinxstyleemphasis{Connection script with automatic signon to ICCF}

This script waits for the ICCF signon screen (recognized by the word ‘REMOTE’), then enters the userid and password in two separate fields and sends the completed screen to the host. It waits for the ICCF main menu (recognized by the word “Escape”) and presses F6. It then enters the transaction code CEMT. The SBA orders 11xxxx identify the position of the userid and password fields in the ICCF signon panel and may vary as a function of the site.

\index{Scripts Examples@\spxentry{Scripts Examples}!Connect to TSO and start of ISPF@\spxentry{Connect to TSO and start of ISPF}}\index{Connect to TSO and start of ISPF@\spxentry{Connect to TSO and start of ISPF}!Scripts Examples@\spxentry{Scripts Examples}}\ignorespaces 

\subsection{Connect to TSO with USER and PASSWORD and await start of ISPF}
\label{\detokenize{connectivity_guide:connect-to-tso-with-user-and-password-and-await-start-of-ispf}}\label{\detokenize{connectivity_guide:index-126}}
This is an example of an HTTP transaction which uses the “Logon Message” field to pass the userid to TSO, followed by a script to complete the TSO/ISPF logon process:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{Internal} \PYG{n}{name} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{W2H}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{13}                \PYG{n}{To} \PYG{n}{associate} \PYG{k}{with} \PYG{n}{an} \PYG{n}{entry} \PYG{n}{point} \PYG{n}{name}
\PYG{n}{External} \PYG{n}{name} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{Tso}                   \PYG{n}{Name} \PYG{n}{displayed} \PYG{n}{on} \PYG{n}{user} \PYG{n}{menu}
\PYG{n}{Description}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{Logon} \PYG{n}{to} \PYG{n}{Tso}
\PYG{n}{Application}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{TSO}                   \PYG{n}{Application} \PYG{n}{to} \PYG{n}{be} \PYG{n}{called}
\PYG{n}{Application} \PYG{n+nb}{type} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{1}                  \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{VTAM} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{VIRTEL} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{SERV} \PYG{l+m+mi}{4}\PYG{o}{=}\PYG{n}{PAGE} \PYG{l+m+mi}{5}\PYG{o}{=}\PYG{n}{LINE}
\PYG{n}{Security}         \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{1}                  \PYG{l+m+mi}{0}\PYG{o}{=}\PYG{n}{none} \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{basic} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{NTLM} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{TLS} \PYG{l+m+mi}{4}\PYG{o}{=}\PYG{n}{HTML}
\PYG{n}{Logon} \PYG{n}{message}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{o}{\PYGZam{}}\PYG{n}{U}
\PYG{n}{TIOA} \PYG{n}{at} \PYG{n}{logon}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{TSO}\PYG{o}{/}\PYG{n}{E} \PYG{n}{LOGON}\PYG{o}{\PYGZam{}}\PYG{o}{/}\PYG{n}{W}\PYG{o}{\PYGZam{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{11C9C3}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{\PYGZam{}}\PYG{n}{P}\PYG{o}{\PYGZam{}}\PYG{o}{/}\PYG{n}{A}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{\PYGZam{}}\PYG{o}{/}\PYG{n}{W}\PYG{o}{\PYGZam{}}\PYG{o}{/}\PYG{n}{A}
\end{sphinxVerbatim}

\sphinxstyleemphasis{Connection script with automatic logon to TSO/ISPF}

The script waits for the TSO/E LOGON panel for the specified userid, then enters the password into the appropriate field. It waits for the *** prompt to appear, and presses enter. Security=1 is specified to ensure that the user is already signed on to VIRTEL. The SBA order 11C9C3 identifies the password field (at row 8 col 20) in the TSO/E LOGON panel and may vary as a function of the site.

\index{Scripts Examples@\spxentry{Scripts Examples}!Connect to CICS and navigation of user application@\spxentry{Connect to CICS and navigation of user application}}\index{Connect to CICS and navigation of user application@\spxentry{Connect to CICS and navigation of user application}!Scripts Examples@\spxentry{Scripts Examples}}\ignorespaces 

\subsection{Connect to CICS and navigate a user applicaction}
\label{\detokenize{connectivity_guide:connect-to-cics-and-navigate-a-user-applicaction}}\label{\detokenize{connectivity_guide:index-127}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{Internal} \PYG{n}{name} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{W2H}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{14}                \PYG{n}{To} \PYG{n}{associate} \PYG{k}{with} \PYG{n}{an} \PYG{n}{entry} \PYG{n}{point} \PYG{n}{name}
\PYG{n}{External} \PYG{n}{name} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{Cics4}                 \PYG{n}{Name} \PYG{n}{displayed} \PYG{n}{on} \PYG{n}{user} \PYG{n}{menu}
\PYG{n}{Description}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{Logon} \PYG{n}{to} \PYG{n}{CICS}
\PYG{n}{Application}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{ACBCICS2}              \PYG{n}{Application} \PYG{n}{to} \PYG{n}{be} \PYG{n}{called}
\PYG{n}{Application} \PYG{n+nb}{type} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{1}                  \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{VTAM} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{VIRTEL} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{SERV} \PYG{l+m+mi}{4}\PYG{o}{=}\PYG{n}{PAGE} \PYG{l+m+mi}{5}\PYG{o}{=}\PYG{n}{LINE}
\PYG{n}{Security}         \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{1}                  \PYG{l+m+mi}{0}\PYG{o}{=}\PYG{n}{none} \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{basic} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{NTLM} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{TLS} \PYG{l+m+mi}{4}\PYG{o}{=}\PYG{n}{HTML}
\PYG{n}{Logon} \PYG{n}{message}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}
\PYG{n}{TIOA} \PYG{n}{at} \PYG{n}{logon}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{o}{\PYGZam{}}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{F5C21140401D4013}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{\PYGZam{}}\PYG{o}{/}\PYG{n}{TWELCOME}\PYG{o}{\PYGZam{}}\PYG{o}{/}\PYG{n}{W}\PYG{o}{\PYGZam{}}\PYG{o}{*}\PYG{l+m+mi}{7}\PYG{n}{D40C1}
\PYG{n}{TIOA} \PYG{n}{at} \PYG{n}{logoff}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{o}{\PYGZam{}}\PYG{c+c1}{\PYGZsh{}6BCESF LOGOFF\PYGZam{}/A}
\end{sphinxVerbatim}

\sphinxstyleemphasis{Connection script with message to terminal}

This script sends an initial 3270 message to the terminal to format the screen and position the cursor. The data in this initial message consists of a 3270 Write-Erase command (F5), a Write Control Character (C2), a Set Buffer Address order (114040), a Start Field order (1D40) and an Insert Cursor order (13). Having sent this message, the script waits for the CICS application to send a message containing the string “WELCOME”, then it sends the “Enter” key to the CICS application. When the terminal user disconnects, the logoff script sends the “Clear” key to CICS followed by CESF LOGOFF.

\index{Scripts Examples@\spxentry{Scripts Examples}!Service Transactions@\spxentry{Service Transactions}}\index{Service Transactions@\spxentry{Service Transactions}!Scripts Examples@\spxentry{Scripts Examples}}\ignorespaces 

\subsection{Service Transaction}
\label{\detokenize{connectivity_guide:service-transaction}}\label{\detokenize{connectivity_guide:index-128}}
This example shows a script which connects to CICS and repeatedly issues an enquiry transaction whose parameters are supplied in the URL of an HTTP request:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{Internal} \PYG{n}{name} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{W2H}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{15}                 \PYG{n}{To} \PYG{n}{associate} \PYG{k}{with} \PYG{n}{an} \PYG{n}{entry} \PYG{n}{point} \PYG{n}{name}
\PYG{n}{External} \PYG{n}{name} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{Cics5}                  \PYG{n}{Name} \PYG{n}{displayed} \PYG{n}{on} \PYG{n}{user} \PYG{n}{menu}
\PYG{n}{Description}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{CICS} \PYG{n}{Service} \PYG{n}{Transaction}
\PYG{n}{Application}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{ACBCICS2}               \PYG{n}{Application} \PYG{n}{to} \PYG{n}{be} \PYG{n}{called}
\PYG{n}{Application} \PYG{n+nb}{type} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{1}                   \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{VTAM} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{VIRTEL} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{SERV} \PYG{l+m+mi}{4}\PYG{o}{=}\PYG{n}{PAGE} \PYG{l+m+mi}{5}\PYG{o}{=}\PYG{n}{LINE}
\PYG{n}{Security}         \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{1}                   \PYG{l+m+mi}{0}\PYG{o}{=}\PYG{n}{none} \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{basic} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{NTLM} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{TLS} \PYG{l+m+mi}{4}\PYG{o}{=}\PYG{n}{HTML}
\PYG{n}{Logon} \PYG{n}{message}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}
\PYG{n}{TIOA} \PYG{n}{at} \PYG{n}{logon}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{Signon} \PYG{n}{to} \PYG{n}{CICS}\PYG{o}{\PYGZam{}}\PYG{o}{/}\PYG{n}{W}\PYG{o}{\PYGZam{}}\PYG{o}{*}\PYG{n}{F34BE9}\PYG{o}{\PYGZam{}}\PYG{o}{/}\PYG{n}{A}\PYG{o}{\PYGZam{}}\PYG{p}{(}\PYG{n}{TRA1}\PYG{o}{\PYGZam{}}\PYG{o}{=}\PYG{n}{MYPARAM}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{o}{/}\PYG{n}{A}\PYG{o}{\PYGZam{}}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxstyleemphasis{Connection script for service transaction}

The first part of this script signs on to CICS using the default CICS userid. This part of the script is executed once only when the VIRTEL transaction is called for the first time. The remainder of the script, bracketed by the \&( and \&) orders, is executed repeatedly. Because the script has a repeating part, this transaction is known as a “Service Transaction”. Each time an HTTP request arrives in the form \sphinxurl{http://ipaddr:port/pagename+cics5?myparam=xyz123} it is dispatched to the service transaction, if one is available, and the script executes the CICS transaction TRA1xyz123 where xyz123 is the value of the URL parameter “myparam=” specified in the HTTP request. The result of this CICS transaction is returned to the requester using pagename as a page template. The request is then terminated, but the session between VIRTEL and CICS remains connected waiting for the next request.

\index{External Servers@\spxentry{External Servers}}\ignorespaces 

\chapter{External Servers}
\label{\detokenize{connectivity_guide:external-servers}}\label{\detokenize{connectivity_guide:index-129}}

\section{Introduction}
\label{\detokenize{connectivity_guide:id66}}
The external server management sub-application allows the administrator to maintain the call parameters relating to the various servers available for outgoing calls. External server definitions allow users at 3270 terminals to access Videotex servers via an X25 network. Additionally, starting with VIRTEL version 4.14, the concept of an external server
is extended to handle the routing of incoming and outgoing calls to and from X25 GATE/PCNE applications such as CFT and Inter.PEL. Starting with VIRTEL version 4.42, the external server may also be used to define the parameters for outbound calls to a PESIT/IP file transfer server via a VIRPESIT line.

\index{External Servers@\spxentry{External Servers}!External Server Management Sub-Application@\spxentry{External Server Management Sub-Application}}\index{External Server Management Sub-Application@\spxentry{External Server Management Sub-Application}!External Servers@\spxentry{External Servers}}\ignorespaces 

\subsection{External Server Management Sub-Application}
\label{\detokenize{connectivity_guide:external-server-management-sub-application}}\label{\detokenize{connectivity_guide:index-130}}
The external server management sub-application is accessed by pressing {[}PF7{]} in the Configuration Menu, or {[}PF11{]} in the Sub-Application Menu, or from the Multi-Session Menu via a transaction referencing module VIR0031. This subapplication allows management of the parameters associated with each external server.

\index{External Server Management Sub-Application@\spxentry{External Server Management Sub-Application}!Security@\spxentry{Security}}\index{Security@\spxentry{Security}!External Server Management Sub-Application@\spxentry{External Server Management Sub-Application}}\ignorespaces 

\subsection{Security}
\label{\detokenize{connectivity_guide:index-131}}\label{\detokenize{connectivity_guide:id67}}
When security is active, access to external server management from the Configuration Menu or the Sub-Application Menu is controlled by the resource \$\$SERV\$\$.
When accessed by a transaction, the rules governing the management of transaction security apply.
Security management is described in chapter 4 of the VIRTEL Technical Documentation.

\index{External Server Management Sub-Application@\spxentry{External Server Management Sub-Application}!Summary Display@\spxentry{Summary Display}}\index{Summary Display@\spxentry{Summary Display}!External Server Management Sub-Application@\spxentry{External Server Management Sub-Application}}\ignorespaces 

\subsection{Summary Display}
\label{\detokenize{connectivity_guide:index-132}}\label{\detokenize{connectivity_guide:id68}}
The first screen displayed by the external server management sub-application shows a summary of existing definitions in alphanumeric order:

\sphinxincludegraphics{{image65}.png}
\sphinxstyleemphasis{External Server Summary Display}


\subsubsection{Navigation}
\label{\detokenize{connectivity_guide:id69}}
In browse, alter, or delete mode, it is possible to scroll the list of external servers under the control of VIRTEL.
\begin{description}
\item[{Search}] \leavevmode
Type the name (or partial name) of the required entity on the first line under the heading “Service”, then press {[}Enter{]}.

\item[{{[}PF6{]}}] \leavevmode
Return to the first page of the list.

\item[{{[}PF7{]}}] \leavevmode
Display the previous page.

\item[{{[}PF8{]}}] \leavevmode
Display the next page.

\end{description}

\sphinxstylestrong{Modifying an external server definition} - Type the desired modifications into the appropriate fields then press {[}PF1{]}. Multiple definitions can be modified at the same time. The message UPDATE OK indicates that the modifications have been accepted. If the modification affects a field not displayed on the summary screen, first position the cursor on the definition concerned, then press {[}PF12{]} to access the definition detail screen.

\sphinxstylestrong{Deleting an external server definition} - To delete a definition, position the cursor on the name of the service to be deleted and press {[}PF2{]}. The line associated with the service to be deleted will appear highlighted with the message CONFIRM DELETE. Press {[}PF2{]} again to confirm deletion. The message DELETE OK confirms successful completion of the operation. Repeat the procedure for each external server to be deleted.

\sphinxstylestrong{Adding an external server definition} - To add a new definition, press {[}PF12{]} at the summary screen, either with the cursor on an existing definition to copy its attributes, or on an empty line to create a new definition.

\index{External Server Management Sub-Application@\spxentry{External Server Management Sub-Application}!Detail Display@\spxentry{Detail Display}}\index{Detail Display@\spxentry{Detail Display}!External Server Management Sub-Application@\spxentry{External Server Management Sub-Application}}\ignorespaces 

\subsection{Detail Display}
\label{\detokenize{connectivity_guide:index-133}}\label{\detokenize{connectivity_guide:id70}}
To access the detailed definition of an external server, position the cursor on the desired service in the summary screen and press {[}PF12{]}. The external server detail definition screen will then be displayed. To return to the configuration menu, press {[}PF3{]} or {[}Clear{]}.

\sphinxincludegraphics{{image66}.png}
\sphinxstyleemphasis{External Server Detail display}

\index{External Server Management Sub-Application@\spxentry{External Server Management Sub-Application}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!External Server Management Sub-Application@\spxentry{External Server Management Sub-Application}}\ignorespaces 

\subsection{Parameters}
\label{\detokenize{connectivity_guide:index-134}}\label{\detokenize{connectivity_guide:id71}}\begin{description}
\item[{Name}] \leavevmode
Contains the name of the service as displayed to the user in the “Call External Server” screen. This name may also be referenced in the “Application” field of a type 3 transaction.

\item[{Description}] \leavevmode
Description of the service as displayed to the user in the “Call External Server” screen.

\item[{Number}] \leavevmode
For outbound calls via an X25 line:

The X25 call number required to access the service.

If the service is invoked by an X25 incoming call, the called number can be defined as “=”. In this case, the called number for the outgoing call will be copied from the incoming call packet. In the case of an external server which processes outgoing calls originating from an application linked to VIRTEL via an AntiGATE line (CFT, Pelican), the value “=” indicates that the called number will be supplied by the application. In the case of an external server which processes outgoing calls originating from a VIRKIX application, the “Number” field must be blank, which indicates to VIRTEL that the called number and the caller number, as well as the data, facilities, and CUD0 (if applicable), will all be supplied by application. However, if the “Caller” field of the external server is non-blank, then this value will override the caller number supplied by the application. For this type of external server, the entry point must contain a transaction whose external name is “Mirror” as the first transaction.

For outbound calls via a VIRPESIT line:
\begin{quote}

The IP address of the partner in the form nnn.nnn.nnn.nnn
\end{quote}

\item[{Data}] \leavevmode
For outbound calls via an X25 line:

User data. The contents of this field will be converted to ASCII and placed in the outgoing call packet immediately following the contents of the CUD0 field. If the service is invoked by an X25 incoming call, the data can be defined as “=”. In this case, the Call User Data for the outgoing call (Data and CUD0 fields) will be copied from the incoming call packet. In the case of an external server invoked by an HTTP request, for example:

\end{description}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
GET /PUBLIC/WEB3270.htm+videotex+SERVICE1

the value “=” indicates that the parameter (SERVICE1 in this example) will be placed in ASCII in the outgoing call packet immediately following the CUD0 field.

For outbound calls via a VIRPESIT line:

    The TCP port number of the partner.
\end{sphinxVerbatim}
\begin{description}
\item[{Line number}] \leavevmode
Specifies the internal name of the line on which the outgoing call will be made. The line type may be either X25 (GATE, FASTC, XOT, AntiGATE, AntiPCNE, AntiFC) or TCP with protocol VIRPESIT. “*” indicates that the first available line will be used.

\end{description}

\begin{sphinxadmonition}{note}{Note:}
For users of VIRTEL prior to version 4.20:
\begin{quote}

External server definitions which were created using a version of VIRTEL prior to 4.20 refer to the line using a single character name. When processing these definitions, VIRTEL selects the first line whose internal name begins with the character specified, and VIRTEL displays the complete name of the selected line in this field on the external server definition detail screen. When the external server definition is updated for the first time under VIRTEL 4.20 or later, the single character reference is replaced in the external server definition by the complete line name. Prior to VIRTEL version 4.20, if the “Line number” field of the external server was blank, the line selected for the outgoing call was the first line whose internal name began with the figure 1. From VIRTEL version 4.20 onwards, it will be necessary to update any such external server definitions, by specifying explicitly the full internal name of the required line.
\end{quote}
\end{sphinxadmonition}
\begin{description}
\item[{Backup line}] \leavevmode
The internal name of the backup line which will be used for the outgoing call if the primary line is not available. Following an error on the primary line, VIRTEL uses the backup line for all subsequent calls. Similarly, following an error on the backup line, VIRTEL switches back to the primary line for all subsequent calls. From version 4.24 onwards, if both the primary and backup lines are available and operational, both will be used for outgoing calls. For each line, VIRTEL maintains a counter of outgoing calls which have been made but which have not yet received a response. Before making each call, VIRTEL compares the counters of each of the two lines, and selects the line with the lowest number of calls awaiting response. This procedure has the effect of balancing the load between the two lines, and bypasses possible blockages caused by router errors. The rules for specifying the backup line are the same as for the primary line.

\item[{Caller}] \leavevmode
Optional caller number to be placed in the outgoing call packet. If the service is invoked by an X25 incoming call, the caller number can be defined as “*” or “=”. In this case, the caller number for the outgoing call will be copied from the incoming call packet.

\item[{Emulation}] \leavevmode
Type of emulation required. Possible values are:
\begin{description}
\item[{0}] \leavevmode
no emulation (Called by FA25 API)

\item[{1}] \leavevmode
VIRTELPC emulation

\item[{2}] \leavevmode
Minitel 40 column emulation, reverse X25, or VIRPESIT

\item[{3}] \leavevmode
Minitel 80 column emulation

\item[{4}] \leavevmode
VT100 emulation

\item[{5}] \leavevmode
3174 switched node

\item[{6}] \leavevmode
VT200 emulation

\item[{7}] \leavevmode
Minitel emulation with LECAM via VIRNT

\item[{8}] \leavevmode
BULL emulation

\end{description}

\item[{Character set}] \leavevmode
Type of characters expected by the external server.
\begin{description}
\item[{1}] \leavevmode
ASCII 7 bits

\item[{2}] \leavevmode
ASCII 8 bits

\item[{3}] \leavevmode
EBCDIC

\end{description}

\item[{Server time out}] \leavevmode
Timeout period (in seconds) for the server. VIRTEL will disconnect the call if the server sends no messages during this period. 0 indicates that there is no timeout.

\item[{User time out}] \leavevmode
Timeout period (in minutes) for the caller. VIRTEL will disconnect the call if the caller sends no messages during this period. If 0 is specified, the value of the TIMEOUT parameter in the VIRTCT is used instead.

\item[{Cut off warning}] \leavevmode
Type of message sent to the user before disconnection occurs due to user time out. Possible values are:
\begin{description}
\item[{0}] \leavevmode
User receives no warning of disconnection

\item[{1}] \leavevmode
User is warned by an audible ‘bip’ 30 seconds before disconnection

\item[{2}] \leavevmode
User is warned by a message 30 seconds before disconnection or if the server does not respond

\end{description}

\item[{Price level}] \leavevmode
The tariff for this service. Possible values are:
\begin{description}
\item[{0}] \leavevmode
Cost is not calculated for this service

\item[{n}] \leavevmode
(n is a value from 1 to Z), the cost of the call is calculated and presented to the user at the end of the connection. The values of n are defined in VIRTEL exit 7 (see VIRTEL Installation Guide).

\end{description}

\item[{Secret}] \leavevmode
1 indicates that this service will not appear in the list of servers shown to the user in the “Call External Server” screen. This value is typically used in external server definitions which are intended to be called only by a type 3 transaction.

\item[{Facilities}] \leavevmode
Optional facilities (in hexadecimal) to be placed in the X25 call packet.

If the service is invoked by an X25 incoming call, the facilities can be defined as “=”. In this case, the facilities for the outgoing call will be copied from the incoming call packet.

If neither packet size (42) nor window size (43) appears in the facilities specified here or copied from the incoming call packet, then VIRTEL will generate packet size and window size facilities fields in the outgoing call packet according to the values specified in the outbound line definition.

\item[{CUD0 (hex)}] \leavevmode
Protocol indicator (2 to 8 hexadecimal characters) to be placed in the outgoing call packet before the user data. If this field is blank, the default value is 01000000 (indicating PAD protocol).If the value of the “Data” field is “=” then the “Data” and “CUD0” will be copied from the incoming call packet.

\item[{TIOA at start up}] \leavevmode
Contains a connection script to be run immediately after connection to the server. For more information, see “Connection \textendash{} Disconnection Scripts”.

\end{description}

\index{Connection Modes@\spxentry{Connection Modes}}\ignorespaces 

\chapter{Connection Modes}
\label{\detokenize{connectivity_guide:connection-modes}}\label{\detokenize{connectivity_guide:index-135}}
There are various methods of connecting terminals to VIRTEL. This chapter includes the \sphinxstylestrong{WELCOME} and \sphinxstylestrong{RELAY} modes of connection

\index{Connection Modes@\spxentry{Connection Modes}!Welcome Mode@\spxentry{Welcome Mode}}\index{Welcome Mode@\spxentry{Welcome Mode}!Connection Modes@\spxentry{Connection Modes}}\ignorespaces 

\section{WELCOME mode}
\label{\detokenize{connectivity_guide:welcome-mode}}\label{\detokenize{connectivity_guide:index-136}}
Exclusively for 3270 terminals, WELCOME mode allows 3270 terminals to connect to VIRTEL without being predefinied.
There are two conditions which must be fulfilled:
- The ACCUEIL parameter in the VIRTCT must be set to YES,
- The connecting terminal must not match any existing fixed terminal definition or terminal pool definition.

In this mode, terminals not defined in VIRTEL can connect, but they cannot benefit from compression or full Multi-
Session functionality. The first screen displayed depends on the characteristics of the entry point used. If no entry
point is used, each terminal connecting in WELCOME mode will see the VIRTEL sign-on screen, or the Multi-Session
Menu, or the Configuration Menu depending on the options specified in the VIRTCT for the SECUR and MULTI
parameters.

If the Multi-Session Menu is accessible from a terminal connected in WELCOME mode, it is regarded simply as a
selection screen. Thus, when an application is selected, VIRTEL connects the terminal directly to this application and
relinquishes control of the terminal. In this case, VIRTEL functions somewhat like a dynamic USSTAB.

\index{Connection Modes@\spxentry{Connection Modes}!Relay Mode@\spxentry{Relay Mode}}\index{Relay Mode@\spxentry{Relay Mode}!Connection Modes@\spxentry{Connection Modes}}\ignorespaces 

\section{RELAY mode}
\label{\detokenize{connectivity_guide:relay-mode}}\label{\detokenize{connectivity_guide:index-137}}
3270 terminals can be connected in RELAY mode if a suitable definition exists in the system. The relays are defined to VTAM by means of APPL statements. Each terminal connected in this way can benefit from VIRTEL compression and/or Multi-Session functionality. Whether a sign-on screen or a Multi-Session Menu is displayed depends on the characteristics associated with the entry point used. When no entry point is used, the rules described in the previous paragraph apply.

\index{Connection Modes@\spxentry{Connection Modes}!Terminal connection types@\spxentry{Terminal connection types}}\index{Terminal connection types@\spxentry{Terminal connection types}!Connection Modes@\spxentry{Connection Modes}}\ignorespaces 

\section{Terminal Connection Types}
\label{\detokenize{connectivity_guide:terminal-connection-types}}\label{\detokenize{connectivity_guide:index-138}}
The definition of a terminal / relay pair can be accomplished in various ways: by means of a fixed entry; by inclusion in a physical pool (which may be dynamic or non-dynamic); or by means of a reserved entry (logical pool). A fixed entry is a definition which can only be used by one specific terminal. A physical pool is a generic definition which can be shared by several different terminals. A logical pool is a reserved definition which is used not for connecting a terminal to VIRTEL, but for connection to a VTAM application. This definition allows the same physical terminal, for example a Minitel, to be presented to applications with different relays depending on the context. Each type of definition can be explicit or repeated.
\begin{description}
\item[{. index::}] \leavevmode
pair: Connection Modes; Explicit Fixed Terminal entries

\end{description}


\subsection{Explicit fixed entries}
\label{\detokenize{connectivity_guide:explicit-fixed-entries}}
Each terminal in the group is explicitly named within VIRTEL. This mode of definition is useful when a group of relays must be attached to a line via a common terminal name prefix, but the relay LU names do not follow a numeric pattern. The following example shows a group of terminals and corresponding relay LU names associated with a line via prefix PCN1:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{LIST} \PYG{n}{of} \PYG{n}{TERMINALS} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{n}{Applid}\PYG{p}{:} \PYG{n}{SPVIRH1} \PYG{l+m+mi}{18}\PYG{p}{:}\PYG{l+m+mi}{15}\PYG{p}{:}\PYG{l+m+mi}{52}
\PYG{n}{Terminal} \PYG{n}{Repeated} \PYG{n}{Relay} \PYG{n}{Entry} \PYG{n}{Type} \PYG{n}{I}\PYG{o}{/}\PYG{n}{O} \PYG{n}{Pool} \PYG{l+m+mi}{2}\PYG{n}{nd} \PYG{n}{Relay}
\PYG{n}{PCN1TM01} \PYG{l+m+mi}{0001}     \PYG{n}{PARIS}       \PYG{l+m+mi}{3}    \PYG{l+m+mi}{1}
\PYG{n}{PCN1TM02} \PYG{l+m+mi}{0001}     \PYG{n}{ROMA}        \PYG{l+m+mi}{3}    \PYG{l+m+mi}{1}
\PYG{n}{PCN1TM03} \PYG{l+m+mi}{0001}     \PYG{n}{BERLIN}      \PYG{l+m+mi}{3}    \PYG{l+m+mi}{1}
\PYG{n}{PCN1TM04} \PYG{l+m+mi}{0001}     \PYG{n}{BRUSSEL}     \PYG{l+m+mi}{3}    \PYG{l+m+mi}{1}
\PYG{n}{PCN1TM05} \PYG{l+m+mi}{0001}     \PYG{n}{DENHAAG}     \PYG{l+m+mi}{3}    \PYG{l+m+mi}{1}
\PYG{n}{PCN1TM06} \PYG{l+m+mi}{0001}     \PYG{n}{KOBNHAVN}    \PYG{l+m+mi}{3}    \PYG{l+m+mi}{1}
\PYG{n}{PCN1TM07} \PYG{l+m+mi}{0001}     \PYG{n}{LONDON}      \PYG{l+m+mi}{3}    \PYG{l+m+mi}{1}
\PYG{n}{PCN1TM08} \PYG{l+m+mi}{0001}     \PYG{n}{DUBLIN}      \PYG{l+m+mi}{3}    \PYG{l+m+mi}{1}
\PYG{n}{P1}\PYG{o}{=}\PYG{n}{Update}        \PYG{n}{P2}\PYG{o}{=}\PYG{n}{Delete}    \PYG{n}{P3}\PYG{o}{=}\PYG{n}{Return}    \PYG{n}{P6}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{n}{st} \PYG{n}{Page}
\PYG{n}{P7}\PYG{o}{=}\PYG{n}{Page}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}        \PYG{n}{P8}\PYG{o}{=}\PYG{n}{Page}\PYG{o}{+}\PYG{l+m+mi}{1}    \PYG{n}{P12}\PYG{o}{=}\PYG{n}{Details}
\end{sphinxVerbatim}

\sphinxstyleemphasis{Explicit fixed terminals}


\subsubsection{Repeated fixed entries}
\label{\detokenize{connectivity_guide:repeated-fixed-entries}}
Only the first terminal in the list is defined. The repeat count indicates the number of terminals which VIRTEL will create. The numeric portion of the terminal name, relay name, and 2nd relay name (if supplied) are incremented for each occurrence of the terminal.

\begin{sphinxadmonition}{note}{Note:}
The repetition increment takes effect from the rightmost numeric character and continues until the next nonnumeric character to the left. The increment is decimal and not hexadecimal.
\end{sphinxadmonition}

\sphinxstylestrong{Examples}

In the examples shown below:
- Terminal TERM0001, relay RELAY001, repetition 0016 causes the creation of 16 terminals TERM0001 to TERM0016 with relays RELAY001 to RELAY016.
- Terminal G001T001, relay RELAY200, repetition 0020 causes the creation of 20 terminals G001T001 to G001T020 with relays RELAY200 to RELAY219.
- Terminal TER00LUA, relay REL00CVA, 2nd relay FIX00CVA, repetition 0100 causes the creation of 100 terminals TER00LUA to TER99LUA with relays REL00CVA to REL99CVA and 2nd relays FIC00CVA to FIC99CVA.
- The remaining examples show invalid repetitions caused by improper definitions. In each case the size of the numeric portion of one or more of the names is insufficient to allow the generation of a unique name for each occurrence in the repeat range.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{LIST} \PYG{n}{of} \PYG{n}{TERMINALS} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{n}{Applid}\PYG{p}{:} \PYG{n}{SPVIRH1} \PYG{l+m+mi}{18}\PYG{p}{:}\PYG{l+m+mi}{13}\PYG{p}{:}\PYG{l+m+mi}{49}
\PYG{n}{Terminal} \PYG{n}{Repeated} \PYG{n}{Relay}    \PYG{n}{Entry}    \PYG{n}{Type} \PYG{n}{I}\PYG{o}{/}\PYG{n}{O} \PYG{n}{Pool}     \PYG{l+m+mi}{2}\PYG{n}{nd} \PYG{n}{Relay}
\PYG{n}{TERM0001} \PYG{l+m+mi}{0016}     \PYG{n}{RELAY001} \PYG{n}{PC}       \PYG{l+m+mi}{2}    \PYG{l+m+mi}{3}
\PYG{n}{G001T001} \PYG{l+m+mi}{0020}     \PYG{n}{RELAY200}          \PYG{l+m+mi}{3}    \PYG{l+m+mi}{3}
\PYG{n}{TER00LUA} \PYG{l+m+mi}{0100}     \PYG{n}{REL00CVA}          \PYG{l+m+mi}{3}    \PYG{l+m+mi}{3}            \PYG{n}{FIC00CVA}
\PYG{n}{TERX0LUB} \PYG{l+m+mi}{0015}     \PYG{n}{REL00CVB}          \PYG{l+m+mi}{3}    \PYG{l+m+mi}{3}            \PYG{n}{FIC00CVB}
\PYG{n}{TER00LUC} \PYG{l+m+mi}{0015}     \PYG{n}{RELX0CVC}          \PYG{l+m+mi}{3}    \PYG{l+m+mi}{3}            \PYG{n}{FIC00CVC}
\PYG{n}{TER00LUD} \PYG{l+m+mi}{0015}     \PYG{n}{REL00CVD}          \PYG{l+m+mi}{3}    \PYG{l+m+mi}{3}            \PYG{n}{FICX0CVD}
\PYG{n}{TER90LUE} \PYG{l+m+mi}{0015}     \PYG{n}{REL00CVE}          \PYG{l+m+mi}{3}    \PYG{l+m+mi}{3}
\PYG{n}{P1}\PYG{o}{=}\PYG{n}{Update}         \PYG{n}{P2}\PYG{o}{=}\PYG{n}{Delete}         \PYG{n}{P3}\PYG{o}{=}\PYG{n}{Return}          \PYG{n}{P6}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{n}{st} \PYG{n}{Page}
\PYG{n}{P7}\PYG{o}{=}\PYG{n}{Page}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}         \PYG{n}{P8}\PYG{o}{=}\PYG{n}{Page}\PYG{o}{+}\PYG{l+m+mi}{1}         \PYG{n}{P12}\PYG{o}{=}\PYG{n}{Details}
\end{sphinxVerbatim}

\sphinxstyleemphasis{Repeated fixed terminals}

\index{Connection Modes@\spxentry{Connection Modes}!Physical Terminal Pools@\spxentry{Physical Terminal Pools}}\index{Physical Terminal Pools@\spxentry{Physical Terminal Pools}!Connection Modes@\spxentry{Connection Modes}}\ignorespaces 

\subsection{Physical Terminal Pools}
\label{\detokenize{connectivity_guide:physical-terminal-pools}}\label{\detokenize{connectivity_guide:index-139}}
Physical pools allow 3270 terminals to connect to VIRTEL and to be assigned a relay LU, without the need to create an individual defininition for each connecting terminal. A relay LU is assigned from the physical pool at the time the terminal connects to VIRTEL. There are two types of physical pool, dynamic and non-dynamic, as described later.

Whether or not a pool is dynamic, the definition of a physical pool is indicated by the presence of a “?” character in the first position of the terminal name. The next three characters denote the characteristics of the pool. The last four characters are free-format and serve to distinguish one definition from another.

A physical pool thus has a name in the format ?xxxyyyy.

The concept of a physical pool only applies to 3270 terminals. Other types of terminal cannot be defined by means of a physical pool.

Although a physical pool allows connection of a large number of terminals, it is sometimes necessary to restrict the connection to certain types of terminals This selection is done with the three characters represented by “x” in the name of the physical pool definition.
\begin{description}
\item[{1st character}] \leavevmode
Tests the terminal type.
\begin{description}
\item[{*}] \leavevmode
No restriction on terminal type

\item[{S}] \leavevmode
SNA terminal

\item[{N}] \leavevmode
Non SNA terminal

\end{description}

\item[{2nd character}] \leavevmode
Tests the terminal model
\begin{description}
\item[{*}] \leavevmode
No restriction on model

\item[{2 to 5}] \leavevmode
Restricted to specified model

\end{description}

\item[{3rd character}] \leavevmode
Tests colour support
\begin{description}
\item[{*}] \leavevmode
No restriction on colour support

\item[{C}] \leavevmode
Colour terminal

\item[{N}] \leavevmode
Monochrome terminal

\end{description}

\end{description}

Examples:
\begin{itemize}
\item {} 
?S**YZABVIRTEL tests only if the terminal is SNA.

\item {} 
?S3CYZABVIRTEL tests if the terminal is SNA model 3 colour.

\end{itemize}

\index{Connection Modes@\spxentry{Connection Modes}!Dynamic Terminal Pools@\spxentry{Dynamic Terminal Pools}}\index{Dynamic Terminal Pools@\spxentry{Dynamic Terminal Pools}!Connection Modes@\spxentry{Connection Modes}}\ignorespaces 

\subsection{Dynamic Terminal Pools}
\label{\detokenize{connectivity_guide:dynamic-terminal-pools}}\label{\detokenize{connectivity_guide:index-140}}
In a dynamic physical pool, the associated relay is defined by a combination of alphanumeric characters and “=” signs. Each “=” sign will be dynamically replaced by the value of the corresponding character in the name of the connecting
terminal.

For example, for a definition specifying VIR===== as the relay name, each terminal connecting to VIRTEL will be allocated a relay whose first three characters are VIR and whose last five characters are the last five characters of the terminal LU name. VIRTEL must be able to open a VTAM application LU for each possible relay defined in the pool. The use of the VTAM generic character “?” allows all possible relay names to be defined to VTAM by a single APPL statement, as shown in the following example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
VIR????? APPL AUTH=(ACQ,PASS)
\end{sphinxVerbatim}

A single definition may be sufficient to connect all 3270 terminals in the network.

\index{Connection Modes@\spxentry{Connection Modes}!Non-Dynamic Terminal Pools@\spxentry{Non-Dynamic Terminal Pools}}\index{Non-Dynamic Terminal Pools@\spxentry{Non-Dynamic Terminal Pools}!Connection Modes@\spxentry{Connection Modes}}\ignorespaces 

\subsection{Non-Dynamic Terminal Pools}
\label{\detokenize{connectivity_guide:non-dynamic-terminal-pools}}\label{\detokenize{connectivity_guide:index-141}}
In a non-dynamic physical pool, the associated relay is defined by a combination of alphanumeric characters without “=” signs. A given terminal may be assigned a different relay on each connection according to availability. Each relay in the pool must be defined to VTAM by means of an APPL statement.

It is advisable to define as many entries as there are terminals to be connected.

\index{Connection Modes@\spxentry{Connection Modes}!Terminal Pool Definition Examples@\spxentry{Terminal Pool Definition Examples}}\index{Terminal Pool Definition Examples@\spxentry{Terminal Pool Definition Examples}!Connection Modes@\spxentry{Connection Modes}}\ignorespaces 

\subsection{Terminal Pool Definition Examples}
\label{\detokenize{connectivity_guide:terminal-pool-definition-examples}}\label{\detokenize{connectivity_guide:index-142}}

\subsubsection{Physical Pool}
\label{\detokenize{connectivity_guide:physical-pool}}
In the examples shown below, ?***0000 is a dynamic physical pool which allows connection of an unlimited number of terminals. ?S5CTM01 is a non-dynamic physical pool which allows connection of up to 8 terminals (of type 3270-5 SNA Colour) which will be assigned relay names VIR5LU01 to VIR5LU08.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
LIST of TERMINALS \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} Applid: SPVIRH1 18:13:49
Terminal Repeated   Relay    Entry   Type I/O Pool 2nd Relay
?***0000            VIR===== PC      2    3
?S5CTM01 0008       VIR5LU01 PC5     2    3


P1=Update           P2=Delete        P3=Return         P6=1st Page
P7=Page\PYGZhy{}1           P8=Page+1        P12=Details
\end{sphinxVerbatim}

\sphinxstyleemphasis{Physical pools of terminals}


\subsubsection{Logical pool}
\label{\detokenize{connectivity_guide:logical-pool}}\label{\detokenize{connectivity_guide:v460cn-logicalpool}}
A logical pool is a group of relays which are not permanently assigned to any terminal. Instead, the relays in the group are available for allocation by terminals as and when required. The logical pool is defined as a group of terminals (the definitions can be explicit or repeated) whose “*Pool name” field contains a name prefixed preceded by the character “*”. The terminal name is not significant, except to distinguish it from other terminal definitions. Terminals which use the pool specify the pool name (with the “*” prefix) in their relay name field. The difference between a logical pool and a physical pool is that a relay in a physical pool is assigned when the requesting terminal connects, whereas a relay in a logical pool is assigned at the time the requesting terminal needs the relay to connect to a VTAM application.

In the example shown below, W2HTP000 is a logical pool whose pool name is *W2HPOOL. The logical pool contains 16 relay LU’s named RHDVT000 to RHDVT015, with associated printer LU’s named RHDIM000 to RHDIM015. The relays in 7. Terminals 117 the *W2HPOOL logical pool are available for use by terminals CLVTA000-015, DEVTA000-015, and HTVTA000-015. Appropriate VTAM APPL statements must be provided for RHDVT??? And RHDIM???.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
LIST of TERMINALS \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} Applid: SPVIRD1 18:02:53
Terminal Repeated    Relay       Entry    Type I/O  Pool      2nd Relay
?***0000             RVTAM===    PC       2
CLLOC000 0010                             3    3
CLVTA000 0016        *W2HPOOL             3    3
DELOC000 0010                             3    3
DEVTA000 0016        *W2HPOOL             3    3
HTLOC000 0016                             3    3
HTVTA000 0016        *W2HPOOL             3    3
SMLOC000 0016                    SMTP     3    3
W2HIM000 0016        RHDIM000             S    1
W2HTP000 0016        RHDVT000             3    3    *W2HPOOL   RHDIM000



P1=Update            P2=Delete            P3=Return             P6=1st Page
P7=Page\PYGZhy{}1            P8=Page+1            P12=Details
\end{sphinxVerbatim}

\sphinxstyleemphasis{Definition of a logical pool of terminals}

Terminals using a logical pool are defined with a “Relay” field referencing the logical pool rather than a VTAM APPL statement.

\index{Connection Modes@\spxentry{Connection Modes}!Terminal Pool Selection@\spxentry{Terminal Pool Selection}}\index{Terminal Pool Selection@\spxentry{Terminal Pool Selection}!Connection Modes@\spxentry{Connection Modes}}\ignorespaces 

\subsection{Terminal Pool Selection}
\label{\detokenize{connectivity_guide:terminal-pool-selection}}\label{\detokenize{connectivity_guide:index-143}}
When a terminal is defined to a logical pool, the selection of a pool is managed automatically by VIRTEL at connection time. At connection time a terminal entry from the logical pool is selected starting at the highest available entry. That entry will be associated with a physical group of predefine terminals each associated with a logical pool. The first available entry of that physical group will be used as the terminal definition. From that terminal definition we derive the VTAM LUNAMES for 3270 and printer definitions for a 3270 application relay.

Using the above definitions the following selection would occurr for a 3270 application where the Virtel transaction uses a prefix of HTVTA. The incoming connection would select a logical entry from logical pool *W2HPOOL, assuming a line prefix of HT, would select from the range HTVTA000 - HTVTA015. The highest would be HTVTA015 if this is the first connection. Physical terminals defined to *W2HPOOL are W2HTP000 - W2HTP015. The connection would take the first entry in this group, in this case W2HTP000. W2HTP000 is defined as having a 3270 relay LUNAME of RHDVT000 and an associated printer relay of RHDIM000. These LU names would be used to support the 3270 session.


\subsection{Terminal naming and order conventions}
\label{\detokenize{connectivity_guide:terminal-naming-and-order-conventions}}
In selected the correct physical terminal to represent a Virtel connection Virtel uses a selection logic based on highest logical pool entry associated with a line to first physical terminal entry associated with the logical pool. For example, in the screen belowe four logical pools are defined to line E-HTTP. The line is defined with a prelix of EH.

\sphinxincludegraphics{{image125}.png}
\sphinxstyleemphasis{Terminals definitions associated with a line}

There is also a physical terminal defined to logical pool *URLPOOL named EHTRMEH0. This has a 3270 relay name of EHVTA300 and is associated with a printer relay EHVIM300. The printer relay is also defined as a physical terminal entry EHPRTEH0.

The highest entry within the logical pools associated with the line is EHVTA209 in pool *IPPOOL. When a connection comes in this entry will be used if it is available. To see the physical terminals associated with this pool we have to list all the terminals defined to Virtel.

\sphinxincludegraphics{{image126}.png}
\sphinxstyleemphasis{Terminals associated with a pool IPPOOL}

The first entry is IPTRM100. This entry will be used in supporting the session associated with the logical terminal pool entry EHVTA209. This entry has a 3270 relay of EHVTA100 and a printer LUNAME of EHVM100. Again the printer entry would be defined as a physical terminal. In this case it is defined as physical entry IPPRT100.

\sphinxincludegraphics{{image127}.png}
\sphinxstyleemphasis{Printer terminal definition IPPRT100}

Logging on with a 3270 TSO application will present the following screen. In the OIA rea, bottom left, the associated LUNAMEs can be seen - EHVTA100 and printer EHVIM100. These of course must be defined to VTAM.

\sphinxincludegraphics{{image128}.png}
\sphinxstyleemphasis{Connection to 3270 application}

In the console log we can see the logical pool entry to physical terminal entry associations:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+m+mf}{13.38}\PYG{o}{.}\PYG{l+m+mi}{46} \PYG{n}{JOB01825}  \PYG{n}{VIRT906I} \PYG{n}{HTTP}\PYG{o}{\PYGZhy{}}\PYG{n}{EDS} \PYG{n}{SOCKET} \PYG{l+m+mi}{00030000} \PYG{n}{CALL} \PYG{n}{FROM} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{92.80}\PYG{p}{:}\PYG{l+m+mi}{47730}              \PYG{o}{\PYGZlt{}} \PYG{n}{Call} \PYG{n}{coming} \PYG{o+ow}{in} \PYG{o}{\PYGZgt{}}
\PYG{l+m+mf}{13.38}\PYG{o}{.}\PYG{l+m+mi}{46} \PYG{n}{JOB01825}  \PYG{n}{VIRHT51I} \PYG{n}{HTTP}\PYG{o}{\PYGZhy{}}\PYG{n}{EDS} \PYG{n}{CONNECTING} \PYG{n}{EHVTA209} \PYG{n}{TO} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{92.80}\PYG{p}{:}\PYG{l+m+mi}{25094}                 \PYG{o}{\PYGZlt{}} \PYG{n}{Highest} \PYG{n}{Logical} \PYG{n}{pool} \PYG{n}{entry} \PYG{n}{selected} \PYG{k+kn}{from} \PYG{n+nn}{IPPOOL}\PYG{o}{\PYGZgt{}}
\PYG{l+m+mf}{13.38}\PYG{o}{.}\PYG{l+m+mi}{46} \PYG{n}{JOB01825}  \PYG{n}{VIR0919I} \PYG{n}{EHVTA209} \PYG{n}{RELAY} \PYG{n}{EHVTA100}\PYG{p}{(}\PYG{n}{IPTRM100}\PYG{p}{)} \PYG{n}{ACTIVATED}                         \PYG{o}{\PYGZlt{}} \PYG{n}{First} \PYG{n}{physical} \PYG{n}{terminal} \PYG{n}{associated} \PYG{k}{with} \PYG{n}{IPPOOL} \PYG{o}{\PYGZgt{}}
\PYG{l+m+mf}{13.38}\PYG{o}{.}\PYG{l+m+mi}{46} \PYG{n}{JOB01825}  \PYG{n}{VIR0919I} \PYG{n}{EHVTA209} \PYG{n}{RELAY} \PYG{n}{EHVIM100}\PYG{p}{(}\PYG{n}{IPPRT100}\PYG{p}{)} \PYG{n}{ACTIVATED}                         \PYG{o}{\PYGZlt{}} \PYG{n}{Associated} \PYG{n}{printer} \PYG{n}{definition} \PYG{n}{associated} \PYG{k}{with} \PYG{n}{IPTRM100} \PYG{o}{\PYGZgt{}}
\end{sphinxVerbatim}

The naming of logical pools is important so that in rule processing the correct pool is selected. The general rule being that pools associated with rule selections should be lower in alphabetic ranking than general non-rule pools. This will ensure that non-rule or default connections use logical terminals from the higher pool definitions.


\subsubsection{Rules for opening relay ACBs}
\label{\detokenize{connectivity_guide:rules-for-opening-relay-acbs}}
For explicit or repeated fixed entry definitions, the relay ACBs are opened at VIRTEL startup time. For terminals defined in a physical pool, the relay ACBs are opened at terminal connection time. For terminals which reference a logical pool, the relay ACB is opened only when accessing an application.


\subsubsection{Use of a terminal logical pool}
\label{\detokenize{connectivity_guide:use-of-a-terminal-logical-pool}}
When a single terminal must be presented under a different name according to the applications it logs on to across the same line, a logical pool must be used.

\begin{sphinxadmonition}{note}{Note:}
Logical pools are not usable on X25 Fast-Connect lines managed by NPSI. The following examples reference type 3 (Fast-Connect) terminals, used for example on an XOT line.
\end{sphinxadmonition}

As a concrete example, suppose that Minitels use an X25 line with 50 logical channels to logon to 3 distinct applications under different names according to sub-address or a specific user data value. The first two applications are accessible via the same entry point ENTRYP01, the third via entry point ENTRYP02. Applications APPLI01, APPLI02, APPLI03 must be accessed via relays with prefixes AP01R, BP02R and CP03R respectively. The first application only allows 5 simultaneous logons, the second has no limit, and the third allows 2 simultaneous logons. The set of VIRTEL definitions to resolve this problem is as follows.

\sphinxstylestrong{Terminal Definitions}

The definition of the physical terminals and their association with the 3 sub-groups of logical terminals belonging to the same pool is:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{DEFINITION} \PYG{n}{OF} \PYG{n}{X25} \PYG{n}{TERMINALS}
\PYG{n}{Terminal} \PYG{n}{Repeat}    \PYG{n}{Relay}    \PYG{n}{Entry}    \PYG{n}{Type} \PYG{n}{Compression} \PYG{l+m+mi}{2}\PYG{n}{nd} \PYG{n}{Relay}

\PYG{n}{XOTF0001} \PYG{l+m+mi}{0050}      \PYG{o}{*}\PYG{n}{POOL001} \PYG{n}{Libre}    \PYG{l+m+mi}{3}    \PYG{l+m+mi}{2}           \PYG{n}{Vide}

\PYG{n}{DEFINITION} \PYG{n}{OF} \PYG{l+m+mi}{3} \PYG{n}{GROUPS} \PYG{n}{OF} \PYG{n}{RESERVED} \PYG{n}{TERMINALS}
\PYG{n}{Terminal} \PYG{n}{Repeat}    \PYG{n}{Relay}    \PYG{n}{Entry}    \PYG{n}{Type} \PYG{n}{Compression} \PYG{l+m+mi}{2}\PYG{n}{nd} \PYG{n}{Relay}

\PYG{n}{ARESA001} \PYG{l+m+mi}{0005}      \PYG{n}{AP01R001} \PYG{n}{Libre}    \PYG{l+m+mi}{3}    \PYG{l+m+mi}{2}           \PYG{n}{Libre}
\PYG{n}{BRESA001} \PYG{l+m+mi}{0050}      \PYG{n}{BP02R001} \PYG{n}{Libre}    \PYG{l+m+mi}{3}    \PYG{l+m+mi}{2}           \PYG{n}{Libre}
\PYG{n}{CRESA001} \PYG{l+m+mi}{0002}      \PYG{n}{CP03R001} \PYG{n}{Libre}    \PYG{l+m+mi}{3}    \PYG{l+m+mi}{2}           \PYG{n}{Libre}
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{Note:}
These 3 terminal groups contain the value *POOL001 under the heading “*Pool name” in their definition. When virtual printers are associated with a logical pool, they may be defined as fixed explicit or repeated entries, but they must not be placed in a logical pool.
\end{sphinxadmonition}

\sphinxstylestrong{Entry point definitions}

The two entry points are assigned transactions TRPE01 and TRPE02 respectively.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{DEFINITION} \PYG{n}{OF} \PYG{n}{ENTRY} \PYG{n}{POINTS}
\PYG{n}{Name}     \PYG{n}{Description}                    \PYG{n}{Transactions}
\PYG{n}{ENTRYP01} \PYG{n}{EP} \PYG{k}{for} \PYG{n}{APPLI01} \PYG{o+ow}{and} \PYG{n}{APPLI02}     \PYG{n}{TRPE01}
\PYG{n}{ENTRYP02} \PYG{n}{EP} \PYG{k}{for} \PYG{n}{APPLI03}                 \PYG{n}{TRPE02}
\end{sphinxVerbatim}

\sphinxstyleemphasis{Transaction definitions and terminal selection}

Transactions TRPE0101, TRPE0102 and TRPE0203 are defined as illustrated below.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{DEFINITION} \PYG{n}{OF} \PYG{n}{THE} \PYG{n}{FIRST} \PYG{n}{TRANSCACTION} \PYG{n}{FOR} \PYG{n}{ENTRYP01}

\PYG{n}{Nom} \PYG{n}{interne}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{TRPE0101}       \PYG{n}{Pour} \PYG{n}{l}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{associer a un point d}\PYG{l+s+s1}{\PYGZsq{}}\PYG{n}{entrée}
\PYG{n}{Nom} \PYG{n}{externe}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{APPLI}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{01}       \PYG{n}{Nom} \PYG{n}{affiche} \PYG{n}{dans} \PYG{n}{le} \PYG{n}{menu} \PYG{n}{utilisateur}
\PYG{n}{Description}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{Application} \PYG{l+m+mi}{01} \PYG{n}{avec} \PYG{n}{terminaux} \PYG{n}{ARESA}
\PYG{n}{Application}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{APPLI01}        \PYG{n}{Application} \PYG{n}{gérant} \PYG{n}{la} \PYG{n}{transaction}
\PYG{n}{Alias}         \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                \PYG{n}{Nom} \PYG{n}{suite} \PYG{n}{a} \PYG{n}{CLSDST} \PYG{n}{PASS}
\PYG{n}{Type} \PYG{n}{d}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{application ===\PYGZgt{} 1         1=VTAM 2=VIRTEL 3=SERVEUR 4=PAGES}
\PYG{n}{Terminaux}          \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{ARESA}     \PYG{n}{Préfixe} \PYG{n}{des} \PYG{n}{terminaux} \PYG{n}{associés}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{DEFINITION} \PYG{n}{OF} \PYG{n}{THE} \PYG{n}{SECOND} \PYG{n}{TRANSCACTION} \PYG{n}{FOR} \PYG{n}{ENTRYP01}

\PYG{n}{Nom} \PYG{n}{interne}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{TRPE0102}      \PYG{n}{Pour} \PYG{n}{l}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{associer a un point d}\PYG{l+s+s1}{\PYGZsq{}}\PYG{n}{entrée}
\PYG{n}{Nom} \PYG{n}{externe}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{APPLI}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{02}      \PYG{n}{Nom} \PYG{n}{affiche} \PYG{n}{dans} \PYG{n}{le} \PYG{n}{menu} \PYG{n}{utilisateur}
\PYG{n}{Description}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{Application} \PYG{l+m+mi}{02} \PYG{n}{avec} \PYG{n}{terminaux} \PYG{n}{BRESA}
\PYG{n}{Application}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{APPLI02}       \PYG{n}{Application} \PYG{n}{gérant} \PYG{n}{la} \PYG{n}{transaction}
\PYG{n}{Alias}          \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}               \PYG{n}{Nom} \PYG{n}{suite} \PYG{n}{a} \PYG{n}{CLSDST} \PYG{n}{PASS}
\PYG{n}{Type} \PYG{n}{d}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{application  ===\PYGZgt{} 1        1=VTAM 2=VIRTEL 3=SERVEUR 4=PAGES}
\PYG{n}{Terminaux}           \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{BRESA}    \PYG{n}{Préfixe} \PYG{n}{des} \PYG{n}{terminaux} \PYG{n}{associés}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{DEFINITION} \PYG{n}{OF} \PYG{n}{THE} \PYG{n}{FIRST} \PYG{n}{TRANSCACTION} \PYG{n}{FOR} \PYG{n}{ENTRYP02}

\PYG{n}{Nom} \PYG{n}{interne}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{TRPE0201}     \PYG{n}{Pour} \PYG{n}{l}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{associer a un point d}\PYG{l+s+s1}{\PYGZsq{}}\PYG{n}{entrée}
\PYG{n}{Nom} \PYG{n}{externe}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{APPLI}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{03}     \PYG{n}{Nom} \PYG{n}{affiche} \PYG{n}{dans} \PYG{n}{le} \PYG{n}{menu} \PYG{n}{utilisateur}
\PYG{n}{Description}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{Application} \PYG{l+m+mi}{03} \PYG{n}{avec} \PYG{n}{terminaux} \PYG{n}{CRESA}
\PYG{n}{Application}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{APPLI03}      \PYG{n}{Application} \PYG{n}{gérant} \PYG{n}{la} \PYG{n}{transaction}
\PYG{n}{Alias} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                       \PYG{n}{Nom} \PYG{n}{suite} \PYG{n}{a} \PYG{n}{CLSDST} \PYG{n}{PASS}
\PYG{n}{Type} \PYG{n}{d}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{application  ===\PYGZgt{} 1       1=VTAM 2=VIRTEL 3=SERVEUR 4=PAGES}
\PYG{n}{Terminaux}           \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{CRESA}   \PYG{n}{Préfixe} \PYG{n}{des} \PYG{n}{terminaux} \PYG{n}{associés}
\end{sphinxVerbatim}

\index{Connection Modes@\spxentry{Connection Modes}!Virtel Terminal Connection Examples@\spxentry{Virtel Terminal Connection Examples}}\index{Virtel Terminal Connection Examples@\spxentry{Virtel Terminal Connection Examples}!Connection Modes@\spxentry{Connection Modes}}\ignorespaces 

\section{Terminal Connection Examples}
\label{\detokenize{connectivity_guide:terminal-connection-examples}}\label{\detokenize{connectivity_guide:index-144}}
This section presents a number of examples covering the definitions relating to terminals and details the parameters required on the VIRTEL and VTAM sides. The list is not exhaustive.

\index{Connection Modes@\spxentry{Connection Modes}!WELCOME Mode Terminal Connection Example@\spxentry{WELCOME Mode Terminal Connection Example}}\index{WELCOME Mode Terminal Connection Example@\spxentry{WELCOME Mode Terminal Connection Example}!Connection Modes@\spxentry{Connection Modes}}\ignorespaces 

\subsection{3270 terminal in WELCOME mode}
\label{\detokenize{connectivity_guide:terminal-in-welcome-mode}}\label{\detokenize{connectivity_guide:index-145}}
This mode allows any terminal to logon to VIRTEL. The ACCUEIL parameter in the VIRTCT must be set to YES. There must be no definition which allows an application relay to be assigned to the terminal.

\index{Connection Modes@\spxentry{Connection Modes}!RELAY Mode Terminal Connection Example@\spxentry{RELAY Mode Terminal Connection Example}}\index{RELAY Mode Terminal Connection Example@\spxentry{RELAY Mode Terminal Connection Example}!Connection Modes@\spxentry{Connection Modes}}\ignorespaces 

\subsection{3270 terminal in RELAY mode}
\label{\detokenize{connectivity_guide:terminal-in-relay-mode}}\label{\detokenize{connectivity_guide:index-146}}
A VTAM APPL statement must be defined for each terminal. If there is no such definition then message VIR0005W is issued at VIRTEL startup time. Example definitions:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{DEFINITION} \PYG{n}{EXPLICITE}

\PYG{n}{Terminal} \PYG{n}{Répété}  \PYG{n}{Relais}    \PYG{n}{Entrée}    \PYG{n}{Type} \PYG{n}{Compression} \PYG{l+m+mi}{2}\PYG{n}{eme} \PYG{n}{Relais}

\PYG{n}{TERM0001} \PYG{l+m+mi}{0000}    \PYG{n}{RELAY001}  \PYG{n}{Libre}     \PYG{l+m+mi}{2}    \PYG{n}{Libre}       \PYG{n}{Vide}
\PYG{n}{TERM0002} \PYG{l+m+mi}{0000}    \PYG{n}{RELAY003}  \PYG{n}{Libre}     \PYG{l+m+mi}{2}    \PYG{n}{Libre}       \PYG{n}{Vide}
\PYG{n}{TERM0003} \PYG{l+m+mi}{0000}    \PYG{n}{RELAY004}  \PYG{n}{Libre}     \PYG{l+m+mi}{2}    \PYG{n}{Libre}       \PYG{n}{Vide}
\PYG{n}{TERM0004} \PYG{l+m+mi}{0000}    \PYG{n}{RELAY005}  \PYG{n}{Libre}     \PYG{l+m+mi}{2}    \PYG{n}{Libre}       \PYG{n}{Vide}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{DEFINITION} \PYG{n}{REPETEE}

\PYG{n}{Terminal} \PYG{n}{Répété}  \PYG{n}{Relais}    \PYG{n}{Entrée}    \PYG{n}{Type} \PYG{n}{Compression} \PYG{l+m+mi}{2}\PYG{n}{eme} \PYG{n}{Relais}

\PYG{n}{TERM0001} \PYG{l+m+mi}{0004}    \PYG{n}{RELAY001}  \PYG{n}{Libre}     \PYG{l+m+mi}{2}    \PYG{n}{Libre}       \PYG{n}{Vide}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
DEFINITION DYNAMIQUE

Terminal Répété  Relais    Entrée    Type Compression 2eme Relais

?***0001 0000    RELAY===  Libre     2    Libre       Vide
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
DEFINITION EN POOL NON DYNAMIQUE

Terminal Répété Relais Entrée Type Compression 2eme Relais

?***0001 0000 RELAY001 Libre 2 Libre Vide
?***0002 0000 RELAY002 Libre 2 Libre Vide
?***0003 0000 RELAY003 Libre 2 Libre Vide
?***0004 0000 RELAY004 Libre 2 Libre Vide
\end{sphinxVerbatim}

\index{Connection Modes@\spxentry{Connection Modes}!X25 Asynchronous Terminal Connection Example@\spxentry{X25 Asynchronous Terminal Connection Example}}\index{X25 Asynchronous Terminal Connection Example@\spxentry{X25 Asynchronous Terminal Connection Example}!Connection Modes@\spxentry{Connection Modes}}\ignorespaces 

\subsection{Asynchronous terminal on an X25 or XOT line}
\label{\detokenize{connectivity_guide:asynchronous-terminal-on-an-x25-or-xot-line}}\label{\detokenize{connectivity_guide:index-147}}
A VTAM APPL statement must be defined for each terminal. If there is no such definition then message VIR0005W is issued at VIRTEL startup time. Example definitions:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{EXPLICIT} \PYG{n}{DEFINITION} \PYG{n}{WITHOUT} \PYG{n}{PSEUDO}\PYG{o}{\PYGZhy{}}\PYG{n}{PRINTER}

\PYG{n}{Terminal} \PYG{n}{Répété}  \PYG{n}{Relais}    \PYG{n}{Entrée}    \PYG{n}{Type}    \PYG{n}{Compression} \PYG{l+m+mi}{2}\PYG{n}{eme} \PYG{n}{Relais}

\PYG{n}{X25F0001} \PYG{l+m+mi}{0000}    \PYG{n}{RX25F001}  \PYG{n}{Libre}     \PYG{l+m+mi}{3}       \PYG{l+m+mi}{2}           \PYG{n}{Libre}
\PYG{n}{X25F0002} \PYG{l+m+mi}{0000}    \PYG{n}{RX25F002}  \PYG{n}{Libre}     \PYG{l+m+mi}{3}       \PYG{l+m+mi}{2}           \PYG{n}{Libre}
\PYG{n}{X25G0001} \PYG{l+m+mi}{0000}    \PYG{n}{RX25G001}  \PYG{n}{Libre}     \PYG{l+m+mi}{1}       \PYG{l+m+mi}{2}           \PYG{n}{Libre}
\PYG{n}{X25G0002} \PYG{l+m+mi}{0000}    \PYG{n}{RX25G002}  \PYG{n}{Libre}     \PYG{l+m+mi}{1}       \PYG{l+m+mi}{2}           \PYG{n}{Libre}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{REPEATED} \PYG{n}{DEFINITION} \PYG{n}{WITHOUT} \PYG{n}{PSEUDO}\PYG{o}{\PYGZhy{}}\PYG{n}{PRINTER}

\PYG{n}{Terminal} \PYG{n}{Répété}  \PYG{n}{Relais}    \PYG{n}{Entrée}    \PYG{n}{Type}    \PYG{n}{Compression} \PYG{l+m+mi}{2}\PYG{n}{eme} \PYG{n}{Relais}

\PYG{n}{X25F0001} \PYG{l+m+mi}{0004}    \PYG{n}{RX25F001}  \PYG{n}{Libre}     \PYG{l+m+mi}{3}       \PYG{l+m+mi}{2}           \PYG{n}{Libre}
\PYG{n}{X25G0001} \PYG{l+m+mi}{0004}    \PYG{n}{RX25G001}  \PYG{n}{Libre}     \PYG{l+m+mi}{3}       \PYG{l+m+mi}{2}           \PYG{n}{Libre}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{EXPLICIT} \PYG{n}{DEFINITION} \PYG{n}{WITH} \PYG{n}{PSEUDO}\PYG{o}{\PYGZhy{}}\PYG{n}{PRINTER}

\PYG{n}{Terminal} \PYG{n}{Répété}  \PYG{n}{Relais}    \PYG{n}{Entrée}    \PYG{n}{Type}    \PYG{n}{Compression} \PYG{l+m+mi}{2}\PYG{n}{eme} \PYG{n}{Relais}

\PYG{n}{FICTF001} \PYG{l+m+mi}{0000}    \PYG{n}{IMPRF001}  \PYG{n}{Vide}      \PYG{l+m+mi}{2}       \PYG{l+m+mi}{0}
\PYG{n}{FICTF002} \PYG{l+m+mi}{0000}    \PYG{n}{IMPRF002}  \PYG{n}{Vide}      \PYG{l+m+mi}{2}       \PYG{l+m+mi}{0}
\PYG{n}{FICTG001} \PYG{l+m+mi}{0000}    \PYG{n}{IMPRG001}  \PYG{n}{Vide}      \PYG{l+m+mi}{2}       \PYG{l+m+mi}{0}
\PYG{n}{FICTG002} \PYG{l+m+mi}{0000}    \PYG{n}{IMPRG002}  \PYG{n}{Vide}      \PYG{l+m+mi}{2}       \PYG{l+m+mi}{0}
\PYG{n}{X25F0001} \PYG{l+m+mi}{0000}    \PYG{n}{RX25F001}  \PYG{n}{Libre}     \PYG{l+m+mi}{3}       \PYG{l+m+mi}{2}           \PYG{n}{IMPRF001}
\PYG{n}{X25F0002} \PYG{l+m+mi}{0000}    \PYG{n}{RX25F002}  \PYG{n}{Libre}     \PYG{l+m+mi}{3}       \PYG{l+m+mi}{2}           \PYG{n}{IMPRF002}
\PYG{n}{X25G0001} \PYG{l+m+mi}{0000}    \PYG{n}{RX25G001}  \PYG{n}{Libre}     \PYG{l+m+mi}{1}       \PYG{l+m+mi}{2}           \PYG{n}{IMPRG001}
\PYG{n}{X25G0002} \PYG{l+m+mi}{0000}    \PYG{n}{RX25G002}  \PYG{n}{Libre}     \PYG{l+m+mi}{1}       \PYG{l+m+mi}{2}           \PYG{n}{IMPRG002}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{DEFINITION} \PYG{n}{REPETEE} \PYG{n}{AVEC} \PYG{n}{IMPRIMANTE} \PYG{n}{FICTIVE}

\PYG{n}{Terminal} \PYG{n}{Répété}  \PYG{n}{Relais}    \PYG{n}{Entrée}    \PYG{n}{Type}    \PYG{n}{Compression} \PYG{l+m+mi}{2}\PYG{n}{eme} \PYG{n}{Relais}

\PYG{n}{FICTF001} \PYG{l+m+mi}{0002}    \PYG{n}{IMPRF001}  \PYG{n}{Vide}      \PYG{l+m+mi}{2}       \PYG{l+m+mi}{0}
\PYG{n}{FICTG001} \PYG{l+m+mi}{0002}    \PYG{n}{IMPRG001}  \PYG{n}{Vide}      \PYG{l+m+mi}{2}       \PYG{l+m+mi}{0}
\PYG{n}{X25F0001} \PYG{l+m+mi}{0002}    \PYG{n}{RX25F001}  \PYG{n}{Libre}     \PYG{l+m+mi}{3}       \PYG{l+m+mi}{2}           \PYG{n}{IMPRF001}
\PYG{n}{X25G0001} \PYG{l+m+mi}{0002}    \PYG{n}{RX25G001}  \PYG{n}{Libre}     \PYG{l+m+mi}{1}       \PYG{l+m+mi}{2}           \PYG{n}{IMPRG001}
\end{sphinxVerbatim}

The value entered in the “2nd Relay” field of an X25 terminal corresponds to the value in the “Relay” field of the pseudo-printer definition. Pseudo-printer definitions are type 2 and do not correspond to any terminal known to VTAM.

\index{Connection Modes@\spxentry{Connection Modes}!Logical Terminals@\spxentry{Logical Terminals}}\index{Logical Terminals@\spxentry{Logical Terminals}!Connection Modes@\spxentry{Connection Modes}}\ignorespaces 

\subsection{Logical terminals}
\label{\detokenize{connectivity_guide:logical-terminals}}\label{\detokenize{connectivity_guide:index-148}}
It is possible to assign a physical terminal to a relay when a transaction connects the terminal to an application, instead of when the terminal connects to VIRTEL. An example of such a definition is:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{PHYSICAL} \PYG{n}{TERMINAL} \PYG{n}{DEFINITION}

\PYG{n}{Terminal} \PYG{n}{Repeat}  \PYG{n}{Relay}    \PYG{n}{Entry}    \PYG{n}{Type}    \PYG{n}{Compression} \PYG{l+m+mi}{2}\PYG{n}{nd} \PYG{n}{Relay}

\PYG{n}{TERM0001} \PYG{l+m+mi}{0050}    \PYG{o}{*}\PYG{n}{POOL001} \PYG{n}{Free}     \PYG{n}{Free}    \PYG{l+m+mi}{2}           \PYG{n}{Empty}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{DEFINITION} \PYG{n}{OF} \PYG{l+m+mi}{3} \PYG{n}{GROUPS} \PYG{n}{OF} \PYG{n}{RESERVED} \PYG{n}{TERMINALS}

\PYG{n}{Terminal} \PYG{n}{Repeat}  \PYG{n}{Relay}    \PYG{n}{Entry}    \PYG{n}{Type}    \PYG{n}{Compression} \PYG{l+m+mi}{2}\PYG{n}{nd} \PYG{n}{Relay}

\PYG{n}{TRESA001} \PYG{l+m+mi}{0005}    \PYG{n}{RELAYA01} \PYG{n}{Free}     \PYG{l+m+mi}{2} \PYG{o+ow}{or} \PYG{l+m+mi}{3}  \PYG{l+m+mi}{2}           \PYG{n}{Free}
\PYG{n}{TRESB001} \PYG{l+m+mi}{0050}    \PYG{n}{RELAYB01} \PYG{n}{Free}     \PYG{l+m+mi}{3} \PYG{o+ow}{or} \PYG{l+m+mi}{3}  \PYG{l+m+mi}{2}           \PYG{n}{Free}
\PYG{n}{TRESC001} \PYG{l+m+mi}{0002}    \PYG{n}{RELAYC01} \PYG{n}{Free}     \PYG{l+m+mi}{3} \PYG{o+ow}{or} \PYG{l+m+mi}{3}  \PYG{l+m+mi}{2}           \PYG{n}{Free}
\end{sphinxVerbatim}

The 3 groups of terminals contain the value *POOL001 under the heading “*Pool name” in their definition. When virtual printers are associated with a logical pool, they must be defined as fixed explicit or repeated entries \textendash{} they cannot be placed in a logical pool.

\index{Controlling LUNAMEs@\spxentry{Controlling LUNAMEs}}\ignorespaces 

\chapter{Controlling LUNAMEs - LU Nailing}
\label{\detokenize{connectivity_guide:controlling-lunames-lu-nailing}}\label{\detokenize{connectivity_guide:v460cn-forceluname}}\label{\detokenize{connectivity_guide:index-149}}

\section{Introduction}
\label{\detokenize{connectivity_guide:id72}}
In this section we look at how we can control LUNAME selection for inbound HTTP calls, sometimes referred to as LU nailing. When a user connects to a 3270 application through VIRTEL Web Access, VIRTEL makes it appear to the application as if the user is connecting from a virtual 3270 terminal. In VTAM terms a virtual 3270 terminal is called a \sphinxstyleemphasis{Logical Unit} or \sphinxstyleemphasis{LU}, and each LU has a unique eight character name (\sphinxstyleemphasis{LU name)}. VIRTEL has at its disposal a pool of LUs known to VTAM, whose names are specified in the VIRTEL configuration file (the VIRARBO file). Normally when a user connects to a 3270 application, VIRTEL chooses any available LU from the pool.

While most mainframe applications will accept a connection from any LU name, certain applications (particularly applications which run under IMS) are sensitive to the LU name because they assign permissions to the user based upon the LU name of the user’s terminal. LU nailing allows VIRTEL to assign a particular LU name to a user based one of the following :-
\begin{itemize}
\item {} 
By IP address

\item {} 
By cookie

\item {} 
By URL

\end{itemize}

Virtel Rules can be used to associate a user with a LU name based on a variety of different criteria. For example such as a user’s e-mail address {[}Correspondent Management{]} which in this case, the user is identified by a “Cookie” which the browser presents to VIRTEL with the HTTP request. See {\hyperref[\detokenize{connectivity_guide:v460cn-virtelrules}]{\sphinxcrossref{\DUrole{std,std-ref}{“Virtel Rules”,}}}} for further information on Virtel Rules. The following sections go through examples of how to nail or control LU Name allocation.


\section{LU Nailing By URL}
\label{\detokenize{connectivity_guide:lu-nailing-by-url}}
The URL can contain information which can be used to force a specific LUNAME to be used. This is done by by using either the FORCELUNAME= keyword or by using the \sphinxstyleemphasis{UserData} parameter in the URL. The userdata can be provide through a batch job or may be directly coded. These three methods are what is refered to as \sphinxstylestrong{Predefined terminal definitions}. This means that the terminals must be physically defined and related to a logical pool of Virtel terminals.

Using \sphinxstyleemphasis{UserData} to select an LU name requires that a rule be associated with the line whereas this is not required for the ForceLUNAME option. The rule is used to determine the action taken on processing the UserData. Coding the desired LU name, or alternatively an LU name prefix terminated by an asterisk, in the “Parameter” field of the Virtel Rule which selects the incoming HTTP request. Alternatively, if the value \$URL\$ is entered in the “Parameter” field of the Virtel rule, then the desired LU name will be taken from the userdata supplied in the caller’s URL (see “VIRTEL URL formats: Dynamic pages” in the VIRTEL Web Access Guide).

For example:-

\sphinxurl{http://192.168.170.33:41003/w2h/appmenu}.htm+applist+\%P1\%                Passing through a work station name. P1 will be defined through a batch job.

or

\sphinxurl{http://192.168.170.33:41003/w2h/appmenu.htm+applist+myluname}            UserData example

or

\sphinxurl{http://n.n.n.n:41002/w2h/web2ajax.htm+IMS+ForceLUNAME=RLHVT500}          ForceLUNAME example

\index{Controlling LUNAMEs@\spxentry{Controlling LUNAMEs}!UserData and ForceLUNAME examples; Batch work station name@\spxentry{UserData and ForceLUNAME examples; Batch work station name}}\index{UserData and ForceLUNAME examples; Batch work station name@\spxentry{UserData and ForceLUNAME examples; Batch work station name}!Controlling LUNAMEs@\spxentry{Controlling LUNAMEs}}\ignorespaces 

\subsection{UserData example using a work station name}
\label{\detokenize{connectivity_guide:userdata-example-using-a-work-station-name}}\label{\detokenize{connectivity_guide:index-150}}
In this example we use a batch job on the user’s PC to initiate a session with Virtel. The batch job obtains the terminal name of the work station, opens a browser window and passes the work station name through to Virtel. Using a Virtel RULE we can test the name of the workstation and assign a particular relay LUNAME from a Virtel terminal POOL.

Here is an example of a Virtel RULE.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{RULE} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{ESH0000}\PYG{p}{,}
\PYG{n}{RULESET}\PYG{o}{=}\PYG{n}{E}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}\PYG{p}{,}
\PYG{n}{STATUS}\PYG{o}{=}\PYG{n}{ACTIVE}\PYG{p}{,}
\PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Rule for terminal EHPMA00}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
\PYG{n}{ENTRY}\PYG{o}{=}\PYG{n}{EDSWHOST}\PYG{p}{,}
\PYG{n}{PARAM}\PYG{o}{=}\PYG{n}{EHPMA000}\PYG{p}{,}
\PYG{n}{NETMASK}\PYG{o}{=}\PYG{l+m+mf}{255.255}\PYG{o}{.}\PYG{l+m+mf}{255.255}\PYG{p}{,}
\PYG{n}{USERDATA}\PYG{o}{=}\PYG{p}{(}\PYG{n}{EQUAL}\PYG{p}{,}\PYG{n}{HOLT}\PYG{o}{\PYGZhy{}}\PYG{n}{W}\PYG{p}{)}
\end{sphinxVerbatim}

The rule instructs Virtel to test the \sphinxstylestrong{UserData} field passed in a URL and if it matches the string HOLT-W than to assign an LU name of EHPMA000 and directs the terminal call to use an entry point of EDSWHOST. A static rule would have to be built for each unique work station name.

Getting the PC workstation name to Virtel is through a batch job which fires up the default browser and passes the work station name as a user
data parameter. Here is an example:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{title} \PYG{n}{Test} \PYG{n}{Propagation} \PYG{n}{of} \PYG{n}{Userdata} \PYG{n}{Parameter}
\PYG{n+nd}{@echo} \PYG{n}{on}
\PYG{n}{color} \PYG{l+m+mi}{1}\PYG{n}{f}
\PYG{n+nb+bp}{cls}
\PYG{n}{SET} \PYG{n}{P1}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{n}{COMPUTERNAME}\PYG{p}{:}\PYG{o}{\PYGZti{}}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{6}\PYG{o}{\PYGZpc{}}
\PYG{n}{start} \PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.33}\PYG{p}{:}\PYG{l+m+mi}{41003}\PYG{o}{/}\PYG{n}{w2h}\PYG{o}{/}\PYG{n}{appmenu}\PYG{o}{.}\PYG{n}{htm}\PYG{o}{+}\PYG{n}{applist}\PYG{o}{+}\PYG{o}{\PYGZpc{}}\PYG{n}{P1}\PYG{o}{\PYGZpc{}} \PYG{o}{\PYGZam{}}\PYG{n}{goto}\PYG{p}{:}\PYG{n}{eof}
\PYG{p}{:}\PYG{n}{exit}
\end{sphinxVerbatim}

The SET command takes the first six characters of the work station name and passes it into the start command. Following the Virtel transaction I wish to execute which in this case is an APPLIST menu list. The start command will open a default browser window and connect to Virtel:-

\sphinxincludegraphics[width=5.16667in,height=3.98405in]{{image91}.png}

\sphinxstyleemphasis{Passing User Data to Virtel}

When a transaction is selected from the menu list the RULE will be invoked to allocate the correct LUNAME.

\sphinxincludegraphics[width=5.16667in,height=3.93654in]{{image92}.png}

\sphinxstyleemphasis{Selecting a LU name through a rule and work station id in the URL}

The Virtel RULE has forced an LU name prefixed EHPMA000 to be used from the VIRTEL terminal pool associated with the Virtel line. In this case relay LUNAME EHPMA000 has been allocated. The physical terminal name, EHPMA000 need not be the same as the LU relay name but the LU relay name must be associated with the transaction prefix and must be defined to VTAM.

\index{Controlling LUNAMEs@\spxentry{Controlling LUNAMEs}!UserData example using a LU Name@\spxentry{UserData example using a LU Name}}\index{UserData example using a LU Name@\spxentry{UserData example using a LU Name}!Controlling LUNAMEs@\spxentry{Controlling LUNAMEs}}\ignorespaces 

\subsection{UserData example using a LU Name}
\label{\detokenize{connectivity_guide:userdata-example-using-a-lu-name}}\label{\detokenize{connectivity_guide:index-151}}
Instead of passing a work station name in the user data field of the URL in this example we are passing an LU name. Again with a Virtel RULE we can extract the user data parameter from the URL and use that as the Virtel relay LUNAME name.

\sphinxurl{http://192.168.170.33:41003/w2h/appmenu.htm+applist+EHPMA00*}

For this example the rule looks like:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
RULE ID=ESH0001,
RULESET=E\PYGZhy{}HTTP,
STATUS=ACTIVE,
DESC=\PYGZsq{}Rule for terminal EHPMA00\PYGZsq{},
ENTRY=EDSWHOST,
PARAM=\PYGZdl{}URL\PYGZdl{},
NETMASK=255.255.255.255
\end{sphinxVerbatim}

We use the special PARAM=\$URL\$ which indicates that the VTAM LU Name to be used is the user data passed in the URL.

\sphinxincludegraphics[width=6.26806in,height=4.76736in]{{image93}.png}

\sphinxstyleemphasis{Using \$URL\$ to pass a LU name in the URL}

The user data in the URL, in this case EHPMA00*, will be added to each transaction in the APPLIST menu and used as the Virtel relay LUNAME. When connecting to an application VIRTEL will use the LU name defined in the URL. In this example we are using a generic LUNAME which supports a range from EHPMA000 through to EHPMA009.

\index{Controlling LUNAMEs@\spxentry{Controlling LUNAMEs}!Using an LU Name with no predefined terminal@\spxentry{Using an LU Name with no predefined terminal}}\index{Using an LU Name with no predefined terminal@\spxentry{Using an LU Name with no predefined terminal}!Controlling LUNAMEs@\spxentry{Controlling LUNAMEs}}\ignorespaces 

\subsection{ForceLUNAME Example}
\label{\detokenize{connectivity_guide:forceluname-example}}\label{\detokenize{connectivity_guide:index-152}}
In the preceding examples both required that a physical terminal and relays be predefined and associated with a logical pool of terminals. For some installations this could be a maintenance headache and doesn’t scale up very well. It is possible for an HTTP client to connect to VIRTEL with a parameter specifying an arbitrary VTAM LU name to be used as relay name for host applications. For this to work, four conditions must be fulfilled:-
\begin{itemize}
\item {} 
the VTAM LU name should be specified in the connection URL. For example, if the desired LU name is RLHVT500:

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{n}\PYG{o}{.}\PYG{n}{n}\PYG{o}{.}\PYG{n}{n}\PYG{o}{.}\PYG{n}{n}\PYG{p}{:}\PYG{l+m+mi}{41002}\PYG{o}{/}\PYG{n}{w2h}\PYG{o}{/}\PYG{n}{web2ajax}\PYG{o}{.}\PYG{n}{htm}\PYG{o}{+}\PYG{n}{IMS}\PYG{o}{+}\PYG{n}{ForceLUNAME}\PYG{o}{=}\PYG{n}{RLHVT500}
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
the VIRTEL transaction must specifiy \$LINE\$ in the “Pseudo-terminals” field instead of a terminal name prefix.

\item {} 
the HTTP line must specify a pool name

\item {} 
a terminal pool of the same name should be defined; only the pool is needed, not the predefined pseudo- terminals that are normaly defined alongside a pool. The terminal and printer pseudo-terminals will be automatically generated using the pool as a template together with the relay name specified in the ForceLUNAME parameter of the URL.

\end{itemize}

The ForceLUNAME=luname parameter in the URL is valid only for transactions which specify TERMINAL=\$LINE\$ when attached to a line which has an associated terminal pool.

In this example the transaction whose external name is IMS defined under entry point CLIWHOST. The terminal prefix in the transaction definition is \$LINE\$:

\sphinxincludegraphics{{image12}.png}
\sphinxstyleemphasis{Transaction definition using non-predefined LU names}

The definition of line C-HTTP on port 41002 specifies *MYPOOL as the line pool name:

\sphinxincludegraphics{{image13}.png}
\sphinxstyleemphasis{HTTP line definition using non-predefined LU names}

The definition of the terminal pool *MYPOOL contains mask characters in the “Relay” and “2nd relay” fields. When a terminal is dynamically created, each “=” sign is substituted by the corresponding character in the ForceLUNAME parameter of the URL:

\sphinxincludegraphics{{image14}.png}
\sphinxstyleemphasis{Terminal pool definition using non-predefined LU names}

..note:
\begin{quote}

The name of the pool is only used to match the pool to its associated line.
\end{quote}

Using these definitions with URL parameter ForceLUNAME=RLHVT500 will dynamically generate two pseudo- terminals: RLHVT500 for the terminal session, and RLHPR500 for the associated printer.

The TCT option RTERM= can be used to check that ForceLUNAME parameter. If RTERM=classname is specified in the TCT than a RACHECK against the ForcedLUNAME will be executed to ensure that the luname is allowed for a particular user.

\begin{sphinxadmonition}{note}{Note:}
The presence of a ForceLUNAME=luname parameter in the URL implies \$UseCookieSession\$. If a valid VirtelSession cookie is supplied, which corresponds to a currently active session, then the request will be reconnected to that session. If no VirtelSession cookie is present, or if the cookie does not correspond to any currently open session, then an LU name will be constructed by applying the value of the ForceLUNAME parameter with the mask specified in the pool associated with the line. If the LU name constructed in the preceding step is already in use then the request will be rejected with HTTP code 406. Otherwise a new session will be opened using the constructed LU name.
\end{sphinxadmonition}

\newpage

\index{Controlling LUNAMEs@\spxentry{Controlling LUNAMEs}!LU Nailing by cookie@\spxentry{LU Nailing by cookie}}\index{LU Nailing by cookie@\spxentry{LU Nailing by cookie}!Controlling LUNAMEs@\spxentry{Controlling LUNAMEs}}\ignorespaces 

\section{LU Nailing by cookies}
\label{\detokenize{connectivity_guide:lu-nailing-by-cookies}}\label{\detokenize{connectivity_guide:index-153}}
Virtel also can use cookies to select a relay LU name. Virtel uses a cookie as a part of the “Correspondence Sub Application’. Within the cookie sent to Virtel is a security token. This token is used to identify a user and their associated VTAM LU relay name. A Correspondent file is used to maintain the user details. The cookie can be sent to the user as part of an Email from which the user selects a link to access Virtel or it can be part of the ‘self-registration’ process. The following section details the process of setting up LU nailing with cookies delivered by email.


\subsection{Setting up the SMTP line}
\label{\detokenize{connectivity_guide:setting-up-the-smtp-line}}
The procedure consists of defining a user, associating an LU name with the user, and sending the user an e-mail containing a browser cookie.  When the user’s browser subsequently connects to a mainframe application such as IMS or CICS via VIRTEL Web Access, VIRTEL recognizes the security code contained in the cookie and assigns the designated LU name to the user during communication with the application. In this procedure we will use a special LINE definition - the SMTP line.

In VIRTEL terms, a user identified by cookie is known as a “correspondent”.  The cookie is initially delivered to the correspondent by e-mail, so before you can activate a correspondent, you have to make sure that you have your VIRTEL SMTP line correctly configured. You can add an SMTP line to the VIRTEL configuration by running the ARBOLOAD job in the VIRTEL CNTL library. If you did not already do so at VIRTEL installation time, specify SMTP=YES in the options at the start of the job, and rerun ARBOLOAD which will add an SMTP line named S-SMTP to the VIRTEL configuration file.  Now stop and restart the VIRTEL STC.

Next, logon to VIRTEL via TN3270 and choose F1=Admin then F1=Lines.  Put the cursor on line S-SMTP and press F12.  In “remote ident” you need to put the IP address and port number of your SMTP server (this will normally be the same SMTP server as you have configured in your desktop e-mail client).  Leave “local ident” unchanged, we do not use it since VIRTEL will not be receiving any incoming e-mails for this application.  Fill in the “description” field as defined in the VIRTEL Connectivity Reference manual.

Press F1 to save the updated line definition. Then stop and start the SMTP line using these MVS commands:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{F} \PYG{n}{VIRTEL}\PYG{p}{,}\PYG{n}{LINE}\PYG{o}{=}\PYG{n}{S}\PYG{o}{\PYGZhy{}}\PYG{n}{SMTP}\PYG{p}{,}\PYG{n}{P}
\PYG{n}{F} \PYG{n}{VIRTEL}\PYG{p}{,}\PYG{n}{LINE}\PYG{o}{=}\PYG{n}{S}\PYG{o}{\PYGZhy{}}\PYG{n}{SMTP}\PYG{p}{,}\PYG{n}{S}
\end{sphinxVerbatim}


\subsection{Setting up the rules for LU nailing with cookies}
\label{\detokenize{connectivity_guide:setting-up-the-rules-for-lu-nailing-with-cookies}}
A set of “rules” attached to the VIRTEL HTTP line determines how VIRTEL processes incoming requests.  To see the rules attached to an HTTP line, go to the VIRTEL Configuration Menu and press F1=Lines, then put the cursor on the name of the line and press F5=Rules.  The list of rules attached to the W-HTTP line (port 41001) is shown below:

\sphinxincludegraphics{{image129}.png}

\sphinxstyleemphasis{Rules for line W-HTTP}

Normally all requests are processed by a default “catch-all” rule.  For the W-HTTP line the default rule is named WHT00200.  This default rule assigns an entry point (in this case WEB2HOST) and selects the next available LU from the terminal pool *W2HPOOL.  When LU nailing with cookies is in effect, a different rule WHT00100 is selected for users who present a cookie containing a valid security code.  This rule also assigns entry point WEB2HOST, but the LU name is obtained from the user’s correspondent record.

\sphinxincludegraphics{{image130}.png}

\sphinxstyleemphasis{Rule for LU nailing by cookie}

The rule for LU nailing has the special value \$COOKIE\$ in the “Parameter” field.  This value has a two-fold meaning: firstly, it ensures that the rule is matched only for users who present a cookie containing a valid security code, and secondly, it indicates to VIRTEL that the LU name is taken from “VTAM name” field in the user’s correspondent record.
Users who do not present a cookie, or whose cookie contains an invalid or expired security code, will not match this rule and will drop through to the next rule, which in this example is the “catch-all” rule WHT00200.


\subsection{Defining a user}
\label{\detokenize{connectivity_guide:defining-a-user}}
Now you can define your first user.  From the VIRTEL Configuration Menu, press F5=Correspondents.  At the “List of correspondents” panel, press F12 then fill in these fields:

\sphinxincludegraphics{{image131}.png}

\sphinxstyleemphasis{Correspondent detail screen (e-mail correspondent)}
\begin{itemize}
\item {} 
Replace \sphinxhref{mailto:john.user@whatever.com}{john.user@whatever.com} by the user’s e-mail address.

\item {} 
Replace 192.168.5.30 by the host IP address where VIRTEL is running

\item {} 
Replace RHTVT003 by the LU name to be assigned to this user

\end{itemize}

\begin{sphinxadmonition}{note}{Note:}
The LU name must be defined in a VIRTEL pool.
\end{sphinxadmonition}

Leave the “Rule Set” and “Directory” fields blank. Now press Enter. You should get the message “CREATION OK”. For further information on “Correspondent Mangement” refer to the Virtel Users Guide.


\subsection{Delivering the cookie via e-mail}
\label{\detokenize{connectivity_guide:delivering-the-cookie-via-e-mail}}
Next we will send the cookie to the user.

In the “CORRESPONDENT DETAIL DEFINITION” panel, press F4=Activate. The message “ACTIVATION WAS REQUESTED” indicates that VIRTEL has sent the cookie to the user via the SMTP server.

If this is the first time you have tried sending an e-mail from VIRTEL, then it is quite possible that it will fail if the configuration is not yet correct.  If the e-mail does not arrive at the user’s workstation, then enter the following MVS command:

F VIRTEL,TRACE,L=S-SMTP

then press F4=Activate again to generate a trace of VIRTEL’s dialog with the SMTP server.  The dialog is traced in the SYSPRINT dataset of the VIRTEL started task (use SDSF to see it). From this you should be able to see what the problem is.

Common problems are:
\begin{itemize}
\item {} 
codepage problem (the e-mail address in the MAIL TO command should contain an @ sign. If it does not, then check that the COUNTRY parameter in the VIRTCT matches your host codepage)

\item {} 
the SMTP server does not accept VIRTEL’s HELO or MAIL FROM command, check that the userid and hostname specified in the “description” field of the S-SMTP line are values which are acceptable to your mailserver.  You may need to liaise with the company’s e-mail administrator to agree on appropriate values.

\end{itemize}


\subsection{Installing the cookie on the browser}
\label{\detokenize{connectivity_guide:installing-the-cookie-on-the-browser}}
When the e-mail arrives at the user’s workstation, it will contain a hyperlink to a VIRTEL page.  The user clicks on this hyperlink to install the cookie in his browser.

One point to note here: the desktop administrator may have set the security settings to inhibit the browser from storing cookies on the user’s workstation.  Often the simplest solution to this problem is make sure that the browser recognizes VIRTEL’s IP address as being in the “Local Intranet” zone, and not the “Internet” zone.  You can verify the zone by looking at the icon in the bottom right hand corner of the Internet Explorer screen when the VIRTEL web page is displayed.  If it says “Internet” then you need to click “Tools - Internet Options - Security - Local Intranet - Sites \textendash{} Advanced” and add VIRTEL’s IP address to the list.


\subsection{Using the cookie}
\label{\detokenize{connectivity_guide:using-the-cookie}}
Having installed the cookie on the workstation, now whenever this user calls up a VIRTEL web page, VIRTEL will recognize that the cookie matches the one previously sent to john.user, and so it will assign the LU name RHTVT003 when connecting to a host application.

\newpage

\index{Controlling LUNAMEs@\spxentry{Controlling LUNAMEs}!Using an IP address@\spxentry{Using an IP address}}\index{Using an IP address@\spxentry{Using an IP address}!Controlling LUNAMEs@\spxentry{Controlling LUNAMEs}}\ignorespaces 

\section{LU Nailing by IP address}
\label{\detokenize{connectivity_guide:lu-nailing-by-ip-address}}\label{\detokenize{connectivity_guide:index-154}}
The Virtel Rules attached to the HTTP line allow the LU name to be selected according to the caller’s IP address, by using the fields “IP Subnet” and “Mask” in the rule to match with an IP address or range of IP addresses. In the example below we define a rule on line E-HTTP which will force a terminal connecting with IP address 192.168.092.080 to use LU name EHVTA100. The LU name must be pre-defined in a Virtel terminal pool.

\sphinxincludegraphics{{image121}.png}
\sphinxstyleemphasis{Rule to map IP address 192.168.092.080 to LU name EHVTA100}

Multiple terminals can be defined with a rule by using the * suffix in the parameter field. In the following example a range of IP address is mapped to a pool of LU names. Address range 192.168.092.0 through to 192.168.092.255 will be assigned the next unused LU name in the range EHVTA2\%\%.

\sphinxincludegraphics{{image122}.png}
\sphinxstyleemphasis{Rule to map IP range 192.168.092.0 to LU names starting EHVTA2\%\%}

This rule is named EHRLE200, the “IP Subnet” field specifies the IP address 192.168.092.000, and the “Mask” is set to 255.255.255.000 to indicate that only the first three octets of the IP address are tested to determine whether the rule matches the IP address of the client browser. The “parameter” field specifies a generic LU name EHVTA2* which signifies that any LU whose name begins with EHVTA2 may be assigned to clients whose IP address matches this rule. If we open two Virtel sessions from a device whose IP address is 192.168.92.80 we can see that the rule is matched, message VIRHT281, and the VTAM relays assigned are from the EHVTA200 pool, starting at the highest avaiable LU name.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{VIRHT28I} \PYG{n}{HTTP}\PYG{o}{\PYGZhy{}}\PYG{n}{EDS} \PYG{n}{GETS} \PYG{n}{ENTRY} \PYG{n}{POINT} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{EDSHOST }\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{FROM} \PYG{n}{RULE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{EHRLE200}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{FOR}
\PYG{n}{CALLER} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{92.80}\PYG{p}{:}\PYG{l+m+mi}{51280}
\PYG{n}{VIRHT51I} \PYG{n}{HTTP}\PYG{o}{\PYGZhy{}}\PYG{n}{EDS} \PYG{n}{CONNECTING} \PYG{n}{EHVTA209} \PYG{n}{TO} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{92.80}\PYG{p}{:}\PYG{l+m+mi}{51280}
\PYG{n}{VIR0919I} \PYG{n}{EHVTA209} \PYG{n}{RELAY} \PYG{n}{EHVTA200}\PYG{p}{(}\PYG{n}{IPTRM200}\PYG{p}{)} \PYG{n}{ACTIVATED}
\PYG{n}{VIR0919I} \PYG{n}{EHVTA209} \PYG{n}{RELAY} \PYG{n}{EHVIM200}\PYG{p}{(}\PYG{n}{IPPRT200}\PYG{p}{)} \PYG{n}{ACTIVATED}
\PYG{n}{VIRHT28I} \PYG{n}{HTTP}\PYG{o}{\PYGZhy{}}\PYG{n}{EDS} \PYG{n}{GETS} \PYG{n}{ENTRY} \PYG{n}{POINT} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{EDSHOST }\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{FROM} \PYG{n}{RULE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{EHRLE200}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{FOR}
\PYG{n}{CALLER} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{92.80}\PYG{p}{:}\PYG{l+m+mi}{51280}
\PYG{n}{VIRHT51I} \PYG{n}{HTTP}\PYG{o}{\PYGZhy{}}\PYG{n}{EDS} \PYG{n}{CONNECTING} \PYG{n}{EHVTA208} \PYG{n}{TO} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{92.80}\PYG{p}{:}\PYG{l+m+mi}{51280}
\PYG{n}{VIR0919I} \PYG{n}{EHVTA208} \PYG{n}{RELAY} \PYG{n}{EHVTA201}\PYG{p}{(}\PYG{n}{IPTRM201}\PYG{p}{)} \PYG{n}{ACTIVATED}
\PYG{n}{VIR0919I} \PYG{n}{EHVTA208} \PYG{n}{RELAY} \PYG{n}{EHVIM201}\PYG{p}{(}\PYG{n}{IPPRT201}\PYG{p}{)} \PYG{n}{ACTIVATED}
\end{sphinxVerbatim}

The supporting terminal definitions look like :-

\sphinxincludegraphics{{image123}.png}
\sphinxstyleemphasis{Terminal definitions to support IP range}

When a device is “nailed” by a rule it takes the first predefined terminal in the range, in this case terminal IPTRM200(3270 name EHVTA200, Printer name EHVIM200). This pre-defined entry than grabs the highest availble pool entry from pool IPPOOL. IPPOOL supports 10 entries from the range EHVTA200 through to EHVTA209. Ten entries. Pool entry EHVTA209 is used to support the 3270 session.

Although it is recommended that terminal definitions should be defined with the same prefix as defined in the line statement it is not necessary. Here we have used a prefix of \sphinxstylestrong{IP} to define terminals that will be caught by the IP rule(s). The key name definition that \sphinxstylestrong{must} be adhered to is that the prefix of the terminal pool defintions, in this case EHVTA2\%\%, must begin with the transaction pseudo-terminals parameter. In this line definition the transactions associated with the Entry Point use a pseudo-terminals prefix of EHVTA.

Note the use of pattern characters when defining the range. In this example we have used \%\% when \% represents hexadecimal digist 0-9 and A-F. See {\hyperref[\detokenize{connectivity_guide:v460cn-patterncharacters}]{\sphinxcrossref{\DUrole{std,std-ref}{“Pattern characters”,}}}} for more information on how to define ranges with pattern characters.

\sphinxincludegraphics{{image124}.png}
\sphinxstyleemphasis{3270 session allocated from IP range}

\newpage

\index{Controlling LUNAMEs@\spxentry{Controlling LUNAMEs}!Comparison table@\spxentry{Comparison table}}\index{Comparison table@\spxentry{Comparison table}!Controlling LUNAMEs@\spxentry{Controlling LUNAMEs}}\ignorespaces 

\section{Comparison Table}
\label{\detokenize{connectivity_guide:comparison-table}}\label{\detokenize{connectivity_guide:index-155}}

\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|T|T|T|}
\hline
\sphinxstyletheadfamily 
Type
&\sphinxstyletheadfamily 
RULE Required
&\sphinxstyletheadfamily 
TERMINAL Definition Reqd.
&\sphinxstyletheadfamily 
COOKIES
&\sphinxstyletheadfamily 
Terminal POOL Reqd.
\\
\hline
By UserData
&
Yes. 1 per work station
&
Yes. Individual or group
&
No
&
Yes
\\
\hline
By \$URL\$ - LUNAME in URL
&
Yes. 1 generic Rule.
&
Yes. Individual or group
&
No
&
Yes
\\
\hline
ForceLUNAME
&
No
&
No
&
No
&
Yes
\\
\hline
By IP (Correspondent)
&
Yes
&
Yes
&
Yes
&
Yes
\\
\hline
By IP
&
Yes
&
Yes
&
No
&
Yes
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}

\index{AT-TLS Secure Session@\spxentry{AT-TLS Secure Session}}\ignorespaces 

\chapter{AT-TLS Secure Session}
\label{\detokenize{connectivity_guide:at-tls-secure-session}}\label{\detokenize{connectivity_guide:index-156}}

\section{Introduction}
\label{\detokenize{connectivity_guide:id73}}
This section provides details on on to implement AT-TLS security. To provide secure HTTP (https) sessions to client browsers, VIRTEL uses the Application Transparent Transport Layer Security (AT-TLS) feature of z/OS Communication Server. AT-TLS is included with z/OS V1R7 and later releases.

AT-TLS allows socket applications to access encrypted sessions by invoking system SSL within the transport layer of the TCP/IP stack. A Policy Agent task decides which connections are to use AT-TLS, and provides system SSL configuration for those connections. Virtel continues to send and receive clear text over the socket, but data sent over the network is encrypted and protected by system SSL. The supported protocols are TLS, SSLv3, and SSLv2.

\begin{sphinxadmonition}{warning}{Warning:}
Higher CPU usgage will result in the TCP/IP address space if this feature is used without the services of a hardware Crypto Card.
\end{sphinxadmonition}

\index{AT-TLS Secure Session@\spxentry{AT-TLS Secure Session}!Installation@\spxentry{Installation}}\index{Installation@\spxentry{Installation}!AT-TLS Secure Session@\spxentry{AT-TLS Secure Session}}\ignorespaces 

\section{Installation}
\label{\detokenize{connectivity_guide:installation}}\label{\detokenize{connectivity_guide:index-157}}

\subsection{Install Policy Agent procedure}
\label{\detokenize{connectivity_guide:install-policy-agent-procedure}}
If you do not already have the Communications Server Policy Agent (PAGENT) active in your z/OS system, copy the cataloged procedure EZAPAGSP from TCPIP.SEZAINST into your proclib, renaming it as PAGENT.


\subsection{Create the Policy Agent configuration file}
\label{\detokenize{connectivity_guide:create-the-policy-agent-configuration-file}}
If you do not already run the Policy Agent, you will need to create a configuration file /etc/pagent.conf using z/OS Unix System Services. If you already run Policy Agent, you will need to find the existing configuration file and add the TTLS definitions to it to support Virtel. Sample jobs are provided in the Virtel SAMPLIB library to assist in performing this step.


\subsubsection{Member SSLSETUP}
\label{\detokenize{connectivity_guide:member-sslsetup}}
Step PCONFIG in the SSLSETUP sample job contains a starter configuration. The following changes should be made:
\begin{itemize}
\item {} 
Replace \%virtjob\% by the name of your VIRTEL started task (SSLSETUP line 70)

\item {} 
Replace \sphinxstyleemphasis{41000-41002} by \sphinxstyleemphasis{41002} in the LocalPortRange parameter (SSLSETUP line 71) to activate AT-TLS for VIRTEL line C-HTTP

\item {} 
Replace \sphinxstyleemphasis{ServerWithClientAuth} by \sphinxstyleemphasis{Server} in the HandshakeRole parameter (SSLSETUP line 82) as we will not be using Client Certificates in the initial setup.

\end{itemize}


\subsection{Allow the Policy Agent to run during TCP/IP initialization}
\label{\detokenize{connectivity_guide:allow-the-policy-agent-to-run-during-tcp-ip-initialization}}
The Policy Agent must be given READ access to the resource EZB.INITSTACK.* in RACF class SERVAUTH. See step EZBAUTH in the SSLSETUP sample job (delivered in VIRTEL SAMPLIB).


\subsection{Create the server certificate}
\label{\detokenize{connectivity_guide:create-the-server-certificate}}
A server certificate for VIRTEL must be created, signed by a certificate authority, and stored in the RACF database. In the SSLSETUP sample job we create a signing certificate and use RACF itself as the certificate authority. Alternatively, you may use an external certificate authority such as Verisign to create and sign the certificate, then import it into RACF.

At SSLSETUP line 228, replace \%virtssl\% by the DNS name assigned to the VIRTEL host (for example, virtssl.syspertec.com)


\subsection{Add the certificate to the keyring}
\label{\detokenize{connectivity_guide:add-the-certificate-to-the-keyring}}
The server certificate must be added to the Virtel keyring - VIRTRING. See step CCERTIF in the SSLSETUP sample job.


\subsection{Allow VIRTEL to access its own certificate}
\label{\detokenize{connectivity_guide:allow-virtel-to-access-its-own-certificate}}
To allow VIRTEL to access its own keyring and server certificate, the VIRTEL started task must have READ access to the resource IRR.DIGTCERT.LISTRING in the RACF class FACILITY. See step IRRAUTH in the SSLSETUP sample job.


\subsection{Activate AT-TLS}
\label{\detokenize{connectivity_guide:activate-at-tls}}
To activate AT-TLS, add the following statements to TCPIP PROFILE:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{TCPCONFIG} \PYG{n}{TTLS}
\PYG{n}{AUTOLOG} \PYG{l+m+mi}{5} \PYG{n}{PAGENT} \PYG{n}{ENDAUTOLOG}
\end{sphinxVerbatim}

Stop and restart TCP/IP to activate the TCPCONFIG TTLS profile statement. The AUTOLOG statement will cause the PAGENT procedure to be started automatically during TCP/IP initialization.

\newpage

\index{AT-TLS Secure Session@\spxentry{AT-TLS Secure Session}!Operations@\spxentry{Operations}}\index{Operations@\spxentry{Operations}!AT-TLS Secure Session@\spxentry{AT-TLS Secure Session}}\ignorespaces 

\section{Operations}
\label{\detokenize{connectivity_guide:operations}}\label{\detokenize{connectivity_guide:index-158}}

\subsection{Starting the Policy Agent}
\label{\detokenize{connectivity_guide:starting-the-policy-agent}}
The AUTOLOG statement in the TCP/IP profile will start the PAGENT procedure automatically at TCP/IP initialization. Alternatively you can issue the MVS command \sphinxstylestrong{S PAGENT}.

\begin{sphinxadmonition}{note}{Note:}
if this is the first time you have activated the SERVAUTH class, you are likely to see RACF failure messages during TCP/IP initialization indicating that other applications are unable to access the resource EZB.INITSTACK. This is normal, because Communications Server uses this mechanism to prevent applications from accessing TCP/IP before the Policy Agent is started. Do not be tempted to authorize applications to use this RACF resource. Either ignore the messages (they will go away once PAGENT has started), or
ensure that PAGENT starts before all other applications.
\end{sphinxadmonition}


\subsection{Altering the Policy Agent configuration}
\label{\detokenize{connectivity_guide:altering-the-policy-agent-configuration}}
To make changes to the Policy Agent configuration file, either edit and resubmit the PCONFIG step of the SSLSETUP sample job, or use the TSO ISHELL command to edit the file /etc/pagent.conf directly from ISPF.

After you make changes to the Policy Agent configuration, use the MVS command \sphinxstylestrong{F PAGENT,REFRESH} to force PAGENT to reread the file.


\subsection{Logon to VIRTEL using secure session}
\label{\detokenize{connectivity_guide:logon-to-virtel-using-secure-session}}
To access VIRTEL line C-HTTP you must now use URL
\begin{quote}

\sphinxstyleemphasis{https://n.n.n.n:41002} instead of \sphinxstyleemphasis{http://n.n.n.n:41002}

(where n.n.n.n is the IP address of the z/OS host running VIRTEL).
\end{quote}

\newpage

\index{AT-TLS Secure Session@\spxentry{AT-TLS Secure Session}!Problem determination@\spxentry{Problem determination}}\index{Problem determination@\spxentry{Problem determination}!AT-TLS Secure Session@\spxentry{AT-TLS Secure Session}}\ignorespaces 

\section{Problem determination}
\label{\detokenize{connectivity_guide:problem-determination}}\label{\detokenize{connectivity_guide:index-159}}

\subsection{Policy Agent log file}
\label{\detokenize{connectivity_guide:policy-agent-log-file}}
Policy Agent startup messages are written to the /tmp/pagent.log file of z/OS Unix System Services. You can use the TSO ISHELL command to browse this file from ISPF.


\subsection{Common error messages}
\label{\detokenize{connectivity_guide:common-error-messages}}
Error messages relating to session setup are written to the MVS SYSLOG. The most common error message is:

\sphinxstylestrong{EZD1287I TTLS Error RC: nnn event}
\begin{quote}

where nnn represents a return code. Return codes under 5000 are generated by System SSL and are defined in the System SSL Programming manual. Return codes over 5000 are generated by AT-TLS and are defined in the IP Diagnosis Guide. Some commonly encountered return codes are:

7   No certificate

8   Certificate not trusted

109 No certification authority certificates

202 Keyring does not exist

401 Certificate expired or not yet valid

402 or 412 Client and server cannot agree on cipher suite

416 VIRTEL does not have permission to list the keyring

431 Certificate is revoked

434 Certificate key not compatible with cipher suite

435 Certificate authority unknown

5003 Browser sent clear text (http instead of https)

5006 SSL failed to initialize. Check job SSLSETUP.
\end{quote}

\sphinxstylestrong{VIRHT57E LINE IS NOT SET UP FOR HTTPS}
\begin{quote}

Means that the browser sent an https request, but it has not been decrypted by AT-TLS before being sent to VIRTEL, and VIRTEL has received the message in encrypted format. Normally this means the AT-TLS rules did not match the incoming request. This is not a Virtel configuration issue.
\end{quote}

\sphinxstylestrong{EZD1287I TTLS Error RC: 5003}
\begin{quote}

This is the opposite situation. It means that the AT-TLS rules matched the incoming request, and so AT-TLS was expecting to receive an https request, but it received an http request instead.
\end{quote}

Normally AT-TLS is transparent to VIRTEL. AT-TLS performs the decryption and transforms the https request into an http request before passing it to VIRTEL. The only case where VIRTEL is AT-TLS aware is when the VIRTEL transaction definition specifies SECURITY=3 (TLS) and in this case VIRTEL will check that the session has been processed by AT-TLS and will issue an IOCTL to obtain the userid associated with the certificate. In the normal case, you should specify HandshakeRole Server, ClientAuthType Full, and ApplicationControlled Off in the AT-TLS rules, as in the example in VIRT447.SAMPLIB(SSLSETUP).

VIRTEL does not issue an IOCTL to turn decryption on and off, so if you specified ApplicationControlled On then you would get VIRHT57E because AT-TLS has not been instructed to start decryption.

If you still get an error when you have ApplicationControlled Off then we will need to see the SYSLOG (for the EZD TTLS messages), the JESMSGLG from the VIRTEL started task, and the SYSPRINT resulting from a z/OS command F VIRTEL,SNAP immediately after the error occurs. We would also like to see the exact URL which was entered at the browser, as well as the AT-TLS pagent.conf file.


\subsection{Verifying AT-TLS is active}
\label{\detokenize{connectivity_guide:verifying-at-tls-is-active}}
To verify that AT-TLS is still activated, you can submit this MVS command:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{D} \PYG{n}{TCPIP}\PYG{p}{,}\PYG{p}{,}\PYG{n}{N}\PYG{p}{,}\PYG{n}{TTLS}
\end{sphinxVerbatim}

The response is:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{EZD0101I} \PYG{n}{NETSTAT} \PYG{n}{CS} \PYG{n}{V1R12} \PYG{n}{TCPIP} \PYG{l+m+mi}{378} \PYG{n}{TTLSGRPACTION} \PYG{n}{GROUP} \PYG{n}{ID} \PYG{n}{CONNS} \PYG{n}{VIRTELGROUP} \PYG{l+m+mi}{00000002} \PYG{l+m+mi}{0} \PYG{l+m+mi}{1} \PYG{n}{OF} \PYG{l+m+mi}{1} \PYG{n}{RECORDS} \PYG{n}{DISPLAYED} \PYG{n}{END} \PYG{n}{OF} \PYG{n}{THE} \PYG{n}{REPORT}
\end{sphinxVerbatim}

The UNIX command

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{pasearch}
\end{sphinxVerbatim}

displays the parameters used by PAGENT from /etc/pagent.conf

The TSO command:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{netstat} \PYG{n}{conn}
\end{sphinxVerbatim}

displays active connexions for the VIRTEL STC.

Once a connexion has been established between a client and a Virtel port, the TSO command:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{netstat} \PYG{n}{ttls} \PYG{n}{conn} \PYG{n}{nnnn} \PYG{n}{detail}
\end{sphinxVerbatim}

where nnnn is the identification of the connexion will display the AT-TLS parameters used in the Virtel connexion.

\newpage

\index{AT-TLS Secure Session@\spxentry{AT-TLS Secure Session}!The Cipher suites@\spxentry{The Cipher suites}}\index{The Cipher suites@\spxentry{The Cipher suites}!AT-TLS Secure Session@\spxentry{AT-TLS Secure Session}}\ignorespaces 

\section{The Cipher suites}
\label{\detokenize{connectivity_guide:the-cipher-suites}}\label{\detokenize{connectivity_guide:index-160}}
The client and server cipher specifications must contain at least one value in common. The TTLSEnvironmentAdvancedParms parameter of the Policy Agent configuration file allows you to turn on or off the SSLv2, SSLv3, and TLSv1 protocols at the server end. The list of supported cipher suites for each protocol is in the TTLSCipherParms parameter. Check the /tmp/pagent.log file to determine whether any cipher suites were discarded at startup time.

In Microsoft Internet Explorer, follow the menu \sphinxstyleemphasis{Tools \textendash{} Internet Options \textendash{} Advanced}. Under the security heading there are three options which allow you to enable or disable the SSL 2.0, SSL 3.0,and TLS 1.0 protocols. You cannot enable or disable individual cipher suites.

In Firefox the cipher specifications are accessed by typing \sphinxstyleemphasis{about:config} in the address bar and typing \sphinxstyleemphasis{security} in the filter box. By default, ssl2 is disabled, and ssl3 and tls are enabled. By default, all weak encryption cipher suites are disabled, and 128-bit or higher cipher suites are enabled.

\index{AT-TLS Secure Session@\spxentry{AT-TLS Secure Session}!Client certificates@\spxentry{Client certificates}}\index{Client certificates@\spxentry{Client certificates}!AT-TLS Secure Session@\spxentry{AT-TLS Secure Session}}\ignorespaces 

\section{Client certificates}
\label{\detokenize{connectivity_guide:client-certificates}}\label{\detokenize{connectivity_guide:index-161}}
Virtel can extract the userid of a user from a client certificate presented to Virtel during the SSL handshake. For this to occur the following must be true:-
\begin{itemize}
\item {} 
The HTTP session is secured using AT-TLS. URL = \sphinxurl{https://}….

\item {} 
The Policy Agent TTLSConnectionAction or TTLSEnvironmentAction statement contains the parameter “HandShakeRole ServerWithClientAuth”

\item {} 
The client has provided a valid certificate.

\item {} 
The security subsystem has validate the certificate as belonging to a user.

\item {} 
The Virtel transaction has Security = 3 defined.

\end{itemize}

If these conditions are met then the userid contained within the clients digital certificate can be extracted by Virtel and used in the signon process. In this process it is normal that a PASS Ticket is generated and associated with the extracted userid.

See the SAMPLIB members SSLSETUP and SSLUCERT for examples on setting up AT-TLS and client certificates.

\newpage

\index{AT-TLS Secure Session@\spxentry{AT-TLS Secure Session}!Resources@\spxentry{Resources}}\index{Resources@\spxentry{Resources}!AT-TLS Secure Session@\spxentry{AT-TLS Secure Session}}\ignorespaces 

\section{Resources}
\label{\detokenize{connectivity_guide:resources}}\label{\detokenize{connectivity_guide:index-162}}

\subsection{IBM Manuals}
\label{\detokenize{connectivity_guide:ibm-manuals}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZhy{}}  \PYG{n}{SA22}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{7683}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{07} \PYG{n}{z}\PYG{o}{/}\PYG{n}{OS} \PYG{n}{V1R7} \PYG{n}{Security} \PYG{n}{Server}\PYG{p}{:} \PYG{n}{RACF} \PYG{n}{Security} \PYG{n}{Administrator}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{s Guide Chapter 21. RACF and Digital Certificates}

\PYG{o}{\PYGZhy{}}  \PYG{n}{SC24}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{5901}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{04} \PYG{n}{z}\PYG{o}{/}\PYG{n}{OS} \PYG{n}{V1R6} \PYG{n}{Cryptographic} \PYG{n}{Services}\PYG{p}{:} \PYG{n}{System} \PYG{n}{SSL} \PYG{n}{Programming} \PYG{n}{Chapter} \PYG{l+m+mf}{12.} \PYG{n}{Messages} \PYG{o+ow}{and} \PYG{n}{Codes}

\PYG{o}{\PYGZhy{}}  \PYG{n}{SC31}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{8775}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{07} \PYG{n}{z}\PYG{o}{/}\PYG{n}{OS} \PYG{n}{V1R7} \PYG{n}{Communications} \PYG{n}{Server}\PYG{p}{:} \PYG{n}{IP} \PYG{n}{Configuration} \PYG{n}{Guide}
   \PYG{n}{Chapter} \PYG{l+m+mf}{14.} \PYG{n}{Policy}\PYG{o}{\PYGZhy{}}\PYG{n}{based} \PYG{n}{networking}
   \PYG{n}{Chapter} \PYG{l+m+mf}{18.} \PYG{n}{Application} \PYG{n}{Transparent} \PYG{n}{Transport} \PYG{n}{Layer} \PYG{n}{Security} \PYG{p}{(}\PYG{n}{AT}\PYG{o}{\PYGZhy{}}\PYG{n}{TLS}\PYG{p}{)} \PYG{n}{data} \PYG{n}{protection} \PYG{n}{Configuration} \PYG{n}{Reference}
   \PYG{n}{Chapter} \PYG{l+m+mf}{21.} \PYG{n}{Policy} \PYG{n}{Agent} \PYG{o+ow}{and} \PYG{n}{policy} \PYG{n}{applications}

\PYG{o}{\PYGZhy{}}  \PYG{n}{GC31}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{8782}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{06} \PYG{n}{z}\PYG{o}{/}\PYG{n}{OS} \PYG{n}{V1R7} \PYG{n}{Communications} \PYG{n}{Server}\PYG{p}{:}\PYG{o}{*} \PYG{n}{IP} \PYG{n}{Diagnosis} \PYG{n}{Guide}
   \PYG{n}{Chapter} \PYG{l+m+mf}{28.} \PYG{n}{Diagnosing} \PYG{n}{Application} \PYG{n}{Transparent} \PYG{n}{Transport} \PYG{n}{Layer} \PYG{n}{Security} \PYG{p}{(}\PYG{n}{AT}\PYG{o}{\PYGZhy{}}\PYG{n}{TLS}\PYG{p}{)}

\PYG{o}{\PYGZhy{}}  \PYG{n}{SC31}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{8784}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{05} \PYG{n}{z}\PYG{o}{/}\PYG{n}{OS} \PYG{n}{V1R7} \PYG{n}{Communications} \PYG{n}{Server}\PYG{p}{:} \PYG{n}{IP} \PYG{n}{Messages}\PYG{p}{:} \PYG{n}{Volume} \PYG{l+m+mi}{2} \PYG{p}{(}\PYG{n}{EZB}\PYG{p}{,} \PYG{n}{EZD}\PYG{p}{)}
   \PYG{n}{Chapter} \PYG{l+m+mf}{10.} \PYG{n}{EZD1xxxx} \PYG{n}{messages}
\end{sphinxVerbatim}


\subsection{Virtel Material}
\label{\detokenize{connectivity_guide:virtel-material}}\begin{itemize}
\item {} 
\sphinxtitleref{TN201407 Pass tickets and supporting Proxy Servers \textendash{} CA-SiteMinder© \& IBM Tivoli WebSeal©}

\item {} 
\sphinxtitleref{TN201416 Virtel TLS/SSL Security: Signing on using server and client certificates}

\end{itemize}

\index{SSO, Passtickets and Proxy Servers@\spxentry{SSO, Passtickets and Proxy Servers}}\ignorespaces 

\chapter{SSO, PassTickets and Proxy Servers}
\label{\detokenize{connectivity_guide:sso-passtickets-and-proxy-servers}}\label{\detokenize{connectivity_guide:index-163}}

\section{Introduction}
\label{\detokenize{connectivity_guide:id74}}
Many businesses now implement products which provide a centralized enterprise-class secure single sign-on (SSO) and authentication system. The products tend to run on a server(s) and provides access to a business’s assets like web enabled applications or portals. The basic process is to trap the incoming HTTP call request and establish some user credentials before llowing access to an asset. For example, the user credentials can be extracted from the callers request or determined by the callers IP address. The credentials will be validated against a LDAP or similar active directory server. The result of the validation will either allow or deny the caller access to the requested asset. Security and asset control is managed by the SSO server which as a central server can validate credentials to all business assets, be it on the mainframe or other platforms. Userid and password administration for all assets can be controlled through the functions of the SSO software employed. Virtel will integrate within this SSO infrastructure and process sign on request once they have passed validation. Virtel provides its own validation of the SSO server through the use of rules.

In the example that follows we are using CA-Site Minder as an example SSO Server and we will document how to define Virtel to interface with the SSO Server and RACF. Our target asset is a CICS application called SPCICSH. The caller will provide no userid or password data.

\sphinxincludegraphics{{image100}.png} \sphinxstyleemphasis{Data flow of an SSO session setup}

The initial request is passed through the SSO server. The server will trap and validate the caller. If the validation is successful a session will be establish between the SSO server and Virtel. Two things to note at this point. One, the IP address presented to Virtel will be that of the SSO Proxy Server and two, that the server will modify the HTTP headers to provide addition information, that being the source IP address and the user id.

A Virtel line trace will reveal these additional headers.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
GET /w2h/WEB2SUB.HTML++VirtelSession=AFo0JQAAAAMeuCAo+disconnect=1?pf=DISCONNECT HTTP/1.1
Host: 192.168.170.30:41002
User\PYGZhy{}Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:27.0) Gecko/20100101 Firefox/27.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,\PYGZbs{}*/\PYGZbs{}*;q=0.8
Accept\PYGZhy{}Language: en\PYGZhy{}gb,en;q=0.5
Accept\PYGZhy{}Encoding: gzip, deflate
Referer: http://192.168.170.30:41002/w2h/WEB2AJAX.htm+CICS
Cookie: SYSLANG=en; SYSSTYL=BLUE; SYSPAGE=auto
**SM\PYGZus{}User: sptholt \PYGZlt{}\PYGZlt{}**
**X\PYGZhy{}Forwarded\PYGZhy{}For: 192.168.100.100 \PYGZlt{}\PYGZlt{}**
Connection: keep\PYGZhy{}alive

HTTP/1.1 200 Ok
Server: Virtel/4.53
Date: Wed, 26 Mar 2014 15:31:12 GMT
Content\PYGZhy{}type: text/html
Content\PYGZhy{}length: 00000125

\PYGZlt{}html\PYGZgt{}\PYGZlt{}head\PYGZgt{}\PYGZlt{}Meta HTTP\PYGZhy{}EQUIV=\PYGZdq{}refresh\PYGZdq{} CONTENT=\PYGZdq{}1; URL=LASTPAGE.HTML\PYGZdq{}\PYGZgt{}\PYGZlt{}/head\PYGZgt{}
\PYGZlt{}body bgcolor=\PYGZdq{}black\PYGZdq{}\PYGZgt{}\PYGZlt{}br\PYGZgt{}
\PYGZlt{}br\PYGZgt{}
\PYGZlt{}/body\PYGZgt{}\PYGZlt{}/html\PYGZgt{}
HTTP/1.0 205 Reset Content
Server: Virtel/4.53
\end{sphinxVerbatim}

In the above trace the CA-SiteMinder specific header “SM\_User” can be seen as identifying the userid and the X-Forwarded-For:, a standard HTTP header, identifies the source IP address. For security reasons this proxy IP address must be tested for in a VIRTEL rule before the session can be established between the caller and the asset. There is no password associated with this logon \textendash{} this will be generated via a passsTicket request on behalf of the userid identified in the “SM\_User” header. The PassTicket will be created as part of the session setup between Virtel and the asset and on behalf of the caller.

\newpage

\index{SSO, Passtickets and Proxy Servers@\spxentry{SSO, Passtickets and Proxy Servers}!Adding headers to the HTTP request@\spxentry{Adding headers to the HTTP request}}\index{Adding headers to the HTTP request@\spxentry{Adding headers to the HTTP request}!SSO, Passtickets and Proxy Servers@\spxentry{SSO, Passtickets and Proxy Servers}}\ignorespaces 

\section{Adding headers to the HTTP request}
\label{\detokenize{connectivity_guide:adding-headers-to-the-http-request}}\label{\detokenize{connectivity_guide:index-164}}
Access the CICS application using FireFox. Use the FireFox “AddIn” Modify Headers to add the headers to the HTTP request. After adding the headers you will need to “START” the addIn to get the headers added.

\sphinxincludegraphics{{image101}.png} \sphinxstyleemphasis{Using the Firefox “Modify Headers” addin.}

When access the CICS system make sure the “Modify Headers” has started. The ICON should be red.

\sphinxincludegraphics{{image102}.png}

\sphinxstyleemphasis{Modify Header active - red ICON}

The following definitions define what needs to be done to enable a user to log on without specifying a userid/password to an asset supported by the SSO server. In our example Virtel will logon to a CICS asset on behalf of the caller using a userid passed by the SSO Proxy and a generated PassTicket. The caller provides no userid/password information. Once the SSO has validated the callers credential the caller will be logged on to CICS and will be presented with the following screen:-

\sphinxincludegraphics{{image103}.png} \sphinxstyleemphasis{Accessing CICS using a callers credentials. No LOGON required.}

\newpage

\index{SSO, Passtickets and Proxy Servers@\spxentry{SSO, Passtickets and Proxy Servers}!RACF Passtickets@\spxentry{RACF Passtickets}}\index{RACF Passtickets@\spxentry{RACF Passtickets}!SSO, Passtickets and Proxy Servers@\spxentry{SSO, Passtickets and Proxy Servers}}\ignorespaces 

\section{RACF Passtickets}
\label{\detokenize{connectivity_guide:racf-passtickets}}\label{\detokenize{connectivity_guide:index-165}}
Pass tickets are an alternative to passwords and can greatly improve the security surrounding SSO and multiple applications access. Passtickets are a dynamically generated password that lasts for approximately 10 minutes. Further information on RACF Passtickets can be found on the web. For the purpose of this newsletter we will look at the Virtel requirements needed to access our target CICS asset whose RACF APPL is SPCICSH. Our Virtel task runs under the RACF userid of SPVIRSTC. Here are the RACF definitions required to support the generation of PassTickets for the target application APPL SPCICSH.


\subsection{Define Pass Ticket RACF profiles}
\label{\detokenize{connectivity_guide:define-pass-ticket-racf-profiles}}
This job will have to be modified to a customer’s RACF setup. Some profiles may already be defined! If the PERMIT statements do not run then that probably means that some of the RDEFINE entries already exist in the RACF database - these need to be removed, or an RDELETE added to delete the profile entry, in order for the job to complete successfully. It should produce a RC=0. See the output in SDSF.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{/}\PYG{n}{STEP1} \PYG{n}{EXEC} \PYG{n}{PGM}\PYG{o}{=}\PYG{n}{IKJEFT1A}\PYG{p}{,}\PYG{n}{DYNAMNBR}\PYG{o}{=}\PYG{l+m+mi}{20}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSTSPRT} \PYG{n}{DD} \PYG{n}{SYSOUT}\PYG{o}{=}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSTSIN} \PYG{n}{DD} \PYG{o}{*}
        \PYG{n}{SETROPTS} \PYG{n}{CLASSACT}\PYG{p}{(}\PYG{n}{APPL}\PYG{p}{)}
        \PYG{n}{SETROPTS} \PYG{n}{CLASSACT}\PYG{p}{(}\PYG{n}{PTKTDATA}\PYG{p}{)}
        \PYG{n}{SETROPTS} \PYG{n}{RACLIST}\PYG{p}{(}\PYG{n}{PTKTDATA}\PYG{p}{)}
        \PYG{n}{SETROPTS} \PYG{n}{GENERIC}\PYG{p}{(}\PYG{n}{PTKTDATA}\PYG{p}{)}
        \PYG{n}{RDEFINE} \PYG{n}{FACILITY} \PYG{n}{IRR}\PYG{o}{.}\PYG{n}{RTICKETSERV}
        \PYG{n}{RDEFINE} \PYG{n}{PTKTDATA} \PYG{n}{IRRPTAUTH}\PYG{o}{.}\PYG{n}{SPCICSH}\PYG{o}{.}\PYGZbs{}\PYG{o}{*} \PYG{n}{UACC}\PYG{p}{(}\PYG{n}{NONE}\PYG{p}{)}
        \PYG{n}{RDEFINE} \PYG{n}{PTKTDATA} \PYG{n}{SPCICSH} \PYG{n}{SSIGNON}\PYG{p}{(}\PYG{n}{KEYMASKED}\PYG{p}{(}\PYG{l+m+mi}{998}\PYG{n}{A654FEBCDA123}\PYG{p}{)}\PYG{p}{)} \PYG{o}{+}
                \PYG{n}{UACC}\PYG{p}{(}\PYG{n}{NONE}\PYG{p}{)}
        \PYG{n}{PERMIT} \PYG{n}{IRR}\PYG{o}{.}\PYG{n}{RTICKETSERV} \PYG{n}{CL}\PYG{p}{(}\PYG{n}{FACILITY}\PYG{p}{)} \PYG{n}{ID}\PYG{p}{(}\PYG{n}{SPVIRSTC}\PYG{p}{)} \PYG{n}{ACC}\PYG{p}{(}\PYG{n}{READ}\PYG{p}{)}
        \PYG{n}{PERMIT} \PYG{n}{IRRPTAUTH}\PYG{o}{.}\PYG{n}{SPCICSH}\PYG{o}{.}\PYGZbs{}\PYG{o}{*} \PYG{n}{CL}\PYG{p}{(}\PYG{n}{PTKTDATA}\PYG{p}{)} \PYG{n}{ID}\PYG{p}{(}\PYG{n}{SPVIRSTC}\PYG{p}{)} \PYG{n}{ACC}\PYG{p}{(}\PYG{n}{UPDATE}\PYG{p}{)}
        \PYG{n}{SETROPTS} \PYG{n}{REFRESH} \PYG{n}{RACLIST}\PYG{p}{(}\PYG{n}{PTKTDATA}\PYG{p}{)}
        \PYG{n}{SETROPTS} \PYG{n}{REFRESH} \PYG{n}{RACLIST}\PYG{p}{(}\PYG{n}{FACILITY}\PYG{p}{)}
\end{sphinxVerbatim}

Three distinct RACF profiles are required to use RACF pass tickets:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
FACILITY IRR.RTICKETSERV           * Can use PassTickets *
PTKTDATA IRRPTAUTH.passTicketName. * Let’s VIRETL generate PassTickets on behalf of an application for all users. * or *userid*
PTKTDATA profile\PYGZus{}name              * APPLNAME used by RACROUTE REQUEST=VERIFY *
\end{sphinxVerbatim}

\sphinxstylestrong{Virtel Name correlation}
\begin{itemize}
\item {} 
passTicketName must equal the PassTicket Name defined in the VIRTEL transaction.

\item {} 
profile\_name must equal the VTAM application name defined in the VIRTEL transaction.

\end{itemize}

These names are normally the same, but they do not have to be.

\begin{sphinxadmonition}{note}{Note:}
If you are running separate RACF databases across LPARS the KEYMASKED must be the same in each RACF database or else the wrong password will be generated and the logon will fail.
\end{sphinxadmonition}

\newpage


\subsection{RACF Profiles related to Virtel and Pass Tickets}
\label{\detokenize{connectivity_guide:racf-profiles-related-to-virtel-and-pass-tickets}}
As mentioned RACF needs to have some profiles set up to allow Virtel to use Pass Tickets. The first profile is the FACILITY Class profile with the IRR.RTICKETSERV name. The Virtel STC userid must have READ access to this profile.

\sphinxincludegraphics{{image109}.png} \sphinxstyleemphasis{RACF profile to allow Virtel to use Pass Tickets}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{RDEFINE} \PYG{n}{FACILITY} \PYG{n}{IRR}\PYG{o}{.}\PYG{n}{RTICKETSERV}
\PYG{n}{PERMIT} \PYG{n}{IRR}\PYG{o}{.}\PYG{n}{RTICKETSERV} \PYG{n}{CL}\PYG{p}{(}\PYG{n}{FACILITY}\PYG{p}{)} \PYG{n}{ID}\PYG{p}{(}\PYG{n}{SPVIRSTC}\PYG{p}{)} \PYG{n}{ACC}\PYG{p}{(}\PYG{n}{READ}\PYG{p}{)}
\end{sphinxVerbatim}

To allow Virtel to generate Pass Tickets for a particular application we must define any entry in the PTKTDATA class. This entry has the name “IRRPTAUTH.passTicketName.*”” and is a Group Entry. The Virtel USERID should have update authority to this profile.

\sphinxincludegraphics{{image110}.png} \sphinxstyleemphasis{Seting Virtel up with RACF access to PTKTDATA class.}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{RDEFINE} \PYG{n}{PTKTDATA} \PYG{n}{IRRPTAUTH}\PYG{o}{.}\PYG{n}{SPCICSH}\PYG{o}{.}\PYGZbs{}\PYG{o}{*} \PYG{n}{UACC}\PYG{p}{(}\PYG{n}{NONE}\PYG{p}{)}
\PYG{n}{PERMIT} \PYG{n}{IRRPTAUTH}\PYG{o}{.}\PYG{n}{SPCICSH}\PYG{o}{.}\PYGZbs{}\PYG{o}{*} \PYG{n}{CL}\PYG{p}{(}\PYG{n}{PTKTDATA}\PYG{p}{)} \PYG{n}{ID}\PYG{p}{(}\PYG{n}{SPVIRSTC}\PYG{p}{)} \PYG{n}{ACC}\PYG{p}{(}\PYG{n}{UPDATE}\PYG{p}{)}
\PYG{n}{SSIGNON}\PYG{p}{(}\PYG{n}{KEYMASKED}\PYG{p}{(}\PYG{l+m+mi}{998}\PYG{n}{A654FEBCDA123}\PYG{p}{)}\PYG{p}{)} \PYG{n}{UACC}\PYG{p}{(}\PYG{n}{NONE}\PYG{p}{)}
\end{sphinxVerbatim}

The name in IRRPTAUTH.passTicketName.* profile must match the name in the Virtel Transaction definition. The PassTicket Name is the name of the application as known to RACF for the generation of Passtickets. This may be different to the VTAM application name.

Finally, define a PTKTDATA profile entry that matches the Virtel Transaction \sphinxstylestrong{APPLICATION} name. In this case it is SPCICSH. Virtel passes this APPLNAME to RACF via a RACROUTE REQUEST=VERIFY.

\sphinxincludegraphics{{image111}.png} \sphinxstyleemphasis{Setting the Pass Ticket name in the Virtel transaction.}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{RDEFINE} \PYG{n}{PTKTDATA} \PYG{n}{SPCICSH} \PYG{n}{SSIGNON}\PYG{p}{(}\PYG{n}{KEYMASKED}\PYG{p}{(}\PYG{l+m+mi}{998}\PYG{n}{A654FEBCDA123}\PYG{p}{)}\PYG{p}{)} \PYG{o}{+}
\PYG{n}{UACC}\PYG{p}{(}\PYG{n}{NONE}\PYG{p}{)}
\end{sphinxVerbatim}

The key thing here is that the PassTicket name must tie up with the generic IRRPTAUTH.SPCICSH.* entry and the VIRTEL application name must match the descrete PTKTDATA.SPCICSH profile. They can be the same but needn’t be!

\newpage

\index{SSO, Passtickets and Proxy Servers@\spxentry{SSO, Passtickets and Proxy Servers}!Virtel Requirements@\spxentry{Virtel Requirements}}\index{Virtel Requirements@\spxentry{Virtel Requirements}!SSO, Passtickets and Proxy Servers@\spxentry{SSO, Passtickets and Proxy Servers}}\ignorespaces 

\section{Virtel Requirements}
\label{\detokenize{connectivity_guide:virtel-requirements}}\label{\detokenize{connectivity_guide:index-166}}

\subsection{Transaction requirements}
\label{\detokenize{connectivity_guide:transaction-requirements}}
The Virtel Transaction, under the Entry Point CLIWHOST, will be used to access the CICS asset. It has a Virtel external name of “CICS”. We modify our transaction to use pass tickets and add a TIOA to logon to our CICS transaction. The transaction details now look like:-

\sphinxincludegraphics{{image104}.png} \sphinxstyleemphasis{Modified CICS Virtel transaction to support Pass Tickets.}

The PassTicket option is set to 2 and uses the APPL name associated with CICS transaction. Using option 2 means that we do not have to sign onto Virtel first before generating a PassTicket. Virtel will expect the Virtel System variable USER to be established. This will be accomplished in an identification scenario where we have access to the SM\_User header value.

The TIOA sign on field waits for the initial CICS sign on screen to appear and then plugs in the userid (\&U) and PassTicket generated password (\&P) into their respective locations. The screen is then “forwarded” to the CICS application with the USERID and PASSWORDS fields completed.

\newpage


\subsection{Identification Scenario}
\label{\detokenize{connectivity_guide:identification-scenario}}
To obtain the “SM\_User” value and set the userid in the Virtel System USER variable an identification scenario is used. The following is an example of such a scenario:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SCENSITE SCREENS APPL=SCENSITE,EXEC=NO
*
* SCENARIO for SiteMinder
*
* The purpose of this scenario is to retrieve the contents of
* the identification headers inserted by the SiteMinder Proxy
*
SCENARIO IDENTIFICATION
*
        COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,VAR=\PYGZsq{}USER\PYGZsq{}, \PYGZhy{}
                FIELD=(TCT\PYGZhy{}HTTP\PYGZhy{}HEADER,SM\PYGZbs{}\PYGZus{}USER)
        IF\PYGZdl{} NOT\PYGZhy{}FOUND,THEN=NOUSER1
        COPY\PYGZdl{} VARIABLE\PYGZhy{}TO\PYGZhy{}SYSTEM,VAR=\PYGZsq{}USER\PYGZsq{}, \PYGZhy{}
                FIELD=(NAME\PYGZhy{}OF,USER)
*
EXIT1 DS 0H
        SCENARIO END
*
NOUSER1 DS 0H
        ERROR\PYGZdl{} 0,\PYGZsq{}SCENSITE ERROR: NO USER VARIABLE\PYGZsq{}
        GOTO\PYGZdl{} EXIT1
        SCRNEND
        END
\end{sphinxVerbatim}

This SCENARIO has to be set in the Entry Point definition for the line being used. In our case this is the default Entry Point, CLIWHOST, associated with the external line HTTP-CLI. The following is a snapshot of the entry point definition:-

\sphinxincludegraphics{{image105}.png} \sphinxstyleemphasis{Defining an Identification Scenario in the Virtel Entry Point.}

The Identification Scenario field is filled in with the name of our scenario SCENSITE. This scenario is called when the inbound call is assigned to an entry point and before any transactions are invoked. The scenario sets the Virtel system USER variable which will be used in the PassTicket generation.


\subsection{TCT Considerations}
\label{\detokenize{connectivity_guide:tct-considerations}}
The TCT has to include the following parameters if HTTP User Headers and PassTicket generation is required. The parameters are:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{HTHEADR}\PYG{o}{=}\PYG{p}{(}\PYG{n}{SM\PYGZus{}USER}\PYG{p}{)}\PYG{p}{,}                              \PYG{o}{*}
\PYG{n}{VIRSECU}\PYG{o}{=}\PYG{n}{YES}\PYG{p}{,}\PYG{n}{SECUR}\PYG{o}{=}\PYG{p}{(}\PYG{n}{RACROUTE}\PYG{p}{,}\PYG{n}{RACF}\PYG{p}{)}\PYG{p}{,}              \PYG{o}{*}
\PYG{n}{RAPPL}\PYG{o}{=}\PYG{n}{FACILITY}\PYG{p}{,}\PYG{n}{RNODE}\PYG{o}{=}\PYG{n}{FACILITY}\PYG{p}{,}\PYG{n}{PRFSECU}\PYG{o}{=}\PYG{n}{SPVIREH}\PYG{p}{,}  \PYG{o}{*}
\PYG{n}{PASSTCK}\PYG{o}{=}\PYG{n}{YES}\PYG{p}{,}                                    \PYG{o}{*}
\end{sphinxVerbatim}

The HTHEADR identifies the “SM\_USER“ as a non standard header and one that Virtel must process. The PASSTCK keyword enables Virtel to generate PassTickets.

\newpage


\subsection{Line Rules}
\label{\detokenize{connectivity_guide:line-rules}}
To ensure that the source SSO proxy IP address is valid we can code some rules and associate them with the line. In our example we have coded two sets of rules. The first one will test the calling proxy IP address. If that is successful the connection will continue and establish an association with the named Virtel entry point. If the first rule fails because the IP address doesn’t match what we expect, the second rule will be called. This does no more than establish an entry point with a default transaction. The default transaction will just return an error page to the browser. Here are the two rules that we have associated with our Virtel line:-

\sphinxincludegraphics{{image106}.png} \sphinxstyleemphasis{List of rules asssociated with the Virtel line}

The second rule is coded as follows:-

\sphinxincludegraphics{{image107}.png} \sphinxstyleemphasis{Rule C100PROX to test Proxy IP Address}

If the IP address of the SSO Proxy matches the Caller DTE address we have specified in the rule than the Entry Point CLIWHOST will be associated with line and the transactions defined under that entry point, CLIWHOST in this case, can be invoked. If the address match fails then the next rule will be called. In our case this will be rule C999REJ which will invoke transaction EPREJECT, the default transaction for Entry Point EPREJECT.

\begin{sphinxadmonition}{warning}{Warning:}
It is important that you use option 3 “STARTS WITH” when defining the Calling DTE option.
\end{sphinxadmonition}

\sphinxincludegraphics{{image108}.png} \sphinxstyleemphasis{Rule C999REJ to reject the session request}

This rule does no more than to establish the entry point EPREJECT. EPREJECT will have a default transaction which just returns an error page to the caller.

\newpage

\index{SSO, Passtickets and Proxy Servers@\spxentry{SSO, Passtickets and Proxy Servers}!Common Errors@\spxentry{Common Errors}}\index{Common Errors@\spxentry{Common Errors}!SSO, Passtickets and Proxy Servers@\spxentry{SSO, Passtickets and Proxy Servers}}\ignorespaces 

\section{Common Errors}
\label{\detokenize{connectivity_guide:common-errors}}\label{\detokenize{connectivity_guide:index-167}}
\sphinxstylestrong{Message VIR1502E}

VIRTEL does not have sufficient access rights to create or validate a passticket allowing user userid at terminal termed to access application applname. This message is usually preceded by message ICH408I which shows the name of the resource to which VIRTEL must be granted access.

\sphinxstylestrong{Action}

Examine the SAF and RACF return codes and the RACF reason code to determine the cause. Check that VIRTEL has access to resource IRR.RTICKETSERV in the FACILITY class, and also to resource IRRPTAUTH.applname.userid in the PTKTDATA class. The generic resource IRRPTAUTH.** may be used to permit VIRTEL to generate passtickets for all applications.

For an explanation of the return codes and reason codes, see z/OS Security Server RACF Callable Services Chapter 2 “R\_ticketserv”. Some common codes are:


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|T|T|}
\hline
\sphinxstyletheadfamily 
SAF RC
&\sphinxstyletheadfamily 
RACF RETC
&\sphinxstyletheadfamily 
RACF Reason
&\sphinxstyletheadfamily 
Description
\\
\hline
8
&
8
&
4
&
Paramlist error. Ensure that the SCENSITE scenario is available to process the sm\_header.
\\
\hline
8
&
8
&
16
&
VIRTEL is not authorized to generate passtickets, or is not authorized to generate passtickets for this
application. See preceding ICH408I message in the log.
\\
\hline
8
&
16
&
28
&
There is no profile in the PTKTDATA class for this application or the PTKTDATA class is not active.
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}

\newpage

\index{SSO, Passtickets and Proxy Servers@\spxentry{SSO, Passtickets and Proxy Servers}!Related material@\spxentry{Related material}}\index{Related material@\spxentry{Related material}!SSO, Passtickets and Proxy Servers@\spxentry{SSO, Passtickets and Proxy Servers}}\ignorespaces 

\section{Related material}
\label{\detokenize{connectivity_guide:related-material}}\label{\detokenize{connectivity_guide:index-168}}
Technical newsletter - \sphinxtitleref{TN201416 Virtel Security. Using server and client certificates}

\index{Running multiple instances of Virtel@\spxentry{Running multiple instances of Virtel}}\ignorespaces 

\chapter{Running multiple instances of Virtel}
\label{\detokenize{connectivity_guide:running-multiple-instances-of-virtel}}\label{\detokenize{connectivity_guide:index-169}}

\section{Introduction}
\label{\detokenize{connectivity_guide:id75}}
For High Availability and performance reasons it is often necessary to run multiple copies of Virtel, preferably within separate LPARs on separate physical machines. This newsletter discusses the issues raised when implementing such a setup and how Virtel can exploit the IBM Sysplex technologies. In the following example there are two instances of Virtel running on separate physical machines sharing the same ARBO configuration file. The configuration looks like this:-

\sphinxincludegraphics{{image94}.png}

Virtel is using several Sysplex technologies to achieve this configuration. For example, Virtel is using VTAM Generic Resources to facilitate access to the Virtel Administration functions from either instance of Virtel. VTAM generic resources can be used to distribute workloads across applications that perform the same task or function. Administration of the ARBO file is through the Virtel Administrator who can logon on to Virtel using the generic Virtel ACB name VIRTPLEX. This generic ACB enables management of the ARBO file through either VIRTEL1A or VIRTEL2A. This can be useful, for example, If SYSA was down for maintenance. VIRTEL administration could still conducted via VIRTEL2A access. No change would be necessary to any session management tools.

Here are the relevant definitions required to support the VTAM generic resource within Virtel.

\index{Running multiple instances of Virtel@\spxentry{Running multiple instances of Virtel}!Virtel TCT Settings@\spxentry{Virtel TCT Settings}}\index{Virtel TCT Settings@\spxentry{Virtel TCT Settings}!Running multiple instances of Virtel@\spxentry{Running multiple instances of Virtel}}\ignorespaces 

\subsection{VIRTEL TCT Settings}
\label{\detokenize{connectivity_guide:virtel-tct-settings}}\label{\detokenize{connectivity_guide:index-170}}
GRNAME=VIRTPLEX, VTAM GENERIC RESOURCE NAME

\index{Running multiple instances of Virtel@\spxentry{Running multiple instances of Virtel}!SYSPLEX definitions@\spxentry{SYSPLEX definitions}}\index{SYSPLEX definitions@\spxentry{SYSPLEX definitions}!Running multiple instances of Virtel@\spxentry{Running multiple instances of Virtel}}\ignorespaces 

\subsection{SYSPLEX definitions}
\label{\detokenize{connectivity_guide:sysplex-definitions}}\label{\detokenize{connectivity_guide:index-171}}
The ISTGENERIC structure will have to be allocated before you can use VTAM generic resources. See the IBM Network Implementation Guide for further information on configuring the CFRM.

Use the following command to display coupling allocation details for ISTGENERIC.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{D} \PYG{n}{XCF}\PYG{p}{,}\PYG{n}{STR}\PYG{p}{,}\PYG{n}{STRNM}\PYG{o}{=}\PYG{n}{ISTGENERIC}
\end{sphinxVerbatim}

\sphinxstyleemphasis{VTAM displayof the generic resource}

The results from the D NET,ID=VTAMPLEX,E identifies the two Virtel instances which are grouped into the generic resource name VIRTPLEX. The example below shows VIRTEL1A and VIRTEL2A as participating in the VIRTRPLEX resource name group.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{D} \PYG{n}{NET}\PYG{p}{,}\PYG{n}{ID}\PYG{o}{=}\PYG{n}{VIRTPLEX}\PYG{p}{,}\PYG{n}{E}

\PYG{n}{IST097I} \PYG{n}{DISPLAY} \PYG{n}{ACCEPTED}
\PYG{n}{IST075I} \PYG{n}{NAME} \PYG{o}{=} \PYG{n}{VIRTPLEX}\PYG{p}{,} \PYG{n}{TYPE} \PYG{o}{=} \PYG{n}{GENERIC} \PYG{n}{RESOURCE} \PYG{l+m+mi}{917}
\PYG{n}{IST1359I} \PYG{n}{MEMBER} \PYG{n}{NAME} \PYG{n}{OWNING} \PYG{n}{CP} \PYG{n}{SELECTABLE} \PYG{n}{APPC}
\PYG{n}{IST1360I} \PYG{n}{SPNET}\PYG{o}{.}\PYG{n}{VIRTEL1A} \PYG{n}{ZAM1SSCP} \PYG{n}{YES} \PYG{n}{NO}
\PYG{n}{IST1360I} \PYG{n}{SPNET}\PYG{o}{.}\PYG{n}{VIRTEL2A} \PYG{n}{ZAM2SSCP} \PYG{n}{YES} \PYG{n}{NO}
\PYG{n}{IST2210I} \PYG{n}{GR} \PYG{n}{PREFERENCE} \PYG{n}{TABLE} \PYG{n}{ENTRY} \PYG{o}{=} \PYG{o}{*}\PYG{o}{*}\PYG{n}{DEFAULT}\PYG{o}{*}\PYG{o}{*}
\PYG{n}{IST2202I} \PYG{n}{GREXIT} \PYG{o}{=} \PYG{n}{NO} \PYG{n}{WLM} \PYG{o}{=} \PYG{n}{YES} \PYG{n}{LOCLU} \PYG{o}{=} \PYG{n}{YES}
\PYG{n}{IST2204I} \PYG{n}{LOCAPPL} \PYG{o}{=} \PYG{n}{YES} \PYG{n}{PASSOLU} \PYG{o}{=} \PYG{n}{NO}
\PYG{n}{IST314I} \PYG{n}{END}
\end{sphinxVerbatim}

When the VIRTEL*A application is display in VTAM the following messages are written to the console log:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{D} \PYG{n}{NET}\PYG{p}{,}\PYG{n}{ID}\PYG{o}{=}\PYG{n}{VIRTEL1A}\PYG{p}{,}\PYG{n}{E}
\PYG{n}{IST097I} \PYG{n}{DISPLAY} \PYG{n}{ACCEPTED}
\PYG{n}{IST075I} \PYG{n}{NAME} \PYG{o}{=} \PYG{n}{SPNET}\PYG{o}{.}\PYG{n}{VIRTEL1A}\PYG{p}{,} \PYG{n}{TYPE} \PYG{o}{=} \PYG{n}{APPL} \PYG{l+m+mi}{925}
\PYG{n}{IST486I} \PYG{n}{STATUS}\PYG{o}{=} \PYG{n}{ACT}\PYG{o}{/}\PYG{n}{S}\PYG{p}{,} \PYG{n}{DESIRED} \PYG{n}{STATE}\PYG{o}{=} \PYG{n}{ACTIV}
\PYG{n}{IST1447I} \PYG{n}{REGISTRATION} \PYG{n}{TYPE} \PYG{o}{=} \PYG{n}{CDSERVR}
\PYG{n}{IST1363I} \PYG{n}{GENERIC} \PYG{n}{RESOURCE} \PYG{n}{NAME} \PYG{n}{VIRTPLEX} \PYG{n}{REPRESENTS} \PYG{n}{SPNET}\PYG{o}{.}\PYG{n}{VIRTEL1A}
\PYG{n}{IST977I} \PYG{n}{MDLTAB}\PYG{o}{=}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{n}{NA}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*} \PYG{n}{ASLTAB}\PYG{o}{=}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{n}{NA}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}
\PYG{n}{IST861I} \PYG{n}{MODETAB}\PYG{o}{=}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{n}{NA}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*} \PYG{n}{USSTAB}\PYG{o}{=}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{n}{NA}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{n}{LOGTAB}\PYG{o}{=}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{n}{NA}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}
\PYG{n}{IST934I} \PYG{n}{DLOGMOD}\PYG{o}{=}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{n}{NA}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*} \PYG{n}{USS} \PYG{n}{LANGTAB}\PYG{o}{=}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{n}{NA}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}
\PYG{n}{IST1632I} \PYG{n}{VPACING} \PYG{o}{=} \PYG{l+m+mi}{7}
\PYG{n}{IST1938I} \PYG{n}{APPC} \PYG{o}{=} \PYG{n}{NO}
\PYG{n}{IST597I} \PYG{n}{CAPABILITY}\PYG{o}{\PYGZhy{}}\PYG{n}{PLU} \PYG{n}{ENABLED} \PYG{p}{,}\PYG{n}{SLU} \PYG{n}{ENABLED} \PYG{p}{,}\PYG{n}{SESSION} \PYG{n}{LIMIT} \PYG{n}{NONE}
\PYG{n}{IST231I} \PYG{n}{APPL} \PYG{n}{MAJOR} \PYG{n}{NODE} \PYG{o}{=} \PYG{n}{APPLVIPX}
\PYG{n}{IST654I} \PYG{n}{I}\PYG{o}{/}\PYG{n}{O} \PYG{n}{TRACE} \PYG{o}{=} \PYG{n}{OFF}\PYG{p}{,} \PYG{n}{BUFFER} \PYG{n}{TRACE} \PYG{o}{=} \PYG{n}{OFF}
\PYG{n}{IST1500I} \PYG{n}{STATE} \PYG{n}{TRACE} \PYG{o}{=} \PYG{n}{OFF}
\PYG{n}{IST271I} \PYG{n}{JOBNAME} \PYG{o}{=} \PYG{n}{SPVIR1A}\PYG{p}{,} \PYG{n}{STEPNAME} \PYG{o}{=} \PYG{n}{SPVIR1A}\PYG{p}{,} \PYG{n}{DSPNAME} \PYG{o}{=} \PYG{n}{ISTEBBDB}
\PYG{n}{IST228I} \PYG{n}{ENCRYPTION} \PYG{o}{=} \PYG{n}{OPTIONAL} \PYG{p}{,} \PYG{n}{TYPE} \PYG{o}{=} \PYG{n}{DES}
\PYG{n}{IST1563I} \PYG{n}{CKEYNAME} \PYG{o}{=} \PYG{n}{VIRTEL1A} \PYG{n}{CKEY} \PYG{o}{=} \PYG{n}{PRIMARY} \PYG{n}{CERTIFY} \PYG{o}{=} \PYG{n}{NO}
\PYG{n}{IST1552I} \PYG{n}{MAC} \PYG{o}{=} \PYG{n}{NONE} \PYG{n}{MACTYPE} \PYG{o}{=} \PYG{n}{NONE}
\PYG{n}{IST1050I} \PYG{n}{MAXIMUM} \PYG{n}{COMPRESSION} \PYG{n}{LEVEL} \PYG{o}{\PYGZhy{}} \PYG{n}{INPUT} \PYG{o}{=} \PYG{l+m+mi}{0}\PYG{p}{,} \PYG{n}{OUTPUT} \PYG{o}{=} \PYG{l+m+mi}{0}
\PYG{n}{IST1633I} \PYG{n}{ASRCVLM} \PYG{o}{=} \PYG{l+m+mi}{1000000}
\PYG{n}{IST1634I} \PYG{n}{DATA} \PYG{n}{SPACE} \PYG{n}{USAGE}\PYG{p}{:} \PYG{n}{CURRENT} \PYG{o}{=} \PYG{l+m+mi}{0} \PYG{n}{MAXIMUM} \PYG{o}{=} \PYG{l+m+mi}{1280}
\PYG{n}{IST171I} \PYG{n}{ACTIVE} \PYG{n}{SESSIONS} \PYG{o}{=} \PYG{l+m+mi}{0000000001}\PYG{p}{,} \PYG{n}{SESSION} \PYG{n}{REQUESTS} \PYG{o}{=} \PYG{l+m+mi}{0000000000}
\PYG{n}{IST206I} \PYG{n}{SESSIONS}\PYG{p}{:}
\PYG{n}{IST634I} \PYG{n}{NAME} \PYG{n}{STATUS} \PYG{n}{SID} \PYG{n}{SEND} \PYG{n}{RECV} \PYG{n}{VR} \PYG{n}{TP} \PYG{n}{NETID}
\PYG{n}{IST635I} \PYG{n}{SC0TCP13} \PYG{n}{ACTIV}\PYG{o}{\PYGZhy{}}\PYG{n}{S} \PYG{n}{CA7B8B52D125F31F} \PYG{l+m+mi}{0003} \PYG{l+m+mi}{0001} \PYG{n}{SPNET}
\PYG{n}{IST314I} \PYG{n}{END}
\end{sphinxVerbatim}

Message IST1363I confirms that VIRTEL operating under the ACB of VIRTEL1A is associated with the VTAM resource name VIRTPLEX.

\newpage

\index{Running multiple instances of Virtel@\spxentry{Running multiple instances of Virtel}!Workload balancing@\spxentry{Workload balancing}}\index{Workload balancing@\spxentry{Workload balancing}!Running multiple instances of Virtel@\spxentry{Running multiple instances of Virtel}}\ignorespaces 

\subsection{Workload balancing in a SYSPLEX environment}
\label{\detokenize{connectivity_guide:workload-balancing-in-a-sysplex-environment}}\label{\detokenize{connectivity_guide:index-172}}
In the following configuration we can see how the VTAM generic resource facility can also be used to distribute workloads across applications. In this example there are several CICS TOR regions within CICSA, CICSB and CICSC that are accessed through a VTAM generic resource name or CICSPLEX group name. VIRTEL uses this name to access the CICS application. The WLM and/or VTAM will distribute sessions across the members of the CICS generic resource name.

\sphinxincludegraphics{{image95}.png}

From a High Availability aspect both CICSA and CICSB could both be down and service would still be provided by CICSC either through VIRTEL1A or VIRTEL2A. In this configuration VIRTEL exploits SYSPLEX technologies to provide a HA solution. The only VIRTEL requirement is to define a VIRTEL transaction which targets CICSZ as the VTAM application, i.e. the VTAM
Generic Resource or CICSPLEX group name.


\subsection{Sharing the ARBO and other VSAM files}
\label{\detokenize{connectivity_guide:sharing-the-arbo-and-other-vsam-files}}
In a SYSPLEX or sharing environment the VSAM files, like the ARBO and TRSF files, must be shared only in READ mode. To support this the following TCT parameter should be coded:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{VSAMTYP}\PYG{o}{=}\PYG{n}{READONLY}
\end{sphinxVerbatim}

This VIRTCT parameter allows the setup of ‘READ-ONLY’ Virtels, to be used in production or in a Sysplex. Almost all Virtel VSAM files may be set to read-only mode. (But note that the VIRSWAP file; being a work file it cannot be read-only.)

If this TCT value is coded then the following changes should also be made to the TCT.
\begin{itemize}
\item {} 
The MACRF statements should be amended from MACRF=(SEQ,DIR,OUT,LSR) to MACRF=(SEQ,DIR,LSR).

\item {} 
The UFILE parameter string should also be changed from 0,10,01 to 0,10,05. For example:-

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{HTMLTRSF}\PYG{p}{,}\PYG{n}{ACBH2}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{10}\PYG{p}{,}\PYG{l+m+mi}{01} \PYG{n}{becomes} \PYG{n}{HTMLTRSF}\PYG{p}{,}\PYG{n}{ACBH2}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{10}\PYG{p}{,}\PYG{l+m+mi}{05}
\end{sphinxVerbatim}

This will ensure the integrity of the VSAM files across a SYSPLEX or shared environment. When Virtel is started the following messages will be issued:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{VIR0093I} \PYG{n}{VTAM} \PYG{n}{GENERIC} \PYG{n}{RESOURCE} \PYG{n}{NAME} \PYG{n}{IS} \PYG{n}{VIRTPLEX}
\PYG{n}{VIR0024I} \PYG{n}{OPENING} \PYG{n}{FILE} \PYG{n}{VIRARBO}
\PYG{n}{VIR0024I} \PYG{n}{READ} \PYG{n}{ONLY}
\PYG{n}{VIR0024I} \PYG{n}{OPENING} \PYG{n}{FILE} \PYG{n}{VIRSWAP}
\PYG{n}{VIR0024I} \PYG{n}{OPENING} \PYG{n}{FILE} \PYG{n}{VIRHTML}
\PYG{n}{VIR0024I} \PYG{n}{READ} \PYG{n}{ONLY}
\PYG{n}{VIR0024I} \PYG{n}{OPENING} \PYG{n}{FILE} \PYG{n}{SAMPTRSF}
\PYG{n}{VIR0024I} \PYG{n}{READ} \PYG{n}{ONLY}
\PYG{n}{VIR0024I} \PYG{n}{OPENING} \PYG{n}{FILE} \PYG{n}{HTMLTRSF}
\PYG{n}{VIR0024I} \PYG{n}{READ} \PYG{n}{ONLY}
\PYG{n}{VIR0024I} \PYG{n}{ATTACHING} \PYG{n}{SUBTASKS}
\end{sphinxVerbatim}

\begin{sphinxadmonition}{danger}{Danger:}
Do not set the SHROPTIONS to (4,3) as this will have undesirable results!
\end{sphinxadmonition}

Using a READ only environment enables you to not only share the ARBO file but also the SAMP and HTML TRSF files.


\subsection{READ ONLY Restrictions}
\label{\detokenize{connectivity_guide:read-only-restrictions}}
If you share the VSAM files (SAMP.TRSF, ARBO, HTML.TRSF) in READ only mode Virtel Administration is not possible. For example uploading web updates to the SAMP.TRSF or adding macros to the DDI repositories. In this configuration you will have to have a maintenace instance of Virtel which can write to the VSAM files. This can be brought up during a maintenace slot when the READ ONLY instances are down. An alternative to this method is to maintain a copy of the VSAM files and use these for maintenace and updates then copy these VSAM files to the READ ONLY versions during a maintenace slot.

In Virtel V4.60 this restriction has been removed with the introduction of the VIRPLEX feature. VIRPLEX enables a nominated “WRITER” Virtel task to particpate in the Virtel infrastrure. Only administrators would have access to this “WRITER” instance. Maintenance and centralized entities, such as macros, could be uploaded using the “WRITER” instance. The “writer” instance, which has “write access” to the Virtel files would then populate the files with the new updates. Virtel “READ” instances would detect the changes and automatically refresh the “cache” instances. See the {\hyperref[\detokenize{connectivity_guide:v460cn-virplex}]{\sphinxcrossref{\DUrole{std,std-ref}{“VIRPLEX section”,}}}} for move information.

\newpage


\subsection{Virtel naming conventions}
\label{\detokenize{connectivity_guide:virtel-naming-conventions}}
When running more than one VIRTEL STC care must be taken when defining the VTAM relay names that each VIRTEL tasks will use. In the above configuration each Virtel instance is running on a different LPAR, and for the HA reasons, probably on a different physical machine; however, the VTAM names employed must be unique. With Virtel you can define a
single configuration within the ARBO and TCT which contains a unique pool of Virtel relays for each Virtel instance.

Here are two possible ways to define the relay pools for multiple Virtel instances:

The first way is to include the SYSCLONE value as part of the LU name. The relay definitions utilize the system symbolic SYSCLONE value in the IEASYMxx member of PARMLIB. The clone value is taken from the system symbolic \&SYSCLONE and is identified in the VIRTEL definitions through the + (plus) character:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{LIST} \PYG{n}{of} \PYG{n}{TERMINALS} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{n}{Applid}\PYG{p}{:} \PYG{n}{VIRTEL1A} \PYG{l+m+mi}{15}\PYG{p}{:}\PYG{l+m+mi}{11}\PYG{p}{:}\PYG{l+m+mi}{01}
\PYG{n}{Terminal}  \PYG{n}{Repeated} \PYG{n}{Relay}     \PYG{n}{Entry}        \PYG{n}{Type}   \PYG{n}{I}\PYG{o}{/}\PYG{n}{O}  \PYG{n}{Pool}      \PYG{l+m+mi}{2}\PYG{n}{nd}  \PYG{n}{Relay}
\PYG{n}{CLLOC000}  \PYG{l+m+mi}{0050}                            \PYG{l+m+mi}{3}      \PYG{l+m+mi}{3}
\PYG{n}{CLVTA000}  \PYG{l+m+mi}{0080}     \PYG{o}{*}\PYG{n}{W2HPOOL}               \PYG{l+m+mi}{3}      \PYG{l+m+mi}{3}
\PYG{n}{DELOC000}  \PYG{l+m+mi}{0010}                            \PYG{l+m+mi}{3}      \PYG{l+m+mi}{3}
\PYG{n}{DEVTA000}  \PYG{l+m+mi}{0016}     \PYG{o}{*}\PYG{n}{W2HPOOL}               \PYG{l+m+mi}{3}      \PYG{l+m+mi}{3}
\PYG{n}{W2HIM000}  \PYG{l+m+mi}{0080}     \PYG{n}{R}\PYG{o}{+}\PYG{n}{IM000}                \PYG{l+m+mi}{1}      \PYG{l+m+mi}{1}
\PYG{n}{W2HTP000}  \PYG{l+m+mi}{0080}     \PYG{n}{R}\PYG{o}{+}\PYG{n}{VT000}                \PYG{l+m+mi}{3}      \PYG{l+m+mi}{3}    \PYG{o}{*}\PYG{n}{W2HPOOL}  \PYG{n}{R}\PYG{o}{+}\PYG{n}{IM000}
\end{sphinxVerbatim}


\subsection{TCT definition}
\label{\detokenize{connectivity_guide:tct-definition}}
In the configuration above there are two Virtel STCs running on different LPARS whose \&SYSCLONE values are 1A and 2A. With the same TCT being used for both VIRTEL1A and VIRTEL2A the following is specified in the common TCT:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{APPLID}\PYG{o}{=}\PYG{n}{VIRTEL}\PYG{o}{+}\PYG{p}{,}
\PYG{n}{SYSPLUS}\PYG{o}{=}\PYG{n}{YES}\PYG{p}{,}
\end{sphinxVerbatim}

This will means that the two Virtels STCs will have a VTAM APPLID of\textasciicircum{}VIRTEL1A and VIRTEL2A. The Virtel relay LU names are R1AVT000-079 for LPAR 1A, and R2AVT000-079 for LPAR 2A.
The VTAM definition to support this configuration would like:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
APPLVIPX VBUILD TYPE=APPL
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} *
* Product : VIRTEL                                                   *
* Description : APPL for VIRTEL SYSPLEX (SPVIR1A and SPVIR2A)        *
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} *
VIRTEL\PYGZam{}SYSCLONE APPL EAS=160,AUTH=(ACQ,BLOCK,PASS,SPO),               *
      ACBNAME=VIRTEL\PYGZam{}SYSCLONE
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} *
* R\PYGZam{}SYSCLONEVTxxx : VTAM application relays for VIRTEL Web Access    *
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} *
R\PYGZam{}SYSCLONE.VT??? APPL AUTH=(ACQ,PASS),MODETAB=ISTINCLM,               *
      DLOGMOD=SNX32702,EAS=1
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} *
* R\PYGZam{}SYSCLONEIMxxx : Printer relays for VIRTEL Web Access terminals   *
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} *
R\PYGZam{}SYSCLONE.IM??? APPL AUTH=(ACQ,PASS),MODETAB=ISTINCLM,               *
      DLOGMOD=SCS,EAS=1
R\PYGZam{}SYSCLONE.IP??? APPL AUTH=(ACQ,PASS),MODETAB=ISTINCLM,               *
      DLOGMOD=DSILGMOD,EAS=1
\end{sphinxVerbatim}

Because this naming convention could be constraining if you want to use 4-character LU names, there is a second method which allows you to freely choose the LU names without the need to include the SYSCLONE characters as part of the LU name. In the next example two pools are defined. Pool *W1APOOL has relay names J000-J999, K000-K999, L000-L999 for LPAR 1 (with printer names Pnnn,Qnnn,Rnnn), and pool *W2APOOL has relay names M000-M999, N000-N999, O000-O999 (with printer names Snnn,Tnnn,Unnn) for LPAR 2:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{Terminal}  \PYG{n}{Repeated} \PYG{n}{Relay}     \PYG{n}{Entry}        \PYG{n}{Type}   \PYG{n}{I}\PYG{o}{/}\PYG{n}{O}  \PYG{n}{Pool}     \PYG{l+m+mi}{2}\PYG{n}{nd}  \PYG{n}{Relay}
\PYG{n}{CLLOC000}  \PYG{l+m+mi}{0500}                            \PYG{l+m+mi}{3}      \PYG{l+m+mi}{3}
\PYG{n}{CLVTA000}  \PYG{l+m+mi}{1000}     \PYG{o}{*}\PYG{n}{W}\PYG{o}{+}\PYG{n}{POOL}                \PYG{l+m+mi}{3}      \PYG{l+m+mi}{3}
\PYG{n}{CLVTB000}  \PYG{l+m+mi}{1000}     \PYG{o}{*}\PYG{n}{W}\PYG{o}{+}\PYG{n}{POOL}                \PYG{l+m+mi}{3}      \PYG{l+m+mi}{3}
\PYG{n}{CLVTC000}  \PYG{l+m+mi}{1000}     \PYG{o}{*}\PYG{n}{W}\PYG{o}{+}\PYG{n}{POOL}                \PYG{l+m+mi}{3}      \PYG{l+m+mi}{3}
\PYG{n}{DELOC000}  \PYG{l+m+mi}{0010}                            \PYG{l+m+mi}{3}      \PYG{l+m+mi}{3}
\PYG{n}{DEVTA000}  \PYG{l+m+mi}{0016}     \PYG{o}{*}\PYG{n}{W}\PYG{o}{+}\PYG{n}{POOL}                \PYG{l+m+mi}{3}      \PYG{l+m+mi}{3}
\PYG{n}{W2HIP000}  \PYG{l+m+mi}{1000}     \PYG{n}{P000}                   \PYG{l+m+mi}{1}      \PYG{l+m+mi}{1}
\PYG{n}{W2HIQ000}  \PYG{l+m+mi}{1000}     \PYG{n}{Q000}                   \PYG{l+m+mi}{1}      \PYG{l+m+mi}{1}
\PYG{n}{W2HIR000}  \PYG{l+m+mi}{1000}     \PYG{n}{R000}                   \PYG{l+m+mi}{1}      \PYG{l+m+mi}{1}
\PYG{n}{W2HIS000}  \PYG{l+m+mi}{1000}     \PYG{n}{S000}                   \PYG{l+m+mi}{1}      \PYG{l+m+mi}{1}
\PYG{n}{W2HIT000}  \PYG{l+m+mi}{1000}     \PYG{n}{T000}                   \PYG{l+m+mi}{1}      \PYG{l+m+mi}{1}
\PYG{n}{W2HIU000}  \PYG{l+m+mi}{1000}     \PYG{n}{U000}                   \PYG{l+m+mi}{1}      \PYG{l+m+mi}{1}
\PYG{n}{W2HTJ000}  \PYG{l+m+mi}{1000}     \PYG{n}{J000}                   \PYG{l+m+mi}{3}      \PYG{l+m+mi}{3}    \PYG{o}{*}\PYG{n}{W1APOOL} \PYG{n}{P000}
\PYG{n}{W2HTK000}  \PYG{l+m+mi}{1000}     \PYG{n}{K000}                   \PYG{l+m+mi}{3}      \PYG{l+m+mi}{3}    \PYG{o}{*}\PYG{n}{W1APOOL} \PYG{n}{Q000}
\PYG{n}{W2HTL000}  \PYG{l+m+mi}{1000}     \PYG{n}{L000}                   \PYG{l+m+mi}{3}      \PYG{l+m+mi}{3}    \PYG{o}{*}\PYG{n}{W1APOOL} \PYG{n}{R000}
\PYG{n}{W2HTM000}  \PYG{l+m+mi}{1000}     \PYG{n}{M000}                   \PYG{l+m+mi}{3}      \PYG{l+m+mi}{3}    \PYG{o}{*}\PYG{n}{W2APOOL} \PYG{n}{S000}
\PYG{n}{W2HTN000}  \PYG{l+m+mi}{1000}     \PYG{n}{N000}                   \PYG{l+m+mi}{3}      \PYG{l+m+mi}{3}    \PYG{o}{*}\PYG{n}{W2APOOL} \PYG{n}{T000}
\PYG{n}{W2HTO000}  \PYG{l+m+mi}{1000}     \PYG{n}{O000}                   \PYG{l+m+mi}{3}      \PYG{l+m+mi}{3}    \PYG{o}{*}\PYG{n}{W2APOOL} \PYG{n}{U000}
\end{sphinxVerbatim}

The VTAM definitions would be similar to those from the previous example except the \&SYSCLONE would be replaced by the relay characters.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
APVIRT\PYGZam{}SYSCLONE. VBUILD TYPE=APPL
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}*
* Product     :  VIRTEL                                             *
* Description :  Main ACB for VIRTEL application                    *
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}*
VIRTEL\PYGZam{}SYSCLONE APPL AUTH=(ACQ,BLOCK,PASS,SPO),EAS=160,               +
             ACBNAME=VIRTEL\PYGZam{}SYSCLONE
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}*
* Jxxx,Kxxx   : VTAM application relays for VIRTEL Web Access*
* Lxxx,Mxxx   : VTAM application relays for VIRTEL Web Access *
* Nxxx,Oxxx   : VTAM application relays for VIRTEL Web Access*
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}*
J??? APPL  AUTH=(ACQ,PASS),MODETAB=ISTINCLM,DLOGMOD=SNX32702,EAS=1
K??? APPL  AUTH=(ACQ,PASS),MODETAB=ISTINCLM,DLOGMOD=SNX32702,EAS=1
L??? APPL  AUTH=(ACQ,PASS),MODETAB=ISTINCLM,DLOGMOD=SNX32702,EAS=1
M??? APPL  AUTH=(ACQ,PASS),MODETAB=ISTINCLM,DLOGMOD=SNX32702,EAS=1
N??? APPL  AUTH=(ACQ,PASS),MODETAB=ISTINCLM,DLOGMOD=SNX32702,EAS=1
O??? APPL  AUTH=(ACQ,PASS),MODETAB=ISTINCLM,DLOGMOD=SNX32702,EAS=1
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}*
* Pxxx,Qxxx   : Printer relays for VIRTEL Web Access terminals      *
* Rxxx,Sxxx   : Printer relays for VIRTEL Web Access terminals      *
* Txxx,Uxxx   : Printer relays for VIRTEL Web Access terminals      *
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}*
P??? APPL AUTH=NVPACE,EAS=1,PARSESS=NO,MODETAB=ISTINCLM,SESSLIM=YES
Q??? APPL AUTH=NVPACE,EAS=1,PARSESS=NO,MODETAB=ISTINCLM,SESSLIM=YES
R??? APPL AUTH=NVPACE,EAS=1,PARSESS=NO,MODETAB=ISTINCLM,SESSLIM=YES
S??? APPL AUTH=NVPACE,EAS=1,PARSESS=NO,MODETAB=ISTINCLM,SESSLIM=YES
T??? APPL AUTH=NVPACE,EAS=1,PARSESS=NO,MODETAB=ISTINCLM,SESSLIM=YES
U??? APPL AUTH=NVPACE,EAS=1,PARSESS=NO,MODETAB=ISTINCLM,SESSLIM=YES
\end{sphinxVerbatim}

\newpage

\index{Running multiple instances of Virtel@\spxentry{Running multiple instances of Virtel}!Load balancing with a Distributed VIPA@\spxentry{Load balancing with a Distributed VIPA}}\index{Load balancing with a Distributed VIPA@\spxentry{Load balancing with a Distributed VIPA}!Running multiple instances of Virtel@\spxentry{Running multiple instances of Virtel}}\ignorespaces 

\section{Using a Distributed VIPA to load balance}
\label{\detokenize{connectivity_guide:using-a-distributed-vipa-to-load-balance}}\label{\detokenize{connectivity_guide:index-173}}
Using a Dynamic VIPA with IBM’s SYSPLEX Distributor (SD) you can balance Virtel session workload across more than one Virtel STC. The distributing TCPIP stack will balance workload across the participating target TCPIP stacks. Allocation of new sessions on the IP side will depend on the selected SD/WLM algorithm. For example this can be a Round Robin policy or WLM policy workload algorithm. Access to the Virtel tasks is through using distributed VIPA address which is defined in a TCPIP profile. In the configuration above it is defined as
192.168.170.15. The relevant PROFILE definitions for TCPIP would look like:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{VIPADYNAMIC}
\PYG{n}{VIPARANGE} \PYG{n}{DEFINE} \PYG{n}{MOVEABLE} \PYG{n}{NONDISRUPTIVE} \PYG{l+m+mf}{255.255}\PYG{o}{.}\PYG{l+m+mf}{255.0} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.20}
\PYG{n}{VIPADEFINE} \PYG{n}{MOVE} \PYG{n}{IMMED} \PYG{l+m+mf}{255.255}\PYG{o}{.}\PYG{l+m+mf}{255.0} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.15}
\PYG{n}{VIPADISTRIBUTE} \PYG{n}{DEFINE} \PYG{n}{TIMEDAFF} \PYG{l+m+mi}{60} \PYG{n}{DISTMETHOD} \PYG{n}{ROUNDROBIN} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.15}
\PYG{n}{DESTIP} \PYG{n}{ALL}
\PYG{n}{ENDVIPADYNAMIC}
\end{sphinxVerbatim}

\index{Running multiple instances of Virtel@\spxentry{Running multiple instances of Virtel}!Session Affinity with DVIPA@\spxentry{Session Affinity with DVIPA}}\index{Session Affinity with DVIPA@\spxentry{Session Affinity with DVIPA}!Running multiple instances of Virtel@\spxentry{Running multiple instances of Virtel}}\ignorespaces 

\subsection{Session Affinity}
\label{\detokenize{connectivity_guide:session-affinity}}\label{\detokenize{connectivity_guide:index-174}}
It is essential to include the TIMEDAFF parameter in the VIPA definition as this maintains session affinity. The TIMEDAFF facility ensures that a user will always connect to the same VIRTEL while a session is open. Also, it is recommended that the Virtel line W-HTTP (port 41001) is used for Virtel Administration and line C-HTTP (port 41002) for user access
to applications.

Line W-HTTP should be defined using the base address of the LPAR (i.e.the home address of the default interface) by specifying only the port number. For example:

Local ident ==\textgreater{} :41001

Line C-HTTP should be defined using the distributed VIPA address and port number if you are using a dynamic VIPA:

Local ident ==\textgreater{} 192.168.170.15:41002

If you are not using a dynamic VIPA to point to your Virtel then the port address must be prefixed with 0 or 0.0.0.0. For example:-

Local ident ==\textgreater{} 0:41002

This will ensure the Virtel doesn’t associate itself with a particular IP address.

The Virtel Line display command displays this configuration:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{F} \PYG{n}{SPVIR1A}\PYG{p}{,}\PYG{n}{LINES}
\PYG{n}{VIR0200I} \PYG{n}{LINES}
\PYG{n}{VIR0201I} \PYG{n}{VIRTEL} \PYG{l+m+mf}{4.54} \PYG{n}{APPLID}\PYG{o}{=}\PYG{n}{VIRTEL1A} \PYG{n}{LINES}
\PYG{n}{VIR0202I} \PYG{n}{INT}\PYG{o}{.}\PYG{n}{NAME} \PYG{n}{EXT}\PYG{o}{.}\PYG{n}{NAME} \PYG{n}{TYPE} \PYG{n}{ACB} \PYG{n}{OR} \PYG{n}{IP}
\PYG{n}{VIR0202I} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}
\PYG{n}{VIR0202I} \PYG{n}{C}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP} \PYG{n}{HTTP}\PYG{o}{\PYGZhy{}}\PYG{n}{CLI} \PYG{n}{TCP1} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.15}\PYG{p}{:}\PYG{l+m+mi}{41002}
\PYG{n}{VIR0202I} \PYG{n}{W}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP} \PYG{n}{HTTP}\PYG{o}{\PYGZhy{}}\PYG{n}{W2H} \PYG{n}{TCP1} \PYG{p}{:}\PYG{l+m+mi}{41001}
\PYG{n}{VIR0202I} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{END} \PYG{n}{OF} \PYG{n}{LIST}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}
\end{sphinxVerbatim}

In this way the administrator can access a specific Virtel using port 41001 of the appropriate LPAR’s IP address, while the users can access both Virtels using port 41002 on the DVIPA address.

\newpage

\index{Running multiple instances of Virtel@\spxentry{Running multiple instances of Virtel}!Load balancing with Apache Proxy@\spxentry{Load balancing with Apache Proxy}}\index{Load balancing with Apache Proxy@\spxentry{Load balancing with Apache Proxy}!Running multiple instances of Virtel@\spxentry{Running multiple instances of Virtel}}\ignorespaces 

\section{Using an Apache Proxy to load balance}
\label{\detokenize{connectivity_guide:using-an-apache-proxy-to-load-balance}}\label{\detokenize{connectivity_guide:index-175}}
Another way of balancing workloads across multiple Virtel instances is through an Apache Reverse Proxy Server. In this setup the proxy server load balances IP sessions across the known TCPIP stacks, very much like IBM’s Sysplex Distributor.

\sphinxincludegraphics{{image96}.png}

\index{Running multiple instances of Virtel@\spxentry{Running multiple instances of Virtel}!Session Affinity with Apache@\spxentry{Session Affinity with Apache}}\index{Session Affinity with Apache@\spxentry{Session Affinity with Apache}!Running multiple instances of Virtel@\spxentry{Running multiple instances of Virtel}}\ignorespaces 
Again, to maintain session affinity the correct load balancing parameters must be used. An example from the http.conf looks like this:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{} Virtel}
\PYG{c+c1}{\PYGZsh{}}
\PYG{n}{ProxyPass} \PYG{o}{/} \PYG{n}{balancer}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{hostcluster}\PYG{o}{/}
\PYG{n}{ProxyPassReverse} \PYG{o}{/} \PYG{n}{balancer}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{hostcluster}\PYG{o}{/}
\PYG{o}{\PYGZlt{}}\PYG{n}{Proxy} \PYG{n}{balancer}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{hostcluster}\PYG{o}{\PYGZgt{}}
\PYG{n}{BalancerMember} \PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{syt00101}\PYG{o}{.}\PYG{n}{gzaop}\PYG{o}{.}\PYG{n}{local}\PYG{p}{:}\PYG{l+m+mi}{41002} \PYG{n}{retry}\PYG{o}{=}\PYG{l+m+mi}{5}
\PYG{n}{BalancerMember} \PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{syt00101}\PYG{o}{.}\PYG{n}{gzaop}\PYG{o}{.}\PYG{n}{local}\PYG{p}{:}\PYG{l+m+mi}{51002} \PYG{n}{retry}\PYG{o}{=}\PYG{l+m+mi}{5}
\PYG{n}{ProxySet} \PYG{n}{lbmethod}\PYG{o}{=}\PYG{n}{byrequests}
\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{Proxy}\PYG{o}{\PYGZgt{}}
\end{sphinxVerbatim}

For more information on setting up an Apache Proxy Server visit \sphinxurl{http://httpd.apache.org/docs/2.2/mod/mod\_proxy\_balancer.html}

To use Apache as a Proxy Server it is essential that the correct configuration modules are loaded at startup. Here is an example:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{}LoadModule foo\PYGZus{}module modules/mod\PYGZus{}foo.so}
\PYG{n}{LoadModule} \PYG{n}{authz\PYGZus{}host\PYGZus{}module} \PYG{n}{modules}\PYG{o}{/}\PYG{n}{mod\PYGZus{}authz\PYGZus{}host}\PYG{o}{.}\PYG{n}{so}
\PYG{n}{LoadModule} \PYG{n}{auth\PYGZus{}basic\PYGZus{}module} \PYG{n}{modules}\PYG{o}{/}\PYG{n}{mod\PYGZus{}auth\PYGZus{}basic}\PYG{o}{.}\PYG{n}{so}
\PYG{n}{LoadModule} \PYG{n}{authn\PYGZus{}file\PYGZus{}module} \PYG{n}{modules}\PYG{o}{/}\PYG{n}{mod\PYGZus{}authn\PYGZus{}file}\PYG{o}{.}\PYG{n}{so}
\PYG{n}{LoadModule} \PYG{n}{authz\PYGZus{}user\PYGZus{}module} \PYG{n}{modules}\PYG{o}{/}\PYG{n}{mod\PYGZus{}authz\PYGZus{}user}\PYG{o}{.}\PYG{n}{so}
\PYG{c+c1}{\PYGZsh{}LoadModule authz\PYGZus{}groupfile\PYGZus{}module modules/mod\PYGZus{}authz\PYGZus{}groupfile.so}
\PYG{n}{LoadModule} \PYG{n}{include\PYGZus{}module} \PYG{n}{modules}\PYG{o}{/}\PYG{n}{mod\PYGZus{}include}\PYG{o}{.}\PYG{n}{so}
\PYG{n}{LoadModule} \PYG{n}{log\PYGZus{}config\PYGZus{}module} \PYG{n}{modules}\PYG{o}{/}\PYG{n}{mod\PYGZus{}log\PYGZus{}config}\PYG{o}{.}\PYG{n}{so}
\PYG{n}{LoadModule} \PYG{n}{env\PYGZus{}module} \PYG{n}{modules}\PYG{o}{/}\PYG{n}{mod\PYGZus{}env}\PYG{o}{.}\PYG{n}{so}
\PYG{c+c1}{\PYGZsh{}LoadModule mime\PYGZus{}magic\PYGZus{}module modules/mod\PYGZus{}mime\PYGZus{}magic.so}
\PYG{c+c1}{\PYGZsh{}LoadModule expires\PYGZus{}module modules/mod\PYGZus{}expires.so}
\PYG{n}{LoadModule} \PYG{n}{headers\PYGZus{}module} \PYG{n}{modules}\PYG{o}{/}\PYG{n}{mod\PYGZus{}headers}\PYG{o}{.}\PYG{n}{so}
\PYG{n}{LoadModule} \PYG{n}{unique\PYGZus{}id\PYGZus{}module} \PYG{n}{modules}\PYG{o}{/}\PYG{n}{mod\PYGZus{}unique\PYGZus{}id}\PYG{o}{.}\PYG{n}{so}
\PYG{n}{LoadModule} \PYG{n}{setenvif\PYGZus{}module} \PYG{n}{modules}\PYG{o}{/}\PYG{n}{mod\PYGZus{}setenvif}\PYG{o}{.}\PYG{n}{so}
\PYG{n}{LoadModule} \PYG{n}{proxy\PYGZus{}module} \PYG{n}{modules}\PYG{o}{/}\PYG{n}{mod\PYGZus{}proxy}\PYG{o}{.}\PYG{n}{so}
\PYG{n}{LoadModule} \PYG{n}{proxy\PYGZus{}connect\PYGZus{}module} \PYG{n}{modules}\PYG{o}{/}\PYG{n}{mod\PYGZus{}proxy\PYGZus{}connect}\PYG{o}{.}\PYG{n}{so}
\PYG{c+c1}{\PYGZsh{}LoadModule proxy\PYGZus{}ftp\PYGZus{}module modules/mod\PYGZus{}proxy\PYGZus{}ftp.so}
\PYG{n}{LoadModule} \PYG{n}{proxy\PYGZus{}http\PYGZus{}module} \PYG{n}{modules}\PYG{o}{/}\PYG{n}{mod\PYGZus{}proxy\PYGZus{}http}\PYG{o}{.}\PYG{n}{so}
\PYG{n}{LoadModule} \PYG{n}{mime\PYGZus{}module} \PYG{n}{modules}\PYG{o}{/}\PYG{n}{mod\PYGZus{}mime}\PYG{o}{.}\PYG{n}{so}
\PYG{c+c1}{\PYGZsh{}LoadModule dav\PYGZus{}module modules/mod\PYGZus{}dav.so}
\PYG{c+c1}{\PYGZsh{}LoadModule dav\PYGZus{}fs\PYGZus{}module modules/mod\PYGZus{}dav\PYGZus{}fs.so}
\PYG{n}{LoadModule} \PYG{n}{autoindex\PYGZus{}module} \PYG{n}{modules}\PYG{o}{/}\PYG{n}{mod\PYGZus{}autoindex}\PYG{o}{.}\PYG{n}{so}
\PYG{c+c1}{\PYGZsh{}LoadModule asis\PYGZus{}module modules/mod\PYGZus{}asis.so}
\PYG{c+c1}{\PYGZsh{}LoadModule info\PYGZus{}module modules/mod\PYGZus{}info.so}
\PYG{n}{LoadModule} \PYG{n}{cgi\PYGZus{}module} \PYG{n}{modules}\PYG{o}{/}\PYG{n}{mod\PYGZus{}cgi}\PYG{o}{.}\PYG{n}{so}
\PYG{n}{LoadModule} \PYG{n}{dir\PYGZus{}module} \PYG{n}{modules}\PYG{o}{/}\PYG{n}{mod\PYGZus{}dir}\PYG{o}{.}\PYG{n}{so}
\PYG{n}{LoadModule} \PYG{n}{actions\PYGZus{}module} \PYG{n}{modules}\PYG{o}{/}\PYG{n}{mod\PYGZus{}actions}\PYG{o}{.}\PYG{n}{so}
\PYG{c+c1}{\PYGZsh{}LoadModule speling\PYGZus{}module modules/mod\PYGZus{}speling.so}
\PYG{c+c1}{\PYGZsh{}LoadModule userdir\PYGZus{}module modules/mod\PYGZus{}userdir.so}
\PYG{n}{LoadModule} \PYG{n}{alias\PYGZus{}module} \PYG{n}{modules}\PYG{o}{/}\PYG{n}{mod\PYGZus{}alias}\PYG{o}{.}\PYG{n}{so}
\PYG{c+c1}{\PYGZsh{}LoadModule rewrite\PYGZus{}module modules/mod\PYGZus{}rewrite.so}
\PYG{c+c1}{\PYGZsh{}LoadModule deflate\PYGZus{}module modules/mod\PYGZus{}deflate.so}
\PYG{n}{LoadModule} \PYG{n}{proxy\PYGZus{}balancer\PYGZus{}module} \PYG{n}{modules}\PYG{o}{/}\PYG{n}{mod\PYGZus{}proxy\PYGZus{}balancer}\PYG{o}{.}\PYG{n}{so}
\end{sphinxVerbatim}

Some other Apache configuration recommendations are:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{*} \PYG{n}{Timeouts}
\PYG{n}{SSLDisable}
\PYG{n}{SSLV3Timeout} \PYG{l+m+mi}{18010}
\PYG{o}{*} \PYG{n}{Format} \PYG{n}{log} \PYG{k}{with} \PYG{n}{router} \PYG{n}{information}
\PYG{n}{LogFormat} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{h }\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{l }\PYG{l+s+si}{\PYGZpc{}u}\PYG{l+s+s2}{ }\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{t}\PYG{l+s+se}{\PYGZbs{}\PYGZdq{}}\PYG{l+s+si}{\PYGZpc{}r}\PYG{l+s+se}{\PYGZbs{}\PYGZdq{}}\PYG{l+s+s2}{ }\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{\PYGZgt{}s }\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{b }\PYG{l+s+se}{\PYGZbs{}\PYGZdq{}}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+si}{\PYGZob{}Referer\PYGZcb{}}\PYG{l+s+s2}{i}\PYG{l+s+se}{\PYGZbs{}\PYGZdq{}}\PYG{l+s+s2}{ }\PYG{l+s+se}{\PYGZbs{}\PYGZdq{}}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+s2}{\PYGZob{}}\PYG{l+s+s2}{User\PYGZhy{}Agent\PYGZcb{}i}\PYG{l+s+se}{\PYGZbs{}\PYGZdq{}}\PYG{l+s+s2}{ }\PYG{l+s+se}{\PYGZbs{}\PYGZdq{}}\PYG{l+s+s2}{\PYGZpc{}}\PYG{l+s+si}{\PYGZob{}BALANCER\PYGZus{}WORKER\PYGZus{}ROUTE\PYGZcb{}}\PYG{l+s+s2}{e}\PYG{l+s+se}{\PYGZbs{}\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{combined}
\PYG{o}{*} \PYG{n+nb}{set} \PYG{n}{Max}\PYG{o}{\PYGZhy{}}\PYG{n}{Age} \PYG{n}{to} \PYG{l+m+mi}{12}\PYG{n}{h} \PYG{p}{(}\PYG{n}{doesn}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{t work with IE)  or}
\PYG{o}{*} \PYG{n}{enable} \PYG{n}{mod\PYGZus{}expires} \PYG{o+ow}{and} \PYG{n+nb}{set}\PYG{p}{:} \PYG{p}{(}\PYG{n}{this} \PYG{n}{should} \PYG{n}{be} \PYG{n}{checked}\PYG{p}{)}
\PYG{n}{ExpiresActive} \PYG{n}{On}
\PYG{n}{ExpiresDefault} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{access plus 16 h}\PYG{l+s+s2}{\PYGZdq{}}
\end{sphinxVerbatim}

See \sphinxurl{https://httpd.apache.org/docs/2.2/mod/mod\_expires.html} for more information.

\index{VIRPLEX@\spxentry{VIRPLEX}}\ignorespaces 

\chapter{VIRPLEX}
\label{\detokenize{connectivity_guide:virplex}}\label{\detokenize{connectivity_guide:v460cn-virplex}}\label{\detokenize{connectivity_guide:index-177}}
Virplex

The new Virplex communication feature of Virtel provides the ability for multiple virtel instances to communicate with each other. This global knowledge of participating Virtel instances is referred to as a Virplex and enables Virtel instances to share the same ARBO and TRSF files. In a Virplex there is a number of Virtel “READ ONLY” instances and one “WRITER” instance. These instances all share the same ARBO and TRSF files, including any user defined TRSF files, with the read only instances only have a “READ” capability on the shared VSAM files and the “WRITER” instance having a standard tandard read/write capability to all files.  The ability to share files amongst participating Virtels provides support for the following functions:

Dynamic Message Routing
Removes the dependency of external “Timed Affinity” technologies to support session affinity between a Virtel instance and browser session. Changes in the URL format now enable participating Virtels within the Virplex to determine whether they are the target of the URL or if the URL belongs to another Virtel instance. In the latter case the URL is forwarded onto the target Virtel destination. A unique Virplex token is attached to each URL request which provides the affinity between a Virtel instance and browser session. This feature provides additional support in customer’s High Availability scenarios/implementations.

Dynamic Cache Updates
Within a Virplex environment maintenance can now be distributed to all participating instances through the “WRITER” instance. This feature enables maintenance updates to be populated to each Virtel’s internal cache system without the need to recycle a Virtel instance. The sequence of events would be as follows:-
\begin{itemize}
\item {} 
Virtel maintenance is uploaded, via the “Writer” task, to the SAMP.TRSF VSAM file.

\item {} 
The “WRITER” tasks then contacts each participating “READER” tasks to inform them that their internal cache is no longer in sync.

\item {} 
The “Reader” instance resynchronizes their “internal cache” with the TRSF file thereby dynamically refreshing the browsers cache and introducing the new maintenance.

\end{itemize}

Central User Parameter Repository
Using the features of Virplex users can now maintain a centralized repository for user’s VWA settings across multiple instances of Virtel. This repository keeps each users settings so that when a new browser session is initiated the same settings will be used. Previously settings were only maintained in local storage and were lost when moving to a different browser or device. Now the local storage is synchronized with the central repository enabling the user to maintain the same settings across different environments.


\section{Setting up a Virplex}
\label{\detokenize{connectivity_guide:setting-up-a-virplex}}
\sphinxincludegraphics{{image112}.png}

\index{TCT definitions@\spxentry{TCT definitions}!Virplex@\spxentry{Virplex}}\index{Virplex@\spxentry{Virplex}!TCT definitions@\spxentry{TCT definitions}}\ignorespaces 

\section{TCT definitions}
\label{\detokenize{connectivity_guide:tct-definitions}}\label{\detokenize{connectivity_guide:index-178}}
Setting up a Virplex involves two TCTs, one for the ‘READER’ instances and another for the ‘WRITER’ instance. There can be multiple ‘READER’ instances but only one ‘WRITER’ instance.


\subsection{TCT for ‘READER’ tasks.}
\label{\detokenize{connectivity_guide:tct-for-reader-tasks}}
The TCT for ‘READER’ tasks must have the following TCT definitions:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{VSAMTYP}\PYG{o}{=}\PYG{n}{READONLY}\PYG{p}{,}                           \PYG{n}{Set} \PYG{n}{Read} \PYG{n}{only}\PYG{o}{.} \PYG{n}{Default} \PYG{o}{=} \PYG{n}{Read}\PYG{o}{/}\PYG{n}{Write}
\PYG{n}{IGNLU}\PYG{o}{=}\PYG{n}{W}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}\PYG{p}{,}                           \PYG{n}{Disable} \PYG{n}{the} \PYG{n}{Admin} \PYG{n}{line}
\PYG{o}{.} \PYG{o}{.} \PYG{o}{.}
\PYG{n}{UFILE1}\PYG{o}{=}\PYG{p}{(}\PYG{n}{SAMPTRSF}\PYG{p}{,}\PYG{n}{ACBH1}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{10}\PYG{p}{,}\PYG{l+m+mi}{05}\PYG{p}{)}\PYG{p}{,}            \PYG{n}{ACBHx} \PYG{n}{fields} \PYG{n+nb}{set} \PYG{n}{accordingly}\PYG{o}{.} \PYG{n}{Note} \PYG{l+m+mi}{05}
\PYG{n}{UFILE2}\PYG{o}{=}\PYG{p}{(}\PYG{n}{HTMLTRSF}\PYG{p}{,}\PYG{n}{ACBH2}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{10}\PYG{p}{,}\PYG{l+m+mi}{05}\PYG{p}{)}\PYG{p}{,}            \PYG{o+ow}{and} \PYG{o+ow}{not} \PYG{l+m+mf}{01.}
\PYG{o}{.} \PYG{o}{.} \PYG{o}{.}
\PYG{n}{ACBH1}    \PYG{n}{ACB}   \PYG{n}{AM}\PYG{o}{=}\PYG{n}{VSAM}\PYG{p}{,}\PYG{n}{DDNAME}\PYG{o}{=}\PYG{n}{SAMPTRSF}\PYG{p}{,}\PYG{n}{MACRF}\PYG{o}{=}\PYG{p}{(}\PYG{n}{SEQ}\PYG{p}{,}\PYG{n}{DIR}\PYG{p}{)}\PYG{p}{,}                \PYG{o}{*}
             \PYG{n}{STRNO}\PYG{o}{=}\PYG{l+m+mi}{3}                 \PYG{n}{OUT} \PYG{n}{option} \PYG{n}{removed}
\PYG{n}{ACBH2}    \PYG{n}{ACB}   \PYG{n}{AM}\PYG{o}{=}\PYG{n}{VSAM}\PYG{p}{,}\PYG{n}{DDNAME}\PYG{o}{=}\PYG{n}{HTMLTRSF}\PYG{p}{,}\PYG{n}{MACRF}\PYG{o}{=}\PYG{p}{(}\PYG{n}{SEQ}\PYG{p}{,}\PYG{n}{DIR}\PYG{p}{)}\PYG{p}{,}                \PYG{o}{*}
            \PYG{n}{STRNO}\PYG{o}{=}\PYG{l+m+mi}{3}                 \PYG{n}{OUT} \PYG{n}{option} \PYG{n}{removed}
\end{sphinxVerbatim}


\subsection{TCT for ‘WRITER’ task}
\label{\detokenize{connectivity_guide:tct-for-writer-task}}
The TCT for a ‘WRITER’ task must have the following definitions in the TCT.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{VSAMTYP}\PYG{o}{=}\PYG{n}{WRITER}\PYG{p}{,}                             \PYG{n}{Set} \PYG{n}{Writer} \PYG{n}{Instance}
\PYG{n}{IGNLU}\PYG{o}{=}\PYG{n}{C}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}\PYG{p}{,}                           \PYG{n}{Disable} \PYG{n+nb}{any} \PYG{n}{user} \PYG{n}{line}
\PYG{o}{.} \PYG{o}{.} \PYG{o}{.}
\PYG{n}{UFILE1}\PYG{o}{=}\PYG{p}{(}\PYG{n}{SAMPTRSF}\PYG{p}{,}\PYG{n}{ACBH1}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{10}\PYG{p}{,}\PYG{l+m+mi}{05}\PYG{p}{)}\PYG{p}{,}            \PYG{n}{ACBHx} \PYG{n}{fields} \PYG{n+nb}{set} \PYG{n}{to} \PYG{l+m+mi}{05} \PYG{o+ow}{and} \PYG{o+ow}{not} \PYG{l+m+mf}{01.}
\PYG{n}{UFILE2}\PYG{o}{=}\PYG{p}{(}\PYG{n}{HTMLTRSF}\PYG{p}{,}\PYG{n}{ACBH2}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{10}\PYG{p}{,}\PYG{l+m+mi}{05}\PYG{p}{)}\PYG{p}{,}
\PYG{o}{.} \PYG{o}{.} \PYG{o}{.}
\PYG{n}{ACBH1}    \PYG{n}{ACB}   \PYG{n}{AM}\PYG{o}{=}\PYG{n}{VSAM}\PYG{p}{,}\PYG{n}{DDNAME}\PYG{o}{=}\PYG{n}{SAMPTRSF}\PYG{p}{,}\PYG{n}{MACRF}\PYG{o}{=}\PYG{p}{(}\PYG{n}{SEQ}\PYG{p}{,}\PYG{n}{DIR}\PYG{p}{)}\PYG{p}{,}                \PYG{o}{*}
              \PYG{n}{STRNO}\PYG{o}{=}\PYG{l+m+mi}{3}
\PYG{n}{ACBH2}    \PYG{n}{ACB}   \PYG{n}{AM}\PYG{o}{=}\PYG{n}{VSAM}\PYG{p}{,}\PYG{n}{DDNAME}\PYG{o}{=}\PYG{n}{HTMLTRSF}\PYG{p}{,}\PYG{n}{MACRF}\PYG{o}{=}\PYG{p}{(}\PYG{n}{SEQ}\PYG{p}{,}\PYG{n}{DIR}\PYG{p}{)}\PYG{p}{,}                \PYG{o}{*}
              \PYG{n}{STRNO}\PYG{o}{=}\PYG{l+m+mi}{3}
\end{sphinxVerbatim}

\index{Arbo definitions@\spxentry{Arbo definitions}!Virplex@\spxentry{Virplex}}\index{Virplex@\spxentry{Virplex}!Arbo definitions@\spxentry{Arbo definitions}}\ignorespaces 

\section{ARBO definitions}
\label{\detokenize{connectivity_guide:arbo-definitions}}\label{\detokenize{connectivity_guide:index-179}}
To support a Virplex each Virtel instance must be aware of all instances within the Virplex. This internal communication is provide by defining Virtel lines between each instance. These lines are defined in a common ARBO file shared by all members of a Virplex. The communications protocol used between Virplex members is the proprietary QUICKLNK protocol. In the following sample definitions the W-HTTP line is the administration port only available to the ‘WRITER’ task and the common user line, V-HTTP provides the common port for the Virtel instances within the Virplex.

QLNK Line definitions for ‘READER’ instances.\textasciitilde{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{*} \PYG{n}{QLNK} \PYG{n}{Lines} \PYG{k}{for} \PYG{n}{Virplex} \PYG{n}{Reader} \PYG{n}{tasks}\PYG{o}{.}
\PYG{n}{LINE}     \PYG{n}{ID}\PYG{o}{=}\PYG{n}{SPVIRE00}\PYG{p}{,}
        \PYG{n}{NAME}\PYG{o}{=}\PYG{n}{SPVIRE00}\PYG{p}{,}
        \PYG{n}{LOCADDR}\PYG{o}{=}\PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.81}\PYG{p}{:}\PYG{l+m+mi}{41030}\PYG{p}{,}
        \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Virplex READ ONLY instance \PYGZhy{} SPVIRE00}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
        \PYG{n}{TYPE}\PYG{o}{=}\PYG{n}{TCP1}\PYG{p}{,}
        \PYG{n}{INOUT}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}
        \PYG{n}{PROTOCOL}\PYG{o}{=}\PYG{n}{QUICKLNK}\PYG{p}{,}
        \PYG{n}{TIMEOUT}\PYG{o}{=}\PYG{l+m+mi}{0000}\PYG{p}{,}
        \PYG{n}{ACTION}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,}
        \PYG{n}{WINSZ}\PYG{o}{=}\PYG{l+m+mi}{0000}\PYG{p}{,}
        \PYG{n}{PKTSZ}\PYG{o}{=}\PYG{l+m+mi}{0000}\PYG{p}{,}
        \PYG{n}{RETRY}\PYG{o}{=}\PYG{l+m+mi}{0000}
\end{sphinxVerbatim}

The ID and Name keywords must refer to the instances VTAM ACB name. The address in the LOCADDR must be unique within the Virplex.

QLNK Line definition for ‘WRITER’ instance.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{*} \PYG{n}{QLNK} \PYG{n}{Lines} \PYG{k}{for} \PYG{n}{Virplex} \PYG{n}{Writer} \PYG{n}{tasks}
\PYG{n}{LINE}     \PYG{n}{ID}\PYG{o}{=}\PYG{n}{SPVIRE99}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
        \PYG{n}{NAME}\PYG{o}{=}\PYG{n}{SPVIRE99}\PYG{p}{,}                                          \PYG{o}{\PYGZhy{}}
        \PYG{n}{LOCADDR}\PYG{o}{=}\PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.81}\PYG{p}{:}\PYG{l+m+mi}{41099}\PYG{p}{,}  \PYG{n}{SHARED} \PYG{n}{PORT}              \PYG{o}{\PYGZhy{}}
        \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Virplex READ/WRITE instance \PYGZhy{} SPVIRE99}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}          \PYG{o}{\PYGZhy{}}
        \PYG{n}{TERMINAL}\PYG{o}{=}\PYG{n}{VX}\PYG{p}{,}                                            \PYG{o}{\PYGZhy{}}
        \PYG{n}{TYPE}\PYG{o}{=}\PYG{n}{TCP1}\PYG{p}{,}                                              \PYG{o}{\PYGZhy{}}
        \PYG{n}{INOUT}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}                                                \PYG{o}{\PYGZhy{}}
        \PYG{n}{PROTOCOL}\PYG{o}{=}\PYG{n}{QUICKLNK}\PYG{p}{,}                                      \PYG{o}{\PYGZhy{}}
        \PYG{n}{TIMEOUT}\PYG{o}{=}\PYG{l+m+mi}{0000}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
        \PYG{n}{ACTION}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,}                                               \PYG{o}{\PYGZhy{}}
        \PYG{n}{WINSZ}\PYG{o}{=}\PYG{l+m+mi}{0000}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
        \PYG{n}{PKTSZ}\PYG{o}{=}\PYG{l+m+mi}{0000}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
        \PYG{n}{RETRY}\PYG{o}{=}\PYG{l+m+mi}{0000}
\end{sphinxVerbatim}

The ID and Name keywords must refer to the WRITER’s VTAM ACB name. The address in the LOCADDR must be unique within the Virplex. The WRITER task also requires additional terminal definitions \textendash{} TERMINAL=VX.

Terminal definitions for ‘WRITER’ instance.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{TERMINAL} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{VXLOC000}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
        \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{HTTP terminals (no relay)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                       \PYG{o}{\PYGZhy{}}
        \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}                                                 \PYG{o}{\PYGZhy{}}
        \PYG{n}{COMPRESS}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
        \PYG{n}{INOUT}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}                                                \PYG{o}{\PYGZhy{}}
        \PYG{n}{STATS}\PYG{o}{=}\PYG{l+m+mi}{26}\PYG{p}{,}                                               \PYG{o}{\PYGZhy{}}
        \PYG{n}{REPEAT}\PYG{o}{=}\PYG{l+m+mi}{0010}
\end{sphinxVerbatim}

Modifications to existing lines will also be required. Assuming that the ‘WRITER’ line will be using line W-HTTP to communicate with the ‘READER’ instances, and the C-HTTP line will be associated with the ‘READER’ instances serving incoming calls, the following changes are required.

\sphinxstylestrong{Virtel lines for Administration (W-HTTP) and user access (V-HTTP).}

In both the V-HTTP and W-HTTP line definitions, the COND=’VIRPLEX-LINE(=VIRTEL=)’ parameter must be added. Here is an example of the revised definition for W-HTTP.

Administration line associated with the ‘WRITER’ task.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{*} \PYG{n}{UPDATE} \PYG{n}{W}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP} \PYG{n}{WITH} \PYG{n}{COND}\PYG{o}{=}
\PYG{n}{LINE}     \PYG{n}{ID}\PYG{o}{=}\PYG{n}{W}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
        \PYG{n}{NAME}\PYG{o}{=}\PYG{n}{HTTP}\PYG{o}{\PYGZhy{}}\PYG{n}{W2H}\PYG{p}{,}                                          \PYG{o}{\PYGZhy{}}
        \PYG{n}{LOCADDR}\PYG{o}{=}\PYG{p}{:}\PYG{l+m+mi}{41001}\PYG{p}{,}                                         \PYG{o}{\PYGZhy{}}
        \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{HTTP line (entry point WEB2HOST)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                \PYG{o}{\PYGZhy{}}
        \PYG{n}{TERMINAL}\PYG{o}{=}\PYG{n}{DE}\PYG{p}{,}                                            \PYG{o}{\PYGZhy{}}
        \PYG{n}{ENTRY}\PYG{o}{=}\PYG{n}{WEB2HOST}\PYG{p}{,}                                         \PYG{o}{\PYGZhy{}}
        \PYG{n}{TYPE}\PYG{o}{=}\PYG{n}{TCP1}\PYG{p}{,}                                              \PYG{o}{\PYGZhy{}}
        \PYG{n}{INOUT}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,}                                                \PYG{o}{\PYGZhy{}}
        \PYG{n}{COND}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VIRPLEX\PYGZhy{}LINE(=VIRTEL=)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                          \PYG{o}{\PYGZhy{}}
        \PYG{n}{PROTOCOL}\PYG{o}{=}\PYG{n}{VIRHTTP}\PYG{p}{,}                                       \PYG{o}{\PYGZhy{}}
        \PYG{n}{TIMEOUT}\PYG{o}{=}\PYG{l+m+mi}{0000}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
        \PYG{n}{ACTION}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,}                                               \PYG{o}{\PYGZhy{}}
        \PYG{n}{WINSZ}\PYG{o}{=}\PYG{l+m+mi}{0000}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
        \PYG{n}{PKTSZ}\PYG{o}{=}\PYG{l+m+mi}{0000}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
        \PYG{n}{RETRY}\PYG{o}{=}\PYG{l+m+mi}{0010}
\end{sphinxVerbatim}

The user interface line definition, V-HTTP, looks like this:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{*}
\PYG{o}{*} \PYG{n}{User} \PYG{n}{line} \PYG{n}{associated} \PYG{k}{with} \PYG{n}{Virplex} \PYG{n}{VIPA} \PYG{l+m+mf}{15.41902}               \PYG{o}{*}
\PYG{o}{*}
\PYG{n}{LINE}     \PYG{n}{ID}\PYG{o}{=}\PYG{n}{V}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
        \PYG{n}{NAME}\PYG{o}{=}\PYG{n}{HTTP}\PYG{o}{\PYGZhy{}}\PYG{n}{VPX}\PYG{p}{,}                                          \PYG{o}{\PYGZhy{}}
        \PYG{n}{LOCADDR}\PYG{o}{=}\PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.15}\PYG{p}{:}\PYG{l+m+mi}{41902}\PYG{p}{,}                           \PYG{o}{\PYGZhy{}}
        \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{HTTP line (Entry point VPXWHOST)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                \PYG{o}{\PYGZhy{}}
        \PYG{n}{TERMINAL}\PYG{o}{=}\PYG{n}{VP}\PYG{p}{,}                                            \PYG{o}{\PYGZhy{}}
        \PYG{n}{ENTRY}\PYG{o}{=}\PYG{n}{VPXWHOST}\PYG{p}{,}                                         \PYG{o}{\PYGZhy{}}
        \PYG{n}{COND}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VIRPLEX\PYGZhy{}LINE(=VIRTEL=)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
        \PYG{n}{TYPE}\PYG{o}{=}\PYG{n}{TCP1}\PYG{p}{,}                                              \PYG{o}{\PYGZhy{}}
        \PYG{n}{INOUT}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,}                                                \PYG{o}{\PYGZhy{}}
        \PYG{n}{PROTOCOL}\PYG{o}{=}\PYG{n}{VIRHTTP}\PYG{p}{,}                                       \PYG{o}{\PYGZhy{}}
        \PYG{n}{TIMEOUT}\PYG{o}{=}\PYG{l+m+mi}{0000}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
        \PYG{n}{ACTION}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,}                                               \PYG{o}{\PYGZhy{}}
        \PYG{n}{WINSZ}\PYG{o}{=}\PYG{l+m+mi}{0000}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
        \PYG{n}{PKTSZ}\PYG{o}{=}\PYG{l+m+mi}{0000}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
        \PYG{n}{RETRY}\PYG{o}{=}\PYG{l+m+mi}{0010}
\PYG{o}{*}
\end{sphinxVerbatim}

Terminal definitions to support user interface on common port 41902.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{*}
\PYG{n}{TERMINAL} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{VPLOC000}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
        \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{HTTP terminals (no relay) \PYGZhy{} V\PYGZhy{}HTTP}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}              \PYG{o}{\PYGZhy{}}
        \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}                                                 \PYG{o}{\PYGZhy{}}
        \PYG{n}{COMPRESS}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
        \PYG{n}{INOUT}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}                                                \PYG{o}{\PYGZhy{}}
        \PYG{n}{STATS}\PYG{o}{=}\PYG{l+m+mi}{26}\PYG{p}{,}                                               \PYG{o}{\PYGZhy{}}
        \PYG{n}{REPEAT}\PYG{o}{=}\PYG{l+m+mi}{0080}
\end{sphinxVerbatim}

\sphinxstylestrong{Entry point definition for VPXHOST}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{*}
\PYG{n}{ENTRY}    \PYG{n}{ID}\PYG{o}{=}\PYG{n}{VPXWHOST}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
        \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{HTTP entry point for Virplex line)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}              \PYG{o}{\PYGZhy{}}
        \PYG{n}{TRANSACT}\PYG{o}{=}\PYG{n}{VPX}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
        \PYG{n}{TIMEOUT}\PYG{o}{=}\PYG{l+m+mi}{0720}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
        \PYG{n}{ACTION}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,}                                               \PYG{o}{\PYGZhy{}}
        \PYG{n}{EMUL}\PYG{o}{=}\PYG{n}{HTML}\PYG{p}{,}                                              \PYG{o}{\PYGZhy{}}
        \PYG{n}{SIGNON}\PYG{o}{=}\PYG{n}{VIR0020H}\PYG{p}{,}                                        \PYG{o}{\PYGZhy{}}
        \PYG{n}{MENU}\PYG{o}{=}\PYG{n}{VIR0021A}\PYG{p}{,}                                          \PYG{o}{\PYGZhy{}}
        \PYG{n}{IDENT}\PYG{o}{=}\PYG{n}{SCENLOGM}\PYG{p}{,}                                         \PYG{o}{\PYGZhy{}}
        \PYG{n}{EXTCOLOR}\PYG{o}{=}\PYG{n}{E}
\end{sphinxVerbatim}

\sphinxstylestrong{Pool definitions}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{*}
\PYG{n}{TERMINAL} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{VPXIM000}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
        \PYG{n}{RELAY}\PYG{o}{=}\PYG{n}{R}\PYG{o}{+}\PYG{n}{IM000}\PYG{p}{,}                                          \PYG{o}{\PYGZhy{}}
        \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{SCS printers (LUTYPE1) for HTTP}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                 \PYG{o}{\PYGZhy{}}
        \PYG{n}{TYPE}\PYG{o}{=}\PYG{n}{S}\PYG{p}{,}                                                 \PYG{o}{\PYGZhy{}}
        \PYG{n}{COMPRESS}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
        \PYG{n}{INOUT}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,}                                                \PYG{o}{\PYGZhy{}}
        \PYG{n}{STATS}\PYG{o}{=}\PYG{l+m+mi}{26}\PYG{p}{,}                                               \PYG{o}{\PYGZhy{}}
        \PYG{n}{REPEAT}\PYG{o}{=}\PYG{l+m+mi}{0010}
\PYG{n}{TERMINAL} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{VPXTP000}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
        \PYG{n}{RELAY}\PYG{o}{=}\PYG{n}{R}\PYG{o}{+}\PYG{n}{VT000}\PYG{p}{,}                                          \PYG{o}{\PYGZhy{}}
        \PYG{n}{POOL}\PYG{o}{=}\PYG{o}{*}\PYG{n}{VPXPOOL}\PYG{p}{,}                                          \PYG{o}{\PYGZhy{}}
        \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Relay pool for HTTP}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                             \PYG{o}{\PYGZhy{}}
        \PYG{n}{RELAY2}\PYG{o}{=}\PYG{n}{R}\PYG{o}{+}\PYG{n}{IM000}\PYG{p}{,}                                         \PYG{o}{\PYGZhy{}}
        \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}                                                 \PYG{o}{\PYGZhy{}}
        \PYG{n}{COMPRESS}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
        \PYG{n}{INOUT}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}                                                \PYG{o}{\PYGZhy{}}
        \PYG{n}{STATS}\PYG{o}{=}\PYG{l+m+mi}{26}\PYG{p}{,}                                               \PYG{o}{\PYGZhy{}}
        \PYG{n}{REPEAT}\PYG{o}{=}\PYG{l+m+mi}{0010}
\end{sphinxVerbatim}

\sphinxstylestrong{Terminal relay definitions}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{*}
\PYG{n}{TERMINAL} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{VPVTA000}\PYG{p}{,}                                           \PYG{o}{\PYGZhy{}}
        \PYG{n}{RELAY}\PYG{o}{=}\PYG{o}{*}\PYG{n}{VPXPOOL}\PYG{p}{,}                                         \PYG{o}{\PYGZhy{}}
        \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{HTTP terminals (with relay)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                     \PYG{o}{\PYGZhy{}}
        \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}                                                 \PYG{o}{\PYGZhy{}}
        \PYG{n}{COMPRESS}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}                                             \PYG{o}{\PYGZhy{}}
        \PYG{n}{INOUT}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}                                                \PYG{o}{\PYGZhy{}}
        \PYG{n}{STATS}\PYG{o}{=}\PYG{l+m+mi}{26}\PYG{p}{,}                                               \PYG{o}{\PYGZhy{}}
        \PYG{n}{REPEAT}\PYG{o}{=}\PYG{l+m+mi}{0010}
\end{sphinxVerbatim}

Note the use of the + in the relay names. This will be overwritten with the clone parameter in the startup JCL for the ‘READER’ tasks.

\sphinxstylestrong{Transaction definitions}

These transactions are required to support Virtel and Applications in a Virplex.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{*} \PYG{n}{Virtel} \PYG{n}{Internal} \PYG{n}{transactions}
\PYG{n}{TRANSACT} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{VPX}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{00}\PYG{p}{,}
        \PYG{n}{NAME}\PYG{o}{=}\PYG{n}{VPXWHOST}\PYG{p}{,}
        \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Default directory = entry point name}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
        \PYG{n}{APPL}\PYG{o}{=}\PYG{n}{VPX}\PYG{o}{\PYGZhy{}}\PYG{n}{DIR}\PYG{p}{,}
        \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{4}\PYG{p}{,}
        \PYG{n}{TERMINAL}\PYG{o}{=}\PYG{n}{VPLOC}\PYG{p}{,}
        \PYG{n}{STARTUP}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}
        \PYG{n}{SECURITY}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,}
        \PYG{n}{TIOASTA}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{/w2h/appmenu.htm+applist}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{n}{TRANSACT} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{VPX}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{03}\PYG{n}{W}\PYG{p}{,}
        \PYG{n}{NAME}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{w2h}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
        \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{W2H toolkit directory (/w2h)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
        \PYG{n}{APPL}\PYG{o}{=}\PYG{n}{W2H}\PYG{o}{\PYGZhy{}}\PYG{n}{DIR}\PYG{p}{,}
        \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{4}\PYG{p}{,}
        \PYG{n}{STARTUP}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}
        \PYG{n}{SECURITY}\PYG{o}{=}\PYG{l+m+mi}{0}
\PYG{n}{TRANSACT} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{VPX}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{03}\PYG{n}{X}\PYG{p}{,}
        \PYG{n}{NAME}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{vpx}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
        \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VPX directory (/vpx)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
        \PYG{n}{APPL}\PYG{o}{=}\PYG{n}{VPX}\PYG{o}{\PYGZhy{}}\PYG{n}{DIR}\PYG{p}{,}
        \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{4}\PYG{p}{,}
        \PYG{n}{STARTUP}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}
        \PYG{n}{SECURITY}\PYG{o}{=}\PYG{l+m+mi}{0}
\PYG{n}{TRANSACT} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{VPX}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{03}\PYG{n}{Y}\PYG{p}{,}
        \PYG{n}{NAME}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{yui}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
        \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{YUI toolkit directory (/yui)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
        \PYG{n}{APPL}\PYG{o}{=}\PYG{n}{YUI}\PYG{o}{\PYGZhy{}}\PYG{n}{DIR}\PYG{p}{,}
        \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{4}\PYG{p}{,}
        \PYG{n}{STARTUP}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}
        \PYG{n}{SECURITY}\PYG{o}{=}\PYG{l+m+mi}{0}
\PYG{n}{TRANSACT} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{VPX}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{90}\PYG{p}{,}
        \PYG{n}{NAME}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{applist}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
        \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{List of applications for appmenu.htm}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
        \PYG{n}{APPL}\PYG{o}{=}\PYG{n}{VIR0021S}\PYG{p}{,}
        \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}
        \PYG{n}{TERMINAL}\PYG{o}{=}\PYG{n}{VPLOC}\PYG{p}{,}
        \PYG{n}{STARTUP}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}
        \PYG{n}{SECURITY}\PYG{o}{=}\PYG{l+m+mi}{1}
\PYG{n}{TRANSACT} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{W2H}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{80}\PYG{n}{X}\PYG{p}{,}
        \PYG{n}{NAME}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{uplvpx}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
        \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Upload macros (VPX\PYGZhy{}DIR directory)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
        \PYG{n}{APPL}\PYG{o}{=}\PYG{n}{VIR0041C}\PYG{p}{,}
        \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}
        \PYG{n}{TERMINAL}\PYG{o}{=}\PYG{n}{DELOC}\PYG{p}{,}
        \PYG{n}{STARTUP}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}
        \PYG{n}{SECURITY}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,}
        \PYG{n}{LOGMSG}\PYG{o}{=}\PYG{n}{VPX}\PYG{o}{\PYGZhy{}}\PYG{n}{DIR}
\end{sphinxVerbatim}

These transactions define the 3270 applications.
\begin{quote}
\begin{description}
\item[{TRANSACT ID=VPX-14,}] \leavevmode
NAME=TSO,
DESC=’Logon to TSO’,
APPL=TSO,
TYPE=1,
TERMINAL=VPVTA,
STARTUP=1,
SECURITY=1

\item[{TRANSACT ID=VPX-15,}] \leavevmode
NAME=CICS,
DESC=’Logon to CICS’,
APPL=SPCICST,
TYPE=1,
TERMINAL=VPVTA,
STARTUP=1,
SECURITY=1,
TIOASTA=”Signon\&/F\&*7D4EC9\&’114BE9’\&U\&’114CF9’\&P\&/A”

\end{description}
\end{quote}

\sphinxstylestrong{Sub directory definition for VIR-DIR}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{*}
\PYG{n}{SUBDIR}   \PYG{n}{ID}\PYG{o}{=}\PYG{n}{VPX}\PYG{o}{\PYGZhy{}}\PYG{n}{DIR}\PYG{p}{,}
        \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Pages for VPXWHOST}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
        \PYG{n}{DDNAME}\PYG{o}{=}\PYG{n}{HTMLTRSF}\PYG{p}{,}
        \PYG{n}{KEY}\PYG{o}{=}\PYG{n}{VPX}\PYG{o}{\PYGZhy{}}\PYG{n}{KEY}\PYG{p}{,}
        \PYG{n}{NAMELEN}\PYG{o}{=}\PYG{l+m+mi}{0064}\PYG{p}{,}
        \PYG{n}{AUTHUP}\PYG{o}{=}\PYG{n}{X}\PYG{p}{,}
        \PYG{n}{AUTHDOWN}\PYG{o}{=}\PYG{n}{X}\PYG{p}{,}
        \PYG{n}{AUTHDEL}\PYG{o}{=}\PYG{n}{X}
\end{sphinxVerbatim}

\index{JCL Examples@\spxentry{JCL Examples}!Virplex@\spxentry{Virplex}}\index{Virplex@\spxentry{Virplex}!JCL Examples@\spxentry{JCL Examples}}\ignorespaces 
\sphinxstylestrong{Virplex JCL examples}

JCL Procedure for Virplex.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*} \PYG{n}{DEFAULT} \PYG{n}{PROCEDURE} \PYG{n}{FOR} \PYG{n}{A} \PYG{n}{VIRPLEX} \PYG{n}{TASK}                               \PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{VIRPLEX}  \PYG{n}{PROC} \PYG{n}{QUAL}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{HLQ}\PYG{o}{.}\PYG{o}{.}\PYG{n}{VIRT}\PYG{o}{\PYGZam{}}\PYG{n}{REL}\PYG{p}{,}
\PYG{o}{/}\PYG{o}{/}         \PYG{n}{TCT}\PYG{o}{=}\PYG{l+m+mi}{00}\PYG{p}{,}                      \PYG{n}{READ} \PYG{n}{ONLY} \PYG{n}{TCT} \PYG{p}{(}\PYG{l+m+mi}{99} \PYG{o}{=} \PYG{n}{R}\PYG{o}{/}\PYG{n}{W}\PYG{p}{)}
\PYG{o}{/}\PYG{o}{/}         \PYG{n}{PROG}\PYG{o}{=}\PYG{n}{VIR6000}\PYG{p}{,}                \PYG{n}{PROGRAM} \PYG{n}{TO} \PYG{n}{CALL}
\PYG{o}{/}\PYG{o}{/}         \PYG{n}{CLONE}\PYG{o}{=}\PYG{l+m+mi}{00}\PYG{p}{,}                    \PYG{n}{APPLID}\PYG{o}{=}\PYG{n}{SPVIRE}\PYG{o}{\PYGZam{}}\PYG{n}{CLONE}
\PYG{o}{/}\PYG{o}{/}         \PYG{n}{IP}\PYG{o}{=}\PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.48}            \PYG{n}{Not} \PYG{n}{Used}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{VIRTEL}   \PYG{n}{EXEC} \PYG{n}{PGM}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{PROG}\PYG{p}{,}
\PYG{o}{/}\PYG{o}{/}             \PYG{n}{TIME}\PYG{o}{=}\PYG{l+m+mi}{1440}\PYG{p}{,}\PYG{n}{REGION}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{n}{M}\PYG{p}{,}
\PYG{o}{/}\PYG{o}{/}             \PYG{n}{PARM}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZam{}TCT,SPVIRE\PYGZam{}CLONE,,\PYGZam{}IP,\PYGZam{}CLONE}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{STEPLIB}  \PYG{n}{DD}  \PYG{n}{DSN}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{QUAL}\PYG{o}{.}\PYG{o}{.}\PYG{n}{LOADLIB}\PYG{p}{,}\PYG{n}{DISP}\PYG{o}{=}\PYG{n}{SHR}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{DFHRPL}   \PYG{n}{DD}  \PYG{n}{DSN}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{QUAL}\PYG{o}{.}\PYG{o}{.}\PYG{n}{LOADLIB}\PYG{p}{,}\PYG{n}{DISP}\PYG{o}{=}\PYG{n}{SHR}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SERVLIB}  \PYG{n}{DD}  \PYG{n}{DSN}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{QUAL}\PYG{o}{.}\PYG{o}{.}\PYG{n}{SERVLIB}\PYG{p}{,}\PYG{n}{DISP}\PYG{o}{=}\PYG{n}{SHR}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*} \PYG{n}{VSAM} \PYG{n}{FILES} \PYG{n}{SHARED}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{VIRARBO}  \PYG{n}{DD}  \PYG{n}{DSN}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{QUAL}\PYG{o}{.}\PYG{o}{.}\PYG{n}{VIRPLEX}\PYG{o}{.}\PYG{n}{ARBO}\PYG{p}{,}\PYG{n}{DISP}\PYG{o}{=}\PYG{n}{SHR}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SAMPTRSF} \PYG{n}{DD}  \PYG{n}{DSN}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{QUAL}\PYG{o}{.}\PYG{o}{.}\PYG{n}{VIRPLEX}\PYG{o}{.}\PYG{n}{SAMP}\PYG{o}{.}\PYG{n}{TRSF}\PYG{p}{,}\PYG{n}{DISP}\PYG{o}{=}\PYG{n}{SHR}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{HTMLTRSF} \PYG{n}{DD}  \PYG{n}{DSN}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{QUAL}\PYG{o}{.}\PYG{o}{.}\PYG{n}{VIRPLEX}\PYG{o}{.}\PYG{n}{HTML}\PYG{o}{.}\PYG{n}{TRSF}\PYG{p}{,}\PYG{n}{DISP}\PYG{o}{=}\PYG{n}{SHR}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*} \PYG{n}{VSAM} \PYG{n}{FILES} \PYG{n}{UNIQUE}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{VIRHTML}  \PYG{n}{DD}  \PYG{n}{DSN}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{QUAL}\PYG{o}{.}\PYG{o}{.}\PYG{n}{VIRTEL}\PYG{o}{\PYGZam{}}\PYG{n}{CLONE}\PYG{o}{.}\PYG{o}{.}\PYG{n}{HTML}\PYG{p}{,}\PYG{n}{DISP}\PYG{o}{=}\PYG{n}{SHR}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{VIRSWAP}  \PYG{n}{DD}  \PYG{n}{DSN}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{QUAL}\PYG{o}{.}\PYG{o}{.}\PYG{n}{VIRTEL}\PYG{o}{\PYGZam{}}\PYG{n}{CLONE}\PYG{o}{.}\PYG{o}{.}\PYG{n}{SWAP}\PYG{p}{,}\PYG{n}{DISP}\PYG{o}{=}\PYG{n}{SHR}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*} \PYG{n}{NVSAM}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSOUT}   \PYG{n}{DD}  \PYG{n}{SYSOUT}\PYG{o}{=}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{VIRLOG}   \PYG{n}{DD}  \PYG{n}{SYSOUT}\PYG{o}{=}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{VIRTRACE} \PYG{n}{DD}  \PYG{n}{SYSOUT}\PYG{o}{=}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSPRINT} \PYG{n}{DD}  \PYG{n}{SYSOUT}\PYG{o}{=}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSUDUMP} \PYG{n}{DD}  \PYG{n}{SYSOUT}\PYG{o}{=}\PYG{o}{*}
\end{sphinxVerbatim}

\sphinxstylestrong{JCL example for Virtel ‘READER’ task 0}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{/}\PYG{n}{VIRTEL0} \PYG{n}{JOB} \PYG{l+m+mi}{9000}\PYG{p}{,}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VIRTEL}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}\PYG{n}{CLASS}\PYG{o}{=}\PYG{n}{A}\PYG{p}{,}\PYG{n}{MSGCLASS}\PYG{o}{=}\PYG{n}{X}\PYG{p}{,}\PYG{n}{NOTIFY}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{SYSUID}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{PROCLIB} \PYG{n}{JCLLIB} \PYG{n}{ORDER}\PYG{o}{=}\PYG{n}{VIRTEL}\PYG{o}{.}\PYG{n}{VIRT460}\PYG{o}{.}\PYG{n}{CNTL}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{S01} \PYG{n}{EXEC} \PYG{n}{VIRTELZ}\PYG{p}{,}\PYG{n}{TCT}\PYG{o}{=}\PYG{l+m+mi}{00}\PYG{p}{,}\PYG{n}{HLQ}\PYG{o}{=}\PYG{n}{VIRTEL}\PYG{p}{,}\PYG{n}{REL}\PYG{o}{=}\PYG{l+m+mi}{460}\PYG{p}{,}\PYG{n}{CLONE}\PYG{o}{=}\PYG{l+m+mi}{00}
\end{sphinxVerbatim}

\sphinxstylestrong{JCL example for Virtel ‘READER’ task 1}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{/}\PYG{n}{VIRTEL1} \PYG{n}{JOB} \PYG{l+m+mi}{9000}\PYG{p}{,}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VIRTEL}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}\PYG{n}{CLASS}\PYG{o}{=}\PYG{n}{A}\PYG{p}{,}\PYG{n}{MSGCLASS}\PYG{o}{=}\PYG{n}{X}\PYG{p}{,}\PYG{n}{NOTIFY}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{SYSUID}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{PROCLIB} \PYG{n}{JCLLIB} \PYG{n}{ORDER}\PYG{o}{=}\PYG{n}{VIRTEL}\PYG{o}{.}\PYG{n}{VIRT460}\PYG{o}{.}\PYG{n}{CNTL}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{S01} \PYG{n}{EXEC} \PYG{n}{VIRTELZ}\PYG{p}{,}\PYG{n}{TCT}\PYG{o}{=}\PYG{l+m+mi}{00}\PYG{p}{,}\PYG{n}{HLQ}\PYG{o}{=}\PYG{n}{VIRTEL}\PYG{p}{,}\PYG{n}{REL}\PYG{o}{=}\PYG{l+m+mi}{460}\PYG{p}{,}\PYG{n}{CLONE}\PYG{o}{=}\PYG{l+m+mi}{01}\PYG{p}{,}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{IP}\PYG{o}{=}\PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.47}
\end{sphinxVerbatim}

\sphinxstylestrong{JCL example for Virtel ‘WRITER’ task}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{/}\PYG{n}{VIRTEL9} \PYG{n}{JOB} \PYG{l+m+mi}{9000}\PYG{p}{,}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VIRTEL}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}\PYG{n}{CLASS}\PYG{o}{=}\PYG{n}{A}\PYG{p}{,}\PYG{n}{MSGCLASS}\PYG{o}{=}\PYG{n}{X}\PYG{p}{,}\PYG{n}{NOTIFY}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{SYSUID}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{PROCLIB} \PYG{n}{JCLLIB} \PYG{n}{ORDER}\PYG{o}{=}\PYG{n}{VIRTEL}\PYG{o}{.}\PYG{n}{VIRT460}\PYG{o}{.}\PYG{n}{CNTL}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{S01} \PYG{n}{EXEC} \PYG{n}{VIRTELZ}\PYG{p}{,}\PYG{n}{TCT}\PYG{o}{=}\PYG{l+m+mi}{99}\PYG{p}{,}\PYG{n}{HLQ}\PYG{o}{=}\PYG{n}{VIRTEL}\PYG{p}{,}\PYG{n}{REL}\PYG{o}{=}\PYG{l+m+mi}{460}\PYG{p}{,}\PYG{n}{CLONE}\PYG{o}{=}\PYG{l+m+mi}{99}\PYG{p}{,}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{IP}\PYG{o}{=}\PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.39}
\end{sphinxVerbatim}

\index{VTAM definitions@\spxentry{VTAM definitions}!Virplex@\spxentry{Virplex}}\index{Virplex@\spxentry{Virplex}!VTAM definitions@\spxentry{VTAM definitions}}\ignorespaces 
\sphinxstylestrong{VTAM Definitions}

VTAM definitions required for Virtel ‘Reader’ task 0. In this example, a separate VTAMLST member would be require for each Virtel instance within the Virplex to support clone values of 00(RO) , 01(RO) and 99(RW). These VTAM definitions could be merged into one member.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
VIRTEH00 VBUILD TYPE=APPL
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} *
* Product     :  VIRTEL                                              *
* Description :  Definitions for a VIRTEL VIRPLEX instance           *
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} *
SPVIRE00 APPL  EAS=160,AUTH=(ACQ,BLOCK,PASS,SPO),ACBNAME=SPVIRE00
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} *
* R00VTxxx    : VTAM application relays for VIRTEL Web Access        *
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} *
R00VT??? APPL  AUTH=(ACQ,PASS),MODETAB=ISTINCLM,DLOGMOD=SNX32702,EAS=1
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} *
* R00IMxxx    : Printer relays for VIRTEL Web Access terminals       *
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} *
R00IM??? APPL  AUTH=(ACQ,PASS),MODETAB=ISTINCLM,DLOGMOD=SCS,EAS=1
R00IP??? APPL  AUTH=(ACQ,PASS),MODETAB=ISTINCLM,DLOGMOD=DSILGMOD,EAS=1
\end{sphinxVerbatim}

\index{TCPIP definitions@\spxentry{TCPIP definitions}!Virplex@\spxentry{Virplex}}\index{Virplex@\spxentry{Virplex}!TCPIP definitions@\spxentry{TCPIP definitions}}\ignorespaces 
\sphinxstylestrong{TCPIP Changes}
The TCPIP profile definition requirements for a VIRPLEX are a shared Port address and a common VIPA for the Sysplex Distributor.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{Shared} \PYG{n}{Port} \PYG{n}{Example}
\PYG{p}{;} \PYG{n}{SPVIRExx} \PYG{n}{User} \PYG{n}{Range} \PYG{k}{for} \PYG{n}{Virplex}
\PYG{l+m+mi}{41902} \PYG{n}{TCP} \PYG{n}{SPVIRE00} \PYG{n}{SHAREPORT} \PYG{p}{;} \PYG{n}{Virtel} \PYG{n}{Portshare}
\PYG{l+m+mi}{41902} \PYG{n}{TCP} \PYG{n}{SPVIRE01}           \PYG{p}{;} \PYG{n}{Virtel} \PYG{n}{Portshare}

\PYG{n}{Common} \PYG{n}{VIPA} \PYG{n}{address}
\PYG{p}{;} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.15} \PYG{n}{VIPA} \PYG{k}{for} \PYG{n}{SPVIRExx} \PYG{n}{distribution} \PYG{n}{tests}
\PYG{n}{VIPADYNAMIC}
    \PYG{n}{VIPARANGE} \PYG{n}{DEFINE} \PYG{n}{MOVEABLE} \PYG{n}{NONDISRUPTIVE} \PYG{l+m+mf}{255.255}\PYG{o}{.}\PYG{l+m+mf}{255.0} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.20}
    \PYG{n}{VIPADEFINE} \PYG{n}{MOVE} \PYG{n}{IMMED} \PYG{l+m+mf}{255.255}\PYG{o}{.}\PYG{l+m+mf}{255.0} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.15}
    \PYG{n}{VIPADISTRIBUTE} \PYG{n}{DEFINE} \PYG{n}{TIMEDAFF} \PYG{l+m+mi}{300} \PYG{n}{DISTMETHOD} \PYG{n}{ROUNDROBIN} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.15}
    \PYG{n}{DESTIP} \PYG{n}{ALL}
\PYG{n}{ENDVIPADYNAMIC}
\end{sphinxVerbatim}

\index{Installation Overview@\spxentry{Installation Overview}!Virplex@\spxentry{Virplex}}\index{Virplex@\spxentry{Virplex}!Installation Overview@\spxentry{Installation Overview}}\ignorespaces 
\sphinxstylestrong{Installation overview to get Virplex up and running.}

The following guide is based upon the examples given in this document. Here the objective is to set up three Virtel batch instances, two reader instances (VIRTEL0 and VIRTEL1), and one writer instance, VIRTEL9. The examples used are maintained in the VIRTEL.SAMPLIB. The instances are runs as batch jobs - VIRTEL0(SPVIRE00), VIRTEL1(SPVIRE01) and VIRTEL9(SPVIRE99).

Install Virtel and get base product up and running before attempting any Virplex changes.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{SAMPLIB} \PYG{n}{Members}\PYG{p}{:}     \PYG{n}{VIRPLEX}\PYG{p}{,} \PYG{n}{VIRTCT00}\PYG{p}{,} \PYG{n}{VIRTCT99}\PYG{p}{,} \PYG{n}{VIRTELZ}\PYG{p}{,} \PYG{n}{VIRTEL00}\PYG{p}{,} \PYG{n}{VIRTEL01}\PYG{p}{,} \PYG{n}{VIRTEL99}
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
Allocate common VSAM libraries and copy the SAMP, ARBO and HTML from existing/installation libraries.

\item {} 
Allocate unique libraries for VIRHTML and VIRSWAP. If you are collecting statistics then VIRSTAT also has to be allocated as is unqiue to each Virtel instance.

\item {} 
Updated you VTAMLST library to support each instance. Each instance will use VTAM resource names based upon the CLONE= keyword in the startup JCL. Activate VTAMLST members.

\item {} 
Customize TCT VIRTCT00 ( Reader TCT). Update license and other details.

\item {} 
Customize TCT VIRTCT99 (Writer TCT). Update license and other details.

\item {} 
Customize the JCL members VIRPLEX, VIRTELZ, VIRTEL00, VIRTEL01 and VIRTEL99

\item {} 
Activate TCPIP changes \textendash{} V TCPIP,,O,DSN=TCPIP.TCPPARMS(VIRTPROF)

\item {} 
Update the sample VIRPLEX definitions to support your environment.

\item {} 
Run the VIRPLEX job. This will perform the following steps:-
Allocate unique VSAM files
Allocate shared VSAM files
Copy VSAM files from install or “existing” user files.
Update the VIRPLEX ARBO with the definitions required to support a Virplex.
Assemble to ‘READER’ and ‘WRITER’ TCT’s

\item {} 
Start the ‘WRITER’ task by submitting Job VIRTEL99.

\end{itemize}

You should see the following messages as the Administration line is activated:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{VIRHT01I} \PYG{n}{HTTP} \PYG{n}{INITIALISATION} \PYG{n}{FOR} \PYG{n}{HTTP}\PYG{o}{\PYGZhy{}}\PYG{n}{W2H} \PYG{p}{(}\PYG{n}{W}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}  \PYG{p}{)}\PYG{p}{,} \PYG{n}{VERSION} \PYG{l+m+mf}{4.60}
\PYG{n}{VIRT905I} \PYG{n}{HTTP}\PYG{o}{\PYGZhy{}}\PYG{n}{W2H} \PYG{n}{SOCKET} \PYG{l+m+mi}{00000000} \PYG{n}{LISTENING} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.039}\PYG{p}{:}\PYG{l+m+mi}{41001}
\PYG{n}{VIRHT02I} \PYG{n}{LINE} \PYG{n}{HTTP}\PYG{o}{\PYGZhy{}}\PYG{n}{W2H} \PYG{p}{(}\PYG{n}{W}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}  \PYG{p}{)} \PYG{n}{HAS} \PYG{n}{URL} \PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.39}\PYG{p}{:}\PYG{l+m+mi}{41001}
\PYG{n}{VIRHT03I} \PYG{n}{HTTP} \PYG{n}{LINE} \PYG{n}{HTTP}\PYG{o}{\PYGZhy{}}\PYG{n}{W2H} \PYG{p}{(}\PYG{n}{W}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}  \PYG{p}{)}\PYG{p}{,} \PYG{n}{IS} \PYG{n}{A} \PYG{n}{VIRPLEX} \PYG{n}{SERVER} \PYG{n}{WITH} \PYG{n}{VSAMTYP}\PYG{o}{=}\PYG{n}{WRITER}
\end{sphinxVerbatim}

The Administration portal can be access via URL 192.168.170.39:41001. Ignore any CONNECT error messages. This is normal at this stage.
\begin{itemize}
\item {} 
Start the ‘READER’ tasks by submitting jobs VIRTEL00 and VIRTEL01

\end{itemize}

In the ‘WRITER’ task you should see evidence that the ‘WRITER’ has connected to the ‘READER’ tasks:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{VIRB17AI} \PYG{n}{LINE} \PYG{n}{SPVIRE00} \PYG{p}{(}\PYG{n}{SPVIRE00}\PYG{p}{)}\PYG{p}{,} \PYG{n}{RESTARTED} \PYG{n}{TO} \PYG{n}{ALLOW} \PYG{n}{CONNECTION} \PYG{n}{TO} \PYG{n}{SPVIRE00}
\PYG{n}{VIRQLK9I} \PYG{n}{INITIALISATION} \PYG{n}{FOR} \PYG{n}{SPVIRE00} \PYG{p}{(}\PYG{n}{SPVIRE00}\PYG{p}{)}\PYG{p}{,} \PYG{n}{VERSION} \PYG{l+m+mf}{4.60}
\PYG{n}{VIRT907I} \PYG{n}{SPVIRE00} \PYG{n}{SOCKET} \PYG{l+m+mi}{00000000} \PYG{n}{CALLING}   \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.081}\PYG{p}{:}\PYG{l+m+mi}{41030}
\PYG{n}{VIRQLK8I} \PYG{n}{LOCAL} \PYG{n}{LINE} \PYG{n}{SPVIRE00} \PYG{p}{(}\PYG{n}{SPVIRE00}\PYG{p}{)} \PYG{n}{IS} \PYG{n}{CONNECTED} \PYG{n}{TO} \PYG{n}{REMOTE} \PYG{n}{VIRTEL} \PYG{p}{:} \PYG{n}{SPVIRE00}
\PYG{n}{VIRQLK9I} \PYG{n}{INITIALISATION} \PYG{n}{FOR} \PYG{n}{SPVIRE01} \PYG{p}{(}\PYG{n}{SPVIRE01}\PYG{p}{)}\PYG{p}{,} \PYG{n}{VERSION} \PYG{l+m+mf}{4.60}
\PYG{o}{.} \PYG{o}{.} \PYG{o}{.}
\PYG{n}{VIRB17AI} \PYG{n}{LINE} \PYG{n}{SPVIRE01} \PYG{p}{(}\PYG{n}{SPVIRE01}\PYG{p}{)}\PYG{p}{,} \PYG{n}{RESTARTED} \PYG{n}{TO} \PYG{n}{ALLOW} \PYG{n}{CONNECTION} \PYG{n}{TO} \PYG{n}{SPVIRE01}
\PYG{n}{VIRQLK9I} \PYG{n}{INITIALISATION} \PYG{n}{FOR} \PYG{n}{SPVIRE01} \PYG{p}{(}\PYG{n}{SPVIRE01}\PYG{p}{)}\PYG{p}{,} \PYG{n}{VERSION} \PYG{l+m+mf}{4.60}
\PYG{n}{VIRT907I} \PYG{n}{SPVIRE01} \PYG{n}{SOCKET} \PYG{l+m+mi}{00000000} \PYG{n}{CALLING}   \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.081}\PYG{p}{:}\PYG{l+m+mi}{41031}
\PYG{n}{VIRQLK8I} \PYG{n}{LOCAL} \PYG{n}{LINE} \PYG{n}{SPVIRE01} \PYG{p}{(}\PYG{n}{SPVIRE01}\PYG{p}{)} \PYG{n}{IS} \PYG{n}{CONNECTED} \PYG{n}{TO} \PYG{n}{REMOTE} \PYG{n}{VIRTEL} \PYG{p}{:} \PYG{n}{SPVIRE01}
\end{sphinxVerbatim}

In the ‘READER’ tasks you should see evidence that the ‘READER ’ has connected to the ‘WRITER’ tasks:-

VIRTEL0 Connecting to the ‘WRITER’ task VIRTEL9 and the other ‘READER’ tasks VIRTEL1

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{VIRQLK9I} \PYG{n}{INITIALISATION} \PYG{n}{FOR} \PYG{n}{SPVIRE99} \PYG{p}{(}\PYG{n}{SPVIRE99}\PYG{p}{)}\PYG{p}{,} \PYG{n}{VERSION} \PYG{l+m+mf}{4.60}
\PYG{n}{VIRT907I} \PYG{n}{SPVIRE99} \PYG{n}{SOCKET} \PYG{l+m+mi}{00000000} \PYG{n}{CALLING}   \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.081}\PYG{p}{:}\PYG{l+m+mi}{41099}
\PYG{n}{VIRQLK8I} \PYG{n}{LOCAL} \PYG{n}{LINE} \PYG{n}{SPVIRE99} \PYG{p}{(}\PYG{n}{SPVIRE99}\PYG{p}{)} \PYG{n}{IS} \PYG{n}{CONNECTED} \PYG{n}{TO} \PYG{n}{REMOTE} \PYG{n}{VIRTEL} \PYG{p}{:} \PYG{n}{SPVIRE99}
\PYG{o}{.} \PYG{o}{.} \PYG{o}{.}
\PYG{n}{VIRT905I} \PYG{n}{HTTP}\PYG{o}{\PYGZhy{}}\PYG{n}{VPX} \PYG{n}{SOCKET} \PYG{l+m+mi}{00000000} \PYG{n}{LISTENING} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.015}\PYG{p}{:}\PYG{l+m+mi}{41902}
\PYG{n}{VIRHT02I} \PYG{n}{LINE} \PYG{n}{HTTP}\PYG{o}{\PYGZhy{}}\PYG{n}{VPX} \PYG{p}{(}\PYG{n}{V}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}  \PYG{p}{)} \PYG{n}{HAS} \PYG{n}{URL} \PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.15}\PYG{p}{:}\PYG{l+m+mi}{41902}
\PYG{n}{VIRHT03I} \PYG{n}{HTTP} \PYG{n}{LINE} \PYG{n}{HTTP}\PYG{o}{\PYGZhy{}}\PYG{n}{VPX} \PYG{p}{(}\PYG{n}{V}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}  \PYG{p}{)}\PYG{p}{,} \PYG{n}{IS} \PYG{n}{A} \PYG{n}{VIRPLEX} \PYG{n}{SERVER} \PYG{n}{WITH} \PYG{n}{VSAMTYP}\PYG{o}{=}\PYG{n}{READONLY}
\PYG{n}{VIRQLK9I} \PYG{n}{INITIALISATION} \PYG{n}{FOR} \PYG{n}{SPVIRE01} \PYG{p}{(}\PYG{n}{SPVIRE01}\PYG{p}{)}\PYG{p}{,} \PYG{n}{VERSION} \PYG{l+m+mf}{4.60}
\PYG{o}{.} \PYG{o}{.} \PYG{o}{.}
\PYG{n}{VIRB17AI} \PYG{n}{LINE} \PYG{n}{SPVIRE01} \PYG{p}{(}\PYG{n}{SPVIRE01}\PYG{p}{)}\PYG{p}{,} \PYG{n}{RESTARTED} \PYG{n}{TO} \PYG{n}{ALLOW} \PYG{n}{CONNECTION} \PYG{n}{TO} \PYG{n}{SPVIRE01}
\PYG{n}{VIRQLK9I} \PYG{n}{INITIALISATION} \PYG{n}{FOR} \PYG{n}{SPVIRE01} \PYG{p}{(}\PYG{n}{SPVIRE01}\PYG{p}{)}\PYG{p}{,} \PYG{n}{VERSION} \PYG{l+m+mf}{4.60}
\PYG{n}{VIRT907I} \PYG{n}{SPVIRE01} \PYG{n}{SOCKET} \PYG{l+m+mi}{00000000} \PYG{n}{CALLING}   \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.081}\PYG{p}{:}\PYG{l+m+mi}{41031}
\PYG{n}{VIRQLK8I} \PYG{n}{LOCAL} \PYG{n}{LINE} \PYG{n}{SPVIRE01} \PYG{p}{(}\PYG{n}{SPVIRE01}\PYG{p}{)} \PYG{n}{IS} \PYG{n}{CONNECTED} \PYG{n}{TO} \PYG{n}{REMOTE} \PYG{n}{VIRTEL} \PYG{p}{:} \PYG{n}{SPVIRE01}
\end{sphinxVerbatim}

VIRTEL1 Connecting to the ‘WRITER’ task VIRTEL9 and the other ‘READER’ tasks VIRTEL0

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{VIRQLK8I} \PYG{n}{LOCAL} \PYG{n}{LINE} \PYG{n}{SPVIRE00} \PYG{p}{(}\PYG{n}{SPVIRE00}\PYG{p}{)} \PYG{n}{IS} \PYG{n}{CONNECTED} \PYG{n}{TO} \PYG{n}{REMOTE} \PYG{n}{VIRTEL} \PYG{p}{:} \PYG{n}{SPVIRE00}
\PYG{n}{VIRT903W} \PYG{n}{LINE} \PYG{n}{SPVIRE01} \PYG{n}{HAS} \PYG{n}{A} \PYG{n}{SESSION} \PYG{n}{STARTED} \PYG{n}{WITH} \PYG{n}{TCP}\PYG{o}{/}\PYG{n}{IP} \PYG{n}{TCPIP}    \PYG{n}{HIGHEST} \PYG{n}{SOCKET}
\PYG{n}{VIRQLK9I} \PYG{n}{INITIALISATION} \PYG{n}{FOR} \PYG{n}{SPVIRE01} \PYG{p}{(}\PYG{n}{SPVIRE01}\PYG{p}{)}\PYG{p}{,} \PYG{n}{VERSION} \PYG{l+m+mf}{4.60}
\PYG{n}{VIRT905I} \PYG{n}{SPVIRE01} \PYG{n}{SOCKET} \PYG{l+m+mi}{00000000} \PYG{n}{LISTENING} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.081}\PYG{p}{:}\PYG{l+m+mi}{41031}
\PYG{n}{VIRT903W} \PYG{n}{LINE} \PYG{n}{SPVIRE99} \PYG{n}{HAS} \PYG{n}{A} \PYG{n}{SESSION} \PYG{n}{STARTED} \PYG{n}{WITH} \PYG{n}{TCP}\PYG{o}{/}\PYG{n}{IP} \PYG{n}{TCPIP}    \PYG{n}{HIGHEST} \PYG{n}{SOCKET}
\PYG{n}{VIRQLK9I} \PYG{n}{INITIALISATION} \PYG{n}{FOR} \PYG{n}{SPVIRE99} \PYG{p}{(}\PYG{n}{SPVIRE99}\PYG{p}{)}\PYG{p}{,} \PYG{n}{VERSION} \PYG{l+m+mf}{4.60}
\PYG{n}{VIRT907I} \PYG{n}{SPVIRE99} \PYG{n}{SOCKET} \PYG{l+m+mi}{00000000} \PYG{n}{CALLING}   \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.081}\PYG{p}{:}\PYG{l+m+mi}{41099}
\PYG{n}{VIRQLK8I} \PYG{n}{LOCAL} \PYG{n}{LINE} \PYG{n}{SPVIRE99} \PYG{p}{(}\PYG{n}{SPVIRE99}\PYG{p}{)} \PYG{n}{IS} \PYG{n}{CONNECTED} \PYG{n}{TO} \PYG{n}{REMOTE} \PYG{n}{VIRTEL} \PYG{p}{:} \PYG{n}{SPVIRE99}
\PYG{n}{VIRT903W} \PYG{n}{LINE} \PYG{n}{HTTP}\PYG{o}{\PYGZhy{}}\PYG{n}{VPX} \PYG{n}{HAS} \PYG{n}{A} \PYG{n}{SESSION} \PYG{n}{STARTED} \PYG{n}{WITH} \PYG{n}{TCP}\PYG{o}{/}\PYG{n}{IP} \PYG{n}{TCPIP}    \PYG{n}{HIGHEST} \PYG{n}{SOCKET}
\end{sphinxVerbatim}

Once the three tasks have initiated you should see no more “CONNECT” error messages. You can test that the tree tasks are communicating by doing a “Line” display:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{F} \PYG{n}{VIRTEL0}\PYG{p}{,}\PYG{n}{LINES}
\PYG{n}{VIR0200I} \PYG{n}{LINES}
\PYG{n}{VIR0201I} \PYG{n}{VIRTEL} \PYG{l+m+mf}{4.60} \PYG{n}{APPLID}\PYG{o}{=}\PYG{n}{SPVIRE00} \PYG{n}{LINES}
\PYG{n}{VIR0202I} \PYG{n}{INT}\PYG{o}{.}\PYG{n}{NAME} \PYG{n}{EXT}\PYG{o}{.}\PYG{n}{NAME} \PYG{n}{TYPE}  \PYG{n}{ACB} \PYG{n}{OR} \PYG{n}{IP}
\PYG{n}{VIR0202I} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}
\PYG{n}{VIR0202I} \PYG{n}{W}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}           \PYG{o}{*}\PYG{n}{GATE}
\PYG{n}{VIR0202I} \PYG{n}{C}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}           \PYG{o}{*}\PYG{n}{GATE}
\PYG{n}{VIR0202I} \PYG{n}{SPVIRE00} \PYG{n}{SPVIRE00} \PYG{n}{TCP1}  \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.81}\PYG{p}{:}\PYG{l+m+mi}{41030}
\PYG{n}{VIR0202I} \PYG{n}{SPVIRE01} \PYG{n}{SPVIRE01} \PYG{n}{TCP1}  \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.81}\PYG{p}{:}\PYG{l+m+mi}{41031}
\PYG{n}{VIR0202I} \PYG{n}{SPVIRE99} \PYG{n}{SPVIRE99} \PYG{n}{TCP1}  \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.81}\PYG{p}{:}\PYG{l+m+mi}{41099}
\PYG{n}{VIR0202I} \PYG{n}{V}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}   \PYG{n}{HTTP}\PYG{o}{\PYGZhy{}}\PYG{n}{VPX} \PYG{n}{TCP1}  \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.15}\PYG{p}{:}\PYG{l+m+mi}{41902}
\PYG{n}{VIR0202I} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{END} \PYG{n}{OF} \PYG{n}{LIST}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}

\PYG{n}{F} \PYG{n}{VIRTEL1}\PYG{p}{,}\PYG{n}{LINES}
\PYG{n}{VIR0200I} \PYG{n}{LINES}
\PYG{n}{VIR0201I} \PYG{n}{VIRTEL} \PYG{l+m+mf}{4.60} \PYG{n}{APPLID}\PYG{o}{=}\PYG{n}{SPVIRE01} \PYG{n}{LINES}
\PYG{n}{VIR0202I} \PYG{n}{INT}\PYG{o}{.}\PYG{n}{NAME} \PYG{n}{EXT}\PYG{o}{.}\PYG{n}{NAME} \PYG{n}{TYPE}  \PYG{n}{ACB} \PYG{n}{OR} \PYG{n}{IP}
\PYG{n}{VIR0202I} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}
\PYG{n}{VIR0202I} \PYG{n}{W}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}           \PYG{o}{*}\PYG{n}{GATE}
\PYG{n}{VIR0202I} \PYG{n}{C}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}           \PYG{o}{*}\PYG{n}{GATE}
\PYG{n}{VIR0202I} \PYG{n}{SPVIRE00} \PYG{n}{SPVIRE00} \PYG{n}{TCP1}  \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.81}\PYG{p}{:}\PYG{l+m+mi}{41030}
\PYG{n}{VIR0202I} \PYG{n}{SPVIRE01} \PYG{n}{SPVIRE01} \PYG{n}{TCP1}  \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.81}\PYG{p}{:}\PYG{l+m+mi}{41031}
\PYG{n}{VIR0202I} \PYG{n}{SPVIRE99} \PYG{n}{SPVIRE99} \PYG{n}{TCP1}  \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.81}\PYG{p}{:}\PYG{l+m+mi}{41099}
\PYG{n}{VIR0202I} \PYG{n}{V}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}   \PYG{n}{HTTP}\PYG{o}{\PYGZhy{}}\PYG{n}{VPX} \PYG{n}{TCP1}  \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.15}\PYG{p}{:}\PYG{l+m+mi}{41902}
\PYG{n}{VIR0202I} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{END} \PYG{n}{OF} \PYG{n}{LIST}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}

\PYG{n}{F} \PYG{n}{VIRTEL9}\PYG{p}{,}\PYG{n}{LINES}
\PYG{n}{VIR0200I} \PYG{n}{LINES}
\PYG{n}{VIR0201I} \PYG{n}{VIRTEL} \PYG{l+m+mf}{4.60} \PYG{n}{APPLID}\PYG{o}{=}\PYG{n}{SPVIRE99} \PYG{n}{LINES}
\PYG{n}{VIR0202I} \PYG{n}{ALLOCATED} \PYG{n}{IP} \PYG{n}{ADDRESS} \PYG{o}{=} \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.39}
\PYG{n}{VIR0202I} \PYG{n}{INT}\PYG{o}{.}\PYG{n}{NAME} \PYG{n}{EXT}\PYG{o}{.}\PYG{n}{NAME} \PYG{n}{TYPE}  \PYG{n}{ACB} \PYG{n}{OR} \PYG{n}{IP}
\PYG{n}{VIR0202I} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}
\PYG{n}{VIR0202I} \PYG{n}{C}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}           \PYG{o}{*}\PYG{n}{GATE}
\PYG{n}{VIR0202I} \PYG{n}{V}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}           \PYG{o}{*}\PYG{n}{GATE}
\PYG{n}{VIR0202I} \PYG{n}{SPVIRE00} \PYG{n}{SPVIRE00} \PYG{n}{TCP1}  \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.81}\PYG{p}{:}\PYG{l+m+mi}{41030}
\PYG{n}{VIR0202I} \PYG{n}{SPVIRE01} \PYG{n}{SPVIRE01} \PYG{n}{TCP1}  \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.81}\PYG{p}{:}\PYG{l+m+mi}{41031}
\PYG{n}{VIR0202I} \PYG{n}{SPVIRE99} \PYG{n}{SPVIRE99} \PYG{n}{TCP1}  \PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{170.81}\PYG{p}{:}\PYG{l+m+mi}{41099}
\PYG{n}{VIR0202I} \PYG{n}{W}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}   \PYG{n}{HTTP}\PYG{o}{\PYGZhy{}}\PYG{n}{W2H} \PYG{n}{TCP1}  \PYG{p}{:}\PYG{l+m+mi}{41001}
\PYG{n}{VIR0202I} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{n}{END} \PYG{n}{OF} \PYG{n}{LIST}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}
\end{sphinxVerbatim}

If the displays match those above then the VIRPLEX has initialized successfully.

\index{Validation@\spxentry{Validation}!Virplex@\spxentry{Virplex}}\index{Virplex@\spxentry{Virplex}!Validation@\spxentry{Validation}}\ignorespaces 
\sphinxstylestrong{Validating the Virplex}

Logon to Virtel using the common URL 192.168.170.15:41902. You should be presented with the Applist screen showing the two 3270 applications defined in the common ARBO.

\sphinxincludegraphics{{image113}.png}

The top right hand corner will identify the ‘READER’ instance support this session. In this example this is Virtel instance VIRTEL1 (SPVIRE01)

\sphinxincludegraphics{{image114}.png}

On a separate machine, one with a different IP address, logon again to Virtel using the same URL. This time, if the Sysplex Distributor is working in a “round robin” fashion, it will allocate a different ‘READER’ instance. Here is the sample of a second browser session, this time using Chrome, allocating a Virtel session on Virtel instance VIRTEL0 (SPVIRE00).

\sphinxincludegraphics{{image115}.png}

At this point validation of the Virplex is confirmed.

\index{QLNK communications@\spxentry{QLNK communications}!Virplex@\spxentry{Virplex}}\index{Virplex@\spxentry{Virplex}!QLNK communications@\spxentry{QLNK communications}}\ignorespaces 
\sphinxstylestrong{Testing QLNK communication.}

To test that the Virtels are communicating, maintenance will be uploaded via the ‘WRITER’ task. The ‘WRITER’ task will distributed this to the two ‘READER’ tasks. Connect to the TSO application to determine the current maintenance level.

\sphinxincludegraphics{{image116}.png}

Is shows as UPDT level V4.60 / 5687. Confirm this with the Administration Portal on the ‘WRITER’ task by accessing the ‘Admin Portal’ through the ‘WRITER’ URL 192.168.170.39:41001. The maintenance level is shown in the Middle of the Tool Bar area on the screen:-

\sphinxincludegraphics{{image117}.png}

This confirms that both the ‘WRITER’ and ‘READER’ instances had loaded the SAMP TRSF file. Using the “Drag and Drop” feature upload some maintenance to the W2H-DIR file. In this example the maintenance level TP 5695 is uploaded via the ‘WRITER’ instance VIRTEL9(SPVIRE99). A refresh of the browser (CTRL+UP+DEL + CTRL+R) now shows the maintenance level to be 4.60 (5695):-

\sphinxincludegraphics{{image118}.png}

If a new browser window is opened on another machine, and TSO is accessed through the common URL / APPLIST navigation, the maintenance level has changed to V4.60 UPDT 5695:-

\sphinxincludegraphics{{image119}.png}

This confirms that the ‘WRITER’ and ‘READER’ tasks are communicating and the automatic distribution of maintenance out to ‘READER’ task environments is working. The following traces on the ‘WRITER’ task show that the ‘WRITER is communicating with ‘READER’ tasks:-

\sphinxincludegraphics{{image120}.png}

\index{Debugging and diagnosing@\spxentry{Debugging and diagnosing}!Virplex@\spxentry{Virplex}}\index{Virplex@\spxentry{Virplex}!Debugging and diagnosing@\spxentry{Debugging and diagnosing}}\ignorespaces 
\sphinxstylestrong{Diagnosing Virplex issues}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
1.  Issue a trace command on the writer task to trace all QLNK lines. In this example the following commands would be issued:\PYGZhy{}

F VIRTEL9,TRACE,L=SPVIRE00
F VIRTEL9,TRACE,L=SPVIRE01
F VIRTEL9,TRACE,L=SPVIRE99


2.  Perform some Virplex activing \textendash{} upload some maintenance for example.

3.  Issue a line display for each Virplex instance.

F VIRTELx,LINES

4.  Take a Virtel SNAP of the ‘Writer’ task.

F VIRTEL9,SNAP

5.  Obtain the Virtel logs from the ‘Writer’ task and the one of the ‘READER’ tasks.

Open a problem with your local Syspertec Support Engineer and send them the output plus a description of the problem you experienced.
\end{sphinxVerbatim}

\index{Protecting business assets with Virtel Rules@\spxentry{Protecting business assets with Virtel Rules}}\ignorespaces 

\chapter{Protecting business assets with Virtel Rules}
\label{\detokenize{connectivity_guide:protecting-business-assets-with-virtel-rules}}\label{\detokenize{connectivity_guide:index-187}}

\section{Introduction}
\label{\detokenize{connectivity_guide:id76}}
In this chapter we discuss how to protect access to business assets using Virtel rules. In this scenario with have two types of business assets or applications. The first type is the production assets which are protected by LDAP and use SSO to facilitate security and automatic logon without the user having to specify a userid and password. The other type of business asset is a standard application, like TSO or CICS, which requires the user to enter a userid and password when the application is accessed. LDAP and SSO are not discussed in this newsletter. There may be alternatives to this SSO setup but for our scenario we are assuming two types of asset \textendash{} secure (requiring no application logon) and insecure (application logon required). The scenario utilizes a proxy server to load balance across the Virtel instances.

\sphinxincludegraphics{{image97}.png}

\newpage

\index{Protecting business assets with Virtel Rules@\spxentry{Protecting business assets with Virtel Rules}!Virtel Setup@\spxentry{Virtel Setup}}\index{Virtel Setup@\spxentry{Virtel Setup}!Protecting business assets with Virtel Rules@\spxentry{Protecting business assets with Virtel Rules}}\ignorespaces 

\section{Virtel Setup}
\label{\detokenize{connectivity_guide:virtel-setup}}\label{\detokenize{connectivity_guide:index-188}}
From a Virtel perspective it has been decided that secure assets are associated with port 41002, and non-secure through port 41003. Access to the assets should only be through the proxy server using a secure port, in our case the standard SSL port 443. Our goal is to protect the assets from being accessed internal, or external, using the assigned Virtel IP
and port addresses. For example, users in the accounts department should be able to access PROD IMS/CICS. Other users, who work offsite or from home, and have access to the company VPN shouldn’t be able to access PROD IMS/CICS. In this simplistic scenario, anyone could in theory could access any one of the Virtel instances through their internal IP address \textendash{} 192.168.07x.10x:4100x and attempt to logon. What is required is means to guarantee that access to any of the assets should only be via the proxy server and not through any other IP address.

\index{Protecting business assets with Virtel Rules@\spxentry{Protecting business assets with Virtel Rules}!Example Rules@\spxentry{Example Rules}}\index{Example Rules@\spxentry{Example Rules}!Protecting business assets with Virtel Rules@\spxentry{Protecting business assets with Virtel Rules}}\ignorespaces 

\subsection{Virtel Rules}
\label{\detokenize{connectivity_guide:index-189}}\label{\detokenize{connectivity_guide:id77}}
Using Virtel Rules we can compare the calling IP address and if it doesn’t match with the rule then the user will be re-directed to another Virtel entry point. To implement this protection we use the following ARBO statements for each line, 41002 and 41003:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{RULE} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{R0000100}\PYG{p}{,}
\PYG{n}{RULESET}\PYG{o}{=}\PYG{n}{C}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}\PYG{p}{,}                                \PYG{o}{\PYGZlt{}} \PYG{n}{Our} \PYG{n}{Line} \PYG{l+m+mi}{41002}
\PYG{n}{STATUS}\PYG{o}{=}\PYG{n}{ACTIVE}\PYG{p}{,}
\PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{HTTP access (Test calling address)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
\PYG{n}{ENTRY}\PYG{o}{=}\PYG{n}{EPSEC}\PYG{p}{,}                                   \PYG{o}{\PYGZlt{}} \PYG{n}{Associated} \PYG{n}{Entry} \PYG{n}{point}
\PYG{n}{IPADDR}\PYG{o}{=}\PYG{p}{(}\PYG{n}{EQUAL}\PYG{p}{,}\PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{092.160}\PYG{p}{)}\PYG{p}{,}                \PYG{o}{\PYGZlt{}} \PYG{n}{IP} \PYG{n}{address} \PYG{n}{of} \PYG{n}{Proxy}
\PYG{n}{NETMASK}\PYG{o}{=}\PYG{l+m+mf}{255.255}\PYG{o}{.}\PYG{l+m+mf}{255.255}
\PYG{o}{*}
\PYG{n}{RULE} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{R0000199}\PYG{p}{,}
\PYG{n}{RULESET}\PYG{o}{=}\PYG{n}{C}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}\PYG{p}{,}                                \PYG{o}{\PYGZlt{}} \PYG{n}{Our} \PYG{n}{Line} \PYG{l+m+mi}{41002}
\PYG{n}{STATUS}\PYG{o}{=}\PYG{n}{ACTIVE}\PYG{p}{,}
\PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{HTTP access (Calling IP address not valid)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
\PYG{n}{ENTRY}\PYG{o}{=}\PYG{n}{EPREJECT}
\PYG{o}{*}
\PYG{n}{RULE} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{R0000200}\PYG{p}{,}
\PYG{n}{RULESET}\PYG{o}{=}\PYG{n}{R}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}\PYG{p}{,}                                \PYG{o}{\PYGZlt{}} \PYG{n}{Our} \PYG{n}{Line} \PYG{l+m+mi}{41003}
\PYG{n}{STATUS}\PYG{o}{=}\PYG{n}{ACTIVE}\PYG{p}{,}
\PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{HTTP access (Test calling address)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
\PYG{n}{ENTRY}\PYG{o}{=}\PYG{n}{EPSEC}\PYG{p}{,}                                   \PYG{o}{\PYGZlt{}} \PYG{n}{Associated} \PYG{n}{Entry} \PYG{n}{point}
\PYG{n}{IPADDR}\PYG{o}{=}\PYG{p}{(}\PYG{n}{EQUAL}\PYG{p}{,}\PYG{l+m+mf}{192.168}\PYG{o}{.}\PYG{l+m+mf}{092.160}\PYG{p}{)}\PYG{p}{,}                \PYG{o}{\PYGZlt{}} \PYG{n}{IP} \PYG{n}{address} \PYG{n}{of} \PYG{n}{Proxy}
\PYG{n}{NETMASK}\PYG{o}{=}\PYG{l+m+mf}{255.255}\PYG{o}{.}\PYG{l+m+mf}{255.255}
\PYG{o}{*}
\PYG{n}{RULE} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{R0000299}\PYG{p}{,}
\PYG{n}{RULESET}\PYG{o}{=}\PYG{n}{R}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}\PYG{p}{,}                                \PYG{o}{\PYGZlt{}} \PYG{n}{Our} \PYG{n}{Line} \PYG{l+m+mi}{41003}
\PYG{n}{STATUS}\PYG{o}{=}\PYG{n}{ACTIVE}\PYG{p}{,}
\PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{HTTP access (Calling IP address not valid)}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
\PYG{n}{ENTRY}\PYG{o}{=}\PYG{n}{EPREJECT}
\PYG{n}{ENTRY} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{EPREJECT}\PYG{p}{,}
\PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Entry point for unauthorized HTTP users}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
\PYG{n}{TRANSACT}\PYG{o}{=}\PYG{n}{REJ}\PYG{p}{,}
\PYG{n}{TIMEOUT}\PYG{o}{=}\PYG{l+m+mi}{0720}\PYG{p}{,}
\PYG{n}{ACTION}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,}
\PYG{n}{EMUL}\PYG{o}{=}\PYG{n}{HTML}\PYG{p}{,}
\PYG{n}{SIGNON}\PYG{o}{=}\PYG{n}{VIR0020H}\PYG{p}{,}
\PYG{n}{MENU}\PYG{o}{=}\PYG{n}{VIR0021A}\PYG{p}{,}
\PYG{n}{EXTCOLOR}\PYG{o}{=}\PYG{n}{X}
\PYG{o}{*}
\PYG{n}{TRANSACT} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{REJ}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{00}\PYG{p}{,}
\PYG{n}{NAME}\PYG{o}{=}\PYG{n}{EPREJECT}\PYG{p}{,}
\PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Default directory = entry point name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
\PYG{n}{APPL}\PYG{o}{=}\PYG{n}{CLI}\PYG{o}{\PYGZhy{}}\PYG{n}{DIR}\PYG{p}{,}                                   \PYG{o}{\PYGZlt{}} \PYG{n}{User} \PYG{n}{template} \PYG{n}{directory}
\PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{4}\PYG{p}{,}
\PYG{n}{TERMINAL}\PYG{o}{=}\PYG{n}{CLLOC}\PYG{p}{,}
\PYG{n}{STARTUP}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}
\PYG{n}{SECURITY}\PYG{o}{=}\PYG{l+m+mi}{0}
\end{sphinxVerbatim}

So what is happening here? When a user attempts to establish a session Virtel will match the users calling IP address against the IPADDR in rule R0000x00. If it matches then they will be able to access the entry point defined in the rule \textendash{} in this case EPSEC or EPNSEC. For line 41002 this Entry Point will contain a list of the W2H applications using SSO.
For line 41003, using Entry Point EPNSEC, this will contain a list of W2H transactions which use standard RACF protection.

Now, if the calling IP addressed is not matched, the RULE fails and the next rule in the ruleset is tested, in this case rule R0000x99. This is a catch all rule. Any user falling into this rule will be directed to entry point EPREJECT. The Entry Point EPREJECT only has one transaction, its default transaction, and this will invoke the template page
EPREJECT.HTM.

To protect the business assets the calling IP address can only be that of the proxy server - 192.168.092.160. Any other calling IP address will be rejected by the Virtel ruleset. By default, the ruleset associated with a line is normally the internal name of the line \textendash{} C-HTTP for example. How the rejected session is handled depends on how Virtel has been setup.

\index{Protecting business assets with Virtel Rules@\spxentry{Protecting business assets with Virtel Rules}!Default Rule Template@\spxentry{Default Rule Template}}\index{Default Rule Template@\spxentry{Default Rule Template}!Protecting business assets with Virtel Rules@\spxentry{Protecting business assets with Virtel Rules}}\ignorespaces 

\subsection{Default Rule Template}
\label{\detokenize{connectivity_guide:default-rule-template}}\label{\detokenize{connectivity_guide:index-190}}
In the following example, the default template EPREJECT.HTM, which is associated with the entry point EPREJECT, looks like this:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZlt{}!DOCTYPE HTML PUBLIC \PYGZdq{}\PYGZhy{}//W3C//DTD HTML 4.01 Transitional//EN\PYGZdq{}
\PYGZdq{}http://www.w3.org/TR/html4/loose.dtd\PYGZdq{}\PYGZgt{}
\PYGZlt{}!\PYGZhy{}\PYGZhy{}VIRTEL start=\PYGZdq{}\PYGZob{}\PYGZob{}\PYGZob{}\PYGZdq{} end=\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{} \PYGZhy{}\PYGZhy{}\PYGZgt{}
\PYGZlt{}html\PYGZgt{}
\PYGZlt{}script\PYGZgt{}
// customization for reject
window.location.replace(\PYGZdq{}http://www.mycompany.com\PYGZdq{});
\PYGZlt{}/script\PYGZgt{}
\PYGZlt{}/html\PYGZgt{}
\end{sphinxVerbatim}

This template must exist in the CLI-DIR directory as this is where the Entry Point EPREJECT expects to find them. When the template is served it will display the companies “public” web site.

To upload the ARBO statements to your ARBO use the following JCL:-

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{o}{/}\PYG{o}{/}\PYG{o}{*}
    \PYG{o}{/}\PYG{o}{/} \PYG{n}{SET} \PYG{n}{LOAD}\PYG{o}{=}\PYG{n}{HLQ}\PYG{o}{.}\PYG{n}{VIRTNNN}\PYG{o}{.}\PYG{n}{LOADLIB}
    \PYG{o}{/}\PYG{o}{/} \PYG{n}{SET} \PYG{n}{ARBO}\PYG{o}{=}\PYG{n}{HLQ}\PYG{o}{.}\PYG{n}{VIRTEL}\PYG{o}{.}\PYG{n}{ARBO1A}
    \PYG{o}{/}\PYG{o}{/}\PYG{o}{*}
    \PYG{o}{/}\PYG{o}{/}\PYG{n}{DELETE} \PYG{n}{EXEC} \PYG{n}{PGM}\PYG{o}{=}\PYG{n}{VIRCONF}\PYG{p}{,}\PYG{n}{PARM}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{LOAD,NOREPL}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}\PYG{n}{REGION}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{n}{M}
    \PYG{o}{/}\PYG{o}{/}\PYG{n}{STEPLIB} \PYG{n}{DD} \PYG{n}{DSN}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{LOAD}\PYG{p}{,}\PYG{n}{DISP}\PYG{o}{=}\PYG{n}{SHR}
    \PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSPRINT} \PYG{n}{DD} \PYG{n}{SYSOUT}\PYG{o}{=}\PYG{o}{*}
    \PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSUDUMP} \PYG{n}{DD} \PYG{n}{SYSOUT}\PYG{o}{=}\PYG{o}{*}
    \PYG{o}{/}\PYG{o}{/}\PYG{n}{VIRARBO} \PYG{n}{DD} \PYG{n}{DSN}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{ARBO}\PYG{p}{,}\PYG{n}{DISP}\PYG{o}{=}\PYG{n}{SHR}
    \PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSIN} \PYG{n}{DD} \PYG{o}{*}
    \PYG{n}{DELETE} \PYG{n}{TYPE}\PYG{o}{=}\PYG{n}{RULE}\PYG{p}{,}\PYG{n}{ID}\PYG{o}{=}\PYG{n}{R0000100} \PYG{n}{Delete} \PYG{n}{rule}
    \PYG{n}{DELETE} \PYG{n}{TYPE}\PYG{o}{=}\PYG{n}{RULE}\PYG{p}{,}\PYG{n}{ID}\PYG{o}{=}\PYG{n}{R0000199} \PYG{n}{Delete} \PYG{n}{rule}
    \PYG{n}{DELETE} \PYG{n}{TYPE}\PYG{o}{=}\PYG{n}{RULE}\PYG{p}{,}\PYG{n}{ID}\PYG{o}{=}\PYG{n}{R0000200} \PYG{n}{Delete} \PYG{n}{rule}
    \PYG{n}{DELETE} \PYG{n}{TYPE}\PYG{o}{=}\PYG{n}{RULE}\PYG{p}{,}\PYG{n}{ID}\PYG{o}{=}\PYG{n}{R0000299} \PYG{n}{Delete} \PYG{n}{rule}
    \PYG{n}{DELETE} \PYG{n}{TYPE}\PYG{o}{=}\PYG{n}{ENTRY}\PYG{p}{,}\PYG{n}{ID}\PYG{o}{=}\PYG{n}{EPREJECT} \PYG{n}{Entry} \PYG{n}{point}
    \PYG{n}{DELETE} \PYG{n}{TYPE}\PYG{o}{=}\PYG{n}{TRANSACT}\PYG{p}{,}\PYG{n}{ID}\PYG{o}{=}\PYG{n}{REJ}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{00} \PYG{n}{Delete} \PYG{n}{transaction}
    \PYG{o}{*}
    \PYG{o}{/}\PYG{o}{/}\PYG{n}{CONFIG} \PYG{n}{EXEC} \PYG{n}{PGM}\PYG{o}{=}\PYG{n}{VIRCONF}\PYG{p}{,}\PYG{n}{PARM}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{LOAD,NOREPL}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}\PYG{n}{REGION}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{n}{M}
    \PYG{o}{/}\PYG{o}{/}\PYG{n}{STEPLIB} \PYG{n}{DD} \PYG{n}{DSN}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{LOAD}\PYG{p}{,}\PYG{n}{DISP}\PYG{o}{=}\PYG{n}{SHR}
    \PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSPRINT} \PYG{n}{DD} \PYG{n}{SYSOUT}\PYG{o}{=}\PYG{o}{*}
    \PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSUDUMP} \PYG{n}{DD} \PYG{n}{SYSOUT}\PYG{o}{=}\PYG{o}{*}
    \PYG{o}{/}\PYG{o}{/}\PYG{n}{VIRARBO} \PYG{n}{DD} \PYG{n}{DSN}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{ARBO}\PYG{p}{,}\PYG{n}{DISP}\PYG{o}{=}\PYG{n}{SHR}
    \PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSIN} \PYG{n}{DD} \PYG{o}{*}
    \PYG{n}{RULE} \PYG{n}{Definitions}
\PYG{o}{/}\PYG{o}{*}
\end{sphinxVerbatim}


\chapter{Appendix}
\label{\detokenize{connectivity_guide:appendix}}

\section{Trademarks}
\label{\detokenize{connectivity_guide:trademarks}}
SysperTec, the SysperTec logo, syspertec.com and VIRTEL are trademarks or registered trademarks of SysperTec
Communication Group, registered in France and other countries.

IBM, VTAM, CICS, IMS, RACF, DB2, MVS, WebSphere, MQSeries, System z are trademarks or registered trademarks of
International Business Machines Corp., registered in United States and other countries.

Adobe, Acrobat, PostScript and all Adobe-based trademarks are either registered trademarks or trademarks of Adobe
Systems Incorporated in the United States and other countries.

Microsoft, Windows, Windows NT, and the Windows logo are trademarks of Microsoft Corporation in the United States
and other countries.

UNIX is a registered trademark of The Open Group in the United States and other countries.
Java and all Java-based trademarks and logos are trademarks or registered trademarks of Oracle and/or its affiliates.

Linux is a trademark of Linus Torvalds in the United States, other countries, or both.

Other company, product, or service names may be trademarks or service names of others.



\renewcommand{\indexname}{Index}
\printindex
\end{document}
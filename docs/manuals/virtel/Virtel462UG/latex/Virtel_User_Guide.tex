%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax
\ifdefined\pdfimageresolution
    \pdfimageresolution= \numexpr \dimexpr1in\relax/\sphinxpxdimen\relax
\fi
%% let collapsible pdf bookmarks panel have high depth per default
\PassOptionsToPackage{bookmarksdepth=5}{hyperref}

\PassOptionsToPackage{booktabs}{sphinx}
\PassOptionsToPackage{colorrows}{sphinx}

\PassOptionsToPackage{warn}{textcomp}


\usepackage{cmap}

\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}





\usepackage[Bjarne]{fncychap}
\usepackage[,numfigreset=1,mathnumfig]{sphinx}

\fvset{fontsize=auto}
\usepackage{geometry}


% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}

\addto\captionsenglish{\renewcommand{\contentsname}{Table of Contents:}}

\usepackage{sphinxmessages}
\setcounter{tocdepth}{2}


% Enable unicode and use Courier New to ensure the card suit
% characters that are part of the 'random' module examples
% appear properly in the PDF output.
\usepackage{fontspec}
\setmonofont{Courier New}


\title{Virtel User Guide}
\date{Jun 23, 2024}
\release{4.62}
\author{Syspertec Communications}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{Release}
\makeindex
\begin{document}

\ifdefined\shorthandoff
  \ifnum\catcode`\=\string=\active\shorthandoff{=}\fi
  \ifnum\catcode`\"=\active\shorthandoff{"}\fi
\fi

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{User_Guide::doc}}


\sphinxAtStartPar
\sphinxincludegraphics[scale=0.5]{{logo_virtel_web}.png}

\sphinxAtStartPar
\sphinxstylestrong{VIRTEL User Guide}

\sphinxAtStartPar
Version : 4.62

\sphinxAtStartPar
Release Date : 23/06/2024. Publication Date : 17/03/2024

\sphinxAtStartPar
Syspertec Communication

\sphinxAtStartPar
196, Bureaux de la Colline 92213 Saint\sphinxhyphen{}Cloud Cedex Tél. : +33 (0) 1 46 02 60 42

\sphinxAtStartPar
\sphinxhref{http://www.syspertec.com/}{www.syspertec.com}

\sphinxAtStartPar
NOTICE
\begin{quote}

\sphinxAtStartPar
Reproduction, transfer, distribution, or storage, in any form, of all or any part of
the contents of this document, except by prior authorization of SysperTec
Communication, is prohibited.

\sphinxAtStartPar
Every possible effort has been made by SysperTec Communication to ensure that this document
is complete and relevant. In no case can SysperTec Communication be held responsible for
any damages, direct or indirect, caused by errors or omissions in this document.

\sphinxAtStartPar
As SysperTec Communication uses a continuous development methodology; the information
contained in this document may be subject to change without notice. Nothing in this
document should be construed in any manner as conferring a right to use, in whole or in
part, the products or trademarks quoted herein.

\sphinxAtStartPar
“SysperTec Communication” and “VIRTEL” are registered trademarks. Names of other products
and companies mentioned in this document may be trademarks or registered trademarks of
their respective owners.
\end{quote}

\newpage
\phantomsection\label{\detokenize{User_Guide:v462ug-introduction}}
\sphinxAtStartPar
What’s new in Virtel 4.62

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
For a full list of changes delivered in Virtel V4.62, see the Virtel Technical Newsletter TN202403: What’s new in Virtel 4.62.
\end{sphinxadmonition}


\chapter{The Virtel Engine}
\label{\detokenize{User_Guide:the-virtel-engine}}

\section{Introduction}
\label{\detokenize{User_Guide:introduction}}
\index{Web Access@\spxentry{Web Access}!Virtel@\spxentry{Virtel}}\index{Virtel@\spxentry{Virtel}!Web Access@\spxentry{Web Access}}\ignorespaces 

\subsection{What is Virtel}
\label{\detokenize{User_Guide:what-is-virtel}}\label{\detokenize{User_Guide:index-0}}
\sphinxAtStartPar
Simply put, Virtel is a host\sphinxhyphen{}based protocol converter that runs as a started task on the mainframe. At the core of Virtel is the Virtel Engine which sits between host applications and external environments such as the web or another external server. Virtel supports the following standard protocol \sphinxhyphen{} TCP/IP, SMTP, HTTP/S, SOAP, MQ\sphinxhyphen{}SERIES, SNA, 3270, ICAL (IMS) and the inherited protocols \sphinxhyphen{} X25, XOT, XTP, LU 6.2 to interface between host applications and external services. A classic example for Virtel would be interfacing between legacy 3270 applications, running on the host, and the web. Virtel would provide protocol conversion between data arriving from the browser is converted into a 3270 data\sphinxhyphen{}stream and sent to the application. Users would no longer require 3270 terminal emulators products to interface with legacy host applications. Access can now be provided through the users standard web browser. Various character code page sets are supported, including DBCS character code sets.

\sphinxAtStartPar
The following diagram illustrates some of the protocols and applications supported by the Virtel Engine.

\sphinxAtStartPar
\sphinxincludegraphics{{overview}.png}
\sphinxstyleemphasis{The Virtel Engine}

\sphinxAtStartPar
Virtel provides three models. Web Access (VWA/W2H), Web Modernisation (VWM) and Web Integration (VWI). In the next section each model is described in detail. Regardless of the model, Virtel’s mainframe requirements are the same. The basic file requirements are as follows:\sphinxhyphen{}
\begin{itemize}
\item {} 
\sphinxAtStartPar
SAMP TRSF VSAM File. Contains the templates and web artefacts (JavaScript, Images, HTML, CSS elements etc.) which are served to the browser.

\item {} 
\sphinxAtStartPar
HTML TRSF VSAM File. Contains user customisation web artefacts (JavaScript, HTML, Images, HTML, CSS elements etc.)

\item {} 
\sphinxAtStartPar
LOADLIB PDS.         Virtel load library

\item {} 
\sphinxAtStartPar
ARBO VSAM File.      Contains customer configuration data.

\item {} 
\sphinxAtStartPar
Ancillary files.     Statistics, logs, tracing etc.

\end{itemize}

\sphinxAtStartPar
Virtel normally runs as a started task on the mainframe. Multiple instances of Virtel can be run on the same LPAR and can run within a SYSPLEX environment, benefiting from the load balancing services that such environments provide. See the Virtel Installation manual for a full description of the Virtel mainframe requirements. Virtel can also be run as a batch process, providing a “batch” service between external servers. See the section {\hyperref[\detokenize{User_Guide:v462ug-virtel-batch}]{\sphinxcrossref{\DUrole{std,std-ref}{Virtel Batch}}}} or the Virtel Connectivity Manual for further information on running Virtel in batch.

\sphinxAtStartPar
Like any other web page servers Virtel responds to an incoming URL and serves template pages. The URL targets one of the TCPIP ports that Virtel is listening on. The URL will identify the IP address of the z/OS environment, and the port address will target the Virtel Instance. The pathname and parameters of the URL will identify the Virtel Transaction that will be used to process the URL request. A URL example is shown below. This is a URL requesting a connection to a CICS application called SPCICS. SPCICS is the name of the Virtel transaction that will deal with the request. The pathname “/w2h/WEB2AJAX.htm” identifies a Virtel 3270 template that will be used to support the transaction, providing the framework to convert between 3270 data\sphinxhyphen{}stream and HTML presentations.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{l+m+mf}{192.168}\PYG{l+m+mf}{.170}\PYG{l+m+mf}{.33}\PYG{p}{:}\PYG{l+m+mi}{41002}\PYG{o}{/}\PYG{n}{w2h}\PYG{o}{/}\PYG{n}{WEB2AJAX}\PYG{o}{.}\PYG{n}{htm}\PYG{o}{+}\PYG{n}{SPCICS}
\end{sphinxVerbatim}

\sphinxAtStartPar
For more information on the Virtel URL formats see the section {\hyperref[\detokenize{User_Guide:v462ug-url-formats}]{\sphinxcrossref{\DUrole{std,std-ref}{Virtel URL Formats}}}}.

\newpage

\index{Web Access Overview@\spxentry{Web Access Overview}!Virtel@\spxentry{Virtel}}\index{Virtel@\spxentry{Virtel}!Web Access Overview@\spxentry{Web Access Overview}}\ignorespaces 

\subsection{VIRTEL Web Access (VWA)}
\label{\detokenize{User_Guide:virtel-web-access-vwa}}\label{\detokenize{User_Guide:index-1}}
\sphinxAtStartPar
VIRTEL Web Access, formerly known as “Web\sphinxhyphen{}to\sphinxhyphen{}Host” (W2H), is a set of functions which provides access to mainframe 3270 legacy applications via the user’s browser window. In the VWA model the Virtel Engine comprises of two components, a HTTP server and a VTAM component serving the back\sphinxhyphen{}end VTAM legacy applications, pertaining to operate as an LU2 device(s).

\sphinxAtStartPar
The principle operation of VWA is the production and delivery of 3270 data\sphinxhyphen{}streams as HTML pages. Static template page and web elements supporting VWA are stored and maintained in a Virtel directory on the mainframe at the host site. The pages served to the browser contain standard HTML tags, CSS, JavaScript elements and HTML tags specific to VIRTEL. Invoked by a browser or a program, these pages form the basis of an “on the fly” translation of 3270 data\sphinxhyphen{}streams, thus enabling the dynamic generation and delivery of a 3270 presentation to the browser. No terminal emulation software is required. The VWA model also includes functions which allow dynamic modification of the original 3270 presentation, with the aim of making the interface as “clickable” as possible. This chapter describes the set of functions required to support VWA and presupposes a certain knowledge Web technologies and HTML page construction.

\sphinxAtStartPar
Some fundamental differences to standard terminal emulation protocol must be taken into consideration:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Sessions between a browser and the Virtel HTTP server are in disconnected mode, while they are in connected mode between VIRTEL VTAM component and the host application.

\item {} 
\sphinxAtStartPar
The flow of information between the Virtel HTTP server and a client’s browser occurs on the initiative of the client or through an optional ‘Long Poll’ asynchronous session.

\item {} 
\sphinxAtStartPar
A single request from the browser will only invoke a single response from the HTTP server, while the transmission of a message to an application on the host may generate several response messages at once (for example, a message to clear the screen followed by a new screen image).

\end{enumerate}

\sphinxAtStartPar
These differences give rise to a need to ensure maintenance of session context between a client and a host application. This is done by the tag embedded in the Virtel template pages. Although the HTML pages used to display 3270 data contain specific VIRTEL tags, these pages can be developed using standard web development tools. The pages containing VIRTEL specific tags are stored in a VIRTEL directory along with other Virtel web elements such as Java Script modules, CSS style sheets and images. The VIRTEL directory, known as the W2H directory, is located in the VSAM SAMP.TRSF file.

\newpage

\sphinxAtStartPar
Let’s look at how VWA works.

\sphinxAtStartPar
\sphinxincludegraphics{{vwa_overview}.png}
\sphinxstyleemphasis{VWA Overview}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
The user enters a URL which points to the Virtel Engine. In this case \sphinxstyleemphasis{http:www.myHost.com/WEB2AJAX+TSO5}. Virtel, running as a web server, will be listening on default port 80 for any incoming calls. When Virtel receives the call\sphinxhyphen{}in it will process the pathname of the URL (\sphinxstyleemphasis{/WEB2AJAX+TSO5}) to determine a course of action.

\item {} 
\sphinxAtStartPar
The pathname /WEB2AJAX+TSO identifies a Virtel HTML page TEMPLATE (WEB2AJAX) and a transaction. In this case the transaction is TSO. Virtel, through its configuration, recognizes the TSO transaction as being a VTAM application and initiates a VTAM session with TSO.

\item {} 
\sphinxAtStartPar
A VTAM connection is established between TSO and Virtel with Virtel acting as a virtual terminal relay between the browser and TSO. Subsequent HTML pages received from the browser will now be converted to 3270 data streams and will be sent to TSO as if they had come from a 3270 terminal. 3270 data streams sent by the TSO application will be converted into HTML pages using the WEB2AJAX template and sent to the browser.

\item {} 
\sphinxAtStartPar
TSO responds to the session request and sends a 3270 screen to Virtel.

\item {} 
\sphinxAtStartPar
Virtel, acting as a SLU in the VTAM session, receives the 3270 data stream from the host and constructs a HTML web\sphinxhyphen{}page incorporating the 3270 data. It uses the HTML page WEB2AJAX.HTML as a template. Virtel pages are maintained in the W2H directory located within the SAMP.TRSF VSAM file.

\item {} 
\sphinxAtStartPar
The constructed HTML page is sent to the users browser.

\item {} 
\sphinxAtStartPar
The browser displays the page created by Virtel which will resemble a 3270 screen.

\end{enumerate}

\newpage

\sphinxAtStartPar
Features of Virtels VWA Presentation

\sphinxAtStartPar
A sophisticated and rich set of features are available with VWA through the use of the tool bar. Configuration of the tool\sphinxhyphen{}bar is also possible. The following list summarizes the tool\sphinxhyphen{}bar features presented with the standard VWA 3270 template:\sphinxhyphen{}

\sphinxAtStartPar
\sphinxincludegraphics{{vwa_example}.png}
\sphinxstyleemphasis{VWA 3270 Example}
\begin{quote}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Keyboard Controls. A user can send a variety of keyboard functions, such as PA2, ATTN, etc. through the keyboard control.

\item {} 
\sphinxAtStartPar
IND\$FILE support.

\end{itemize}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
The IND\$FILE function must not be considered as a replacement for a FTP client/server architecture. Sending or receiving large files across this interface could result in performance issues. Virtel provides a means of restricting file transfer sizes to avoid such a situation.
\end{sphinxadmonition}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Screen capture controls which provide a variety of capture options including 1/2/3 page\sphinxhyphen{}up images within a single capture buffer.

\item {} 
\sphinxAtStartPar
User setting controls enables an individual user to set their own Virtel controls and preferences.

\item {} 
\sphinxAtStartPar
Macro Support. Enables a user to create macros to drive screen logic and repetitive tasks.

\item {} 
\sphinxAtStartPar
Configurable help panels. Bespoke help panels can be developed to support business applications.

\item {} 
\sphinxAtStartPar
Language support. Virtel supports a variety of different languages.

\end{itemize}
\end{quote}

\newpage

\index{Web Modernisation@\spxentry{Web Modernisation}!Virtel@\spxentry{Virtel}}\index{Virtel@\spxentry{Virtel}!Web Modernisation@\spxentry{Web Modernisation}}\ignorespaces 

\subsection{VIRTEL Web Modernisation (VWM)}
\label{\detokenize{User_Guide:virtel-web-modernisation-vwm}}\label{\detokenize{User_Guide:index-2}}
\sphinxAtStartPar
VIRTEL Web Modernisation, formerly known as “Host\sphinxhyphen{}Web\sphinxhyphen{}Services” (HWS), allows the presentation of 3270 host applications to be modified, without modifying the application itself. The presentation can be adapted to a format (HTML, XML, Excel, etc.) suited to the requester, while hiding the details of navigation within the 3270 transactions.

\sphinxAtStartPar
This function is implemented through a combination of the VIRTEL Web Access functions described in {\hyperref[\detokenize{User_Guide:v462ug-creating-html}]{\sphinxcrossref{\DUrole{std,std-ref}{Creating HTML and XML templates}}}}, and the Virtel scenario language described in {\hyperref[\detokenize{User_Guide:v462ug-virtel-scenarios}]{\sphinxcrossref{\DUrole{std,std-ref}{Web Modernisation VIRTEL Scenarios}}}}.

\sphinxAtStartPar
VIRTEL Web Modernisation allows “frozen” or “untouchable” 3270 transactions to be accessed by intermediate servers (n\sphinxhyphen{}tier architecture) or from a browser, while hiding the details of     navigation within the transactions. Variable input data for the transaction can either be included in the URL (GET method), or sent as data with the HTTP request (POST method).

\sphinxAtStartPar
With modernisation, for example, several 3270 round trips can be made to the host application within a presentation scenario before returning the final result to the browser. Data could be extracted from the individual host responses and encapsulated into one HTML page. For example when a user requests a “list” this could result in a sequence of key strokes and displays between the application and Virtel. Taking the example:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{User} \PYG{n}{enters} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ASMITH}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o+ow}{in} \PYG{n}{CICS} \PYG{n}{MAP} \PYG{k}{as} \PYG{n}{a} \PYG{n}{search} \PYG{n}{operand}\PYG{o}{.} \PYG{n}{Presses} \PYG{n}{Enter}\PYG{o}{.}
\PYG{n}{First} \PYG{n}{Screen} \PYG{n}{returned}\PYG{o}{.}
\PYG{n}{User} \PYG{n}{press} \PYG{n}{PFK8} \PYG{n}{to} \PYG{n}{obtain} \PYG{n+nb}{next} \PYG{n}{screen}\PYG{o}{.}
\PYG{n}{Second} \PYG{n}{screen} \PYG{n}{returned}\PYG{o}{.}
\PYG{n}{User} \PYG{n}{press} \PYG{n}{PFK8} \PYG{n}{to} \PYG{n}{obtain} \PYG{n+nb}{next} \PYG{n}{screen}\PYG{o}{.}
\PYG{n}{Third} \PYG{n}{screen} \PYG{n}{returned}\PYG{o}{.} \PYG{n}{Last} \PYG{o+ow}{in} \PYG{n}{sequence}\PYG{o}{.}
\end{sphinxVerbatim}

\sphinxAtStartPar
The above business logic i.e. “search for a name” can be incorporated into a Virtel Scenario as illustrated in the diagram below. We have called the scenario GETDATA. The user enters the search argument “ASMITH” and presses Enter. The HTML request is sent to Virtel. The HTML request, based upon the submitted URL, is targeted towards transaction CUSTDATA which is a VTAM application transaction associated with CICS6, a legacy CICS application. The CUSTDATA Virtel transaction is defined with scenario GETDATA. This configuration data is maintained in the VIRTEL ARBO file.

\newpage

\sphinxAtStartPar
When the user submits the URL from the browser Virtel will establishe a VTAM session with CICS6 and then will continue to run the scenario GETDATA. The scenario contains the business logic which will perfom the key stokes to obtain all the relevant data from multiple 3270 screens. The scenario will then build a modernised web page which will contain a GUI “drop down list” encapsulating all data obtained from the three 3270 CICS displays. The HTML response is sent back to the user.

\sphinxAtStartPar
The user has entered only one keystroke to submit the transaction and received one response. The data within the HTML response will represent all the data extracted from several 3270 displays. The response data will be presented in a “modernised” GUI fashion.

\sphinxAtStartPar
\sphinxincludegraphics{{vwm_overview}.png}
\sphinxstyleemphasis{VWM Overview}
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
The user enters a URL which identifies the Virtel transaction CUSTDATA.

\item {} 
\sphinxAtStartPar
The configuration data for the transaction CUSTDATA is loaded from the Virtel Configuration repository held within the Virtel ARBO VSAM dataset. The transaction CUSTDATA has a scenario associated with it called GETDATA.

\item {} 
\sphinxAtStartPar
The GETDATA scenario is then used to navaigate through 3270 screens, collecting data from each screen.

\item {} 
\sphinxAtStartPar
The scenarion builds a “clickable” GUI template using the data extracted from the three 3270 screens. The template is presented to the browser.

\item {} 
\sphinxAtStartPar
The user has a modernised version of the original 3270 presentation incorporating a GUI drop down from which they can navigate to the next sceen. A master/detail pattern has been deployed by the Virtel scenario, presenting the user with data from three separate 3270 screens. Modernisation improves the users UX/UI presentation experince and by doing so enhances and improvers navigation of the legacy business logic. Less network transfer is consumed as the number of original 3270 screens is consolidated into one Virtel GUI master/detail screen.

\end{enumerate}

\newpage

\index{Web integration@\spxentry{Web integration}!Virtel@\spxentry{Virtel}}\index{Virtel@\spxentry{Virtel}!Web integration@\spxentry{Web integration}}\ignorespaces 

\subsection{VIRTEL Web Integration (VWI)}
\label{\detokenize{User_Guide:virtel-web-integration-vwi}}\label{\detokenize{User_Guide:index-3}}
\sphinxAtStartPar
The objective of VIRTEL Web Integration, formerly known as  “Host\sphinxhyphen{}for\sphinxhyphen{}Web” (H4W), is to allow a host application to take maximum control of its web interface, for example through web services. This is in complete contrast to VWA/VWM, whose objective is to avoid modification of host applications.

\sphinxAtStartPar
To control its web interface, an application has at its disposal primarily the 3270 screen, the VIRTEL table variable facility, the HTML page template, and a set of VIRTEL commands contained in structured fields. Additionally, for browser requests which enter VIRTEL using an entry point which specifies emulation type “HOST4WEB”, the application can also use a set of VIRTEL control commands which can be embedded in the 3270 screen via a BMS map, ISPF panel, or 3270 data stream. These HOST4WEB commands, available from VIRTEL version 4.28 onwards, provide the same general functions as the structured field commands in earlier versions.

\sphinxAtStartPar
Table variables, structured field commands, and HOST4WEB commands, are sent by the application to the 3270 session using standard methods (EXEC CICS SEND, ISPEXEC DISPLAY PANEL, TSO TPUT, etc). VIRTEL intercepts and acts upon these commands, for example by selecting the page template or loading data which can be referenced by VIRTEL orders embedded in the page templates and used to build lists of values or data tables.

\sphinxAtStartPar
VMI enables an application to create a dynamic dialog between its transactions and web applications through the creation of interactive bidirectional dialogs across the Internet between host (CICS, IMS, Ideal, Natural, etc.) and server\sphinxhyphen{}based applications using XML/HTML web services or other communication procedures.

\sphinxAtStartPar
\sphinxstylestrong{Incoming and outgoing Web Services Support}

\sphinxAtStartPar
Incoming calls
\begin{itemize}
\item {} 
\sphinxAtStartPar
To expose host applications to web clients though web services, Virtel can be configured to:

\item {} 
\sphinxAtStartPar
Receive and parse incoming web service calls

\item {} 
\sphinxAtStartPar
Execute the appropriate transactions

\item {} 
\sphinxAtStartPar
Receive data returned by the transactions in the form of screens, structured fields, COMMAREA, or database segments

\item {} 
\sphinxAtStartPar
Reformat and wrap that data with XML, JSON, HTML, SOAP, CSV, PDF, Word, JSON, etc.

\item {} 
\sphinxAtStartPar
Serve it back to the web callers

\end{itemize}

\sphinxAtStartPar
Outgoing calls
\begin{itemize}
\item {} 
\sphinxAtStartPar
In the outgoing direction (host\sphinxhyphen{}initiated web services) the mechanism is the same, just reverse.

\end{itemize}

\sphinxAtStartPar
VWI can be configured to support a wide range of interfaces, protocols and APIs which can :\sphinxhyphen{}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Expose mainframe applications and data as web services to web clients

\item {} 
\sphinxAtStartPar
Invoke web services for the count of mainframe applications

\item {} 
\sphinxAtStartPar
Support interactive exchange procedures between mainframe and web applications for cooperative work

\item {} 
\sphinxAtStartPar
Function as a SOAP, MQ, PHP… server

\item {} 
\sphinxAtStartPar
Transfer data blocks larger than 32KB, or blocks of data with variable format

\item {} 
\sphinxAtStartPar
Convert data from DBCS (Double Byte Character Set) used by Japanese, Chinese, Russian… workstations or applications to EBCDIC, and vice/versa

\item {} 
\sphinxAtStartPar
Serve 3270 data as international icons to eliminate natural languages from user interfaces

\item {} 
\sphinxAtStartPar
Replace web connectors developed by IBM (CWS, CTG, HOD, IMS Connect, etc) and ISVs, or home\sphinxhyphen{}grown (CICS socket programming)

\end{itemize}

\sphinxAtStartPar
\sphinxincludegraphics{{vwi_overview}.png}
\sphinxstyleemphasis{VWI Overview}

\sphinxAtStartPar
For more information, refer to the chapter {\hyperref[\detokenize{User_Guide:v462ug-programming-interfaces}]{\sphinxcrossref{\DUrole{std,std-ref}{“Programming Interfaces”}}}}.

\phantomsection\label{\detokenize{User_Guide:v462ug-service-transactions}}
\index{Service Transactions@\spxentry{Service Transactions}!Virtel@\spxentry{Virtel}}\index{Virtel@\spxentry{Virtel}!Service Transactions@\spxentry{Service Transactions}}\index{SESSION\sphinxhyphen{}CODE@\spxentry{SESSION\sphinxhyphen{}CODE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!SESSION\sphinxhyphen{}CODE@\spxentry{SESSION\sphinxhyphen{}CODE}}\ignorespaces 

\subsection{VIRTEL Service Transactions}
\label{\detokenize{User_Guide:virtel-service-transactions}}\label{\detokenize{User_Guide:index-4}}
\sphinxAtStartPar
A Service Transaction is a long\sphinxhyphen{}running VIRTEL transaction which maintains a session with a host application and uses this session to serve a series of HTTP request / responses. Unlike a regular HTTP transaction, which serves requests only from its originating user, identified by a specific VIRTEL SESSION\sphinxhyphen{}CODE, a service transaction can serve a different user each time it processes an HTTP request. Service transactions are typically used to provide fast access to public information such as the lists of field values displayed by the “VIRTEL Suggest” feature.

\sphinxAtStartPar
A service transaction is started by an HTTP URL in exactly the same way as a regular transaction, but when it has finished processing its first HTTP request, it indicates its readiness to serve another user, either by means of the script command \&) described under the heading “Transactions — Connection / Disconnection Scripts” in the VIRTEL Connectivity Reference documentation, or by means of the {\hyperref[\detokenize{User_Guide:v462ug-action-serve-another-users}]{\sphinxcrossref{\DUrole{std,std-ref}{ACTION\$ SERVE\sphinxhyphen{}ANOTHER\sphinxhyphen{}USER}}}} command in a scenario.

\sphinxAtStartPar
A service transaction remains connected to the host application between input messages. It is then eligible to process any HTTP request which specifies the same entry point and transaction name. Since service transactions can potentially be used by many different users, a typical service transaction will provide information which is not sensitive to being signed\sphinxhyphen{}on as a particular user.

\newpage
\phantomsection\label{\detokenize{User_Guide:v462ug-url-formats}}
\index{URL Formats@\spxentry{URL Formats}}\index{Static Pages@\spxentry{Static Pages}!URL Formats@\spxentry{URL Formats}}\index{URL Formats@\spxentry{URL Formats}!Static Pages@\spxentry{Static Pages}}\ignorespaces 

\section{VIRTEL URL Formats}
\label{\detokenize{User_Guide:virtel-url-formats}}\label{\detokenize{User_Guide:index-5}}

\subsection{Static pages}
\label{\detokenize{User_Guide:static-pages}}
\sphinxAtStartPar
Virtel locates static HTML pages through the URL passed to the Virtel Engine and the configuration definitions defined within the Virtel ARBO VSAM file. An endpoint for Virtel is defined by a Virtel line definition which identifies the TCP/IP port that Virtel listens on for incoming calls. By default Virtel uses two endpoints or ports, 41001 for Administration and port 41002 for user or client transactions. Each endpoint is associated with a default Entry Point; WEB2HOST in the case of 41001 and CLIWHOST for 41002. Transactions are associated with End Points. An endpoint can be associated with more than one Entry Point.  Virtel provides a Rule facility whereby an Entry Point can be selected by incoming call criteria \sphinxhyphen{} IP address for example.
\sphinxincludegraphics{{static_pages}.png}
\sphinxstyleemphasis{Virtel Static Pages}

\sphinxAtStartPar
Virtel stores pages and web elements within VIRTEL directories located in TRSF VSAM files. The general form of the URL for an HTML page stored in a VIRTEL directory is:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{ipaddr}\PYG{p}{:}\PYG{n}{port}\PYG{o}{/}\PYG{n}{pathname}\PYG{o}{/}\PYG{n}{pagename}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{ipaddr:port}
\sphinxAtStartPar
Corresponds to the “Local ident” field of an HTTP line defined to
VIRTEL. The rules of the line are used to select the entry point.
This entry point, which must specify emulation type HTML, contains
the list of transactions which the user is authorized to invoke.

\sphinxlineitem{pathname}
\sphinxAtStartPar
Represents a VIRTEL directory containing HTML pages or other elements. Refer to the section {\hyperref[\detokenize{User_Guide:v462ug-how-the-path-name}]{\sphinxcrossref{\DUrole{std,std-ref}{“How the path name corresponds to a VIRTEL directory”}}}} below for details of how the pathname is used to select the VIRTEL directory.

\sphinxlineitem{pagename}
\sphinxAtStartPar
Is the name of an element (HTML page, etc.) in the specified
directory. VIRTEL converts the element name to upper case (unless
“case sensitive” is specified in the directory definition), and
truncates the name if necessary to the maximum length specified in
the directory definition (see {\hyperref[\detokenize{User_Guide:v462ug-directory-management}]{\sphinxcrossref{\DUrole{std,std-ref}{“Directory Management”}}}}).

\end{description}

\sphinxAtStartPar
VIRTEL also accepts certain abbreviated forms of the URL:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{ipaddr}\PYG{p}{:}\PYG{n}{port}\PYG{o}{/}\PYG{n}{pathname}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{ipaddr:port}
\sphinxAtStartPar
Is the address of the HTTP line, as before.

\sphinxlineitem{pathname}
\sphinxAtStartPar
Represents a VIRTEL directory, as described above. In this case, VIRTEL loads a default page from this directory. The default page name is the same as the entry point name. Note: the trailing slash is compulsory.

\end{description}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{ipaddr}\PYG{p}{:}\PYG{n}{port}\PYG{o}{/}\PYG{n}{pagename}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{ipaddr:port}
\sphinxAtStartPar
Is the address of the HTTP line, as before.

\sphinxlineitem{pagename}
\sphinxAtStartPar
Is the name of a page to be loaded from the default directory. The
default directory corresponds to a default pathname equal to the
entry point name.

\end{description}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{ipaddr}\PYG{p}{:}\PYG{n}{port}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{ipaddr:port}
\sphinxAtStartPar
Is the address of the HTTP line, as before.

\end{description}

\sphinxAtStartPar
In this case, VIRTEL loads the default URL. VIRTEL obtains the default URL from the “TIOA at logon” field of the default transaction. The default transaction is a type 4 transaction which has the same name as the entry point. See example 7 below for an example of a default URL. If the “TIOA at logon” field of the default transaction is blank, then VIRTEL loads the default page from the default directory. The default page has the same name as the entry point, and the default directory corresponds to a default pathname equal to the entry point name.

\phantomsection\label{\detokenize{User_Guide:v462ug-how-the-path-name}}
\index{Path name and Virtel directories@\spxentry{Path name and Virtel directories}!URL Formats@\spxentry{URL Formats}}\index{URL Formats@\spxentry{URL Formats}!Path name and Virtel directories@\spxentry{Path name and Virtel directories}}\ignorespaces 

\subsection{How the path name corresponds to a VIRTEL directory}
\label{\detokenize{User_Guide:how-the-path-name-corresponds-to-a-virtel-directory}}\label{\detokenize{User_Guide:index-6}}\begin{quote}

\sphinxAtStartPar
The pathname specified in a VIRTEL URL is used to select a VIRTEL
directory which contains HTML page templates and other elements such
as CSS stylesheets, JavaScript procedures, and GIF or JPEG images.
VIRTEL directories have a simple 8\sphinxhyphen{}character case\sphinxhyphen{}insensitive name,
whereas the pathname is expressed in Unix\sphinxhyphen{}style syntax (one or more
case\sphinxhyphen{}

\sphinxAtStartPar
sensitive components separated by slashes), as is conventional for
web applications. VIRTEL must therefore translate the Unix\sphinxhyphen{}style
pathname into a VIRTEL directory name.

\sphinxAtStartPar
The process of mapping a pathname to a VIRTEL directory name is
carried out by means of VIRTEL transactions which are defined under
the entry point selected for each request by the rules of the HTTP
line. The entry point contains both processing transactions
(application types 1, 2, and 3) and directory transactions
(application type 4).

\sphinxAtStartPar
To find the directory which corresponds to the pathname, VIRTEL
looks for a type 4 transaction whose external name matches the first
component of the pathname, and whose “Check URL prefix” field is
either blank or matches the start of the pathname. The name of the
VIRTEL directory is contained in the “Application name” field of the
first such matching transaction found under the entry point.

\begin{sphinxadmonition}{note}{Note:}\begin{itemize}
\item {} 
\sphinxAtStartPar
The comparison of the first component of the pathname with the transaction external name is case insensitive, and if the first component of the pathname is longer than 8 characters, only the first 8 characters are compared.

\item {} 
\sphinxAtStartPar
The comparison of the beginning of the pathname against the transaction’s “Check URL prefix” field is case sensitive.

\item {} 
\sphinxAtStartPar
The “Check URL prefix” field may contain “\%20” to represent a blank and “?” to ignore a character position.

\item {} 
\sphinxAtStartPar
If the “Check URL prefix” field is completely blank it is considered to match any pathname whose first component matches the transaction external name.

\end{itemize}
\end{sphinxadmonition}
\end{quote}

\index{URL Examples@\spxentry{URL Examples}!URL Formats@\spxentry{URL Formats}}\index{URL Formats@\spxentry{URL Formats}!URL Examples@\spxentry{URL Examples}}\ignorespaces 

\subsubsection{Examples}
\label{\detokenize{User_Guide:examples}}\label{\detokenize{User_Guide:index-7}}
\sphinxAtStartPar
Assume that entry point WEB2HOST contains the following transactions:

\sphinxAtStartPar
\sphinxincludegraphics{{image67}.png}
\sphinxstyleemphasis{Transactions under entry point WEB2HOST}

\sphinxAtStartPar
In this example, transactions W2H\sphinxhyphen{}00, W2H\sphinxhyphen{}03*, W2H\sphinxhyphen{}05* are  “application type 4” (directory transactions). Other transactions, such as “application type 1” (processing transactions i.e. TSO, CICS, etc.) play no part in the directory selection process.

\sphinxAtStartPar
The figure below shows an example of the detail of a directory transaction:\sphinxhyphen{}

\sphinxAtStartPar
\sphinxincludegraphics{{image68}.png}
\sphinxstyleemphasis{Example of a directory transaction}


\subsubsection{Example 1: Neither pathname nor pagename specified}
\label{\detokenize{User_Guide:example-1-neither-pathname-nor-pagename-specified}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{ipaddr}\PYG{p}{:}\PYG{n}{port}
\end{sphinxVerbatim}

\sphinxAtStartPar
The pathname defaults to the entry point name, WEB2HOST, which  matches transaction W2H\sphinxhyphen{}00. The pagename also defaults to WEB2HOST.  VIRTEL therefore fetches page WEB2HOST from the directory W2H\sphinxhyphen{}DIR.


\subsubsection{Example 2: pagename specified}
\label{\detokenize{User_Guide:example-2-pagename-specified}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{ipaddr}\PYG{p}{:}\PYG{n}{port}\PYG{o}{/}\PYG{n}{menu}\PYG{o}{.}\PYG{n}{htm}
\end{sphinxVerbatim}

\sphinxAtStartPar
The pathname defaults to the entry point name, WEB2HOST, which matches transaction W2H\sphinxhyphen{}00. VIRTEL therefore fetches page menu.htm from the directory W2H\sphinxhyphen{}DIR.


\subsubsection{Example 3: Pathname specified}
\label{\detokenize{User_Guide:example-3-pathname-specified}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{ipaddr}\PYG{p}{:}\PYG{n}{port}\PYG{o}{/}\PYG{n}{w2h}\PYG{o}{/}\PYG{n}{user}\PYG{o}{/}
\end{sphinxVerbatim}

\sphinxAtStartPar
The pathname /w2h/user matches transaction W2H\sphinxhyphen{}04. The pagename defaults to the entry point name, WEB2HOST. VIRTEL therefore fetches page WEB2HOST from the directory USR\sphinxhyphen{}DIR.


\subsubsection{Example 4: Pathname and pagename specified}
\label{\detokenize{User_Guide:example-4-pathname-and-pagename-specified}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{ipaddr}\PYG{p}{:}\PYG{n}{port}\PYG{o}{/}\PYG{n}{w2h}\PYG{o}{/}\PYG{n}{user}\PYG{o}{/}\PYG{n}{index}\PYG{o}{.}\PYG{n}{html}
\end{sphinxVerbatim}

\sphinxAtStartPar
The pathname /w2h/user matches transaction W2H\sphinxhyphen{}03U. VIRTEL therefore fetches page index.html from the directory USR\sphinxhyphen{}DIR.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{ipaddr}\PYG{p}{:}\PYG{n}{port}\PYG{o}{/}\PYG{n}{home}\PYG{o}{/}\PYG{n}{user3}\PYG{o}{/}\PYG{n}{index}\PYG{o}{.}\PYG{n}{html}
\end{sphinxVerbatim}


\subsubsection{Example 5: Undefined pathname specified}
\label{\detokenize{User_Guide:example-5-undefined-pathname-specified}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{ipaddr}\PYG{p}{:}\PYG{n}{port}\PYG{o}{/}\PYG{n}{w2h}\PYG{o}{/}\PYG{n}{badpath}\PYG{o}{/}\PYG{n}{index}\PYG{o}{.}\PYG{n}{html}
\end{sphinxVerbatim}

\sphinxAtStartPar
In this case the pathname /w2h/badpath does not match any transaction. VIRTEL therefore rejects the request.


\subsubsection{Example 6: Partly\sphinxhyphen{}defined pathname specified}
\label{\detokenize{User_Guide:example-6-partly-defined-pathname-specified}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{ipaddr}\PYG{p}{:}\PYG{n}{port}\PYG{o}{/}\PYG{n}{SECURE}\PYG{o}{/}\PYG{n}{misc}\PYG{o}{/}\PYG{n}{myPage}\PYG{o}{.}\PYG{n}{html}
\end{sphinxVerbatim}

\sphinxAtStartPar
The pathname /SECURE/misc is not specifically defined to VIRTEL. However there is a transaction W2H\sphinxhyphen{}02 whose external name is SECURE and whose “Check URL prefix” field is blank, which matches all     pathnames whose first component is /SECURE. VIRTEL therefore fetches the any /SECURE/misc/myPage.html from the designated directory W2H\sphinxhyphen{}DIR.


\subsubsection{Example 7: Entry point with default URL}
\label{\detokenize{User_Guide:example-7-entry-point-with-default-url}}
\sphinxAtStartPar
When a user connects to a VIRTEL line without specifying either pathname or pagename, as in the example below, the entry point may be configured to redirect the request to a default URL:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{ipaddr}\PYG{p}{:}\PYG{n}{port}
\end{sphinxVerbatim}

\sphinxAtStartPar
A default URL may be specified in the transaction whose external name is the same as the entry point name. In the example type 4 transaction CLI\sphinxhyphen{}00 shown below, the default URL for the entry point CLIHOST is //w2h/appmenu.htm+applist and thus the URL

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{ipaddr}\PYG{p}{:}\PYG{n}{port}
\end{sphinxVerbatim}

\sphinxAtStartPar
is processed by VIRTEL as if

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{ipaddr}\PYG{p}{:}\PYG{n}{port}\PYG{o}{/}\PYG{o}{/}\PYG{n}{w2h}\PYG{o}{/}\PYG{n}{appmenu}\PYG{o}{.}\PYG{n}{htm}\PYG{o}{+}\PYG{n}{applist}
\end{sphinxVerbatim}

\sphinxAtStartPar
had been specified.

\sphinxAtStartPar
\sphinxincludegraphics{{image69}.png} \sphinxstyleemphasis{Example of a default transaction with default URL}

\sphinxAtStartPar
The entry point CLIWHOST can access the w2h directory through a directory definition specifing the external directory path as an external name in the transaction. Here the transaction needs access to web elements located in the W2H\sphinxhyphen{}DIR. The /w2h/ pathname in w2h/appmenu.htm matches the external name of the directory transaction CLI\sphinxhyphen{}03W. This match defines a path to the W2H\sphinxhyphen{}DIR:\sphinxhyphen{}

\sphinxAtStartPar
\sphinxincludegraphics{{image70}.png} \sphinxstyleemphasis{Providing access to a directory through a transactions external name}

\index{SESSION\sphinxhyphen{}CODE@\spxentry{SESSION\sphinxhyphen{}CODE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!SESSION\sphinxhyphen{}CODE@\spxentry{SESSION\sphinxhyphen{}CODE}}\index{Dynamic Pages@\spxentry{Dynamic Pages}!URL Formats@\spxentry{URL Formats}}\index{URL Formats@\spxentry{URL Formats}!Dynamic Pages@\spxentry{Dynamic Pages}}\ignorespaces 

\subsection{Dynamic pages}
\label{\detokenize{User_Guide:dynamic-pages}}\label{\detokenize{User_Guide:index-8}}
\sphinxAtStartPar
The general form of the URL for a VIRTEL Web Access, VIRTEL Web Integration, or VIRTEL Web Modernisation transaction is:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{ipaddr}\PYG{p}{:}\PYG{n}{port}\PYG{o}{/}\PYG{n}{pathname}\PYG{o}{/}\PYG{n}{pagename}\PYG{o}{+}\PYG{n}{tranname}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{ipaddr:port}
\sphinxAtStartPar
Is the address of the HTTP line, as before.

\sphinxlineitem{pathname}
\sphinxAtStartPar
Represents a VIRTEL directory, as described earlier.

\sphinxlineitem{pagename}
\sphinxAtStartPar
Is the name of an element (HTML or XML) in the specified directory.
This name may be converted to upper case and truncated to the
maximum length defined in the directory definition, as previously
described. This element is used as the “template page” into which
VIRTEL inserts dynamic data.

\sphinxlineitem{tranname}
\sphinxAtStartPar
Is the external name of a transaction defined under the entry point.
The application program (which may be a CICS transaction or other
VTAM application, a VIRTEL sub\sphinxhyphen{}application, or an external server)
invoked by this transaction provides the dynamic data which VIRTEL
inserts into the template page.

\end{description}
\phantomsection\label{\detokenize{User_Guide:v462ug-dynamic-url}}
\index{Dynamic URL with userdata@\spxentry{Dynamic URL with userdata}!URL Formats@\spxentry{URL Formats}}\index{URL Formats@\spxentry{URL Formats}!Dynamic URL with userdata@\spxentry{Dynamic URL with userdata}}\ignorespaces 

\subsubsection{Dynamic URL with userdata}
\label{\detokenize{User_Guide:dynamic-url-with-userdata}}\label{\detokenize{User_Guide:index-9}}
\sphinxAtStartPar
A second form of URL allows user data to be passed to VIRTEL:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{ipaddr}\PYG{p}{:}\PYG{n}{port}\PYG{o}{/}\PYG{n}{pathname}\PYG{o}{/}\PYG{n}{pagename}\PYG{o}{+}\PYG{n}{tranname}\PYG{o}{+}\PYG{n}{userdata}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{ipaddr:port}
\sphinxAtStartPar
Is the address of the HTTP line, as before.

\sphinxlineitem{pathname}
\sphinxAtStartPar
Represents a VIRTEL directory, as described earlier.

\sphinxlineitem{pagename}
\sphinxAtStartPar
Is the name of a template page, as before.

\sphinxlineitem{tranname}
\sphinxAtStartPar
Is the name of the transaction which provides the dynamic data for
the template page.

\sphinxlineitem{userdata}
\sphinxAtStartPar
Is a character string which can be tested by the “User Data” field in the rules of the HTTP line (see “Rules” in the VIRTEL Connectivity Reference documentation). This allows the administrator to assign an entry point to the request based upon the contents of the userdata in the URL. The userdata also becomes the value of the “routing parameter” associated with the tranname transaction. The routing parameter can be referenced by the variable \&1 in the “TIOA at logon” field of the tranname transaction (see “Defining transaction parameters” in the VIRTEL Connectivity Reference documentation). Additionally, if the rule which is selected specifies “\$URL\$” in its “Parameter” field, \sphinxstylestrong{and only if} the HTTP terminal relays are defined in a logical pool (see “HTTP Terminals” under the heading “Definition of an HTTP line” in the VIRTEL Connectivity Reference documentation), then the routing parameter is used by VIRTEL to select a relay LU for the tranname transaction.

\end{description}

\index{Dynamic URL with parameters@\spxentry{Dynamic URL with parameters}!URL Formats@\spxentry{URL Formats}}\index{URL Formats@\spxentry{URL Formats}!Dynamic URL with parameters@\spxentry{Dynamic URL with parameters}}\ignorespaces 

\subsubsection{Dynamic URL with parameters}
\label{\detokenize{User_Guide:dynamic-url-with-parameters}}\label{\detokenize{User_Guide:index-10}}
\sphinxAtStartPar
A third form of URL allows one or more parameters to be passed to a transaction by means of an “Identification Scenario” or by a “Connection / Disconnection Script”:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
http://ipaddr:port/pathname/pagename+tranname?param1=value\PYGZam{}param2=value
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{ipaddr:port}
\sphinxAtStartPar
Is the address of the HTTP line, as before.

\sphinxlineitem{pathname}
\sphinxAtStartPar
Represents a VIRTEL directory, as described earlier.

\sphinxlineitem{pagename}
\sphinxAtStartPar
Is the name of a template page, as before.

\sphinxlineitem{tranname}
\sphinxAtStartPar
Is the name of the transaction which provides the dynamic data for
the template page. This transaction must be defined with the name of
a presentation module in its “Output Scenario” field.

\sphinxlineitem{param1, param2, …}
\sphinxAtStartPar
These are the names of the parameters which the scenario can pick up using
the COPY\$ INPUT\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE or COPY\$ INPUT\sphinxhyphen{}TO\sphinxhyphen{}SCREEN instructions
(described 153) or which can be substituted in a script by means of
the \&=paramn= system variable (see “Transactions \textendash{} Connection /
Disconnection Scripts” in the VIRTEL Connectivity Reference
documentation. The cumulative length of the URL parameters is
limited by the BUFSIZE parameter of the VIRTCT. If blanks or other
special characters are required in the parameter value, then the
special characters must be coded in the standard URL escape format
\%xx where xx is the hexadecimal value of the character in ASCII. For
example, a blank is represented as \%20.

\end{description}

\sphinxAtStartPar
Parameters can be used to override the Virtel defaults. For example, a different code page is required to the default code page defined in the TCT. The following parameters can be used to override Virtel TCT or session defaults :\sphinxhyphen{}
\begin{quote}

\sphinxAtStartPar
LOGMODE     Logmode for session
ROWS        Number of rows
COLS        Number of columns
CODEPAGE    codepage
USEHTMINI   Minitel HTTL support \sphinxhyphen{} Yes or No.
\end{quote}


\subsubsection{Dynamic URL with userdata and parameters}
\label{\detokenize{User_Guide:dynamic-url-with-userdata-and-parameters}}\begin{quote}

\sphinxAtStartPar
A URL may contain both userdata and query parameters, as shown in
the following example. The various components of the URL have the
same meaning as described in the preceding two sections.
\end{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
http://ipaddr:port/pathname/pagename+tranname+userdata?param1=value\PYGZam{}param2=value
\end{sphinxVerbatim}

\newpage
\phantomsection\label{\detokenize{User_Guide:v462ug-session-management}}
\index{3270 session management@\spxentry{3270 session management}}\index{VirtelSession@\spxentry{VirtelSession}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!VirtelSession@\spxentry{VirtelSession}}\ignorespaces 

\subsection{3270 session management}
\label{\detokenize{User_Guide:session-management}}\label{\detokenize{User_Guide:index-11}}

\subsubsection{VirtelSession parameter}
\label{\detokenize{User_Guide:virtelsession-parameter}}
\sphinxAtStartPar
Once a session has been established with the host 3270 application, the template page allows the user to link to the next screen in the 3270 application dialog by means of a URL in the following format:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{ipaddr}\PYG{p}{:}\PYG{n}{port}\PYG{o}{/}\PYG{n}{pathname}\PYG{o}{/}\PYG{n}{pagename}\PYG{o}{+}\PYG{o}{+}\PYG{n}{VirtelSession}\PYG{o}{=}\PYG{n}{sessionid}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{ipaddr:port}
\sphinxAtStartPar
Is the address of the HTTP line, as before.

\sphinxlineitem{pathname}
\sphinxAtStartPar
Represents a VIRTEL directory, as described earlier.

\sphinxlineitem{pagename}
\sphinxAtStartPar
Is the name of the template page to be used for displaying the next
3270 screen (usually the same as the current template page).

\sphinxlineitem{sessionid}
\sphinxAtStartPar
Is a VIRTEL\sphinxhyphen{}generated code which allows VIRTEL to identify the user as being already connected to an existing host session. The parameter VirtelSession=sessionid is inserted by the
\sphinxstyleemphasis{\{\{\{SESSION\sphinxhyphen{}CODE\}\}\}} tag embedded in the template page (see {\hyperref[\detokenize{User_Guide:v462ug-session-context-mangement}]{\sphinxcrossref{\DUrole{std,std-ref}{“Session And Context Management”}}}}).

\end{description}

\index{PrintVirtelSession@\spxentry{PrintVirtelSession}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!PrintVirtelSession@\spxentry{PrintVirtelSession}}\ignorespaces 

\subsubsection{PrintVirtelSession parameter}
\label{\detokenize{User_Guide:printvirtelsession-parameter}}\label{\detokenize{User_Guide:index-12}}\begin{quote}

\sphinxAtStartPar
A second form of the URL with SESSION\sphinxhyphen{}CODE allows display of print data sent by the application to the virtual printer associated with the specified session. Normally this URL will be embedded in a
template page and will be triggered by the \sphinxstyleemphasis{\{\{\{IF\sphinxhyphen{}PRINT\sphinxhyphen{}IS\sphinxhyphen{}READY\}\}\}} tag.
\end{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{ipaddr}\PYG{p}{:}\PYG{n}{port}\PYG{o}{/}\PYG{n}{pathname}\PYG{o}{/}\PYG{n}{pagename}\PYG{o}{+}\PYG{o}{+}\PYG{n}{PrintVirtelSession}\PYG{o}{=}\PYG{n}{sessionid}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{ipaddr:port}
\sphinxAtStartPar
Is the address of the HTTP line, as before.

\sphinxlineitem{pathname}
\sphinxAtStartPar
Represents a VIRTEL directory, as described earlier.

\sphinxlineitem{pagename}
\sphinxAtStartPar
Is the name of the template page to be used for displaying the print data. This page must contain the special \sphinxstyleemphasis{\{\{\{PRINT\}\}\}} tag (see {\hyperref[\detokenize{User_Guide:v462ug-printing}]{\sphinxcrossref{\DUrole{std,std-ref}{“3287 Printing”}}}}) at the point at which the print data are to be inserted in the page.

\sphinxlineitem{sessionid}
\sphinxAtStartPar
Is a code which allows VIRTEL to identify the printer associated with the user’s 3270 session. The parameter PrintVirtelSession=sessionid (where sessionid is the associated 3270 session identifier), is generated by the \sphinxstyleemphasis{\{\{\{SESSION\sphinxhyphen{}CODE\}\}\}} tag as in the following example:\sphinxhyphen{}

\end{description}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{imprim}\PYG{o}{.}\PYG{n}{htm}\PYG{o}{+}\PYG{o}{+}\PYG{n}{Print}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{SESSION}\PYG{o}{\PYGZhy{}}\PYG{n}{CODE}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\index{ValidateVirtelSession@\spxentry{ValidateVirtelSession}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!ValidateVirtelSession@\spxentry{ValidateVirtelSession}}\ignorespaces 

\subsubsection{ValidateVirtelSession parameter}
\label{\detokenize{User_Guide:validatevirtelsession-parameter}}\label{\detokenize{User_Guide:index-13}}
\sphinxAtStartPar
A third form of URL with \sphinxstyleemphasis{\{\{\{SESSION\sphinxhyphen{}CODE\}\}\}} allows a JavaScript procedure embedded in a template page to determine whether there are pending updates to the 3270 screen image. For this type of URL, VIRTEL returns no data, only an HTTP response code. The possible response codes are:
\begin{itemize}
\item {} \begin{description}
\sphinxlineitem{205 (Reset Content)}
\sphinxAtStartPar
The host application has updated the 3270 screen image since the last time it was sent to the user.

\end{description}

\item {} \begin{description}
\sphinxlineitem{304 (Not Modified)}
\sphinxAtStartPar
The host application has not updated the 3270 screen image

\end{description}

\item {} \begin{description}
\sphinxlineitem{404 (Not Found)}
\sphinxAtStartPar
The sessionid code does not represent a valid host session.

\end{description}

\end{itemize}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
When response code 205 is indicated, the JavaScript procedure sends a further request to VIRTEL to retrieve the updated 3270 screen image. This technique can be useful in handling host applications
which use multiple 3270 write commands to paint a single 3270 screen, where the user might otherwise be presented with a partially updated screen. An example of this technique is contained in the
WEB2VIRT.htm page delivered in the VIRTEL sample directory W2H\sphinxhyphen{}DIR.
\end{sphinxadmonition}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{ipaddr}\PYG{p}{:}\PYG{n}{port}\PYG{o}{/}\PYG{n}{pathname}\PYG{o}{/}\PYG{n}{pagename}\PYG{o}{+}\PYG{o}{+}\PYG{n}{ValidateVirtelSession}\PYG{o}{=}\PYG{n}{sessionid}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{ipaddr:port}
\sphinxAtStartPar
Is the address of the HTTP line, as before.

\sphinxlineitem{pathname}
\sphinxAtStartPar
Represents a VIRTEL directory, as described earlier.

\sphinxlineitem{pagename}
\sphinxAtStartPar
May be specified but is not used.

\sphinxlineitem{sessionid}
\sphinxAtStartPar
Is a code which allows VIRTEL to identify the 3270 session whose
status is being queried. The parameter ValidateVirtelSession=sessionid, where sessionid is the associated 3270 session identifier, is generated by the \sphinxstyleemphasis{\{\{\{SESSION\sphinxhyphen{}CODE\}\}\}} tag as in the following example:\sphinxhyphen{}

\end{description}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{check}\PYG{o}{.}\PYG{n}{htm}\PYG{o}{+}\PYG{o}{+}\PYG{n}{Validate}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{SESSION}\PYG{o}{\PYGZhy{}}\PYG{n}{CODE}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
For compatibility with previous versions, the keyword VerifyVirtelSession is also accepted. VerifyVirtelSession is similar to ValidateVirtelSession except that it produces only two possible return codes:
\begin{itemize}
\item {} 
\sphinxAtStartPar
205 (screen updated)

\item {} 
\sphinxAtStartPar
304 (screen not updated or session invalid)

\end{itemize}
\end{sphinxadmonition}

\index{\$UseCookieSessions\$@\spxentry{\$UseCookieSessions\$}!Parameters@\spxentry{Parameters}}\index{Parameters@\spxentry{Parameters}!\$UseCookieSessions\$@\spxentry{\$UseCookieSessions\$}}\ignorespaces 

\subsubsection{\$UseCookieSession\$ parameter}
\label{\detokenize{User_Guide:usecookiesession-parameter}}\label{\detokenize{User_Guide:index-14}}
\sphinxAtStartPar
As an alternative to specifying the VirtelSession parameter in the URL, the SESSION\sphinxhyphen{}CODE may be sent to VIRTEL in a cookie. An example URL is shown below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
http://ipaddr:port/pathname/pagename++\PYGZdl{}UseCookieSession\PYGZdl{}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{ipaddr:port}
\sphinxAtStartPar
Is the address of the HTTP line, as before.

\sphinxlineitem{pathname}
\sphinxAtStartPar
Represents a VIRTEL directory, as described earlier.

\sphinxlineitem{pagename}
\sphinxAtStartPar
Is the name of the template page to be used for displaying the next
3270 screen (usually the same as the current template page).

\sphinxlineitem{\$UseCookieSession\$}
\sphinxAtStartPar
Indicates that the SESSION\sphinxhyphen{}CODE is contained in the VirtelSession cookie.

\end{description}

\sphinxAtStartPar
The VirtelSession cookie should be generated by Javascript as shown in the example below. This function may be added to the custom Javascript script (see {\hyperref[\detokenize{User_Guide:v462ug-customization-javascript-functions}]{\sphinxcrossref{\DUrole{std,std-ref}{“Site customization of Javascript functions”}}}}):

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{*} \PYG{n}{Save} \PYG{n}{VirtelSession} \PYG{n}{cookie} \PYG{n}{after} \PYG{n}{each} \PYG{n}{subpage} \PYG{o+ow}{is} \PYG{n}{loaded} \PYG{o}{*}\PYG{o}{/}
\PYG{n}{function} \PYG{n}{after\PYGZus{}responseHandle}\PYG{p}{(}\PYG{n}{o}\PYG{p}{,} \PYG{n}{url}\PYG{p}{,} \PYG{n}{xtim}\PYG{p}{)} \PYG{p}{\PYGZob{}}
\PYG{n}{var} \PYG{n}{node} \PYG{o}{=} \PYG{n}{document}\PYG{o}{.}\PYG{n}{getElementById}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{sesscode}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{;}
\PYG{k}{if} \PYG{p}{(}\PYG{n}{node}\PYG{p}{)} \PYG{p}{\PYGZob{}}
    \PYG{n}{var} \PYG{n}{text} \PYG{o}{=} \PYG{n}{node}\PYG{o}{.}\PYG{n}{textContent} \PYG{o}{|}\PYG{o}{|} \PYG{n}{node}\PYG{o}{.}\PYG{n}{innerText}\PYG{p}{;}
    \PYG{n}{var} \PYG{n}{sess} \PYG{o}{=} \PYG{n}{text}\PYG{o}{.}\PYG{n}{replace}\PYG{p}{(}\PYG{o}{/}\PYG{o}{\PYGZca{}}\PYG{n}{VirtelSession}\PYG{o}{=}\PYG{o}{/}\PYG{n}{i}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{;}
    \PYG{n}{createCookie}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{VirtelSession}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{sess}\PYG{p}{,} \PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{;}
    \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Figure 1.5 Custom Javascript function to generate a VirtelSession cookie}

\index{Capability URLs@\spxentry{Capability URLs}}\ignorespaces 

\subsection{Capability URLs}
\label{\detokenize{User_Guide:capability-urls}}\label{\detokenize{User_Guide:index-15}}\begin{quote}

\sphinxAtStartPar
A URL may contain a “capability token” generated by another terminal. In this case the URL inherits certain rights or capabilities conferred by the other terminal. The capabilities inherited depend on the parameters specified in the SET\sphinxhyphen{}HEADER tag which generated the capability token. For further details, see {\hyperref[\detokenize{User_Guide:v462ug-capability-tokens}]{\sphinxcrossref{\DUrole{std,std-ref}{“Capability Tokens”}}}}.
\end{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{ipaddr}\PYG{p}{:}\PYG{n}{port}\PYG{o}{/}\PYG{n}{pathname}\PYG{o}{/}\PYG{n}{pagename}\PYG{o}{+}\PYG{n}{tranname}\PYG{o}{+}\PYG{n}{capabilitytoken}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{ipaddr:port}
\sphinxAtStartPar
Is the address of the HTTP line, as before.

\sphinxlineitem{pathname}
\sphinxAtStartPar
Represents a VIRTEL directory, as described earlier.

\sphinxlineitem{pagename}
\sphinxAtStartPar
Is the name of a template page, as before.

\sphinxlineitem{tranname}
\sphinxAtStartPar
(optional) Is the name of the transaction which supplies the dynamic data for the page. If the transaction name is omitted then two “+” signs must separate the pagename from the capabilitytoken.

\sphinxlineitem{capability}
\sphinxAtStartPar
token is a token which grants rights to another terminal’s
resources. This code, whose format is x\sphinxhyphen{}Virtel\sphinxhyphen{}name:token, is
generated by the {\hyperref[\detokenize{User_Guide:v462ug-set-header}]{\sphinxcrossref{\DUrole{std,std-ref}{“\{\{\{SET\sphinxhyphen{}HEADER\}\}\}”}}}} tag.
The code is case\sphinxhyphen{}sensitive and so the capitalization must be exactly
the same as the generated token.

\end{description}
\phantomsection\label{\detokenize{User_Guide:v462ug-cookie-upload}}
\index{Transmission of upload cookie by URL@\spxentry{Transmission of upload cookie by URL}}\ignorespaces 

\subsection{Transmission of Security Tokens by URL}
\label{\detokenize{User_Guide:transmission-of-security-tokens-by-url}}\label{\detokenize{User_Guide:index-16}}
\sphinxAtStartPar
A security code, which identifies a user during a HTTP page upload request, is normally transmitted between the browser and VIRTEL as a cookie (see {\hyperref[\detokenize{User_Guide:v462ug-uploading-html-pages}]{\sphinxcrossref{\DUrole{std,std-ref}{“Uploading HTML Pages”}}}}). If, for security or other reasons, your browser does not allow the use of cookies, then the security code can, as an alternative, be embedded in a URL of the form shown below:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{ipaddr}\PYG{p}{:}\PYG{n}{port}\PYG{o}{/}\PYG{n}{pathname}\PYG{o}{/}\PYG{n}{pagename}\PYG{o}{+}\PYG{n}{tranname}\PYG{o}{+}\PYG{n}{securitycode}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{ipaddr:port}
\sphinxAtStartPar
Is the address of the HTTP line, as before.

\sphinxlineitem{pathname}
\sphinxAtStartPar
Represents a VIRTEL directory, as described earlier.

\sphinxlineitem{pagename}
\sphinxAtStartPar
Is the name of a template page, as before.

\sphinxlineitem{tranname}
\sphinxAtStartPar
Is the name of the transaction which supplies the dynamic data for the page.

\sphinxlineitem{securitycode}
\sphinxAtStartPar
Is the code which allows VIRTEL to identify the user. This code, whose format is VirtelCookie=xxxxxxxxxxxxxxxx, is generated by the “\{\{\{SECURITY\sphinxhyphen{}TOKEN\}\}\}” tag, as shown in the example below:\sphinxhyphen{}

\end{description}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{upload2}\PYG{o}{.}\PYG{n}{htm}\PYG{o}{+}\PYG{n}{upload}\PYG{o}{+}\PYG{n}{VirtelCookie}\PYG{o}{=}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{SECURITY}\PYG{o}{\PYGZhy{}}\PYG{n}{TOKEN}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The following format allows a static page to be displayed:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{ipaddr}\PYG{p}{:}\PYG{n}{port}\PYG{o}{/}\PYG{n}{pathname}\PYG{o}{/}\PYG{n}{pagename}\PYG{o}{+}\PYG{o}{+}\PYG{n}{securitycode}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{ipaddr:port}
\sphinxAtStartPar
Is the address of the HTTP line, as before.

\sphinxlineitem{pathname}
\sphinxAtStartPar
Represents a VIRTEL directory, as described earlier.

\sphinxlineitem{pagename}
\sphinxAtStartPar
Is the name of the page.

\sphinxlineitem{securitycode}
\sphinxAtStartPar
Is a code of format VirtelCookie=xxxxxxxxxxxxxxxx which allows VIRTEL to identify the user, as before.

\sphinxAtStartPar
On receipt of this URL, VIRTEL treats the VirtelCookie= parameter as if it were a cookie transmitted by the browser.

\end{description}
\phantomsection\label{\detokenize{User_Guide:v462ug-signon-propagation}}
\index{Propagation of signon by URL@\spxentry{Propagation of signon by URL}}\ignorespaces 

\subsection{Propagation of signon by URL}
\label{\detokenize{User_Guide:propagation-of-signon-by-url}}\label{\detokenize{User_Guide:index-17}}
\sphinxAtStartPar
A URL embedded in a page sent by VIRTEL may contain a VirtelUserSignon parameter in order to propagate the user’s signon credentials to another page. The value of the parameter is generated by the {\hyperref[\detokenize{User_Guide:v462ug-user-signon-code}]{\sphinxcrossref{\DUrole{std,std-ref}{“(\{\{\{USER\sphinxhyphen{}SIGNON\sphinxhyphen{}CODE\}\}\} tag “}}}}. This can be useful in cases where the browser does not propagate the user name and password from one page to another, for example when using VIRTEL transaction security type 4. The format of a URL containing a signon code is shown below:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{ipaddr}\PYG{p}{:}\PYG{n}{port}\PYG{o}{/}\PYG{n}{pathname}\PYG{o}{/}\PYG{n}{pagename}\PYG{o}{+}\PYG{n}{tranname}\PYG{o}{+}\PYG{n}{VirtelUserSignon}\PYG{o}{=}\PYG{n}{signoncode}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{ipaddr:port}
\sphinxAtStartPar
Is the address of the HTTP line, as before.

\sphinxlineitem{pathname}
\sphinxAtStartPar
Represents a VIRTEL directory, as described earlier.

\sphinxlineitem{pagename}
\sphinxAtStartPar
Is the name of a template page, as before.

\sphinxlineitem{tranname}
\sphinxAtStartPar
Is the name of the transaction which supplies the dynamic data for the page.

\sphinxlineitem{signoncode}
\sphinxAtStartPar
Is a code which allows VIRTEL to identify the signed\sphinxhyphen{}on user. This code is generated by the \sphinxstyleemphasis{\{\{\{USER\sphinxhyphen{}SIGNON\sphinxhyphen{}CODE\}\}\}} tag, as shown in the example below:\sphinxhyphen{}

\end{description}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{web2virt}\PYG{o}{.}\PYG{n}{htm}\PYG{o}{+}\PYG{n}{cics}\PYG{o}{+}\PYG{n}{VirtelUserSignon}\PYG{o}{=}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{USER}\PYG{o}{\PYGZhy{}}\PYG{n}{SIGNON}\PYG{o}{\PYGZhy{}}\PYG{n}{CODE}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\index{Unviversal transaction@\spxentry{Unviversal transaction}}\ignorespaces 

\subsection{The Universal Transaction}
\label{\detokenize{User_Guide:the-universal-transaction}}\label{\detokenize{User_Guide:index-18}}
\sphinxAtStartPar
A transaction may be defined with an external name consisting of an asterisk, and this is considered to be a “universal” transaction. A universal transaction matches any URL not already matched by a preceding transaction in the entry point. This allows VIRTEL to process URLs whose format does not conform to the classic VIRTEL formats previously described.

\newpage


\section{Directory Management}
\label{\detokenize{User_Guide:directory-management}}\label{\detokenize{User_Guide:v462ug-directory-management}}
\index{Directory Management@\spxentry{Directory Management}}\ignorespaces 
\sphinxAtStartPar
HTML and XML template pages and other entities such as CSS stylesheets, JavaScript procedures, and GIF or JPEG images used by VIRTEL Web Access are stored in directories within a VSAM KSDS managed by VIRTEL. Each KSDS defined to VIRTEL can contain one or more directories. The system administrator can upload pages and other elements into a VIRTEL directory by using a web browser or by e\sphinxhyphen{}mail, as described in detail in the section {\hyperref[\detokenize{User_Guide:v462ug-uploading-html-pages}]{\sphinxcrossref{\DUrole{std,std-ref}{“Uploading HTML Pages”}}}}.


\subsection{Accessing the administration application}
\label{\detokenize{User_Guide:accessing-the-administration-application}}
\sphinxAtStartPar
Virtel provides an administrative portal which contains various sub applications used to administer Virtel. The administrative portal can be access either through the 3270 administration application or the HTML GUI portal.


\subsection{Access through 3270}
\label{\detokenize{User_Guide:access-through-3270}}
\sphinxAtStartPar
Access to the 3270 application is through a normal VTAM logon using the VIRTEL APPLID as the application name. For example, from a VTAM screen enter LOGON APPLID=VIRTEL. The following screen will appear:\sphinxhyphen{}

\sphinxAtStartPar
\sphinxincludegraphics{{image113}.png}
\sphinxstyleemphasis{Logon screen for 3270 Administration}

\sphinxAtStartPar
After logging in with security details the main application menu will be presented. Select PF1 from the main menu to access the administration and configuration menu.

\sphinxAtStartPar
\sphinxincludegraphics{{image114}.png}
\sphinxstyleemphasis{Directory sub application}

\sphinxAtStartPar
The directory management sub\sphinxhyphen{}application allows the administrator to define directories. The sub\sphinxhyphen{}application is accessible by {[}PF6{]} from the configuration menu, or by {[}PF12{]} from the system services menu followed by option 3, or from the VIRTEL Multi\sphinxhyphen{}Session menu via a transaction which invokes VIRTEL module VIR0042.


\subsection{Security}
\label{\detokenize{User_Guide:security}}
\sphinxAtStartPar
If security is active, access to the directory management sub\sphinxhyphen{}application from the configuration menu or the system services menu is controlled by resource \$\$PCPC\$\$.

\sphinxAtStartPar
When invoked via a transaction, normal transaction security rules apply.

\sphinxAtStartPar
In addition, each directory is protected by a resource whose name is the same as the directory name. The administrator must have access to this resource in order to view or manage the contents of the    directory, or to upload pages to the directory. When an external security product is used, the resource is defined in the class named by the RNODE parameter in the VIRTCT (see “Parameters of the VIRTCT” in the VIRTEL Installation Guide).

\sphinxAtStartPar
Security management is described in the VIRTEL Security documentation.


\subsection{Creating, modifying, and deleting directories}
\label{\detokenize{User_Guide:creating-modifying-and-deleting-directories}}
\sphinxAtStartPar
When the directory management sub\sphinxhyphen{}application is invoked, it displays a list of the directories already defined in the system:\sphinxhyphen{}

\sphinxAtStartPar
\sphinxincludegraphics{{image71}.png} \sphinxstyleemphasis{Figure 1.6 Directory management summary screen}


\subsubsection{Using the associated Admin(3270) functions}
\label{\detokenize{User_Guide:using-the-associated-admin-3270-functions}}
\sphinxAtStartPar
These functions are accessed from either the browsers Administration portal or by logging on to Virtel using it’s VTAM interface.


\subsubsection{Deleting a directory definition}
\label{\detokenize{User_Guide:deleting-a-directory-definition}}
\sphinxAtStartPar
To delete a directory definition, place the cursor on the name of the directory to be deleted and press {[}PF2{]}. The message CONFIRM DELETE appears at the bottom of the screen. Press {[}PF2{]} again. The message DELETE OK indicates that the deletion of the directory definition was successful. While the message CONFIRM DELETE is displayed, you can press any function key other than {[}PF2{]} to cancel the operation.


\subsubsection{Displaying directory contents}
\label{\detokenize{User_Guide:displaying-directory-contents}}
\sphinxAtStartPar
To display the contents of a directory, place the cursor on the directory name and press {[}PF4{]}. VIRTEL displays the directory contents management screen described below.


\subsubsection{Adding a directory definition}
\label{\detokenize{User_Guide:adding-a-directory-definition}}
\sphinxAtStartPar
To create a new directory definition, place the cursor on the blank line after the last directory, and press {[}PF12{]} to display an empty directory detail screen. Fill in all of the fields and press {[}ENTER{]}. The message CREATION OK indicates that the directory definition was successfully created.


\subsubsection{Scrolling the list of directories}
\label{\detokenize{User_Guide:scrolling-the-list-of-directories}}
\sphinxAtStartPar
To scroll to the top of the list, press {[}PF6{]}. To scroll up or down the list, press {[}PF7{]} or {[}PF8{]}.


\subsubsection{Exiting from directory management}
\label{\detokenize{User_Guide:exiting-from-directory-management}}
\sphinxAtStartPar
To return to the configuration menu, press {[}PF3{]}.


\subsection{Defining directory parameters}
\label{\detokenize{User_Guide:defining-directory-parameters}}
\sphinxAtStartPar
To access the detail screen for any directory, place the cursor on the directory name and press {[}PF12{]}:

\sphinxAtStartPar
\sphinxincludegraphics{{image72}.png} \sphinxstyleemphasis{Directory management detail screen}
\begin{description}
\sphinxlineitem{Name}
\sphinxAtStartPar
The name of the directory as known by VIRTEL. If security is active,
this name must also be defined as a resource to which the user must
be authorized.

\sphinxlineitem{Description}
\sphinxAtStartPar
Comment associated with the directory.

\sphinxlineitem{Type}
\sphinxAtStartPar
\sphinxstylestrong{V} (or blank) indicates that the directory is held in a VSAM
KSDS.

\sphinxlineitem{DD name}
\sphinxAtStartPar
The file name of the VSAM KSDS which contains the directory. This name must be defined in one of the UFILEn parameters in the VIRTCT, and a DD statement with the same name must appear in the VIRTEL
started task JCL.

\sphinxlineitem{Keyword}
\sphinxAtStartPar
This is an 8\sphinxhyphen{}byte key which allows multiple directories to be stored within a single VSAM KSDS. Each directory in a KSDS must have a unique key.

\sphinxlineitem{Size of names}
\sphinxAtStartPar
The maximum length of the names of HTML pages and other elements stored in this directory. The minimum (and default) value is 8. The maximum value is 64.

\sphinxlineitem{Case}
\sphinxAtStartPar
Any non\sphinxhyphen{}blank character in this field indicates that the element names stored in this directory are case sensitive. Blank indicates that the names are not case sensitive.

\sphinxlineitem{Copy up}
\sphinxAtStartPar
This field is used by VIRTEL/PC. For VIRTEL Web Access directories, the value \sphinxstylestrong{X} must be coded.

\sphinxlineitem{Copy down}
\sphinxAtStartPar
This field is used by VIRTEL/PC. For VIRTEL Web Access directories, the value \sphinxstylestrong{X} must be coded.

\sphinxlineitem{Delete}
\sphinxAtStartPar
This field is used by VIRTEL/PC. For VIRTEL Web Access directories, the value \sphinxstylestrong{X} must be coded.

\sphinxAtStartPar
After pressing {[}PF4{]} at the directory management summary screen or detail screen, VIRTEL displays a list of the files in the directory:

\end{description}

\sphinxAtStartPar
\sphinxincludegraphics{{image73}.png} \sphinxstyleemphasis{Figure 1.8 Directory contents management screen}


\subsection{Associated functions}
\label{\detokenize{User_Guide:associated-functions}}
\sphinxAtStartPar
Functions are :\sphinxhyphen{}


\subsubsection{Deleting an element}
\label{\detokenize{User_Guide:deleting-an-element}}
\sphinxAtStartPar
To delete an element from a directory, place the cursor on the name of the element to be deleted and press {[}PF2{]}. The message CONFIRM DELETE appears at the bottom of the screen. Press {[}PF2{]} again. The message DELETE OK indicates that the deletion of the element was successful. While the message CONFIRM DELETE is displayed, you can press any function key other than {[}PF2{]} to cancel the operation.


\subsubsection{Copying an element to another directory}
\label{\detokenize{User_Guide:copying-an-element-to-another-directory}}
\sphinxAtStartPar
To copy an element from directory A to directory B, first display the contents of directory A. In field {[}7{]} type the name of the target directory B, then press {[}ENTER{]}. Next, place the cursor on the name of the element to be copied, then press {[}PF6{]}. The message COPY COMPLETED indicates that the operation was successful. If the element exists in the target directory, the copy fails and the message THIS FILE IS ALREADY IN THE TARGET DIRECTORY is displayed at the bottom of the screen.


\subsubsection{Scrolling the list}
\label{\detokenize{User_Guide:scrolling-the-list}}
\sphinxAtStartPar
The list of elements can be scrolled up and down using {[}PF7{]} and {[}PF8{]}.


\subsubsection{Exiting from directory contents management}
\label{\detokenize{User_Guide:exiting-from-directory-contents-management}}
\sphinxAtStartPar
To return to the list of directories, press {[}PF3{]}.


\subsection{Acccess administration portal via the web}
\label{\detokenize{User_Guide:acccess-administration-portal-via-the-web}}
\sphinxAtStartPar
Access to the HTML GUI Administration portal is through the web using the Administration endpoint. By default this is port 41001. The URL \sphinxurl{http://192.168.129.33:41001} is an example of a URL to access the WEB administration portal. After providing security information the following screen will appear:\sphinxhyphen{}

\sphinxAtStartPar
\sphinxincludegraphics{{image115}.png}
\sphinxstyleemphasis{Logon screen for Web Administration}

\sphinxAtStartPar
Selecting the Admin (HTML) will prompt for a userid and password. After providing security details the following administration portal will appear:\sphinxhyphen{}

\sphinxAtStartPar
\sphinxincludegraphics{{image116}.png}
\sphinxstyleemphasis{Web Administration Portal}
\begin{quote}

\sphinxAtStartPar
Directory administration can be invoked from the Directory link. Selecting a directory will display a content menu proving options to list, edit, delete or create new directories.
\end{quote}

\sphinxAtStartPar
\sphinxincludegraphics{{image117}.png}
\sphinxstyleemphasis{Directory Context Menu}

\sphinxAtStartPar
When selecting a directory, the detail panel will be displayed. The ICONs on the right hand side of the title bar provide actions such as add, update or list.

\sphinxAtStartPar
\sphinxincludegraphics{{image118}.png}
\sphinxstyleemphasis{Directory Detail Display}

\newpage
\phantomsection\label{\detokenize{User_Guide:v462ug-creating-html}}
\index{Virtel template pages@\spxentry{Virtel template pages}}\ignorespaces 

\section{Creating Virtel Template Pages}
\label{\detokenize{User_Guide:creating-virtel-template-pages}}\label{\detokenize{User_Guide:index-20}}
\index{HTML@\spxentry{HTML}!Template pages@\spxentry{Template pages}}\index{Template pages@\spxentry{Template pages}!HTML@\spxentry{HTML}}\index{XML@\spxentry{XML}!Template pages@\spxentry{Template pages}}\index{Template pages@\spxentry{Template pages}!XML@\spxentry{XML}}\ignorespaces 

\subsection{Introduction}
\label{\detokenize{User_Guide:index-21}}\label{\detokenize{User_Guide:id1}}
\sphinxAtStartPar
Template pages are the means by which VIRTEL presents host application data to the user via a web browser. In addition to standard HTML or XML tags, template pages contain VIRTEL\sphinxhyphen{}specific tags enabling integration of information delivered by the mainframe application programs. HTML template pages may contain GIF or JPEG images, sounds, scripts such as JavaScript or any other function or program elements that are compatible with the browser. Template pages may be produced either by hand or by using standard HTML or XML design tools available on the market.

\sphinxAtStartPar
For VWA, users would not be required to produce or modify any template pages as all the necessary template pages are provided by the Virtel product. For VWM or VWI, new pages may be produced by Virtel tools such as Virtel Screen Redesigner to support modernisation or integration projects. Virtel Studio may also introduce new templates to support business logic in Virtel scenarios. Sometimes it may be necessary to modify these pages.

\sphinxAtStartPar
The following sections provide details on Virtel tags.

\index{Virtel tags@\spxentry{Virtel tags}}\ignorespaces 

\subsection{Defining the tag delimiters}
\label{\detokenize{User_Guide:defining-the-tag-delimiters}}\label{\detokenize{User_Guide:index-22}}
\sphinxAtStartPar
VIRTEL\sphinxhyphen{}specific tags are used to insert data originating at the host into an HTML or XML page, and to manage colours and function keys in an HTML page. VIRTEL\sphinxhyphen{}specific tags are identified by special begin and end delimiters. The delimiters themselves are defined by means of a comment placed between the tags \textless{}HEAD\textgreater{} and \textless{}/HEAD\textgreater{} of the HTML page. The actual delimiters may vary from one page to another.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZlt{}!\PYGZhy{}\PYGZhy{}VIRTEL start=\PYGZdq{}\PYGZob{}\PYGZob{}\PYGZob{}\PYGZdq{} end=\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{} \PYGZhy{}\PYGZhy{}\PYGZgt{}
\end{sphinxVerbatim}

\sphinxAtStartPar
In this example, VIRTEL\sphinxhyphen{}specific tags are defined as being represented by a succession of 3 opening braces and terminated by a succession of 3 closing braces. This convention is maintained throughout the remainder of this chapter. A minimum template required for Virtel to work with and display a 3270 application looks something like this:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZlt{}html\PYGZgt{}
    \PYGZlt{}head\PYGZgt{}
        \PYGZlt{}!\PYGZhy{}\PYGZhy{}VIRTEL start=\PYGZdq{}\PYGZob{}\PYGZob{}\PYGZob{}\PYGZdq{} end=\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{} \PYGZhy{}\PYGZhy{}\PYGZgt{}
        \PYGZlt{}meta http\PYGZhy{}equiv=\PYGZdq{}Content\PYGZhy{}Type\PYGZdq{} content=\PYGZdq{}text/html; charset=UTF\PYGZhy{}8\PYGZdq{}\PYGZgt{}
        \PYGZlt{}title\PYGZgt{}Virtel Unplugged \PYGZhy{} Example 1\PYGZlt{}/title\PYGZgt{}
        \PYGZlt{}script\PYGZgt{}
            function SetFocus() \PYGZob{}
            console.log(\PYGZdq{}SetFocus\PYGZdq{});
                    document.virtelForm.\PYGZob{}\PYGZob{}\PYGZob{}FIELD\PYGZhy{}WITH\PYGZhy{}CURSOR\PYGZcb{}\PYGZcb{}\PYGZcb{}.focus();
            \PYGZcb{}

            function SubmitForm(e) \PYGZob{}
            if (e \PYGZam{}\PYGZam{} e.keyCode == 13) \PYGZob{}
            document.virtelForm.submit();
            \PYGZcb{}
            \PYGZcb{}
        \PYGZlt{}/script\PYGZgt{}

    \PYGZlt{}/head\PYGZgt{}
    \PYGZlt{}body onLoad=\PYGZdq{}SetFocus()\PYGZdq{}\PYGZgt{}
        \PYGZlt{}form name=\PYGZdq{}virtelForm\PYGZdq{} action=\PYGZdq{}\PYGZob{}\PYGZob{}\PYGZob{}NAME\PYGZhy{}OF (PAGE)\PYGZcb{}\PYGZcb{}\PYGZcb{}++\PYGZob{}\PYGZob{}\PYGZob{}SESSION\PYGZhy{}CODE\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{} method=\PYGZdq{}POST\PYGZdq{}\PYGZgt{}
            \PYGZlt{}pre\PYGZgt{}
            \PYGZlt{}div id=\PYGZdq{}printReady\PYGZdq{} onkeypress=\PYGZdq{}SubmitForm(event)\PYGZdq{}\PYGZgt{}
            \PYGZob{}\PYGZob{}\PYGZob{} GENERATE\PYGZhy{}HTML (1,1,1920) \PYGZcb{}\PYGZcb{}\PYGZcb{}
            \PYGZlt{}/div\PYGZgt{}
            \PYGZlt{}/pre\PYGZgt{}
            \PYGZob{}\PYGZob{}\PYGZob{}DEFINE\PYGZhy{}HTML\PYGZhy{}FOCUS\PYGZhy{}FIELD \PYGZdq{}FOCUSFIELD\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
            \PYGZlt{}input name=\PYGZdq{}FOCUSFIELD\PYGZdq{} type=\PYGZdq{}HIDDEN\PYGZdq{} value=\PYGZdq{}\PYGZob{}\PYGZob{}\PYGZob{}FIELD\PYGZhy{}WITH\PYGZhy{}CURSOR\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{}\PYGZgt{}
        \PYGZlt{}/form\PYGZgt{}
    \PYGZlt{}/body\PYGZgt{}
\PYGZlt{}/html\PYGZgt{}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Sample Virtel Template}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
See the use of the Virtel tags \{\{\{ \}\}\} within the HTML template. Virtel injects data into these fields before sending the template to the browser.
\end{sphinxadmonition}
\phantomsection\label{\detokenize{User_Guide:v462ug-session-context-mangement}}
\index{Session context management@\spxentry{Session context management}}\ignorespaces 

\subsection{Session and context management}
\label{\detokenize{User_Guide:session-and-context-management}}\label{\detokenize{User_Guide:index-23}}
\sphinxAtStartPar
VIRTEL uses the concept of a session code to maintain the context between a client using a browser and the host application to which the client is connected. This code allows VIRTEL to identify the client and to associate the client with a session already established with a host application.

\index{SESSION\sphinxhyphen{}CODE@\spxentry{SESSION\sphinxhyphen{}CODE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!SESSION\sphinxhyphen{}CODE@\spxentry{SESSION\sphinxhyphen{}CODE}}\ignorespaces 

\subsubsection{SESSION\sphinxhyphen{}CODE tag}
\label{\detokenize{User_Guide:session-code-tag}}\label{\detokenize{User_Guide:index-24}}
\sphinxAtStartPar
The SESSION\sphinxhyphen{}CODE tag is used to create the URL associated with form submission.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{SESSION}\PYG{o}{\PYGZhy{}}\PYG{n}{CODE} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The SESSION\sphinxhyphen{}CODE tag allows a session code to be inserted in the template page in the format VirtelSession=xxxxxxxxxxxxxxxx. The value of the session code changes after each message. For examples of its use, see {\hyperref[\detokenize{User_Guide:v462ug-transmitting-data}]{\sphinxcrossref{\DUrole{std,std-ref}{“Transmitting Data To The Host”}}}}, and {\hyperref[\detokenize{User_Guide:v462ug-printing}]{\sphinxcrossref{\DUrole{std,std-ref}{“3287 Printing”}}}}.

\index{AJAX\sphinxhyphen{}SESSION\sphinxhyphen{}CODE@\spxentry{AJAX\sphinxhyphen{}SESSION\sphinxhyphen{}CODE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!AJAX\sphinxhyphen{}SESSION\sphinxhyphen{}CODE@\spxentry{AJAX\sphinxhyphen{}SESSION\sphinxhyphen{}CODE}}\ignorespaces 

\subsubsection{AJAX\sphinxhyphen{}SESSION\sphinxhyphen{}CODE tag}
\label{\detokenize{User_Guide:ajax-session-code-tag}}\label{\detokenize{User_Guide:index-25}}
\sphinxAtStartPar
The AJAX\sphinxhyphen{}SESSION\sphinxhyphen{}CODE tag is similar to the SESSION\sphinxhyphen{}CODE tag, but it generates the code in a different format which does not change with each request. This is useful when implementing an AJAX dialog between the application and the browser. For this type of application, it is not always possible to transmit the VIRTEL session code to the browser, especially if a Javascript library is used.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{AJAX}\PYG{o}{\PYGZhy{}}\PYG{n}{SESSION}\PYG{o}{\PYGZhy{}}\PYG{n}{CODE} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The AJAX\sphinxhyphen{}SESSION\sphinxhyphen{}CODE tag allows a session code to be inserted in the template page in the format AjaxSession=xxxxxxxxxxxxxxxx. For example:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{result}\PYG{o}{.}\PYG{n}{txt}\PYG{o}{+}\PYG{n}{cics}\PYG{o}{+}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{AJAX}\PYG{o}{\PYGZhy{}}\PYG{n}{SESSION}\PYG{o}{\PYGZhy{}}\PYG{n}{CODE} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\index{SET\sphinxhyphen{}INITIAL\sphinxhyphen{}TIMEOUT@\spxentry{SET\sphinxhyphen{}INITIAL\sphinxhyphen{}TIMEOUT}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!SET\sphinxhyphen{}INITIAL\sphinxhyphen{}TIMEOUT@\spxentry{SET\sphinxhyphen{}INITIAL\sphinxhyphen{}TIMEOUT}}\ignorespaces 

\subsubsection{SET\sphinxhyphen{}INITIAL\sphinxhyphen{}TIMEOUT tag}
\label{\detokenize{User_Guide:set-initial-timeout-tag}}\label{\detokenize{User_Guide:index-26}}
\sphinxAtStartPar
The SET\sphinxhyphen{}INITIAL\sphinxhyphen{}TIMEOUT tag allows a timeout to be started when VIRTEL builds the page.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{SET}\PYG{o}{\PYGZhy{}}\PYG{n}{INITIAL}\PYG{o}{\PYGZhy{}}\PYG{n}{TIMEOUT} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{n}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
For example, if the instruction

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{SET}\PYG{o}{\PYGZhy{}}\PYG{n}{INITIAL}\PYG{o}{\PYGZhy{}}\PYG{n}{TIMEOUT} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{10}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
is coded in a page or a sub\sphinxhyphen{}page, then VIRTEL will cancel the session if the workstation has not sent another request after 10 seconds.

\phantomsection\label{\detokenize{User_Guide:v462ug-transmitting-data}}
\index{Transmitting data@\spxentry{Transmitting data}}\index{SESSION\sphinxhyphen{}CODE@\spxentry{SESSION\sphinxhyphen{}CODE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!SESSION\sphinxhyphen{}CODE@\spxentry{SESSION\sphinxhyphen{}CODE}}\ignorespaces 

\subsection{Transmitting data to the host}
\label{\detokenize{User_Guide:transmitting-data-to-the-host}}\label{\detokenize{User_Guide:index-27}}
\sphinxAtStartPar
Transmission of data to the host uses the principle of sending an HTML form. In conjunction with the SESSION\sphinxhyphen{}CODE tag, the form allows the transmission of input fields to the host application, and the display of the subsequent application screen.

\sphinxAtStartPar
The form is defined as follows:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZlt{}}\PYG{n}{form} \PYG{n}{name}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{FormName}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{action}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{VirtelURL}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{method}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{get}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}
    \PYG{n}{Data} \PYG{n}{which} \PYG{n}{will} \PYG{n}{be} \PYG{n}{transmitted} \PYG{n}{to} \PYG{n}{the} \PYG{n}{HTTP} \PYG{n}{server}
\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{form}\PYG{o}{\PYGZgt{}}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{name}
\sphinxAtStartPar
Form name. The name of the form is used in JavaScript procedures to refer to various elements of the form. For an example, see the section {\hyperref[\detokenize{User_Guide:v462ug-cursor-management}]{\sphinxcrossref{\DUrole{std,std-ref}{“Cursor management”}}}}.

\sphinxlineitem{action}
\sphinxAtStartPar
URL transmitted to the server, in the following format:

\end{description}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{action}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pagename++}\PYG{l+s+s2}{\PYGZob{}\PYGZob{}}\PYG{l+s+s2}{\PYGZob{}}\PYG{l+s+s2}{SESSION\PYGZhy{}CODE\PYGZcb{}\PYGZcb{}\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{pagename}
\sphinxAtStartPar
Is the name of the template page to be used to display the subsequent screen sent by the host application (usually the same as the current template page)

\sphinxlineitem{SESSION\sphinxhyphen{}CODE}
\sphinxAtStartPar
Identifies the session established with the host application

\sphinxlineitem{method}
\sphinxAtStartPar
Transmission mode. Always POST.

\end{description}

\sphinxAtStartPar
Example :

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZlt{}}\PYG{n}{form} \PYG{n}{name}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Virtel}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{action}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{WEB2VIRT.htm++}\PYG{l+s+s2}{\PYGZob{}\PYGZob{}}\PYG{l+s+s2}{\PYGZob{}}\PYG{l+s+s2}{SESSION\PYGZhy{}CODE\PYGZcb{}\PYGZcb{}\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{method}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{post}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}
\end{sphinxVerbatim}


\subsection{Where to position the elements of an HTML page}
\label{\detokenize{User_Guide:where-to-position-the-elements-of-an-html-page}}
\sphinxAtStartPar
By design, an HTML page starts with the \textless{}HTML\textgreater{} tag and is terminated by the \textless{}/HTML\textgreater{} tag. In order to be able to be correctly interpreted by the browser, other tags are necessary, for example \textless{}HEAD\textgreater{} and \textless{}/HEAD\textgreater{} as well as \textless{}BODY\textgreater{} and \textless{}/BODY\textgreater{}. All other tags are optional.

\sphinxAtStartPar
As shown previously, data transmitted to the HTTP server by the client is itself placed in between the tag fields \textless{}FORM\textgreater{} and \textless{}/FORM\textgreater{}. In order to minimise traffic, it is also advisable to place only useful data in the tag fields for example, generated fields or copies resulting from GENERATE\sphinxhyphen{}HTML and COPY\sphinxhyphen{}FROM tags, as well as indispensable fields such as focusField and pfkField. Other data may be placed anywhere in the area of the HTML page, provided that their position conforms to the standards. The following presents a \index{Sample@\spxentry{Sample}!Template pages@\spxentry{Template pages}}\index{Template pages@\spxentry{Template pages}!Sample@\spxentry{Sample}}template structure example.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZlt{}HTML\PYGZgt{}
\PYGZlt{}HEAD\PYGZgt{}\PYGZlt{}!\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} start of HTML page header    \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZgt{}
\PYGZlt{}style\PYGZgt{}
\PYGZlt{}!\PYGZhy{}\PYGZhy{} définition des classes de style
    .GREEN \PYGZob{}font\PYGZhy{}family: monospace; background: \PYGZsh{}000000; color: \PYGZsh{}00FF00; \PYGZcb{}
//\PYGZhy{}\PYGZhy{}\PYGZgt{}\PYGZlt{}/style\PYGZgt{}
\PYGZlt{}!\PYGZhy{}\PYGZhy{}VIRTEL start=\PYGZdq{}\PYGZob{}\PYGZob{}\PYGZob{}\PYGZdq{} end=\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{} \PYGZhy{}\PYGZhy{}\PYGZgt{}
\PYGZob{}\PYGZob{}\PYGZob{}ON\PYGZhy{}ATTRIBUTE (PROTECTED,WHITE)\PYGZlt{}font color=white\PYGZgt{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZob{}\PYGZob{}\PYGZob{}ON\PYGZhy{}END\PYGZhy{}OF\PYGZhy{}ATTRIBUTE (PROTECTED,WHITE)\PYGZlt{}/font\PYGZgt{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZob{}\PYGZob{}\PYGZob{}ADD\PYGZhy{}TO\PYGZhy{}FIELDS (NORMAL,NOCOLOR) class=\PYGZdq{}GREEN\PYGZdq{} \PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZob{}\PYGZob{}\PYGZob{}DEFINE\PYGZhy{}HTML\PYGZhy{}PFKEY \PYGZdq{}PFKFIELD\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZob{}\PYGZob{}\PYGZob{}DEFINE\PYGZhy{}HTML\PYGZhy{}FOCUS\PYGZhy{}FIELD \PYGZdq{}FOCUSFIELD\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZlt{}title\PYGZgt{}Sample HTML page\PYGZlt{}/title\PYGZgt{}
\PYGZlt{}/HEAD\PYGZgt{}\PYGZlt{}!\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} end of HTML page header    \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZgt{}

\PYGZlt{}script language=\PYGZdq{}JavaScript\PYGZdq{}\PYGZgt{}\PYGZlt{}!\PYGZhy{}\PYGZhy{} function SetFocus()
    \PYGZob{} document.virtelForm.\PYGZob{}\PYGZob{}\PYGZob{}FIELD\PYGZhy{}WITH\PYGZhy{}CURSOR\PYGZcb{}\PYGZcb{}\PYGZcb{}.focus(); \PYGZcb{} function
SaveFocus(CurrentFieldName)
    \PYGZob{} document.virtelForm.FOCUSFIELD.value = CurrentFieldName; \PYGZcb{}
function SubmitForm(valeur)
    \PYGZob{} document.virtelForm.PFKFIELD.value = valeur;
      document.virtelForm.submit(); \PYGZcb{}
function ShowPopup()
    \PYGZob{} var popup =
        window.open(\PYGZdq{}\PYGZdq{},\PYGZdq{}PopupImpression\PYGZdq{},\PYGZsq{}width=614,height=129\PYGZsq{});
        popup.location = \PYGZdq{}imprim.htm++Print\PYGZob{}\PYGZob{}\PYGZob{}SESSION\PYGZhy{}CODE\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{}; \PYGZcb{}    \PYGZhy{}\PYGZhy{}\PYGZgt{}\PYGZlt{}/script\PYGZgt{}

\PYGZlt{}!\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} start of HTML page body    \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZgt{}
\PYGZlt{}BODY onLoad=\PYGZdq{}SetFocus()\PYGZdq{}\PYGZgt{}
\PYGZlt{}!\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} start of HTML form    \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZgt{}
\PYGZlt{}FORM name=\PYGZdq{}virtelForm\PYGZdq{}
    action=\PYGZdq{}example.html++\PYGZob{}\PYGZob{}\PYGZob{}SESSION\PYGZhy{}CODE\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{}
    method==\PYGZdq{}POST\PYGZdq{}\PYGZgt{}

\PYGZob{}\PYGZob{}\PYGZob{} GENERATE\PYGZhy{}HTML (1,1,1920) \PYGZcb{}\PYGZcb{}\PYGZcb{}

\PYGZlt{}input name=\PYGZdq{}PFKFIELD\PYGZdq{} type=\PYGZdq{}HIDDEN\PYGZdq{} value=\PYGZdq{}\PYGZdq{}\PYGZgt{}
\PYGZlt{}input name=\PYGZdq{}FOCUSFIELD\PYGZdq{} type=\PYGZdq{}HIDDEN\PYGZdq{} value=\PYGZdq{}\PYGZob{}\PYGZob{}\PYGZob{}FIELD\PYGZhy{}WITH\PYGZhy{}CURSOR\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{}\PYGZgt{}
\PYGZlt{}/FORM\PYGZgt{}
\PYGZlt{}!\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} end of HTML form    \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZgt{}

\PYGZlt{}!—\PYGZhy{}Place submit buttons and hypertext links here. For example:\PYGZhy{}\PYGZhy{}\PYGZgt{}
\PYGZlt{}a href=\PYGZdq{}Javascript:submitform(\PYGZsq{}PF1\PYGZsq{})\PYGZdq{} \PYGZgt{}soumettre avec PF01\PYGZlt{}/a\PYGZgt{}
\PYGZlt{}INPUT TYPE=\PYGZdq{}BUTTON\PYGZdq{} size=\PYGZdq{}5\PYGZdq{} onclick=\PYGZdq{}SubmitForm(this.value)\PYGZdq{}    value=\PYGZdq{}PF01\PYGZdq{}\PYGZgt{}
\PYGZlt{}script language=\PYGZdq{}JavaScript\PYGZdq{}\PYGZgt{}\PYGZlt{}!\PYGZhy{}\PYGZhy{}    \PYGZob{}\PYGZob{}\PYGZob{}IF\PYGZhy{}PRINT\PYGZhy{}IS\PYGZhy{}READY
    ShowPopUp();
\PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZhy{}\PYGZhy{}\PYGZgt{}\PYGZlt{}/script\PYGZgt{}
\PYGZlt{}/BODY\PYGZgt{}\PYGZlt{}!\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} end of HTML page body    \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZgt{}
\PYGZlt{}/HTML\PYGZgt{}
\end{sphinxVerbatim}

\sphinxAtStartPar
For a full example, see the WEB2VIRT.htm page delivered with VIRTEL.

\phantomsection\label{\detokenize{User_Guide:v462ug-inserting-host-data}}
\index{Inserting host data into a template page@\spxentry{Inserting host data into a template page}}\index{Inserting host data@\spxentry{Inserting host data}!Template pages@\spxentry{Template pages}}\index{Template pages@\spxentry{Template pages}!Inserting host data@\spxentry{Inserting host data}}\ignorespaces 

\subsection{Inserting host application data into a page}
\label{\detokenize{User_Guide:inserting-host-application-data-into-a-page}}\label{\detokenize{User_Guide:index-29}}
\sphinxAtStartPar
Insertion of host application data in an HTML or XML page is achieved with the GENERATE\sphinxhyphen{}HTML and COPY\sphinxhyphen{}FROM tags.

\index{GENERATE\sphinxhyphen{}HTML@\spxentry{GENERATE\sphinxhyphen{}HTML}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!GENERATE\sphinxhyphen{}HTML@\spxentry{GENERATE\sphinxhyphen{}HTML}}\ignorespaces 

\subsubsection{GENERATE\sphinxhyphen{}HTML tag}
\label{\detokenize{User_Guide:generate-html-tag}}\label{\detokenize{User_Guide:index-30}}
\sphinxAtStartPar
The GENERATE\sphinxhyphen{}HTML tag instructs VIRTEL to convert all or part of the 3270 screen into HTML form data. Output fields are converted into text, while input fields are converted into HTML input statements.     The generated text and input fields are aligned so as to correspond as far as possible with the layout of the original 3270 screen. The resulting generation takes account of the nature of the data as well     as the information specified in the ON\sphinxhyphen{}ATTRIBUTE, ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}ATTRIBUTE and ADD\sphinxhyphen{}TO\sphinxhyphen{}FIELDS tags.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{GENERATE}\PYG{o}{\PYGZhy{}}\PYG{n}{HTML} \PYG{p}{(}\PYG{n}{row}\PYG{p}{,} \PYG{n}{col}\PYG{p}{,} \PYG{n+nb}{len}\PYG{p}{)} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{row,col}
\sphinxAtStartPar
Starting position (row and column number on the 3270 screen) of the
data to be copied. This starting position will usually contain a
3270 attribute character.

\sphinxlineitem{len}
\sphinxAtStartPar
Length of the data to be copied (including attribute characters).

\end{description}

\sphinxAtStartPar
For example, the command \sphinxstyleemphasis{\{\{\{ GENERATE\sphinxhyphen{}HTML (01,01,1920) \}\}\}} will  generate the total contents of the 3270 screen.

\sphinxAtStartPar
An alternative form of the GENERATE\sphinxhyphen{}HTML tag allows the position and length to be specified by means of a symbolic name defined in a previous DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}NAME or DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}COLUMN tag (see {\hyperref[\detokenize{User_Guide:v462ug-define-dfhmdf-column}]{\sphinxcrossref{\DUrole{std,std-ref}{“\{\{\{DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}COLUMN\}\}\}”}}}}.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{GENERATE}\PYG{o}{\PYGZhy{}}\PYG{n}{HTML} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{name}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{name}
\sphinxAtStartPar
symbolic name defined in a previous DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}NAME or
DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}COLUMN tag.

\end{description}

\index{COPY\sphinxhyphen{}FROM@\spxentry{COPY\sphinxhyphen{}FROM}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!COPY\sphinxhyphen{}FROM@\spxentry{COPY\sphinxhyphen{}FROM}}\ignorespaces 

\subsubsection{COPY\sphinxhyphen{}FROM tag}
\label{\detokenize{User_Guide:copy-from-tag}}\label{\detokenize{User_Guide:index-31}}\begin{quote}

\sphinxAtStartPar
The COPY\sphinxhyphen{}FROM tag copies data into the HTML page from a specific
location on the 3270 screen. Unlike the GENERATE\sphinxhyphen{}HTML tag, the
COPY\sphinxhyphen{}FROM tag copies only the data and does not process any
associated 3270 field attributes.
\end{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{COPY}\PYG{o}{\PYGZhy{}}\PYG{n}{FROM} \PYG{p}{(}\PYG{n}{row}\PYG{p}{,} \PYG{n}{col}\PYG{p}{,} \PYG{n+nb}{len}\PYG{p}{)} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{row,col}
\sphinxAtStartPar
Starting position (row and column number on the 3270 screen) of the
data to be copied. This will typically be the first character after
the attribute character which defines the start of the field.

\sphinxlineitem{len}
\sphinxAtStartPar
Length of the data to be copied.

\end{description}

\sphinxAtStartPar
An alternative form of the COPY\sphinxhyphen{}FROM tag allows the position and length to be specified by means of a symbolic name defined in a previous DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}NAME or DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}COLUMN tag (described 37).

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{COPY}\PYG{o}{\PYGZhy{}}\PYG{n}{FROM} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{name}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{name}
\sphinxAtStartPar
symbolic name defined in a previous DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}NAME or DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}COLUMN tag.

\sphinxAtStartPar
Normally, any binary zeroes in the copied data will be removed. However, if the BLANK\sphinxhyphen{}BINARY\sphinxhyphen{}ZEROES option is set (see {\hyperref[\detokenize{User_Guide:v462ug-setting-local-options}]{\sphinxcrossref{\DUrole{std,std-ref}{“Setting and unsetting local options”}}}}) then binary zeroes will be converted to blanks.

\end{description}
\phantomsection\label{\detokenize{User_Guide:v462ug-create-variable-from}}
\index{CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}FROM@\spxentry{CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}FROM}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}FROM@\spxentry{CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}FROM}}\ignorespaces 

\subsubsection{CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}FROM tag}
\label{\detokenize{User_Guide:create-variable-from-tag}}\label{\detokenize{User_Guide:index-32}}
\sphinxAtStartPar
The CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}FROM tag copies data from the 3270 screen into a VIRTEL variable. There are several formats of the COPY\sphinxhyphen{}VARIABLE\sphinxhyphen{}FROM tag, as described below.

\sphinxAtStartPar
In the first form of CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}FROM, the name of a variable is specified within the tag. Data is extracted from the indicated location on the screen, continuing until an attribute character is found or until the specified length is reached. Any non\sphinxhyphen{}alphanumeric characters are removed, all alphabetic characters are converted to upper case, and the resulting data is copied into the variable. If the variable does not exist, it will be created. If the variable already exists, the new value will be appended to any existing values.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{CREATE}\PYG{o}{\PYGZhy{}}\PYG{n}{VARIABLE}\PYG{o}{\PYGZhy{}}\PYG{n}{FROM} \PYG{p}{(}\PYG{n}{row}\PYG{p}{,} \PYG{n}{col}\PYG{p}{,} \PYG{n+nb}{len}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{varname}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{row,col}
\sphinxAtStartPar
Starting position (row and column number on the 3270 screen) of the
data to be copied. This will typically be the first character after
an attribute character which defines the start of a field.

\sphinxlineitem{len}
\sphinxAtStartPar
Length of the data to be copied.

\sphinxlineitem{varname}\begin{quote}

\sphinxAtStartPar
The name of the variable to be created
\end{quote}

\sphinxAtStartPar
The second form of CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}FROM is distinguished by the absence of a variable name within the tag. In this case, the variable name is obtained from the 3270 screen. Data is extracted from the indicated location on the screen, continuing until an attribute character is found or until the specified length is reached. Any non\sphinxhyphen{}alphanumeric characters are removed, all alphabetic characters are converted to upper case, and the resulting string is used as a variable name. If the variable does not exist, it will be created. If the variable already exists, a new value will be appended to any existing values. If the variable name was terminated by an attribute character, then the data in the following field is used as the value of the variable. Otherwise the string “EMPTY” will
be used as the value of the variable.

\end{description}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{CREATE}\PYG{o}{\PYGZhy{}}\PYG{n}{VARIABLE}\PYG{o}{\PYGZhy{}}\PYG{n}{FROM} \PYG{p}{(}\PYG{n}{row}\PYG{p}{,} \PYG{n}{col}\PYG{p}{,} \PYG{n+nb}{len}\PYG{p}{)} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{row,col}
\sphinxAtStartPar
Line and column number on the 3270 screen containing the variable name.

\sphinxlineitem{len}
\sphinxAtStartPar
Total length of the variable name and value to be copied.

\end{description}

\sphinxAtStartPar
The third form of CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}FROM allows a rectangle to be copied from the screen. With a fourth sub\sphinxhyphen{} parameter specified, the instruction will not stop collecting data after encountering an     attribute, but will continue adding values to the variable for the specified height on the screen. Any attributes found in the rectangle will be copied as blanks. If the variable does not exist, it will be
created. If the variable already exists, the new values will be appended to any existing values.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{CREATE}\PYG{o}{\PYGZhy{}}\PYG{n}{VARIABLE}\PYG{o}{\PYGZhy{}}\PYG{n}{FROM} \PYG{p}{(}\PYG{n}{row}\PYG{p}{,} \PYG{n}{col}\PYG{p}{,} \PYG{n}{width}\PYG{p}{,} \PYG{n}{height}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{varname}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{row,col}
\sphinxAtStartPar
Starting position (row and column number on the 3270 screen) of the
data to be copied.

\sphinxlineitem{width,height}
\sphinxAtStartPar
Size (in columns and rows) of the rectangle to be copied.

\sphinxlineitem{varname}
\sphinxAtStartPar
The name of the variable to be created

\end{description}

\index{DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}FIELD\sphinxhyphen{}NAME@\spxentry{DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}FIELD\sphinxhyphen{}NAME}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}FIELD\sphinxhyphen{}NAME@\spxentry{DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}FIELD\sphinxhyphen{}NAME}}\ignorespaces 

\subsubsection{DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}FIELD\sphinxhyphen{}NAME tag}
\label{\detokenize{User_Guide:define-html-field-name-tag}}\label{\detokenize{User_Guide:index-33}}
\sphinxAtStartPar
The DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}FIELD\sphinxhyphen{}NAME tag requests that VIRTEL should use a specific HTML input field name for the specified
3270 field, instead of an automatically generated name. The DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}FIELD\sphinxhyphen{}NAME tag may be followed by a
GENERATE\sphinxhyphen{}HTML tag, in which case VIRTEL will generate an HTML input field with the specified name, or the input
field may be explicitly coded in the page template, in which case VIRTEL will use the name to associate the HTML input
field with the 3270 field at the specified position. Normally this tag is not needed because the automatically generated
field names are adequate for all except certain specialised applications.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{DEFINE}\PYG{o}{\PYGZhy{}}\PYG{n}{HTML}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELD}\PYG{o}{\PYGZhy{}}\PYG{n}{NAME} \PYG{p}{(}\PYG{n}{row}\PYG{p}{,} \PYG{n}{col}\PYG{p}{,} \PYG{n+nb}{len}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{row,col}
\sphinxAtStartPar
Line and column number of the start of the field on the 3270 screen. This must be the first character after the attribute character.

\sphinxlineitem{len}
\sphinxAtStartPar
Length of the input field (excluding attribute character).

\sphinxlineitem{name}
\sphinxAtStartPar
Name to be associated with the HTML input field.

\end{description}

\index{DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}FIELD@\spxentry{DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}FIELD}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}FIELD@\spxentry{DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}FIELD}}\ignorespaces 

\subsubsection{DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}FIELD tag}
\label{\detokenize{User_Guide:define-html-field-tag}}\label{\detokenize{User_Guide:index-34}}
\sphinxAtStartPar
The DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}FIELD tag is equivalent to a DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}FIELD\sphinxhyphen{}NAME tag followed by a GENERATE\sphinxhyphen{}HTML tag.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{DEFINE}\PYG{o}{\PYGZhy{}}\PYG{n}{HTML}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELD} \PYG{p}{(}\PYG{n}{row}\PYG{p}{,} \PYG{n}{col}\PYG{p}{,} \PYG{n+nb}{len}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{row,col}
\sphinxAtStartPar
Line and column number of the start of the field on the 3270 screen.
This must be the first character after the attribute character.

\sphinxlineitem{len}
\sphinxAtStartPar
Length of the input field (excluding attribute character).

\sphinxlineitem{name}
\sphinxAtStartPar
Name to be associated with the HTML input field.

\end{description}

\index{DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}NAME@\spxentry{DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}NAME}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}NAME@\spxentry{DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}NAME}}\ignorespaces 

\subsubsection{DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}NAME tag}
\label{\detokenize{User_Guide:define-dfhmdf-name-tag}}\label{\detokenize{User_Guide:index-35}}
\sphinxAtStartPar
The DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}NAME tag allows a field on the 3270 screen to be given a symbolic name which can be used in a
subsequent GENERATE\sphinxhyphen{}HTML tag or COPY\sphinxhyphen{}FROM tag.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{DEFINE}\PYG{o}{\PYGZhy{}}\PYG{n}{DFHMDF}\PYG{o}{\PYGZhy{}}\PYG{n}{NAME} \PYG{p}{(}\PYG{n}{row}\PYG{p}{,} \PYG{n}{col}\PYG{p}{,} \PYG{n+nb}{len}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{row,col}
\sphinxAtStartPar
Position (row and column number on the 3270 screen) of the attribute character which precedes the field on the 3270 screen.

\sphinxlineitem{len}
\sphinxAtStartPar
Length of the 3270 field (excluding attribute character).

\sphinxlineitem{name}
\sphinxAtStartPar
Name to be associated with the field.

\end{description}

\sphinxAtStartPar
The name specified by the DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}NAME tag can then be used in subsequent GENERATE\sphinxhyphen{}HTML tags or COPYFROM tags, instead of specifying an explicit row, column, and length. In addition, the DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}NAME tag generates an implicit DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}FIELD\sphinxhyphen{}NAME tag.

\sphinxAtStartPar
For example, the following tag defines a 10\sphinxhyphen{}character input field having attribute byte at row 1 column 59. The field  itself occupies row 1 columns 60 to 69:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{DEFINE}\PYG{o}{\PYGZhy{}}\PYG{n}{DFHMDF}\PYG{o}{\PYGZhy{}}\PYG{n}{NAME} \PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{59}\PYG{p}{,}\PYG{l+m+mi}{10}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{XDAT10}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Subsequently:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{GENERATE}\PYG{o}{\PYGZhy{}}\PYG{n}{HTML} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{XDAT10}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
is interpreted as:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{GENERATE}\PYG{o}{\PYGZhy{}}\PYG{n}{HTML} \PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{59}\PYG{p}{,}\PYG{l+m+mi}{11}\PYG{p}{)} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
and

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{COPY}\PYG{o}{\PYGZhy{}}\PYG{n}{FROM} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{XDAT10}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
is interpreted as:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{COPY}\PYG{o}{\PYGZhy{}}\PYG{n}{FROM} \PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{60}\PYG{p}{,}\PYG{l+m+mi}{10}\PYG{p}{)} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
and the following tag will be automatically generated:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{DEFINE}\PYG{o}{\PYGZhy{}}\PYG{n}{HTML}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELD}\PYG{o}{\PYGZhy{}}\PYG{n}{NAME} \PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{60}\PYG{p}{,}\PYG{l+m+mi}{10}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{XDAT10}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Notice that VIRTEL automatically adjusts the starting position and length as necessary to account for the attribute byte.

\phantomsection\label{\detokenize{User_Guide:v462ug-define-dfhmdf-column}}
\index{DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}COLUMN@\spxentry{DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}COLUMN}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}COLUMN@\spxentry{DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}COLUMN}}\ignorespaces 

\subsubsection{DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}COLUMN tag}
\label{\detokenize{User_Guide:define-dfhmdf-column-tag}}\label{\detokenize{User_Guide:index-36}}
\sphinxAtStartPar
The DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}COLUMN tag is similar to the DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}NAME tag except that it allows the definition of a field which is repeated in the same column position on several consecutive lines of the screen.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{DEFINE}\PYG{o}{\PYGZhy{}}\PYG{n}{DFHMDF}\PYG{o}{\PYGZhy{}}\PYG{n}{COLUMN} \PYG{p}{(}\PYG{n}{row}\PYG{p}{,} \PYG{n}{col}\PYG{p}{,} \PYG{n+nb}{len}\PYG{p}{,} \PYG{n}{ht}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{row,col}
\sphinxAtStartPar
Position (row and column number on the 3270 screen) of the attribute character which precedes the first occurrence of the field on the 3270 screen.

\sphinxlineitem{len}
\sphinxAtStartPar
Length of each 3270 field (excluding attribute character).

\sphinxlineitem{ht}
\sphinxAtStartPar
Height of column (number of lines).

\sphinxlineitem{name}
\sphinxAtStartPar
Name to be associated with the field.

\end{description}

\sphinxAtStartPar
The name specified by the DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}COLUMN tag can be used in subsequent GENERATE\sphinxhyphen{}HTML tags or COPYFROM tags instead of specifying an explicit row, column, and length. The first time the field name is referenced in a GENERATE\sphinxhyphen{}HTML or COPY\sphinxhyphen{}FROM tag, the first occurrence of the field will be used. Each time the field name is referenced subsequently, the row number is incremented automatically. After the end of the series is reached, any subsequent reference wraps back to the first row number. In addition, the DEFINE\sphinxhyphen{}DFHMDF\sphinxhyphen{}COLUMN tag implicitly generates a series of DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}FIELD\sphinxhyphen{}NAME tags, each of which contains the field name suffixed by \_1, \_2, etc.

\sphinxAtStartPar
For example, the following tag defines a column of 5\sphinxhyphen{}character input fields having attribute bytes in column 1. The fields themselves occupy columns 2 to 6. The first field is in row 9 and there are 12 occurrences:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{DEFINE}\PYG{o}{\PYGZhy{}}\PYG{n}{DFHMDF}\PYG{o}{\PYGZhy{}}\PYG{n}{COLUMN} \PYG{p}{(}\PYG{l+m+mi}{9}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{5}\PYG{p}{,}\PYG{l+m+mi}{12}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{NBLIGN}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Subsequently:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{GENERATE}\PYG{o}{\PYGZhy{}}\PYG{n}{HTML} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{NBLIGN}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
is interpreted as:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{GENERATE}\PYG{o}{\PYGZhy{}}\PYG{n}{HTML} \PYG{p}{(}\PYG{n}{n}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{6}\PYG{p}{)} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
and

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{COPY}\PYG{o}{\PYGZhy{}}\PYG{n}{FROM} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{NBLIGN}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
is interpreted as:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{COPY}\PYG{o}{\PYGZhy{}}\PYG{n}{FROM} \PYG{p}{(}\PYG{n}{n}\PYG{p}{,}\PYG{l+m+mi}{2}\PYG{p}{,}\PYG{l+m+mi}{5}\PYG{p}{)} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
where n takes the next value in the range 9 to 20. The following tags will be automatically generated:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{DEFINE}\PYG{o}{\PYGZhy{}}\PYG{n}{HTML}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELD}\PYG{o}{\PYGZhy{}}\PYG{n}{NAME} \PYG{p}{(}\PYG{l+m+mi}{9}\PYG{p}{,}\PYG{l+m+mi}{2}\PYG{p}{,}\PYG{l+m+mi}{5}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{NBLIGN\PYGZus{}1}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{DEFINE}\PYG{o}{\PYGZhy{}}\PYG{n}{HTML}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELD}\PYG{o}{\PYGZhy{}}\PYG{n}{NAME} \PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{,}\PYG{l+m+mi}{2}\PYG{p}{,}\PYG{l+m+mi}{5}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{NBLIGN\PYGZus{}2}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
and so on until:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{DEFINE}\PYG{o}{\PYGZhy{}}\PYG{n}{HTML}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELD}\PYG{o}{\PYGZhy{}}\PYG{n}{NAME} \PYG{p}{(}\PYG{l+m+mi}{20}\PYG{p}{,}\PYG{l+m+mi}{2}\PYG{p}{,}\PYG{l+m+mi}{5}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{NBLIGN\PYGZus{}12}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Notice that VIRTEL automatically adjusts the starting positions and lengths as necessary to account for the attribute byte.

\index{GENERATE\sphinxhyphen{}VARIABLES@\spxentry{GENERATE\sphinxhyphen{}VARIABLES}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!GENERATE\sphinxhyphen{}VARIABLES@\spxentry{GENERATE\sphinxhyphen{}VARIABLES}}\ignorespaces 

\subsubsection{GENERATE\sphinxhyphen{}VARIABLES tag}
\label{\detokenize{User_Guide:generate-variables-tag}}\label{\detokenize{User_Guide:index-37}}
\sphinxAtStartPar
The GENERATE\sphinxhyphen{}VARIABLES tag functions like GENERATE\sphinxhyphen{}HTML except that, instead of generating HTML, it generates a set of table variables for each attribute found in the designated portion of the screen.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{GENERATE}\PYG{o}{\PYGZhy{}}\PYG{n}{VARIABLES} \PYG{p}{(}\PYG{n}{row}\PYG{p}{,} \PYG{n}{col}\PYG{p}{,} \PYG{n+nb}{len}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{prefix}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{row,col}
\sphinxAtStartPar
Starting position (row and column number on the 3270 screen) of the data to be copied. This starting position will usually contain a 3270 attribute character.

\sphinxlineitem{len}
\sphinxAtStartPar
Length of the data to be copied (including attribute characters).

\sphinxlineitem{prefix}
\sphinxAtStartPar
The prefix of the generated variable names.

\sphinxAtStartPar
A set of these variables is generated for each field found on the screen:

\sphinxlineitem{prefixNAME}
\sphinxAtStartPar
Field name
Example : V00002E9 for an input field, blank for an output field

\sphinxlineitem{prefixLINE}
\sphinxAtStartPar
Line position of the field attribute (first line = 1)

\sphinxlineitem{prefixCOLUMN}
\sphinxAtStartPar
Column position of the field attribute (first column = 1)

\sphinxlineitem{prefixLENGTH}
\sphinxAtStartPar
Field length (excluding attribute)

\sphinxlineitem{prefixATTRB}
\sphinxAtStartPar
Attribute: ASKIP, PROT, UNPROT, NUM, BRT, NORM, DET, MDT

\sphinxlineitem{prefixCOLOR}
\sphinxAtStartPar
Color: NEUTRAL, BLUE, RED, PINK, GREEN, TURQUOISE, YELLOW, WHITE

\sphinxlineitem{prefixHILIGHT}
\sphinxAtStartPar
Highlight: BLINK, REVERSE, UNDERLINE, OFF

\sphinxlineitem{prefixVALUE}
\sphinxAtStartPar
The text contained in the field (excluding attribute)

\end{description}

\sphinxAtStartPar
For example, the tag \{\{\{ GENERATE\sphinxhyphen{}VARIABLES (01,01,1920) “MYPREFIX” \}\}\} generates a set of table variables describing the entire contents of the 3270 screen. Normally, any binary zeroes in the field will be removed from the VALUE. However, if the BLANK\sphinxhyphen{}BINARY\sphinxhyphen{}ZEROES option is set (see {\hyperref[\detokenize{User_Guide:v462ug-setting-local-options}]{\sphinxcrossref{\DUrole{std,std-ref}{“Setting and unsetting local options”}}}}) then binary zeroes will be converted to blanks.

\index{GENERATE\sphinxhyphen{}VIR3270@\spxentry{GENERATE\sphinxhyphen{}VIR3270}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!GENERATE\sphinxhyphen{}VIR3270@\spxentry{GENERATE\sphinxhyphen{}VIR3270}}\ignorespaces 

\subsubsection{GENERATE\sphinxhyphen{}VIR3270 tag}
\label{\detokenize{User_Guide:generate-vir3270-tag}}\label{\detokenize{User_Guide:index-38}}
\sphinxAtStartPar
GENERATE\sphinxhyphen{}VIR3270, in conjunction with supporting JavaScript functions, is used by VIRTEL Web Access to generate an HTML page which reproduces as closely as possible the look and feel of a classic 3270 screen.
The GENERATE\sphinxhyphen{}VIR3270 tag functions like GENERATE\sphinxhyphen{}HTML except that, instead of generating HTML form fields corresponding to 3270 input fields, it generates all 3270 fields as HTML spans. Special attribute keywords are added to each span to indicate the type of field, the screen position, and the 3270 field attributes. A subspan is generated for characters whose character attributes differ from the field attributes. In addition, GENERATE\sphinxhyphen{}VIR3270 generates a hidden HTML form field for each 3270 input field, and these fields are written as HTML fragments into a VIRTEL table variable so that they can be inserted later in the page.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{GENERATE}\PYG{o}{\PYGZhy{}}\PYG{n}{VIR3270} \PYG{p}{(}\PYG{n}{row}\PYG{p}{,} \PYG{n}{col}\PYG{p}{,} \PYG{n+nb}{len}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{fragvar}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{row,col}
\sphinxAtStartPar
Starting position (row and column number on the 3270 screen) of the data to be copied.

\sphinxlineitem{len}
\sphinxAtStartPar
Length of the data to be copied.

\sphinxlineitem{fragvar}
\sphinxAtStartPar
The name of the table variable for the hidden HTML form fields.

\end{description}

\sphinxAtStartPar
The table below shows the HTML attributes generated for each field and 3270 attribute position on the screen:\sphinxhyphen{}


\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TTT}
\sphinxtoprule
\sphinxstyletheadfamily 
\sphinxAtStartPar
Attribute  Name
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Meaning
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Values
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook
\sphinxAtStartPar
vt=
&
\sphinxAtStartPar
Field type
&
\sphinxAtStartPar
O = Output, I = Input, A = 3270 attribute, C = Character subspan
\\
\sphinxhline
\sphinxAtStartPar
vr=
&
\sphinxAtStartPar
Row
&
\sphinxAtStartPar
Row number (first row = 1)
\\
\sphinxhline
\sphinxAtStartPar
vc=
&
\sphinxAtStartPar
Column
&
\sphinxAtStartPar
Column number (first column = 1)
\\
\sphinxhline
\sphinxAtStartPar
vp=
&
\sphinxAtStartPar
Position
&
\sphinxAtStartPar
Offset from start of screen (R1C1 = 0)
\\
\sphinxhline
\sphinxAtStartPar
vl=
&
\sphinxAtStartPar
Length
&
\sphinxAtStartPar
Length of span or subspan
\\
\sphinxhline
\sphinxAtStartPar
continuing=
&
\sphinxAtStartPar
“YES”
&
\sphinxAtStartPar
Indicates continuation of a field.
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}

\sphinxAtStartPar
An example of the GENERATE\sphinxhyphen{}VIR3270 tag is shown below:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZlt{}}\PYG{n}{pre}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{n}{div} \PYG{n+nb}{id}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{printReady}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{GENERATE}\PYG{o}{\PYGZhy{}}\PYG{n}{VIR3270} \PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1920}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{INFIELDS}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{div}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{pre}\PYG{o}{\PYGZgt{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{DEFINE}\PYG{o}{\PYGZhy{}}\PYG{n}{HTML}\PYG{o}{\PYGZhy{}}\PYG{n}{PFKEY} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pf}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{o}{\PYGZlt{}}\PYG{n+nb}{input} \PYG{n}{name}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pf}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n+nb}{type}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{HIDDEN}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}
\PYG{o}{\PYGZlt{}}\PYG{n}{div} \PYG{n+nb}{id}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{infields}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}
    \PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{FOR}\PYG{o}{\PYGZhy{}}\PYG{n}{EACH}\PYG{o}{\PYGZhy{}}\PYG{n}{VALUE}\PYG{o}{\PYGZhy{}}\PYG{n}{IN} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{INFIELDS}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{CURRENT}\PYG{o}{\PYGZhy{}}\PYG{n}{VALUE}\PYG{o}{\PYGZhy{}}\PYG{n}{OF} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{INFIELDS}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
    \PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{FOR} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{INFIELDS}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{div}\PYG{o}{\PYGZgt{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Continuing a field after end of a line/or screen.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZlt{}}\PYG{n}{pre}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{n}{div} \PYG{n+nb}{id}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{printReady}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{class}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{mainFont}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{n}{span} \PYG{n}{vt}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{I}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{continuing}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{YES}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{vp}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{0}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{vr}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{1}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{vc}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{1}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{vl}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{1760}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{vn}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{V0000000}\PYG{l+s+s2}{\PYGZdq{}}  \PYG{n}{class}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{NGREEN2}\PYG{l+s+s2}{\PYGZdq{}}
\end{sphinxVerbatim}

\index{Colour and font management@\spxentry{Colour and font management}}\ignorespaces 

\subsection{Colour and font management}
\label{\detokenize{User_Guide:colour-and-font-management}}\label{\detokenize{User_Guide:index-39}}
\sphinxAtStartPar
The management of the size and the colours of the text is effected for all fields by means of the ON\sphinxhyphen{}ATTRIBUTE and ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}ATTRIBUTE tags. For applications which use 3270 character attributes (order code x’28’), the colour and highlighting of individual characters within a field can be managed by means of the ON\sphinxhyphen{}CHARACTER\sphinxhyphen{}ATTRIBUTE and ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}CHARACTER\sphinxhyphen{}ATTRIBUTE tags. Input fields may be supplied with additional information by way of the ADDTO\sphinxhyphen{}FIELDS tag.

\index{ON\sphinxhyphen{}ATTRIBUTE@\spxentry{ON\sphinxhyphen{}ATTRIBUTE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!ON\sphinxhyphen{}ATTRIBUTE@\spxentry{ON\sphinxhyphen{}ATTRIBUTE}}\ignorespaces 

\subsubsection{ON\sphinxhyphen{}ATTRIBUTE tag}
\label{\detokenize{User_Guide:on-attribute-tag}}\label{\detokenize{User_Guide:index-40}}
\sphinxAtStartPar
The ON\sphinxhyphen{}ATTRIBUTE and ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}ATTRIBUTE tags allow HTML tags to be inserted before and after each field
depending on the 3270 attributes specified by the host application.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ON}\PYG{o}{\PYGZhy{}}\PYG{n}{ATTRIBUTE} \PYG{p}{(}\PYG{n}{p1}\PYG{p}{,}\PYG{n}{p2}\PYG{p}{,}\PYG{o}{.}\PYG{o}{.}\PYG{p}{,}\PYG{n}{pn}\PYG{p}{)} \PYG{o}{\PYGZlt{}}\PYG{n}{standard} \PYG{n}{HTML} \PYG{n}{tag}\PYG{o}{\PYGZgt{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Inserts the value specified by “standard html tag” before the field when the conditions p1 to pn are fulfilled. The
parameters p1 to pn may appear in any order, each parameter representing one of the following values:
\begin{description}
\sphinxlineitem{p1}
\sphinxAtStartPar
Type of field: PROTECTED, UNPROTECTED, NON\sphinxhyphen{}DISPLAY, NUMERIC, MDTON, DETECTABLE. ALPHANUMERIC, INTENSIFIED, BRIGHT, NORMAL

\sphinxlineitem{p2}
\sphinxAtStartPar
Highlighting: NOHILIGHT, BLINK, REVERSE, UNDERSCORE

\sphinxlineitem{p3}
\sphinxAtStartPar
Colour: NOCOLOR, BLUE, RED, PINK, GREEN, YELLOW, TURQUOISE, WHITE

\end{description}

\sphinxAtStartPar
When more than one ON\sphinxhyphen{}ATTRIBUTE tag matches the same field, the tags are processed in reverse order and the
generated HTML is accumulated from each matching ON\sphinxhyphen{}ATTRIBUTE tag. The WITH\sphinxhyphen{}NO\sphinxhyphen{}MATCH\sphinxhyphen{}BELOW keyword
allows an ON\sphinxhyphen{}ATTRIBUTE tag to match the field only if no match has been found with the ON\sphinxhyphen{}ATTRIBUTE tags already
processed.

\index{ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}ATTRIBUTE@\spxentry{ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}ATTRIBUTE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}ATTRIBUTE@\spxentry{ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}ATTRIBUTE}}\ignorespaces 

\subsubsection{ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}ATTRIBUTE tag}
\label{\detokenize{User_Guide:on-end-of-attribute-tag}}\label{\detokenize{User_Guide:index-41}}
\sphinxAtStartPar
The presence of the ON\sphinxhyphen{}ATTRIBUTE tag requires the presence of an ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}ATTRIBUTE tag having the same values
for the p1 to pn parameters.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ON}\PYG{o}{\PYGZhy{}}\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{OF}\PYG{o}{\PYGZhy{}}\PYG{n}{ATTRIBUTE} \PYG{p}{(}\PYG{n}{p1}\PYG{p}{,}\PYG{n}{p2}\PYG{p}{,}\PYG{o}{.}\PYG{o}{.}\PYG{p}{,}\PYG{n}{pn}\PYG{p}{)} \PYG{o}{\PYGZlt{}}\PYG{n}{standard} \PYG{n}{HTML} \PYG{n}{tag}\PYG{o}{\PYGZgt{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Inserts the value specified by “standard html tag” after the field when the conditions p1 to pn are fulfilled.
As previously described for the ON\sphinxhyphen{}ATTRIBUTE tag, multiple matching ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}ATTRIBUTE tags are processed in
reverse order, and the optional WITH\sphinxhyphen{}NO\sphinxhyphen{}MATCH\sphinxhyphen{}BELOW keyword causes the ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}ATTRIBUTE tag to match
only if no match has been found with the ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}ATTRIBUTE tags already processed.
Example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ON}\PYG{o}{\PYGZhy{}}\PYG{n}{ATTRIBUTE} \PYG{p}{(}\PYG{n}{PROTECTED}\PYG{p}{,}\PYG{n}{WITH}\PYG{o}{\PYGZhy{}}\PYG{n}{NO}\PYG{o}{\PYGZhy{}}\PYG{n}{MATCH}\PYG{o}{\PYGZhy{}}\PYG{n}{BELOW}\PYG{p}{)}\PYG{o}{\PYGZlt{}}\PYG{n}{font} \PYG{n}{color}\PYG{o}{=}\PYG{n}{green}\PYG{o}{\PYGZgt{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ON}\PYG{o}{\PYGZhy{}}\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{OF}\PYG{o}{\PYGZhy{}}\PYG{n}{ATTRIBUTE} \PYG{p}{(}\PYG{n}{PROTECTED}\PYG{p}{,} \PYG{n}{WITH}\PYG{o}{\PYGZhy{}}\PYG{n}{NO}\PYG{o}{\PYGZhy{}}\PYG{n}{MATCH}\PYG{o}{\PYGZhy{}}\PYG{n}{BELOW}\PYG{p}{)}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{font}\PYG{o}{\PYGZgt{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ON}\PYG{o}{\PYGZhy{}}\PYG{n}{ATTRIBUTE} \PYG{p}{(}\PYG{n}{PROTECTED}\PYG{p}{,}\PYG{n}{NORMAL}\PYG{p}{,}\PYG{n}{NOCOLOR}\PYG{p}{)}\PYG{o}{\PYGZlt{}}\PYG{n}{font} \PYG{n}{color}\PYG{o}{=}\PYG{c+c1}{\PYGZsh{}00CCFF\PYGZgt{}\PYGZcb{}\PYGZcb{}\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ON}\PYG{o}{\PYGZhy{}}\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{OF}\PYG{o}{\PYGZhy{}}\PYG{n}{ATTRIBUTE} \PYG{p}{(}\PYG{n}{PROTECTED}\PYG{p}{,}\PYG{n}{NORMAL}\PYG{p}{,}\PYG{n}{NOCOLOR}\PYG{p}{)}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{font}\PYG{o}{\PYGZgt{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ON}\PYG{o}{\PYGZhy{}}\PYG{n}{ATTRIBUTE} \PYG{p}{(}\PYG{n}{PROTECTED}\PYG{p}{,}\PYG{n}{INTENSIFIED}\PYG{p}{,}\PYG{n}{NOCOLOR}\PYG{p}{)}\PYG{o}{\PYGZlt{}}\PYG{n}{font} \PYG{n}{color}\PYG{o}{=}\PYG{n}{white}\PYG{o}{\PYGZgt{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ON}\PYG{o}{\PYGZhy{}}\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{OF}\PYG{o}{\PYGZhy{}}\PYG{n}{ATTRIBUTE} \PYG{p}{(}\PYG{n}{PROTECTED}\PYG{p}{,}\PYG{n}{INTENSIFIED}\PYG{p}{,}\PYG{n}{NOCOLOR}\PYG{p}{)}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{font}\PYG{o}{\PYGZgt{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ON}\PYG{o}{\PYGZhy{}}\PYG{n}{ATTRIBUTE} \PYG{p}{(}\PYG{n}{PROTECTED}\PYG{p}{,}\PYG{n}{BLUE}\PYG{p}{)}\PYG{o}{\PYGZlt{}}\PYG{n}{font} \PYG{n}{color}\PYG{o}{=}\PYG{c+c1}{\PYGZsh{}00CCFF\PYGZgt{}\PYGZcb{}\PYGZcb{}\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ON}\PYG{o}{\PYGZhy{}}\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{OF}\PYG{o}{\PYGZhy{}}\PYG{n}{ATTRIBUTE} \PYG{p}{(}\PYG{n}{PROTECTED}\PYG{p}{,}\PYG{n}{BLUE}\PYG{p}{)}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{font}\PYG{o}{\PYGZgt{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ON}\PYG{o}{\PYGZhy{}}\PYG{n}{ATTRIBUTE} \PYG{p}{(}\PYG{n}{PROTECTED}\PYG{p}{,}\PYG{n}{RED}\PYG{p}{)}\PYG{o}{\PYGZlt{}}\PYG{n}{font} \PYG{n}{color}\PYG{o}{=}\PYG{c+c1}{\PYGZsh{}c41200\PYGZgt{}\PYGZcb{}\PYGZcb{}\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ON}\PYG{o}{\PYGZhy{}}\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{OF}\PYG{o}{\PYGZhy{}}\PYG{n}{ATTRIBUTE} \PYG{p}{(}\PYG{n}{PROTECTED}\PYG{p}{,}\PYG{n}{RED}\PYG{p}{)}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{font}\PYG{o}{\PYGZgt{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ON}\PYG{o}{\PYGZhy{}}\PYG{n}{ATTRIBUTE} \PYG{p}{(}\PYG{n}{PROTECTED}\PYG{p}{,}\PYG{n}{PINK}\PYG{p}{)}\PYG{o}{\PYGZlt{}}\PYG{n}{font} \PYG{n}{color}\PYG{o}{=}\PYG{n}{pink}\PYG{o}{\PYGZgt{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ON}\PYG{o}{\PYGZhy{}}\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{OF}\PYG{o}{\PYGZhy{}}\PYG{n}{ATTRIBUTE} \PYG{p}{(}\PYG{n}{PROTECTED}\PYG{p}{,}\PYG{n}{PINK}\PYG{p}{)}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{font}\PYG{o}{\PYGZgt{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ON}\PYG{o}{\PYGZhy{}}\PYG{n}{ATTRIBUTE} \PYG{p}{(}\PYG{n}{PROTECTED}\PYG{p}{,}\PYG{n}{GREEN}\PYG{p}{)}\PYG{o}{\PYGZlt{}}\PYG{n}{font} \PYG{n}{color}\PYG{o}{=}\PYG{c+c1}{\PYGZsh{}00FF00\PYGZgt{}\PYGZcb{}\PYGZcb{}\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ON}\PYG{o}{\PYGZhy{}}\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{OF}\PYG{o}{\PYGZhy{}}\PYG{n}{ATTRIBUTE} \PYG{p}{(}\PYG{n}{PROTECTED}\PYG{p}{,}\PYG{n}{GREEN}\PYG{p}{)}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{font}\PYG{o}{\PYGZgt{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ON}\PYG{o}{\PYGZhy{}}\PYG{n}{ATTRIBUTE} \PYG{p}{(}\PYG{n}{PROTECTED}\PYG{p}{,}\PYG{n}{TURQUOISE}\PYG{p}{)}\PYG{o}{\PYGZlt{}}\PYG{n}{font} \PYG{n}{color}\PYG{o}{=}\PYG{c+c1}{\PYGZsh{}40E0D0\PYGZgt{}\PYGZcb{}\PYGZcb{}\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ON}\PYG{o}{\PYGZhy{}}\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{OF}\PYG{o}{\PYGZhy{}}\PYG{n}{ATTRIBUTE} \PYG{p}{(}\PYG{n}{PROTECTED}\PYG{p}{,}\PYG{n}{TURQUOISE}\PYG{p}{)}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{font}\PYG{o}{\PYGZgt{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ON}\PYG{o}{\PYGZhy{}}\PYG{n}{ATTRIBUTE} \PYG{p}{(}\PYG{n}{PROTECTED}\PYG{p}{,}\PYG{n}{YELLOW}\PYG{p}{)}\PYG{o}{\PYGZlt{}}\PYG{n}{font} \PYG{n}{color}\PYG{o}{=}\PYG{c+c1}{\PYGZsh{}FFFF33\PYGZgt{}\PYGZcb{}\PYGZcb{}\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ON}\PYG{o}{\PYGZhy{}}\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{OF}\PYG{o}{\PYGZhy{}}\PYG{n}{ATTRIBUTE} \PYG{p}{(}\PYG{n}{PROTECTED}\PYG{p}{,}\PYG{n}{YELLOW}\PYG{p}{)}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{font}\PYG{o}{\PYGZgt{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ON}\PYG{o}{\PYGZhy{}}\PYG{n}{ATTRIBUTE} \PYG{p}{(}\PYG{n}{PROTECTED}\PYG{p}{,}\PYG{n}{WHITE}\PYG{p}{)}\PYG{o}{\PYGZlt{}}\PYG{n}{font} \PYG{n}{color}\PYG{o}{=}\PYG{n}{white}\PYG{o}{\PYGZgt{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ON}\PYG{o}{\PYGZhy{}}\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{OF}\PYG{o}{\PYGZhy{}}\PYG{n}{ATTRIBUTE} \PYG{p}{(}\PYG{n}{PROTECTED}\PYG{p}{,}\PYG{n}{WHITE}\PYG{p}{)}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{font}\PYG{o}{\PYGZgt{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example set of ON\sphinxhyphen{}ATTRIBUTE and ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}ATTRIBUTE tags}

\index{ON\sphinxhyphen{}CHARACTER\sphinxhyphen{}ATTRIBUTE@\spxentry{ON\sphinxhyphen{}CHARACTER\sphinxhyphen{}ATTRIBUTE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!ON\sphinxhyphen{}CHARACTER\sphinxhyphen{}ATTRIBUTE@\spxentry{ON\sphinxhyphen{}CHARACTER\sphinxhyphen{}ATTRIBUTE}}\ignorespaces 

\subsubsection{ON\sphinxhyphen{}CHARACTER\sphinxhyphen{}ATTRIBUTE tag}
\label{\detokenize{User_Guide:on-character-attribute-tag}}\label{\detokenize{User_Guide:index-42}}
\sphinxAtStartPar
If the page template contains ON\sphinxhyphen{}CHARACTER\sphinxhyphen{}ATTRIBUTE and ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}CHARACTER\sphinxhyphen{}ATTRIBUTE tags, changes in
colour or highlighting of individual characters within a field are surrounded by the specified HTML code during
processing by GENERATE\sphinxhyphen{}HTML. Since HTML code cannot be included in the “value” clause of an input field,
GENERATE\sphinxhyphen{}HTML does not generate HTML code for character attributes within input fields.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ON}\PYG{o}{\PYGZhy{}}\PYG{n}{CHARACTER}\PYG{o}{\PYGZhy{}}\PYG{n}{ATTRIBUTE} \PYG{p}{(}\PYG{n}{p1}\PYG{p}{,}\PYG{n}{p2}\PYG{p}{)} \PYG{o}{\PYGZlt{}}\PYG{n}{standard} \PYG{n}{HTML} \PYG{n}{tag}\PYG{o}{\PYGZgt{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{p1,p2}
\sphinxAtStartPar
Highlighting and colour parameters as specified for the ON\sphinxhyphen{}ATTRIBUTE tag.

\end{description}

\index{ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}CHARACTER\sphinxhyphen{}ATTRIBUTE@\spxentry{ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}CHARACTER\sphinxhyphen{}ATTRIBUTE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}CHARACTER\sphinxhyphen{}ATTRIBUTE@\spxentry{ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}CHARACTER\sphinxhyphen{}ATTRIBUTE}}\ignorespaces 

\subsubsection{ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}CHARACTER\sphinxhyphen{}ATTRIBUTE tag}
\label{\detokenize{User_Guide:on-end-of-character-attribute-tag}}\label{\detokenize{User_Guide:index-43}}
\sphinxAtStartPar
The ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}CHARACTER\sphinxhyphen{}ATTRIBUTE tag specifies the HTML code to be inserted at the termination of a character
string opened by an ON\sphinxhyphen{}CHARACTER\sphinxhyphen{}ATTRIBUTE tag.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ON}\PYG{o}{\PYGZhy{}}\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{OF}\PYG{o}{\PYGZhy{}}\PYG{n}{CHARACTER}\PYG{o}{\PYGZhy{}}\PYG{n}{ATTRIBUTE} \PYG{p}{(}\PYG{n}{p1}\PYG{p}{,}\PYG{n}{p2}\PYG{p}{)} \PYG{o}{\PYGZlt{}}\PYG{n}{standard} \PYG{n}{HTML} \PYG{n}{tag}\PYG{o}{\PYGZgt{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\index{ADD\sphinxhyphen{}TO\sphinxhyphen{}FIELDS@\spxentry{ADD\sphinxhyphen{}TO\sphinxhyphen{}FIELDS}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!ADD\sphinxhyphen{}TO\sphinxhyphen{}FIELDS@\spxentry{ADD\sphinxhyphen{}TO\sphinxhyphen{}FIELDS}}\ignorespaces 

\subsubsection{ADD\sphinxhyphen{}TO\sphinxhyphen{}FIELDS tag}
\label{\detokenize{User_Guide:add-to-fields-tag}}\label{\detokenize{User_Guide:index-44}}
\sphinxAtStartPar
The presence of an ADD\sphinxhyphen{}TO\sphinxhyphen{}FIELDS tag allows the definition of each HTML input field to be modified according to the 3270 attributes specified by the host application.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ADD}\PYG{o}{\PYGZhy{}}\PYG{n}{TO}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELDS} \PYG{p}{(}\PYG{n}{p1}\PYG{p}{,}\PYG{n}{p2}\PYG{p}{,}\PYG{o}{.}\PYG{o}{.}\PYG{p}{,}\PYG{n}{pn}\PYG{p}{)} \PYG{n}{part} \PYG{n}{of} \PYG{n}{standard} \PYG{n}{HTML} \PYG{n}{tag} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Inserts the value specified by “part of standard html tag” into the HTML \textless{}INPUT\textgreater{} tag when the conditions p1 to pn (described in the previous paragraph) are fulfilled.

\sphinxAtStartPar
When more than one ADD\sphinxhyphen{}TO\sphinxhyphen{}FIELDS tag matches the same field, the tags are processed in order of appearance and the generated HTML is accumulated from each matching ADD\sphinxhyphen{}TO\sphinxhyphen{}FIELDS tag. The WITH\sphinxhyphen{}NO\sphinxhyphen{}MATCH\sphinxhyphen{}ABOVE keyword
allows an ADD\sphinxhyphen{}TO\sphinxhyphen{}FIELDS tag to match the field only if no match has been found with the ADD\sphinxhyphen{}TO\sphinxhyphen{}FIELDS tags already processed.

\sphinxAtStartPar
\sphinxstylestrong{Example:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ADD}\PYG{o}{\PYGZhy{}}\PYG{n}{TO}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELDS} \PYG{p}{(}\PYG{n}{NORMAL}\PYG{p}{,}\PYG{n}{NOCOLOR}\PYG{p}{)} \PYG{n}{class}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{GREEN}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ADD}\PYG{o}{\PYGZhy{}}\PYG{n}{TO}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELDS} \PYG{p}{(}\PYG{n}{INTENSIFIED}\PYG{p}{,}\PYG{n}{NOCOLOR}\PYG{p}{)} \PYG{n}{class}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{RED}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ADD}\PYG{o}{\PYGZhy{}}\PYG{n}{TO}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELDS} \PYG{p}{(}\PYG{n}{BLUE}\PYG{p}{)} \PYG{n}{class}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{BLUE}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ADD}\PYG{o}{\PYGZhy{}}\PYG{n}{TO}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELDS} \PYG{p}{(}\PYG{n}{RED}\PYG{p}{)} \PYG{n}{class}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{RED}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ADD}\PYG{o}{\PYGZhy{}}\PYG{n}{TO}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELDS} \PYG{p}{(}\PYG{n}{PINK}\PYG{p}{)} \PYG{n}{class}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{PINK}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ADD}\PYG{o}{\PYGZhy{}}\PYG{n}{TO}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELDS} \PYG{p}{(}\PYG{n}{GREEN}\PYG{p}{)} \PYG{n}{class}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{GREEN}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ADD}\PYG{o}{\PYGZhy{}}\PYG{n}{TO}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELDS} \PYG{p}{(}\PYG{n}{TURQUOISE}\PYG{p}{)} \PYG{n}{class}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{TURQUOISE}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ADD}\PYG{o}{\PYGZhy{}}\PYG{n}{TO}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELDS} \PYG{p}{(}\PYG{n}{YELLOW}\PYG{p}{)} \PYG{n}{class}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{YELLOW}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ADD}\PYG{o}{\PYGZhy{}}\PYG{n}{TO}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELDS} \PYG{p}{(}\PYG{n}{WHITE}\PYG{p}{)} \PYG{n}{class}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{WHITE}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ADD}\PYG{o}{\PYGZhy{}}\PYG{n}{TO}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELDS} \PYG{p}{(}\PYG{n}{DISPLAY}\PYG{p}{,}\PYG{n}{WITH}\PYG{o}{\PYGZhy{}}\PYG{n}{NO}\PYG{o}{\PYGZhy{}}\PYG{n}{MATCH}\PYG{o}{\PYGZhy{}}\PYG{n}{ABOVE}\PYG{p}{)} \PYG{n}{class}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{GREEN}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example set of ADD\sphinxhyphen{}TO\sphinxhyphen{}FIELDS tags}

\sphinxAtStartPar
In the above example, the parameter class makes reference to a style class defined in the HTML page header:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZlt{}head\PYGZgt{}
\PYGZlt{}meta http\PYGZhy{}equiv=\PYGZdq{}Content\PYGZhy{}Type\PYGZdq{} content=\PYGZdq{}text/html; charset=iso\PYGZhy{}8859\PYGZhy{}1\PYGZdq{}\PYGZgt{}
\PYGZlt{}style\PYGZgt{}\PYGZlt{}!\PYGZhy{}\PYGZhy{}
.BLUE \PYGZob{}font\PYGZhy{}family: monospace; background: \PYGZsh{}00CCFF; \PYGZcb{}
.RED \PYGZob{}font\PYGZhy{}family: monospace; background: red; \PYGZcb{}
.PINK \PYGZob{}font\PYGZhy{}family: monospace; background: pink; \PYGZcb{}
.GREEN \PYGZob{}font\PYGZhy{}family: monospace; background: \PYGZsh{}00FF00;\PYGZcb{}
.TURQUOISE \PYGZob{}font\PYGZhy{}family: monospace; background: \PYGZsh{}40E0D0; \PYGZcb{}
.YELLOW \PYGZob{}font\PYGZhy{}family: monospace; background: \PYGZsh{}FFFF33;\PYGZcb{}
.WHITE \PYGZob{}font\PYGZhy{}family: monospace; background: \PYGZsh{}FFFFFF; \PYGZcb{}
//\PYGZhy{}\PYGZhy{}\PYGZgt{}\PYGZlt{}/style\PYGZgt{}
\PYGZlt{}!\PYGZhy{}\PYGZhy{}VIRTEL start=\PYGZdq{}\PYGZob{}\PYGZob{}\PYGZob{}\PYGZdq{} end=\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{} \PYGZhy{}\PYGZhy{}\PYGZgt{}
\PYGZlt{}title\PYGZgt{}Syspertec \PYGZhy{} example of generation of HTML pages\PYGZcb{}\PYGZcb{}\PYGZcb{} \PYGZlt{}/title\PYGZgt{}
\PYGZlt{}/head\PYGZgt{}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example styles for ADD\sphinxhyphen{}TO\sphinxhyphen{}FIELDS tags}

\sphinxAtStartPar
For certain fields, the action of the ADD\sphinxhyphen{}TO\sphinxhyphen{}FIELDS tag may be nullified by the NO\sphinxhyphen{}ADD\sphinxhyphen{}TO\sphinxhyphen{}CHECKBOX and NO\sphinxhyphen{}ADDTO\sphinxhyphen{}LISTBOX local options (see {\hyperref[\detokenize{User_Guide:v462ug-setting-local-options}]{\sphinxcrossref{\DUrole{std,std-ref}{“Setting and unsetting local options”}}}}).

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
The ADD\sphinxhyphen{}TO\sphinxhyphen{}FIELDS tag affects input fields only
\end{sphinxadmonition}
\phantomsection\label{\detokenize{User_Guide:v462ug-cursor-management}}
\index{Cursor management@\spxentry{Cursor management}}\ignorespaces 

\subsection{Cursor management}
\label{\detokenize{User_Guide:cursor-management}}\label{\detokenize{User_Guide:index-45}}
\sphinxAtStartPar
In each message sent from the host application to the browser, VIRTEL automatically manages the positioning of the
cursor insofar as is possible. Conversely, when a message is sent to VIRTEL from the browser, it is necessary to know
the position of the cursor in order to inform the application on the host side. The cursor position cannot be handled
relatively therefore, the cursor’s exact position is communicated via a hidden field specifying the name of the field
having the focus at the time of transmission.
Cursor management is determined by the tags DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}FOCUS\sphinxhyphen{}FIELD, FIELD\sphinxhyphen{}WITH\sphinxhyphen{}CURSOR, DEFAULT\sphinxhyphen{}FIELDWITH\sphinxhyphen{}
CURSOR and by two JavaScript procedures. More precise positioning of the cursor can be controlled by the
optional tags DEFINE\sphinxhyphen{}CURSOR\sphinxhyphen{}POSITION\sphinxhyphen{}FIELD and POSITION\sphinxhyphen{}OF\sphinxhyphen{}THE\sphinxhyphen{}CURSOR.

\index{DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}FOCUS\sphinxhyphen{}FIELD@\spxentry{DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}FOCUS\sphinxhyphen{}FIELD}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}FOCUS\sphinxhyphen{}FIELD@\spxentry{DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}FOCUS\sphinxhyphen{}FIELD}}\ignorespaces 

\subsubsection{DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}FOCUS\sphinxhyphen{}FIELD tag}
\label{\detokenize{User_Guide:define-html-focus-field-tag}}\label{\detokenize{User_Guide:index-46}}
\sphinxAtStartPar
The DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}FOCUS\sphinxhyphen{}FIELD tag informs VIRTEL of the existence of the focusField.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{DEFINE}\PYG{o}{\PYGZhy{}}\PYG{n}{HTML}\PYG{o}{\PYGZhy{}}\PYG{n}{FOCUS}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELD} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{focusField}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The focusField is a hidden field which will receive the name of the field having the focus, that is to say the input field
on which the cursor is positioned, at the moment of transmission of a message from the browser to VIRTEL.

\sphinxAtStartPar
This field must be defined in the following way:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZlt{}}\PYG{n}{INPUT} \PYG{n}{NAME}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{focusField}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{HIDDEN}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{VALUE}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZob{}\PYGZob{}}\PYG{l+s+s2}{\PYGZob{}}\PYG{l+s+s2}{FIELD\PYGZhy{}WITH\PYGZhy{}CURSOR\PYGZcb{}\PYGZcb{}\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}
\end{sphinxVerbatim}


\subsubsection{DEFINE\sphinxhyphen{}CURSOR\sphinxhyphen{}POSITION\sphinxhyphen{}FIELD tag}
\label{\detokenize{User_Guide:define-cursor-position-field-tag}}
\sphinxAtStartPar
The DEFINE\sphinxhyphen{}CURSOR\sphinxhyphen{}POSITION\sphinxhyphen{}FIELD tag informs VIRTEL of the existence of the cursorField.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{DEFINE}\PYG{o}{\PYGZhy{}}\PYG{n}{CURSOR}\PYG{o}{\PYGZhy{}}\PYG{n}{POSITION}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELD} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{cursorField}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The cursorField is an optional hidden field in which the JavaScript routines may place the exact position of the cursor
when a message is transmitted from the browser to VIRTEL. The cursor position is indicated by a string of the format
Vnnnnnnn or Pnnnnnnn, where V indicates that the cursor is in a non\sphinxhyphen{}protected (input) field, P indicates a protected
(output) field, and nnnnnnn is the hexadecimal offset of the cursor from the start of the screen (where 0000000
represents row 1 column 1).

\sphinxAtStartPar
The cursorField must be defined in the following way:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZlt{}}\PYG{n}{INPUT} \PYG{n}{NAME}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{cursorField}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{HIDDEN}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{VALUE}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
If both focusField and cursorField are sent to VIRTEL, then VIRTEL will use cursorField to determine the position of the cursor.


\subsubsection{FIELD\sphinxhyphen{}WITH\sphinxhyphen{}CURSOR tag}
\label{\detokenize{User_Guide:field-with-cursor-tag}}
\sphinxAtStartPar
The FIELD\sphinxhyphen{}WITH\sphinxhyphen{}CURSOR tag enables VIRTEL to insert the name of the field having the focus at the time of transmission of the message to the browser.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{FIELD}\PYG{o}{\PYGZhy{}}\PYG{n}{WITH}\PYG{o}{\PYGZhy{}}\PYG{n}{CURSOR} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\index{DEFAULT\sphinxhyphen{}FIELD\sphinxhyphen{}WITH\sphinxhyphen{}CURSOR@\spxentry{DEFAULT\sphinxhyphen{}FIELD\sphinxhyphen{}WITH\sphinxhyphen{}CURSOR}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!DEFAULT\sphinxhyphen{}FIELD\sphinxhyphen{}WITH\sphinxhyphen{}CURSOR@\spxentry{DEFAULT\sphinxhyphen{}FIELD\sphinxhyphen{}WITH\sphinxhyphen{}CURSOR}}\ignorespaces 

\subsubsection{DEFAULT\sphinxhyphen{}FIELD\sphinxhyphen{}WITH\sphinxhyphen{}CURSOR tag}
\label{\detokenize{User_Guide:default-field-with-cursor-tag}}\label{\detokenize{User_Guide:index-47}}
\sphinxAtStartPar
The DEFAULT\sphinxhyphen{}FIELD\sphinxhyphen{}WITH\sphinxhyphen{}CURSOR tag specifies the name generated by the FIELD\sphinxhyphen{}WITH\sphinxhyphen{}CURSOR tag when the 3270 screen contains no input fields.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{DEFAULT}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELD}\PYG{o}{\PYGZhy{}}\PYG{n}{WITH}\PYG{o}{\PYGZhy{}}\PYG{n}{CURSOR} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{fieldname}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{|} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{NOFIELD}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
In the DEFAULT\sphinxhyphen{}FIELD\sphinxhyphen{}WITH\sphinxhyphen{}CURSOR tag, fieldname must be the name of an HTML input field defined in the template
page. If no DEFAULT\sphinxhyphen{}FIELD\sphinxhyphen{}WITH\sphinxhyphen{}CURSOR tag is present, and the screen contains no input fields, VIRTEL will convert
the first field on the screen into an input field, so that the FIELD\sphinxhyphen{}WITH\sphinxhyphen{}CURSOR tag can generate the name of a valid
input field.

\sphinxAtStartPar
The “NOFIELD” option prevents a dummy field from being created.


\subsubsection{Positioning the focus when a message is sent to the browser}
\label{\detokenize{User_Guide:positioning-the-focus-when-a-message-is-sent-to-the-browser}}
\sphinxAtStartPar
The positioning of the focus is done with the help of a JavaScript procedure referenced by the \textless{}BODY\textgreater{} tag of the HTML page:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Script for focus position management
\PYGZlt{}script language=\PYGZdq{}Javascript\PYGZdq{}\PYGZgt{}
\PYGZlt{}!\PYGZhy{}\PYGZhy{} comment to mask script for some browsers
function setfocus()
\PYGZob{}
    document.virtelForm.\PYGZob{}\PYGZob{}\PYGZob{} FIELD\PYGZhy{}WITH\PYGZhy{}CURSOR \PYGZcb{}\PYGZcb{}\PYGZcb{}.focus();
\PYGZcb{}
//\PYGZhy{}\PYGZhy{}\PYGZgt{}
\PYGZlt{}/script\PYGZgt{}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{Cursor position initialisation}
\sphinxAtStartPar
\textless{}body onload=”setfocus()”\textgreater{}

\end{description}


\subsubsection{Positioning the focus in the browser}
\label{\detokenize{User_Guide:positioning-the-focus-in-the-browser}}
\sphinxAtStartPar
Once present in the client’s browser, the user may need to move the focus to a different field, either by using the TAB key on the keyboard or by using the mouse. The focusField field is automatically updated if the ADD\sphinxhyphen{}TO\sphinxhyphen{}FIELDS tag calls a script which updates the focus field. Script for saving the name of the field having the focus:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZlt{}script language=\PYGZdq{}Javascript\PYGZdq{}\PYGZgt{}
\PYGZlt{}!\PYGZhy{}\PYGZhy{} comment to mask script for some browsers
function savefocus(CurrentFieldName)
\PYGZob{}
    document.virtelForm.focusField.value = CurrentFieldName;
\PYGZcb{}
//\PYGZhy{}\PYGZhy{}\PYGZgt{}
\PYGZlt{}/script\PYGZgt{}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Automatic call of the update script}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{ADD}\PYG{o}{\PYGZhy{}}\PYG{n}{TO}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELDS} \PYG{n}{onfocus} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{savefocus(this.name)}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\index{POSITION\sphinxhyphen{}OF\sphinxhyphen{}THE\sphinxhyphen{}CURSOR@\spxentry{POSITION\sphinxhyphen{}OF\sphinxhyphen{}THE\sphinxhyphen{}CURSOR}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!POSITION\sphinxhyphen{}OF\sphinxhyphen{}THE\sphinxhyphen{}CURSOR@\spxentry{POSITION\sphinxhyphen{}OF\sphinxhyphen{}THE\sphinxhyphen{}CURSOR}}\ignorespaces 

\subsubsection{POSITION\sphinxhyphen{}OF\sphinxhyphen{}THE\sphinxhyphen{}CURSOR tag}
\label{\detokenize{User_Guide:position-of-the-cursor-tag}}\label{\detokenize{User_Guide:index-48}}
\sphinxAtStartPar
The POSITION\sphinxhyphen{}OF\sphinxhyphen{}THE\sphinxhyphen{}CURSOR tag allows VIRTEL to send the exact position of the cursor to the browser by including a
string of the format Vnnnnnnn or Pnnnnnnn in the HTML page. Vnnnnnnn means that the cursor is in a non\sphinxhyphen{}protected
(input) field. Pnnnnnnn means that the cursor is in a protected (output) field. In both cases, nnnnnnn is the
hexadecimal offset of the cursor from the start of the screen (where 0000000 represents row 1 column 1).

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{POSITION}\PYG{o}{\PYGZhy{}}\PYG{n}{OF}\PYG{o}{\PYGZhy{}}\PYG{n}{THE}\PYG{o}{\PYGZhy{}}\PYG{n}{CURSOR} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\index{Function key management@\spxentry{Function key management}}\ignorespaces 

\subsection{Function key management}
\label{\detokenize{User_Guide:function-key-management}}\label{\detokenize{User_Guide:index-49}}
\sphinxAtStartPar
By design, the transmission of information delivered by a 3270 application is effected by using only the function keys, usually the PF and PA keys. Also by design, the navigation from an HTML page is radically different, generally using the mouse to submit requests to the HTTP server. This difference in philosophy makes it difficult, even impossible in certain instances, to detect the use of a function key via the browser. Conserving the ergonomic aspects of the web in an application that allows full use of the function keys is naturally not an easy thing to do, it is, however, made possible by the following functions.

\phantomsection\label{\detokenize{User_Guide:v462ug-pfkfield}}
\index{ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}CHARACTER\sphinxhyphen{}ATTRIBUTE@\spxentry{ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}CHARACTER\sphinxhyphen{}ATTRIBUTE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}CHARACTER\sphinxhyphen{}ATTRIBUTE@\spxentry{ON\sphinxhyphen{}END\sphinxhyphen{}OF\sphinxhyphen{}CHARACTER\sphinxhyphen{}ATTRIBUTE}}\ignorespaces 
\index{pfkField@\spxentry{pfkField}!Virtel fields@\spxentry{Virtel fields}}\index{Virtel fields@\spxentry{Virtel fields}!pfkField@\spxentry{pfkField}}\ignorespaces 

\subsubsection{Definition of the pfkField field}
\label{\detokenize{User_Guide:definition-of-the-pfkfield-field}}\label{\detokenize{User_Guide:index-51}}
\sphinxAtStartPar
As with the management of the cursor, the pfkField is a hidden field designed to accept the name of the function key that VIRTEL must use to transmit data to the application on the host.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZlt{}}\PYG{n}{INPUT} \PYG{n}{NAME}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pfkField}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{HIDDEN}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{VALUE}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ENTER}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}
\end{sphinxVerbatim}

\index{DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}PFKEY@\spxentry{DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}PFKEY}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}PFKEY@\spxentry{DEFINE\sphinxhyphen{}HTML\sphinxhyphen{}PFKEY}}\ignorespaces 
\sphinxAtStartPar
VIRTEL is notified of the existence of the field by the following tag:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{DEFINE}\PYG{o}{\PYGZhy{}}\PYG{n}{HTML}\PYG{o}{\PYGZhy{}}\PYG{n}{PFKEY} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pfkField}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\subsubsection{Updating the pfkField}
\label{\detokenize{User_Guide:updating-the-pfkfield}}
\sphinxAtStartPar
The field pfkField is updated by using a JavaScript procedure called at the time of the submission of the request. The script used is referenced in the BUTTON field definition or in the HTML link used for the submission.

\sphinxAtStartPar
Save the name of the field having the focus

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZlt{}script language=\PYGZdq{}Javascript\PYGZdq{}\PYGZgt{}
\PYGZlt{}!\PYGZhy{}\PYGZhy{} comment to mask script for some browsers
function submitform(pfkey)
\PYGZob{}
    document.virtelForm.pfkField.value = pfkey;
    document.virtelForm.submit();
\PYGZcb{}
//\PYGZhy{}\PYGZhy{}\PYGZgt{}
\PYGZlt{}/script\PYGZgt{}
\end{sphinxVerbatim}

\sphinxAtStartPar
Automatic call of the update script from a field of type BUTTON

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZlt{}}\PYG{n}{INPUT} \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{BUTTON}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{size}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{5}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{VALUE}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{PF01}\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{n}{onclick}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{submitform(this.value)}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Automatic call of the SCRIPT from a hypertext link

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZlt{}}\PYG{n}{a} \PYG{n}{href}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Javascript:submitform(}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{PF1}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{)}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{\PYGZgt{}}\PYG{n}{submit} \PYG{k}{with} \PYG{n}{PF01}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{a}\PYG{o}{\PYGZgt{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The function keys may be defined in the following manner in the “value” keyword of the INPUT TYPE=BUTTON field.


\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TT}
\sphinxtoprule
\sphinxstyletheadfamily 
\sphinxAtStartPar
3270 function key
&\sphinxstyletheadfamily 
\sphinxAtStartPar
PfkField value
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook
\sphinxAtStartPar
ENTER
&
\sphinxAtStartPar
ENTER
\\
\sphinxhline
\sphinxAtStartPar
CLEAR SCREEN
&
\sphinxAtStartPar
CLEAR
\\
\sphinxhline
\sphinxAtStartPar
PA1, PA2, PA3
&
\sphinxAtStartPar
PA1, PA2, PA3
\\
\sphinxhline
\sphinxAtStartPar
PF1 to PF24
&
\sphinxAtStartPar
PF01 to PF24 (variations PF1, F1, F01, P1, P01 are also accepted)
\\
\sphinxhline
\sphinxAtStartPar
Attention
&
\sphinxAtStartPar
ATTN
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}

\sphinxAtStartPar
\sphinxstyleemphasis{Function key values for pfkField}

\index{Disable@\spxentry{Disable}!Function Keys@\spxentry{Function Keys}}\index{Function Keys@\spxentry{Function Keys}!Disable@\spxentry{Disable}}\ignorespaces 

\subsubsection{Disallowed function keys}
\label{\detokenize{User_Guide:disallowed-function-keys}}\label{\detokenize{User_Guide:index-53}}
\index{INVALID\sphinxhyphen{}PFKEYS@\spxentry{INVALID\sphinxhyphen{}PFKEYS}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!INVALID\sphinxhyphen{}PFKEYS@\spxentry{INVALID\sphinxhyphen{}PFKEYS}}\ignorespaces 
\sphinxAtStartPar
Certain function keys may be explicitly restricted by means of the INVALID\sphinxhyphen{}PFKEYS tag containing the list of prohibited PF keys.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{INVALID}\PYG{o}{\PYGZhy{}}\PYG{n}{PFKEYS} \PYG{p}{(}\PYG{n}{pfk1}\PYG{p}{,} \PYG{n}{pfk2}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.} \PYG{p}{,} \PYG{n}{pfkn}\PYG{p}{)} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\index{VALID\sphinxhyphen{}PFKEYS@\spxentry{VALID\sphinxhyphen{}PFKEYS}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!VALID\sphinxhyphen{}PFKEYS@\spxentry{VALID\sphinxhyphen{}PFKEYS}}\ignorespaces 
\sphinxAtStartPar
On the other hand, an exhaustive list of authorised function keys may be specified with the VALID\sphinxhyphen{}PFKEYS tag.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{VALID}\PYG{o}{\PYGZhy{}}\PYG{n}{PFKEYS} \PYG{p}{(}\PYG{n}{pfk1}\PYG{p}{,} \PYG{n}{pfk2}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.} \PYG{p}{,} \PYG{n}{pfkn}\PYG{p}{)} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
For example, Disallow ATTN, PF08 and PF24

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{INVALID}\PYG{o}{\PYGZhy{}}\PYG{n}{PFKEYS} \PYG{p}{(}\PYG{n}{ATTN}\PYG{p}{,}\PYG{n}{PF08}\PYG{p}{,}\PYG{n}{PF24}\PYG{p}{)} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Disallow all function keys except ENTER and PF03

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{VALID}\PYG{o}{\PYGZhy{}}\PYG{n}{PFKEYS} \PYG{p}{(}\PYG{n}{ENTER}\PYG{p}{,}\PYG{n}{PF03}\PYG{p}{)} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\subsubsection{PF key processing by scenario}
\label{\detokenize{User_Guide:pf-key-processing-by-scenario}}
\sphinxAtStartPar
A page template can generate a “pseudo\sphinxhyphen{}PFkey” intended to be interpreted by an INPUT scenario. This is done by setting the pfkField to a value beginning with SCENARIO. The pseudo\sphinxhyphen{}PFKey will be accepted by VIRTEL and treated as ENTER, but it will not be transmitted to the application. The scenario can retrieve the value of the pfkField by means of the COPY\$ INPUT\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE instruction.

\sphinxAtStartPar
\sphinxstylestrong{For example:}

\sphinxAtStartPar
Definition of the BUTTON field in the page template:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{DEFINE}\PYG{o}{\PYGZhy{}}\PYG{n}{HTML}\PYG{o}{\PYGZhy{}}\PYG{n}{PFKEY} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pf}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{o}{\PYGZlt{}}\PYG{n}{INPUT} \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{BUTTON}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{size}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{5}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{VALUE}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SCENARIO\PYGZhy{}DFHMDF}\PYG{l+s+s2}{\PYGZdq{}}
        \PYG{n}{onclick}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{submitform(this.value)}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Retrieving and testing the PF key value in the INPUT scenario:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    COPY\PYGZdl{} INPUT\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=\PYGZsq{}pf\PYGZsq{},VAR=\PYGZsq{}PF\PYGZsq{}
    IF\PYGZdl{} NOT\PYGZhy{}FOUND,THEN=NOPARAMS
    CASE\PYGZdl{} \PYGZsq{}PF\PYGZsq{},(NE,\PYGZsq{}SCENARIO\PYGZhy{}DFHMDF\PYGZsq{},NOPARAMS)
* generate the screen capture:
    COPY\PYGZdl{} OUTPUT\PYGZhy{}FILE\PYGZhy{}TO\PYGZhy{}VARIABLE, *
        FILE=\PYGZsq{}DFHMDF.TXT\PYGZsq{},VAR=\PYGZsq{}CAPTURE\PYGZsq{}
* send result to browser
    SEND\PYGZdl{} AS\PYGZhy{}FILE,VAR=\PYGZsq{}CAPTURE\PYGZsq{}, *
        TYPE=\PYGZsq{}text/plain\PYGZsq{},NAME=\PYGZsq{}dfhmdf.asm\PYGZsq{}
NOPARAMS EQU *
\end{sphinxVerbatim}

\index{NULL\sphinxhyphen{}PF@\spxentry{NULL\sphinxhyphen{}PF}!pfkField@\spxentry{pfkField}}\index{pfkField@\spxentry{pfkField}!NULL\sphinxhyphen{}PF@\spxentry{NULL\sphinxhyphen{}PF}}\ignorespaces 

\subsubsection{The Null PF key}
\label{\detokenize{User_Guide:the-null-pf-key}}\label{\detokenize{User_Guide:index-56}}
\sphinxAtStartPar
A page template or JavaScript program can request VIRTEL to resend the contents of the current 3270 screen, without sending any input to the host application, by setting the pfkField to the value NULL\sphinxhyphen{}PF

\phantomsection\label{\detokenize{User_Guide:v462ug-setting-local-options}}
\index{Setting and unsetting local options@\spxentry{Setting and unsetting local options}}\ignorespaces 

\subsection{Setting and unsetting local options}
\label{\detokenize{User_Guide:setting-and-unsetting-local-options}}\label{\detokenize{User_Guide:index-57}}
\sphinxAtStartPar
The SET\sphinxhyphen{}LOCAL\sphinxhyphen{}OPTIONS and UNSET\sphinxhyphen{}LOCAL\sphinxhyphen{}OPTIONS tags allow the activation or deactivation of miscellaneous processing options associated with HTML generation. These options are normally deactivated, but any or all of them can be activated by default using the HTSETn parameters in the VIRTCT. Refer to the VIRTEL Installation Guide for details of the HTSETn parameters. The SET\sphinxhyphen{}LOCAL\sphinxhyphen{}OPTIONS and UNSET\sphinxhyphen{}LOCAL\sphinxhyphen{}OPTIONS tags apply only to the current page, and take effect from the point in the page at which they appear.

\sphinxAtStartPar
The options which can be specified are:
\begin{description}
\sphinxlineitem{AUTO\sphinxhyphen{}INCREMENT\sphinxhyphen{}VARIABLES}
\sphinxAtStartPar
When this option is activated, table variables referenced outside a FOR\sphinxhyphen{}EACH\sphinxhyphen{}VALUE\sphinxhyphen{}IN loop will be automatically advanced to their next value each time they are reused. If this option is not active, the CURRENT\sphinxhyphen{}VALUE\sphinxhyphen{}OF tag always produces the first value of a table variable when it is referenced outside a loop.

\sphinxlineitem{BLANK\sphinxhyphen{}BINARY\sphinxhyphen{}ZEROES}
\sphinxAtStartPar
Affects the processing of the COPY\sphinxhyphen{}FROM and GENERATE\sphinxhyphen{}VARIABLES tags (see {\hyperref[\detokenize{User_Guide:v462ug-inserting-host-data}]{\sphinxcrossref{\DUrole{std,std-ref}{“Inserting host application data in a page”}}}}).

\sphinxlineitem{DO\sphinxhyphen{}NOT\sphinxhyphen{}IGNORE\sphinxhyphen{}BINARY\sphinxhyphen{}ZEROES}
\sphinxAtStartPar
When this option is activated, then all 3270 NUL characters in input fields generated by VIRTEL will be sent to the browser as SUB characters (x’1A’). When this option is not activated, then VIRTEL will remove 3270 NUL characters from input fields.

\sphinxlineitem{HTML\sphinxhyphen{}ESCAPES, JAVASCRIPT\sphinxhyphen{}ESCAPES, JSON\sphinxhyphen{}ESCAPES, NO\sphinxhyphen{}ESCAPES, XML\sphinxhyphen{}ESCAPES}
\sphinxAtStartPar
Affects the processing of the CURRENT\sphinxhyphen{}VALUE\sphinxhyphen{}OF, TRIMMED\sphinxhyphen{}VALUE\sphinxhyphen{}OF and NO\sphinxhyphen{}BLANKS\sphinxhyphen{}VALUE\sphinxhyphen{}OF tags (see {\hyperref[\detokenize{User_Guide:v462ug-table-variables}]{\sphinxcrossref{\DUrole{std,std-ref}{“Handling table variables”}}}}). Similarly affects the processing of the values generated by GENERATEVARIABLES.

\sphinxlineitem{ID}
\sphinxAtStartPar
Indicates that VIRTEL will generate HTML input fields with the parameter “id” in addition to the “name” parameter. The “id” has the same value as the “name”. This is intended for use with JavaScript code which refers to VIRTELgenerated fields using the getElementById method.

\sphinxlineitem{MAXLENGTH}
\sphinxAtStartPar
Indicates that VIRTEL will generate HTML input fields with the parameter “maxlength” in addition to “size”. The “maxlength” parameter ensures that the number of characters that can be entered into an HTML field does not exceed the 3270 field length. By default, VIRTEL does not generate “maxlength”, which allows an unlimited number of characters to be entered in each HTML field, and VIRTEL truncates the value as necessary before sending the data to the host application.

\sphinxlineitem{MDT\sphinxhyphen{}IF\sphinxhyphen{}RECEIVED}
\sphinxAtStartPar
When this option is activated, VIRTEL will consider all input fields received from the browser to be “modified” fields to be sent to the host application. Fields in the page not received from the browser are considered to be unmodified and are not sent to the host application. When this option is not activated, VIRTEL inspects the contents of all fields received from the browser to determine whether the field has been modified. VIRTEL sends modified fields to the host application, and any fields not received from the browser are sent as empty fields. Notes: (1) This option must be coded in the page template before the fields to which it applies. (2) This option cannot be specified in the VIRTCT.

\sphinxlineitem{NO\sphinxhyphen{}ADD\sphinxhyphen{}TO\sphinxhyphen{}CHECKBOX}
\sphinxAtStartPar
When this option is activated, HTML attributes defined within an ADD\sphinxhyphen{}TO\sphinxhyphen{}FIELDS tag are not added to \textless{}input type=checkbox\textgreater{} clauses generated by the GENERATE\sphinxhyphen{}HTML tag in conjunction with the FIELD\$ IS\sphinxhyphen{}BINARY\sphinxhyphen{}CHOICE instruction.

\sphinxlineitem{NO\sphinxhyphen{}ADD\sphinxhyphen{}TO\sphinxhyphen{}LISTBOX}
\sphinxAtStartPar
When this option is activated, HTML attributes defined within an ADD\sphinxhyphen{}TO\sphinxhyphen{}FIELDS tag are not added to \textless{}select\textgreater{} clauses generated by the GENERATE\sphinxhyphen{}HTML tag in conjunction with the FIELD\$ DEFINE\sphinxhyphen{}CHOICE or FIELD\$ DEFINEVARIABLE\sphinxhyphen{}CHOICE instructions.

\sphinxlineitem{OPTION\sphinxhyphen{}DEFAULT\sphinxhyphen{}COMPATIBILITY}
\sphinxAtStartPar
As of V4.62, this option is no longer supported.

\sphinxlineitem{TRACE\sphinxhyphen{}LINE}
\sphinxAtStartPar
Setting this option within a page starts a VIRTEL line trace on the HTTP line. Unsetting this option stops the line trace. Refer to the VIRTEL Messages and Operations Guide for more information about line traces.

\sphinxlineitem{TRACE\sphinxhyphen{}RELAY}
\sphinxAtStartPar
Setting this option within a page starts a VIRTEL terminal trace on the VTAM session. Unsetting this option stops the terminal trace. Refer to the VIRTEL Messages and Operations Guide for more information about terminal traces.

\end{description}

\index{SET\sphinxhyphen{}LOCAL\sphinxhyphen{}OPTIONS@\spxentry{SET\sphinxhyphen{}LOCAL\sphinxhyphen{}OPTIONS}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!SET\sphinxhyphen{}LOCAL\sphinxhyphen{}OPTIONS@\spxentry{SET\sphinxhyphen{}LOCAL\sphinxhyphen{}OPTIONS}}\ignorespaces 

\subsubsection{SET\sphinxhyphen{}LOCAL\sphinxhyphen{}OPTIONS tag}
\label{\detokenize{User_Guide:set-local-options-tag}}\label{\detokenize{User_Guide:index-58}}
\sphinxAtStartPar
The SET\sphinxhyphen{}LOCAL\sphinxhyphen{}OPTIONS tag activates one or more HTML processing options for the remainder of the current page, or until deactivated by UNSET\sphinxhyphen{}LOCAL\sphinxhyphen{}OPTIONS:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{SET}\PYG{o}{\PYGZhy{}}\PYG{n}{LOCAL}\PYG{o}{\PYGZhy{}}\PYG{n}{OPTIONS} \PYG{p}{(}\PYG{n}{option}\PYG{p}{,} \PYG{n}{option}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{)} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{option}
\sphinxAtStartPar
one or more HTML processing options as described above

\end{description}

\index{UNSET\sphinxhyphen{}LOCAL\sphinxhyphen{}OPTIONS@\spxentry{UNSET\sphinxhyphen{}LOCAL\sphinxhyphen{}OPTIONS}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!UNSET\sphinxhyphen{}LOCAL\sphinxhyphen{}OPTIONS@\spxentry{UNSET\sphinxhyphen{}LOCAL\sphinxhyphen{}OPTIONS}}\ignorespaces 

\subsubsection{UNSET\sphinxhyphen{}LOCAL\sphinxhyphen{}OPTIONS tag}
\label{\detokenize{User_Guide:unset-local-options-tag}}\label{\detokenize{User_Guide:index-59}}
\sphinxAtStartPar
The UNSET\sphinxhyphen{}LOCAL\sphinxhyphen{}OPTIONS tag deactivates one or more HTML processing options previously activated by SET\sphinxhyphen{}LOCALOPTIONS or by HTSETn. The specified options are deactivated for the remainder of the current page, or until reactivated by SET\sphinxhyphen{}LOCAL\sphinxhyphen{}OPTIONS:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{UNSET}\PYG{o}{\PYGZhy{}}\PYG{n}{LOCAL}\PYG{o}{\PYGZhy{}}\PYG{n}{OPTIONS} \PYG{p}{(}\PYG{n}{option}\PYG{p}{,} \PYG{n}{option}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{)} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{option}
\sphinxAtStartPar
one or more HTML processing options as described above.

\end{description}
\phantomsection\label{\detokenize{User_Guide:v462ug-table-variables}}
\index{Handling table variables@\spxentry{Handling table variables}}\index{Virtel Structured field@\spxentry{Virtel Structured field}!FAE5 and FAE6@\spxentry{FAE5 and FAE6}}\index{FAE5 and FAE6@\spxentry{FAE5 and FAE6}!Virtel Structured field@\spxentry{Virtel Structured field}}\ignorespaces 

\subsection{Handling table variables}
\label{\detokenize{User_Guide:handling-table-variables}}\label{\detokenize{User_Guide:index-60}}
\sphinxAtStartPar
A table variable is a list of values sent to VIRTEL by a host application in a structured field of type “FAE5 or FAE6”,\textasciicircum{}page 247. Table variables may also be created by means of a VIRTEL tag embedded in the page template (see {\hyperref[\detokenize{User_Guide:v462ug-create-variable-from}]{\sphinxcrossref{\DUrole{std,std-ref}{“CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}FROM”}}}}), via a scenario (see {\hyperref[\detokenize{User_Guide:v462ug-copy}]{\sphinxcrossref{\DUrole{std,std-ref}{“COPY\$ instructions”}}}}), or by means of a S VARIABLE command contained in the host 3270 data stream (see {\hyperref[\detokenize{User_Guide:v462ug-host4web}]{\sphinxcrossref{\DUrole{std,std-ref}{“HOST4WEB commands”}}}}).

\index{FOR\sphinxhyphen{}EACH\sphinxhyphen{}VALUE@\spxentry{FOR\sphinxhyphen{}EACH\sphinxhyphen{}VALUE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!FOR\sphinxhyphen{}EACH\sphinxhyphen{}VALUE@\spxentry{FOR\sphinxhyphen{}EACH\sphinxhyphen{}VALUE}}\ignorespaces 

\subsubsection{FOR\sphinxhyphen{}EACH\sphinxhyphen{}VALUE\sphinxhyphen{}IN tag}
\label{\detokenize{User_Guide:for-each-value-in-tag}}\label{\detokenize{User_Guide:index-61}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{FOR}\PYG{o}{\PYGZhy{}}\PYG{n}{EACH}\PYG{o}{\PYGZhy{}}\PYG{n}{VALUE}\PYG{o}{\PYGZhy{}}\PYG{n}{IN} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{varname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The FOR\sphinxhyphen{}EACH\sphinxhyphen{}VALUE\sphinxhyphen{}IN tag marks the start of a loop. varname is the name of a table variable. VIRTEL generates everything between the FOR\sphinxhyphen{}EACH\sphinxhyphen{}VALUE\sphinxhyphen{}IN tag and the END\sphinxhyphen{}FOR tag once for each value in varname. If varname has no values then nothing is generated. The current value of varname, and of any other table variables referenced in the loop, changes when the END\sphinxhyphen{}FOR tag is encountered.

\index{CURRENT\sphinxhyphen{}VALUE\sphinxhyphen{}OF@\spxentry{CURRENT\sphinxhyphen{}VALUE\sphinxhyphen{}OF}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!CURRENT\sphinxhyphen{}VALUE\sphinxhyphen{}OF@\spxentry{CURRENT\sphinxhyphen{}VALUE\sphinxhyphen{}OF}}\ignorespaces 

\subsubsection{CURRENT\sphinxhyphen{}VALUE\sphinxhyphen{}OF tag}
\label{\detokenize{User_Guide:current-value-of-tag}}\label{\detokenize{User_Guide:index-62}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{CURRENT}\PYG{o}{\PYGZhy{}}\PYG{n}{VALUE}\PYG{o}{\PYGZhy{}}\PYG{n}{OF} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{varname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The CURRENT\sphinxhyphen{}VALUE\sphinxhyphen{}OF tag is used in a loop bracketed by the FOR\sphinxhyphen{}EACH\sphinxhyphen{}VALUE\sphinxhyphen{}IN and END\sphinxhyphen{}FOR tags. varname is the name of a table variable. If it is the variable named in the FOR\sphinxhyphen{}EACH\sphinxhyphen{}VALUE\sphinxhyphen{}IN tag, it determines the number of iterations of the loops. Otherwise, its value is simply changed when the END\sphinxhyphen{}FOR tag is encountered.

\sphinxAtStartPar
The CURRENT\sphinxhyphen{}VALUE\sphinxhyphen{}OF tag also allows variables to be inserted in a template page outside of a FOR\sphinxhyphen{}EACH\sphinxhyphen{}VALUE\sphinxhyphen{}IN loop. In this case, the variable varname must have been created from the HTTP request by an INPUT scenario by means of the COPY\$ INPUT\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE instruction.

\sphinxAtStartPar
The local options HTML\sphinxhyphen{}ESCAPES, JAVASCRIPT\sphinxhyphen{}ESCAPES, JSON\sphinxhyphen{}ESCAPES, NO\sphinxhyphen{}ESCAPES, and XML\sphinxhyphen{}ESCAPES (see {\hyperref[\detokenize{User_Guide:v462ug-setting-local-options}]{\sphinxcrossref{\DUrole{std,std-ref}{“Setting and unsetting local options”}}}}) may affect the processing of this tag.

\sphinxAtStartPar
If the HTML\sphinxhyphen{}ESCAPES local option is set, special characters in the value of the variable will be replaced by the corresponding HTML escape sequence as shown in the table below:\sphinxhyphen{}


\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TT}
\sphinxtoprule
\sphinxstyletheadfamily 
\sphinxAtStartPar
Character
&\sphinxstyletheadfamily 
\sphinxAtStartPar
HTML escape sequence
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook
\sphinxAtStartPar
\textless{}
&
\sphinxAtStartPar
\&lt;
\\
\sphinxhline
\sphinxAtStartPar
\textgreater{}
&
\sphinxAtStartPar
\&gt;
\\
\sphinxhline
\sphinxAtStartPar
“
&
\sphinxAtStartPar
\&quote;
\\
\sphinxhline
\sphinxAtStartPar
\&
&
\sphinxAtStartPar
\&amp;
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}

\sphinxAtStartPar
If the JAVASCRIPT\sphinxhyphen{}ESCAPES local option is set, special characters in the value of the variable will be replaced by the corresponding JavaScript escape sequence as shown in the table below:\sphinxhyphen{}


\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TT}
\sphinxtoprule
\sphinxstyletheadfamily 
\sphinxAtStartPar
Character
&\sphinxstyletheadfamily 
\sphinxAtStartPar
JavaScript escape sequence
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook
\sphinxAtStartPar
“
&
\sphinxAtStartPar
\textbackslash{}”
\\
\sphinxhline
\sphinxAtStartPar
‘
&
\sphinxAtStartPar
\textbackslash{}’
\\
\sphinxhline
\sphinxAtStartPar
\textbackslash{}
&
\sphinxAtStartPar
\textbackslash{} \textbackslash{}
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}

\sphinxAtStartPar
If the JSON\sphinxhyphen{}ESCAPES local option is set, special characters in the value of the variable will be replaced by the corresponding JSON escape sequence as shown in the table below:\sphinxhyphen{}


\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TT}
\sphinxtoprule
\sphinxstyletheadfamily 
\sphinxAtStartPar
Character
&\sphinxstyletheadfamily 
\sphinxAtStartPar
JSON escape sequence
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook
\sphinxAtStartPar
“
&
\sphinxAtStartPar
\textbackslash{}”
\\
\sphinxhline
\sphinxAtStartPar
\textbackslash{}
&
\sphinxAtStartPar
\textbackslash{} \textbackslash{}
\\
\sphinxhline
\sphinxAtStartPar
Hex 00 to 1f
&
\sphinxAtStartPar
\textbackslash{}uxxxx
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}

\sphinxAtStartPar
If the XML\sphinxhyphen{}ESCAPES local option is set, special characters in the value of the variable will be replaced by the corresponding XML escape sequence as shown in the table below:\sphinxhyphen{}


\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TT}
\sphinxtoprule
\sphinxtableatstartofbodyhook
\sphinxAtStartPar
Character
&
\sphinxAtStartPar
HTML escape sequence
\\
\sphinxhline
\sphinxAtStartPar
\textless{}
&
\sphinxAtStartPar
\&\#60;
\\
\sphinxhline
\sphinxAtStartPar
\textgreater{}
&
\sphinxAtStartPar
\&\#62;
\\
\sphinxhline
\sphinxAtStartPar
“
&
\sphinxAtStartPar
"
\\
\sphinxhline
\sphinxAtStartPar
\&
&
\sphinxAtStartPar
\&\#38;
\\
\sphinxhline
\sphinxAtStartPar
‘
&
\sphinxAtStartPar
\textquotesingle{}
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}

\sphinxAtStartPar
Setting any of the HTML\sphinxhyphen{}ESCAPES, JAVASCRIPT\sphinxhyphen{}ESCAPES, JSON\sphinxhyphen{}ESCAPES, or XML\sphinxhyphen{}ESCAPES local options causes the other options to be automatically unset.

\sphinxAtStartPar
Setting the NO\sphinxhyphen{}ESCAPES local option disables all escape processing.

\index{NO\sphinxhyphen{}BLANKS\sphinxhyphen{}VALUE@\spxentry{NO\sphinxhyphen{}BLANKS\sphinxhyphen{}VALUE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!NO\sphinxhyphen{}BLANKS\sphinxhyphen{}VALUE@\spxentry{NO\sphinxhyphen{}BLANKS\sphinxhyphen{}VALUE}}\ignorespaces 

\subsubsection{NO\sphinxhyphen{}BLANKS\sphinxhyphen{}VALUE\sphinxhyphen{}OF tag}
\label{\detokenize{User_Guide:no-blanks-value-of-tag}}\label{\detokenize{User_Guide:index-63}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{NO}\PYG{o}{\PYGZhy{}}\PYG{n}{BLANKS}\PYG{o}{\PYGZhy{}}\PYG{n}{VALUE}\PYG{o}{\PYGZhy{}}\PYG{n}{OF} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{varname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The NO\sphinxhyphen{}BLANKS\sphinxhyphen{}VALUE\sphinxhyphen{}OF tag is similar to the CURRENT\sphinxhyphen{}VALUE\sphinxhyphen{}OF tag, but the value is truncated at the first blank.


\subsubsection{TRIMMED\sphinxhyphen{}VALUE\sphinxhyphen{}OF tag}
\label{\detokenize{User_Guide:trimmed-value-of-tag}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{TRIMMED}\PYG{o}{\PYGZhy{}}\PYG{n}{VALUE}\PYG{o}{\PYGZhy{}}\PYG{n}{OF} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{varname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The TRIMMED\sphinxhyphen{}VALUE\sphinxhyphen{}OF tag is similar to the CURRENT\sphinxhyphen{}VALUE\sphinxhyphen{}OF tag, except that leading and trailing blanks (if any) are removed from the value before it is substituted in the page.


\subsubsection{END\sphinxhyphen{}FOR tag}
\label{\detokenize{User_Guide:end-for-tag}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{FOR} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{varname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The END\sphinxhyphen{}FOR tag marks the end of a loop started by the FOR\sphinxhyphen{}EACH\sphinxhyphen{}VALUE\sphinxhyphen{}IN tag.

\index{ADVANCE\sphinxhyphen{}TO\sphinxhyphen{}THE\sphinxhyphen{}NEXT\sphinxhyphen{}VALUE\sphinxhyphen{}OF@\spxentry{ADVANCE\sphinxhyphen{}TO\sphinxhyphen{}THE\sphinxhyphen{}NEXT\sphinxhyphen{}VALUE\sphinxhyphen{}OF}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!ADVANCE\sphinxhyphen{}TO\sphinxhyphen{}THE\sphinxhyphen{}NEXT\sphinxhyphen{}VALUE\sphinxhyphen{}OF@\spxentry{ADVANCE\sphinxhyphen{}TO\sphinxhyphen{}THE\sphinxhyphen{}NEXT\sphinxhyphen{}VALUE\sphinxhyphen{}OF}}\ignorespaces 

\subsubsection{ADVANCE\sphinxhyphen{}TO\sphinxhyphen{}NEXT\sphinxhyphen{}VALUE\sphinxhyphen{}OF}
\label{\detokenize{User_Guide:advance-to-next-value-of}}\label{\detokenize{User_Guide:index-64}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{ADVANCE}\PYG{o}{\PYGZhy{}}\PYG{n}{TO}\PYG{o}{\PYGZhy{}}\PYG{n}{NEXT}\PYG{o}{\PYGZhy{}}\PYG{n}{VALUE}\PYG{o}{\PYGZhy{}}\PYG{n}{OF} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{varname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The ADVANCE\sphinxhyphen{}TO\sphinxhyphen{}NEXT\sphinxhyphen{}VALUE\sphinxhyphen{}OF tag causes subsequent references to the table variable varname (via the CURRENTVALUE\sphinxhyphen{}OF tag, the TRIMMED\sphinxhyphen{}VALUE\sphinxhyphen{}OF tag, or the NO\sphinxhyphen{}BLANKS\sphinxhyphen{}VALUE\sphinxhyphen{}OF tag) to refer to the next value in the table.

\index{DO\sphinxhyphen{}COUNT\sphinxhyphen{}UP\sphinxhyphen{}WITH@\spxentry{DO\sphinxhyphen{}COUNT\sphinxhyphen{}UP\sphinxhyphen{}WITH}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!DO\sphinxhyphen{}COUNT\sphinxhyphen{}UP\sphinxhyphen{}WITH@\spxentry{DO\sphinxhyphen{}COUNT\sphinxhyphen{}UP\sphinxhyphen{}WITH}}\ignorespaces 

\subsubsection{DO\sphinxhyphen{}COUNT\sphinxhyphen{}UP\sphinxhyphen{}WITH tag}
\label{\detokenize{User_Guide:do-count-up-with-tag}}\label{\detokenize{User_Guide:index-65}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{DO}\PYG{o}{\PYGZhy{}}\PYG{n}{COUNT}\PYG{o}{\PYGZhy{}}\PYG{n}{UP}\PYG{o}{\PYGZhy{}}\PYG{n}{WITH} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{varname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The DO\sphinxhyphen{}COUNT\sphinxhyphen{}UP\sphinxhyphen{}WITH tag marks the start of a loop. varname is the name of a variable. VIRTEL generates everything between the DO\sphinxhyphen{}COUNT\sphinxhyphen{}UP\sphinxhyphen{}WITH tag and the END\sphinxhyphen{}DO\sphinxhyphen{}COUNT tag n times, where n is the current value of varname. During the execution of the loop, the value of varname varies from 1 to n, and other table variables referenced in the loop change when the END\sphinxhyphen{}DO\sphinxhyphen{}COUNT tag is encountered.

\index{END\sphinxhyphen{}DO\sphinxhyphen{}COUNT@\spxentry{END\sphinxhyphen{}DO\sphinxhyphen{}COUNT}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!END\sphinxhyphen{}DO\sphinxhyphen{}COUNT@\spxentry{END\sphinxhyphen{}DO\sphinxhyphen{}COUNT}}\ignorespaces 

\subsubsection{END\sphinxhyphen{}DO\sphinxhyphen{}COUNT tag}
\label{\detokenize{User_Guide:end-do-count-tag}}\label{\detokenize{User_Guide:index-66}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{DO}\PYG{o}{\PYGZhy{}}\PYG{n}{COUNT} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{varname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The END\sphinxhyphen{}DO\sphinxhyphen{}COUNT tag marks the end of a loop started by the DO\sphinxhyphen{}COUNT\sphinxhyphen{}UP\sphinxhyphen{}WITH tag.

\index{DEFINE\sphinxhyphen{}AUTOMATIV\sphinxhyphen{}COUNTER@\spxentry{DEFINE\sphinxhyphen{}AUTOMATIV\sphinxhyphen{}COUNTER}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!DEFINE\sphinxhyphen{}AUTOMATIV\sphinxhyphen{}COUNTER@\spxentry{DEFINE\sphinxhyphen{}AUTOMATIV\sphinxhyphen{}COUNTER}}\ignorespaces 

\subsubsection{DEFINE\sphinxhyphen{}AUTOMATIC\sphinxhyphen{}COUNTER tag}
\label{\detokenize{User_Guide:define-automatic-counter-tag}}\label{\detokenize{User_Guide:index-67}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{DEFINE}\PYG{o}{\PYGZhy{}}\PYG{n}{AUTOMATIC}\PYG{o}{\PYGZhy{}}\PYG{n}{COUNTER} \PYG{p}{(}\PYG{n}{init}\PYG{p}{,} \PYG{n}{incr}\PYG{p}{,} \PYG{n+nb}{max}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{varname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The DEFINE\sphinxhyphen{}AUTOMATIC\sphinxhyphen{}COUNTER tag allows automatic generation of a counter variable in a loop started by the FOREACH\sphinxhyphen{}VALUE\sphinxhyphen{}IN tag. The parameters are:
\begin{description}
\sphinxlineitem{init}
\sphinxAtStartPar
the initial value of the counter variable

\sphinxlineitem{incr}
\sphinxAtStartPar
the increment added at each END\sphinxhyphen{}FOR

\sphinxlineitem{max}
\sphinxAtStartPar
the maximum value of the counter variable

\sphinxlineitem{varname}
\sphinxAtStartPar
the name of the counter variable

\end{description}

\sphinxAtStartPar
The variable generated can be the loop master variable (the variable named in the FOR\sphinxhyphen{}EACH\sphinxhyphen{}VALUE\sphinxhyphen{}IN) or a slave variable. When the counter reaches its maximum value, the loop terminates if it is the master, or continues if it is the slave. In the latter case the counter variable starts again from its initial value.

\index{DEFINE\sphinxhyphen{}SUB\sphinxhyphen{}VARIABLE@\spxentry{DEFINE\sphinxhyphen{}SUB\sphinxhyphen{}VARIABLE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!DEFINE\sphinxhyphen{}SUB\sphinxhyphen{}VARIABLE@\spxentry{DEFINE\sphinxhyphen{}SUB\sphinxhyphen{}VARIABLE}}\ignorespaces 

\subsubsection{DEFINE\sphinxhyphen{}SUB\sphinxhyphen{}VARIABLE tag}
\label{\detokenize{User_Guide:define-sub-variable-tag}}\label{\detokenize{User_Guide:index-68}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{DEFINE}\PYG{o}{\PYGZhy{}}\PYG{n}{SUB}\PYG{o}{\PYGZhy{}}\PYG{n}{VARIABLE} \PYG{p}{(}\PYG{n}{offset}\PYG{p}{,} \PYG{n}{length}\PYG{p}{,} \PYG{n}{count}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{subname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The DEFINE\sphinxhyphen{}SUB\sphinxhyphen{}VARIABLE tag allows a sub\sphinxhyphen{}variable to be defined. A sub\sphinxhyphen{}variable remaps part of the current value of the loop master variable in a FOR\sphinxhyphen{}EACH\sphinxhyphen{}VALUE\sphinxhyphen{}IN loop. The parameters are:
\begin{description}
\sphinxlineitem{offset}
\sphinxAtStartPar
the offset of the sub\sphinxhyphen{}variable in the loop master variable

\sphinxlineitem{length}
\sphinxAtStartPar
the length (in characters) of the sub\sphinxhyphen{}variable

\sphinxlineitem{count}
\sphinxAtStartPar
the number of occurrences of the sub\sphinxhyphen{}variable

\sphinxlineitem{subname}
\sphinxAtStartPar
the name of the sub\sphinxhyphen{}variable

\end{description}

\sphinxAtStartPar
A sub\sphinxhyphen{}variable consists of count values, each of length bytes, starting at offset in the loop master variable. The first byte of the loop master variable is considered to be offset 0. Sub\sphinxhyphen{}variables are defined outside but referenced within a FOR\sphinxhyphen{}EACH\sphinxhyphen{}VALUE\sphinxhyphen{}IN loop. A sub\sphinxhyphen{}variable can be referenced wherever a normal table variable would be valid, including the loop master variable of an inner FOR\sphinxhyphen{}EACH\sphinxhyphen{}VALUE\sphinxhyphen{}IN loop, which could in itself be redefined by other sub\sphinxhyphen{}variables. When the sub\sphinxhyphen{}variable is referenced, it acts as an implicit redefinition of the current value of the master variable of the innermost FOR\sphinxhyphen{}EACH\sphinxhyphen{}VALUE\sphinxhyphen{}IN loop in which the reference appears. Thus, the same sub\sphinxhyphen{}variable could possibly redefine different loop master variables if it is referenced in more than one place.

\index{Virtel Structured field@\spxentry{Virtel Structured field}!FAE5 Example@\spxentry{FAE5 Example}}\index{FAE5 Example@\spxentry{FAE5 Example}!Virtel Structured field@\spxentry{Virtel Structured field}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{Examples}

\sphinxAtStartPar
A host application uses an FAE5 structured field to create a table variable called HOSTDATA. The HOSTDATA variable consists of an array of 20\sphinxhyphen{}byte records. Each record consists of an 8\sphinxhyphen{}byte key, followed by six 2\sphinxhyphen{}byte codes. The following code generates an HTML table from this data. Each row of the table contains the row number, the key, and the codes. A hyperlink is generated for each code, by removing any trailing blanks from the code and appending “.html”:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{DEFINE}\PYG{o}{\PYGZhy{}}\PYG{n}{AUTOMATIC}\PYG{o}{\PYGZhy{}}\PYG{n}{COUNTER} \PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{9999}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ROWNUM}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{DEFINE}\PYG{o}{\PYGZhy{}}\PYG{n}{SUB}\PYG{o}{\PYGZhy{}}\PYG{n}{VARIABLE} \PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{,} \PYG{l+m+mi}{8}\PYG{p}{,} \PYG{l+m+mi}{1}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{KEY}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{DEFINE}\PYG{o}{\PYGZhy{}}\PYG{n}{SUB}\PYG{o}{\PYGZhy{}}\PYG{n}{VARIABLE} \PYG{p}{(}\PYG{l+m+mi}{8}\PYG{p}{,} \PYG{l+m+mi}{2}\PYG{p}{,} \PYG{l+m+mi}{6}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CODES}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{o}{\PYGZlt{}}\PYG{n}{table}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{n}{tr}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{n}{td}\PYG{o}{\PYGZgt{}}\PYG{n}{Row}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{td}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{n}{td}\PYG{o}{\PYGZgt{}}\PYG{n}{Key}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{td}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{n}{td} \PYG{n}{colspan}\PYG{o}{=}\PYG{l+m+mi}{6}\PYG{o}{\PYGZgt{}}\PYG{n}{Codes}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{td}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{tr}\PYG{o}{\PYGZgt{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{FOR}\PYG{o}{\PYGZhy{}}\PYG{n}{EACH}\PYG{o}{\PYGZhy{}}\PYG{n}{VALUE}\PYG{o}{\PYGZhy{}}\PYG{n}{IN} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{HOSTDATA}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
    \PYG{o}{\PYGZlt{}}\PYG{n}{tr}\PYG{o}{\PYGZgt{}}
    \PYG{o}{\PYGZlt{}}\PYG{n}{td}\PYG{o}{\PYGZgt{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{CURRENT}\PYG{o}{\PYGZhy{}}\PYG{n}{VALUE}\PYG{o}{\PYGZhy{}}\PYG{n}{OF} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ROWNUM}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{td}\PYG{o}{\PYGZgt{}}
    \PYG{o}{\PYGZlt{}}\PYG{n}{td}\PYG{o}{\PYGZgt{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{CURRENT}\PYG{o}{\PYGZhy{}}\PYG{n}{VALUE}\PYG{o}{\PYGZhy{}}\PYG{n}{OF} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{KEY}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{td}\PYG{o}{\PYGZgt{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{FOR}\PYG{o}{\PYGZhy{}}\PYG{n}{EACH}\PYG{o}{\PYGZhy{}}\PYG{n}{VALUE}\PYG{o}{\PYGZhy{}}\PYG{n}{IN} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CODES}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
    \PYG{o}{\PYGZlt{}}\PYG{n}{td}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{n}{a} \PYG{n}{href}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZob{}\PYGZob{}}\PYG{l+s+s1}{\PYGZob{}}\PYG{l+s+s1}{NO\PYGZhy{}BLANKS\PYGZhy{}VALUE\PYGZhy{}OF }\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{CODES}\PYG{l+s+s1}{\PYGZdq{}}\PYG{l+s+s1}{\PYGZcb{}\PYGZcb{}\PYGZcb{}.html}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{\PYGZgt{}}
        \PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{CURRENT}\PYG{o}{\PYGZhy{}}\PYG{n}{VALUE}\PYG{o}{\PYGZhy{}}\PYG{n}{OF} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CODES}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{a}\PYG{o}{\PYGZgt{}}
    \PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{td}\PYG{o}{\PYGZgt{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{FOR} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CODES}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{tr}\PYG{o}{\PYGZgt{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{FOR} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{HOSTDATA}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{table}\PYG{o}{\PYGZgt{}}
\end{sphinxVerbatim}

\index{DELETE\sphinxhyphen{}ALL\sphinxhyphen{}VARIABLES@\spxentry{DELETE\sphinxhyphen{}ALL\sphinxhyphen{}VARIABLES}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!DELETE\sphinxhyphen{}ALL\sphinxhyphen{}VARIABLES@\spxentry{DELETE\sphinxhyphen{}ALL\sphinxhyphen{}VARIABLES}}\ignorespaces 

\subsubsection{DELETE\sphinxhyphen{}ALL\sphinxhyphen{}VARIABLES tag}
\label{\detokenize{User_Guide:delete-all-variables-tag}}\label{\detokenize{User_Guide:index-70}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{DELETE}\PYG{o}{\PYGZhy{}}\PYG{n}{ALL}\PYG{o}{\PYGZhy{}}\PYG{n}{VARIABLES}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{DELETE}\PYG{o}{\PYGZhy{}}\PYG{n}{ALL}\PYG{o}{\PYGZhy{}}\PYG{n}{VARIABLES} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{prefix}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The DELETE\sphinxhyphen{}ALL\sphinxhyphen{}VARIABLES tag deletes all variables in the VIRTEL variable pool. An optional prefix parameter allows deletion of only those variables whose names begin with the specified prefix.

\index{Inserting configuration values into a template@\spxentry{Inserting configuration values into a template}}\ignorespaces 

\subsection{Inserting VIRTEL configuration values into a template}
\label{\detokenize{User_Guide:inserting-virtel-configuration-values-into-a-template}}\label{\detokenize{User_Guide:index-71}}
\index{IP\sphinxhyphen{}ADDRESS\sphinxhyphen{}OF\sphinxhyphen{}LINE@\spxentry{IP\sphinxhyphen{}ADDRESS\sphinxhyphen{}OF\sphinxhyphen{}LINE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!IP\sphinxhyphen{}ADDRESS\sphinxhyphen{}OF\sphinxhyphen{}LINE@\spxentry{IP\sphinxhyphen{}ADDRESS\sphinxhyphen{}OF\sphinxhyphen{}LINE}}\ignorespaces 

\subsubsection{IP\sphinxhyphen{}ADDRESS\sphinxhyphen{}OF\sphinxhyphen{}LINE tag}
\label{\detokenize{User_Guide:ip-address-of-line-tag}}\label{\detokenize{User_Guide:index-72}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{IP}\PYG{o}{\PYGZhy{}}\PYG{n}{ADDRESS}\PYG{o}{\PYGZhy{}}\PYG{n}{OF}\PYG{o}{\PYGZhy{}}\PYG{n}{LINE} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{n\PYGZhy{}xxxxxx}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The IP\sphinxhyphen{}ADDRESS\sphinxhyphen{}OF\sphinxhyphen{}LINE tag will be replaced by the IP address of the specified VIRTEL line. For example, \{\{\{IPADDRESS\sphinxhyphen{}OF\sphinxhyphen{}LINE “H\sphinxhyphen{}HTTP”\}\}\} might generate 192.168.229.147.

\index{IP\sphinxhyphen{}PORT\sphinxhyphen{}OF\sphinxhyphen{}LINE@\spxentry{IP\sphinxhyphen{}PORT\sphinxhyphen{}OF\sphinxhyphen{}LINE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!IP\sphinxhyphen{}PORT\sphinxhyphen{}OF\sphinxhyphen{}LINE@\spxentry{IP\sphinxhyphen{}PORT\sphinxhyphen{}OF\sphinxhyphen{}LINE}}\ignorespaces 

\subsubsection{IP\sphinxhyphen{}PORT\sphinxhyphen{}OF\sphinxhyphen{}LINE tag}
\label{\detokenize{User_Guide:ip-port-of-line-tag}}\label{\detokenize{User_Guide:index-73}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{IP}\PYG{o}{\PYGZhy{}}\PYG{n}{PORT}\PYG{o}{\PYGZhy{}}\PYG{n}{OF}\PYG{o}{\PYGZhy{}}\PYG{n}{LINE} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{n\PYGZhy{}xxxxxx}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The IP\sphinxhyphen{}PORT\sphinxhyphen{}OF\sphinxhyphen{}LINE tag will be replaced by the port number of the specified VIRTEL line. For example, \{\{\{IP\sphinxhyphen{}PORT\sphinxhyphen{}OFLINE”H\sphinxhyphen{}HTTP”\}\}\} might generate 41000

\index{NAME\sphinxhyphen{}OF@\spxentry{NAME\sphinxhyphen{}OF}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!NAME\sphinxhyphen{}OF@\spxentry{NAME\sphinxhyphen{}OF}}\ignorespaces 

\subsubsection{NAME\sphinxhyphen{}OF tag}
\label{\detokenize{User_Guide:name-of-tag}}\label{\detokenize{User_Guide:index-74}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{NAME}\PYG{o}{\PYGZhy{}}\PYG{n}{OF} \PYG{p}{(}\PYG{n}{xxxxxx}\PYG{p}{)}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{NAME}\PYG{o}{\PYGZhy{}}\PYG{n}{OF} \PYG{p}{(}\PYG{n}{xxxxxx}\PYG{p}{,} \PYG{n+nb}{len}\PYG{p}{)}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The NAME\sphinxhyphen{}OF tag allows the insertion in a page of various data items related to the VIRTEL transaction in progress.
\begin{description}
\sphinxlineitem{xxxxxx}
\sphinxAtStartPar
the name of the data item to be inserted. Valid values are:
\begin{description}
\sphinxlineitem{VIRTEL}
\sphinxAtStartPar
The VIRTEL APPLID specified in the VIRTCT

\sphinxlineitem{RELAY}
\sphinxAtStartPar
The relay LU name used to connect to the host application

\sphinxlineitem{PRINT\sphinxhyphen{}RELAY}
\sphinxAtStartPar
The relay LU name of the associated printer

\sphinxlineitem{TERMINAL}
\sphinxAtStartPar
The DNS name or IP address of a terminal.

\sphinxlineitem{PSEUDO\sphinxhyphen{}TERMINAL}
\sphinxAtStartPar
The VIRTEL terminal name

\sphinxlineitem{ENTRY\sphinxhyphen{}POINT}
\sphinxAtStartPar
The VIRTEL entry point name

\sphinxlineitem{LINE\sphinxhyphen{}INTERNAL}
\sphinxAtStartPar
The internal name of the VIRTEL line

\sphinxlineitem{LINE\sphinxhyphen{}EXTERNAL}
\sphinxAtStartPar
The external name of the VIRTEL line

\sphinxlineitem{GROUP}
\sphinxAtStartPar
The user’s group name, if signon has occurred

\sphinxlineitem{USER}
\sphinxAtStartPar
The user’s user name, if signon has occurred

\sphinxlineitem{PASSWORD}
\sphinxAtStartPar
The user’s password, if signon has occurred

\sphinxlineitem{USER\sphinxhyphen{}IP\sphinxhyphen{}ADDRESS}
\sphinxAtStartPar
The IP address of the client terminal

\sphinxlineitem{SNA\sphinxhyphen{}STATUS}\begin{description}
\sphinxlineitem{The status of the host LU2 session:}\begin{itemize}
\item {} 
\sphinxAtStartPar
X: input is inhibited

\item {} 
\sphinxAtStartPar
blank: input is allowed

\end{itemize}

\end{description}

\sphinxlineitem{TRANSACTION\sphinxhyphen{}INTERNAL}
\sphinxAtStartPar
The internal name of the VIRTEL transaction

\sphinxlineitem{TRANSACTION\sphinxhyphen{}EXTERNAL}
\sphinxAtStartPar
The external name of the VIRTEL transaction

\sphinxlineitem{URL}
\sphinxAtStartPar
The URL excluding the query string

\sphinxlineitem{QUERY}
\sphinxAtStartPar
The query string from the URL

\sphinxlineitem{PAGE}
\sphinxAtStartPar
The name of the current HTML page template

\sphinxlineitem{PAGE\sphinxhyphen{}INTERNAL}
\sphinxAtStartPar
The name of the original HTML page template specified in the URL

\sphinxlineitem{DIRECTORY}
\sphinxAtStartPar
The current VIRTEL directory name

\sphinxlineitem{CHARACTER\sphinxhyphen{}SET}
\sphinxAtStartPar
The name of the current UTF\sphinxhyphen{}8 character set, or the country code if the page is not in UTF\sphinxhyphen{}8 mode (see {\hyperref[\detokenize{User_Guide:v462ug-ebcdic-translation}]{\sphinxcrossref{\DUrole{std,std-ref}{“EBCDIC translation management”}}}})

\sphinxlineitem{DATE\sphinxhyphen{}TIME}
\sphinxAtStartPar
The current date and time (14 characters in the format YYYYMMDDHHMMSS)

\sphinxlineitem{VIRTEL\sphinxhyphen{}VERSION}
\sphinxAtStartPar
The VIRTEL version number

\sphinxlineitem{xxx\sphinxhyphen{}SYMBOL}
\sphinxAtStartPar
The value of the system symbol xxx (only if SYSPLUS=YES is specified in the VIRTCT). Example: SYSNAME\sphinxhyphen{}SYMBOL

\sphinxlineitem{len}
\sphinxAtStartPar
An optional length. If specified, the value of the data item will be padded with blanks or truncated on the right to the specified length.

\end{description}

\end{description}

\sphinxAtStartPar
\sphinxstylestrong{Notes on using Terminal data item}

\sphinxAtStartPar
For this to work, it is necessary to specify a value to the 3rd sub\sphinxhyphen{}parameter of the TCP1= (or TCP2=) parameter in the VIRTCT. (Any value may be specified). Not yet implemented in VSE. For example:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{TCP1}\PYG{o}{=}\PYG{p}{(}\PYG{n}{TCPIP}\PYG{p}{,}\PYG{p}{,}\PYG{n}{DNS}\PYG{p}{,}\PYG{l+m+mi}{65535}\PYG{p}{)}\PYG{p}{,}
\end{sphinxVerbatim}

\sphinxAtStartPar
During Virtel integration, the following messages will appear in the Virtel log:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{+}\PYG{n}{VIRDNS1W} \PYG{n}{TKP1} \PYG{n}{DNS} \PYG{n}{SUBTASK} \PYG{n}{DNS}      \PYG{n}{STARTING} \PYG{n}{VIRDNS1}
\PYG{o}{+}\PYG{n}{VIRDNS2W} \PYG{n}{TKP1} \PYG{n}{DNS} \PYG{n}{SUBTASK} \PYG{n}{VIRDNS1}  \PYG{n}{STARTED}
\end{sphinxVerbatim}

\sphinxAtStartPar
An example scenario might look like:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,VAR=\PYGZsq{}TERMINAL\PYGZsq{},                      *
      FIELD=(NAME\PYGZhy{}OF,TERMINAL)
ERROR\PYGZdl{} 0,\PYGZsq{}TERMINAL: \PYGZsq{},\PYGZsq{}*TERMINAL\PYGZsq{}
\end{sphinxVerbatim}

\sphinxAtStartPar
The above example would disply this in the Virtel log:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{VIRHT51I} \PYG{n}{DEMOHTTP} \PYG{n}{CONNECTING} \PYG{n}{HTLOC005} \PYG{n}{TO} \PYG{l+m+mf}{192.168}\PYG{l+m+mf}{.092}\PYG{l+m+mf}{.058}\PYG{p}{:}\PYG{l+m+mi}{53786}
\PYG{n}{TERMINAL}\PYG{p}{:} \PYG{n}{w8}\PYG{o}{\PYGZhy{}}\PYG{n}{jmsaby}\PYG{o}{.}\PYG{n}{syspertec}\PYG{o}{.}\PYG{n}{com}
\end{sphinxVerbatim}

\index{NUMBER\sphinxhyphen{}OF@\spxentry{NUMBER\sphinxhyphen{}OF}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!NUMBER\sphinxhyphen{}OF@\spxentry{NUMBER\sphinxhyphen{}OF}}\ignorespaces 

\subsubsection{NUMBER\sphinxhyphen{}OF tag}
\label{\detokenize{User_Guide:number-of-tag}}\label{\detokenize{User_Guide:index-75}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{NUMBER}\PYG{o}{\PYGZhy{}}\PYG{n}{OF} \PYG{p}{(}\PYG{n}{xxxxxx}\PYG{p}{)}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The NUMBER\sphinxhyphen{}OF tag allows the insertion in a page of various data items related to the VIRTEL transaction in progress.
\begin{description}
\sphinxlineitem{xxxxxx}
\sphinxAtStartPar
The name of the data item to be inserted. Valid values are:

\sphinxlineitem{SCREEN\sphinxhyphen{}COLUMNS}
\sphinxAtStartPar
The width of the current host 3270 screen

\sphinxlineitem{SCREEN\sphinxhyphen{}LINES}
\sphinxAtStartPar
The depth of the current host 3270 screen

\end{description}

\index{Conditional generation@\spxentry{Conditional generation}}\ignorespaces 

\subsection{Conditional generation}
\label{\detokenize{User_Guide:conditional-generation}}\label{\detokenize{User_Guide:index-76}}
\index{AFTER\sphinxhyphen{}NOT\sphinxhyphen{}LAST\sphinxhyphen{}VALUE@\spxentry{AFTER\sphinxhyphen{}NOT\sphinxhyphen{}LAST\sphinxhyphen{}VALUE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!AFTER\sphinxhyphen{}NOT\sphinxhyphen{}LAST\sphinxhyphen{}VALUE@\spxentry{AFTER\sphinxhyphen{}NOT\sphinxhyphen{}LAST\sphinxhyphen{}VALUE}}\ignorespaces 

\subsubsection{AFTER\sphinxhyphen{}NOT\sphinxhyphen{}LAST\sphinxhyphen{}VALUE\sphinxhyphen{}OF tag}
\label{\detokenize{User_Guide:after-not-last-value-of-tag}}\label{\detokenize{User_Guide:index-77}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{AFTER}\PYG{o}{\PYGZhy{}}\PYG{n}{NOT}\PYG{o}{\PYGZhy{}}\PYG{n}{LAST}\PYG{o}{\PYGZhy{}}\PYG{n}{VALUE}\PYG{o}{\PYGZhy{}}\PYG{n}{OF} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{varname}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The AFTER\sphinxhyphen{}NOT\sphinxhyphen{}LAST\sphinxhyphen{}VALUE\sphinxhyphen{}OF tag brackets a section of the page which is to be generated for all except the last iteration of a FOR\sphinxhyphen{}EACH\sphinxhyphen{}VALUE\sphinxhyphen{}IN loop. The HTML content represented by “…” is generated unless the current value of the variable varname is the last in the table. The AFTER\sphinxhyphen{}NOT\sphinxhyphen{}LAST\sphinxhyphen{}VALUE\sphinxhyphen{}OF tag is useful, for example, when generating a comma\sphinxhyphen{}separated list of values, as shown in the example below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{[} \PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{FOR}\PYG{o}{\PYGZhy{}}\PYG{n}{EACH}\PYG{o}{\PYGZhy{}}\PYG{n}{VALUE}\PYG{o}{\PYGZhy{}}\PYG{n}{IN} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MYVAR}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZob{}\PYGZob{}}\PYG{l+s+s2}{\PYGZob{}}\PYG{l+s+s2}{CURRENT\PYGZhy{}VALUE\PYGZhy{}OF }\PYG{l+s+s2}{\PYGZdq{}}\PYG{n}{MYVAR}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZcb{}\PYGZcb{}\PYGZcb{} }\PYG{l+s+s2}{\PYGZdq{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{AFTER}\PYG{o}{\PYGZhy{}}\PYG{n}{NOT}\PYG{o}{\PYGZhy{}}\PYG{n}{LAST}\PYG{o}{\PYGZhy{}}\PYG{n}{VALUE}\PYG{o}{\PYGZhy{}}\PYG{n}{OF} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MYVAR}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{,}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{FOR} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MYVAR}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}} \PYG{p}{]}
\end{sphinxVerbatim}

\sphinxAtStartPar
If the variable myvar contains the values 1, 2, and 3, then this example would generate {[} “1”, “2”, “3” {]}

\index{IF\sphinxhyphen{}USER\sphinxhyphen{}IS\sphinxhyphen{}ALLOWED@\spxentry{IF\sphinxhyphen{}USER\sphinxhyphen{}IS\sphinxhyphen{}ALLOWED}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!IF\sphinxhyphen{}USER\sphinxhyphen{}IS\sphinxhyphen{}ALLOWED@\spxentry{IF\sphinxhyphen{}USER\sphinxhyphen{}IS\sphinxhyphen{}ALLOWED}}\ignorespaces 

\subsubsection{IF\sphinxhyphen{}USER\sphinxhyphen{}IS\sphinxhyphen{}ALLOWED\sphinxhyphen{}TO tag}
\label{\detokenize{User_Guide:if-user-is-allowed-to-tag}}\label{\detokenize{User_Guide:index-78}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{IF}\PYG{o}{\PYGZhy{}}\PYG{n}{USER}\PYG{o}{\PYGZhy{}}\PYG{n}{IS}\PYG{o}{\PYGZhy{}}\PYG{n}{ALLOWED}\PYG{o}{\PYGZhy{}}\PYG{n}{TO} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{resourcename}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The IF\sphinxhyphen{}USER\sphinxhyphen{}IS\sphinxhyphen{}ALLOWED\sphinxhyphen{}TO tag brackets a section of the page whose appearance is conditional on the user’s authorization to access the resource resourcename. The HTML content represented by “…” is generated only if the signed\sphinxhyphen{}on user is authorized to access the specified resource.

\index{WHEN\sphinxhyphen{}EXITS@\spxentry{WHEN\sphinxhyphen{}EXITS}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!WHEN\sphinxhyphen{}EXITS@\spxentry{WHEN\sphinxhyphen{}EXITS}}\index{END\sphinxhyphen{}WHEN\sphinxhyphen{}EXISTS@\spxentry{END\sphinxhyphen{}WHEN\sphinxhyphen{}EXISTS}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!END\sphinxhyphen{}WHEN\sphinxhyphen{}EXISTS@\spxentry{END\sphinxhyphen{}WHEN\sphinxhyphen{}EXISTS}}\ignorespaces 

\subsubsection{WHEN\sphinxhyphen{}EXISTS and END\sphinxhyphen{}WHEN\sphinxhyphen{}EXISTS tags}
\label{\detokenize{User_Guide:when-exists-and-end-when-exists-tags}}\label{\detokenize{User_Guide:index-79}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{WHEN}\PYG{o}{\PYGZhy{}}\PYG{n}{EXISTS} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{varname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{WHEN}\PYG{o}{\PYGZhy{}}\PYG{n}{EXISTS} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{varname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The WHEN\sphinxhyphen{}EXISTS and END\sphinxhyphen{}WHEN\sphinxhyphen{}EXISTS tags bracket a section of the page whose appearance is conditional on the existence of a named table variable. The variable can be created by a VIRTEL Web Integration application using the FAE5 or FAE6 structured fields, or it can be created by a scenario. The HTML content represented by “…” is generated only if the named variable exists in the context of the current page and has at least one value.

\index{WHEN\sphinxhyphen{}NOT\sphinxhyphen{}EXITS@\spxentry{WHEN\sphinxhyphen{}NOT\sphinxhyphen{}EXITS}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!WHEN\sphinxhyphen{}NOT\sphinxhyphen{}EXITS@\spxentry{WHEN\sphinxhyphen{}NOT\sphinxhyphen{}EXITS}}\index{END\sphinxhyphen{}WHEN\sphinxhyphen{}NOT\sphinxhyphen{}EXISTS@\spxentry{END\sphinxhyphen{}WHEN\sphinxhyphen{}NOT\sphinxhyphen{}EXISTS}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!END\sphinxhyphen{}WHEN\sphinxhyphen{}NOT\sphinxhyphen{}EXISTS@\spxentry{END\sphinxhyphen{}WHEN\sphinxhyphen{}NOT\sphinxhyphen{}EXISTS}}\ignorespaces 

\subsubsection{WHEN\sphinxhyphen{}NOT\sphinxhyphen{}EXISTS and END\sphinxhyphen{}WHEN\sphinxhyphen{}NOT\sphinxhyphen{}EXISTS tags}
\label{\detokenize{User_Guide:when-not-exists-and-end-when-not-exists-tags}}\label{\detokenize{User_Guide:index-80}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{WHEN}\PYG{o}{\PYGZhy{}}\PYG{n}{NOT}\PYG{o}{\PYGZhy{}}\PYG{n}{EXISTS} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{varname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{WHEN}\PYG{o}{\PYGZhy{}}\PYG{n}{NOT}\PYG{o}{\PYGZhy{}}\PYG{n}{EXISTS} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{varname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The WHEN\sphinxhyphen{}NOT\sphinxhyphen{}EXISTS and END\sphinxhyphen{}WHEN\sphinxhyphen{}NOT\sphinxhyphen{}EXISTS tags are similar to the WHEN\sphinxhyphen{}EXISTS and END\sphinxhyphen{}WHEN\sphinxhyphen{}EXISTS tags, except that the section of the page enclosed by the tags is generated only if the named table variable does not exist.

\index{WHEN\sphinxhyphen{}NOT\sphinxhyphen{}BLANK@\spxentry{WHEN\sphinxhyphen{}NOT\sphinxhyphen{}BLANK}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!WHEN\sphinxhyphen{}NOT\sphinxhyphen{}BLANK@\spxentry{WHEN\sphinxhyphen{}NOT\sphinxhyphen{}BLANK}}\index{END\sphinxhyphen{}WHEN\sphinxhyphen{}NOT\sphinxhyphen{}BLANK@\spxentry{END\sphinxhyphen{}WHEN\sphinxhyphen{}NOT\sphinxhyphen{}BLANK}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!END\sphinxhyphen{}WHEN\sphinxhyphen{}NOT\sphinxhyphen{}BLANK@\spxentry{END\sphinxhyphen{}WHEN\sphinxhyphen{}NOT\sphinxhyphen{}BLANK}}\ignorespaces 

\subsubsection{WHEN\sphinxhyphen{}NOT\sphinxhyphen{}BLANK and END\sphinxhyphen{}WHEN\sphinxhyphen{}NOT\sphinxhyphen{}BLANK tags}
\label{\detokenize{User_Guide:when-not-blank-and-end-when-not-blank-tags}}\label{\detokenize{User_Guide:index-81}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{WHEN}\PYG{o}{\PYGZhy{}}\PYG{n}{NOT}\PYG{o}{\PYGZhy{}}\PYG{n}{BLANK} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{varname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{WHEN}\PYG{o}{\PYGZhy{}}\PYG{n}{NOT}\PYG{o}{\PYGZhy{}}\PYG{n}{BLANK} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{varname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The WHEN\sphinxhyphen{}NOT\sphinxhyphen{}BLANK and END\sphinxhyphen{}WHEN\sphinxhyphen{}NOT\sphinxhyphen{}BLANK tags bracket a section of the page which is generated only if the current value of a named table variable is non\sphinxhyphen{}blank. The HTML content represented by “…” is omitted if the named variable does not exist, or if its current value is null or all blanks.

\index{WHEN\sphinxhyphen{}NEXT\sphinxhyphen{}EVENT@\spxentry{WHEN\sphinxhyphen{}NEXT\sphinxhyphen{}EVENT}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!WHEN\sphinxhyphen{}NEXT\sphinxhyphen{}EVENT@\spxentry{WHEN\sphinxhyphen{}NEXT\sphinxhyphen{}EVENT}}\index{END\sphinxhyphen{}WHEN\sphinxhyphen{}NEXT\sphinxhyphen{}EVENT@\spxentry{END\sphinxhyphen{}WHEN\sphinxhyphen{}NEXT\sphinxhyphen{}EVENT}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!END\sphinxhyphen{}WHEN\sphinxhyphen{}NEXT\sphinxhyphen{}EVENT@\spxentry{END\sphinxhyphen{}WHEN\sphinxhyphen{}NEXT\sphinxhyphen{}EVENT}}\ignorespaces 

\subsubsection{WHEN\sphinxhyphen{}NEXT\sphinxhyphen{}EVENT and END\sphinxhyphen{}WHEN\sphinxhyphen{}NEXT\sphinxhyphen{}EVENT tags}
\label{\detokenize{User_Guide:when-next-event-and-end-when-next-event-tags}}\label{\detokenize{User_Guide:index-82}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{WHEN}\PYG{o}{\PYGZhy{}}\PYG{n}{NEXT}\PYG{o}{\PYGZhy{}}\PYG{n}{EVENT} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{eventname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{WHEN}\PYG{o}{\PYGZhy{}}\PYG{n}{NEXT}\PYG{o}{\PYGZhy{}}\PYG{n}{EVENT} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{eventname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The WHEN\sphinxhyphen{}NEXT\sphinxhyphen{}EVENT and END\sphinxhyphen{}WHEN\sphinxhyphen{}NEXT\sphinxhyphen{}EVENT tags allow an XML template to be written which uses variables generated by a commarea\sphinxhyphen{}to\sphinxhyphen{}output conversion scenario. These tags work in conjunction with the \$EVENT\$ variable generated by the “MAP\$ EVENTUAL\sphinxhyphen{}AREA and {\hyperref[\detokenize{User_Guide:v462ug-map-eventual-elsethen}]{\sphinxcrossref{\DUrole{std,std-ref}{MAP\$ ELSE\sphinxhyphen{}THEN\sphinxhyphen{}AREA”}}}}. The section of the page enclosed by the WHEN\sphinxhyphen{}NEXT\sphinxhyphen{}EVENT and END\sphinxhyphen{}WHEN\sphinxhyphen{}NEXT\sphinxhyphen{}EVENT tags is generated only if the current value of the \$EVENT\$ variable matches the specified eventname.

\index{WHILE\sphinxhyphen{}EVENT@\spxentry{WHILE\sphinxhyphen{}EVENT}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!WHILE\sphinxhyphen{}EVENT@\spxentry{WHILE\sphinxhyphen{}EVENT}}\index{END\sphinxhyphen{}WHILE\sphinxhyphen{}EVENT@\spxentry{END\sphinxhyphen{}WHILE\sphinxhyphen{}EVENT}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!END\sphinxhyphen{}WHILE\sphinxhyphen{}EVENT@\spxentry{END\sphinxhyphen{}WHILE\sphinxhyphen{}EVENT}}\ignorespaces 

\subsubsection{WHILE\sphinxhyphen{}EVENT and END\sphinxhyphen{}WHILE\sphinxhyphen{}EVENT tags}
\label{\detokenize{User_Guide:while-event-and-end-while-event-tags}}\label{\detokenize{User_Guide:index-83}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{WHILE}\PYG{o}{\PYGZhy{}}\PYG{n}{EVENT} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{eventname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{WHILE}\PYG{o}{\PYGZhy{}}\PYG{n}{EVENT} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{eventname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The WHILE\sphinxhyphen{}EVENT and END\sphinxhyphen{}WHILE\sphinxhyphen{}EVENT tags work in conjunction with the \$EVENT\$ variable generated by the {\hyperref[\detokenize{User_Guide:v462ug-map-eventual-elsethen}]{\sphinxcrossref{\DUrole{std,std-ref}{“MAP\$ EVENTUAL\sphinxhyphen{}AREA and MAP\$ ELSE\sphinxhyphen{}THEN\sphinxhyphen{}AREA”}}}}. The WHILE\sphinxhyphen{}EVENT tag marks the start of a loop. Everything between the WHILE\sphinxhyphen{}EVENT and END\sphinxhyphen{}WHILE\sphinxhyphen{}EVENT tags is generated once for each value of the \$EVENT\$ variable, as long as the current value of the \$EVENT\$ variable matches the specified eventname
.

\phantomsection\label{\detokenize{User_Guide:v462ug-debugging-create-variable}}
\index{Debugging facilities@\spxentry{Debugging facilities}}\ignorespaces 

\subsection{Debugging facilities}
\label{\detokenize{User_Guide:debugging-facilities}}\label{\detokenize{User_Guide:index-84}}\phantomsection\label{\detokenize{User_Guide:v462ug-create-variable-if}}
\index{CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}IF@\spxentry{CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}IF}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}IF@\spxentry{CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}IF}}\ignorespaces 

\subsubsection{CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}IF(TRACING\sphinxhyphen{}SCENARIO) tag}
\label{\detokenize{User_Guide:create-variable-if-tracing-scenario-tag}}\label{\detokenize{User_Guide:index-85}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{CREATE}\PYG{o}{\PYGZhy{}}\PYG{n}{VARIABLE}\PYG{o}{\PYGZhy{}}\PYG{n}{IF} \PYG{p}{(}\PYG{n}{TRACING}\PYG{o}{\PYGZhy{}}\PYG{n}{SCENARIO}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{varname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}IF tag with the TRACING\sphinxhyphen{}SCENARIO parameter retrieves the contents of the scenario trace created by the {\hyperref[\detokenize{User_Guide:v462ug-capability-tokens}]{\sphinxcrossref{\DUrole{std,std-ref}{“Capability Tokens”}}}}). If the trace is active, the variable varname will be created. The value of this variable is a JSON structure (see example below) which can be used by Virtel Studio.

\sphinxAtStartPar
The trace data for a specific terminal may be obtained by specifying an x\sphinxhyphen{}Virtel\sphinxhyphen{}Debug=capability\sphinxhyphen{}token parameter in the URL. The {\hyperref[\detokenize{User_Guide:v462ug-capability-tokens}]{\sphinxcrossref{\DUrole{std,std-ref}{“capability tokens”}}}} is generated by a SET\sphinxhyphen{}HEADER tag issued by the terminal which owns the trace data.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scenario}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{EXECUTE3}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{externalName}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{EXECUTE3}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{compiled}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{02/04/13 18.49 }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{terminal}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{HTVTA012}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{relay}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{R5HVT511}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{trace}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{p}{[}
\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{t}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{20:38:41.14}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{o}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{00014A}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{i}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{COPY\PYGZdl{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{,}
\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{t}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{20:38:41.14}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{o}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{00015E}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{i}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{TOVAR\PYGZdl{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{,}
\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{t}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{20:38:41.14}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{o}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{000046}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{i}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MAP\PYGZdl{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{,}
\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{t}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{20:38:41.14}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{o}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{000058}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{i}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MAP\PYGZdl{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{p}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{p}{[}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Customer}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{A0111115}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{]}\PYG{p}{\PYGZcb{}}\PYG{p}{,}
\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{t}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{20:38:41.14}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{o}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{000066}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{i}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MAP\PYGZdl{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{,}
\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{t}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{20:38:41.14}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{o}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{000078}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{i}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MAP\PYGZdl{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{p}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{p}{[}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Datemin}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{20110505}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{]}\PYG{p}{\PYGZcb{}}\PYG{p}{,}
\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{t}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{20:38:41.14}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{o}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{000086}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{i}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MAP\PYGZdl{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{p}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{p}{[}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Datemax}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{20110525}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{]}\PYG{p}{\PYGZcb{}}\PYG{p}{,}
\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{t}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{20:38:41.14}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{o}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{000110}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{i}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MAP\PYGZdl{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{,}
\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{t}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{20:38:41.14}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{o}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{000170}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{i}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CASE\PYGZdl{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{p}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{p}{[}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CURLINE}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{0}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{]}\PYG{p}{\PYGZcb{}}\PYG{p}{,}
\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{t}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{20:38:41.14}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{o}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{0001FC}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{i}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{COPY\PYGZdl{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{,}
\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{t}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{20:38:41.14}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{o}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{000214}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{i}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{COPY\PYGZdl{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{]}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Exampleof a JSON structure generated by TRACING\sphinxhyphen{}SCENARIO}

\sphinxAtStartPar
For more informations, see {\hyperref[\detokenize{User_Guide:v462ug-create-variable-if}]{\sphinxcrossref{\DUrole{std,std-ref}{“CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}IF”}}}}.

\index{Signon and password management@\spxentry{Signon and password management}}\ignorespaces 

\subsection{Signon and password management}
\label{\detokenize{User_Guide:signon-and-password-management}}\label{\detokenize{User_Guide:index-86}}
\index{CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}IF@\spxentry{CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}IF}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}IF@\spxentry{CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}IF}}\ignorespaces 

\subsubsection{CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}IF(Condition) tag}
\label{\detokenize{User_Guide:create-variable-if-condition-tag}}\label{\detokenize{User_Guide:index-87}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{CREATE}\PYG{o}{\PYGZhy{}}\PYG{n}{VARIABLE}\PYG{o}{\PYGZhy{}}\PYG{n}{IF} \PYG{p}{(}\PYG{n}{condition}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{varname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}IF tag allows the conditional creation of a VIRTEL variable. If the specified condition is true, the variable varname will be created and initialized with a value as shown in the list of condition names below. This variable can be used subsequently to conditionally generate a section of the page bracketed by WHEN\sphinxhyphen{}EXISTS and END\sphinxhyphen{}WHEN\sphinxhyphen{}EXISTS tags.

\sphinxAtStartPar
The possible values of the condition parameter for the CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}IF tag are listed below:\sphinxhyphen{}
\begin{description}
\sphinxlineitem{SIGNON\sphinxhyphen{}IS\sphinxhyphen{}NEEDED}
\sphinxAtStartPar
The variable varname is created if a signon is needed, i.e. if the
transaction security type is non\sphinxhyphen{}zero and the user has not yet
successfully signed on at the terminal.

\sphinxlineitem{SIGNON\sphinxhyphen{}IS\sphinxhyphen{}OK}
\sphinxAtStartPar
The variable varname is created if the user has successfully signed
on at the terminal. The initial value of the variable is the user
name.

\sphinxlineitem{APPLICATION\sphinxhyphen{}IS\sphinxhyphen{}CONNECTED}
\sphinxAtStartPar
The variable varname is created if the terminal is connected to a
host application. The initial value of the variable is either the
VTAM application name, or the external name of the VIRTEL
transaction, depending on the value of the AIC parameter in the
VIRTCT (see “Parameters of the VIRTCT” in the VIRTEL Installation
Guide).

\sphinxAtStartPar
For more informations, see {\hyperref[\detokenize{User_Guide:v462ug-debugging-create-variable}]{\sphinxcrossref{\DUrole{std,std-ref}{“CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}IF”}}}}, in the “Debugging facilities” section.

\end{description}

\index{DECLARE\_FIELD\_AS@\spxentry{DECLARE\_FIELD\_AS}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!DECLARE\_FIELD\_AS@\spxentry{DECLARE\_FIELD\_AS}}\ignorespaces 

\subsubsection{DECLARE\sphinxhyphen{}FIELD\sphinxhyphen{}AS tag}
\label{\detokenize{User_Guide:declare-field-as-tag}}\label{\detokenize{User_Guide:index-88}}
\sphinxAtStartPar
When used in conjunction with a security type 4 transaction, the DECLARE\sphinxhyphen{}FIELD\sphinxhyphen{}AS tag allows VIRTEL to obtain the userid and password from fields embedded in the HTML page. For an example, see {\hyperref[\detokenize{User_Guide:v462ug-signon-using-html}]{\sphinxcrossref{\DUrole{std,std-ref}{“Signon using HTML fields”}}}}.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{DECLARE}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELD}\PYG{o}{\PYGZhy{}}\PYG{n}{AS} \PYG{p}{(}\PYG{n}{attribute}\PYG{p}{,}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{fieldname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The DECLARE\sphinxhyphen{}FIELD\sphinxhyphen{}AS tag indicates to VIRTEL that the HTML field whose name is fieldname is to be treated as a userid or password field when used with a transaction defined as having security type 4. One of more attribute values must be specified. The possible attributes are listed below:\sphinxhyphen{}
\begin{description}
\sphinxlineitem{USERNAME}
\sphinxAtStartPar
Indicates that the field contains the name of the user (userid) to be signed on.

\sphinxlineitem{PASSWORD}
\sphinxAtStartPar
Indicates that the field contains the user’s password.

\sphinxlineitem{NEW\sphinxhyphen{}PASSWORD}
\sphinxAtStartPar
Indicates that the field contains a new password. VIRTEL will request the security product to change the user’s current password to the new value if the signon is successful.

\sphinxlineitem{HEX}
\sphinxAtStartPar
Indicates that VIRTEL expects the browser to encode the field in hexadecimal.

\sphinxlineitem{BASE64}
\sphinxAtStartPar
Indicates that VIRTEL expects the browser to encode the field in base64 format.

\sphinxlineitem{ENCRYPTED}
\sphinxAtStartPar
Indicates that VIRTEL expects the browser to encrypt the field using the session key specified elsewhere in the page (see {\hyperref[\detokenize{User_Guide:v462ug-declare-field-crypto}]{\sphinxcrossref{\DUrole{std,std-ref}{“DECLARE\sphinxhyphen{}FIELD\sphinxhyphen{}AS CRYPTO\sphinxhyphen{}SESSION\sphinxhyphen{}KEY”}}}}).

\end{description}

\sphinxAtStartPar
Examples:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{DECLARE}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELD}\PYG{o}{\PYGZhy{}}\PYG{n}{AS} \PYG{p}{(}\PYG{n}{USERNAME}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{USERNAME}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{DECLARE}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELD}\PYG{o}{\PYGZhy{}}\PYG{n}{AS} \PYG{p}{(}\PYG{n}{PASSWORD}\PYG{p}{,}\PYG{n}{BASE64}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{PASSWORD}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{DECLARE}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELD}\PYG{o}{\PYGZhy{}}\PYG{n}{AS} \PYG{p}{(}\PYG{n}{NEW}\PYG{o}{\PYGZhy{}}\PYG{n}{PASSWORD}\PYG{p}{,}\PYG{n}{ENCRYPTED}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{NEWPASS}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The same field can be both declared and defined:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{DEFINE}\PYG{o}{\PYGZhy{}}\PYG{n}{HTML}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELD}\PYG{o}{\PYGZhy{}}\PYG{n}{NAME} \PYG{p}{(}\PYG{l+m+mi}{04}\PYG{p}{,}\PYG{l+m+mi}{06}\PYG{p}{,}\PYG{l+m+mi}{08}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{NOM}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{DECLARE}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELD}\PYG{o}{\PYGZhy{}}\PYG{n}{AS} \PYG{p}{(}\PYG{n}{BASE64}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{NOM}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The above example indicates that the field NOM is transmitted to VIRTEL in base64 format. In this case, the DEFINE must precede the DECLARE.

\phantomsection\label{\detokenize{User_Guide:v462ug-user-signon-code}}
\index{USER\sphinxhyphen{}SIGNON\sphinxhyphen{}CODE@\spxentry{USER\sphinxhyphen{}SIGNON\sphinxhyphen{}CODE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!USER\sphinxhyphen{}SIGNON\sphinxhyphen{}CODE@\spxentry{USER\sphinxhyphen{}SIGNON\sphinxhyphen{}CODE}}\ignorespaces 
\sphinxAtStartPar
USER\sphinxhyphen{}SIGNON\sphinxhyphen{}CODE tag

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{USER}\PYG{o}{\PYGZhy{}}\PYG{n}{SIGNON}\PYG{o}{\PYGZhy{}}\PYG{n}{CODE}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The USER\sphinxhyphen{}SIGNON\sphinxhyphen{}CODE tag generates a unique value called a signoncode which may be used with the VirtelUserSignon parameter of the URL to propagate the signed\sphinxhyphen{}on user’s credentials to another page (see {\hyperref[\detokenize{User_Guide:v462ug-signon-propagation}]{\sphinxcrossref{\DUrole{std,std-ref}{“Propagation of signon by URL”}}}}).

\index{Encryption management@\spxentry{Encryption management}}\ignorespaces 

\subsection{Encryption management}
\label{\detokenize{User_Guide:encryption-management}}\label{\detokenize{User_Guide:index-90}}
\sphinxAtStartPar
The presence of certain tags in a page template causes VIRTEL to generate encryption keys and to encrypt and decrypt selected data in the page. The use of these tags is dependent upon the specification of a CRYPTn parameter in the VIRTCT (see “Parameters of the VIRTCT”) in the VIRTEL Installation Guide manual.

\index{ENCRYPTION\sphinxhyphen{}PARAMETERS@\spxentry{ENCRYPTION\sphinxhyphen{}PARAMETERS}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!ENCRYPTION\sphinxhyphen{}PARAMETERS@\spxentry{ENCRYPTION\sphinxhyphen{}PARAMETERS}}\ignorespaces 
\sphinxAtStartPar
ENCRYPTION\sphinxhyphen{}PARAMETERS tag

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{ENCRYPTION}\PYG{o}{\PYGZhy{}}\PYG{n}{PARAMETERS} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{cryptname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{ENCRYPTION}\PYG{o}{\PYGZhy{}}\PYG{n}{PARAMETERS} \PYG{p}{(}\PYG{n}{field}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{cryptname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The ENCRYPTION\sphinxhyphen{}PARAMETERS tag inserts into the page the contents of one or all fields of the CRYPTn parameter whose name field is cryptname. If the VIRTCT does not contain a CRYPTn parameter with name cryptname then the ENCRYPTION\sphinxhyphen{}PARAMETERS tag returns a null value.

\sphinxAtStartPar
If the optional field parameter is specified, the ENCRYPTION\sphinxhyphen{}PARAMETERS tag returns the specified or defaulted value of one field of the CRYPTn parameter, without quotes. The names of the fields are:\sphinxhyphen{}
\begin{description}
\sphinxlineitem{NAME}
\sphinxAtStartPar
The name of this set of encryption parameters.

\sphinxlineitem{ALGORITHM}
\sphinxAtStartPar
The symmetric encryption algorithm.

\sphinxlineitem{INITIAL\sphinxhyphen{}ALGORITHM}
\sphinxAtStartPar
The asymmetric encryption algorithm.

\sphinxlineitem{DRIVER}
\sphinxAtStartPar
The name of the encryption engine.

\sphinxlineitem{FORMAT}
\sphinxAtStartPar
The encoding used for encrypted text.

\sphinxlineitem{CHAINING}
\sphinxAtStartPar
The chaining method for symmetric encryption.

\sphinxlineitem{PADDING}
\sphinxAtStartPar
The padding method for symmetric encryption.

\end{description}

\sphinxAtStartPar
If the field parameter is not specified, then the ENCRYPTION\sphinxhyphen{}PARAMETERS tag returns the specified or defaulted values of all fields of the CRYPTn parameter. Each value is surrounded by single quotes and the values are separated by commas.

\sphinxAtStartPar
Example: If the VIRTCT contains the following parameters:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{CRYPT1}\PYG{o}{=}\PYG{p}{(}\PYG{n}{CRYPTNULL}\PYG{p}{,}\PYG{n}{NONE}\PYG{p}{,}\PYG{n}{NONE}\PYG{p}{,}\PYG{n}{NO}\PYG{o}{\PYGZhy{}}\PYG{n}{ENCRYPTION}\PYG{p}{,}\PYG{n}{HEX}\PYG{p}{)}\PYG{p}{,} \PYG{o}{*}
\PYG{n}{CRYPT2}\PYG{o}{=}\PYG{p}{(}\PYG{n}{CRYPT3270}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{n}{TDEA}\PYG{p}{,}\PYG{n}{RSA}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1024}\PYG{p}{,}\PYG{n}{ICSF}\PYG{p}{,}\PYG{n}{HEX}\PYG{p}{)}\PYG{p}{,} \PYG{o}{*}
\end{sphinxVerbatim}

\sphinxAtStartPar
then the tag \{\{\{ENCRYPTION\sphinxhyphen{}PARAMETERS (ALGORITHM) “CRYPT3270”\}\}\} returns the value 3TDEA, and the tag \{\{\{ENCRYPTION\sphinxhyphen{}PARAMETERS “CRYPT3270”\}\}\}
returns the value ‘CRYPT3270’,’3TDEA’,’RSA\sphinxhyphen{}1024’,’ICSF’,’HEX’,’CBC’,’PKCS7’

\index{PUBLIC\sphinxhyphen{}KEY@\spxentry{PUBLIC\sphinxhyphen{}KEY}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!PUBLIC\sphinxhyphen{}KEY@\spxentry{PUBLIC\sphinxhyphen{}KEY}}\ignorespaces 

\subsubsection{PUBLIC\sphinxhyphen{}KEY tag}
\label{\detokenize{User_Guide:public-key-tag}}\label{\detokenize{User_Guide:index-92}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{PUBLIC}\PYG{o}{\PYGZhy{}}\PYG{n}{KEY} \PYG{p}{(}\PYG{n}{component}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{cryptname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The presence of one or more PUBLIC\sphinxhyphen{}KEY tags in a page template causes VIRTEL to generate a public/private key pair for the session, and to insert the value of the specified component of the public key into the page. The public/private key pair is generated according to the INITIAL\sphinxhyphen{}ALGORITHM specified in the CRYPTn parameter whose name field is cryptname. If the VIRTCT does not contain a CRYPTn parameter with name cryptname then no key is generated and
the PUBLIC\sphinxhyphen{}KEY tag returns a null value.
\begin{description}
\sphinxlineitem{component}
\sphinxAtStartPar
is the name of the public key component to be inserted into the page. Possible values are:

\sphinxlineitem{EXPONENT}
\sphinxAtStartPar
The hexadecimal value of the public exponent.

\sphinxlineitem{MODULUS}
\sphinxAtStartPar
The hexadecimal value of the modulus.

\end{description}

\index{DECLARE\sphinxhyphen{}FIELD\sphinxhyphen{}AS@\spxentry{DECLARE\sphinxhyphen{}FIELD\sphinxhyphen{}AS}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!DECLARE\sphinxhyphen{}FIELD\sphinxhyphen{}AS@\spxentry{DECLARE\sphinxhyphen{}FIELD\sphinxhyphen{}AS}}\ignorespaces 

\subsubsection{DECLARE\sphinxhyphen{}FIELD\sphinxhyphen{}AS tag}
\label{\detokenize{User_Guide:index-93}}\label{\detokenize{User_Guide:id2}}
\def\sphinxLiteralBlockLabel{\label{\detokenize{User_Guide:v462ug-declare-field-crypto}}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{DECLARE}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELD}\PYG{o}{\PYGZhy{}}\PYG{n}{AS} \PYG{p}{(}\PYG{n}{attribute}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{fieldname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
When used in conjunction with the PUBLIC\sphinxhyphen{}KEY tag, the DECLARE\sphinxhyphen{}FIELD\sphinxhyphen{}AS tag indicates to VIRTEL that the HTML field whose name is fieldname is to be treated as an encrypted session key. VIRTEL decrypts the contents of the field using the corresponding private key (which is known only to VIRTEL) and uses it as the session key when symmetric encryption is requested by the SET\sphinxhyphen{}LOCAL\sphinxhyphen{}OPTIONS (ENCRYPT\sphinxhyphen{}PASSWORD\sphinxhyphen{}FIELDS) tag. The possible attributes are listed below:
\begin{description}
\sphinxlineitem{CRYPTO\sphinxhyphen{}SESSION\sphinxhyphen{}KEY}
\sphinxAtStartPar
indicates that the field contains the session key encrypted under the public key specified by the PUBLIC\sphinxhyphen{}KEY tag.

\end{description}

\index{SET\sphinxhyphen{}LOCAL\sphinxhyphen{}OPTIONS@\spxentry{SET\sphinxhyphen{}LOCAL\sphinxhyphen{}OPTIONS}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!SET\sphinxhyphen{}LOCAL\sphinxhyphen{}OPTIONS@\spxentry{SET\sphinxhyphen{}LOCAL\sphinxhyphen{}OPTIONS}}\ignorespaces 

\subsubsection{SET\sphinxhyphen{}LOCAL\sphinxhyphen{}OPTIONS tag}
\label{\detokenize{User_Guide:index-94}}\label{\detokenize{User_Guide:id3}}
\sphinxAtStartPar
When used in conjunction with the PUBLIC\sphinxhyphen{}KEY and DECLARE\sphinxhyphen{}FIELD\sphinxhyphen{}AS (CRYPTO\sphinxhyphen{}SESSION\sphinxhyphen{}KEY) tags, the SET\sphinxhyphen{}LOCALOPTIONS
tag activates encryption for selected fields that are sent and received in HTML pages.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{SET}\PYG{o}{\PYGZhy{}}\PYG{n}{LOCAL}\PYG{o}{\PYGZhy{}}\PYG{n}{OPTIONS} \PYG{p}{(}\PYG{n}{option}\PYG{p}{,} \PYG{n}{option}\PYG{p}{,} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}\PYG{p}{)} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{option}
\sphinxAtStartPar
the following values indicate the use of encryption :

\sphinxlineitem{ENCRYPT\sphinxhyphen{}PASSWORD\sphinxhyphen{}FIELDS}
\sphinxAtStartPar
indicates that 3270 non\sphinxhyphen{}display unprotected (data entry) fields are encrypted in both inbound and outbound messages, and that 3270 non\sphinxhyphen{}display protected (output only) fields are replaced by blanks in outbound messages.

\end{description}

\sphinxAtStartPar
Encryption is performed according to the symmetric encryption method indicated by the CRYPTn parameter specified by the PUBLIC\sphinxhyphen{}KEY tag, using the session key specified by the DECLARE\sphinxhyphen{}FIELD\sphinxhyphen{}AS (CRYPTO\sphinxhyphen{}SESSION\sphinxhyphen{}KEY) tag. The GENERATE\sphinxhyphen{}HTML tag automatically adds an additional VCRYPT attribute to each encrypted field.


\subsection{EBCDIC translation management}
\label{\detokenize{User_Guide:ebcdic-translation-management}}\label{\detokenize{User_Guide:v462ug-ebcdic-translation}}
\sphinxAtStartPar
By default, VIRTEL translates host application EBCDIC data into ISO\sphinxhyphen{}8859\sphinxhyphen{}1 before sending it to the browser. This default behaviour is suitable for Western European and English speaking countries. The COUNTRY parameter in the VIRTCT indicates which EBCDIC country codepage is used by host applications, and serves to select the appropriate default EBCDIC\sphinxhyphen{}to\sphinxhyphen{}ISO\sphinxhyphen{}8859\sphinxhyphen{}1 translation table within VIRTEL. Translation tables other than the default may be selected by means of the SET\sphinxhyphen{}COUNTRY\sphinxhyphen{}CODE tag.

\phantomsection\label{\detokenize{User_Guide:v462ug-set-country-code}}
\index{SET\sphinxhyphen{}COUNTRY\sphinxhyphen{}CODE@\spxentry{SET\sphinxhyphen{}COUNTRY\sphinxhyphen{}CODE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!SET\sphinxhyphen{}COUNTRY\sphinxhyphen{}CODE@\spxentry{SET\sphinxhyphen{}COUNTRY\sphinxhyphen{}CODE}}\ignorespaces 
\def\sphinxLiteralBlockLabel{\label{\detokenize{User_Guide:index-95}}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{SET}\PYG{o}{\PYGZhy{}}\PYG{n}{COUNTRY}\PYG{o}{\PYGZhy{}}\PYG{n}{CODE} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{countryname}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The SET\sphinxhyphen{}COUNTRY\sphinxhyphen{}CODE tag allows the 3270 host application data to be translated to ISO\sphinxhyphen{}8859\sphinxhyphen{}1 according to an EBCDIC codepage other than the default codepage implied by the COUNTRY parameter in the VIRTCT. It may also be used to translate from the French EBCDIC codepage to ASCII Western European codepage 850, or to translate from Latin\sphinxhyphen{}2 EBCDIC Multilingual (CP870) to either ISO\sphinxhyphen{}8859\sphinxhyphen{}2 Latin\sphinxhyphen{}2 (CP912) or PC Latin\sphinxhyphen{}2 (CP852).

\sphinxAtStartPar
This tag takes effect starting from the point where it appears in the template page, and it may appear multiple times in
a single page. The possible values for the countryname parameter are shown in the table below:\sphinxhyphen{}


\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TTT}
\sphinxtoprule
\sphinxstyletheadfamily 
\sphinxAtStartPar
Country name
&\sphinxstyletheadfamily 
\sphinxAtStartPar
EBCDIC codepage
&\sphinxstyletheadfamily 
\sphinxAtStartPar
ASCII codepage
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook
\sphinxAtStartPar
US
&
\sphinxAtStartPar
CP 037
&
\sphinxAtStartPar
ISO\sphinxhyphen{}8859\sphinxhyphen{}1
\\
\sphinxhline
\sphinxAtStartPar
FR
&
\sphinxAtStartPar
CP 297
&
\sphinxAtStartPar
ISO\sphinxhyphen{}8859\sphinxhyphen{}1
\\
\sphinxhline
\sphinxAtStartPar
NO
&
\sphinxAtStartPar
CP 277
&
\sphinxAtStartPar
ISO\sphinxhyphen{}8859\sphinxhyphen{}1
\\
\sphinxhline
\sphinxAtStartPar
IT
&
\sphinxAtStartPar
CP 280
&
\sphinxAtStartPar
ISO\sphinxhyphen{}8859\sphinxhyphen{}1
\\
\sphinxhline
\sphinxAtStartPar
GB (UK)
&
\sphinxAtStartPar
CP 285
&
\sphinxAtStartPar
ISO\sphinxhyphen{}8859\sphinxhyphen{}1
\\
\sphinxhline
\sphinxAtStartPar
FR\sphinxhyphen{}850
&
\sphinxAtStartPar
CP 297
&
\sphinxAtStartPar
CP 850
\\
\sphinxhline
\sphinxAtStartPar
L2
&
\sphinxAtStartPar
CP 870
&
\sphinxAtStartPar
ISO\sphinxhyphen{}8859\sphinxhyphen{}2
\\
\sphinxhline
\sphinxAtStartPar
P2
&
\sphinxAtStartPar
CP 870
&
\sphinxAtStartPar
CP 852
\\
\sphinxhline
\sphinxAtStartPar
DE
&
\sphinxAtStartPar
CP 273
&
\sphinxAtStartPar
ISO\sphinxhyphen{}8859\sphinxhyphen{}1
\\
\sphinxhline
\sphinxAtStartPar
BE
&
\sphinxAtStartPar
CP 500
&
\sphinxAtStartPar
ISO\sphinxhyphen{}8859\sphinxhyphen{}1
\\
\sphinxhline
\sphinxAtStartPar
FI
&
\sphinxAtStartPar
CP 278
&
\sphinxAtStartPar
ISO\sphinxhyphen{}8859\sphinxhyphen{}1
\\
\sphinxhline
\sphinxAtStartPar
ES (SP)
&
\sphinxAtStartPar
CP 284
&
\sphinxAtStartPar
ISO\sphinxhyphen{}8859\sphinxhyphen{}1
\\
\sphinxhline
\sphinxAtStartPar
IS (IC)
&
\sphinxAtStartPar
CP 871
&
\sphinxAtStartPar
ISO\sphinxhyphen{}8859\sphinxhyphen{}1
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}

\sphinxAtStartPar
\sphinxstyleemphasis{Country Codes for EBCDIC to ASCII translation}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
Values in parentheses are accepted for compatibility with previous versions of VIRTEL
\end{sphinxadmonition}

\index{COUNTRY\sphinxhyphen{}CODE@\spxentry{COUNTRY\sphinxhyphen{}CODE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!COUNTRY\sphinxhyphen{}CODE@\spxentry{COUNTRY\sphinxhyphen{}CODE}}\ignorespaces 

\subsubsection{COUNTRY\sphinxhyphen{}CODE tag}
\label{\detokenize{User_Guide:country-code-tag}}\label{\detokenize{User_Guide:index-96}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{COUNTRY}\PYG{o}{\PYGZhy{}}\PYG{n}{CODE}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The COUNTRY\sphinxhyphen{}CODE tag inserts the country code into the page, where it can be tested by JavaScript.

\index{SET\sphinxhyphen{}OUTPUT\sphinxhyphen{}ENCODING@\spxentry{SET\sphinxhyphen{}OUTPUT\sphinxhyphen{}ENCODING}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!SET\sphinxhyphen{}OUTPUT\sphinxhyphen{}ENCODING@\spxentry{SET\sphinxhyphen{}OUTPUT\sphinxhyphen{}ENCODING}}\ignorespaces 

\subsubsection{SET\sphinxhyphen{}OUTPUT\sphinxhyphen{}ENCODING\sphinxhyphen{}UTF\sphinxhyphen{}8 tag}
\label{\detokenize{User_Guide:set-output-encoding-utf-8-tag}}\label{\detokenize{User_Guide:index-97}}
\sphinxAtStartPar
For countries which use a non\sphinxhyphen{}Western European language, VIRTEL can generate data in UTF\sphinxhyphen{}8 encoding instead of
ISO\sphinxhyphen{}8859\sphinxhyphen{}1. This is done by embedding the SET\sphinxhyphen{}OUTPUT\sphinxhyphen{}ENCODING\sphinxhyphen{}UTF\sphinxhyphen{}8 tag in the page template:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{SET}\PYG{o}{\PYGZhy{}}\PYG{n}{OUTPUT}\PYG{o}{\PYGZhy{}}\PYG{n}{ENCODING}\PYG{o}{\PYGZhy{}}\PYG{n}{UTF}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{8} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{charset}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The SET\sphinxhyphen{}OUTPUT\sphinxhyphen{}ENCODING\sphinxhyphen{}UTF\sphinxhyphen{}8 tag indicates that host data inserted in the template page by VIRTEL is to be in UTF\sphinxhyphen{}8 format, translated according to the EBCDIC country codepage whose name is specified within quotes. The possible values for charset are given under the description of the DEFUTF8 parameter of the VIRTCT. If no charset value is specified, as for example \{\{\{SET\sphinxhyphen{}OUTPUT\sphinxhyphen{}ENCODING\sphinxhyphen{}UTF\sphinxhyphen{}8 “”\}\}\}, then the default value of charset is the codepage
specified by the DEFUTF8 parameter of the VIRTCT described in the VIRTEL Installation Guide.

\sphinxAtStartPar
When SET\sphinxhyphen{}OUTPUT\sphinxhyphen{}ENCODING\sphinxhyphen{}UTF\sphinxhyphen{}8 is specified, the rest of the template page must also be coded in UTF\sphinxhyphen{}8, and, in the case of an HTML page, must contain the HTML tag:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZlt{}}\PYG{n}{meta} \PYG{n}{http}\PYG{o}{\PYGZhy{}}\PYG{n}{equiv}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Content\PYGZhy{}Type}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{content}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{text/html; charset=UTF\PYGZhy{}8}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
In the case of an XML page, no such instruction is needed because XML is considered to be encoded in UTF8 by default.

\sphinxAtStartPar
\sphinxstylestrong{Examples}

\sphinxAtStartPar
A 3270 application generates US EBCDIC (CECP 037). The following statements, coded between the \textless{}HEAD\textgreater{} and \textless{}/HEAD\textgreater{} tags in the template page, ensure the correct translation of this application’s data:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{SET}\PYG{o}{\PYGZhy{}}\PYG{n}{COUNTRY}\PYG{o}{\PYGZhy{}}\PYG{n}{CODE} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{US}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{o}{\PYGZlt{}}\PYG{n}{meta} \PYG{n}{http}\PYG{o}{\PYGZhy{}}\PYG{n}{equiv}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Content\PYGZhy{}Type}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{content}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{text/html; charset=iso\PYGZhy{}8859\PYGZhy{}1}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Another 3270 application generates output using the Chinese Simplified EBCDIC character set (IBM1388). The output is to be translated to UTF\sphinxhyphen{}8 and inserted into a template page which must also be encoded in UTF\sphinxhyphen{}8:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{SET}\PYG{o}{\PYGZhy{}}\PYG{n}{OUTPUT}\PYG{o}{\PYGZhy{}}\PYG{n}{ENCODING}\PYG{o}{\PYGZhy{}}\PYG{n}{UTF}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{8} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{IBM1388}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{o}{\PYGZlt{}}\PYG{n}{meta} \PYG{n}{http}\PYG{o}{\PYGZhy{}}\PYG{n}{equiv}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Content\PYGZhy{}Type}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{content}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{text/html; charset=UTF\PYGZhy{}8}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
A third 3270 application generates output using the Spanish EBCDIC character set, which is to be translated to UTF\sphinxhyphen{}8 and inserted into the template page. In this example, we assume that the parameter DEFUTF8=IBM1145 has been specified in the VIRTCT, so we can use this as the default value for the SET\sphinxhyphen{}OUTPUT\sphinxhyphen{}ENCODING\sphinxhyphen{}UTF\sphinxhyphen{}8 tag:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{SET}\PYG{o}{\PYGZhy{}}\PYG{n}{OUTPUT}\PYG{o}{\PYGZhy{}}\PYG{n}{ENCODING}\PYG{o}{\PYGZhy{}}\PYG{n}{UTF}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{8} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{o}{\PYGZlt{}}\PYG{n}{meta} \PYG{n}{http}\PYG{o}{\PYGZhy{}}\PYG{n}{equiv}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Content\PYGZhy{}Type}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{content}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{text/html; charset=UTF\PYGZhy{}8}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
In each case, the \{\{\{SET\}\}\} statement tells VIRTEL what character set to generate, while the \textless{}META\textgreater{} statement tells the browser what character set to expect. If you specify neither SET\sphinxhyphen{}OUTPUT\sphinxhyphen{}ENCODING\sphinxhyphen{}UTF\sphinxhyphen{}8 nor SET\sphinxhyphen{}COUNTRY\sphinxhyphen{}CODE, then VIRTEL will generate ISO\sphinxhyphen{}8859\sphinxhyphen{}1 according to the default COUNTRY parameter specified in the VIRTCT.

\index{HTTP Protocol Management@\spxentry{HTTP Protocol Management}}\ignorespaces 

\subsection{HTTP protocol management}
\label{\detokenize{User_Guide:http-protocol-management}}\label{\detokenize{User_Guide:index-98}}
\sphinxAtStartPar
Normally when VIRTEL delivers a page via HTTP it includes an HTTP response status code of “200 OK”. The SET\sphinxhyphen{}HTTPRETURN\sphinxhyphen{}CODE allows the page to specify an alternative HTTP response status code. This may be useful, for example, in a page which contains an error message from an application.

\index{SET\sphinxhyphen{}HTTP\sphinxhyphen{}RETURN\sphinxhyphen{}CODE@\spxentry{SET\sphinxhyphen{}HTTP\sphinxhyphen{}RETURN\sphinxhyphen{}CODE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!SET\sphinxhyphen{}HTTP\sphinxhyphen{}RETURN\sphinxhyphen{}CODE@\spxentry{SET\sphinxhyphen{}HTTP\sphinxhyphen{}RETURN\sphinxhyphen{}CODE}}\ignorespaces 

\subsubsection{SET\sphinxhyphen{}HTTP\sphinxhyphen{}RETURN\sphinxhyphen{}CODE tag}
\label{\detokenize{User_Guide:set-http-return-code-tag}}\label{\detokenize{User_Guide:index-99}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{SET}\PYG{o}{\PYGZhy{}}\PYG{n}{HTTP}\PYG{o}{\PYGZhy{}}\PYG{n}{RETURN}\PYG{o}{\PYGZhy{}}\PYG{n}{CODE} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{rc text}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The SET\sphinxhyphen{}HTTP\sphinxhyphen{}RETURN\sphinxhyphen{}CODE tag indicates to VIRTEL the HTTP status code and supplementary text which will be sent in the HTTP response message when this page is delivered. rc is a 3\sphinxhyphen{}digit numeric status code, as defined by RFC 2616, and text is the text which accompanies the numeric code.

\sphinxAtStartPar
\sphinxstylestrong{Example :}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZlt{}!\PYGZhy{}\PYGZhy{}VIRTEL start=\PYGZdq{}\PYGZob{}\PYGZob{}\PYGZob{}\PYGZdq{} end=\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{} \PYGZhy{}\PYGZhy{}\PYGZgt{}
\PYGZlt{}html\PYGZgt{}\PYGZlt{}body\PYGZgt{}\PYGZlt{}h1\PYGZgt{}Database record not found\PYGZlt{}/h1\PYGZgt{}
\PYGZob{}\PYGZob{}\PYGZob{}SET\PYGZhy{}HTTP\PYGZhy{}RETURN\PYGZhy{}CODE \PYGZdq{}404 Not in DB2\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZlt{}p\PYGZgt{}The requested record was not found in the database.
\PYGZlt{}/body\PYGZgt{}\PYGZlt{}/html\PYGZgt{}
\end{sphinxVerbatim}

\index{Cache management@\spxentry{Cache management}}\ignorespaces 

\subsection{Cache management}
\label{\detokenize{User_Guide:cache-management}}\label{\detokenize{User_Guide:index-100}}
\sphinxAtStartPar
When delivering static elements such as menu pages, images, and JavaScript programs, VIRTEL indicates to the browser that the element is eligible to be stored in the browser’s cache. This improves performance because the browser does not have to request the element from VIRTEL each time it is required. By contrast, dynamic elements (i.e. elements which contain VIRTEL tags) are generally marked as non\sphinxhyphen{}cacheable because their content is likely to
change each time the page is requested. The VIRTEL tags described in this section are used to override the default cacheable/non\sphinxhyphen{}cacheable behaviour.

\index{SET\sphinxhyphen{}PAGE\sphinxhyphen{}CACHEABLE@\spxentry{SET\sphinxhyphen{}PAGE\sphinxhyphen{}CACHEABLE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!SET\sphinxhyphen{}PAGE\sphinxhyphen{}CACHEABLE@\spxentry{SET\sphinxhyphen{}PAGE\sphinxhyphen{}CACHEABLE}}\ignorespaces 

\subsubsection{SET\sphinxhyphen{}PAGE\sphinxhyphen{}CACHEABLE tag}
\label{\detokenize{User_Guide:set-page-cacheable-tag}}\label{\detokenize{User_Guide:index-101}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{SET}\PYG{o}{\PYGZhy{}}\PYG{n}{PAGE}\PYG{o}{\PYGZhy{}}\PYG{n}{CACHEABLE} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
When an element contains a SET\sphinxhyphen{}PAGE\sphinxhyphen{}CACHEABLE tag, VIRTEL will generate two HTTP headers: an Expires: header which indicates that the browser may cache the element until midnight, and a Last\sphinxhyphen{}Modified:.header which contains the date that the element was uploaded to VIRTEL. This is the default for static elements.

\index{SET\sphinxhyphen{}PAGE\sphinxhyphen{}NON\sphinxhyphen{}CACHEABLE@\spxentry{SET\sphinxhyphen{}PAGE\sphinxhyphen{}NON\sphinxhyphen{}CACHEABLE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!SET\sphinxhyphen{}PAGE\sphinxhyphen{}NON\sphinxhyphen{}CACHEABLE@\spxentry{SET\sphinxhyphen{}PAGE\sphinxhyphen{}NON\sphinxhyphen{}CACHEABLE}}\ignorespaces 

\subsubsection{SET\sphinxhyphen{}PAGE\sphinxhyphen{}NOT\sphinxhyphen{}CACHEABLE tag}
\label{\detokenize{User_Guide:set-page-not-cacheable-tag}}\label{\detokenize{User_Guide:index-102}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{SET}\PYG{o}{\PYGZhy{}}\PYG{n}{PAGE}\PYG{o}{\PYGZhy{}}\PYG{n}{NOT}\PYG{o}{\PYGZhy{}}\PYG{n}{CACHEABLE} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
When an element contains a SET\sphinxhyphen{}PAGE\sphinxhyphen{}NOT\sphinxhyphen{}CACHEABLE tag, VIRTEL will generate an Expires: 0 HTTP header indicating that the browser should not store the element in its cache. This is the default for dynamic elements.

\index{SET\sphinxhyphen{}MAX\sphinxhyphen{}AGE@\spxentry{SET\sphinxhyphen{}MAX\sphinxhyphen{}AGE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!SET\sphinxhyphen{}MAX\sphinxhyphen{}AGE@\spxentry{SET\sphinxhyphen{}MAX\sphinxhyphen{}AGE}}\ignorespaces 

\subsubsection{SET\sphinxhyphen{}MAX\sphinxhyphen{}AGE tag}
\label{\detokenize{User_Guide:set-max-age-tag}}\label{\detokenize{User_Guide:index-103}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{SET}\PYG{o}{\PYGZhy{}}\PYG{n}{MAX}\PYG{o}{\PYGZhy{}}\PYG{n}{AGE} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{secs}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
When an element contains a SET\sphinxhyphen{}MAX\sphinxhyphen{}AGE tag, VIRTEL will not generate the normal Expires: and Last\sphinxhyphen{}Modified:.HTTP headers, but instead it will generate a Cache\sphinxhyphen{}Control: max\sphinxhyphen{}age=secs header, where secs represents the validity time (in seconds) during which the browser may keep the element in its cache.\textasciicircum{}

\index{MIME type management@\spxentry{MIME type management}}\ignorespaces 

\subsection{MIME type management}
\label{\detokenize{User_Guide:mime-type-management}}\label{\detokenize{User_Guide:index-104}}
\sphinxAtStartPar
VIRTEL associates a MIME\sphinxhyphen{}type with each page template or other element stored in a directory. VIRTEL always sends the MIME\sphinxhyphen{}type to the browser when the browser requests any element. Some browsers use the MIME\sphinxhyphen{}type to determine how to display the element. For example, HTML pages must have MIME\sphinxhyphen{}type “text/html”, XML pages must have MIME\sphinxhyphen{}type “text/xml”, JPG files must have MIME\sphinxhyphen{}type “image/jpeg”, etc.

\sphinxAtStartPar
VIRTEL normally sets the MIME\sphinxhyphen{}type to the value indicated by the browser or mailer at the time the page is uploaded. However, in certain cases VIRTEL may force the MIME\sphinxhyphen{}type to a different value:\sphinxhyphen{}
\begin{itemize}
\item {} 
\sphinxAtStartPar
If the filename extension is .HTM or .HTML, or is absent, VIRTEL will force the MIME\sphinxhyphen{}type to be “text/html”. This is because some versions of the browser upload HTML files using MIME\sphinxhyphen{}type “text/plain”

\item {} 
\sphinxAtStartPar
If the file contains a SET\sphinxhyphen{}CONTENT\sphinxhyphen{}TYPE tag, then VIRTEL will force the MIME\sphinxhyphen{}type to the value specified in the tag

\end{itemize}

\index{SET\sphinxhyphen{}CONTENT\sphinxhyphen{}TYPE@\spxentry{SET\sphinxhyphen{}CONTENT\sphinxhyphen{}TYPE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!SET\sphinxhyphen{}CONTENT\sphinxhyphen{}TYPE@\spxentry{SET\sphinxhyphen{}CONTENT\sphinxhyphen{}TYPE}}\ignorespaces 

\subsubsection{SET\sphinxhyphen{}CONTENT\sphinxhyphen{}TYPE tag}
\label{\detokenize{User_Guide:set-content-type-tag}}\label{\detokenize{User_Guide:index-105}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{SET}\PYG{o}{\PYGZhy{}}\PYG{n}{CONTENT}\PYG{o}{\PYGZhy{}}\PYG{n}{TYPE} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{mimetype}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The SET\sphinxhyphen{}CONTENT\sphinxhyphen{}TYPE tag allows the administrator to override the MIME\sphinxhyphen{}type supplied by the browser or mailer when the element is uploaded. VIRTEL stores the value of the parameter mimetype in the directory with the element. In the following example, the page template is to be stored with a MIME\sphinxhyphen{}type which will cause the browser to process it as spreadsheet data:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{SET}\PYG{o}{\PYGZhy{}}\PYG{n}{CONTENT}\PYG{o}{\PYGZhy{}}\PYG{n}{TYPE} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{application/vnd.ms\PYGZhy{}excel}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\phantomsection\label{\detokenize{User_Guide:v462ug-capability-tokens}}
\index{capability tokens@\spxentry{capability tokens}}\ignorespaces 

\subsection{Capability tokens}
\label{\detokenize{User_Guide:capability-tokens}}\label{\detokenize{User_Guide:index-106}}
\sphinxAtStartPar
VIRTEL capability tokens permit an HTTP transaction to access data associated with an transaction running on another terminal. The token is delivered by VIRTEL by means of an x\sphinxhyphen{}Virtel HTTP response header from the terminal which owns the capability, and the same token is returned to VIRTEL in a subsequent URL sent by the terminal which wishes to use the capability (see {\hyperref[\detokenize{User_Guide:v462ug-capability-types}]{\sphinxcrossref{\DUrole{std,std-ref}{“Capability URLs”}}}}). The x\sphinxhyphen{}Virtel HTTP header is generated by a SET\sphinxhyphen{}HEADER tag
embedded in a page template sent by the terminal which owns the capability.

\phantomsection\label{\detokenize{User_Guide:v462ug-set-header}}
\index{SET\sphinxhyphen{}HEADER@\spxentry{SET\sphinxhyphen{}HEADER}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!SET\sphinxhyphen{}HEADER@\spxentry{SET\sphinxhyphen{}HEADER}}\ignorespaces 
\sphinxAtStartPar
SET\sphinxhyphen{}HEADER tag

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{SET}\PYG{o}{\PYGZhy{}}\PYG{n}{HEADER} \PYG{p}{(}\PYG{n+nb}{type}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{header\PYGZhy{}string}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
When the SET\sphinxhyphen{}HEADER tag is present in a page template, VIRTEL generates an HTTP response header.

\sphinxAtStartPar
When type is one of the VIRTEL capability types listed below, the quoted string header\sphinxhyphen{}string is the name of the header; this name should start with x\sphinxhyphen{}Virtel\sphinxhyphen{} should end with a colon (:) and should not contain blanks. The capability value is an opaque string added by VIRTEL.

\sphinxAtStartPar
When type is AS\sphinxhyphen{}IS the quoted string header\sphinxhyphen{}string is a complete header (including value) to be added as\sphinxhyphen{}is. No capability processing is performed in this case.

\phantomsection\label{\detokenize{User_Guide:v462ug-capability-types}}
\index{capability types@\spxentry{capability types}!Virtel@\spxentry{Virtel}}\index{Virtel@\spxentry{Virtel}!capability types@\spxentry{capability types}}\ignorespaces 
\sphinxAtStartPar
The VIRTEL capability types are:\sphinxhyphen{}
\begin{description}
\sphinxlineitem{TO\sphinxhyphen{}ALLOW\sphinxhyphen{}READ\sphinxhyphen{}OF\sphinxhyphen{}SCENARIO\sphinxhyphen{}TRACE}
\sphinxAtStartPar
Generates a capability token which permits a subsequent requester to obtain this terminal’s trace data by means of the CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}IF TRACING\sphinxhyphen{}SCENARIO tag described on page 61.

\sphinxlineitem{GIVING\sphinxhyphen{}ACCESS\sphinxhyphen{}TO\sphinxhyphen{}\%USER\%\sphinxhyphen{}DIRECTORY\sphinxhyphen{}WITH\sphinxhyphen{}MY\sphinxhyphen{}USERID}
\sphinxAtStartPar
The capability token generated by this tag may be used by a subsequent request to access a directory which has \%USER\% in the keyword field of its definition. The userid of the capability owning transaction will be used as the directory key when the directory is accessed.

\sphinxlineitem{GIVING\sphinxhyphen{}ACCESS\sphinxhyphen{}TO\sphinxhyphen{}\%GROUP\%\sphinxhyphen{}DIRECTORY\sphinxhyphen{}WITH\sphinxhyphen{}MY\sphinxhyphen{}USERID}
\sphinxAtStartPar
The capability token generated by this tag may be used by a subsequent request to access a directory which has \%GROUP\% in the keyword field of its definition. The RACF group name of the capability owning transaction will be used as the directory key when the directory is accessed.

\sphinxlineitem{GIVING\sphinxhyphen{}ACCESS\sphinxhyphen{}TO\sphinxhyphen{}\%USER\%\sphinxhyphen{}DIRECTORY\sphinxhyphen{}IN\sphinxhyphen{}VARIABLE\sphinxhyphen{}\%USER\%}
\sphinxAtStartPar
The capability token generated by this tag may be used by a subsequent request to access a directory which has \%USER\% in the keyword field of its definition. The value of the \%USER\% variable of the capability owning transaction will be used as the directory key when the directory is accessed.

\sphinxlineitem{GIVING\sphinxhyphen{}ACCESS\sphinxhyphen{}TO\sphinxhyphen{}\%GROUP\%\sphinxhyphen{}DIRECTORY\sphinxhyphen{}IN\sphinxhyphen{}VARIABLE\sphinxhyphen{}\%GROUP\%}
\sphinxAtStartPar
The capability token generated by this tag may be used by a subsequent request to access a directory which has \%GROUP\% in the keyword field of its definition. The value of the \%GROUP\% variable of the capability owning transaction will be used as the directory key when the directory is accessed.

\end{description}

\sphinxAtStartPar
\sphinxstylestrong{Examples:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{SET}\PYG{o}{\PYGZhy{}}\PYG{n}{HEADER} \PYG{p}{(}\PYG{n}{AS}\PYG{o}{\PYGZhy{}}\PYG{n}{IS}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Cache\PYGZhy{}control: no\PYGZhy{}cache}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{SET}\PYG{o}{\PYGZhy{}}\PYG{n}{HEADER} \PYG{p}{(}\PYG{n}{TO}\PYG{o}{\PYGZhy{}}\PYG{n}{ALLOW}\PYG{o}{\PYGZhy{}}\PYG{n}{READ}\PYG{o}{\PYGZhy{}}\PYG{n}{OF}\PYG{o}{\PYGZhy{}}\PYG{n}{SCENARIO}\PYG{o}{\PYGZhy{}}\PYG{n}{TRACE}\PYG{p}{)} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{x\PYGZhy{}Virtel\PYGZhy{}Debug:}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{SET}\PYG{o}{\PYGZhy{}}\PYG{n}{HEADER} \PYG{p}{(}\PYG{n}{GIVING}\PYG{o}{\PYGZhy{}}\PYG{n}{ACCESS}\PYG{o}{\PYGZhy{}}\PYG{n}{TO}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZpc{}}\PYG{n}{USER}\PYG{o}{\PYGZpc{}}\PYG{o}{\PYGZhy{}}\PYG{n}{DIRECTORY}\PYG{o}{\PYGZhy{}}\PYG{n}{IN}\PYG{o}{\PYGZhy{}}\PYG{n}{VARIABLE}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZpc{}}\PYG{n}{USER}\PYG{o}{\PYGZpc{}}\PYG{p}{)}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{x\PYGZhy{}Virtel\PYGZhy{}User\PYGZhy{}Directory:}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{SET}\PYG{o}{\PYGZhy{}}\PYG{n}{HEADER} \PYG{p}{(}\PYG{n}{GIVING}\PYG{o}{\PYGZhy{}}\PYG{n}{ACCESS}\PYG{o}{\PYGZhy{}}\PYG{n}{TO}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZpc{}}\PYG{n}{USER}\PYG{o}{\PYGZpc{}}\PYG{o}{\PYGZhy{}}\PYG{n}{DIRECTORY}\PYG{o}{\PYGZhy{}}\PYG{n}{WITH}\PYG{o}{\PYGZhy{}}\PYG{n}{MY}\PYG{o}{\PYGZhy{}}\PYG{n}{USERID}\PYG{p}{)}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{x\PYGZhy{}Virtel\PYGZhy{}User\PYGZhy{}Directory:}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{SET}\PYG{o}{\PYGZhy{}}\PYG{n}{HEADER} \PYG{p}{(}\PYG{n}{GIVING}\PYG{o}{\PYGZhy{}}\PYG{n}{ACCESS}\PYG{o}{\PYGZhy{}}\PYG{n}{TO}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZpc{}}\PYG{n}{GROUP}\PYG{o}{\PYGZpc{}}\PYG{o}{\PYGZhy{}}\PYG{n}{DIRECTORY}\PYG{o}{\PYGZhy{}}\PYG{n}{IN}\PYG{o}{\PYGZhy{}}\PYG{n}{VARIABLE}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZpc{}}\PYG{n}{GROUP}\PYG{o}{\PYGZpc{}}\PYG{p}{)}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{x\PYGZhy{}Virtel\PYGZhy{}Group\PYGZhy{}Directory:}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{SET}\PYG{o}{\PYGZhy{}}\PYG{n}{HEADER} \PYG{p}{(}\PYG{n}{GIVING}\PYG{o}{\PYGZhy{}}\PYG{n}{ACCESS}\PYG{o}{\PYGZhy{}}\PYG{n}{TO}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZpc{}}\PYG{n}{GROUP}\PYG{o}{\PYGZpc{}}\PYG{o}{\PYGZhy{}}\PYG{n}{DIRECTORY}\PYG{o}{\PYGZhy{}}\PYG{n}{WITH}\PYG{o}{\PYGZhy{}}\PYG{n}{MY}\PYG{o}{\PYGZhy{}}\PYG{n}{USERID}\PYG{p}{)}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{x\PYGZhy{}Virtel\PYGZhy{}Group\PYGZhy{}Directory:}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\index{Template page upload@\spxentry{Template page upload}}\index{Upload@\spxentry{Upload}!Template pages@\spxentry{Template pages}}\index{Template pages@\spxentry{Template pages}!Upload@\spxentry{Upload}}\ignorespaces 

\subsection{Template Page upload}
\label{\detokenize{User_Guide:template-page-upload}}\label{\detokenize{User_Guide:index-109}}
\sphinxAtStartPar
The SECURITY\sphinxhyphen{}TOKEN and IF\sphinxhyphen{}SECURITY\sphinxhyphen{}TOKEN\sphinxhyphen{}IS\sphinxhyphen{}READY tags are used during uploading of HTML pages from a browser (see {\hyperref[\detokenize{User_Guide:v462ug-uploading-html-pages}]{\sphinxcrossref{\DUrole{std,std-ref}{“Uploading pages by HTTP (secured by cookie)”}}}}).

\index{SECURITY\sphinxhyphen{}TOKEN@\spxentry{SECURITY\sphinxhyphen{}TOKEN}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!SECURITY\sphinxhyphen{}TOKEN@\spxentry{SECURITY\sphinxhyphen{}TOKEN}}\ignorespaces 

\subsubsection{SECURITY\sphinxhyphen{}TOKEN tag}
\label{\detokenize{User_Guide:security-token-tag}}\label{\detokenize{User_Guide:index-110}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{SECURITY}\PYG{o}{\PYGZhy{}}\PYG{n}{TOKEN} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
If the SECURITY\sphinxhyphen{}TOKEN tag is present in a template page, VIRTEL substitutes a newly generated user security code to be used for the next transfer. For example:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZlt{}script language=\PYGZdq{}JavaScript\PYGZdq{}\PYGZgt{}\PYGZlt{}!\PYGZhy{}\PYGZhy{}
var VirtelRef = \PYGZdq{}\PYGZob{}\PYGZob{}\PYGZob{}SECURITY\PYGZhy{}TOKEN\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{};
\PYGZhy{}\PYGZhy{}\PYGZgt{}\PYGZlt{}/script\PYGZgt{}
\end{sphinxVerbatim}

\sphinxAtStartPar
If a security code exists, the above code might generate:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{var} \PYG{n}{VirtelRef} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{20040427130843.07F5D1DC.56A85680Bgpamk4WZRKKBiZWjS4OTlqSES4OWlA==}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{;}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{otherwise} \PYG{n}{it} \PYG{n}{will} \PYG{n}{generate}\PYG{p}{:}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{var} \PYG{n}{VirtelRef} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{;}
\end{sphinxVerbatim}

\sphinxAtStartPar
Two examples of the use of the SECURITY\sphinxhyphen{}TOKEN tag are supplied in the HTMLBAS directory used by VIRTEL entry point DEMOHTTP. The upload.htm page stores and retransmits the user security code in the form of a cookie (VirtelRef=xxxxxxxxxxxxxxxx). The upload2.htm page retransmits the user security code using the VirtelCookie=parameter of the URL (see {\hyperref[\detokenize{User_Guide:v462ug-cookie-upload}]{\sphinxcrossref{\DUrole{std,std-ref}{“Transmission of upload cookie by URL”}}}}), but it does not store the code.

\index{IF\sphinxhyphen{}SECURITY\sphinxhyphen{}TOKEN\sphinxhyphen{}IS\sphinxhyphen{}READY@\spxentry{IF\sphinxhyphen{}SECURITY\sphinxhyphen{}TOKEN\sphinxhyphen{}IS\sphinxhyphen{}READY}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!IF\sphinxhyphen{}SECURITY\sphinxhyphen{}TOKEN\sphinxhyphen{}IS\sphinxhyphen{}READY@\spxentry{IF\sphinxhyphen{}SECURITY\sphinxhyphen{}TOKEN\sphinxhyphen{}IS\sphinxhyphen{}READY}}\ignorespaces 

\subsubsection{IF\sphinxhyphen{}SECURITY\sphinxhyphen{}TOKEN\sphinxhyphen{}IS\sphinxhyphen{}READY tag}
\label{\detokenize{User_Guide:if-security-token-is-ready-tag}}\label{\detokenize{User_Guide:index-111}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{IF}\PYG{o}{\PYGZhy{}}\PYG{n}{SECURITY}\PYG{o}{\PYGZhy{}}\PYG{n}{TOKEN}\PYG{o}{\PYGZhy{}}\PYG{n}{IS}\PYG{o}{\PYGZhy{}}\PYG{n}{READY}
    \PYG{n}{SetHostWarning}\PYG{p}{(}\PYG{p}{)}\PYG{p}{;}
\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The IF\sphinxhyphen{}SECURITY\sphinxhyphen{}TOKEN\sphinxhyphen{}IS\sphinxhyphen{}READY tag encloses HTML or JavaScript code to be generated only if a non\sphinxhyphen{}empty SECURITY\sphinxhyphen{}TOKEN is present.

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
The total size of this tag, including the enclosed code, must not exceed the size of an inter\sphinxhyphen{}block buffer (120 characters) otherwise it will not be correctly processed if it spans blocks.
\end{sphinxadmonition}
\phantomsection\label{\detokenize{User_Guide:v462ug-printing}}
\index{3287 Printing@\spxentry{3287 Printing}}\ignorespaces 

\subsection{3287 printing}
\label{\detokenize{User_Guide:printing}}\label{\detokenize{User_Guide:index-112}}
\sphinxAtStartPar
Each relay LU, through which a user connects to a host application, can be associated with a second LU which represents a virtual printer (see the description of HTTP terminals in the VIRTEL Connectivity Reference documentation). Data sent to this virtual printer by a host application (such as CICS) are stored by VIRTEL and can be retrieved by means of the tags IF\sphinxhyphen{}PRINT\sphinxhyphen{}IS\sphinxhyphen{}READY, SESSION\sphinxhyphen{}CODE, and PRINT embedded in a template page.

\index{IF\sphinxhyphen{}PRINT\sphinxhyphen{}IS\sphinxhyphen{}READY@\spxentry{IF\sphinxhyphen{}PRINT\sphinxhyphen{}IS\sphinxhyphen{}READY}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!IF\sphinxhyphen{}PRINT\sphinxhyphen{}IS\sphinxhyphen{}READY@\spxentry{IF\sphinxhyphen{}PRINT\sphinxhyphen{}IS\sphinxhyphen{}READY}}\ignorespaces 

\subsubsection{IF\sphinxhyphen{}PRINT\sphinxhyphen{}IS\sphinxhyphen{}READY tag}
\label{\detokenize{User_Guide:if-print-is-ready-tag}}\label{\detokenize{User_Guide:index-113}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{IF}\PYG{o}{\PYGZhy{}}\PYG{n}{PRINT}\PYG{o}{\PYGZhy{}}\PYG{n}{IS}\PYG{o}{\PYGZhy{}}\PYG{n}{READY} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The IF\sphinxhyphen{}PRINT\sphinxhyphen{}IS\sphinxhyphen{}READY tag encloses a section of the page which is generated only if print data exists on the virtual printer associated with the user’s session. The HTML content represented by “…” is
generated only if VIRTEL has data ready to be printed.

\index{SESSION\sphinxhyphen{}CODE@\spxentry{SESSION\sphinxhyphen{}CODE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!SESSION\sphinxhyphen{}CODE@\spxentry{SESSION\sphinxhyphen{}CODE}}\ignorespaces 

\subsubsection{SESSION\sphinxhyphen{}CODE tag}
\label{\detokenize{User_Guide:index-114}}\label{\detokenize{User_Guide:id4}}
\sphinxAtStartPar
The SESSION\sphinxhyphen{}CODE tag, prefixed by the word “Print”, generates a session code which allows a subsidiary window to be opened for the print data associated with the specified session. The template page displayed in this window can retrieve the stored print data by means of the PRINT tag. The user can then view the print data, and can, if desired, send the data to a physical workstation printer using the normal procedure for printing from a browser.

\sphinxAtStartPar
For example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZlt{}script language=\PYGZdq{}Javascript\PYGZdq{} type=\PYGZdq{}text/Javascript\PYGZdq{}\PYGZgt{}
\PYGZlt{}!\PYGZhy{}\PYGZhy{}
    function ShowPopup()
    \PYGZob{}
        var popupURL = \PYGZdq{}imprim.htm++Print\PYGZob{}\PYGZob{}\PYGZob{} SESSION\PYGZhy{}CODE \PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{}
        var popupName = \PYGZdq{}PopupImpression\PYGZdq{};
        var popup = window.open(\PYGZdq{}\PYGZdq{}, popupName,
            \PYGZsq{}status=yes,resizable=yes,scrollbars=yes,toolbar=yes,\PYGZsq{} +
            \PYGZsq{}menubar=yes,width=614,height=129\PYGZsq{});
        popup.location = popupURL;
    \PYGZcb{}
    \PYGZob{}\PYGZob{}\PYGZob{}IF\PYGZhy{}PRINT\PYGZhy{}IS\PYGZhy{}READY
        ShowPopup();
    \PYGZcb{}\PYGZcb{}\PYGZcb{}
// \PYGZhy{}\PYGZhy{}\PYGZgt{}
\PYGZlt{}/script\PYGZgt{}
\end{sphinxVerbatim}

\index{PRINT@\spxentry{PRINT}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!PRINT@\spxentry{PRINT}}\ignorespaces 

\subsubsection{PRINT tag}
\label{\detokenize{User_Guide:print-tag}}\label{\detokenize{User_Guide:index-115}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{PRINT} \PYG{p}{(}\PYG{l+m+mi}{0}\PYG{p}{)} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The PRINT tag allows a template page, such as the imprim.htm page supplied with VIRTEL, to retrieve 3287 print data. The structured field FAD3 also allows print data to be fed to VIRTEL for retrieval with the PRINT tag.


\subsection{Generating PDF output}
\label{\detokenize{User_Guide:generating-pdf-output}}\label{\detokenize{User_Guide:v462ug-pdf-output}}
\sphinxAtStartPar
When a page template is processed in a scenario by a COPY\$ OUTPUT\sphinxhyphen{}FILE\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE instruction with the TYPE=LINEBUFFER parameter, the page template may contain additional tags. These tags are used to assist in the construction of INPUT, DOCOPT, and LAYOUT files in the “LINEBUF” format required by the MakePDF program product.

\sphinxAtStartPar
These files may then be passed to the VIRSVPDF service program which invokes MakePDF to generate output files in PDF format. Refer to {\hyperref[\detokenize{User_Guide:v462ug-pdf}]{\sphinxcrossref{\DUrole{std,std-ref}{“PDF output generation”}}}} for an example scenario.

\index{PDF\sphinxhyphen{}LINES\sphinxhyphen{}PER\sphinxhyphen{}PAGE@\spxentry{PDF\sphinxhyphen{}LINES\sphinxhyphen{}PER\sphinxhyphen{}PAGE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!PDF\sphinxhyphen{}LINES\sphinxhyphen{}PER\sphinxhyphen{}PAGE@\spxentry{PDF\sphinxhyphen{}LINES\sphinxhyphen{}PER\sphinxhyphen{}PAGE}}\ignorespaces 

\subsubsection{PDF\sphinxhyphen{}LINES\sphinxhyphen{}PER\sphinxhyphen{}PAGE tag}
\label{\detokenize{User_Guide:pdf-lines-per-page-tag}}\label{\detokenize{User_Guide:index-116}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{PDF}\PYG{o}{\PYGZhy{}}\PYG{n}{LINES}\PYG{o}{\PYGZhy{}}\PYG{n}{PER}\PYG{o}{\PYGZhy{}}\PYG{n}{PAGE} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{nn}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The PDF\sphinxhyphen{}LINES\sphinxhyphen{}PER\sphinxhyphen{}PAGE tag inserts “1” in the ASA carriage control character position after every nn lines.

\index{PDF\sphinxhyphen{}NEW\sphinxhyphen{}DOCOPT@\spxentry{PDF\sphinxhyphen{}NEW\sphinxhyphen{}DOCOPT}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!PDF\sphinxhyphen{}NEW\sphinxhyphen{}DOCOPT@\spxentry{PDF\sphinxhyphen{}NEW\sphinxhyphen{}DOCOPT}}\ignorespaces 

\subsubsection{PDF\sphinxhyphen{}NEW\sphinxhyphen{}DOCOPT tag}
\label{\detokenize{User_Guide:pdf-new-docopt-tag}}\label{\detokenize{User_Guide:index-117}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{PDF}\PYG{o}{\PYGZhy{}}\PYG{n}{NEW}\PYG{o}{\PYGZhy{}}\PYG{n}{DOCOPT} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The PDF\sphinxhyphen{}NEW\sphinxhyphen{}DOCOPT tag is used only in a MakePDF DOCOPT file. It identifies the DOCOPT file by the character “n”. This allows the DOCOPT file to be referenced by the PDF\sphinxhyphen{}USE\sphinxhyphen{}DOCOPT tag in the corresponding INPUT file.

\index{PDF\sphinxhyphen{}NEW\sphinxhyphen{}INPUT@\spxentry{PDF\sphinxhyphen{}NEW\sphinxhyphen{}INPUT}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!PDF\sphinxhyphen{}NEW\sphinxhyphen{}INPUT@\spxentry{PDF\sphinxhyphen{}NEW\sphinxhyphen{}INPUT}}\ignorespaces 

\subsubsection{PDF\sphinxhyphen{}NEW\sphinxhyphen{}INPUT tag}
\label{\detokenize{User_Guide:pdf-new-input-tag}}\label{\detokenize{User_Guide:index-118}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{PDF}\PYG{o}{\PYGZhy{}}\PYG{n}{NEW}\PYG{o}{\PYGZhy{}}\PYG{n}{INPUT} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The PDF\sphinxhyphen{}NEW\sphinxhyphen{}INPUT tag is used only in a MakePDF INPUT file. It identifies the start of a new segment in the INPUT file.

\index{PDF\sphinxhyphen{}NEW\sphinxhyphen{}LAYOUT@\spxentry{PDF\sphinxhyphen{}NEW\sphinxhyphen{}LAYOUT}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!PDF\sphinxhyphen{}NEW\sphinxhyphen{}LAYOUT@\spxentry{PDF\sphinxhyphen{}NEW\sphinxhyphen{}LAYOUT}}\ignorespaces 

\subsubsection{PDF\sphinxhyphen{}NEW\sphinxhyphen{}LAYOUT tag}
\label{\detokenize{User_Guide:pdf-new-layout-tag}}\label{\detokenize{User_Guide:index-119}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{PDF}\PYG{o}{\PYGZhy{}}\PYG{n}{NEW}\PYG{o}{\PYGZhy{}}\PYG{n}{LAYOUT} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The PDF\sphinxhyphen{}NEW\sphinxhyphen{}LAYOUT tag is used only in a MakePDF LAYOUT file. It identifies the LAYOUT file by the character “n”. This allows the LAYOUT file to be referenced by the PDF\sphinxhyphen{}USE\sphinxhyphen{}LAYOUT tag in the corresponding INPUT file.

\index{PDF\sphinxhyphen{}OUTLINE@\spxentry{PDF\sphinxhyphen{}OUTLINE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!PDF\sphinxhyphen{}OUTLINE@\spxentry{PDF\sphinxhyphen{}OUTLINE}}\ignorespaces 

\subsubsection{PDF\sphinxhyphen{}OUTLINE tag}
\label{\detokenize{User_Guide:pdf-outline-tag}}\label{\detokenize{User_Guide:index-120}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{PDF}\PYG{o}{\PYGZhy{}}\PYG{n}{OUTLINE} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The PDF\sphinxhyphen{}OUTLINE tag inserts “@” in the ASA carriage control character position.

\index{PDF\sphinxhyphen{}PAGE\sphinxhyphen{}BREAK@\spxentry{PDF\sphinxhyphen{}PAGE\sphinxhyphen{}BREAK}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!PDF\sphinxhyphen{}PAGE\sphinxhyphen{}BREAK@\spxentry{PDF\sphinxhyphen{}PAGE\sphinxhyphen{}BREAK}}\ignorespaces 

\subsubsection{PDF\sphinxhyphen{}PAGE\sphinxhyphen{}BREAK tag}
\label{\detokenize{User_Guide:pdf-page-break-tag}}\label{\detokenize{User_Guide:index-121}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{PDF}\PYG{o}{\PYGZhy{}}\PYG{n}{PAGE}\PYG{o}{\PYGZhy{}}\PYG{n}{BREAK} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The PDF\sphinxhyphen{}PAGE\sphinxhyphen{}BREAK tag inserts “1” in the ASA carriage control character position.

\index{PDF\sphinxhyphen{}USE\sphinxhyphen{}DOCOPT@\spxentry{PDF\sphinxhyphen{}USE\sphinxhyphen{}DOCOPT}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!PDF\sphinxhyphen{}USE\sphinxhyphen{}DOCOPT@\spxentry{PDF\sphinxhyphen{}USE\sphinxhyphen{}DOCOPT}}\ignorespaces 

\subsubsection{PDF\sphinxhyphen{}USE\sphinxhyphen{}DOCOPT tag}
\label{\detokenize{User_Guide:pdf-use-docopt-tag}}\label{\detokenize{User_Guide:index-122}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{PDF}\PYG{o}{\PYGZhy{}}\PYG{n}{USE}\PYG{o}{\PYGZhy{}}\PYG{n}{DOCOPT} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The PDF\sphinxhyphen{}USE\sphinxhyphen{}DOCOPT tag is used only in a MakePDF INPUT file. It specifies that the INPUT file is associated with the DOCOPT file identified by the character “n”

\index{PDF\sphinxhyphen{}USE\sphinxhyphen{}LAYOUT@\spxentry{PDF\sphinxhyphen{}USE\sphinxhyphen{}LAYOUT}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!PDF\sphinxhyphen{}USE\sphinxhyphen{}LAYOUT@\spxentry{PDF\sphinxhyphen{}USE\sphinxhyphen{}LAYOUT}}\ignorespaces 

\subsubsection{PDF\sphinxhyphen{}USE\sphinxhyphen{}LAYOUT tag}
\label{\detokenize{User_Guide:pdf-use-layout-tag}}\label{\detokenize{User_Guide:index-123}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{PDF}\PYG{o}{\PYGZhy{}}\PYG{n}{USE}\PYG{o}{\PYGZhy{}}\PYG{n}{LAYOUT} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{n}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The PDF\sphinxhyphen{}USE\sphinxhyphen{}LAYOUT tag is used only in a MakePDF INPUT file. It specifies that the INPUT file is associated with the LAYOUT file identified by the character “n”

\index{PDF\sphinxhyphen{}VARIABLE@\spxentry{PDF\sphinxhyphen{}VARIABLE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!PDF\sphinxhyphen{}VARIABLE@\spxentry{PDF\sphinxhyphen{}VARIABLE}}\ignorespaces 
\sphinxAtStartPar
PDF\sphinxhyphen{}VARIABLE tag

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{PDF}\PYG{o}{\PYGZhy{}}\PYG{n}{VARIABLE} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The PDF\sphinxhyphen{}VARIABLE tag inserts “=” in the ASA carriage control character position.

\newpage


\section{Web Access Customization}
\label{\detokenize{User_Guide:web-access-customization}}\label{\detokenize{User_Guide:v462ug-uploading-html-pages}}

\subsection{Uploading HTML Pages}
\label{\detokenize{User_Guide:uploading-html-pages}}
\sphinxAtStartPar
A part of Web Access Customization will require the uploading of HTML templates or other web entities such as customised JavaScript or CSS files. The Virtel Administration guide provides information on how to upload files to the Virtel mainframe server.


\subsection{Web Access Settings}
\label{\detokenize{User_Guide:web-access-settings}}
\sphinxAtStartPar
The VIRTEL Web Access user can use the Settings menu to modify certain options such as font size, 3270 key mappings, and color schemes. The user’s settings are stored in a browser local storage which remains valid so long as cookies are not deleted from the workstation. The settings stored in the user’s local storage override the default settings for VIRTEL Web Access which are distributed in the w2hparm.js file, located in the default W2H\sphinxhyphen{}DIR directory. See {\hyperref[\detokenize{User_Guide:v462ug-global-modifications}]{\sphinxcrossref{\DUrole{std,std-ref}{“Global modification of Web Access settings”}}}}.

\phantomsection\label{\detokenize{User_Guide:v462ug-settings-menu}}
\index{Web Access Settings@\spxentry{Web Access Settings}}\ignorespaces 

\subsubsection{Web Access Settings menu}
\label{\detokenize{User_Guide:web-access-settings-menu}}\label{\detokenize{User_Guide:index-125}}
\sphinxAtStartPar
\sphinxincludegraphics[width=0.22500in,height=0.22500in]{{image18}.jpeg} When the user clicks the settings ICON on the VIRTEL Web Access toolbar, the Virtel Web Access settings panel is displayed. The panel has four setting tabs which are described below.

\index{Display@\spxentry{Display}!Web Access Settings@\spxentry{Web Access Settings}}\index{Web Access Settings@\spxentry{Web Access Settings}!Display@\spxentry{Display}}\ignorespaces 

\subsubsection{Display Tab}
\label{\detokenize{User_Guide:display-tab}}\label{\detokenize{User_Guide:index-126}}
\sphinxAtStartPar
\sphinxincludegraphics[width=4.0in,height=5.5in]{{image19}.png}

\sphinxAtStartPar
\sphinxstyleemphasis{VIRTEL Web Access Settings Display Tab (part 1 of 4)}
\begin{description}
\sphinxlineitem{Font family}
\sphinxAtStartPar
Name of font. The panel displays a list of fonts known to VIRTEL and installed on the workstation, in addition to the fonts supplied by VIRTEL. If the required font is not in the list, click the ellipsis to the right of the selection box and type the name of the font in the box. Any fixed\sphinxhyphen{}width font installed on the workstation may be specified.

\sphinxlineitem{Font Size}
\sphinxAtStartPar
Size of font. Possible values are:

\sphinxlineitem{Window}
\sphinxAtStartPar
VIRTEL calculates the font size to fit the browser’s window size.

\sphinxlineitem{nn}
\sphinxAtStartPar
VIRTEL uses a fixed font size. nn is the size in “points”: 8pt, 10pt, 12pt, 14pt, or 16pt.

\sphinxlineitem{NoStretch}
\sphinxAtStartPar
By default Virtel attempts to optimize the window presentation to the users screen size. Setting the NOStretch option forces Virtel to calculate a fixed font size to fit the display screen size.

\sphinxlineitem{Cursor}
\sphinxAtStartPar
The shape of the 3270 cursor. The possible settings are:
\begin{description}
\sphinxlineitem{Smart}
\sphinxAtStartPar
The character at the cursor position is underlined and the position and color changes to always remain visible for any character (depending on the selected character’s style : bgnd color, reverse, underlined).

\sphinxlineitem{Bar}
\sphinxAtStartPar
The underlined character at the cursor position is in reverse video

\sphinxlineitem{Block}
\sphinxAtStartPar
The block character at the cursor position is in reverse video

\sphinxlineitem{Blink}
\sphinxAtStartPar
The block character at the cursor position is in blinking reverse video

\sphinxlineitem{Vertical line, Horiz line}
\sphinxAtStartPar
When activated, causes the position of the cursor to be marked with a vertical line and/or a horizontal line extending to the edges of the 3270 window (also known as a “crosshair cursor”).

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
For Internet Explorer versions 6 and 7, Blink is the same as Block
\end{sphinxadmonition}

\end{description}

\sphinxlineitem{Display Style}
\sphinxAtStartPar
Allows a choice of color schemes by selection of CSS style sheet. By default, possible values are:
\begin{description}
\sphinxlineitem{3270}
\sphinxAtStartPar
extended colors on black background

\sphinxlineitem{Gray}
\sphinxAtStartPar
extended colors on gray background

\sphinxlineitem{White}
\sphinxAtStartPar
gray characters on white background

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
To add or remove a style, see {\hyperref[\detokenize{User_Guide:v462ug-customize-display}]{\sphinxcrossref{\DUrole{std,std-ref}{“Customize display style”}}}}). Administrators can add some new customs style as describe in the section {\hyperref[\detokenize{User_Guide:v462ug-customize-display}]{\sphinxcrossref{\DUrole{std,std-ref}{“How to customize display style”}}}}.
\end{sphinxadmonition}

\end{description}

\sphinxlineitem{Print style}
\sphinxAtStartPar
Allows a choice of color schemes for the screen capture window. By default, possible values are:
\begin{description}
\sphinxlineitem{3270}
\sphinxAtStartPar
extended colors on black background

\sphinxlineitem{Color}
\sphinxAtStartPar
extended colors on white background

\sphinxlineitem{White}
\sphinxAtStartPar
black characters on white background

\end{description}

\sphinxlineitem{Toolbar}\begin{itemize}
\item {} 
\sphinxAtStartPar
Show the toggle button for 3278T mode

\item {} 
\sphinxAtStartPar
Hide the Virtel information.

\end{itemize}

\sphinxlineitem{Miscellaneous}\begin{itemize}
\item {} \begin{description}
\sphinxlineitem{Highlight input fields}
\sphinxAtStartPar
Permits the user to display a different background color for 3270 input fields. When this option is selected, all input fields will have a class designator HIGHLIGHTED\_INPUTFIELD in addition to their regular class. The style definition may be overridden by the administrator in the custom.css file.

\end{description}

\item {} \begin{description}
\sphinxlineitem{Bidirectional data}
\sphinxAtStartPar
Allows the Alt\sphinxhyphen{}ENTER key to globally switch the screen display from ‘left to right’ to ‘right to left’. This provides support for languages that require “right\sphinxhyphen{}to\sphinxhyphen{}left” screen presentation such as Arabic. This option may be set in w2hparm through the “w2hparm.mirrorMode” setting.

\end{description}

\end{itemize}

\end{description}

\index{Miscellaneous@\spxentry{Miscellaneous}!Web Access Settings@\spxentry{Web Access Settings}}\index{Web Access Settings@\spxentry{Web Access Settings}!Miscellaneous@\spxentry{Miscellaneous}}\ignorespaces 

\subsubsection{Miscellaneous Display}
\label{\detokenize{User_Guide:miscellaneous-display}}\label{\detokenize{User_Guide:index-127}}
\sphinxAtStartPar
\sphinxincludegraphics[width=4.0in,height=5.5in]{{image20}.png}

\sphinxAtStartPar
\sphinxstyleemphasis{VIRTEL Web Access Settings Miscellaneous Tab (part 2 of 4)}
\begin{description}
\sphinxlineitem{Double click}
\sphinxAtStartPar
Specifies the action taken for a mouse double\sphinxhyphen{}click. Possible settings are :
\begin{description}
\sphinxlineitem{off}
\sphinxAtStartPar
Indicates that the double\sphinxhyphen{}click function is deactivated.

\sphinxlineitem{Word Selection}
\sphinxAtStartPar
Draws a box around the word that the mouse is pointing in preparation for a copy or cut operation.

\sphinxlineitem{ENTER}
\sphinxAtStartPar
Activates the “point\sphinxhyphen{}and\sphinxhyphen{}shoot” function. When set to ENTER, double clicking the mouse moves the cursor to the mouse position and sends a 3270 ENTER to the host application.

\end{description}

\sphinxlineitem{Edition}\begin{description}
\sphinxlineitem{Paste erase EOF}
\sphinxAtStartPar
When activated, a paste operation will erase the rest of an input field to the right of the pasted text

\sphinxlineitem{Paste moves the cursor}
\sphinxAtStartPar
When activated, a paste operation will move the cursor to the end of the field

\sphinxlineitem{Map Ctrl+V to Paste by Typing}
\sphinxAtStartPar
Indicates that Ctrl+V will act “paste by typing”, i.e cursor will be positionned at the end of the pasted text instead of remaining at the position it was before using Ctrl+V.

\sphinxlineitem{Move cursor on activate}
\sphinxAtStartPar
This setting takes effect only when the user clicks on a background 3270 window in order to bring the window to the foreground. When the option is activated, the window is brought to the foreground and the 3270 cursor moves to the location in the window where the user clicked; the copy/paste box and context menu are removed if present. When the option is not activated, the window is brought to the foreground and the cursor remains in its previous position; the copy/paste box and context menu remain displayed if present.

\sphinxlineitem{Preserve insertion mode}
\sphinxAtStartPar
This setting takes effect only when the keyboard is in insertion mode. When the option is activated, the cursor will remain in insert mode until the user returns to normal entry mode by using the “insert” key again, otherwise the cursor returns to normal whenever a transmission key is used.

\end{description}

\sphinxlineitem{Pads}\begin{description}
\sphinxlineitem{Keep macro pad open}
\sphinxAtStartPar
If checked, the macro window remains open all the time. If not, it disappears as soon as you have clicked a macro.

\sphinxlineitem{Keep keypad open}
\sphinxAtStartPar
If checked, the keypad window remains open all the time. If not, it disappears as soon as you have clicked a function key in it.

\sphinxlineitem{Macro pad in the window}
\sphinxAtStartPar
If checked, determines the location of the macro pad.

\end{description}

\sphinxlineitem{Hotspots}\begin{description}
\sphinxlineitem{Display URL hotspots}
\sphinxAtStartPar
When activated, any text starting with http, https, mailto, file, or ftp (except in 3270 input fields) is transformed into a hyperlink.

\sphinxlineitem{Display PF key hotspots}
\sphinxAtStartPar
When activated, any text starting with Fnn= or PFnn= (except in 3270 input fields) is transformed into a clickable area. Clicking on the area is equivalent to pressing PF nn.

\end{description}

\sphinxlineitem{Capture}\begin{description}
\sphinxlineitem{Auto\sphinxhyphen{}capture}
\sphinxAtStartPar
When activated, causes a snapshot of each screen displayed by the host application to be automatically appended to the screen capture window.

\sphinxlineitem{Bring capture to the foreground}
\sphinxAtStartPar
When activated, causes the capture windows to come in the foreground whenever the cature icon is used.

\end{description}

\sphinxlineitem{Miscellaneous}\begin{description}
\sphinxlineitem{Auto\sphinxhyphen{}print}
\sphinxAtStartPar
When activated, causes the Windows print function to be launched automatically in the print window as a result of a screen snapshot or print request.

\sphinxlineitem{Response time monitor}
\sphinxAtStartPar
When activated, two counters are displayed on the status line below the 3270 screen, for example: H:110ms J:31ms. The first number (H=Host) represents the response time of the VIRTEL server, from the last Enter or PF key until the receipt of the most recent message from the server. The second number (J=JavaScript) is the time taken by the browser scripts to prepare the screen for display. The sum of the two numbers is the response time perceived by the user.

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
The response time monitor is active in Ajax mode only.
\end{sphinxadmonition}

\sphinxlineitem{Omit nulls from input}
\sphinxAtStartPar
When activated, VIRTELWeb Access will remove all nulls from modified input fields before sending to the server, in strict conformance with 3270 protocol. When not activated, leading and embedded nulls are converted to blanks, and only trailing nulls are suppressed, which many users find more convenient.

\sphinxlineitem{Remap caret to logical not}
\sphinxAtStartPar
If checked, translates the “caret” sign (Shift+6 on a US keyboard) to EBCDIC X’5F’, which is the “logical not” sign (¬) in codepage 037/1140.

\sphinxlineitem{AsynchSupport}
\sphinxAtStartPar
By default Virtel uses a “Long Poll” technique to asynchronously update the display when the mainframe has data to send regardless of the users input key requests. This feature may be disabled through this check box. Users who use the Virtel i4web AS/400 interface should disable “Long Poll”. This option may be set in w2hparm through the “w2hparm.AsynchSupport” setting.

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
If disabled Virtel will only update the screen after receiveing an input key request from the user.
\end{sphinxadmonition}

\end{description}

\end{description}

\index{Key Mapping@\spxentry{Key Mapping}!Web Access Settings@\spxentry{Web Access Settings}}\index{Web Access Settings@\spxentry{Web Access Settings}!Key Mapping@\spxentry{Key Mapping}}\ignorespaces 

\subsubsection{Key Mappings Display}
\label{\detokenize{User_Guide:key-mappings-display}}\label{\detokenize{User_Guide:index-128}}
\sphinxAtStartPar
\sphinxincludegraphics[width=4.0in,height=5.5in]{{image21}.png}

\sphinxAtStartPar
\sphinxstyleemphasis{VIRTEL Web Access Settings Key Mappings Tab (part 3 of 4)}

\sphinxAtStartPar
This tab is used to map specific functions to certain keyboard keys. The tab contains five sub categories whose names are explicit enough to not require more precision. However the following notes provide further information on possible browser differences.
\begin{description}
\sphinxlineitem{Esc key to Alt+F3}
\sphinxAtStartPar
Defines the mapping of workstation keyboard to 3270 keys. The value “no” indicates that the keystroke is ignored. For example the 3270 PA1 key may be assigned to the PageUp key, to the Alt+PageUp key, and/or to the Alt+F1 key on the user’s keyboard.

\sphinxlineitem{Ctrl key}
\sphinxAtStartPar
For Internet Explorer, the “Ctrl key” setting refers to the right Ctrl key. For Firefox, Chrome, and Safari the “Ctrl key” setting applies to both the left and right Ctrl keys identically. For Firefox, the “Keypad Enter” setting is ignored. For Internet Explorer versions 6, 7, and 8, a browser helper object(BHO = virtkey.dll) must be installed to allow recognition of the keypad Enter key. This BHO is not needed for Internet Explorer 9.

\sphinxlineitem{Keypad /*\sphinxhyphen{}+.}
\sphinxAtStartPar
Allows keys on the numeric keypad to be assigned to certain 3270 functions including PA1, PA2, Tab, Backtab, and Newline. Also allows the decimal point on the numeric keypad to be remapped to comma for European countries.

\end{description}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
Remapping of the numeric keypad is only supported for Internet Explorer, Chrome, and Safari. Keypad settings are ignored for Firefox and Opera.
\end{sphinxadmonition}

\index{Import/Export@\spxentry{Import/Export}!Web Access Settings@\spxentry{Web Access Settings}}\index{Web Access Settings@\spxentry{Web Access Settings}!Import/Export@\spxentry{Import/Export}}\ignorespaces 

\subsubsection{Import/Export parameters}
\label{\detokenize{User_Guide:import-export-parameters}}\label{\detokenize{User_Guide:index-129}}
\sphinxAtStartPar
\sphinxincludegraphics[width=4.0in,height=5.5in]{{image22}.png}

\sphinxAtStartPar
\sphinxstyleemphasis{VIRTEL Web Access Settings Import/Export Tab (part 4 of 4)}

\sphinxAtStartPar
This tab lets the user to save and restore his settings into (or from) a local file. This backup method is different and independent of the method used when the “save” button is pressed. (See below).


\subsubsection{Associated functions}
\label{\detokenize{User_Guide:id5}}
\sphinxAtStartPar
After modifying the Settings menu, the user presses one of the buttons:
\begin{description}
\sphinxlineitem{Save}
\sphinxAtStartPar
save the options in browser local storage.

\sphinxlineitem{Cancel}
\sphinxAtStartPar
exit without saving the modifications made to this menu.

\sphinxlineitem{Defaults}
\sphinxAtStartPar
returns all of the settings to their default values. The default values are specified by the installation in w2hparm.js.

\end{description}

\sphinxAtStartPar
Deletion of browser cookies may delete the values saved in local storage. For Internet Explorer, ensure that the option “Delete browsing history on exit” in Tools \textendash{} Internet Options” is not checked.


\subsubsection{Where user settings are stored}
\label{\detokenize{User_Guide:where-user-settings-are-stored}}
\sphinxAtStartPar
When the user press the “save” button, his Web Access settings and macros are stored in browser local storage. For Internet Explorer 6, local storage is stored in the folder :
\%userprofile\%/UserData For Internet Explorer 8 and 9, local storage is stored in the folder :

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZpc{}}\PYG{n}{userprofile}\PYG{o}{\PYGZpc{}}\PYG{o}{/}\PYG{n}{Local} \PYG{n}{Settings}\PYG{o}{/}\PYG{n}{Application} \PYG{n}{Data}\PYG{o}{/}\PYG{n}{Microsoft}\PYG{o}{/}\PYG{n}{Internet} \PYG{n}{Explorer}\PYG{o}{/}\PYG{n}{DOMStore}
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
To see DOMStore you must untick “hide protected operating system files” in Windows folder options.
\end{sphinxadmonition}

\sphinxAtStartPar
For other browsers, see

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{www}\PYG{o}{.}\PYG{n}{sitepoint}\PYG{o}{.}\PYG{n}{com}\PYG{o}{/}\PYG{n}{building}\PYG{o}{\PYGZhy{}}\PYG{n}{web}\PYG{o}{\PYGZhy{}}\PYG{n}{pages}\PYG{o}{\PYGZhy{}}\PYG{k}{with}\PYG{o}{\PYGZhy{}}\PYG{n}{local}\PYG{o}{\PYGZhy{}}\PYG{n}{storage}\PYG{o}{/}
\end{sphinxVerbatim}
\phantomsection\label{\detokenize{User_Guide:v462ug-global-modifications}}
\index{Global modification@\spxentry{Global modification}!Web Access Settings@\spxentry{Web Access Settings}}\index{Web Access Settings@\spxentry{Web Access Settings}!Global modification@\spxentry{Global modification}}\index{w2hparm.js@\spxentry{w2hparm.js}!Web Access Settings@\spxentry{Web Access Settings}}\index{Web Access Settings@\spxentry{Web Access Settings}!w2hparm.js@\spxentry{w2hparm.js}}\index{sources.zip@\spxentry{sources.zip}!Web Access Settings@\spxentry{Web Access Settings}}\index{Web Access Settings@\spxentry{Web Access Settings}!sources.zip@\spxentry{sources.zip}}\ignorespaces 

\subsubsection{Global modification of Web Access settings}
\label{\detokenize{User_Guide:global-modification-of-web-access-settings}}\label{\detokenize{User_Guide:index-130}}
\sphinxAtStartPar
Those installations who wish to modify the default Web Access settings for all users can do so by modifying the w2hparm.js file. This file is included in the sources.zip file which can be obtained from the VIRTEL Web Access menu accessible by URL \sphinxurl{http://10.20.170.71:41001}.

\sphinxAtStartPar
The w2hparm.js file as delivered is just a dummy file and contains no default settings. See \sphinxtitleref{“Appendix A \sphinxhyphen{} w2hparm values” \textless{}\#\_V462UG\_w2hparm\_defaults\textgreater{}} for a list of the possible w2hparm values.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{o}{/}\PYG{o}{/} \PYG{n}{w2hparm}\PYG{o}{.}\PYG{n}{js} \PYG{p}{(}\PYG{n}{W2H}\PYG{o}{\PYGZhy{}}\PYG{n}{DIR}\PYG{p}{)}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{w2h} \PYG{n}{parameters} \PYG{n}{to} \PYG{n}{override} \PYG{o+ow}{or} \PYG{n}{hide}\PYG{o}{.}
\PYG{o}{/}\PYG{o}{/}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{NOTE}\PYG{p}{:} \PYG{n}{this} \PYG{n}{file} \PYG{o+ow}{is} \PYG{n}{a} \PYG{n}{sample} \PYG{o+ow}{and} \PYG{n}{will} \PYG{n}{be} \PYG{n}{replaced} \PYG{n}{after} \PYG{n}{a} \PYG{n}{new} \PYG{n}{install}\PYG{o}{.}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{please} \PYG{n}{see} \PYG{n}{the} \PYG{n}{documentation} \PYG{n}{on} \PYG{n}{possible} \PYG{n}{parameter} \PYG{n}{values}
\PYG{o}{/}\PYG{o}{/} \PYG{o+ow}{and} \PYG{n}{on} \PYG{n}{how} \PYG{n}{to} \PYG{n+nb}{set} \PYG{n}{this} \PYG{n}{file} \PYG{n}{up} \PYG{o+ow}{in} \PYG{n}{CLI}\PYG{o}{\PYGZhy{}}\PYG{n}{DIR} \PYG{n}{instead} \PYG{n}{of} \PYG{n}{W2H}\PYG{o}{\PYGZhy{}}\PYG{n}{DIR}
\PYG{o}{/}\PYG{o}{/}
\PYG{n}{var} \PYG{n}{w2hparm} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{p}{\PYGZcb{}}\PYG{p}{;}      \PYG{o}{/}\PYG{o}{/} \PYG{n}{empty} \PYG{n}{objet}\PYG{p}{:} \PYG{n}{no} \PYG{n}{overrides}
\PYG{o}{/}\PYG{o}{/}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{sample} \PYG{n}{values}\PYG{p}{:}
\PYG{o}{/}\PYG{o}{/}  \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{font}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Droid Sans Mono}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
\PYG{o}{/}\PYG{o}{/}  \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ctrl}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ENTER}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
\PYG{o}{/}\PYG{o}{/}  \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ctrl}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Newline}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
\PYG{o}{/}\PYG{o}{/}  \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{enter}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Newline}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
\PYG{o}{/}\PYG{o}{/}  \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{enter}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ENTER}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{sample}\PYG{p}{:}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{var} \PYG{n}{w2hparm} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ctrl}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{no}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{enter}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ENTER}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{;}
\PYG{o}{/}\PYG{o}{/}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{w2hparm} \PYG{n}{parameters} \PYG{n}{to} \PYG{n}{hide} \PYG{p}{(}\PYG{n}{e}\PYG{o}{.}\PYG{n}{g} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{home}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o+ow}{and} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{shiftins}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{Remove} \PYG{n}{the} \PYG{o}{/}\PYG{o}{/} \PYG{o+ow}{and} \PYG{n}{update} \PYG{n}{the} \PYG{n}{items}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{var} \PYG{n}{w2hparmHide} \PYG{o}{=} \PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{home}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{shiftins}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{;}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{w2hparm.js: Dummy file as delivered for VIRTEL Web Access}

\sphinxAtStartPar
w2hparm values values may be changed or added by creating a new w2hparm.js file.

\sphinxAtStartPar
For example, installations who wish to map the 3270 ATTN key to the Esc (Escape) key for use with Multisession applications such as NVAS (IBM® NetView™ Access Services) can add the following instruction to the w2hparm.js file:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{escape}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ATTN}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
Modifications to the global settings are only effective after the expiry of the w2hparm.js file in the browser’s cache which occurs at midnight each day. A user can force the use of the updated global settings file by clearing the browser cache, deleting any cookies associated with the VIRTEL server, and refreshing the 3270 page using the Ctrl\sphinxhyphen{}R key.
\end{sphinxadmonition}

\sphinxAtStartPar
After modifying the w2hparm.js file, it must be uploaded to VIRTEL’s CLI\sphinxhyphen{}DIR directory by means of the “Upload” link on the VIRTEL Web Access menu (URL \sphinxurl{http://10.20.170.71:41001}). Then you must check the Entry Point (usually CLIWHOST) and check that the transaction whose “External name” is w2h and whose “Check URL Prefix” field is set to /w2h/w2hparm\sphinxhyphen{}js specifies CLI\sphinxhyphen{}DIR in the “Application” field. For the CLIWHOST entry point this is transaction CLI\sphinxhyphen{}03P. If you want your customized changes to be applicable to transactions under Entry Point WEB2HOST then change the W2H\sphinxhyphen{}03P transaction so that the application field points to “CLI\sphinxhyphen{}DIR” and not “W2H\sphinxhyphen{}DIR”.

\index{global\sphinxhyphen{}settings property@\spxentry{global\sphinxhyphen{}settings property}!Web Customization@\spxentry{Web Customization}}\index{Web Customization@\spxentry{Web Customization}!global\sphinxhyphen{}settings property@\spxentry{global\sphinxhyphen{}settings property}}\ignorespaces 
\sphinxAtStartPar
As of Virtel V4.56 an enhanced customization feature is available which provides customization at a global and transaction level for Javascript, CSS and other web elements. To use this feature the w2hparm.js should include the “global\sphinxhyphen{}settings” attribute. The following is an example:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{global\PYGZhy{}settings}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pathToJsCustom}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{../option/custJS.global.js}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pathToCssCustom}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{../option/custCSS.global.css}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pathToFavicon}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{../option/cust\PYGZhy{}favicon.ico}\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pathToHelp}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{../option/myHelp.html}\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The following supported global properties are:\sphinxhyphen{}
\begin{description}
\sphinxlineitem{::}
\sphinxAtStartPar
“pathToFavicon”   \sphinxhyphen{} Customized Favicon image file
“pathToJsCustom”  \sphinxhyphen{} Customized JavaSCript elements
“pathToW2hparm”   \sphinxhyphen{} Customized w2hparm parameters
“pathToCssCustom” \sphinxhyphen{} Customized CSS stylesheets
“pathToPrintCss”  \sphinxhyphen{} Customized Print CSS Style sheets
“pathToHelp”      \sphinxhyphen{} Customized Help pages

\end{description}

\sphinxAtStartPar
Adding the global\sphinxhyphen{}settings property to the “VWA settings” file w2hparms.js provides the pointers to the customized components located within the “option” directory as identified by the /option/ pathname. In the sample above customized CSS, Javascript and Help element pointers are defined. For further details see {\hyperref[\detokenize{User_Guide:v462ug-customizing-with-option}]{\sphinxcrossref{\DUrole{std,std-ref}{“Customisation Modes”}}}}.

\begin{sphinxadmonition}{danger}{Danger:}
\sphinxAtStartPar
Updating w2hparm.js in the default W2H\sphinxhyphen{}DIR directory is not recommended as changes will be overwritten by maintenance or future Virtel release updates. Keep customized elements such as w2hparm.js in the CLI\sphinxhyphen{}DIR directory.
\end{sphinxadmonition}

\index{w2hparm.js defaults@\spxentry{w2hparm.js defaults}!Web Customization@\spxentry{Web Customization}}\index{Web Customization@\spxentry{Web Customization}!w2hparm.js defaults@\spxentry{w2hparm.js defaults}}\ignorespaces 
\sphinxAtStartPar
The list of keywords and possible values which can be coded in the w2hparm.js file is listed in {\hyperref[\detokenize{User_Guide:v462ug-w2hparm-defaults}]{\sphinxcrossref{\DUrole{std,std-ref}{“Appendix A \sphinxhyphen{} w2hparm values”}}}}.

\index{Settings modes@\spxentry{Settings modes}!Web Customization@\spxentry{Web Customization}}\index{Web Customization@\spxentry{Web Customization}!Settings modes@\spxentry{Settings modes}}\ignorespaces 

\subsubsection{Choosing Web Access settings mode}
\label{\detokenize{User_Guide:choosing-web-access-settings-mode}}\label{\detokenize{User_Guide:index-133}}
\sphinxAtStartPar
As of Virtel Release V4.62 only the “Version 2” user interface settings are supported, as described at the beginning of this section. In previous versions of Virtel the w2hparm property “settingsGUI” was used to select either “V1” or “V2” presentation interfaces. The “V1” user interface has now been deprecated and is no longer supported.

\index{Hiding settings@\spxentry{Hiding settings}!Web Customization@\spxentry{Web Customization}}\index{Web Customization@\spxentry{Web Customization}!Hiding settings@\spxentry{Hiding settings}}\index{w2hparmHide setting@\spxentry{w2hparmHide setting}!Web Customization@\spxentry{Web Customization}}\index{Web Customization@\spxentry{Web Customization}!w2hparmHide setting@\spxentry{w2hparmHide setting}}\ignorespaces 

\subsubsection{Hiding Web Access settings}
\label{\detokenize{User_Guide:hiding-web-access-settings}}\label{\detokenize{User_Guide:index-134}}
\sphinxAtStartPar
To prevent the user from overriding the site defaults, the administrator can remove individual settings from the user’s Web Access Settings menu. The names of settings to be hidden are specified in the w2hparmHide variable in the w2hparm.js file. The example below shows how to hide the default font, font size, and style settings from the menu:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{/} \PYG{n}{w2hparmHide} \PYG{n}{values}
\PYG{n}{var} \PYG{n}{w2hparmHide} \PYG{o}{=} \PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{font}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{fontsize}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{style}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{;}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{w2hparm.js: Hiding VIRTEL Web Access settings}

\newpage

\index{Application Selection Menu@\spxentry{Application Selection Menu}}\ignorespaces 

\section{Application Selection Menu}
\label{\detokenize{User_Guide:application-selection-menu}}\label{\detokenize{User_Guide:index-135}}
\sphinxAtStartPar
The VIRTEL application selection menu is dynamically generated by the appmenu.htm page in conjunction with the applist transaction. For example, the following URL displays the application selection menu for the CLIWHOST entry point (line C\sphinxhyphen{}HTTP port 41002):

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{l+m+mf}{10.20}\PYG{l+m+mf}{.170}\PYG{l+m+mf}{.71}\PYG{p}{:}\PYG{l+m+mi}{41002}\PYG{o}{/}\PYG{n}{w2h}\PYG{o}{/}\PYG{n}{appmenu}\PYG{o}{.}\PYG{n}{htm}\PYG{o}{+}\PYG{n}{applist}
\end{sphinxVerbatim}

\sphinxAtStartPar
The application selection menu for the WEB2HOST entry point (line W\sphinxhyphen{}HTTP port 41001) is accessible from the “Other applications” link on the VIRTEL Web Access main menu.


\subsection{Contents of menu}
\label{\detokenize{User_Guide:contents-of-menu}}
\sphinxAtStartPar
An example of the application selection menu is shown in the figure below:

\sphinxAtStartPar
\sphinxincludegraphics{{image27}.png} \sphinxstyleemphasis{Application selection menu}

\sphinxAtStartPar
The application selection menu contains clickable links to the transactions defined under the entry point. A transaction will appear in the menu if all of the following conditions are met:
\sphinxhyphen{} The “Application type” is 1 (VTAM) or 2 (VIRTEL)
\sphinxhyphen{} The “How started” field is 1 (menu)
\sphinxhyphen{} The user is logged on and authorized via the security subsystem to the security resource whose name is the internal name of the transaction (except when the transaction “Security” field is 0)

\sphinxAtStartPar
If the user is not logged on, then only public transactions (security type 0) are displayed.

\sphinxAtStartPar
If the APPSTAT=YES parameter is specified in the VIRTCT (see “Parameters of the VIRTCT” in the VIRTEL Installation
Guide) then the status of VTAM applications is indicated by a green bar for active applications, and by a red bar for
inactive applications.

\sphinxAtStartPar
To add an application to the menu, use the VIRTEL administration panels to define a transaction under the entry point,
press F1 to update the entry point, then refresh the appmenu.htm page in the browser.

\phantomsection\label{\detokenize{User_Guide:v462ug-presentation-modes}}
\index{Presentaion Modes@\spxentry{Presentaion Modes}!Application Selection Menu@\spxentry{Application Selection Menu}}\index{Application Selection Menu@\spxentry{Application Selection Menu}!Presentaion Modes@\spxentry{Presentaion Modes}}\ignorespaces 

\subsection{Presentation modes}
\label{\detokenize{User_Guide:presentation-modes}}\label{\detokenize{User_Guide:index-136}}
\sphinxAtStartPar
The application selection menu offers a choice of several different presentation modes, selectable by clicking one of the buttons at the top right of the screen. The selected presentation mode determines which page template will be used to access the selected host applications.
\begin{description}
\sphinxlineitem{Auto}
\sphinxAtStartPar
This presentation mode is similar to the 3270 presentation mode, but it uses a static main page (WEB2AJAX.htm) together with an Ajax\sphinxhyphen{}loaded sub\sphinxhyphen{}page (WEB2SUB.html). This can reduce network load and provide faster response time with a better 3270 user experience. Ajax mode also offers password encryption as an option (see {\hyperref[\detokenize{User_Guide:v462ug-password-encryption}]{\sphinxcrossref{\DUrole{std,std-ref}{“Password encryption”}}}}).

\sphinxlineitem{Classic}
\sphinxAtStartPar
This presentation mode, which uses the WEB2VIRT.htm page template, is intended as a first step towards VIRTEL Web Modernisation. In this mode the 3270 screen image is displayed as an HTML form, to which presentation enhancements such as drop\sphinxhyphen{}down lists, checkboxes, and calendars can be added by means of VIRTEL Web Modernisation scenarios (see {\hyperref[\detokenize{User_Guide:v462ug-virtel-scenarios}]{\sphinxcrossref{\DUrole{std,std-ref}{“Web Modernisation VIRTEL Scenarios”}}}}).

\sphinxlineitem{Tablet}
\sphinxAtStartPar
This presentation mode it uses the SMARTWEB2VIRT.htm page template for an HTML presentation adapted for tablets and smartphones.

\end{description}

\index{Applist transaction@\spxentry{Applist transaction}!Application Selection Menu@\spxentry{Application Selection Menu}}\index{Application Selection Menu@\spxentry{Application Selection Menu}!Applist transaction@\spxentry{Applist transaction}}\index{Appmenu template@\spxentry{Appmenu template}!Application Selection Menu@\spxentry{Application Selection Menu}}\index{Application Selection Menu@\spxentry{Application Selection Menu}!Appmenu template@\spxentry{Appmenu template}}\ignorespaces 

\subsubsection{The appmenu.htm template}
\label{\detokenize{User_Guide:the-appmenu-htm-template}}\label{\detokenize{User_Guide:index-137}}
\sphinxAtStartPar
The appmenu.htm page for the VIRTEL application selection menu is delivered in the W2H\sphinxhyphen{}DIR directory. The page may be customized if required to meet installation standards. The appmenutable and appmenuitem styles in the STYLBLUE.css stylesheet allow the appearance of the menu to be customized. The source code for the page and the stylesheet may be obtained from the sources.zip file accessible from the VIRTEL Web Access menu. After modifying the page or the stylesheet, follow the “Upload” link on the VIRTEL Web Access menu to upload the updated files to the W2H\sphinxhyphen{}DIR directory.


\subsubsection{Definition of the applist transaction}
\label{\detokenize{User_Guide:definition-of-the-applist-transaction}}
\sphinxAtStartPar
A transaction with external name applist must be present in the list of transactions at the entry point associated with
the line. VIRTEL supplies as standard transactions W2H\sphinxhyphen{}90 (for entry point WEB2HOST, line W\sphinxhyphen{}HTTP port 41001) and
CLI\sphinxhyphen{}90 (for entry point CLIWHOST, line C\sphinxhyphen{}HTTP port 41002). The applist transaction must specify application name
VIR0021S and application type 2. Security type 1 requires the user to sign on so that the transaction can determine
which applications the user is authorized to. The user must also be authorized to the applist transaction itself by its
internal name (W2H\sphinxhyphen{}90 or CLI\sphinxhyphen{}90).

\sphinxAtStartPar
The figure below shows the definition of the applist transaction CLI\sphinxhyphen{}90:

\sphinxAtStartPar
\sphinxincludegraphics{{image81}.png}
Definition of applist transaction


\subsubsection{Application menu as the default transaction for the entry point}
\label{\detokenize{User_Guide:application-menu-as-the-default-transaction-for-the-entry-point}}
\sphinxAtStartPar
When the appmenu.htm+applist URL is coded in the “TIOA at logon” field of the default transaction for the entry
point, the application selection menu will be displayed whenever the user accesses the HTTP line using its root URL
(for example, \sphinxurl{http://10.20.170.71:41002} for line C\sphinxhyphen{}HTTP).

\sphinxAtStartPar
The default transaction is the transaction whose external name is the same as the entry point name, and the example
below shows the default transaction for the CLIWHOST entry point:

\sphinxAtStartPar
\sphinxincludegraphics{{image82}.png}
Specifying the application selection menu in the default transaction

\newpage

\index{Printing with Web Access@\spxentry{Printing with Web Access}}\ignorespaces 

\section{Printing With Web Access}
\label{\detokenize{User_Guide:printing-with-web-access}}\label{\detokenize{User_Guide:v462ug-printing-web-access}}\label{\detokenize{User_Guide:index-138}}
\sphinxAtStartPar
VIRTEL provides printing support by means of virtual 3287 type printers. Each user connected to VIRTEL Web Access
has a virtual 3287 printer associated with the user’s 3270 display terminal. The name of the virtual printer is displayed
in the status bar at the bottom of the Web Access window. Data sent to the virtual printer from a host application (for
example, CICS, QMF, or VPS) is captured by VIRTEL and is saved in virtual storage.

\sphinxAtStartPar
\sphinxincludegraphics{{image28}.png} \sphinxstyleemphasis{A printer icon appears in the Web Access toolbar to notify the user that print data is available}

\sphinxAtStartPar
When the user clicks on this icon, VIRTEL sends the print data to the user’s browser, either as an attached file or in a
pop\sphinxhyphen{}up window.

\index{SCS printers LU1@\spxentry{SCS printers LU1}!Printing@\spxentry{Printing}}\index{Printing@\spxentry{Printing}!SCS printers LU1@\spxentry{SCS printers LU1}}\index{3270 data stream printers LU3@\spxentry{3270 data stream printers LU3}!Printing@\spxentry{Printing}}\index{Printing@\spxentry{Printing}!3270 data stream printers LU3@\spxentry{3270 data stream printers LU3}}\ignorespaces 
\sphinxAtStartPar
Two types of virtual printer are supported:
\begin{itemize}
\item {} 
\sphinxAtStartPar
LUTYPE1 (SCS): VIRTEL sends the print data to the browser as an attached file.

\item {} 
\sphinxAtStartPar
LUTYPE3 (3270 data stream): VIRTEL converts the print data to HTML and the browser displays it in a pop\sphinxhyphen{}up window.

\end{itemize}


\subsection{VIRTEL definitions for virtual printers}
\label{\detokenize{User_Guide:virtel-definitions-for-virtual-printers}}
\sphinxAtStartPar
In the VIRTEL configuration file, LUTYPE1 virtual printers are defined with the “Terminal type” field set to 1 or S. The
“Relay” field contains the VTAM LU name known to the host application. The figure below shows an example definition
of 80 LUTYPE1 virtual printers with LU names REHIM000 to REHIM079:

\sphinxAtStartPar
\sphinxincludegraphics[width=15.0cm,height=9.0cm]{{image83}.png}

\sphinxAtStartPar
\sphinxstyleemphasis{VIRTEL definition of LUTYPE1 virtual printers}

\sphinxAtStartPar
Similarly, LUTYPE3 virtual printers are defined with the “Terminal type” field set to 2 or P. The figure below shows an
example definition of 80 LUTYPE3 virtual printers with LU names REHIP000 to REHIP079:

\sphinxAtStartPar
\sphinxincludegraphics[width=15.0cm,height=9.0cm]{{image84}.png}

\sphinxAtStartPar
\sphinxstyleemphasis{VIRTEL definition of LUTYPE3 virtual printers}


\subsection{Associating virtual printers with terminals}
\label{\detokenize{User_Guide:associating-virtual-printers-with-terminals}}
\sphinxAtStartPar
To associate virtual printers with the corresponding terminal LU names, define the printer LU name in the “2nd relay”
field of the terminal pool definition. In the example below, Web Access terminals with LU names REHVT000\sphinxhyphen{}079 are
associated with virtual printer LU names REHIM000\sphinxhyphen{}079 (LUTYPE3). There is a one\sphinxhyphen{}for\sphinxhyphen{}one correspondence between
the display terminal’s LU name and the printer LU name.

\sphinxAtStartPar
\sphinxincludegraphics[width=15.0cm,height=9.0cm]{{image85}.png}

\sphinxAtStartPar
\sphinxstyleemphasis{VIRTEL terminal definitions for virtual printers}

\index{Autoconnect@\spxentry{Autoconnect}!Printing@\spxentry{Printing}}\index{Printing@\spxentry{Printing}!Autoconnect@\spxentry{Autoconnect}}\ignorespaces 

\subsection{Autoconnect for virtual printers}
\label{\detokenize{User_Guide:autoconnect-for-virtual-printers}}\label{\detokenize{User_Guide:index-140}}
\sphinxAtStartPar
Virtual printer LUs are activated by VIRTEL at start\sphinxhyphen{}up time, and will remain in ACTIV state until they are acquired by the
application. For virtual printers defined with terminal type 1 or 2, the application must initiate the acquire (for
example, by CEMT SET TERM(xxxx) ACQ in CICS).
Virtual printers defined with terminal type P or S may be automatically connected to a controlling host application
when a user starts a Web Access session using the associated terminal LU. The “Entry Point” field of the virtual printer
definition should contain the name of an entry point which specifies VIR0021B as its menu program. The entry point
must have one transaction whose “Application” field contains the name of the host application to which the printer is
to be connected.
The example below shows an entry point definition for connecting printers to CICS:

\sphinxAtStartPar
\sphinxincludegraphics{{image86}.png}
Entry point definition for virtual printer autoconnect

\sphinxAtStartPar
\sphinxincludegraphics{{image87}.png}
Transaction definition for virtual printer autoconnect

\index{VTAM definitions@\spxentry{VTAM definitions}!Printing@\spxentry{Printing}}\index{Printing@\spxentry{Printing}!VTAM definitions@\spxentry{VTAM definitions}}\index{CICS definitions@\spxentry{CICS definitions}!Printing@\spxentry{Printing}}\index{Printing@\spxentry{Printing}!CICS definitions@\spxentry{CICS definitions}}\ignorespaces 

\subsection{VTAM definitions for virtual printers}
\label{\detokenize{User_Guide:vtam-definitions-for-virtual-printers}}\label{\detokenize{User_Guide:index-141}}
\sphinxAtStartPar
Virtual printer LUs must be defined to VTAM with an appropriate LOGMODE (normally SCS for LUTYPE1, or DSILGMOD
for LUTYPE3). The necessary APPL statements may be coded in the VIRTAPPL member of the VTAMLST library, as
shown in the example below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
REHIM??? APPL AUTH=(ACQ,PASS),MODETAB=ISTINCLM,DLOGMOD=SCS,EAS=1
REHIP??? APPL AUTH=(ACQ,PASS),MODETAB=ISTINCLM,DLOGMOD=DSILGMOD,EAS=1
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{VTAM definitions for virtual printers}


\subsection{CICS definitions for virtual printers}
\label{\detokenize{User_Guide:cics-definitions-for-virtual-printers}}
\sphinxAtStartPar
If the virtual printer is defined to CICS via RDO, use an appropriate TYPETERM as shown in the table below:


\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TTT}
\sphinxtoprule
\sphinxstyletheadfamily 
\sphinxAtStartPar
VIRTEL Terminal Type
&\sphinxstyletheadfamily 
\sphinxAtStartPar
CICS TYPETERM
&\sphinxstyletheadfamily 
\sphinxAtStartPar
CICS DEVICE type
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook
\sphinxAtStartPar
1 or S
&
\sphinxAtStartPar
DFHSCSP
&
\sphinxAtStartPar
SCSPRINT
\\
\sphinxhline
\sphinxAtStartPar
2 or P
&
\sphinxAtStartPar
DFHLU3 or
DFH3270P
&
\sphinxAtStartPar
LUTYPE3 or
3270P
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}

\sphinxAtStartPar
\sphinxstyleemphasis{CICS TYPETERM definitions for virtual printers}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
From version 4.50 onwards, VIRTEL supports the QUERY parameter for SCS printers as well as for LUTYPE3 printers.
\end{sphinxadmonition}

\index{Scenarios for SCS printing@\spxentry{Scenarios for SCS printing}!Printing@\spxentry{Printing}}\index{Printing@\spxentry{Printing}!Scenarios for SCS printing@\spxentry{Scenarios for SCS printing}}\ignorespaces 

\subsection{Scenarios for SCS printing}
\label{\detokenize{User_Guide:scenarios-for-scs-printing}}\label{\detokenize{User_Guide:index-142}}
\sphinxAtStartPar
When virtual printers are defined with terminal type 1 or S, all VIRTEL transactions defined under an entry point which
offers printing must indicate the name of an “Input Scenario”. The scenario processes the HTTP request containing a
PF=SCENARIO\sphinxhyphen{}PRINT parameter which is issued when the user presses the “Get print data” icon (below) on the VIRTEL
Web Access toolbar.

\sphinxAtStartPar
\sphinxincludegraphics{{image28}.png}

\sphinxAtStartPar
The scenario accesses the SCS print data which is accumulated in a VIRTEL variable called \$PRINT\$, and instructs
VIRTEL to send the print data to the browser as an attached file.
Several suitable scenarios are delivered as standard in the VIRTEL SAMPLIB and LOADLIB:
\begin{description}
\sphinxlineitem{SCENFPDF}
\sphinxAtStartPar
converts an SCS data stream into a PDF document

\sphinxlineitem{SCENFPCL}
\sphinxAtStartPar
downloads PCL data into a raw printer file

\sphinxlineitem{SCENPPDF}
\sphinxAtStartPar
converts PCL data into a PDF document (requires additional VIRTEL PCL2PDF feature running on a Windows server)

\end{description}

\index{MakePDF@\spxentry{MakePDF}!Printing@\spxentry{Printing}}\index{Printing@\spxentry{Printing}!MakePDF@\spxentry{MakePDF}}\index{SCS to PDF conversion@\spxentry{SCS to PDF conversion}!Printing@\spxentry{Printing}}\index{Printing@\spxentry{Printing}!SCS to PDF conversion@\spxentry{SCS to PDF conversion}}\index{PCL to PDF conversion@\spxentry{PCL to PDF conversion}!Printing@\spxentry{Printing}}\index{Printing@\spxentry{Printing}!PCL to PDF conversion@\spxentry{PCL to PDF conversion}}\ignorespaces 

\subsection{SCS to PDF conversion}
\label{\detokenize{User_Guide:scs-to-pdf-conversion}}\label{\detokenize{User_Guide:index-143}}
\sphinxAtStartPar
When the SCENFPDF input scenario is specified in the VIRTEL transaction definition, the SCS data produced by the
application is passed to VIRTEL’s MAKEPDF component, and the resulting PDF file is sent to the browser. The browser
normally displays a dialog giving the user the choice of opening or saving the PDF file.


\subsection{PCL printing}
\label{\detokenize{User_Guide:pcl-printing}}
\sphinxAtStartPar
Certain applications such as VPS are capable of sending print data in PCL (HP Printer Command Language) format to
SNA printers. The PCL commands and data are sent as SCS transparent data on sessions with LUTYPE1 logical units.
The transparent data (contained in blocks of up to 253 ASCII characters preceded by a X’35’ SCS command) is extracted
from the SCS data stream and is copied into the VIRTEL variable \$PRINT\$.
PCL data may also be delivered in EBCDIC as part of the normal SCS data stream, and this data will be converted to
ASCII using the codepage defined by the COUNTRY parameter in the VIRTCT (see “Parameters of the VIRTCT” in the
VIRTEL Installation Guide).

\sphinxAtStartPar
The SCENFPCL scenario delivered as standard in the VIRTEL SAMPLIB and LOADLIB allows PCL data to be downloaded
to the user’s workstation as an attached file. The user may either save the file, or open it using an appropriate program
(such as PCL Reader from Page Technology Marketing, Inc.) to display and optionally print the PCL data.


\subsection{PCL to PDF conversion}
\label{\detokenize{User_Guide:pcl-to-pdf-conversion}}
\sphinxAtStartPar
For customers who have licensed the optional PCL2PDF feature of VIRTEL, PCL output from host applications can be
delivered to the workstation as PDF documents.

\sphinxAtStartPar
The SCENPPDF scenario captures PCL data and sends it to an external server for conversion. The external server is a
Windows Server 2008R2 platform running the Syspertec PCL2PDF application. The VIRTEL configuration must include a
line with external name PCL2PDF which defines the IP address of the Windows server, as shown in the example below:

\sphinxAtStartPar
\sphinxincludegraphics{{image88}.png}
VIRTEL line definition for PCL2PDF server

\sphinxAtStartPar
A batch job, supplied as member PCL2PDF of the VIRTEL SAMPLIB, allows the definition of the PCL2PDF line to be
added to the VIRTEL configuration.

\newpage

\index{TSO File Transfer@\spxentry{TSO File Transfer}}\ignorespaces 

\section{TSO File Transfer}
\label{\detokenize{User_Guide:tso-file-transfer}}\label{\detokenize{User_Guide:v462ug-tso-file-transfer}}\label{\detokenize{User_Guide:index-144}}
\sphinxAtStartPar
VIRTEL Web Access supports transfer of files between the browser and a TSO session using the IND\$FILE protocol.


\subsection{Definitions required for file transfer}
\label{\detokenize{User_Guide:definitions-required-for-file-transfer}}
\sphinxAtStartPar
To activate the file transfer function you must access TSO via a VIRTEL transaction which specifies SCENINDT in both
the “Input scenario” and the “Output scenario” fields of the transaction definition. The figure below shows the sample
TSO transaction W2H\sphinxhyphen{}13 supplied with VIRTEL:

\sphinxAtStartPar
\sphinxincludegraphics{{image89}.png} \sphinxstyleemphasis{TSO transaction definition for file transfer}

\sphinxAtStartPar
The source code of the SCENINDT scenario is supplied in the VIRTEL SAMPLIB.
To activate the file transfer function when a user\sphinxhyphen{}written scenario is specified in the transaction definition, the
INDSCEN\$ macro instruction must be added to both the input and output sections of the scenario.


\subsection{Toolbar icons for file transfer}
\label{\detokenize{User_Guide:toolbar-icons-for-file-transfer}}
\sphinxAtStartPar
When file transfer is activated, two new icons (receive file) and (send file) appear on the VIRTEL Web Access toolbar:
VIRTEL Web Access toolbar for TSO file transfer:\sphinxhyphen{}

\sphinxAtStartPar
\sphinxincludegraphics{{image90}.png}
\sphinxstyleemphasis{VIRTEL Web Access toolbar for TSO file transfer}


\subsection{Receiving a file}
\label{\detokenize{User_Guide:receiving-a-file}}
\sphinxAtStartPar
To transfer a file from TSO to your workstation, go to ISPF option 6 (or TSO READY) and click the “Receive” icon on the
toolbar. The “Receive File” dialog will open:

\sphinxAtStartPar
\sphinxincludegraphics{{image30}.jpeg}
VIRTEL IND\$FILE receive dialog (part 1)

\sphinxAtStartPar
Specify the TSO dataset name, surrounded by quotes if necessary. Dataset names without quotes will be prefixed by
your TSO prefix (usually your userid). Click either “Text” or “Binary”. “Text” translates the file from EBCDIC to ASCII and
inserts carriage return line feed sequences (x’0D0A’) at the end of each record. “Binary” performs no translation.
Finally click “Receive” to start the transfer.
When the file transfer is complete, the browser’s “Download” dialog appears:

\sphinxAtStartPar
\sphinxincludegraphics{{image31}.jpeg}
VIRTEL IND\$FILE receive dialog (part 2)

\sphinxAtStartPar
Click “Save”. The “Save As” dialog will open to allow you to specify the name and location of the destination file on
your workstation:

\sphinxAtStartPar
\sphinxincludegraphics{{image32}.jpeg}
VIRTEL IND\$FILE receive dialog (part 3)

\sphinxAtStartPar
Now select the destination file and click “Save”. If the file already exists you will be prompted for permission to
overwrite it. The “Download Complete” dialog appears when the file has been saved:

\sphinxAtStartPar
\sphinxincludegraphics{{image33}.jpeg}
VIRTEL IND\$FILE receive dialog (part 4)


\subsection{Sending a file}
\label{\detokenize{User_Guide:sending-a-file}}
\sphinxAtStartPar
To transfer a file from your workstation to TSO, go to ISPF option 6 (or TSO READY) and click the “Send” icon on the
toolbar. The “Send File” dialog will open:

\sphinxAtStartPar
\sphinxincludegraphics{{image34}.jpeg}
VIRTEL IND\$FILE send dialog (part 1)

\sphinxAtStartPar
Click the “Browse…” button and the “Choose File to Upload” dialog will appear:

\sphinxAtStartPar
\sphinxincludegraphics{{image35}.jpeg}
VIRTEL IND\$FILE send dialog (part 2)

\sphinxAtStartPar
Choose the file you want to upload, and click “Open” to return to the “Send File” dialog:

\sphinxAtStartPar
\sphinxincludegraphics{{image36}.jpeg}

\sphinxAtStartPar
VIRTEL IND\$FILE send dialog (part 3)

\sphinxAtStartPar
Specify the TSO dataset name, surrounded by quotes if necessary. Dataset names without quotes will be prefixed by
your TSO prefix (usually your userid).

\sphinxAtStartPar
If the TSO dataset does not yet exist, you may optionally specify space (units, primary quantity, and secondary
quantity), and DCB attributes (record format, logical record length, and block size). If you do not specify these
attributes, the TSO IND\$FILE will use its default values.

\sphinxAtStartPar
Check the “Append” checkbox to append the file to the end of an existing TSO file. The “New” checkbox indicates that
the TSO file must not already exist.

\sphinxAtStartPar
Click either “Text” or “Binary”. “Text” translates the file from ASCII to EBCDIC and treats carriage return line feed
sequences (x’0D0A’) as end of each record markers. “Binary” performs no translation. Finally click “Send” to start the
transfer.

\sphinxAtStartPar
\sphinxincludegraphics{{image37}.jpeg}

\sphinxAtStartPar
VIRTEL IND\$FILE send dialog (part 4)

\sphinxAtStartPar
The message “File transfer complete” is displayed upon successful completion of the upload.


\subsection{Selecting PC Codepage for file transfer}
\label{\detokenize{User_Guide:selecting-pc-codepage-for-file-transfer}}
\sphinxAtStartPar
Users can select a PC Codepage for file transfer. Possible values are :
\begin{description}
\sphinxlineitem{Windows (CP\sphinxhyphen{}1252)}
\sphinxAtStartPar
When selected, causes the file being translated by VIRTEL according to the CP\sphinxhyphen{}1252 ASCII\sphinxhyphen{}EBCDIC translation table.

\sphinxlineitem{MS\sphinxhyphen{}DOS (CP\sphinxhyphen{}850)}
\sphinxAtStartPar
When selected, causes the file being translated by VIRTEL according to the CP\sphinxhyphen{}850 ASCII\sphinxhyphen{}EBCDIC translation table.

\end{description}

\sphinxAtStartPar
The selected CP\sphinxhyphen{}850 table depends on the value of the COUNTRY parameter specified in the VIRTCT. If this value is
“FR”, “DE” or “BE”, system will use corresponding table FR\sphinxhyphen{}850, DE\sphinxhyphen{}850 or BE\sphinxhyphen{}850. If the specified country value is
different, by default the BE\sphinxhyphen{}850 table will be used to support CECP 500 international EBCDIC.


\subsection{Saving and reusing file transfer parameters}
\label{\detokenize{User_Guide:saving-and-reusing-file-transfer-parameters}}
\sphinxAtStartPar
Users who frequently carry out the same or similar file transfers can save the file transfer parameters for later reuse.
To save a file transfer, enter the dataset name and the type of transfer, then click the “Save” button:

\sphinxAtStartPar
\sphinxincludegraphics{{image38}.png}
VIRTEL IND\$FILE Receive dialog (saved transfers)

\sphinxAtStartPar
The user can then choose a name for the saved transfer, and click “OK” to save the parameters. At the next transfer,
the user clicks the name of the saved transfer to retrieve the parameters, then clicks “Receive” to start the transfer.

\sphinxAtStartPar
\sphinxincludegraphics{{image39}.png}
VIRTEL IND\$FILE Saving the file transfer parameters

\sphinxAtStartPar
Users can save transfer parameters for both “Send” and “Receive”. The parameters are saved in browser local storage.
The number of sets of parameters which can be saved is limited only by the amount of local storage available.

\newpage

\index{Accessing VTAM Applications@\spxentry{Accessing VTAM Applications}}\ignorespaces 

\section{Accessing VTAM Applications}
\label{\detokenize{User_Guide:accessing-vtam-applications}}\label{\detokenize{User_Guide:v462ug-accessing-vtam-applications}}\label{\detokenize{User_Guide:index-145}}
\sphinxAtStartPar
Normally the VIRTEL administrator provides access to VTAM applications by configuring a specific VIRTEL transaction
for each application. However some users require the ability to access any VTAM application, including those not
configured by the administrator, similar to the function provided by VTAM’s USSTAB USS10 screen. For these users,
VIRTEL provides transactions named W2H\sphinxhyphen{}16 and CLI\sphinxhyphen{}16 whose external name is VTAM.
This transaction displays a screen on which the user can enter the ACBNAME of the VTAM application, together with
optional LOGON DATA and LOGMODE.


\subsection{VTAM logon screen}
\label{\detokenize{User_Guide:vtam-logon-screen}}
\sphinxAtStartPar
To access VIRTEL’s VTAM logon screen, click on “Other applications” on the VIRTEL Web Access menu (port 41001) or
enter its URL directly:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{l+m+mf}{10.20}\PYG{l+m+mf}{.170}\PYG{l+m+mf}{.71}\PYG{p}{:}\PYG{l+m+mi}{41001}\PYG{o}{/}\PYG{n}{w2h}\PYG{o}{/}\PYG{n}{WEB2AJAX}\PYG{o}{.}\PYG{n}{htm}\PYG{o}{+}\PYG{n}{VTAM}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxincludegraphics{{image91}.png}
\sphinxstyleemphasis{VTAM logon screen in VIRTEL Web Access mode}

\sphinxAtStartPar
To access, for example, TSO with logmode SNX32705, type TSO in the “LOGON APPLID” field and SNX32705 in the
“LOGMODE” field, then press enter.

\sphinxAtStartPar
You can exit this screen by pressing F3.

\sphinxAtStartPar
Lines 3 and 4 of the screen indicate the name of your installation and are taken from the TITRE1 and TITRE2
parameters of the VIRTCT (see VIRTEL Installation Guide).

\sphinxAtStartPar
The layout of the VTAM logon screen can be customized by assembling the map in member EIRM00U in the VIRTEL
SAMPLIB.


\subsection{Installing the VTAM logon transaction}
\label{\detokenize{User_Guide:installing-the-vtam-logon-transaction}}
\sphinxAtStartPar
To permit access to the VTAM logon screen, the administrator defines a VIRTEL transaction which calls VIRTEL program
VIR0021U, as shown in the example below. The transaction should have “Security” set to 1 to force the user to sign on
before the screen is displayed.

\sphinxAtStartPar
The VTAM logon screen is protected by a security resource named prefix.W2H\sphinxhyphen{}16 or prefix.CLI\sphinxhyphen{}16 (where prefix is the
value of the PRFSECU parameter in the VIRTCT) in the RACF FACILITY class. Provided the “Security” field is set to 1, and
security is activated in the VIRTCT, only those users having READ access to the resource can obtain the VTAM logon
screen.

\sphinxAtStartPar
\sphinxincludegraphics{{image41}.png}
\sphinxstyleemphasis{Example VIRTEL transaction for VTAM logon via Web Access}

\newpage

\index{Site Customization \sphinxhyphen{} Colors and Logo@\spxentry{Site Customization \sphinxhyphen{} Colors and Logo}}\index{Colors and Logo@\spxentry{Colors and Logo}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Colors and Logo@\spxentry{Colors and Logo}}\ignorespaces 

\section{Site Customization \sphinxhyphen{} Colors And Logo}
\label{\detokenize{User_Guide:site-customization-colors-and-logo}}\label{\detokenize{User_Guide:v462ug-customization-colors-logo}}\label{\detokenize{User_Guide:index-146}}
\sphinxAtStartPar
The VIRTEL administrator can customize the color settings for all applications or for specific applications. The custom settings are defined in a style sheet which by default is called  custom.css. The file is modified by an administrator and then uploaded to a VIRTEL directory designated for storage of customer files. In “default” mode this is usually CLI\sphinxhyphen{}DIR, normally found within the HTML\sphinxhyphen{}TRSF VSAM file. In “Option mode”, however, this can be any user directory or file name. See {\hyperref[\detokenize{User_Guide:v462ug-customizing-with-option}]{\sphinxcrossref{\DUrole{std,std-ref}{“Virtel Customization modes”}}}} for more details on the customization modes.

\index{CSS@\spxentry{CSS}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!CSS@\spxentry{CSS}}\index{custom.css@\spxentry{custom.css}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!custom.css@\spxentry{custom.css}}\index{Option mode@\spxentry{Option mode}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Option mode@\spxentry{Option mode}}\ignorespaces 

\subsection{Using a CSS file for customization}
\label{\detokenize{User_Guide:using-a-css-file-for-customization}}\label{\detokenize{User_Guide:index-147}}
\sphinxAtStartPar
In “Default mode” the custom.css file is loaded from the directory designated by the transaction W2H\sphinxhyphen{}03CC (for entry point WEB2HOST on port 41001) or CLI\sphinxhyphen{}03CC (for entry point CLIWHOST on port 41002). These transactions have external name w2h and specify the path name /w2h/custom\sphinxhyphen{}css in the URL Prefix field. When VIRTEL is first installed, these transactions point to directory W2H\sphinxhyphen{}DIR for W2H\sphinxhyphen{}03CC and to directory CLI\sphinxhyphen{}DIR for CLI\sphinxhyphen{}03CC which contains a dummy version of the file custom.css. A custom.css file or a designated “Option” mode CSS file can be modified to include bespoke CSS customization. The following process looks at how to customize the delivered custom.css file, maintaining a copy in the CLI\sphinxhyphen{}DIR, and running in “Default Mode”. See {\hyperref[\detokenize{User_Guide:v462ug-customizing-with-option}]{\sphinxcrossref{\DUrole{std,std-ref}{“Virtel Customization Modes”}}}} for more details on the customization modes. All of the following examples relate to updating a customized copy of custom.css. If running in “Option mode” this file could be called /option/custCSS.myCICS1.css, applicable to a transaction only, or /option/custCSS.global.css, a global entry applicable to all Entry Points and transactions.

\begin{sphinxadmonition}{danger}{Danger:}
\sphinxAtStartPar
Updating custom.css in the default W2H\sphinxhyphen{}DIR directory is not recommended as changes will be overwritten by maintenance or future Virtel release updates. Keep customized elements such as custom.css in the CLI\sphinxhyphen{}DIR directory or in a designated “option” file.
\end{sphinxadmonition}

\sphinxAtStartPar
The procedure for activating customized settings in “Default Mode” using the 3270 Administration panels are given below. Users are advised to user “option mode” rather than remain in a customized “default mode” of operation:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Obtain a copy of the default custom.css file from the sources.zip file or download a copy from the browser:\sphinxhyphen{}

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{l+m+mf}{10.20}\PYG{l+m+mf}{.170}\PYG{l+m+mf}{.71}\PYG{p}{:}\PYG{l+m+mi}{41001}\PYG{o}{/}\PYG{n}{w2h}\PYG{o}{/}\PYG{n}{custom}\PYG{o}{.}\PYG{n}{css}
\end{sphinxVerbatim}

\sphinxAtStartPar
(where n.n.n.n is the IP address of your VIRTEL)
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{1}
\item {} 
\sphinxAtStartPar
Save the custom.css file in a directory on your workstation.

\item {} 
\sphinxAtStartPar
Open the custom.css file using a text editor such as notepad.

\item {} 
\sphinxAtStartPar
Edit the custom.css file with the color and/or logo settings you require (see examples below), then save the updated file.

\item {} 
\sphinxAtStartPar
Open the VIRTEL Web Access menu (URL \sphinxurl{http://n.n.n.n:41001}) and click the “Upload” link

\item {} 
\sphinxAtStartPar
Click “Browse” and navigate to the directory where you saved the updated custom.css. Click on the custom.css file, then click the “CLI\sphinxhyphen{}DIR” button to upload the file to VIRTEL.

\item {} 
\sphinxAtStartPar
From the VIRTEL Web Access menu (URL \sphinxurl{http://n.n.n.n:41001}) click the “Admin” link.

\item {} 
\sphinxAtStartPar
Press “F3 \sphinxhyphen{} Entry Points” then click “CLIWHOST”

\item {} 
\sphinxAtStartPar
Press “F4 \sphinxhyphen{} Transactions” then click “CLI\sphinxhyphen{}03CC”

\item {} 
\sphinxAtStartPar
Press “F12 \sphinxhyphen{} View/Add” and type CLI\sphinxhyphen{}DIR in the “Application” field, overwriting the original value W2H\sphinxhyphen{}DIR

\item {} 
\sphinxAtStartPar
Press “F1 \sphinxhyphen{} Update” at the Transaction Detail Definition screen, then “F3 \textendash{} Return” twice to return to the List of Entry Points screen, then “F1 \textendash{} Update” again to update the entry point.

\item {} 
\sphinxAtStartPar
Migrate to “option mode”. See {\hyperref[\detokenize{User_Guide:v462ug-customizing-with-option}]{\sphinxcrossref{\DUrole{std,std-ref}{“Virtel Customization Modes”}}}} for further details.

\end{enumerate}

\index{Toolbar color@\spxentry{Toolbar color}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Toolbar color@\spxentry{Toolbar color}}\ignorespaces 

\subsection{Customizing the toolbar color by application}
\label{\detokenize{User_Guide:customizing-the-toolbar-color-by-application}}\label{\detokenize{User_Guide:index-148}}
\sphinxAtStartPar
It is sometimes useful for the user to have a clear visual indication of which system he or she is logged on to. This example shows how to set the color of the toolbar to yellow for application SPCICSP and pink for application SPCICSQ.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{*} \PYG{n}{VIRTEL} \PYG{n}{Web} \PYG{n}{Access} \PYG{n}{style} \PYG{n}{sheet} \PYG{k}{for} \PYG{n}{site} \PYG{n}{customization}
\PYG{o}{*} \PYG{p}{(}\PYG{n}{c}\PYG{p}{)}\PYG{n}{Copyright} \PYG{n}{SysperTec} \PYG{n}{Communication} \PYG{l+m+mi}{2007}\PYG{p}{,}\PYG{l+m+mi}{2010} \PYG{n}{All} \PYG{n}{Rights} \PYG{n}{Reserved}
\PYG{o}{*}\PYG{o}{/}
\PYG{o}{.}\PYG{n}{SPCICSP} \PYG{c+c1}{\PYGZsh{}toolbar \PYGZob{}background\PYGZhy{}color:yellow;\PYGZcb{}}
\PYG{o}{.}\PYG{n}{SPCICSQ} \PYG{c+c1}{\PYGZsh{}toolbar \PYGZob{}background\PYGZhy{}color:pink;\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example custom.css for coloring the toolbar according to CICS region}

\sphinxAtStartPar
\sphinxincludegraphics{{image42}.jpeg}
Web Access screen with yellow toolbar for SPCICSP

\sphinxAtStartPar
\sphinxincludegraphics{{image43}.jpeg}
Web Access screen with pink toolbar for SPCICSQ

\index{Adding text to the toolbar@\spxentry{Adding text to the toolbar}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Adding text to the toolbar@\spxentry{Adding text to the toolbar}}\ignorespaces 

\subsection{Adding custom text to the toolbar}
\label{\detokenize{User_Guide:adding-custom-text-to-the-toolbar}}\label{\detokenize{User_Guide:index-149}}
\sphinxAtStartPar
Another way of providing a clear visual indication of which application the user is logged on to is to add a text label to the toolbar. In this example the text “MVS1” is displayed when logged on to application TSO1A, and “MVS2” is displayed for application TSO2A.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*} \PYG{n}{VIRTEL} \PYG{n}{Web} \PYG{n}{Access} \PYG{n}{style} \PYG{n}{sheet} \PYG{k}{for} \PYG{n}{site} \PYG{n}{customisation}
\PYG{o}{*} \PYG{p}{(}\PYG{n}{c}\PYG{p}{)}\PYG{n}{Copyright} \PYG{n}{SysperTec} \PYG{n}{Communication} \PYG{l+m+mi}{2007}\PYG{p}{,}\PYG{l+m+mi}{2010} \PYG{n}{All} \PYG{n}{Rights} \PYG{n}{Reserved}
\PYG{o}{*}\PYG{o}{/}
\PYG{o}{.}\PYG{n}{TSO1A} \PYG{o}{.}\PYG{n}{toolbarLast}\PYG{p}{:}\PYG{n}{before} \PYG{p}{\PYGZob{}}
\PYG{n}{content}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MVS1}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{;}
\PYG{n}{color}\PYG{p}{:} \PYG{n}{gray}\PYG{p}{;}
\PYG{n}{opacity}\PYG{p}{:} \PYG{l+m+mf}{0.25}\PYG{p}{;}
\PYG{n}{font}\PYG{o}{\PYGZhy{}}\PYG{n}{size}\PYG{p}{:} \PYG{l+m+mi}{30}\PYG{n}{px}\PYG{p}{;}
\PYG{n}{width}\PYG{p}{:} \PYG{l+m+mi}{100}\PYG{o}{\PYGZpc{}}\PYG{p}{;}
\PYG{n}{text}\PYG{o}{\PYGZhy{}}\PYG{n}{align}\PYG{p}{:} \PYG{n}{center}\PYG{p}{;}
\PYG{n}{z}\PYG{o}{\PYGZhy{}}\PYG{n}{index}\PYG{p}{:} \PYG{l+m+mi}{1000}\PYG{p}{;}
\PYG{o}{\PYGZhy{}}\PYG{n}{webkit}\PYG{o}{\PYGZhy{}}\PYG{n}{text}\PYG{o}{\PYGZhy{}}\PYG{n}{stroke}\PYG{p}{:} \PYG{l+m+mi}{1}\PYG{n}{px} \PYG{c+c1}{\PYGZsh{}000;}
\PYG{o}{\PYGZhy{}}\PYG{n}{webkit}\PYG{o}{\PYGZhy{}}\PYG{n}{text}\PYG{o}{\PYGZhy{}}\PYG{n}{fill}\PYG{o}{\PYGZhy{}}\PYG{n}{color}\PYG{p}{:} \PYG{n}{transparent}\PYG{p}{;}
\PYG{p}{\PYGZcb{}}
\PYG{o}{.}\PYG{n}{TSO2A} \PYG{o}{.}\PYG{n}{toolbarLast}\PYG{p}{:}\PYG{n}{before} \PYG{p}{\PYGZob{}}
\PYG{n}{content}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MVS2}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{;}
\PYG{n}{color}\PYG{p}{:} \PYG{n}{red}\PYG{p}{;}
\PYG{n}{opacity}\PYG{p}{:} \PYG{l+m+mf}{0.25}\PYG{p}{;}
\PYG{n}{font}\PYG{o}{\PYGZhy{}}\PYG{n}{size}\PYG{p}{:} \PYG{l+m+mi}{30}\PYG{n}{px}\PYG{p}{;}
\PYG{n}{width}\PYG{p}{:} \PYG{l+m+mi}{100}\PYG{o}{\PYGZpc{}}\PYG{p}{;}
\PYG{n}{text}\PYG{o}{\PYGZhy{}}\PYG{n}{align}\PYG{p}{:} \PYG{n}{center}\PYG{p}{;}
\PYG{n}{z}\PYG{o}{\PYGZhy{}}\PYG{n}{index}\PYG{p}{:} \PYG{l+m+mi}{1000}\PYG{p}{;}
\PYG{o}{\PYGZhy{}}\PYG{n}{webkit}\PYG{o}{\PYGZhy{}}\PYG{n}{text}\PYG{o}{\PYGZhy{}}\PYG{n}{stroke}\PYG{p}{:} \PYG{l+m+mi}{1}\PYG{n}{px} \PYG{n}{red}\PYG{p}{;}
\PYG{o}{\PYGZhy{}}\PYG{n}{webkit}\PYG{o}{\PYGZhy{}}\PYG{n}{text}\PYG{o}{\PYGZhy{}}\PYG{n}{fill}\PYG{o}{\PYGZhy{}}\PYG{n}{color}\PYG{p}{:} \PYG{n}{transparent}\PYG{p}{;}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example custom.css for adding custom text to the toolbar}

\sphinxAtStartPar
\sphinxincludegraphics{{image44}.jpeg}
\sphinxstyleemphasis{Web Access screen with custom text in the toolbar}

\phantomsection\label{\detokenize{User_Guide:v462ug-hide-information}}
\index{Hiding information@\spxentry{Hiding information}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Hiding information@\spxentry{Hiding information}}\ignorespaces 

\subsection{Showing / Hiding server informations}
\label{\detokenize{User_Guide:showing-hiding-server-informations}}\label{\detokenize{User_Guide:index-150}}
\sphinxAtStartPar
It is sometimes useful to have a clear visual indication of which server a user is logged on to, its version and the maintenance level applied on the system. By default, the value specified into the APPLID parameter of the VIRTCT is displayed at the top\sphinxhyphen{}right of the toolbar as shown below. This information is followed by the running version number
and the VIRTEL Web access level of maintenance used. This last information is enclosed in parentheses.

\sphinxAtStartPar
\sphinxincludegraphics{{image45}.jpeg}

\sphinxAtStartPar
The running version and the level of maintenance cannot be hidden, only the server name can be permanently removed by modifying the w2hparm.hideinfo attributes present in the customized w2hparms.js file:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*} \PYG{n}{Configuration} \PYG{n}{of} \PYG{n}{the} \PYG{n}{server} \PYG{n}{name} \PYG{n}{connected} \PYG{n}{to}\PYG{o}{.}
\PYG{o}{*}\PYG{o}{/}
\PYG{n}{w2hparm}\PYG{o}{.}\PYG{n}{hideinfo} \PYG{o}{=} \PYG{n}{true}\PYG{p}{;}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example w2hparm.js for hiding the mainframe application name on which a user is connected to.}

\sphinxAtStartPar
If the default value is preserved, the user can hide this information for his own usage by checking “Hide Virtel
information in toolbar” in the Display tab of the settings panel.

\phantomsection\label{\detokenize{User_Guide:v462ug-hide-toolbar}}
\index{Hiding the toolbar@\spxentry{Hiding the toolbar}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Hiding the toolbar@\spxentry{Hiding the toolbar}}\ignorespaces 

\subsection{Hiding the toolbar}
\label{\detokenize{User_Guide:hiding-the-toolbar}}\label{\detokenize{User_Guide:index-151}}
\sphinxAtStartPar
The administrator may wish to prevent users from accessing features like copy/paste, print, and settings. This example shows how to hide the toolbar using a custom.css file:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{*} \PYG{n}{VIRTEL} \PYG{n}{Web} \PYG{n}{Access} \PYG{n}{style} \PYG{n}{sheet} \PYG{k}{for} \PYG{n}{site} \PYG{n}{customization}
\PYG{o}{*} \PYG{p}{(}\PYG{n}{c}\PYG{p}{)}\PYG{n}{Copyright} \PYG{n}{SysperTec} \PYG{n}{Communication} \PYG{l+m+mi}{2007}\PYG{p}{,}\PYG{l+m+mi}{2010} \PYG{n}{All} \PYG{n}{Rights} \PYG{n}{Reserved}
\PYG{o}{*}\PYG{o}{/}
\PYG{c+c1}{\PYGZsh{}toolbar \PYGZob{}display:none;\PYGZcb{}/*}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example custom css for hiding the toolbar}

\sphinxAtStartPar
You can also use a custom Javascript to remove icons individually from the toolbar, see {\hyperref[\detokenize{User_Guide:v462ug-remove-icons}]{\sphinxcrossref{\DUrole{std,std-ref}{“Removing unwanted toolbar icons”}}}}.

\index{Modifying colors@\spxentry{Modifying colors}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Modifying colors@\spxentry{Modifying colors}}\ignorespaces 

\subsubsection{Modifying the 3270 colors}
\label{\detokenize{User_Guide:modifying-the-3270-colors}}\label{\detokenize{User_Guide:index-152}}
\sphinxAtStartPar
Some installations prefer to modify the colors displayed on the 3270 screen to make the characters more readable.
This example shows how to modify the colors used by VIRTEL Web Access:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*} \PYG{n}{VIRTEL} \PYG{n}{Web} \PYG{n}{Access} \PYG{n}{style} \PYG{n}{sheet} \PYG{n}{customisation} \PYG{k}{for} \PYG{l+m+mi}{3270} \PYG{n}{colors}
\PYG{o}{*} \PYG{p}{(}\PYG{n}{c}\PYG{p}{)}\PYG{n}{Copyright} \PYG{n}{SysperTec} \PYG{n}{Communication} \PYG{l+m+mi}{2012} \PYG{n}{All} \PYG{n}{Rights} \PYG{n}{Reserved}
\PYG{o}{*}\PYG{o}{/}
\PYG{o}{.}\PYG{n}{NBLUE}\PYG{p}{,} \PYG{o}{.}\PYG{n}{UBLUE}\PYG{p}{,} \PYG{o}{.}\PYG{n}{BBLUE} \PYG{p}{\PYGZob{}}\PYG{n}{color}\PYG{p}{:}\PYG{c+c1}{\PYGZsh{}7890F0;\PYGZcb{}}
\PYG{o}{.}\PYG{n}{RBLUE} \PYG{p}{\PYGZob{}}\PYG{n}{background}\PYG{o}{\PYGZhy{}}\PYG{n}{color}\PYG{p}{:}\PYG{c+c1}{\PYGZsh{}7890F0;\PYGZcb{}}
\PYG{o}{.}\PYG{n}{NRED}\PYG{p}{,} \PYG{o}{.}\PYG{n}{URED}\PYG{p}{,} \PYG{o}{.}\PYG{n}{BRED} \PYG{p}{\PYGZob{}}\PYG{n}{color}\PYG{p}{:}\PYG{c+c1}{\PYGZsh{}F21816;\PYGZcb{}}
\PYG{o}{.}\PYG{n}{RRED} \PYG{p}{\PYGZob{}}\PYG{n}{background}\PYG{o}{\PYGZhy{}}\PYG{n}{color}\PYG{p}{:}\PYG{c+c1}{\PYGZsh{}F21816;\PYGZcb{}}
\PYG{o}{.}\PYG{n}{NPINK}\PYG{p}{,} \PYG{o}{.}\PYG{n}{UPINK}\PYG{p}{,} \PYG{o}{.}\PYG{n}{BPINK} \PYG{p}{\PYGZob{}}\PYG{n}{color}\PYG{p}{:}\PYG{c+c1}{\PYGZsh{}FF00FE;\PYGZcb{}}
\PYG{o}{.}\PYG{n}{RPINK} \PYG{p}{\PYGZob{}}\PYG{n}{background}\PYG{o}{\PYGZhy{}}\PYG{n}{color}\PYG{p}{:}\PYG{c+c1}{\PYGZsh{}FF00FE;\PYGZcb{}}
\PYG{o}{.}\PYG{n}{NGREEN}\PYG{p}{,} \PYG{o}{.}\PYG{n}{UGREEN}\PYG{p}{,} \PYG{o}{.}\PYG{n}{BGREEN} \PYG{p}{\PYGZob{}}\PYG{n}{color}\PYG{p}{:}\PYG{c+c1}{\PYGZsh{}24D82F;\PYGZcb{}}
\PYG{o}{.}\PYG{n}{RGREEN} \PYG{p}{\PYGZob{}}\PYG{n}{background}\PYG{o}{\PYGZhy{}}\PYG{n}{color}\PYG{p}{:}\PYG{c+c1}{\PYGZsh{}24D82F;\PYGZcb{}}
\PYG{o}{.}\PYG{n}{NTURQUOISE}\PYG{p}{,} \PYG{o}{.}\PYG{n}{UTURQUOISE}\PYG{p}{,} \PYG{o}{.}\PYG{n}{BTURQUOISE} \PYG{p}{\PYGZob{}}\PYG{n}{color}\PYG{p}{:}\PYG{c+c1}{\PYGZsh{}58F0F1;\PYGZcb{}}
\PYG{o}{.}\PYG{n}{RTURQUOISE} \PYG{p}{\PYGZob{}}\PYG{n}{background}\PYG{o}{\PYGZhy{}}\PYG{n}{color}\PYG{p}{:}\PYG{c+c1}{\PYGZsh{}58F0F1;\PYGZcb{}}
\PYG{o}{.}\PYG{n}{NYELLOW}\PYG{p}{,} \PYG{o}{.}\PYG{n}{UYELLOW}\PYG{p}{,} \PYG{o}{.}\PYG{n}{BYELLOW} \PYG{p}{\PYGZob{}}\PYG{n}{color}\PYG{p}{:}\PYG{c+c1}{\PYGZsh{}FFFF00;\PYGZcb{}}
\PYG{o}{.}\PYG{n}{RYELLOW} \PYG{p}{\PYGZob{}}\PYG{n}{background}\PYG{o}{\PYGZhy{}}\PYG{n}{color}\PYG{p}{:}\PYG{c+c1}{\PYGZsh{}FFFF00;\PYGZcb{}}
\PYG{o}{.}\PYG{n}{NWHITE}\PYG{p}{,} \PYG{o}{.}\PYG{n}{UWHITE}\PYG{p}{,} \PYG{o}{.}\PYG{n}{BWHITE} \PYG{p}{\PYGZob{}}\PYG{n}{color}\PYG{p}{:}\PYG{c+c1}{\PYGZsh{}FFFFFF;\PYGZcb{}}
\PYG{o}{.}\PYG{n}{RWHITE} \PYG{p}{\PYGZob{}}\PYG{n}{background}\PYG{o}{\PYGZhy{}}\PYG{n}{color}\PYG{p}{:}\PYG{c+c1}{\PYGZsh{}FFFFFF;\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example custom.css for modifying the 3270 colors}

\sphinxAtStartPar
In this stylesheet, BLUE, RED, PINK, GREEN, TURQUOISE, YELLOW, and WHITE represent the 7 colors of the 3270 palette, with a prefix indicating the highlighting mode: N=normal, U=underscore, B=blink, R=reverse video. The color values (for example, \#7890F0) are expressed in hexadecimal RGB encoding or as color names. For more explanation, see :\sphinxhyphen{}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxurl{http://en.wikipedia.org/wiki/Web\_colors}

\item {} 
\sphinxAtStartPar
\sphinxurl{http://www.w3schools.com/html/html\_colornames.asp}

\end{itemize}

\index{Adding a company logo@\spxentry{Adding a company logo}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Adding a company logo@\spxentry{Adding a company logo}}\ignorespaces 

\subsection{Adding a company logo}
\label{\detokenize{User_Guide:adding-a-company-logo}}\label{\detokenize{User_Guide:index-153}}
\sphinxAtStartPar
This example shows how to display an icon (for example, a company logo) at the left of the toolbar:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
/*
* VIRTEL Web Access style sheet customisation for company logo
* (c)Copyright SysperTec Communication 2012 All Rights Reserved
*/
\PYGZsh{}toolbar td\PYGZsh{}companyIcon \PYGZob{}
height:30px;
display:table\PYGZhy{}cell;
\PYGZcb{}
\PYGZsh{}companyIcon div \PYGZob{}
background\PYGZhy{}image:url(\PYGZdq{}/w2h/virtblue.jpg\PYGZdq{});
background\PYGZhy{}position:0px \PYGZhy{}4px;
background\PYGZhy{}repeat:no\PYGZhy{}repeat;
height:26px;
width:145px;
\PYGZcb{}
Example custom.css for displaying company logo in the toolbar
This example shows how to replace the Virtel logo in the VIRTEL Web Access menu and the Application menu by your
company logo:
/*
* VIRTEL Web Access style sheet for site customisation
* (c)Copyright SysperTec Communication 2013 All Rights Reserved
* \PYGZdl{}Id\PYGZdl{}
*/
\PYGZsh{}appmenulogo \PYGZob{}
background\PYGZhy{}image: url(\PYGZdq{}mycompany.gif\PYGZdq{});
height: 65px;
width: 266px;
\PYGZcb{}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example custom.css for replacing the Virtel logo by a company logo}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
If no explicit path is given, the company logo will be loaded from the same directory as the custom.css file.
\end{sphinxadmonition}

\index{Removing effects from a company logo@\spxentry{Removing effects from a company logo}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Removing effects from a company logo@\spxentry{Removing effects from a company logo}}\ignorespaces 

\subsection{Removing 3D/hover effects on the toolbar buttons}
\label{\detokenize{User_Guide:removing-3d-hover-effects-on-the-toolbar-buttons}}\label{\detokenize{User_Guide:index-154}}
\sphinxAtStartPar
This example shows how to remove the 3D/hover effects on toolbar buttons by adding orders in the custom.css file:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*} \PYG{n}{VIRTEL} \PYG{n}{Web} \PYG{n}{Access} \PYG{n}{style} \PYG{n}{sheet} \PYG{n}{customisation} \PYG{k}{for} \PYG{n}{removing} \PYG{l+m+mi}{3}\PYG{n}{D}\PYG{o}{/}\PYG{n}{hover} \PYG{n}{effects}
\PYG{o}{*} \PYG{p}{(}\PYG{n}{c}\PYG{p}{)}\PYG{n}{Copyright} \PYG{n}{SysperTec} \PYG{n}{Communication} \PYG{l+m+mi}{2014} \PYG{n}{All} \PYG{n}{Rights} \PYG{n}{Reserved}
\PYG{o}{*}\PYG{o}{/}
\PYG{c+c1}{\PYGZsh{}toolbar td .tbButton, \PYGZsh{}toolbar td .tbButton:hover, \PYGZsh{}toolbar td .tbButton:active \PYGZob{}}
\PYG{n}{background}\PYG{o}{\PYGZhy{}}\PYG{n}{color}\PYG{p}{:} \PYG{n}{inherit}\PYG{p}{;}
\PYG{n}{border}\PYG{p}{:} \PYG{n}{inherit}\PYG{p}{;}
\PYG{n}{box}\PYG{o}{\PYGZhy{}}\PYG{n}{shadow}\PYG{p}{:} \PYG{n}{inherit}\PYG{p}{;}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example custom.css for removing 3D/hover effects on buttons}

\index{Changing the back ground colour@\spxentry{Changing the back ground colour}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Changing the back ground colour@\spxentry{Changing the back ground colour}}\ignorespaces 

\subsection{Changing background color of the toolbar buttons}
\label{\detokenize{User_Guide:changing-background-color-of-the-toolbar-buttons}}\label{\detokenize{User_Guide:index-155}}
\sphinxAtStartPar
This example shows how to change the backgroung color of the toolbar buttons by adding orders in the custom.css file:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*} \PYG{n}{VIRTEL} \PYG{n}{Web} \PYG{n}{Access} \PYG{n}{style} \PYG{n}{sheet} \PYG{n}{customisation} \PYG{n}{the} \PYG{n}{background} \PYG{n}{of} \PYG{n}{the} \PYG{n}{toolbar} \PYG{n}{buttons}
\PYG{o}{*} \PYG{p}{(}\PYG{n}{c}\PYG{p}{)}\PYG{n}{Copyright} \PYG{n}{SysperTec} \PYG{n}{Communication} \PYG{l+m+mi}{2014} \PYG{n}{All} \PYG{n}{Rights} \PYG{n}{Reserved}
\PYG{o}{*}\PYG{o}{/}
\PYG{o}{|}\PYG{o}{\PYGZhy{}} \PYG{n}{transparent} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{at rest}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{o}{|}\PYG{o}{\PYGZhy{}} \PYG{n}{white} \PYG{n}{when} \PYG{n}{cursor} \PYG{n}{moves} \PYG{n}{on}
\PYG{o}{|}\PYG{o}{\PYGZhy{}} \PYG{n}{yellow} \PYG{n}{when} \PYG{n}{button} \PYG{o+ow}{is} \PYG{n}{clicked}
\PYG{c+c1}{\PYGZsh{}toolbar td .tbButton \PYGZob{}}
\PYG{n}{background}\PYG{o}{\PYGZhy{}}\PYG{n}{color}\PYG{p}{:} \PYG{n}{inherit}\PYG{p}{;}
\PYG{p}{\PYGZcb{}}
\PYG{c+c1}{\PYGZsh{}toolbar td .tbButton:hover \PYGZob{}}
\PYG{n}{background}\PYG{o}{\PYGZhy{}}\PYG{n}{color}\PYG{p}{:} \PYG{n}{white}\PYG{p}{;}
\PYG{p}{\PYGZcb{}}
\PYG{c+c1}{\PYGZsh{}toolbar td .tbButton:active \PYGZob{}}
\PYG{n}{background}\PYG{o}{\PYGZhy{}}\PYG{n}{color}\PYG{p}{:} \PYG{n}{yellow}\PYG{p}{;}
\PYG{p}{\PYGZcb{}}
\PYG{o}{|} \PYG{n}{To} \PYG{n}{remove} \PYG{n}{the} \PYG{n}{background} \PYG{n}{color} \PYG{o+ow}{and} \PYG{n}{the} \PYG{n}{border} \PYG{n}{of} \PYG{n}{buttons} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{at rest}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}
\PYG{c+c1}{\PYGZsh{}toolbar td .tbButton \PYGZob{}}
\PYG{n}{background}\PYG{o}{\PYGZhy{}}\PYG{n}{color}\PYG{p}{:} \PYG{n}{inherit}\PYG{p}{;}
\PYG{n}{border}\PYG{p}{:} \PYG{l+m+mi}{1}\PYG{n}{px} \PYG{n}{solid} \PYG{n}{transparent}\PYG{p}{;}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example custom.css managing the background color of the toolbar buttons}

\index{Icon display@\spxentry{Icon display}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Icon display@\spxentry{Icon display}}\ignorespaces 

\subsection{Icon display troubleshooting}
\label{\detokenize{User_Guide:icon-display-troubleshooting}}\label{\detokenize{User_Guide:index-156}}
\sphinxAtStartPar
If some icons on the toolbar are displayed with some parasites on the border, please check that the browser is not in a zoom mode greater than 100\%.

\newpage

\index{Site Customization \sphinxhyphen{} Javascript Functions@\spxentry{Site Customization \sphinxhyphen{} Javascript Functions}}\ignorespaces 

\section{Site Customization \sphinxhyphen{} Javascript Functions}
\label{\detokenize{User_Guide:site-customization-javascript-functions}}\label{\detokenize{User_Guide:v462ug-customization-javascript-functions}}\label{\detokenize{User_Guide:index-157}}
\index{Javascript@\spxentry{Javascript}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Javascript@\spxentry{Javascript}}\index{custom.js@\spxentry{custom.js}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!custom.js@\spxentry{custom.js}}\index{Option mode@\spxentry{Option mode}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Option mode@\spxentry{Option mode}}\ignorespaces 
\sphinxAtStartPar
A custom Javascript file can be used for calling bespoke functions or setting attributes in Virtel objects which can control or modify default behaviour. When running in its “default mode” this file is normally called custom.js. An alternate mode, known as “Option Mode” provides better granularity for bespoke enhancements. See {\hyperref[\detokenize{User_Guide:v462ug-customizing-with-option}]{\sphinxcrossref{\DUrole{std,std-ref}{“Virtel Customising modes”}}}} for further details on how to customise Virtel using the available mode settings. As delivered, Virtel runs in the “default” mode, locating a dummy custom.js file from the W2H\sphinxhyphen{}DIR directory.

\begin{sphinxadmonition}{danger}{Danger:}
\sphinxAtStartPar
Updating custom.js in the default W2H\sphinxhyphen{}DIR directory is not recommended as changes will be overwritten by maintenance or future Virtel release updates. Keep customized elements such as custom.js in the CLI\sphinxhyphen{}DIR directory or in a designated “option” file.
\end{sphinxadmonition}

\sphinxAtStartPar
To take into account site\sphinxhyphen{}specific Javascript extensions for Web Access, the WEB2AJAX.htm page template loads a custom Javascript file when a session is started. An empty file, called custom.js by default, is delivered as standard in the W2HDIR directory. The CLI\sphinxhyphen{}03CJ (/w2h/custom\sphinxhyphen{}js) transaction as delivered under the CLIWHOST entry point refers to the W2H\sphinxhyphen{}DIR directory. An administrator can modify this transaction to reference a different directory containing a site\sphinxhyphen{}specific version of custom.js. The CLI\sphinxhyphen{}DIR directory, which is intended for client\sphinxhyphen{}specific files, may be used for this purpose.  The changes as described in this section pertain to running in “default mode” whereby modifications are made to a modified custom.js file. See {\hyperref[\detokenize{User_Guide:v462ug-customizing-with-option}]{\sphinxcrossref{\DUrole{std,std-ref}{“Virtel Customization modes”}}}} for more details on using the recommended “option mode”.

\sphinxAtStartPar
To facilitate site\sphinxhyphen{}specific modifications to custom.js, VIRTEL Web Access calls various custom exits at strategic points in its processing. These exits are optional Javascript functions which can be codes custom.js if required. The exits are described below.

\index{Javascript Exits@\spxentry{Javascript Exits}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Javascript Exits@\spxentry{Javascript Exits}}\ignorespaces 

\subsection{Javascript Exits which can be customized}
\label{\detokenize{User_Guide:javascript-exits-which-can-be-customized}}\label{\detokenize{User_Guide:index-159}}
\index{before\_launchApplink@\spxentry{before\_launchApplink}!Exits@\spxentry{Exits}}\index{Exits@\spxentry{Exits}!before\_launchApplink@\spxentry{before\_launchApplink}}\ignorespaces 
\def\sphinxLiteralBlockLabel{\label{\detokenize{User_Guide:index-160}}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{before\PYGZus{}launchApplink}\PYG{p}{(}\PYG{n}{href}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxAtStartPar
This function is called before launching an application from the applist menu.

\index{after\_StandardInit@\spxentry{after\_StandardInit}!Exits@\spxentry{Exits}}\index{Exits@\spxentry{Exits}!after\_StandardInit@\spxentry{after\_StandardInit}}\ignorespaces 
\def\sphinxLiteralBlockLabel{\label{\detokenize{User_Guide:index-161}}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{after\PYGZus{}standardInit}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxAtStartPar
This function is called after the session with the host application has started.

\index{before\_submitForm@\spxentry{before\_submitForm}!Exits@\spxentry{Exits}}\index{Exits@\spxentry{Exits}!before\_submitForm@\spxentry{before\_submitForm}}\ignorespaces 
\def\sphinxLiteralBlockLabel{\label{\detokenize{User_Guide:index-162}}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{before\PYGZus{}submitForm}\PYG{p}{(}\PYG{n}{pfKey}\PYG{p}{,}\PYG{n}{oForm}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxAtStartPar
This function is called before submitting a request to the VIRTEL server. The arguments passed to before\_submitForm are:
\begin{description}
\sphinxlineitem{pfKey}
\sphinxAtStartPar
the name of the key pressed: “ENTER”, “PF1”, etc.

\sphinxlineitem{oForm}
\sphinxAtStartPar
a DOM object representing the form to be submitted (usually document.virtelForm)

\end{description}

\index{after\_responseHandle@\spxentry{after\_responseHandle}!Exits@\spxentry{Exits}}\index{Exits@\spxentry{Exits}!after\_responseHandle@\spxentry{after\_responseHandle}}\ignorespaces 
\def\sphinxLiteralBlockLabel{\label{\detokenize{User_Guide:index-163}}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{after\PYGZus{}responseHandle}\PYG{p}{(}\PYG{n}{o}\PYG{p}{,}\PYG{n}{url}\PYG{p}{,}\PYG{n}{xtim}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxAtStartPar
This function is called after receiving a response from the VIRTEL server. The arguments passed to after\_responseHandle are:
\begin{description}
\sphinxlineitem{o}
\sphinxAtStartPar
the XMLHttpRequest object (contains the status and responseText)

\sphinxlineitem{url}
\sphinxAtStartPar
the URL which was used in the request

\sphinxlineitem{xtim}
\sphinxAtStartPar
a Javascript Date object representing the time the request was sent to the server

\end{description}

\index{modify\_settingsValue@\spxentry{modify\_settingsValue}!Exits@\spxentry{Exits}}\index{Exits@\spxentry{Exits}!modify\_settingsValue@\spxentry{modify\_settingsValue}}\ignorespaces 
\def\sphinxLiteralBlockLabel{\label{\detokenize{User_Guide:index-164}}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{modify\PYGZus{}settingsValues}\PYG{p}{(}\PYG{n}{name}\PYG{p}{,}\PYG{n}{values}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxAtStartPar
This function is called before the list of possible values for a parameter is displayed in the VIRTEL Web Access Settings menu. It allows the list of values to be modified. The arguments passed to modify\_settingsValues are:
\begin{description}
\sphinxlineitem{name}
\sphinxAtStartPar
the parameter name

\sphinxlineitem{values}
\sphinxAtStartPar
the list of possible values

\end{description}

\sphinxAtStartPar
The return value is treated as the new list of possible values. If the function returns null or undefined, the list remains
unchanged.

\index{when\_init@\spxentry{when\_init}!Exits@\spxentry{Exits}}\index{Exits@\spxentry{Exits}!when\_init@\spxentry{when\_init}}\ignorespaces 
\def\sphinxLiteralBlockLabel{\label{\detokenize{User_Guide:index-165}}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{when\PYGZus{}init}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxAtStartPar
This function is called for each subpage after vir3270 initialisation.

\index{when\_focusGained@\spxentry{when\_focusGained}!Exits@\spxentry{Exits}}\index{Exits@\spxentry{Exits}!when\_focusGained@\spxentry{when\_focusGained}}\ignorespaces 
\def\sphinxLiteralBlockLabel{\label{\detokenize{User_Guide:index-166}}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{when\PYGZus{}focusGained}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxAtStartPar
This function is called whenever the 3270 window gains the focus.

\index{when\_focusLost@\spxentry{when\_focusLost}!Exits@\spxentry{Exits}}\index{Exits@\spxentry{Exits}!when\_focusLost@\spxentry{when\_focusLost}}\ignorespaces 
\def\sphinxLiteralBlockLabel{\label{\detokenize{User_Guide:index-167}}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{when\PYGZus{}focusLost}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxAtStartPar
This function is called whenever the 3270 window loses the focus.

\index{Customizing Toolbar Icons@\spxentry{Customizing Toolbar Icons}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Customizing Toolbar Icons@\spxentry{Customizing Toolbar Icons}}\ignorespaces 

\subsection{Customizing Toolbar icons}
\label{\detokenize{User_Guide:customizing-toolbar-icons}}\label{\detokenize{User_Guide:index-168}}
\sphinxAtStartPar
This example uses the after\_standardInit function to insert additional icons into the toolbar when the session is started. Icons may subsequently be added or removed from the toolbar after each screen by means of the after\_responseHandle function.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*} \PYG{p}{(}\PYG{n}{c}\PYG{p}{)}\PYG{n}{Copyright} \PYG{n}{SysperTec} \PYG{n}{Communication} \PYG{l+m+mi}{2012} \PYG{n}{All} \PYG{n}{Rights} \PYG{n}{Reserved}
\PYG{l+m+mf}{1.} \PYG{n}{Incoming} \PYG{n}{calls}
\PYG{l+m+mi}{125}
\PYG{o}{*} \PYG{n}{VIRTEL} \PYG{n}{Web} \PYG{n}{Access} \PYG{n}{customer}\PYG{o}{\PYGZhy{}}\PYG{n}{specific} \PYG{n}{Javascript} \PYG{n}{functions}
\PYG{o}{*}\PYG{o}{/}
\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*} \PYG{n}{Adds} \PYG{n}{a} \PYG{n}{button} \PYG{n}{to} \PYG{n}{the} \PYG{n}{toolbar} \PYG{n}{which} \PYG{n}{performs} \PYG{n}{a} \PYG{n}{Google} \PYG{n}{search} \PYG{k}{for}
\PYG{o}{*} \PYG{n}{the} \PYG{n}{text} \PYG{n}{selected} \PYG{o+ow}{in} \PYG{n}{the} \PYG{n}{red} \PYG{n}{box} \PYG{o+ow}{in} \PYG{n}{the} \PYG{l+m+mi}{3270} \PYG{n}{screen}\PYG{p}{,} \PYG{o+ow}{or} \PYG{k}{for} \PYG{n}{the}
\PYG{o}{*} \PYG{n}{word} \PYG{n}{at} \PYG{n}{the} \PYG{n}{cursor} \PYG{k}{if} \PYG{n}{no} \PYG{n}{box} \PYG{o+ow}{is} \PYG{n}{drawn}
\PYG{o}{*}\PYG{o}{/}
\PYG{n}{function} \PYG{n}{after\PYGZus{}standardInit}\PYG{p}{(}\PYG{p}{)} \PYG{p}{\PYGZob{}}
  \PYG{n}{addtoolbarbutton}\PYG{p}{(}\PYG{l+m+mi}{999}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{http://www.google.com/favicon.ico}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Search engine query}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{do\PYGZus{}search}\PYG{p}{)}\PYG{p}{;}
\PYG{p}{\PYGZcb{}}
\PYG{n}{function} \PYG{n}{do\PYGZus{}search}\PYG{p}{(}\PYG{p}{)} \PYG{p}{\PYGZob{}}
  \PYG{n}{var} \PYG{n}{searcharg} \PYG{o}{=} \PYG{n}{VIR3270}\PYG{o}{.}\PYG{n}{getBoxedText}\PYG{p}{(}\PYG{p}{)} \PYG{o}{|}\PYG{o}{|} \PYG{n}{VIR3270}\PYG{o}{.}\PYG{n}{getWordAtCursor}\PYG{p}{(}\PYG{p}{)}\PYG{p}{;}
  \PYG{n}{var} \PYG{n}{windowname} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{search}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{;}
  \PYG{n}{var} \PYG{n}{searchURL} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{http://www.google.com}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{;}
  \PYG{k}{if} \PYG{p}{(}\PYG{n}{searcharg}\PYG{p}{)} \PYG{n}{searchURL} \PYG{o}{+}\PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{/search?q=}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{+}
    \PYG{n}{encodeURIComponent}\PYG{p}{(}\PYG{n}{searcharg}\PYG{o}{.}\PYG{n}{replace}\PYG{p}{(}\PYG{o}{/}\PYGZbs{}\PYG{n}{s}\PYG{o}{+}\PYG{o}{/}\PYG{n}{g}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{;}
\PYG{n}{var} \PYG{n}{windowopts} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{location=yes,status=yes,resizable=yes,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{+}
   \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{scrollbars=yes,toolbar=yes,menubar=yes,width=640,height=480}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{;}
\PYG{n}{var} \PYG{n}{searchwin} \PYG{o}{=} \PYG{n}{window}\PYG{o}{.}\PYG{n}{open}\PYG{p}{(}\PYG{n}{searchURL}\PYG{p}{,} \PYG{n}{windowname}\PYG{p}{,} \PYG{n}{windowopts}\PYG{p}{)}\PYG{p}{;}
\PYG{k}{if} \PYG{p}{(}\PYG{n}{searchwin}\PYG{p}{)} \PYG{n}{searchwin}\PYG{o}{.}\PYG{n}{focus}\PYG{p}{(}\PYG{p}{)}\PYG{p}{;}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example custom.js to customize the toolbar icons}

\index{Customizing non\sphinxhyphen{}standard Icons@\spxentry{Customizing non\sphinxhyphen{}standard Icons}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Customizing non\sphinxhyphen{}standard Icons@\spxentry{Customizing non\sphinxhyphen{}standard Icons}}\ignorespaces 

\subsection{Centering non\sphinxhyphen{}standard icons}
\label{\detokenize{User_Guide:centering-non-standard-icons}}\label{\detokenize{User_Guide:index-169}}
\sphinxAtStartPar
The best size for an icon is 32x32 pixels. For bigger or smaller icons, it possible to offer better center rendering in modifying the content of the class attribute passed within the “addtoolbarbutton” function in conjunction of using a specific css attribute.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*} \PYG{p}{(}\PYG{n}{c}\PYG{p}{)}\PYG{n}{Copyright} \PYG{n}{SysperTec} \PYG{n}{Communication} \PYG{l+m+mi}{2014} \PYG{n}{All} \PYG{n}{Rights} \PYG{n}{Reserved}
\PYG{o}{*} \PYG{n}{VIRTEL} \PYG{n}{Web} \PYG{n}{Access} \PYG{n}{customer}\PYG{o}{\PYGZhy{}}\PYG{n}{specific} \PYG{n}{Javascript} \PYG{n}{functions}
\PYG{o}{*} \PYG{n}{Resizing} \PYG{n}{a} \PYG{n}{too} \PYG{n}{small} \PYG{o+ow}{or} \PYG{n}{too} \PYG{n}{big} \PYG{n}{toolbar} \PYG{n}{icon}\PYG{o}{.}
\PYG{o}{*} \PYG{n}{For} \PYG{n}{example} \PYG{n}{toosmall\PYGZus{}pic}\PYG{o}{.}\PYG{n}{png}\PYG{o}{=}\PYG{l+m+mi}{22}\PYG{n}{x22} \PYG{o+ow}{and} \PYG{n}{toobig\PYGZus{}pic}\PYG{o}{.}\PYG{n}{jpg}\PYG{o}{=}\PYG{l+m+mi}{145}\PYG{n}{x30}
\PYG{o}{*}\PYG{o}{/}
\PYG{n}{addtoolbarbutton}\PYG{p}{(}\PYG{l+m+mi}{999}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{/w2h/toosmall\PYGZus{}pic.png}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Custom button \PYGZsh{}1 tooltip}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{do\PYGZus{}search}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{tbButton size22x22}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{;}
\PYG{n}{addtoolbarbutton}\PYG{p}{(}\PYG{l+m+mi}{999}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{/w2h/toobig\PYGZus{}pic.jpg}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Custom button \PYGZsh{}2 tooltip}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{do\PYGZus{}search}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{tbButton size145x30}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example custom.js to specify the toolbar icon size}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{*}
\PYG{c+c1}{\PYGZsh{}toolbar td img.tbButton.size22x22 \PYGZob{}}
  \PYG{n}{width}\PYG{p}{:} \PYG{l+m+mi}{22}\PYG{n}{px}\PYG{p}{;}
  \PYG{n}{height}\PYG{p}{:} \PYG{l+m+mi}{22}\PYG{n}{px}\PYG{p}{;}
  \PYG{n}{padding}\PYG{p}{:} \PYG{l+m+mi}{5}\PYG{n}{px}\PYG{p}{;} \PYG{o}{/}\PYG{o}{*} \PYG{n}{padding} \PYG{o+ow}{is} \PYG{n}{calculated} \PYG{n}{to} \PYG{n}{center} \PYG{n}{the} \PYG{n}{picture} \PYG{n}{horizontally} \PYG{o+ow}{and} \PYG{n}{vertically} \PYG{o+ow}{in} \PYG{n}{the} \PYG{l+m+mi}{32}\PYG{n}{x32} \PYG{n}{allocated} \PYG{o}{*}\PYG{o}{/}
\PYG{p}{\PYGZcb{}}

\PYG{c+c1}{\PYGZsh{}toolbar td img.tbButton.size145x30 \PYGZob{}}
  \PYG{n}{width}\PYG{p}{:} \PYG{l+m+mi}{145}\PYG{n}{px}\PYG{p}{;}
  \PYG{n}{height}\PYG{p}{:} \PYG{l+m+mi}{30}\PYG{n}{px}\PYG{p}{;}
  \PYG{n}{padding}\PYG{p}{:} \PYG{l+m+mi}{1}\PYG{n}{px} \PYG{l+m+mi}{0}\PYG{p}{;} \PYG{o}{/}\PYG{o}{*} \PYG{n}{padding} \PYG{o+ow}{is} \PYG{n}{calculated} \PYG{n}{to} \PYG{n}{center} \PYG{n}{the} \PYG{n}{picture} \PYG{n}{vertically} \PYG{o+ow}{in} \PYG{n}{the} \PYG{l+m+mi}{32}\PYG{n}{x32} \PYG{n}{allocated} \PYG{n}{area} \PYG{p}{(}\PYG{l+m+mi}{1}\PYG{o}{+}\PYG{l+m+mi}{30}\PYG{o}{+}\PYG{l+m+mi}{1} \PYG{o}{*}\PYG{o}{/}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example custom.css to manage a toolbar icon with a non standard size}

\phantomsection\label{\detokenize{User_Guide:v462ug-remove-icons}}
\index{Removing Toolbar Icons@\spxentry{Removing Toolbar Icons}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Removing Toolbar Icons@\spxentry{Removing Toolbar Icons}}\ignorespaces 

\subsection{Removing unwanted toolbar icons}
\label{\detokenize{User_Guide:removing-unwanted-toolbar-icons}}\label{\detokenize{User_Guide:index-170}}
\sphinxAtStartPar
This example uses the after\_standardInit function to disable macro functions by removing the corresponding icons from the toolbar.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*} \PYG{p}{(}\PYG{n}{c}\PYG{p}{)}\PYG{n}{Copyright} \PYG{n}{SysperTec} \PYG{n}{Communication} \PYG{l+m+mi}{2012} \PYG{n}{All} \PYG{n}{Rights} \PYG{n}{Reserved}
\PYG{o}{*} \PYG{n}{VIRTEL} \PYG{n}{Web} \PYG{n}{Access} \PYG{n}{customer}\PYG{o}{\PYGZhy{}}\PYG{n}{specific} \PYG{n}{Javascript} \PYG{n}{functions}
\PYG{o}{*}\PYG{o}{/}
\PYG{n}{function} \PYG{n}{after\PYGZus{}standardInit}\PYG{p}{(}\PYG{p}{)} \PYG{p}{\PYGZob{}}
  \PYG{o}{/}\PYG{o}{*} \PYG{n}{Remove} \PYG{n}{macro} \PYG{n}{buttons} \PYG{k+kn}{from} \PYG{n+nn}{the} \PYG{n}{toolbar} \PYG{o}{*}\PYG{o}{/}
  \PYG{n}{removetoolbarbutton}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{startrecording}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{;}
  \PYG{n}{removetoolbarbutton}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{playback}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{;}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example custom.js to remove selected toolbar icons}

\sphinxAtStartPar
The names of the other toolbar icons which can be removed in this way are:\sphinxhyphen{}
\begin{itemize}
\item {} 
\sphinxAtStartPar
capture

\item {} 
\sphinxAtStartPar
disconnect

\item {} 
\sphinxAtStartPar
document\sphinxhyphen{}print\sphinxhyphen{}preview

\item {} 
\sphinxAtStartPar
edit\sphinxhyphen{}copy

\item {} 
\sphinxAtStartPar
edit\sphinxhyphen{}cut

\item {} 
\sphinxAtStartPar
edit\sphinxhyphen{}paste

\item {} 
\sphinxAtStartPar
emptybuf

\item {} 
\sphinxAtStartPar
file\sphinxhyphen{}rcv

\item {} 
\sphinxAtStartPar
file\sphinxhyphen{}send

\item {} 
\sphinxAtStartPar
help

\item {} 
\sphinxAtStartPar
keypad

\item {} 
\sphinxAtStartPar
playback

\item {} 
\sphinxAtStartPar
printer

\item {} 
\sphinxAtStartPar
settings

\item {} 
\sphinxAtStartPar
settingsV2

\item {} 
\sphinxAtStartPar
startrecording, playback, printer

\end{itemize}

\sphinxAtStartPar
To hide the toolbar completely, see {\hyperref[\detokenize{User_Guide:v462ug-hide-toolbar}]{\sphinxcrossref{\DUrole{std,std-ref}{“Hiding the toolbar”}}}}.

\sphinxAtStartPar
To hide only the VIRTEL Application name, see {\hyperref[\detokenize{User_Guide:v462ug-hide-information}]{\sphinxcrossref{\DUrole{std,std-ref}{“Showing / Hiding server informations”}}}}.

\index{Positioning Toolbar Icons@\spxentry{Positioning Toolbar Icons}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Positioning Toolbar Icons@\spxentry{Positioning Toolbar Icons}}\ignorespaces 

\subsection{Positioning Toolbar Icons}
\label{\detokenize{User_Guide:positioning-toolbar-icons}}\label{\detokenize{User_Guide:index-171}}
\sphinxAtStartPar
In certain circumstances, the default position of an icon may not be at the user’s convenience. Is possible to change an icon’s position based on the position of another icon.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*} \PYG{n}{Customize} \PYG{n}{the} \PYG{n}{location} \PYG{n}{of} \PYG{n}{dynamic} \PYG{n}{toolbar} \PYG{n}{buttons}\PYG{o}{.}
\PYG{o}{*} \PYG{n}{The} \PYG{n}{calls} \PYG{n}{to} \PYG{n}{this} \PYG{n}{function} \PYG{n}{are} \PYG{n}{ignored} \PYG{n}{when} \PYG{n}{they}
\PYG{o}{*} \PYG{k}{return} \PYG{n}{nothing}\PYG{p}{,} \PYG{o+ow}{or} \PYG{n}{an} \PYG{n}{integer} \PYG{o+ow}{not} \PYG{n}{greater} \PYG{n}{than} \PYG{l+m+mf}{0.}
\PYG{o}{*}
\PYG{o}{*} \PYG{n}{Customizable} \PYG{n}{buttons} \PYG{n}{IDs} \PYG{p}{:}
\PYG{o}{*} \PYG{o}{\PYGZgt{}} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{3278T}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{o}{*} \PYG{o}{\PYGZgt{}} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{document\PYGZhy{}print\PYGZhy{}preview}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{o}{*} \PYG{o}{\PYGZgt{}} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{file\PYGZhy{}send}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{o}{*} \PYG{o}{\PYGZgt{}} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{file\PYGZhy{}recv}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{o}{*} \PYG{o}{\PYGZgt{}} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{printer}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{o}{*}\PYG{o}{/}
\PYG{n}{function} \PYG{n}{customize\PYGZus{}toolbarButtonIndex}\PYG{p}{(}\PYG{n+nb}{id}\PYG{p}{)} \PYG{p}{\PYGZob{}}
\PYG{k}{if} \PYG{p}{(}\PYG{n+nb}{id}\PYG{o}{==}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{printer}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{|}\PYG{o}{|} \PYG{n+nb}{id}\PYG{o}{==}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{document\PYGZhy{}print\PYGZhy{}preview}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)} \PYG{p}{\PYGZob{}}
\PYG{k}{return} \PYG{n}{getToolbarButtonIndex}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{disconnect}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)} \PYG{o}{+} \PYG{l+m+mi}{1}\PYG{p}{;}
\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example custom.js to select a position for printer icon}

\index{Modifying the text of the status bar@\spxentry{Modifying the text of the status bar}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Modifying the text of the status bar@\spxentry{Modifying the text of the status bar}}\ignorespaces 

\subsection{Modifying the text of the status bar}
\label{\detokenize{User_Guide:modifying-the-text-of-the-status-bar}}\label{\detokenize{User_Guide:index-172}}
\sphinxAtStartPar
This example uses the after\_responseHandle function to modify the text in the status bar at the bottom of the Web Access screen. This example displays the text “Your printer name is xxxx” in the status bar.
The status bar text is an object which can therefore be modified using an API.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*} \PYG{p}{(}\PYG{n}{c}\PYG{p}{)}\PYG{n}{Copyright} \PYG{n}{SysperTec} \PYG{n}{Communication} \PYG{l+m+mi}{2012} \PYG{n}{All} \PYG{n}{Rights} \PYG{n}{Reserved}
\PYG{o}{*} \PYG{n}{VIRTEL} \PYG{n}{Web} \PYG{n}{Access} \PYG{n}{customer}\PYG{o}{\PYGZhy{}}\PYG{n}{specific} \PYG{n}{Javascript} \PYG{n}{functions}
\PYG{o}{*}\PYG{o}{/}
\PYG{n}{function} \PYG{n}{after\PYGZus{}responseHandle}\PYG{p}{(}\PYG{n}{httpXmlObj}\PYG{p}{,} \PYG{n}{url}\PYG{p}{,} \PYG{n}{xmitTimestamp}\PYG{p}{)} \PYG{p}{\PYGZob{}}
\PYG{n}{vwaStatusBar}\PYG{o}{.}\PYG{n}{setRelay}\PYG{p}{(}\PYG{p}{)}\PYG{p}{;} \PYG{o}{/}\PYG{o}{/} \PYG{n}{clears} \PYG{n}{relay} \PYG{n}{field}
\PYG{n}{vwaStatusBar}\PYG{o}{.}\PYG{n}{setPrintRelay}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Your printer name is: }\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{+} \PYG{n}{vwaStatusBar}\PYG{o}{.}\PYG{n}{getPrintRelay}\PYG{p}{(}\PYG{p}{)}\PYG{p}{)}\PYG{p}{;}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example custom.js to modify the text of the status bar}

\sphinxAtStartPar
With this method, an API is provided which allows code in custom.js to change some fields in the status bar without having to manipulate the DOM of the page. The “vwaStatusBar” object can be used to do this.

\sphinxAtStartPar
The editing functions are:\sphinxhyphen{}


\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TT}
\sphinxtoprule
\sphinxstyletheadfamily 
\sphinxAtStartPar
Function
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Description
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook
\sphinxAtStartPar
vwaStatusBar.setRelay(txt)
&
\sphinxAtStartPar
Change the “Relay” field.
\\
\sphinxhline
\sphinxAtStartPar
vwaStatusBar.setPrintRelay(txt)
&
\sphinxAtStartPar
Change the “Printer relay” field.
\\
\sphinxhline
\sphinxAtStartPar
vwaStatusBar.setStatus(txt)
&
\sphinxAtStartPar
Change the “Status” field.
\\
\sphinxhline
\sphinxAtStartPar
vwaStatusBar.setStatusClass(txt)
&
\sphinxAtStartPar
Allow to assign a specific CSS class to the “Status” field.
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}

\sphinxAtStartPar
If the parameter is empty or undefined, the corresponding field is not displayed. If the content is too long, it is truncated to the right.

\sphinxAtStartPar
The query functions are:\sphinxhyphen{}


\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TT}
\sphinxtoprule
\sphinxstyletheadfamily 
\sphinxAtStartPar
Function
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Description
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook
\sphinxAtStartPar
vwaStatusBar.getCursCol()
&
\sphinxAtStartPar
Return the “x” position of the cursor.
\\
\sphinxhline
\sphinxAtStartPar
vwaStatusBar.getCursRow()
&
\sphinxAtStartPar
Return the “y” position of the cursor.
\\
\sphinxhline
\sphinxAtStartPar
vwaStatusBar.getRelay(parameter)
&
\sphinxAtStartPar
Return the content of the “Relay” field.
\\
\sphinxhline
\sphinxAtStartPar
vwaStatusBar.getPrintRelay(parameter)
&
\sphinxAtStartPar
Return the content of the “Printer relay” field.
\\
\sphinxhline
\sphinxAtStartPar
vwaStatusBar.getStatus()
&
\sphinxAtStartPar
Return the content of the “Status” field.
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}

\begin{sphinxadmonition}{note}{Note:}\begin{itemize}
\item {} 
\sphinxAtStartPar
For the “getRelay()” and “getPrinterRelay()” functions, an optional parameter may be specified.

\item {} 
\sphinxAtStartPar
When specified, valid values are “true” or “false” (without the quotes). When the parameter is ommited, or is not a valid value, the default “false” will be used.

\item {} 
\sphinxAtStartPar
When “setRelay(txt)” or “setPrinterRelay(txt)” is used the “txt” value overprints the field at the browser level before displaying to the end user. Behind this “overprinted value”, an initial value exists that has been placed by VIRTEL mainframe side before sending message to the browser. When using the “getRelay()” or “getPrinterRelay()” functions, you may want to retrieve the initial or overprinted value. When in “false” mode the function returns the initial value. When in “true” mode the function retruns the overprinted value.

\end{itemize}
\end{sphinxadmonition}

\index{Setting Custom Hotspots@\spxentry{Setting Custom Hotspots}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Setting Custom Hotspots@\spxentry{Setting Custom Hotspots}}\ignorespaces 

\subsection{Custom hotspot recognition}
\label{\detokenize{User_Guide:custom-hotspot-recognition}}\label{\detokenize{User_Guide:index-173}}
\sphinxAtStartPar
This example uses the after\_responseHandle function to modify the regular expression which is used to identify PF key hotspots.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
/*
* (c)Copyright SysperTec Communication 2012 All Rights Reserved
* VIRTEL Web Access customer\PYGZhy{}specific Javascript functions
*/
function after\PYGZus{}responseHandle(httpXmlObj, url, xmitTimestamp) \PYGZob{}
VIR3270.customPfKeysHotspotRegex =
/(P?F\PYGZbs{}d\PYGZob{}1,2\PYGZcb{}|PA[1\PYGZhy{}3]|ENTER|CLEAR)((?:\PYGZbs{}/P?F\PYGZbs{}d\PYGZob{}1,2\PYGZcb{})?\PYGZbs{}s*[=:\PYGZhy{}])/;
\PYGZcb{}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example custom.js to modify PF key hotspot recognition}

\index{Adding a screen watermark@\spxentry{Adding a screen watermark}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Adding a screen watermark@\spxentry{Adding a screen watermark}}\ignorespaces 

\subsection{Adding a watermark to the 3270 screen}
\label{\detokenize{User_Guide:adding-a-watermark-to-the-3270-screen}}\label{\detokenize{User_Guide:index-174}}
\sphinxAtStartPar
This example uses the after\_standardInit function in conjunction with a custom stylesheet to add a watermark to the Web Access screen. The watermark displays the application name in light text behind the 3270 screen content. The application name is obtained from the class attribute of the body tag.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*} \PYG{p}{(}\PYG{n}{c}\PYG{p}{)}\PYG{n}{Copyright} \PYG{n}{SysperTec} \PYG{n}{Communication} \PYG{l+m+mi}{2012} \PYG{n}{All} \PYG{n}{Rights} \PYG{n}{Reserved}
\PYG{o}{*} \PYG{n}{VIRTEL} \PYG{n}{Web} \PYG{n}{Access} \PYG{n}{customer}\PYG{o}{\PYGZhy{}}\PYG{n}{specific} \PYG{n}{Javascript} \PYG{n}{functions}
\PYG{o}{*}\PYG{o}{/}
\PYG{n}{function} \PYG{n}{after\PYGZus{}standardInit}\PYG{p}{(}\PYG{p}{)} \PYG{p}{\PYGZob{}}
\PYG{n}{var} \PYG{n}{o} \PYG{o}{=} \PYG{n}{document}\PYG{o}{.}\PYG{n}{createElement}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{div}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{;}
\PYG{n}{o}\PYG{o}{.}\PYG{n}{className} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{watermark}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{;}
\PYG{n}{o}\PYG{o}{.}\PYG{n}{innerHTML} \PYG{o}{=} \PYG{n}{document}\PYG{o}{.}\PYG{n}{body}\PYG{o}{.}\PYG{n}{className}\PYG{p}{;}
\PYG{n}{document}\PYG{o}{.}\PYG{n}{body}\PYG{o}{.}\PYG{n}{appendChild}\PYG{p}{(}\PYG{n}{o}\PYG{p}{)}\PYG{p}{;}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example custom.js to add a watermark to the Web Access 3270 screen}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*} \PYG{p}{(}\PYG{n}{c}\PYG{p}{)}\PYG{n}{Copyright} \PYG{n}{SysperTec} \PYG{n}{Communication} \PYG{l+m+mi}{2012} \PYG{n}{All} \PYG{n}{Rights} \PYG{n}{Reserved}
\PYG{o}{*} \PYG{n}{VIRTEL} \PYG{n}{Web} \PYG{n}{Access} \PYG{n}{style} \PYG{n}{sheet} \PYG{k}{for} \PYG{n}{site} \PYG{n}{customisation}
\PYG{o}{*}\PYG{o}{/}
\PYG{o}{.}\PYG{n}{watermark} \PYG{p}{\PYGZob{}}
\PYG{n}{position}\PYG{p}{:} \PYG{n}{absolute}\PYG{p}{;}
\PYG{n}{pointer}\PYG{o}{\PYGZhy{}}\PYG{n}{events}\PYG{p}{:} \PYG{n}{none}\PYG{p}{;}
\PYG{n}{left}\PYG{p}{:} \PYG{l+m+mi}{150}\PYG{n}{px}\PYG{p}{;}
\PYG{n}{top}\PYG{p}{:} \PYG{l+m+mi}{100}\PYG{n}{px}\PYG{p}{;}
\PYG{n}{color}\PYG{p}{:} \PYG{n}{gray}\PYG{p}{;}
\PYG{n}{opacity}\PYG{p}{:} \PYG{l+m+mf}{0.25}\PYG{p}{;}
\PYG{n}{font}\PYG{o}{\PYGZhy{}}\PYG{n}{size}\PYG{p}{:} \PYG{l+m+mi}{10}\PYG{n}{em}\PYG{p}{;}
\PYG{n}{width}\PYG{p}{:} \PYG{l+m+mi}{60}\PYG{o}{\PYGZpc{}}\PYG{p}{;}
\PYG{n}{text}\PYG{o}{\PYGZhy{}}\PYG{n}{align}\PYG{p}{:} \PYG{n}{center}\PYG{p}{;}
\PYG{n}{z}\PYG{o}{\PYGZhy{}}\PYG{n}{index}\PYG{p}{:} \PYG{l+m+mi}{1000}\PYG{p}{;}
\PYG{o}{\PYGZhy{}}\PYG{n}{webkit}\PYG{o}{\PYGZhy{}}\PYG{n}{text}\PYG{o}{\PYGZhy{}}\PYG{n}{stroke}\PYG{p}{:} \PYG{l+m+mi}{1}\PYG{n}{px} \PYG{c+c1}{\PYGZsh{}FFF;}
\PYG{o}{\PYGZhy{}}\PYG{n}{webkit}\PYG{o}{\PYGZhy{}}\PYG{n}{text}\PYG{o}{\PYGZhy{}}\PYG{n}{fill}\PYG{o}{\PYGZhy{}}\PYG{n}{color}\PYG{p}{:} \PYG{n}{transparent}\PYG{p}{;}
\PYG{o}{\PYGZhy{}}\PYG{n}{webkit}\PYG{o}{\PYGZhy{}}\PYG{n}{transform}\PYG{p}{:} \PYG{n}{rotate}\PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{40}\PYG{n}{deg}\PYG{p}{)}\PYG{p}{;}
\PYG{o}{\PYGZhy{}}\PYG{n}{moz}\PYG{o}{\PYGZhy{}}\PYG{n}{transform}\PYG{p}{:} \PYG{n}{rotate}\PYG{p}{(}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{40}\PYG{n}{deg}\PYG{p}{)}\PYG{p}{;}
\PYG{n+nb}{filter}\PYG{p}{:} \PYG{n}{alpha}\PYG{p}{(}\PYG{n}{opacity}\PYG{o}{=}\PYG{l+m+mi}{25}\PYG{p}{)} \PYG{n}{progid}\PYG{p}{:}\PYG{n}{DXImageTransform}\PYG{o}{.}\PYG{n}{Microsoft}\PYG{o}{.}\PYG{n}{Matrix}\PYG{p}{(}\PYG{n}{M11}\PYG{o}{=}\PYG{l+m+mf}{0.819}\PYG{p}{,} \PYG{n}{M12}\PYG{o}{=}\PYG{l+m+mf}{0.574}\PYG{p}{,} \PYG{n}{M21}\PYG{o}{=}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{0.574}\PYG{p}{,} \PYG{n}{M22}\PYG{o}{=}\PYG{l+m+mf}{0.819}\PYG{p}{,} \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example custom.css to define the style of the watermark}

\sphinxAtStartPar
\sphinxincludegraphics{{image46}.png}
\sphinxstyleemphasis{Web Access screen with application name as watermark}

\index{Modifying Web Access Settings@\spxentry{Modifying Web Access Settings}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Modifying Web Access Settings@\spxentry{Modifying Web Access Settings}}\ignorespaces 

\subsection{Modifying Web Access Settings}
\label{\detokenize{User_Guide:modifying-web-access-settings}}\label{\detokenize{User_Guide:index-175}}
\sphinxAtStartPar
The exit modify\_settingsValues allows the administrator to modify or replace the list of values allowed for specific parameters in the VIRTEL Web Access Settings menu.
The example shown below replaces the list of fonts, and adds two extra values “20” and “24” to the list of font sizes:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*} \PYG{p}{(}\PYG{n}{c}\PYG{p}{)}\PYG{n}{Copyright} \PYG{n}{SysperTec} \PYG{n}{Communication} \PYG{l+m+mi}{2012} \PYG{n}{All} \PYG{n}{Rights} \PYG{n}{Reserved}
\PYG{o}{*} \PYG{n}{VIRTEL} \PYG{n}{Web} \PYG{n}{Access} \PYG{n}{customer}\PYG{o}{\PYGZhy{}}\PYG{n}{specific} \PYG{n}{Javascript} \PYG{n}{functions}
\PYG{o}{*}\PYG{o}{/}
\PYG{n}{function} \PYG{n}{modify\PYGZus{}settingsValues}\PYG{p}{(}\PYG{n}{name}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)} \PYG{p}{\PYGZob{}}
\PYG{k}{if} \PYG{p}{(}\PYG{n}{name} \PYG{o}{==} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{font}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{k}{return} \PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Courier New}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Lucida Console}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Consolas}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{;}
\PYG{k}{if} \PYG{p}{(}\PYG{n}{name} \PYG{o}{==} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{fontsize}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{k}{return} \PYG{n}{values}\PYG{o}{.}\PYG{n}{concat}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{20}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{24}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{;}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example custom.js to modify Settings values}

\newpage

\index{Site Customization \sphinxhyphen{} The Help Page@\spxentry{Site Customization \sphinxhyphen{} The Help Page}}\ignorespaces 

\section{Site Customization \sphinxhyphen{} The Help Page}
\label{\detokenize{User_Guide:site-customization-the-help-page}}\label{\detokenize{User_Guide:index-176}}
\sphinxAtStartPar
Users can obtain help on VIRTEL Web Access functions by clicking the help icon in the Web Access toolbar:

\sphinxAtStartPar
\sphinxincludegraphics{{image47}.png}

\sphinxAtStartPar
which causes the browser to display the page /w2h/custom\sphinxhyphen{}help/help.html delivered as standard with VIRTEL Web Access.
The administrator can create a custom version of the help.html page and upload it to a VIRTEL directory destined for
site\sphinxhyphen{}specific pages, such as CLI\sphinxhyphen{}DIR.

\index{Standard Help Page@\spxentry{Standard Help Page}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Standard Help Page@\spxentry{Standard Help Page}}\ignorespaces 

\subsection{Standard Help Page}
\label{\detokenize{User_Guide:standard-help-page}}\label{\detokenize{User_Guide:index-177}}
\sphinxAtStartPar
The standard help.html page is shown below:

\sphinxAtStartPar
\sphinxincludegraphics{{image48}.jpeg}
\sphinxstyleemphasis{Standard Virtel help page for Web Access}

\index{Installing a Custom Help Page@\spxentry{Installing a Custom Help Page}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Installing a Custom Help Page@\spxentry{Installing a Custom Help Page}}\ignorespaces 

\subsection{Installing a Custom Help Page}
\label{\detokenize{User_Guide:installing-a-custom-help-page}}\label{\detokenize{User_Guide:index-178}}
\sphinxAtStartPar
To install a customized help.html page, the administrator must perform the following operations:\sphinxhyphen{}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Upload the customized help.html file into a VIRTEL directory such as CLI\sphinxhyphen{}DIR

\item {} 
\sphinxAtStartPar
Modify the VIRTEL transactions CLI\sphinxhyphen{}03CH so that it points to the CLI\sphinxhyphen{}DIR directory (instead of W2H\sphinxhyphen{}DIR as initially installed), then press F1\sphinxhyphen{}F3\sphinxhyphen{}F3\sphinxhyphen{}F1 to update the transaction and the CLIWHOST entry point. Perform the same operation on transaction W2H\sphinxhyphen{}03CH and entry point WEB2HOST.

\end{itemize}

\newpage

\index{Copy, Cut and Paste@\spxentry{Copy, Cut and Paste}}\ignorespaces 

\section{Enable Copy, Cut And Paste}
\label{\detokenize{User_Guide:enable-copy-cut-and-paste}}\label{\detokenize{User_Guide:index-179}}
\sphinxAtStartPar
Copy, cut or paste operation are done using standard function key combinations CTRL + C, CTRL + X or CTRL + V or using a pop\sphinxhyphen{}up menu when using the right mouse button. These operations often require access to the clipboard, which, depending on the browser used, may require the installation of an additional module.

\index{Copy, cut and Paste@\spxentry{Copy, cut and Paste}!Internet Explorer@\spxentry{Internet Explorer}}\index{Internet Explorer@\spxentry{Internet Explorer}!Copy, cut and Paste@\spxentry{Copy, cut and Paste}}\ignorespaces 

\subsection{Internet Explorer}
\label{\detokenize{User_Guide:internet-explorer}}\label{\detokenize{User_Guide:index-180}}
\sphinxAtStartPar
For Internet Explorer, the usage of the clipboard is systematic for copy / cut / paste operation and does not require any additional module. From IE9 and above, depending on the value of “Tools | Internet options | Security tab | Custom level | Scroll to, Drag and drop or cut and paste files” you will be authorized \sphinxhyphen{} or not \sphinxhyphen{} to access the clipboard. If prompted, during the first attempt to use copy / cut / paste function the browser will display a window requesting confirmation to access the clipboard. Once the decision is communicated, it remains valid until closing the window with the domain.

\index{Copy, cut and Paste@\spxentry{Copy, cut and Paste}!Firefox@\spxentry{Firefox}}\index{Firefox@\spxentry{Firefox}!Copy, cut and Paste@\spxentry{Copy, cut and Paste}}\ignorespaces 

\subsection{Firefox}
\label{\detokenize{User_Guide:firefox}}\label{\detokenize{User_Guide:index-181}}
\sphinxAtStartPar
An ADDON is required to perform any copy / cut / paste operation with another application or with another internet
domain. The ADDON is available for download at the following address:

\sphinxAtStartPar
\sphinxurl{https://addons.mozilla.org/fr/firefox/addon/virtel-webaccess-add-on/}

\sphinxAtStartPar
If the browser version is compatible with the latest version of ADDON published click the “+ Add to Firefox” icon. Any
additional window will open to confirm the installation.

\sphinxAtStartPar
\sphinxincludegraphics{{image49}.jpeg}

\sphinxAtStartPar
If the browser version is too old to be supported by the latest version of ADDON published, the link “+ Add to Firefox”
will not be available. Click on the link “View full history version” at the bottom of the page as shown below.

\sphinxAtStartPar
\sphinxincludegraphics{{image50}.jpeg}

\sphinxAtStartPar
On the next page, select the ADDON version of the most compatible version available for the browser in use. Click “+
Add to Firefox”. Several versions of the ADDON can be installed in parallel, however, only one must be active at any
given time.


\subsubsection{Additional Installation requirements}
\label{\detokenize{User_Guide:additional-installation-requirements}}
\sphinxAtStartPar
Once the additional module has been installed, it will be necessary to specify the permissions.

\sphinxAtStartPar
On the toolbar, click on the “Menu” in the upper right (1) icon, then click on “Modules” (2). If this section does not
appear directly in the tool window, click on “Customise” (3) tool to add “Modules” in the menu. It is also possible to
directly access the extension manager by typing “about: addons” in the URL bar of the browser.

\sphinxAtStartPar
\sphinxincludegraphics{{image52}.png}

\sphinxAtStartPar
On the ADDONS page, select “Extension” to display the VIRTEL extension. Click on the “Options” button to display a
setup screen similar to the one shown below.

\sphinxAtStartPar
\sphinxincludegraphics{{image53}.jpeg}

\sphinxAtStartPar
\sphinxincludegraphics{{image54}.jpeg}

\sphinxAtStartPar
The following options should be set
\begin{description}
\sphinxlineitem{Automatic update}\begin{itemize}
\item {} 
\sphinxAtStartPar
by default

\item {} 
\sphinxAtStartPar
enabled

\item {} 
\sphinxAtStartPar
off

\end{itemize}

\sphinxlineitem{Authorized domains:}
\sphinxAtStartPar
Contains a list of domains for which permission to access the clipboard is granted. Each domain is separated from the next with a comma. The * indicates that all values are valid for the corresponding criteria. All definitions should end with an asterisk character, for example, “\sphinxurl{http://www.mydomain.com/}” is not a valid definition because it does not end with *.

\end{description}

\sphinxAtStartPar
Example of definitions:\sphinxhyphen{}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxurl{http://www.mydomain.com/*} allow access to the clipboard for the domain. Typing  \sphinxurl{http://www.mydomain.com:8080/} will be denied access, the presence of a port number in the URL does not match the rule.

\item {} 
\sphinxAtStartPar
\sphinxurl{http://192.168.92.161:41001/*} allows URLs communicating on the 41001 port access to the clipboard for specified IP address. URLs using another port will be denied access.

\item {} 
\sphinxAtStartPar
\sphinxurl{http://192.168.92.161:*} allows URL communicating on any port to access the clipboard for specified IP address.

\end{itemize}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
All entries must ends with a wildchar (*) character. Only one wildchar character is allowed for each entry.
\end{sphinxadmonition}
\begin{description}
\sphinxlineitem{Show notifications:}
\sphinxAtStartPar
Display a POP\_UP window in the bottom right of the screen summarizing the result of last copy / paste operation.

\sphinxlineitem{Refresh preferences:}
\sphinxAtStartPar
Saves the last configuration changes.

\end{description}

\index{Copy, cut and Paste@\spxentry{Copy, cut and Paste}!Chrome@\spxentry{Chrome}}\index{Chrome@\spxentry{Chrome}!Copy, cut and Paste@\spxentry{Copy, cut and Paste}}\ignorespaces 

\subsection{Chrome}
\label{\detokenize{User_Guide:chrome}}\label{\detokenize{User_Guide:index-182}}
\sphinxAtStartPar
An extension is required for any copy / cut / paste operation with another application or with another internet
domain. The extension can be obtained on the Chrome WebStore at the following address:\sphinxhyphen{}

\sphinxAtStartPar
\sphinxurl{https://chrome.google.com/webstore/category/apps?hl=en-GB}

\sphinxAtStartPar
Enter “Virtel Extender WebAccess” in the search field and launch the search. The extension appears in the “Extensions” list.

\sphinxAtStartPar
\sphinxincludegraphics{{image51}.jpeg}

\sphinxAtStartPar
Click on the extension item and then, on the next page, click “Add to Chrome”.


\subsubsection{Additional installation requirements}
\label{\detokenize{User_Guide:id6}}
\sphinxAtStartPar
Once the extension has been installed, it will be necessary to specify the permissions.

\sphinxAtStartPar
Go to the Chrome extension manager by typing “chrome://extensions” in the URL bar of the browser. From the extensions page, Locate the VIRTEL extension. Verify that the extension is activated and then click on the “Options” link.

\sphinxAtStartPar
\sphinxincludegraphics{{image56}.png}

\sphinxAtStartPar
The following options should be set:

\sphinxAtStartPar
\sphinxincludegraphics{{image57}.png}

\sphinxAtStartPar
To view the log screen select “See Logs” from the Virtel Extension Options. The following log screen will be displayed.

\sphinxAtStartPar
\sphinxincludegraphics{{image58}.png}
\begin{description}
\sphinxlineitem{Allow copy / paste operation:}
\sphinxAtStartPar
Allows operations copy / cut / paste on the domains specified in the definitions parameter.
\begin{description}
\sphinxlineitem{For all domains:}
\sphinxAtStartPar
All domains are open for any copy / cut / paste operations.

\sphinxlineitem{For these domains only:}
\sphinxAtStartPar
Only the domains defined in a list are allowed. When multiple domains are required, the list must be defined with one line per domain reference.

\sphinxlineitem{Example of definitions:}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxhref{http://www.mydomain.com/*}{http://www.mydomain.com/*} allow access to the clipboard for the domain. Typing \sphinxurl{http://www.mydomain.com:8080/} will be denied access, the presence of a port number in the URL does not match the rule.

\item {} 
\sphinxAtStartPar
\sphinxurl{http://192.168.92.161:41001/*} allows URLs communicating on the 41001 port access to the clipboard for specified IP address. URLs using another port will be denied access.

\item {} 
\sphinxAtStartPar
\sphinxurl{http://192.168.92.161}:\sphinxstyleemphasis{/} allows URL communicating on any port to access the clipboard for specified IP address.

\end{itemize}

\end{description}

\end{description}

\sphinxAtStartPar
\sphinxstylestrong{IFrame support:}

\sphinxAtStartPar
Allows operation of copy / cut / paste operation when VIRTEL Web Access window is encapsulated in an IFrame.This
information is supplemented by a list of areas on which these operations are allowed. This list may be identical to
that defined in the previous section and, if required, may contain additional restrictions through a restrictive list.
When a restrictive list is specified, the relevant fields should appear in the previous list.

\sphinxAtStartPar
\sphinxstylestrong{Logging:}

\sphinxAtStartPar
Whenever a copy / cut / paste operation is attempted the domain involved can be saved to a list. This list is presented in the following form:
By default the system registers a historical log all operations. It is possible to restrict registration to only rejected
requests by checking the “Record only the gold failes Rejected requests” box. Managing the number of log entries
and setting a retention time is configurable via “Maximum entries in history” and “Delete history entries after”
settings.

\index{Copy, Cut and Paste@\spxentry{Copy, Cut and Paste}!Chrome Extension@\spxentry{Chrome Extension}}\index{Chrome Extension@\spxentry{Chrome Extension}!Copy, Cut and Paste@\spxentry{Copy, Cut and Paste}}\index{Host managed@\spxentry{Host managed}!Chrome Extension@\spxentry{Chrome Extension}}\index{Chrome Extension@\spxentry{Chrome Extension}!Host managed@\spxentry{Host managed}}\index{Chrome Extension@\spxentry{Chrome Extension}!waaoAddOnHost.js file@\spxentry{waaoAddOnHost.js file}}\index{waaoAddOnHost.js file@\spxentry{waaoAddOnHost.js file}!Chrome Extension@\spxentry{Chrome Extension}}\index{Chrome Extension@\spxentry{Chrome Extension}!w2hparm.js setting@\spxentry{w2hparm.js setting}}\index{w2hparm.js setting@\spxentry{w2hparm.js setting}!Chrome Extension@\spxentry{Chrome Extension}}\ignorespaces 

\subsection{Manage the settings on Host with chrome}
\label{\detokenize{User_Guide:manage-the-settings-on-host-with-chrome}}\label{\detokenize{User_Guide:index-183}}
\sphinxAtStartPar
Under certain conditions, it is possible to manage domain authorizations centrally by storing on the extension parameters on the host. Usually these parameters are managed by the user as described in the previous paragraph. The implementation of this method of extension management requires:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Virtel version V4.56 or later

\item {} 
\sphinxAtStartPar
Presence of Update \# 5503 or later

\item {} 
\sphinxAtStartPar
Use of the Virtel Chrome Extension Version 40.0 or later

\end{itemize}

\sphinxAtStartPar
To enable host management the “waaoAddOnHost” parameter must be set to “true” in the w2hparm.js file. If the “waaoAddOnHost” parameter is not present or set to anything other than true, the domain management of the permissions remains under control of the end user.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
 \PYG{n}{var} \PYG{n}{w2hparm} \PYG{o}{=} \PYG{p}{\PYGZob{}}
\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{waaoAddOnHost}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{n}{true}
\PYG{p}{\PYGZcb{}}\PYG{p}{;}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Set the waaoAddOnHost parameter to ‘true’ to manage Copy / Cut / Paste authorization from the Host.}

\sphinxAtStartPar
In addition to the parameter ‘waaoAddOnHost’ being set to “true”, a Javascript file named “waao\sphinxhyphen{}setting.js” maintains a list of parameters and permissions. This Javascript file must be uploaded into a directory that should then be referenced in the Virtel Entry Point by the transaction with an external name of “option” (lowercase).

\sphinxAtStartPar
\sphinxincludegraphics{{image55}.png}

\sphinxAtStartPar
The ‘option’ transactions can be installed using the ARBOLOAD member in the CNTL library, setting the parameter OPTION=YES. This will install the transactions CLI\sphinxhyphen{}03CO and W2H\sphinxhyphen{}03CO, setting the ‘option’ directory to point to the CLI\sphinxhyphen{}DIR through the internal pathname /option/.

\sphinxAtStartPar
An example of the waao\sphinxhyphen{}setting.js follows:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
function getDefaults() \PYGZob{}
    /*
    * This object contains the default settings for the Chrome Add\PYGZhy{}on options panel.
    *
    * If the add\PYGZhy{}on has no options saved (or if these default are enforced using \PYGZsq{}settings\PYGZus{}* then these values are used as the add\PYGZhy{}on configuration.
    */
    return \PYGZob{}
    /*
    * Allow the user to change these extension settings using the options page?
    * When false, the user can still see the options, but is cannot change them.
    *
    * Valid values : \PYGZob{}true,false\PYGZcb{}
    */
    settings\PYGZus{}locked : true,
    /*
    * Default options for the \PYGZdq{}Copy/Paste Settings\PYGZdq{} section of the options page
    */
    system\PYGZus{}copy\PYGZus{}paste: \PYGZob{}
        /*
        * Allow copy/paste operations in system clipboard?
        * Setting this to false will also disable copy/paste operations across iframes (\PYGZsq{}iframes\PYGZus{}*
        * Valid values : \PYGZob{}true,false\PYGZcb{}
        */
        allow : true,
        from\PYGZus{}all\PYGZus{}domains : false,
        allowed\PYGZus{}domains :
        [
        // \PYGZsq{}https://*\PYGZsq{},
        \PYGZsq{}http://192.168.170.46:41333/*\PYGZsq{}
        ]
        \PYGZcb{},
        /*
        * Default options for the \PYGZdq{}IFrames Support\PYGZdq{} section of the options page
        */
        iframes\PYGZus{}copy\PYGZus{}paste: \PYGZob{}
        allow : true,
        from\PYGZus{}system\PYGZus{}domains : false,
        allowed\PYGZus{}domains :
        [
        // \PYGZsq{}https://*\PYGZsq{},
        // \PYGZsq{}http://*\PYGZsq{},
        ]
    \PYGZcb{},
    /*
    * Default options for the \PYGZdq{}Logging\PYGZdq{} section of the options page
    */
    logs: \PYGZob{}
        /*
        * Enable logging of the copy/paste operations?
        *
        * Valid values : \PYGZob{}true,false\PYGZcb{}
        */
        allow : true,
        /*
        * Only record the copy/paste operations that failed or were rejected?
        *
        * Valid values : \PYGZob{}true,false\PYGZcb{}
        */
        only\PYGZus{}failures: false,
        /*
        * Limit the maximum number of entries to keep in the history log?
        * Please note that the log is only cleaned when a new entry is recorded.
        *
        * Valid values : \PYGZob{}true,false\PYGZcb{}
        */
        do\PYGZus{}limit\PYGZus{}count: true,
        /*
        * Maximum number of entries to keep in the history log.
        * When recording a new entry in the log, the oldest entry is discarded if this limit *
        * Only meaningful if \PYGZsq{}logs.do\PYGZus{}limit\PYGZus{}count\PYGZsq{} is true (not used otherwise).
        *
        * Valid values : any integer greater or equal than 1.
        */
        limit\PYGZus{}count: 25,
        /*
        * Limit the number of days that entries should be kept in the history log?
        * Please note that the log is only cleaned when a new entry is recorded.
        *
        * Valid values : \PYGZob{}true,false\PYGZcb{}
        */
        do\PYGZus{}limit\PYGZus{}days: false,
        /*
        * Maximum number of days that entries will be kept in the history log.
        * When recording a new entry in the log, any entry older than this threshold will be *
        * Only meaningful if \PYGZsq{}logs.do\PYGZus{}limit\PYGZus{}days\PYGZsq{} is true (not used otherwise).
        *
        * Valid values : any integer greater or equal than 1.
        */
        limit\PYGZus{}days: 7
        \PYGZcb{},
    \PYGZcb{};
\PYGZcb{}
\end{sphinxVerbatim}


\subsection{Using Extensions}
\label{\detokenize{User_Guide:using-extensions}}
\sphinxAtStartPar
Use the right mouse button to open a selection menu for copy / cut / paste operations. The operational status of this feature is displayed in an ICON in top right.

\sphinxAtStartPar
\sphinxincludegraphics[width=1.95686in,height=1.92531in]{{image59}.png}
\sphinxincludegraphics[width=1.95686in,height=1.92531in]{{image59a}.png}

\sphinxAtStartPar
\sphinxstyleemphasis{Green}: Indicates that the module is properly installed and that the URL is allowed. A leading “H” indicates that the settings are being controlled by the host.(Chrome only)*

\sphinxAtStartPar
\sphinxincludegraphics[width=1.95686in,height=1.93583in]{{image60}.png}

\sphinxAtStartPar
\sphinxstyleemphasis{Orange}: Indicates that the module is installed correctly but the URL is not defined as an authorized domain. A leading “H” indicates that the settings are managed by the host.(Chrome only)*

\sphinxAtStartPar
\sphinxincludegraphics[width=1.96740in,height=1.94635in]{{image61}.png}

\sphinxAtStartPar
\sphinxstyleemphasis{Red}:
\sphinxhyphen{} For Chrome, the expansion module is not installed or for Host maintained environments, the waao\sphinxhyphen{}setting.js has not be located (Chrome only).
\begin{quote}

\sphinxAtStartPar
Host related problems could be that:\sphinxhyphen{}
\begin{itemize}
\item {} 
\sphinxAtStartPar
The Virtel Entry Point does not include the ‘option’ transaction.

\item {} 
\sphinxAtStartPar
The “waao\sphinxhyphen{}setting.js” cannot be found in the directory defined in the ‘option’ transaction. In this case an error message will be displayed in the Virtel log.

\item {} 
\sphinxAtStartPar
The “waao\sphinxhyphen{}setting.js is invalid or corrupt. In this case an error message will be displayed in the Virtel log.

\end{itemize}
\end{quote}
\begin{itemize}
\item {} 
\sphinxAtStartPar
For Firefox, it may indicate that the field is not allowed, or that the navigation is done in private mode. If running in private mode, the function is supported from version 0.6.33.1 and above.*

\end{itemize}

\index{Copy, cut and Paste@\spxentry{Copy, cut and Paste}!Edge@\spxentry{Edge}}\index{Edge@\spxentry{Edge}!Copy, cut and Paste@\spxentry{Copy, cut and Paste}}\ignorespaces 

\subsection{Edge}
\label{\detokenize{User_Guide:edge}}\label{\detokenize{User_Guide:index-184}}
\sphinxAtStartPar
Virtel uses the browsers Clipboard API to support Copy, Cut and Paste operations.

\newpage

\index{Customizing Virtel@\spxentry{Customizing Virtel}}\ignorespaces 

\section{Virtel Customization Modes}
\label{\detokenize{User_Guide:virtel-customization-modes}}\label{\detokenize{User_Guide:v462ug-customizing-with-option}}\label{\detokenize{User_Guide:index-185}}
\index{Default mode@\spxentry{Default mode}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Default mode@\spxentry{Default mode}}\ignorespaces 
\sphinxAtStartPar
Virtel V4.62 uses the defaults as listed in Appendix A. Modification of these defaults can be implemented by modifying the w2hparm.js file. As delivered, there is a dummy ‘w2hparm.js’ in both the CLI\sphinxhyphen{}DIR and the W2H\sphinxhyphen{}DIR. Transactions W2H\sphinxhyphen{}03P and CLI\sphinxhyphen{}03P point to these respective w2hparm.js entries. The two modes of customization are known as “Option” mode and the delivered “default” mode . As delivered, Virtel V4.62 defaults to usng “default mode” as a customization mode. All w2hparm values are defaulted to those listed in the Appendix. Users are advised to implement their own customizations using “option mode”. To turn one “option mode” the following actions must be performed.

\index{Option Mode@\spxentry{Option Mode}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Option Mode@\spxentry{Option Mode}}\ignorespaces 

\subsection{Option mode}
\label{\detokenize{User_Guide:option-mode}}\label{\detokenize{User_Guide:index-187}}
\sphinxAtStartPar
This Option mode, which is the preferred default V4.62, uses a global\sphinxhyphen{}settings object. The object has an attribute “/option/pathname” value used to locate the directory where all the relevant customisation elements reside. The CLI\sphinxhyphen{}3CO transaction denotes the location of the directory. By default this is CLI\sphinxhyphen{}DIR. To use this mode the w2hparm.js file in the CLI\sphinxhyphen{}DIR must be modified to include the “global\sphinxhyphen{}settings” object. The following is an example to have a global customized environment for w2hparms, custom Java Script and CSS styling pages :\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{var} \PYG{n}{w2hparm} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{global\PYGZhy{}settings}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{p}{\PYGZob{}}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pathToW2hparm}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{../option/w2hparm.global.js}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pathToJsCustom}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{../option/custJS.global.js}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pathToCssCustom}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{../option/custCSS.global.css}\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
This attribute defines the “global” customised names using the following pattern:\sphinxhyphen{} “pathTo.key.id.type” where:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{key}     \PYG{o}{=} \PYG{n}{one} \PYG{n}{of} \PYG{n}{the} \PYG{n}{supported} \PYG{n}{key} \PYG{n}{values} \PYG{n}{prefixed} \PYG{k}{with} \PYG{n}{the} \PYG{n}{string} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pathTo}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{\PYGZhy{}} \PYG{n}{W2hparm}\PYG{p}{,} \PYG{n}{CssCustom}\PYG{p}{,} \PYG{n}{JSCustom}\PYG{p}{,} \PYG{n}{PrintCss} \PYG{o+ow}{or} \PYG{n}{Help}
\PYG{n+nb}{id}      \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{global}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o+ow}{or} \PYG{n}{a} \PYG{n}{transaction} \PYG{n}{option} \PYG{n}{identifier}
\PYG{n+nb}{type}    \PYG{o}{=} \PYG{n}{css}\PYG{p}{,} \PYG{n}{html} \PYG{o+ow}{or} \PYG{n}{js} \PYG{p}{(}\PYG{n}{The} \PYG{n}{customized} \PYG{n+nb}{type}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxAtStartPar
The supported “pathToxxxxx” attribute keys are used to select the file values where the customised elements should be located. Note the customized elements are located through the /option/ pathname. Customized elements currently supported are:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{pathToCssCustom}     \PYG{n}{Custom} \PYG{n}{CSS} \PYG{n}{files}\PYG{o}{.}
\PYG{n}{pathToJsCustom}      \PYG{n}{Custom} \PYG{n}{Javascript} \PYG{n}{files}
\PYG{n}{pathToW2hparm}       \PYG{n}{Custom} \PYG{n}{w2hparm} \PYG{n}{parameters}
\PYG{n}{pathToPrintCss}      \PYG{n}{Custom} \PYG{n+nb}{print} \PYG{n}{style} \PYG{n}{CSS}
\PYG{n}{pathToHelp}          \PYG{n}{Custom} \PYG{n}{Help} \PYG{n}{pages}
\end{sphinxVerbatim}

\sphinxAtStartPar
The attribute key names are “case sensitive” \sphinxhyphen{} pathToW2Hparm would be incorrect, it should be pathToW2hparm.

\sphinxAtStartPar
To activate the “option” mode perform the following actions:\sphinxhyphen{}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Create and upload to the CLI\sphinxhyphen{}DIR a w2hparm.js that includes the global\sphinxhyphen{}settings option. Include the relevant keynames within the global option settings you wish to modify.

\item {} 
\sphinxAtStartPar
Create the customized “pathTo” files as defined in the “Global\sphinxhyphen{}settings” object (Javascript, CSS, help, parm) and upload those to the CLI directory.

\end{itemize}

\sphinxAtStartPar
See the next section, “Global level modifications”, for an example of how to implement global changes under the ‘Option mode’ customization.


\subsection{Default Mode}
\label{\detokenize{User_Guide:default-mode}}
\sphinxAtStartPar
As delivered, the default options used are listed in Appendix A. There is a dummy w2hparm.js delivered in CLI\sphinxhyphen{}DIR and W2H\sphinxhyphen{}DIR and this should be used set customized options.

\index{Global level modifications@\spxentry{Global level modifications}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Global level modifications@\spxentry{Global level modifications}}\ignorespaces 

\subsection{Global level modifications (All transactions under one Entry Point)}
\label{\detokenize{User_Guide:global-level-modifications-all-transactions-under-one-entry-point}}\label{\detokenize{User_Guide:index-188}}
\sphinxAtStartPar
As an example, to support a global modified w2hparm and a modified toolbar for transactions running under the CLIWHOST entry point the following actions would be required.

\sphinxAtStartPar
For the “Enter” key requirment, update the default w2hparm.js to include a global setting for pathToW2hparm. The w2hparm.js should be uploaded to the CLI\sphinxhyphen{}DIR directory or another directory other than W2H\sphinxhyphen{}DIR. The transaction CLI\sphinxhyphen{}03P application field will also have to be updated to point to the correct directory for the modified w2hparm.js. Normally CLI\sphinxhyphen{}DIR:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{var} \PYG{n}{w2hparm} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{global\PYGZhy{}settings}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{p}{\PYGZob{}}
         \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pathToW2hparm}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{../option/w2hparm.global.js}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
         \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pathToJsCustom}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{../option/custJS.global.js}\PYG{l+s+s2}{\PYGZdq{}}
    \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Create the file w2hparm.global.js file and define the required changes. Upload this file to CLI\sphinxhyphen{}DIR. For example to modify the keyboard Enter key:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    \PYG{o}{/}\PYG{o}{/}\PYG{n}{CLI}\PYG{o}{\PYGZhy{}}\PYG{n}{DIR} \PYG{o}{\PYGZhy{}} \PYG{n}{w2hparm}\PYG{o}{.}\PYG{k}{global}\PYG{o}{.}\PYG{n}{js}
    \PYG{o}{/}\PYG{o}{*}
     \PYG{o}{*} \PYG{n}{Override} \PYG{n}{default} \PYG{n}{w2hparm} \PYG{n}{values}\PYG{o}{.} \PYG{n}{Change} \PYG{n}{Enter} \PYG{n}{key} \PYG{n}{to} \PYG{n}{equal} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Enter}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{.} \PYG{n}{Default} \PYG{o}{=} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Newline}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{key}\PYG{o}{.}
    \PYG{o}{*}\PYG{o}{/}

\PYG{n}{w2hparm}\PYG{o}{.}\PYG{n}{enter}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ENTER}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{;}
\end{sphinxVerbatim}

\sphinxAtStartPar
Create the file custJS.global.js file and define the required changes. Upload this file to CLI\sphinxhyphen{}DIR. For example to modify the toolbar:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{/}\PYG{n}{CLI}\PYG{o}{\PYGZhy{}}\PYG{n}{DIR} \PYG{o}{\PYGZhy{}} \PYG{n}{custJS}\PYG{o}{.}\PYG{k}{global}\PYG{o}{.}\PYG{n}{js}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{Add} \PYG{n}{Print} \PYG{n}{Button} \PYG{n}{To} \PYG{n}{Toolbar}
 \PYG{n}{function} \PYG{n}{after\PYGZus{}standardInit}\PYG{p}{(}\PYG{p}{)} \PYG{p}{\PYGZob{}}
     \PYG{n}{addtoolbarbutton}\PYG{p}{(}\PYG{l+m+mi}{000}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{../print.ico}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Print Screen}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{n}{do\PYGZus{}print}\PYG{p}{)}\PYG{p}{;}
 \PYG{p}{\PYGZcb{}}

 \PYG{n}{function} \PYG{n}{do\PYGZus{}print}\PYG{p}{(}\PYG{p}{)} \PYG{p}{\PYGZob{}}
   \PYG{n}{window}\PYG{o}{.}\PYG{n}{print}\PYG{p}{(}\PYG{p}{)}\PYG{p}{;}
 \PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
The print.ico should also be uploaded to the CLI\sphinxhyphen{}DIR directory.
\end{sphinxadmonition}

\sphinxAtStartPar
This has the effect of changing the tool bar for all transactions which is not what is required. The transactions under WEB2HOST will require their option fields to be set to “compatibility” to ensure that the default toolbar is shown.

\sphinxAtStartPar
\sphinxincludegraphics{{image98}.png}

\index{Transaction level modifications@\spxentry{Transaction level modifications}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Transaction level modifications@\spxentry{Transaction level modifications}}\ignorespaces 

\subsection{Transaction level modifications (Individual transactions)}
\label{\detokenize{User_Guide:transaction-level-modifications-individual-transactions}}\label{\detokenize{User_Guide:index-189}}
\sphinxAtStartPar
If only certain transactions should have the modified tool bar then set a unique option identifier for those transactions. The “option” identifier will be used to associate customized elements against specific transaction(s). In this example the value “myOptions” has been chosen as an identifier. A transaction level “core option file”, using the format “option.identifier.js”, will be used to locate customized elements. Using the option identifier “myOptions” the file will be called option.myOptions.js. It should be created and uploaded to CLI\sphinxhyphen{}DIR. The customized settings are held in a Javascript variable named oCustom.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{/}\PYG{n}{CLI}\PYG{o}{\PYGZhy{}}\PYG{n}{DIR} \PYG{o}{\PYGZhy{}} \PYG{n}{option}\PYG{o}{.}\PYG{n}{myOptions}\PYG{o}{.}\PYG{n}{js}\PYG{o}{.} \PYG{n}{Transaction} \PYG{n}{level} \PYG{n}{core} \PYG{n}{option} \PYG{n}{file}
\PYG{n}{var} \PYG{n}{oCustom}\PYG{o}{=}\PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pathToJsCustom}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{../option/custJS.myOptions.js}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
A file called custJS.myOptions.js is created which will contain the toolbar modification code:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{/}\PYG{n}{CLI}\PYG{o}{\PYGZhy{}}\PYG{n}{DIR} \PYG{o}{\PYGZhy{}} \PYG{n}{custJS}\PYG{o}{.}\PYG{n}{myOptions}\PYG{o}{.}\PYG{n}{js}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{Add} \PYG{n}{Print} \PYG{n}{Button} \PYG{n}{To} \PYG{n}{Toolbar}
\PYG{n}{function} \PYG{n}{after\PYGZus{}standardInit}\PYG{p}{(}\PYG{p}{)} \PYG{p}{\PYGZob{}}
    \PYG{n}{addtoolbarbutton}\PYG{p}{(}\PYG{l+m+mi}{000}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{../print.ico}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Print Screen}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{n}{do\PYGZus{}print}\PYG{p}{)}\PYG{p}{;}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Using “option” mode In the above examples all transactions will be subjected to parm changes defined in the file w2hparm.global.js. Transactions which have the option id set to “myOptions” will have any customized changes located through the core option file “option.myOption.js”. These will override any “global” settings. The following files are created and copied to CLI\sphinxhyphen{}DIR:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{option}\PYG{o}{.}\PYG{n}{myOptions}\PYG{o}{.}\PYG{n}{js}  \PYG{o}{\PYGZhy{}} \PYG{n}{core} \PYG{n}{option} \PYG{n}{file} \PYG{k}{for} \PYG{n}{identifier} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{myOptions}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{custjJS}\PYG{o}{.}\PYG{n}{myOptions}\PYG{o}{.}\PYG{n}{js} \PYG{o}{\PYGZhy{}} \PYG{n}{customized} \PYG{n}{java} \PYG{n}{script} \PYG{n}{file} \PYG{k}{for} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{myOptions}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{.}
\PYG{n}{w2hparm}\PYG{o}{.}\PYG{n}{js}           \PYG{o}{\PYGZhy{}} \PYG{n}{contains} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{global\PYGZhy{}settings}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{attribute}\PYG{o}{.}
\PYG{n}{w2hparm}\PYG{o}{.}\PYG{k}{global}\PYG{o}{.}\PYG{n}{js}    \PYG{o}{\PYGZhy{}} \PYG{k}{global} \PYG{n}{settings}
\end{sphinxVerbatim}

\sphinxAtStartPar
Files defined in the core option files “option.id.js” with the keys pathTo{[}key{]} are copied to the CLI\sphinxhyphen{}DIR. They will be located through the /option/ pathname. The values associated the the keys pathTo{[}key{]} can be any file name and not necessarily the names used in the examples. The /option/ path is always required. For example:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{/}\PYG{n}{CLI}\PYG{o}{\PYGZhy{}}\PYG{n}{DIR} \PYG{o}{\PYGZhy{}} \PYG{n}{option}\PYG{o}{.}\PYG{n}{myTest}\PYG{o}{.}\PYG{n}{js}\PYG{o}{.} \PYG{n}{Transaction} \PYG{n}{level} \PYG{n}{option} \PYG{n}{settings}
\PYG{n}{var} \PYG{n}{oCustom}\PYG{o}{=}\PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pathToW2hparm}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{../option/my\PYGZus{}parms.js}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\index{Compatibility Option id@\spxentry{Compatibility Option id}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Compatibility Option id@\spxentry{Compatibility Option id}}\ignorespaces 

\subsection{Compatibility Option id}
\label{\detokenize{User_Guide:compatibility-option-id}}\label{\detokenize{User_Guide:index-190}}
\sphinxAtStartPar
For compatibility the transaction option field can be defined with the special identifier “compatibility”. This indicates that the “compatibility” mode of operation should be used to search for customized elements. For example custom.css would be located through the transaction XXX\sphinxhyphen{}03CJ.

\index{Defining Transaction options@\spxentry{Defining Transaction options}!Customization@\spxentry{Customization}}\index{Customization@\spxentry{Customization}!Defining Transaction options@\spxentry{Defining Transaction options}}\ignorespaces 

\subsection{Defining Transaction Options}
\label{\detokenize{User_Guide:defining-transaction-options}}\label{\detokenize{User_Guide:index-191}}
\sphinxAtStartPar
Using the HTML transaction display a user can click on the “Spanner” ICON to help in setting up the option files. This include the core option file and the relevant Javascript and CSS files.

\sphinxAtStartPar
\sphinxincludegraphics{{image94}.png}
\sphinxstyleemphasis{Transaction display with the option spanner ICON}

\sphinxAtStartPar
On clicking the “spanner” icon a tabbed “Option” panel will be displayed. A pre\sphinxhyphen{}allocated core option environment, based upon the “option” field value, will be built. Two tabbed options are available, “BASIC” and “ADVANCED”:\sphinxhyphen{}

\sphinxAtStartPar
\sphinxincludegraphics{{image92}.png}
\sphinxstyleemphasis{Defining core option file}


\subsubsection{Basic Mode}
\label{\detokenize{User_Guide:basic-mode}}
\sphinxAtStartPar
Within the Basic mode of operation, the Validate button will create a core option file and upload it to the CLI\sphinxhyphen{}DIR directory. Within this file, Javascript and CSS settings keys, if selected, will point to the customisation files as defined by the “option” field. In the example below the Javascript and CSS customization files have been selected. This will effectively create a core option file \sphinxstyleemphasis{option.myOptions.js} which will be loaded upto the CLI\_DIR. Within this core option file the key elements pathToJsCustom and pathtoCssCustom will be generated. These will point to files /option/custJS.myOptions.js and /option/custCSS.myOptions.css.

\sphinxAtStartPar
\sphinxincludegraphics{{image93}.png}
\sphinxstyleemphasis{Basic Mode Operation}

\sphinxAtStartPar
The generated core option file option.myOptions.js will look like thsi:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{/} \PYG{n}{customization} \PYG{k}{for} \PYG{n}{option}\PYG{o}{=}\PYG{n}{myOptions}
\PYG{n}{var} \PYG{n}{oCustom}\PYG{o}{=}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pathToCssCustom}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{../option/custCSS.myOptions.css}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{pathToJsCustom}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{../option/custJS.myOptions.js}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
This can be modified to add other custom elements such as PrintCSS, Parm or Help.


\subsubsection{Advanced Mode}
\label{\detokenize{User_Guide:advanced-mode}}
\sphinxAtStartPar
By selecting the Advanced mode tab the core option file can be downloaded in preparation for further modification.

\sphinxAtStartPar
\sphinxincludegraphics{{image95}.png}
\sphinxstyleemphasis{Advanced Mode Operation}

\newpage

\index{Macros@\spxentry{Macros}}\ignorespaces 

\section{Macros}
\label{\detokenize{User_Guide:macros}}\label{\detokenize{User_Guide:index-192}}
\sphinxAtStartPar
In the world of the 3270 emulation, the term of “Macro” brings together two separate concepts. The first one designates the recording of a sequence of repetitive actions that the user wishes to automate such as for example a signon process, the second designates a complex dialogue between the terminal and an application running on the mainframe side. This second category often requires the usage of a programming language to develop an executable module that operates from the workstation in partnership with the 3270 emulator.

\sphinxAtStartPar
This section discusses the answer to the first concept, the second one is discussed in the section {\hyperref[\detokenize{User_Guide:v462ug-virtel-scenarios}]{\sphinxcrossref{\DUrole{std,std-ref}{“Web Modernisation VIRTEL Scenarios”}}}}.

\sphinxAtStartPar
The macro interface is accessed from the Virtel toolbar. By pressing the REC button on the VIRTEL Web Access toolbar, the user can start recording a sequence of keystrokes. A second click on the REC button terminates the recording and allows the user to assign a name to the macro which has been recorded. The PLAY button on the toolbar allows the user to display a list of macros already recorded. From here a sub\sphinxhyphen{}menu can be displayed where macros can be replayed, edited, saved or deleted.
macro.

\sphinxAtStartPar
\sphinxincludegraphics[scale=0.7]{{image63a}.png}

\sphinxAtStartPar
\sphinxstyleemphasis{Play and Record buttons}

\index{Storing the macros@\spxentry{Storing the macros}!Macros@\spxentry{Macros}}\index{Macros@\spxentry{Macros}!Storing the macros@\spxentry{Storing the macros}}\ignorespaces 

\subsection{Storing the Macros}
\label{\detokenize{User_Guide:storing-the-macros}}\label{\detokenize{User_Guide:index-193}}
\sphinxAtStartPar
Depending on the version of VIRTEL, the macros can be saved in:
\begin{itemize}
\item {} 
\sphinxAtStartPar
the Browser Local Storage (V4.53 and later),

\item {} 
\sphinxAtStartPar
on the workstation or network hard disk in a .json file,(V4.53 and later)

\item {} 
\sphinxAtStartPar
into a VSAM file on the host site (VIRTEL Storage) (V4.54 and later) using the DDI interface.

\end{itemize}

\index{macros.json file@\spxentry{macros.json file}!Macros@\spxentry{Macros}}\index{Macros@\spxentry{Macros}!macros.json file@\spxentry{macros.json file}}\ignorespaces 
\sphinxAtStartPar
Macros are stored as a JavaScript array of JSON objects in a file called macros.json. For example:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{macros}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{p}{[}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SDSF}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{rev}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{2}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{def}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{move(435)}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ENTER}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{txt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{=M}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ErEof}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ENTER}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{txt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{6}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ENTER}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{\PYGZcb{}}\PYG{p}{]}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{desc}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{user macros}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{fmt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{user}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SPTHOLT}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\index{local Storage@\spxentry{local Storage}!Macros@\spxentry{Macros}}\index{Macros@\spxentry{Macros}!local Storage@\spxentry{local Storage}}\ignorespaces 

\subsection{Macros in Local Storage}
\label{\detokenize{User_Guide:macros-in-local-storage}}\label{\detokenize{User_Guide:index-195}}
\sphinxAtStartPar
By default macros created by the user are saved on the workstation in the “Browsers Local Storage”.

\sphinxAtStartPar
Because the browsers Local Storage isn’t persistent storage macros can be easily destroyed by actions at the browser level. For this reason it is possible to export the Local Storage data of the user macros to a file on a hard drive. Conversely, the saved macros can be re\sphinxhyphen{}imported back into Local Storage. Import and Export feature are available in the pop\sphinxhyphen{}up windows opened using the PLAY button on the toolbar.

\sphinxAtStartPar
The recorded macros display has a small context window which can be opened with a right\sphinxhyphen{}click. This menu provides the following functions:\sphinxhyphen{}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Delete

\item {} 
\sphinxAtStartPar
Save as

\item {} 
\sphinxAtStartPar
Edit

\item {} 
\sphinxAtStartPar
Run

\end{itemize}

\sphinxAtStartPar
\sphinxincludegraphics[scale=0.5]{{image63b}.png}

\sphinxAtStartPar
\sphinxstyleemphasis{Macro Sub\_Menu Functions}

\index{Key mapping controls@\spxentry{Key mapping controls}!Macros@\spxentry{Macros}}\index{Macros@\spxentry{Macros}!Key mapping controls@\spxentry{Key mapping controls}}\index{keymapping@\spxentry{keymapping}!W2HParm Settings@\spxentry{W2HParm Settings}}\index{W2HParm Settings@\spxentry{W2HParm Settings}!keymapping@\spxentry{keymapping}}\index{keepmacpad@\spxentry{keepmacpad}!W2HParm Settings@\spxentry{W2HParm Settings}}\index{W2HParm Settings@\spxentry{W2HParm Settings}!keepmacpad@\spxentry{keepmacpad}}\index{macroPad@\spxentry{macroPad}!W2HParm Settings@\spxentry{W2HParm Settings}}\index{W2HParm Settings@\spxentry{W2HParm Settings}!macroPad@\spxentry{macroPad}}\ignorespaces 

\subsection{Macro controls}
\label{\detokenize{User_Guide:macro-controls}}\label{\detokenize{User_Guide:index-196}}
\sphinxAtStartPar
Virtel provides several options which can control the display and functionality of the macro logic. The features are enabled or disabled through w2hparm settings. The features are:\sphinxhyphen{}


\subsubsection{Key Mapping}
\label{\detokenize{User_Guide:key-mapping}}
\sphinxAtStartPar
Boolean setting to indicate whether keymapping is supported. When set to “true”, a hot key combination can be allocated to the macro. The default is false. When saving the macro you have the option of assigning a “hot key” or shortcut to the macro through keyboard mapping. Keyboard mapping can be a combination of ALT or CTRL keys and another keyboard key (F1 thru F12, A thru to Z, 1 thru 9). Beware that some keyboard combinations may be reserved for the operating system or Virtel functions. For example, CTRL\sphinxhyphen{}R is a browser refresh option. Allocating this combination as a hotkey will only invoke the browser refresh option and not the Virtel macro. Keyboard mapping is a feature that is turned on through a parameter in the w2hparm.js file.
By default, keyboard mapping is set to false.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{w2hparm}\PYG{o}{.}\PYG{n}{keymapping}\PYG{o}{=}\PYG{n}{true}\PYG{o}{|}\PYG{n}{false}
\end{sphinxVerbatim}

\sphinxAtStartPar
With keyboard mapping enabled the macro interface will display the associated key mapping against the macro.

\sphinxAtStartPar
\sphinxincludegraphics{{image96}.png}

\sphinxAtStartPar
\sphinxstyleemphasis{Editing macro with keymapping}


\subsubsection{Keep\_Macro\_Pad}
\label{\detokenize{User_Guide:keep-macro-pad}}
\sphinxAtStartPar
Boolean setting to indicate whether to maintain the macro interface open or to close it as soon as a macro has been executed.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{w2hparm}\PYG{o}{.}\PYG{n}{keepmacpad} \PYG{n}{true}\PYG{o}{|}\PYG{n}{false}
\end{sphinxVerbatim}


\subsubsection{Macro\_Pad}
\label{\detokenize{User_Guide:macro-pad}}
\sphinxAtStartPar
Boolean to indicate whether the macro interface should be presented as a sub\sphinxhyphen{}window in the VWA window, or as a separate window.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{w2hparm}\PYG{o}{.}\PYG{n}{macroPad} \PYG{n}{true}\PYG{o}{|}\PYG{n}{false}
\end{sphinxVerbatim}

\index{Using DDI to store macros@\spxentry{Using DDI to store macros}!Macros@\spxentry{Macros}}\index{Macros@\spxentry{Macros}!Using DDI to store macros@\spxentry{Using DDI to store macros}}\index{Using Virtel storage for macros@\spxentry{Using Virtel storage for macros}!Macros@\spxentry{Macros}}\index{Macros@\spxentry{Macros}!Using Virtel storage for macros@\spxentry{Using Virtel storage for macros}}\ignorespaces 

\subsection{Macros in VIRTEL Storage}
\label{\detokenize{User_Guide:macros-in-virtel-storage}}\label{\detokenize{User_Guide:index-197}}
\sphinxAtStartPar
The “VirtelMacros” function allows GLOBAL, GROUP, and USER macros to be stored under the name “macro.json” in a VSAM file on the VIRTEL host system. This feature uses the dynamic directory interface(DDI) capability of Virtel to store macros in a central repository, in this case a VSAM file on the mainframe. With this centralised environment macros can be managed, thereby keeping control of critical business logic. Macros will be automatically downloaded and refreshed on a users workstation depending on the options set in the w2hparm settings. Each DDi directory maintains a separate copy of the macros.json file.

\sphinxAtStartPar
The DDI and administration features of Virtel should only be made available to an “Administrator”. In Virtel an “Administrator” would be a user who has READ access to all the Virtel security profiles, in particular those starting VIRTEL.*. See the section “Security” in the Virtel Installation Guide for details on setting up Virtel Administrators and protecting resources. The following transactions and related security profiles are used by DDI.

\sphinxAtStartPar
For the minimal authorization to access the DDI, a user must be granted to access the VIRTEL transaction defined under WEB2HOST entry point with the external name. The following transactions are implemented as part of the Virtel macros feature

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{virtel}\PYG{o}{.}\PYG{n}{xxx}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{03}\PYG{n}{z}

\PYG{n}{where} \PYG{n}{xxx} \PYG{o}{=} \PYG{n}{W2H} \PYG{o+ow}{or} \PYG{n}{CLI}\PYG{p}{,} \PYG{n}{z} \PYG{o}{=} \PYG{n}{G} \PYG{k}{for} \PYG{n}{GROUP}\PYG{p}{,} \PYG{n}{U} \PYG{k}{for} \PYG{n}{USER} \PYG{o+ow}{and} \PYG{n}{A} \PYG{k}{for} \PYG{n}{GLOBAL}\PYG{o}{.}

\PYG{n}{virtel}\PYG{o}{.}\PYG{n}{W2H}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{07}            \PYG{n}{DDI} \PYG{n}{Interface}                  \PYG{n}{W2H} \PYG{n}{only}
\PYG{n}{virtel}\PYG{o}{.}\PYG{n}{W2H}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{66}            \PYG{n}{Upload} \PYG{n}{capability} \PYG{n}{token}\PYG{o}{.}       \PYG{n}{W2H} \PYG{n}{only}
\PYG{n}{virtel}\PYG{o}{.}\PYG{n}{xxx}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{80}\PYG{n}{z}           \PYG{n}{Directory} \PYG{n}{upload}               \PYG{n}{W2H} \PYG{o+ow}{and} \PYG{n}{CLI}
\PYG{n}{virtel}\PYG{o}{.}\PYG{n}{USR}\PYG{o}{\PYGZhy{}}\PYG{n}{DIR}           \PYG{n}{User} \PYG{n}{directory}                 \PYG{n}{W2H} \PYG{o+ow}{and} \PYG{n}{CLI}
\PYG{n}{virtel}\PYG{o}{.}\PYG{n}{GRP}\PYG{o}{\PYGZhy{}}\PYG{n}{DIR}           \PYG{n}{Group} \PYG{n}{directory}                \PYG{n}{W2H} \PYG{o+ow}{and} \PYG{n}{CLI}
\PYG{n}{virtel}\PYG{o}{.}\PYG{n}{GLB}\PYG{o}{\PYGZhy{}}\PYG{n}{DIR}           \PYG{n}{Global} \PYG{n}{directory}               \PYG{n}{W2H} \PYG{o+ow}{and} \PYG{n}{CLI}
\end{sphinxVerbatim}


\subsection{Setting up to use DDI and macros}
\label{\detokenize{User_Guide:setting-up-to-use-ddi-and-macros}}
\sphinxAtStartPar
Run the SAMPLIB/CNTL ARBOLOAD job with the “SET VMACROS=YES” parameter coded. This defines the VirtelMacros functions and transactions required by DDI and macro suport. If this setup is not run the following message will appear when DDI is selected from the main Admin. portal page:\sphinxhyphen{}

\sphinxAtStartPar
\sphinxstyleemphasis{“Your Virtel is not configured for dynamic directories”}

\sphinxAtStartPar
Assuming everything has been configured correctly, the following display should be appear when selecting the DDI option from the main portal interface.

\sphinxAtStartPar
\sphinxincludegraphics{{image97}.png}

\sphinxAtStartPar
\sphinxstyleemphasis{The Main DDI Page}

\sphinxAtStartPar
Depending on the security setup a User or Administrator can have access to macros stored in one of the following centralized DDI directories:\sphinxhyphen{}
\begin{itemize}
\item {} 
\sphinxAtStartPar
a dedicated directory labeled with his userid \sphinxhyphen{} USR\sphinxhyphen{}DIR

\item {} 
\sphinxAtStartPar
a group directory labeled with his groupid \sphinxhyphen{} GRP\sphinxhyphen{}DIR

\item {} 
\sphinxAtStartPar
a global directory which can be accessed by all users \sphinxhyphen{}Global DIR.

\end{itemize}

\sphinxAtStartPar
A User can only manage the macros stored in their dedicated user directory whereas Virtel Administrators have access to all directories and can manage macros stored in USER, GROUP and GLOBAL directories.

\sphinxAtStartPar
Multiple macros.json files can be defined: a global file containing shared macros for all users, and group and user files where macros specific to a group or to a user are stored.

\sphinxAtStartPar
User macros created by each user are stored in macros.json files loaded into the USR\sphinxhyphen{}DIR directory with keyword \%USER\%. When the macros are loaded into or read from this directory, VIRTEL substitutes the keyword \%USER\% with the users security userid.

\sphinxAtStartPar
Group macros are defined for a specific group name recognized by the security subsystem (RACF, TOPS, ACF2). They are stored in a macros.json file loaded into the GRP\sphinxhyphen{}DIR directory with keyword \%GROUP\%. At execution time, VIRTEL substitutes the keyword \%GROUP\% by the name of the group supplied by the security subsystem. Group macros are avaialble to users who belong to the group.

\sphinxAtStartPar
Global macros accessible to all users are stored in the macros.json file loaded into the GLB\sphinxhyphen{}DIR directory.

\sphinxAtStartPar
A prerequisite for using group and user macros is that the user must sign on to VIRTEL with a userid and password, either by accessing VIRTEL via a secure transaction (one whose “Security” field is non\sphinxhyphen{}zero), or by executing a SET\$ SIGNON instruction contained in a scenario.

\index{Read Only Mode@\spxentry{Read Only Mode}!Virtel@\spxentry{Virtel}}\index{Virtel@\spxentry{Virtel}!Read Only Mode@\spxentry{Read Only Mode}}\index{Sysplex distributor@\spxentry{Sysplex distributor}!Virtel@\spxentry{Virtel}}\index{Virtel@\spxentry{Virtel}!Sysplex distributor@\spxentry{Sysplex distributor}}\index{VSAMTYP=READONLY@\spxentry{VSAMTYP=READONLY}!TCT@\spxentry{TCT}}\index{TCT@\spxentry{TCT}!VSAMTYP=READONLY@\spxentry{VSAMTYP=READONLY}}\ignorespaces 
\sphinxAtStartPar
In a Sysplex distributed environment, the VSAM files that contains the macros, normally the HTML TRSF file, cannot be shared between multiple instances of the VIRTEL STC. Each VIRTEL must have its own HTML VSAM macro file if administration is to be performed on the “running” system. For production environments where multiple instances share the same VSAM files (SAMP,HTML,ARBO) and run in a “READ ONLY” environment enforced through the use of the TCT parameter VSAMTYP=READONLY, DDI management will not be possible. This an incompatible environment for DDI macro management as macros cannot be updated. A solution to this is to have an “update” window where “READ ONLY” is turn off while macro maintenance is performed. Once checked out, the “READ ONLY” environment can be re\sphinxhyphen{}initialized. New macros will then be available to users. In a “READ ONLY” environment users will not be able to maintain any user environment as they will not have “write” access to the HTML.TRSF VSAM file.


\subsubsection{Enabeling macros in Virtel Storage}
\label{\detokenize{User_Guide:enabeling-macros-in-virtel-storage}}
\index{useVirtelMacros@\spxentry{useVirtelMacros}!W2HParm Settings@\spxentry{W2HParm Settings}}\index{W2HParm Settings@\spxentry{W2HParm Settings}!useVirtelMacros@\spxentry{useVirtelMacros}}\index{macrosAutoRefresh@\spxentry{macrosAutoRefresh}!W2HParm Settings@\spxentry{W2HParm Settings}}\index{W2HParm Settings@\spxentry{W2HParm Settings}!macrosAutoRefresh@\spxentry{macrosAutoRefresh}}\ignorespaces 
\sphinxAtStartPar
When VIRTEL is first installed, no macros.json files exist. To allow macros to be stored and loaded from the host site, the administrator activates the VirtelMacros function by
adding the code shown below to a customised w2hparm parm file. This parameter file should reside in the CLI\sphinxhyphen{}DIR directory (or another option site\sphinxhyphen{}defined directory). See {\hyperref[\detokenize{User_Guide:v462ug-customizing-with-option}]{\sphinxcrossref{\DUrole{std,std-ref}{“Customisation Modes”}}}} for further details on how to customise and configure Virtel.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{w2hparm}\PYG{o}{.}\PYG{n}{useVirtelMacros} \PYG{o}{=} \PYG{p}{\PYGZob{}}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{macrosAutoRefresh}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{value}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{p}{\PYGZcb{}}\PYG{p}{;}
\end{sphinxVerbatim}

\sphinxAtStartPar
Where value can be:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
“never” | “once” | “daily” | “session”
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
“never”    DDI is on. Macros will not be automatically refreshed. This is the default. User has to use the refresh button.

\item {} 
\sphinxAtStartPar
“once”     DDI is on. Macros will be refreshed automatically at the start of the session.

\item {} 
\sphinxAtStartPar
“daily”    DDI is on. Macros will be refreshed daily.

\item {} 
\sphinxAtStartPar
“session”  DDi is on. Macros will be refreshed at the start of each session.

\end{itemize}

\sphinxAtStartPar
Depending on the value will determine whether and when macros are downloaded from Virtel storage. A user can always initiate a download by pressing the Macros Icon on the toolbar.

\sphinxAtStartPar
Once VirtelMAcros have been activated each VIRTEL Web Access user has access to one or more macros.json files stored in:
\begin{itemize}
\item {} 
\sphinxAtStartPar
a dedicated directory labeled with his userid \sphinxhyphen{} USR\sphinxhyphen{}DIR

\item {} 
\sphinxAtStartPar
a group directory labeled with his groupid \sphinxhyphen{} GRP\sphinxhyphen{}DIR

\item {} 
\sphinxAtStartPar
a global directory which can be accessed by all users \sphinxhyphen{} Global DIR

\end{itemize}

\sphinxAtStartPar
A user can only manage the macros stored in his own directory. To be able to manage macros stored in Group or Gloabl directories requires that specific authorizations are defined within the security tool. If no file exists, a 404 error is produced, and no macros are listed in the macro window. Access to the DDI interface is through the Administration Portal. Ensure that Administrators have access to the relevant security profiles.

\index{synchronizing Macros@\spxentry{synchronizing Macros}!Macros@\spxentry{Macros}}\index{Macros@\spxentry{Macros}!synchronizing Macros@\spxentry{synchronizing Macros}}\ignorespaces 
\index{Macro synchronization@\spxentry{Macro synchronization}!Virtel@\spxentry{Virtel}}\index{Virtel@\spxentry{Virtel}!Macro synchronization@\spxentry{Macro synchronization}}\index{synchronizeVirtelMacros@\spxentry{synchronizeVirtelMacros}!W2HParm Settings@\spxentry{W2HParm Settings}}\index{W2HParm Settings@\spxentry{W2HParm Settings}!synchronizeVirtelMacros@\spxentry{synchronizeVirtelMacros}}\ignorespaces 

\subsection{User Macros synchronization}
\label{\detokenize{User_Guide:user-macros-synchronization}}\label{\detokenize{User_Guide:index-201}}
\sphinxAtStartPar
The sharing of macros across multiple instances of Virtel was introduced in Virtel 4.54. This feature is particularly useful where a user can connect to one of several instances of Virtel within in Sysplex Distributed environment zith separate HTML TRSF files. User macros are maintained in the browser’s cache and in the TRSF files through the \%USR\% directory entry defined in the ARBO file. Before the synchronization feature, if a user added or updated a macro and then reconnected to a different Virtel instance the macro entry maintained in the host TRSF wouldn’t reflect the latest updates held within the user’s browser cache, consequently any cache refresh would lose those updates.

\sphinxAtStartPar
With this feature a timestamp is used to synchronize macros between the browser’s cache and the supporting TRSF file. If the timestamp in the cache is later than the macro entry in the local TRSF file, the TRSF file will be updated. Conversely, if the macros in the local TRSF is later than the cache equivalent, then the macro will be reloaded in cache from the TRSF file. Any changes made will be refelcted back to the local TRSF file. If a subsequent logon is targeted to a different Virtel instance, and possibly a different TRSF, then the cache in the the browser will updated the local TRSF file as the timestamp in the browser for the macro will be later than the timestamp held in the TRSF file. Using this timestamp comparison ensures that the macros and synchronized between the users browser cache and the supporting TRSF file.

\sphinxAtStartPar
This feature is activated by setting the following w2hparm setting. This parameter file should be loaded into the CLI\sphinxhyphen{}DIR directory or a directory designated by the /Option/ pathname if “Option” mode customization is being used. The w2hparm modification must be activated as described in {\hyperref[\detokenize{User_Guide:v462ug-customizing-with-option}]{\sphinxcrossref{\DUrole{std,std-ref}{“Customising Modes”}}}}. Once this customization has been done, the macros will be automaticaly be synchonized across VIRTEL instances where each Virtel has its own HTML TRSF file.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{w2hparm}\PYG{o}{.}\PYG{n}{synchronizeVirtelMacros} \PYG{o}{=} \PYG{n}{true}\PYG{p}{;}
\end{sphinxVerbatim}

\index{Managing macros with DDI@\spxentry{Managing macros with DDI}!Macros@\spxentry{Macros}}\index{Macros@\spxentry{Macros}!Managing macros with DDI@\spxentry{Managing macros with DDI}}\index{macros.json file@\spxentry{macros.json file}!Macros@\spxentry{Macros}}\index{Macros@\spxentry{Macros}!macros.json file@\spxentry{macros.json file}}\index{Macros@\spxentry{Macros}!Dynamic Directories Interface@\spxentry{Dynamic Directories Interface}}\index{Dynamic Directories Interface@\spxentry{Dynamic Directories Interface}!Macros@\spxentry{Macros}}\ignorespaces 

\subsection{Managing macros with DDI}
\label{\detokenize{User_Guide:managing-macros-with-ddi}}\label{\detokenize{User_Guide:index-202}}
\sphinxAtStartPar
The normal practice for an administrator in managing the macro repository would be to capture and create a macro in their user directory, upload it to the mainframe repository using the DDI interface, modify it for general use, and then copy it to any group, user or global directory for general availability. The upload process is through a drag and drop operation within DDI interface. To copy a macros.json to another user or group requires downloading the macro first then dragging the file into the relevant DDI panel area designated by the dotted lines.

\begin{sphinxadmonition}{danger}{Danger:}
\sphinxAtStartPar
Do not use the Virtel Drag and Drop function to upload DDI macros. You must use the DDI upload interface!
\end{sphinxadmonition}

\index{Uploading macros with DDI@\spxentry{Uploading macros with DDI}!Macros@\spxentry{Macros}}\index{Macros@\spxentry{Macros}!Uploading macros with DDI@\spxentry{Uploading macros with DDI}}\ignorespaces 

\subsubsection{Uploading a macro.json file to the DDI directory}
\label{\detokenize{User_Guide:uploading-a-macro-json-file-to-the-ddi-directory}}\label{\detokenize{User_Guide:index-203}}
\sphinxAtStartPar
Open the DDI interface, select Global. The Global directory will open. Drag the macros.json file into the area designated by a series of dotted lines. This will initiate a file upload into the global directory of the macro repository:\sphinxhyphen{}

\sphinxAtStartPar
\sphinxincludegraphics{{image105}.png}

\sphinxAtStartPar
\sphinxstyleemphasis{The DDI Global Upload}

\sphinxAtStartPar
Once you have a copy in the global area, right click on the macros.json file to open a context menu. This menu provides some additional functions such as Copy, Download, Delete and Edit. For macros.json the copy function is not applicable.

\sphinxAtStartPar
\sphinxincludegraphics{{image106}.png}

\sphinxAtStartPar
\sphinxstyleemphasis{Additional file functions in DDI}

\sphinxAtStartPar
Selecting “Edit” will open the same editor interface that was used when editing macros in local storage. Here the Administrator can modify the macros held within the macros.json file. Macros can be saved with different names and associated with different key mappings. Options like Save As, Edit and Delete are available within a context menu when you right click on a macro.

\sphinxAtStartPar
\sphinxincludegraphics{{image107}.png}

\sphinxAtStartPar
\sphinxstyleemphasis{Updating macros with the Global Directory}


\subsubsection{Making macros available to users}
\label{\detokenize{User_Guide:making-macros-available-to-users}}
\sphinxAtStartPar
Any macro that an Administrator creates can be made available to users either at the Global, Group or Userid level. To make macros available at a userid level, select the User TAB from the DDI main panel. Enter the user’s USERID in the user name field and press the “Green Tick” icon. This will create an area within the DDI macro repository. Upload the macros.json file you wish to make available to this user by dragging the file into the area designated by the dotted lines. This will initiate an upload of the macro into the User’s userid area.

\sphinxAtStartPar
\sphinxincludegraphics{{image108}.png}

\sphinxAtStartPar
\sphinxstyleemphasis{Creating a macros.json file for a user}

\sphinxAtStartPar
As with any file within the DDI repository, a context menu can be brought up by right clicking on the macro file name.

\sphinxAtStartPar
\sphinxincludegraphics{{image109}.png}


\subsubsection{Editing a Users macro}
\label{\detokenize{User_Guide:editing-a-users-macro}}
\sphinxAtStartPar
An Administrator can update any macros held within the DDI repository. Changes will be reflected in the user’s local storage once the user open’s their macro display with the “Green” ICON arrow. The following display shows the DDI repository macros as displayed in the user’s browser. Remember that User macros are related to the User’s Userid and associated Group. This ability to associate macros to a Userid and Group means that all macros, related to business assets, can be managed and maintained in a central DDI repository. Maintenance can be applied centrally and distributed out to the User’s local storage browser. If allowed by the Administrator, Users will only have the option of modifying their own user macros. Any changes made by a user will be uploaded to the mainframe and stored in the User’s macro area within the DDI repository. This keeps the user macro modifications in sync with the DDI repository.

\sphinxAtStartPar
\sphinxincludegraphics{{image110}.png}

\sphinxAtStartPar
\sphinxstyleemphasis{User display of the DDI macro interface}

\index{Updating macros at the Group Level@\spxentry{Updating macros at the Group Level}!Macros@\spxentry{Macros}}\index{Macros@\spxentry{Macros}!Updating macros at the Group Level@\spxentry{Updating macros at the Group Level}}\ignorespaces 

\subsubsection{Updating DDI macros at the Group level}
\label{\detokenize{User_Guide:updating-ddi-macros-at-the-group-level}}\label{\detokenize{User_Guide:index-204}}
\sphinxAtStartPar
To make macros available at a Group level, select the Group TAB from the DDI main panel. Enter the Group name in the group name field and press the “Green Tick” icon. This will create an area within the DDI macro repository were macros for this group can be held. Upload the Group macros.json file you wish to make available to this group by dragging the file into the area designated by the dotted lines. This will initiate an upload of the Group macro.

\sphinxAtStartPar
\sphinxincludegraphics{{image111}.png}

\sphinxAtStartPar
\sphinxstyleemphasis{Macro Group Directory List}

\sphinxAtStartPar
To obtain the associated context menu right click on the file name \textendash{} macros.json. This will provide the additional functionality to Edit, Download or Delete the macro.


\subsubsection{Notes:}
\label{\detokenize{User_Guide:notes}}
\index{DDI Files@\spxentry{DDI Files}!Dynamic Directories Interface@\spxentry{Dynamic Directories Interface}}\index{Dynamic Directories Interface@\spxentry{Dynamic Directories Interface}!DDI Files@\spxentry{DDI Files}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{DDI files}

\sphinxAtStartPar
Macros are maintained in the macros.json file. Each macro mode, local or DDI (User, Group and Global) will maintain a separate macros.json file. Virtel’s DDI can also be used to store files other than the macros.json file. Things like corporate images, bespoke Javascript deployments etc. When copying files to DDI you must use the DDI drag and drop interface. Do not use the Administration drag and drop interface.

\sphinxAtStartPar
\sphinxstylestrong{Save As feature}

\sphinxAtStartPar
The “SAVE AS” function does not have the ability to re\sphinxhyphen{}assign key mapping. This can only be done through the macro editor. To clone a macro with a new key mapping perform the following operations:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Open macro “A”
Save as “B”
Open macro “B” in Editor.
Save with key board mapping.
\end{sphinxVerbatim}

\index{Refreshling local macros@\spxentry{Refreshling local macros}!Macros@\spxentry{Macros}}\index{Macros@\spxentry{Macros}!Refreshling local macros@\spxentry{Refreshling local macros}}\ignorespaces 

\subsection{Automatic refresh of macros in local storage}
\label{\detokenize{User_Guide:automatic-refresh-of-macros-in-local-storage}}\label{\detokenize{User_Guide:index-206}}
\sphinxAtStartPar
Updates to DDI macros held in local storage can only be updated once the user refreshes or redisplays the macros. This triggers the download from the mainframe. Macros are not “automatically” updated in the background due to the performance. If an Administrator updates a macro on the mainframe that update will only be available to the user when the user redisplays or refreshes his local storage by using the “Green” display ICON. This behaviour can be overridden by setting the “macrosAutoRefresh” value in w2hparm. For example, setting the value “daily” will update the local storage of the macros from the Virtel storage once a day. This will ensure that users have the latest copy of the macros.json files.

\index{Format of macros.json@\spxentry{Format of macros.json}!Macros@\spxentry{Macros}}\index{Macros@\spxentry{Macros}!Format of macros.json@\spxentry{Format of macros.json}}\ignorespaces 

\subsection{Format of the macros.json file}
\label{\detokenize{User_Guide:format-of-the-macros-json-file}}\label{\detokenize{User_Guide:index-207}}
\sphinxAtStartPar
Each macros.json file contains a set of macros as shown in the example below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{macros}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}
\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{def}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{PF3}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+m+mi}{61}\PYG{p}{,}\PYG{l+m+mi}{120}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ENTER}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+m+mi}{105}\PYG{p}{,}\PYG{l+m+mi}{115}\PYG{p}{,}\PYG{l+m+mi}{112}\PYG{p}{,}\PYG{l+m+mi}{102}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ENTER}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{l+m+mi}{46}\PYG{p}{,}\PYG{l+m+mi}{53}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ENTER}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{,}
\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{macro1}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{,}
\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{def}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{p}{[}\PYG{l+m+mi}{105}\PYG{p}{,}\PYG{l+m+mi}{115}\PYG{p}{,}\PYG{l+m+mi}{112}\PYG{p}{,}\PYG{l+m+mi}{102}\PYG{p}{,}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ENTER}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{,}
\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{macro2}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{]}\PYG{p}{,}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example of a macros.json file}

\sphinxAtStartPar
An empty file (containing no macros) contains only:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{macros}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{p}{[}\PYG{p}{]}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example of an empty macros.json file}

\index{Macro commands@\spxentry{Macro commands}!Macros@\spxentry{Macros}}\index{Macros@\spxentry{Macros}!Macro commands@\spxentry{Macro commands}}\ignorespaces 

\subsection{Available macro commands}
\label{\detokenize{User_Guide:available-macro-commands}}\label{\detokenize{User_Guide:v462ug-macro-commands}}\label{\detokenize{User_Guide:index-208}}
\sphinxAtStartPar
The following commands can be used in a macro file :

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZdq{}any string of characters to input into 3270 screen\PYGZdq{}
move(pos)
copy(startRow,startCol,endRow,endCol)
paste(pos)
paste(pos,nbRows,nbCols)
key(keyIdentifier)
List of available key identifiers (case sensitive!!):
\PYGZhy{} ENTER
\PYGZhy{} CLEAR
\PYGZhy{} ATTN
\PYGZhy{} PF[1\PYGZhy{}24]
\PYGZhy{} PA[1\PYGZhy{}3]
\PYGZhy{} InsToogle
\PYGZhy{} NewLine
\PYGZhy{} Home
\PYGZhy{} Tab
\PYGZhy{} Backtab
\PYGZhy{} Bksp
\PYGZhy{} Left
\PYGZhy{} Right
\PYGZhy{} Down
\PYGZhy{} Up
\PYGZhy{} End
\PYGZhy{} ErEof
\PYGZhy{} Del
\PYGZhy{} Reset
\PYGZhy{} FieldMark
\PYGZhy{} Dup
\end{sphinxVerbatim}

\index{DDI Macro Errors@\spxentry{DDI Macro Errors}}\index{DDI Macro Errors@\spxentry{DDI Macro Errors}!Macros@\spxentry{Macros}}\index{Macros@\spxentry{Macros}!DDI Macro Errors@\spxentry{DDI Macro Errors}}\ignorespaces 

\subsection{DDI Macro Errors}
\label{\detokenize{User_Guide:ddi-macro-errors}}\label{\detokenize{User_Guide:index-209}}
\sphinxAtStartPar
Error message : Failed to upload the user macros to Virtel (Status code 400 Bad Request). This message can appear when editing a macro. Virtel is unable to reflect your macro changes in the USR\sphinxhyphen{}DIR directory. This could be because:\sphinxhyphen{}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Virtel is running in a READ ONLY mode.

\item {} 
\sphinxAtStartPar
You do not have the authority to upload to the USR\sphinxhyphen{}DIR. See transaction xxx\sphinxhyphen{}80U.

\end{itemize}

\sphinxAtStartPar
If you get the following Error Panal when trying to execute a DDI macro it could be due to the fact thet the transaction you are running doesn’t have security set. Make sure the transaction is secure with “Security = basic”. DDI requires USERID and GROUP information. This can only be obtained with secure transactions.

\sphinxAtStartPar
\sphinxincludegraphics{{image119}.png}

\newpage

\index{Virtel Web Modernisation@\spxentry{Virtel Web Modernisation}}\ignorespaces 

\section{VIRTEL Web Modernisation}
\label{\detokenize{User_Guide:virtel-web-modernisation}}\label{\detokenize{User_Guide:v462ug-virtel-scenarios}}\label{\detokenize{User_Guide:index-210}}
\index{390 Object modules@\spxentry{390 Object modules}!Virtel Web Modernisation@\spxentry{Virtel Web Modernisation}}\index{Virtel Web Modernisation@\spxentry{Virtel Web Modernisation}!390 Object modules@\spxentry{390 Object modules}}\index{Virtel Studio@\spxentry{Virtel Studio}!Virtel Web Modernisation@\spxentry{Virtel Web Modernisation}}\index{Virtel Web Modernisation@\spxentry{Virtel Web Modernisation}!Virtel Studio@\spxentry{Virtel Studio}}\index{Scenarios@\spxentry{Scenarios}!Virtel Web Modernisation@\spxentry{Virtel Web Modernisation}}\index{Virtel Web Modernisation@\spxentry{Virtel Web Modernisation}!Scenarios@\spxentry{Scenarios}}\index{Presntation module@\spxentry{Presntation module}!Virtel Web Modernisation@\spxentry{Virtel Web Modernisation}}\index{Virtel Web Modernisation@\spxentry{Virtel Web Modernisation}!Presntation module@\spxentry{Presntation module}}\ignorespaces 

\subsection{VIRTEL Presentation modules and Scenarios}
\label{\detokenize{User_Guide:virtel-presentation-modules-and-scenarios}}\label{\detokenize{User_Guide:index-211}}
\sphinxAtStartPar
Without modifying existing applications, VIRTEL offers several possibilities for dynamic modification of 3270 data extracted by the \{\{\{GENERATE\sphinxhyphen{}HTML\}\}\} tag before it is presented in an HTML page. For instance, it is possible to define, for each field selected, a list of permitted values, or to generate a URL as a function of the value of a fixed field.

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
As opposed to the specific tags presented in the Virtel Web Access section, the set of presentation rules in Web Modernisation are not defined in an HTML page, but as an assembled program. The program can be stored as a .390 object module in the scenario directory SCE\sphinxhyphen{}DIR or as a linked module in the Virtel loadlib. The default for Virtel V4.62 is to maintain these .390 object modules in the SCE\sphinxhyphen{}DIR. VIRTEL scenarios were originally assembled and link\sphinxhyphen{}edited into a load library concatenated to the DFHRPL DD statement in the VIRTEL started task. From VIRTEL version 4.48 onwards, there is also the possibility of generating, syntax checking, and compiling scenarios using Virtel Studio on an Eclipse platform, and uploading the resulting executable code into a VIRTEL directory stored in a VSAM file. This is now the default for Virtel.
\end{sphinxadmonition}

\index{Scenarios@\spxentry{Scenarios}!Presentation modules@\spxentry{Presentation modules}}\index{Presentation modules@\spxentry{Presentation modules}!Scenarios@\spxentry{Scenarios}}\index{Scenario instructions@\spxentry{Scenario instructions}!Presentation modules@\spxentry{Presentation modules}}\index{Presentation modules@\spxentry{Presentation modules}!Scenario instructions@\spxentry{Scenario instructions}}\ignorespaces 
\sphinxAtStartPar
An HTML presentation module is made up of several scenarios composed of the following instructions: SCREENS, SCRNEND, SCENARIO, ACTION\$, CONVERT\$, COPY\$, DECLARE\$, ERROR\$, FIELD\$, GOTO\$, IF\$, MAP\$, SET\$, TOVAR\$, VIRSV\$ and END. These instructions are assembler macros contained in the VIRT462.SCRNAPI.MACLIB library (for MVS) or the VIRT462.VIRSAPI SUBLIB library (for VSE). The other instructions included in this library are for internal use and must not be used directly. Each module begins with a SCREENS instruction, is terminated by a SCRNEND instruction, and must contain at least one SCENARIO.

\sphinxAtStartPar
The types of scenarios that can be stored in a presentation module are:\sphinxhyphen{}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Identification scenario. Specified on the Entry Point definition. Processes inbound calls and cqn be used to route requests to other Entry points.

\item {} 
\sphinxAtStartPar
Initial scenario. Invoked during transaction connection.

\item {} 
\sphinxAtStartPar
Final scenario. Invoked during transaction disconnection.

\item {} 
\sphinxAtStartPar
Input scenario. Invoked to process inbound message data \sphinxhyphen{} from the browser.

\item {} 
\sphinxAtStartPar
Output scenario. Invoked to process outbound message data \sphinxhyphen{} to the browser.

\end{itemize}

\index{Load library@\spxentry{Load library}!Scenarios@\spxentry{Scenarios}}\index{Scenarios@\spxentry{Scenarios}!Load library@\spxentry{Load library}}\ignorespaces 

\subsection{Scenarios stored in a load library}
\label{\detokenize{User_Guide:scenarios-stored-in-a-load-library}}\label{\detokenize{User_Guide:index-213}}
\sphinxAtStartPar
After compilation, the resulting module must be placed in one of the libraries defined in the DFHRPL concatenation in the VIRTEL started task (for MVS), or in one of the libraries in the LIBDEF SEARCH statement (for VSE). Refer to member ASMSCEN in the VIRTEL SAMPLIB for an example job to assemble and link a presentation module in z/OS.

\sphinxAtStartPar
The F VIRTEL,NEW=scenario\sphinxhyphen{}name command (see VIRTEL Messages and Operations Guide) allows VIRTEL to take into account the new version of a scenario assembled and link\sphinxhyphen{}edited into a load library.

\index{VSAM Directory@\spxentry{VSAM Directory}!Scenarios@\spxentry{Scenarios}}\index{Scenarios@\spxentry{Scenarios}!VSAM Directory@\spxentry{VSAM Directory}}\ignorespaces 

\subsection{Scenarios stored in a VSAM directory}
\label{\detokenize{User_Guide:scenarios-stored-in-a-vsam-directory}}\label{\detokenize{User_Guide:index-214}}
\sphinxAtStartPar
If the “Directory for scenarios” field in the Entry Point is non\sphinxhyphen{}blank, VIRTEL will load scenarios from the specified directory instead of from the DFHRPL load library.
Scenarios in VSAM are ordinary VIRTEL files and their extension must be .390; they are normally assembled on a workstation and uploaded to the “Directory for scenarios” by means of Virtel Studio. If a new version of a scenario is uploaded in a VSAM directory, the new version will be used immediately whenever a new connection needs it; no VIRTEL command is necessary. If a terminal is already executing the old version of the scenario, it is not affected, and continues with a copy of the old version. If another scenario with the same name exists
in another directory, it is not modified by the upload.

\sphinxAtStartPar
\sphinxincludegraphics{{image112}.png}
\sphinxstyleemphasis{Entry Point display with SCE\sphinxhyphen{}DIR for scenarios}


\subsection{Using a presentation module}
\label{\detokenize{User_Guide:using-a-presentation-module}}
\sphinxAtStartPar
In order to be used, the name of the HTML presentation module must be specified in the “Initial Scenario”, “Final Scenario”, “Input Scenario” or “Output Scenario” field of the transaction supporting access to the application (see “Parameters of the transaction” in the VIRTEL Connectivity Reference manual), or in the “Identification scenario” field of the entry point (see “Parameters of the entry point” in the VIRTEL Connectivity Reference manual).


\subsection{Types of scenario}
\label{\detokenize{User_Guide:types-of-scenario}}
\sphinxAtStartPar
A presentation module can contain one of each of the following types of scenario:

\index{Scenarios@\spxentry{Scenarios}!Identification@\spxentry{Identification}}\index{Identification@\spxentry{Identification}!Scenarios@\spxentry{Scenarios}}\ignorespaces 

\subsubsection{Identification scenario}
\label{\detokenize{User_Guide:index-215}}\label{\detokenize{User_Guide:identification-scenario}}
\sphinxAtStartPar
An identification scenario is invoked when an inbound call is assigned to an entry point. Because an identification
scenario is executed before a transaction is selected and before connecting to a host application, the scenario may use
the SET\$ TRANSACTION instruction to select the transaction which specifies the host application (if any) to be used.
The identification scenario is required when the entry point specifies the name of this presentation module in its
“Identification scenario” field.

\index{Scenarios@\spxentry{Scenarios}!Initial@\spxentry{Initial}}\index{Initial@\spxentry{Initial}!Scenarios@\spxentry{Scenarios}}\ignorespaces 

\subsubsection{Initial scenario}
\label{\detokenize{User_Guide:initial-scenario}}\label{\detokenize{User_Guide:index-216}}
\sphinxAtStartPar
An initial scenario is invoked when an \&/S order is processed in a connection script (see “Connection / Disconnection
Scripts” in the VIRTEL Connectivity Reference manual). The initial scenario is required when the “TIOA at logon” field
of the transaction contains \&/S and the name of the presentation module is coded in the “Initial Scenario” field of the
transaction.

\index{Scenarios@\spxentry{Scenarios}!Final@\spxentry{Final}}\index{Final@\spxentry{Final}!Scenarios@\spxentry{Scenarios}}\ignorespaces 

\subsubsection{Final scenario}
\label{\detokenize{User_Guide:final-scenario}}\label{\detokenize{User_Guide:index-217}}
\sphinxAtStartPar
A final scenario is invoked when an \&/S order is processed in a disconnection script (see “Connection / Disconnection
Scripts” in the VIRTEL Connectivity Reference manual). The final scenario is required when the “TIOA at logoff” field of
the transaction contains \&/S and the name of the presentation module is coded in the “Final Scenario” field of the
transaction.

\index{Scenarios@\spxentry{Scenarios}!Input@\spxentry{Input}}\index{Input@\spxentry{Input}!Scenarios@\spxentry{Scenarios}}\ignorespaces 

\subsubsection{Input scenario}
\label{\detokenize{User_Guide:input-scenario}}\label{\detokenize{User_Guide:index-218}}
\sphinxAtStartPar
An input scenario is invoked once at the start of the session (on receipt of the first message from the application to the
terminal after the connection has been established with the host application), and again on receipt of each inbound
message (from the terminal to the application). The input scenario is required when the name of the presentation
module is coded in the “Input Scenario” field of the transaction.

\sphinxAtStartPar
When the input scenario is invoked on receipt of the first outbound message (from the application to the terminal),
the scenario may terminate with a CASE\$ FAIL or an IF\$ FAIL instruction. In this case, the outbound message is
discarded and the input scenario is invoked again on receipt on the next outbound message from the application. This
process continues until the input scenario terminates with a CASE\$ SUCCESS or IF\$ SUCCESS instruction, or reaches
SCENARIO END, after which the input scenario stops processing outbound messages and is subsequently invoked for
each inbound message.

\index{Scenarios@\spxentry{Scenarios}!Output@\spxentry{Output}}\index{Output@\spxentry{Output}!Scenarios@\spxentry{Scenarios}}\ignorespaces 

\subsubsection{Output scenario}
\label{\detokenize{User_Guide:output-scenario}}\label{\detokenize{User_Guide:index-219}}
\sphinxAtStartPar
An output scenario is invoked on receipt of each outbound message (sent from the application to the terminal). The
output scenario is required when the name of the presentation module is coded in the “Output Scenario” field of the
transaction.

\index{Virtel Studio@\spxentry{Virtel Studio}}\ignorespaces 

\subsubsection{Developing presentation modules with Virtel Studio}
\label{\detokenize{User_Guide:developing-presentation-modules-with-virtel-studio}}\label{\detokenize{User_Guide:index-220}}
\sphinxAtStartPar
Although presentation modules can be hard coded as an assembler routine and loaded into a Load library the recommended approach is to use the Eclipse Virtel Studio development aid. Virtel Studio is a Eclipse framework which runs on a PC. It enables a developer to assemble and upload presentation modules to a Virtel Server.

\sphinxAtStartPar
\sphinxincludegraphics{{image120}.png}

\sphinxAtStartPar
\sphinxstyleemphasis{Virtel Studio presentation IDE}

\sphinxAtStartPar
Virtel Studio assembles a VSC module and produces a .390 object deck. This is loaded upto the Virtel server. Virtel Studio only supports scenarios within a VSAM directory.

\index{Virtel Scenario language@\spxentry{Virtel Scenario language}!Scenarios@\spxentry{Scenarios}}\index{Scenarios@\spxentry{Scenarios}!Virtel Scenario language@\spxentry{Virtel Scenario language}}\ignorespaces 

\subsection{Virtel Scenario language}
\label{\detokenize{User_Guide:virtel-scenario-language}}\label{\detokenize{User_Guide:index-221}}
\index{SCENARIO@\spxentry{SCENARIO}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!SCENARIO@\spxentry{SCENARIO}}\ignorespaces 

\subsubsection{SCENARIO instructions}
\label{\detokenize{User_Guide:scenario-instructions}}\label{\detokenize{User_Guide:index-222}}
\sphinxAtStartPar
This instruction encloses ACTION\$, CONVERT\$, COPY\$, DECLARE\$, ERROR\$, FIELD\$, GOTO\$, IF\$, MAP\$, SET\$, TOVAR\$, and VIRSV\$ instructions.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{SCENARIO} \PYG{n}{value}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{value}
\sphinxAtStartPar
Determines the type of processing. The permitted values are:
\begin{quote}
\begin{description}
\sphinxlineitem{IDENTIFICATION}
\sphinxAtStartPar
Marks the start of the identification scenario.

\sphinxlineitem{INITIAL}
\sphinxAtStartPar
Marks the start of the initial scenario.

\sphinxlineitem{FINAL}
\sphinxAtStartPar
Marks the start of the final scenario.

\sphinxlineitem{INPUT}
\sphinxAtStartPar
Marks the start of the input scenario.

\sphinxlineitem{OUTPUT}
\sphinxAtStartPar
Marks the start of the output scenario.

\sphinxlineitem{END}
\sphinxAtStartPar
Marks the end of a scenario. In the case of an input or output scenario, the scenario is stopped, but will resume on receipt of the next input or output message.

\sphinxlineitem{DISCARD}
\sphinxAtStartPar
Marks the end of a scenario. In the case of an input or output scenario, the scenario stops, and does not resume for the remainder of the life of the VIRTEL transaction.

\sphinxlineitem{SUBROUTINE}
\sphinxAtStartPar
Marks the start of a subroutine scenario which must ends with a SCENARIO END instruction. A subroutine scenario is invoked using PERFORM\$ instruction. A subroutine scenario can invoke another subroutine scenario, and so on up to 3 levels. A sample of such type of scenario is available in the PREFORM\$ instruction description.

\sphinxlineitem{SUCCESS}
\sphinxAtStartPar
Stops scenario processing but continue normal VIRTEL processing of the current message.

\end{description}
\end{quote}

\end{description}

\index{SCREENS@\spxentry{SCREENS}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!SCREENS@\spxentry{SCREENS}}\ignorespaces 

\subsubsection{SCREENS instruction}
\label{\detokenize{User_Guide:screens-instruction}}\label{\detokenize{User_Guide:index-223}}
\sphinxAtStartPar
This instruction specifies the name of the presentation module and its execution mode. Each SCREENS instructions is
terminated by a SCRNEND instruction and may contain only SCENARIO or ERROR\$ instructions.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{modname} \PYG{n}{SCREENS} \PYG{n}{APPL}\PYG{o}{=}\PYG{n}{value1}\PYG{p}{,}\PYG{n}{EXEC}\PYG{o}{=}\PYG{n}{value2}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{modname}
\sphinxAtStartPar
Name of the presentation module (8 characters maximum). Under certain conditions, this value will allow calls to a script from a subsystem by way of a CALL command.

\sphinxlineitem{APPL}
\sphinxAtStartPar
Specifies the name of the target transaction when the presentation module is called by a program.

\sphinxlineitem{EXEC}
\sphinxAtStartPar
Determines the mode in which the script is used. The possible values are:
\begin{quote}
\begin{description}
\sphinxlineitem{YES}
\sphinxAtStartPar
The script may be called by a CALL from a subsystem with the possible passing of parameters

\sphinxlineitem{NO}
\sphinxAtStartPar
The script may not be externally called.

\end{description}
\end{quote}

\end{description}

\index{SCRNEND@\spxentry{SCRNEND}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!SCRNEND@\spxentry{SCRNEND}}\ignorespaces 

\subsubsection{SCRNEND instruction}
\label{\detokenize{User_Guide:scrnend-instruction}}\label{\detokenize{User_Guide:index-224}}
\sphinxAtStartPar
This instruction marks the end of a presentation module.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{SCRNEND}
\end{sphinxVerbatim}

\index{ACTION\$@\spxentry{ACTION\$}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!ACTION\$@\spxentry{ACTION\$}}\ignorespaces 

\subsubsection{ACTION\$ instruction}
\label{\detokenize{User_Guide:action-instruction}}\label{\detokenize{User_Guide:index-225}}
\sphinxAtStartPar
This instruction specifies actions to be taken.

\index{ACTION\$ DISCONNECT@\spxentry{ACTION\$ DISCONNECT}!ACTION\$@\spxentry{ACTION\$}}\index{ACTION\$@\spxentry{ACTION\$}!ACTION\$ DISCONNECT@\spxentry{ACTION\$ DISCONNECT}}\index{ACTION\$ DISCONNECT@\spxentry{ACTION\$ DISCONNECT}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!ACTION\$ DISCONNECT@\spxentry{ACTION\$ DISCONNECT}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{ACTION\$ DISCONNECT}

\sphinxAtStartPar
Terminate the application.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
ACTION\PYGZdl{} DISCONNECT
\end{sphinxVerbatim}

\index{ACTION\$ REFRESH\sphinxhyphen{}TERMINAL@\spxentry{ACTION\$ REFRESH\sphinxhyphen{}TERMINAL}!ACTION\$@\spxentry{ACTION\$}}\index{ACTION\$@\spxentry{ACTION\$}!ACTION\$ REFRESH\sphinxhyphen{}TERMINAL@\spxentry{ACTION\$ REFRESH\sphinxhyphen{}TERMINAL}}\index{ACTION\$ REFRESH\sphinxhyphen{}TERMINAL@\spxentry{ACTION\$ REFRESH\sphinxhyphen{}TERMINAL}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!ACTION\$ REFRESH\sphinxhyphen{}TERMINAL@\spxentry{ACTION\$ REFRESH\sphinxhyphen{}TERMINAL}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{ACTION\$ REFRESH\sphinxhyphen{}TERMINAL}

\sphinxAtStartPar
This instruction allows a scenario to trigger a 205 response to the Long Poll session.
This 205 response will then tell the JavaScript to refresh the terminal 3270 emulation screen, so that the user can see
whatever was changed by the scenario.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
ACTION\PYGZdl{} REFRESH\PYGZhy{}TERMINAL
\end{sphinxVerbatim}

\index{ACTION\$ SERVE\sphinxhyphen{}ANOTHER\_USER@\spxentry{ACTION\$ SERVE\sphinxhyphen{}ANOTHER\_USER}!ACTION\$@\spxentry{ACTION\$}}\index{ACTION\$@\spxentry{ACTION\$}!ACTION\$ SERVE\sphinxhyphen{}ANOTHER\_USER@\spxentry{ACTION\$ SERVE\sphinxhyphen{}ANOTHER\_USER}}\index{ACTION\$ SERVE\sphinxhyphen{}ANOTHER\_USER@\spxentry{ACTION\$ SERVE\sphinxhyphen{}ANOTHER\_USER}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!ACTION\$ SERVE\sphinxhyphen{}ANOTHER\_USER@\spxentry{ACTION\$ SERVE\sphinxhyphen{}ANOTHER\_USER}}\ignorespaces \phantomsection\label{\detokenize{User_Guide:v462ug-action-serve-another-users}}
\sphinxAtStartPar
\sphinxstylestrong{ACTION\$ SERVE\sphinxhyphen{}ANOTHER\sphinxhyphen{}USER}

\sphinxAtStartPar
Indicates that the transaction is now a service transaction (see {\hyperref[\detokenize{User_Guide:v462ug-service-transactions}]{\sphinxcrossref{\DUrole{std,std-ref}{“Service Transactions”}}}}).

\begin{sphinxVerbatim}[commandchars=\\\{\}]
ACTION\PYGZdl{} SERVE\PYGZhy{}ANOTHER\PYGZhy{}USER
\end{sphinxVerbatim}

\index{ACTION\$ TERMSESS@\spxentry{ACTION\$ TERMSESS}!ACTION\$@\spxentry{ACTION\$}}\index{ACTION\$@\spxentry{ACTION\$}!ACTION\$ TERMSESS@\spxentry{ACTION\$ TERMSESS}}\index{ACTION\$ TERMSESS@\spxentry{ACTION\$ TERMSESS}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!ACTION\$ TERMSESS@\spxentry{ACTION\$ TERMSESS}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{ACTION\$ TERMSESS}

\sphinxAtStartPar
Requests disconnection from the host application after the next message has been sent to the client’s browser.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
ACTION\PYGZdl{} TERMSESS
\end{sphinxVerbatim}

\index{ACTION\$ TO\sphinxhyphen{}APPLICATION@\spxentry{ACTION\$ TO\sphinxhyphen{}APPLICATION}!ACTION\$@\spxentry{ACTION\$}}\index{ACTION\$@\spxentry{ACTION\$}!ACTION\$ TO\sphinxhyphen{}APPLICATION@\spxentry{ACTION\$ TO\sphinxhyphen{}APPLICATION}}\index{ACTION\$ TO\sphinxhyphen{}APPLICATION@\spxentry{ACTION\$ TO\sphinxhyphen{}APPLICATION}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!ACTION\$ TO\sphinxhyphen{}APPLICATION@\spxentry{ACTION\$ TO\sphinxhyphen{}APPLICATION}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{ACTION\$ TO\sphinxhyphen{}APPLICATION}

\sphinxAtStartPar
Send a message to the application, consisting of the input fields in the screen image buffer and the function key
specified by pfkey.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
ACTION\PYGZdl{} TO\PYGZhy{}APPLICATION,KEY=pfkey,                     X
    AND=(WAIT|SCRIPT,\PYGZsq{}string\PYGZsq{}),                       X
    AND=(PROCESS\PYGZhy{}RESPONSE,\PYGZsq{}string\PYGZsq{}),                  X
    AND=(DO\PYGZhy{}NOT\PYGZhy{}PROCESS\PYGZhy{}RESPONSE),                    X
    MAXTIME=nnn,                                      X
    LASTMSG=YES,ASYNCH=YES
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{pfkey}
\sphinxAtStartPar
a 3270 AID key. The allowable values are:


\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TT}
\sphinxtoprule
\sphinxstyletheadfamily 
\sphinxAtStartPar
Value
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Description
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook
\sphinxAtStartPar
F1\sphinxhyphen{}F9
&
\sphinxAtStartPar
PF1 to PF9
\\
\sphinxhline
\sphinxAtStartPar
7A\sphinxhyphen{}7C
&
\sphinxAtStartPar
PF10 to PF12
\\
\sphinxhline
\sphinxAtStartPar
C1\sphinxhyphen{}C9
&
\sphinxAtStartPar
PF13 to PF21
\\
\sphinxhline
\sphinxAtStartPar
4A\sphinxhyphen{}4C
&
\sphinxAtStartPar
PF22 to PF24
\\
\sphinxhline
\sphinxAtStartPar
6C
&
\sphinxAtStartPar
PA1
\\
\sphinxhline
\sphinxAtStartPar
6E
&
\sphinxAtStartPar
PA2
\\
\sphinxhline
\sphinxAtStartPar
6B
&
\sphinxAtStartPar
PA3
\\
\sphinxhline
\sphinxAtStartPar
6D
&
\sphinxAtStartPar
Clear
\\
\sphinxhline
\sphinxAtStartPar
7D
&
\sphinxAtStartPar
Enter
\\
\sphinxhline
\sphinxAtStartPar
FD
&
\sphinxAtStartPar
Attn
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}

\sphinxlineitem{AND=(WAIT,’string’)}
\sphinxAtStartPar
(optional) after sending the message to the application, the scenario waits until the application sends a message containing the specified character string. Intervening messages are processed by VIRTEL but are not passed to the scenario or sent to the terminal.

\sphinxlineitem{AND=(SCRIPT,’string’)}
\sphinxAtStartPar
(optional) after sending the message to the application, VIRTEL executes the string as a Connection/Disconnection script. See “Connection/Disconnection Scripts” in the Virtel in the VIRTEL Connectivity Reference manual.

\sphinxlineitem{AND=(PROCESS\sphinxhyphen{}RESPONSE,’string’)}
\sphinxAtStartPar
(optional) allows an input scenario to explicitly request that control is to be returned when the next message is received from the application. The string is optional. If specified, after sending the message to the application, VIRTEL executes the string as a Connection/Disconnection script. See “Connection/Disconnection Scripts” in the VIRTEL Connectivity Reference manual.

\end{description}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
For an input scenario, AND=(PROCESS\sphinxhyphen{}RESPONSE) is the default value immediately after the connection.
\end{sphinxadmonition}
\begin{description}
\sphinxlineitem{AND=(DO\sphinxhyphen{}NOT\sphinxhyphen{}PROCESS\sphinxhyphen{}RESPONSE)}
\sphinxAtStartPar
(optional) allows an input scenario to explicitly state that is does not want to process the response from the application. After this instruction, the input scenario will not see any messages from the application, only input messages from the terminal.

\end{description}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
For an input scenario, AND=(DO\sphinxhyphen{}NOT\sphinxhyphen{}PROCESS\sphinxhyphen{}RESPONSE) is the default value once the connection stage is passed.
\end{sphinxadmonition}
\begin{description}
\sphinxlineitem{MAXTIME=nnn}
\sphinxAtStartPar
(optional) specifies the maximum time, in hundredths of a second, that the scenario will wait for a message from the application. When this time expires, the APPLICATION\sphinxhyphen{}TIMEOUT flag will be set (see {\hyperref[\detokenize{User_Guide:v462ug-if}]{\sphinxcrossref{\DUrole{std,std-ref}{“IF\$ instruction”}}}}) and the scenario will resume execution. If the MAXTIME parameter is not specified, then the scenario will wait indefinitely, or until VIRTEL disconnects the session when the timeout value of the entry point is exceeded.

\sphinxlineitem{LASTMSG=YES}
\sphinxAtStartPar
(optional) requests disconnection after the application responds to the pfkey sent.

\sphinxlineitem{ASYNCH=YES}
\sphinxAtStartPar
(optional) indicate that the sending of the message to the application is not to prevent the normal screen display.

\sphinxAtStartPar
When the ACTION\$ TO\sphinxhyphen{}APPLICATION instruction is executed in an output scenario, or in an input scenario before the first message has been delivered to the terminal, the specified function key is sent to the application and the scenario is suspended awaiting the next outbound message from the host application. When the next outbound message arrives, the scenario is resumed starting with the next instruction after the ACTION\$ TO\sphinxhyphen{}APPLICATION instruction. Subsequent outbound messages will cause the scenario to resume execution again at the instruction after the latest ACTION\$ TO\sphinxhyphen{}APPLICATION instruction until a SCENARIO END instruction is executed. After a SCENARIO END instruction is executed, subsequent outbound messages will once again cause the output scenario to resume at the beginning.

\sphinxAtStartPar
When the ACTION\$ TO\sphinxhyphen{}APPLICATION instruction is executed in an input scenario driven by an inbound message, the data in the inbound message is sent to the application together with the 3270 AID key specified in the KEY parameter. Subsequent inbound messages will cause the input scenario to resume execution again at the instruction after the ACTION\$ TO\sphinxhyphen{}APPLICATION instruction until a SCENARIO END instruction is executed. After a SCENARIO END instruction is executed, subsequent inbound messages will once again cause the input scenario to resume at the beginning.

\sphinxAtStartPar
To allow an input scenario to see the responses from the host application in addition to the input messages from the terminal, the ACTION\$ TO\sphinxhyphen{}APPLICATION instruction contains an AND= parameter which allows the scenario to explicitly request whether or not it expects to process the application response message following the ACTION\$ instruction.

\end{description}

\index{ACTION\$ TO\sphinxhyphen{}TERMINAL@\spxentry{ACTION\$ TO\sphinxhyphen{}TERMINAL}!ACTION\$@\spxentry{ACTION\$}}\index{ACTION\$@\spxentry{ACTION\$}!ACTION\$ TO\sphinxhyphen{}TERMINAL@\spxentry{ACTION\$ TO\sphinxhyphen{}TERMINAL}}\index{ACTION\$ TO\sphinxhyphen{}TERMINAL@\spxentry{ACTION\$ TO\sphinxhyphen{}TERMINAL}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!ACTION\$ TO\sphinxhyphen{}TERMINAL@\spxentry{ACTION\$ TO\sphinxhyphen{}TERMINAL}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{ACTION\$ TO\sphinxhyphen{}TERMINAL}

\sphinxAtStartPar
Send the current contents of the screen image buffer to the terminal.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
ACTION\PYGZdl{} TO\PYGZhy{}TERMINAL
\end{sphinxVerbatim}

\sphinxAtStartPar
When the ACTION\$ TO\sphinxhyphen{}TERMINAL instruction is executed in an input scenario, the contents of the screen image buffer
are sent to the terminal. The scenario may use instructions such as COPY\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}SCREEN to place data in the
screen image buffer before issuing the ACTION\$ TO\sphinxhyphen{}TERMINAL instruction.

\index{ACTION\$ Examples@\spxentry{ACTION\$ Examples}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!ACTION\$ Examples@\spxentry{ACTION\$ Examples}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{ACTION\$ Examples}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
ACTION\PYGZdl{} TO\PYGZhy{}APPLICATION,KEY=F3
\end{sphinxVerbatim}

\sphinxAtStartPar
Send F3 (PF3) to the application and wait for the next outbound message. When the application responds, continue with the next instruction in the scenario.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
ACTION\PYGZdl{} TO\PYGZhy{}APPLICATION,KEY=7D, *
AND=(WAIT,\PYGZsq{}Password ===\PYGZgt{}\PYGZsq{}),MAXTIME=100
\end{sphinxVerbatim}

\sphinxAtStartPar
Send ENTER to the application and wait for the application to send a message containing the string “Password ===\textgreater{}”. If the requested message does not arrive within 1 second, then set the APPLICATION\sphinxhyphen{}TIMEOUT flags and continue the scenario.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
ACTION\PYGZdl{} TO\PYGZhy{}APPLICATION,KEY=7D, *
AND=(SCRIPT, *
\PYGZsq{}Signon to CICS\PYGZam{}\PYGZam{}/W\PYGZam{}\PYGZam{}*F34BE9\PYGZam{}\PYGZam{}/A\PYGZam{}\PYGZam{}/T\PYGZsq{})
\end{sphinxVerbatim}

\sphinxAtStartPar
Send ENTER to the application before sending two tab key followed by a message containing the string “Test”.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
ACTION\PYGZdl{} TO\PYGZhy{}APPLICATION,KEY=7D, *
AND=(SCRIPT,\PYGZsq{}\PYGZam{}\PYGZam{}\PYGZgt{}\PYGZam{}\PYGZam{}\PYGZgt{}Test\PYGZam{}\PYGZam{}/T\PYGZsq{})
\end{sphinxVerbatim}

\sphinxAtStartPar
Send ENTER to the application, wait for the application to send a message containing the string “Signon to CICS”, then send F3 to the application, and send the screen image to the terminal. Note: the ampersands are doubled to conform with assembler syntax requirements.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
ACTION\PYGZdl{} TO\PYGZhy{}APPLICATION,KEY=6D,LASTMSG=YES,ASYNCH=YES
\end{sphinxVerbatim}

\sphinxAtStartPar
Exit from the scenario (equivalent to IF\$ … SUCCESS), display the screen as normal, send 6D (CLEAR) to the application, and when the application responds, disconnect.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
ACTION\PYGZdl{} TO\PYGZhy{}APPLICATION,KEY=7D, *
AND=(PROCESS\PYGZhy{}RESPONSE)
\end{sphinxVerbatim}

\sphinxAtStartPar
The input scenario will resume at the next instruction when the next message is received from the host application.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
ACTION\PYGZdl{} TO\PYGZhy{}APPLICATION,KEY=7D, *
AND=(DO\PYGZhy{}NOT\PYGZhy{}PROCESS\PYGZhy{}RESPONSE)
\end{sphinxVerbatim}

\sphinxAtStartPar
The input scenario will not be called again for messages received from the host application. It will only be called for
input messages.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
ACTION\PYGZdl{} TO\PYGZhy{}APPLICATION,KEY=7D, *
AND=(PROCESS\PYGZhy{}RESPONSE,\PYGZsq{}\PYGZam{}\PYGZam{}*F34BE9\PYGZam{}\PYGZam{}/A\PYGZsq{})
\end{sphinxVerbatim}

\sphinxAtStartPar
This is the same as for PROCESS\sphinxhyphen{}RESPONSE but with execution of a script in addition. Note: the ampersands are
doubled to conform withinh assembler syntax requirements.

\index{CASE\$@\spxentry{CASE\$}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!CASE\$@\spxentry{CASE\$}}\ignorespaces 

\subsubsection{CASE\$ instruction}
\label{\detokenize{User_Guide:case-instruction}}\label{\detokenize{User_Guide:index-233}}
\sphinxAtStartPar
This instruction tests a value in a 3270 screen position, or a value in a VIRTEL variable, and directs the subsequent
processing flow according to the value.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
[CASE\PYGZdl{} (row,col,len), | CASE\PYGZdl{} \PYGZsq{}varname\PYGZsq{}, | CASE\PYGZdl{} CURRENT\PYGZhy{}SCREEN\PYGZhy{}POSITION,]

   LTRIM=(\PYGZsq{}string1\PYGZsq{},\PYGZsq{}string2\PYGZsq{},...),
   RTRIM=(\PYGZsq{}string1\PYGZsq{},\PYGZsq{}string2\PYGZsq{},...),
   (EMPTY,process0),
   (condition,\PYGZsq{}value\PYGZsq{},process1),
   (condition,\PYGZsq{}*varname1\PYGZsq{},process2),
   (condition,STRING,\PYGZsq{}value\PYGZsq{},process3),
   (condition,VARIABLE,\PYGZsq{}varname1\PYGZsq{},process4),
 ...
 ELSE=processx
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{(row,col,len)}
\sphinxAtStartPar
Specifies the row, column, and length of the 3270 screen data (see Note 1).

\sphinxlineitem{varname}
\sphinxAtStartPar
Specifies the name of a VIRTEL variable (must be placed in quotes)

\sphinxlineitem{CURRENT\sphinxhyphen{}SCREEN\sphinxhyphen{}POSITION}
\sphinxAtStartPar
The tested variable is located at the current screen position as set or incremented by {\hyperref[\detokenize{User_Guide:v462ug-set-screen-position}]{\sphinxcrossref{\DUrole{std,std-ref}{“SET\$ SCREEN\sphinxhyphen{}POSITION”}}}}.

\sphinxlineitem{LTRIM}
\sphinxAtStartPar
(optional) Removes a set of characters from the start of a list variable (see Note) before copying it).
\begin{quote}
\begin{description}
\sphinxlineitem{‘string1’ {[},’string2’, …{]}}
\sphinxAtStartPar
one or more strings of text to be removed from the start of the variable.

\end{description}
\end{quote}

\sphinxlineitem{RTRIM}
\sphinxAtStartPar
(optional) Removes a set of characters from the end of a list variable (see Note) before copying it.
\begin{quote}
\begin{description}
\sphinxlineitem{‘string1’ {[},’string2’, …{]}}
\sphinxAtStartPar
one or more strings of text to be removed from the end of the variable.

\end{description}
\end{quote}

\sphinxlineitem{EMPTY}
\sphinxAtStartPar
Specifies whether the tested is empty (see Note 2).

\sphinxlineitem{condition}
\sphinxAtStartPar
Specifies whether the data tested must be equal (EQ), not equal (NE), prefixed by (BEGIN), less than (LT), less than or equal (LE), greater than (GT), greater than or equal (GE), or must contain (CONTAINS) the specified value.

\sphinxlineitem{value}
\sphinxAtStartPar
Specifies the value against which the data is tested (must be placed in quotes)

\sphinxlineitem{process1,2,…}
\sphinxAtStartPar
Specifies the address of the branch exit of the script if the condition is satisfied. Permitted values are:
\begin{quote}
\begin{description}
\sphinxlineitem{label}
\sphinxAtStartPar
instruction label at which execution of the scenario is to continue.

\sphinxlineitem{FAIL}
\sphinxAtStartPar
reserved word indicating that the scenario is to be terminated and the current message is to be discarded. The scenario will be called again on receipt of the next outbound message from the application.

\sphinxlineitem{SUCCESS}
\sphinxAtStartPar
reserved word indicating that the scenario is to be terminated and the current message is to be presented to the user. This is equivalent to branching to a SCENARIO END instruction.

\end{description}
\end{quote}

\sphinxlineitem{processx}
\sphinxAtStartPar
Specifies the address of the branch exit of the script if none of the conditions is satisfied. Permitted values are identical to process1.

\end{description}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
Note 1: For row, col and len, a value of ‘=’ means the value of the current row col or len as set by {\hyperref[\detokenize{User_Guide:v462ug-set-screen-position}]{\sphinxcrossref{\DUrole{std,std-ref}{“SET\$ SCREEN\sphinxhyphen{}POSITION”}}}}.

\sphinxAtStartPar
Note 2: If the variable being tested does not exist, it is not considered empty and the CASE\$ branches at the ELSE=label.

\sphinxAtStartPar
Note 3: Any number of (condition,’value’,process) parameters may be specified, within the limits set by the assembler. Use assembler conventions (non\sphinxhyphen{}blank in column 72 and continuation starting in column 16) to continue the statement over more than one line.
\end{sphinxadmonition}

\index{CASE\$ Examples@\spxentry{CASE\$ Examples}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!CASE\$ Examples@\spxentry{CASE\$ Examples}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{CASE\$ Examples}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
CASE\PYGZdl{} \PYGZsq{}VAR1\PYGZsq{},                             *
      (EQ,\PYGZsq{}DIT000\PYGZsq{},MENU000),              *   : exactly equals \PYGZsq{}DIT000\PYGZsq{}
      (BEGIN,\PYGZsq{}DIT\PYGZsq{},MENUOTH),              *   : starts with \PYGZsq{}DIT\PYGZsq{} ?
      ELSE=ERR999
\end{sphinxVerbatim}

\sphinxAtStartPar
Example of testing a variable with CASE\$.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
* loop on a variable:

LOOP1    FOREACH\PYGZdl{} VALUE\PYGZhy{}IN\PYGZhy{}VARIABLE,VAR=TOTO

        CASE\PYGZdl{} CURRENT\PYGZhy{}FOREACH\PYGZhy{}VARIABLE\PYGZhy{}OF,LOOP1,(EQ,\PYGZsq{}XXXX\PYGZsq{},ET1)

        COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,VAR=I1,LENGTH=2,                   *
            FIELD=(VALUE\PYGZhy{}OF,CURRENT\PYGZhy{}FOREACH\PYGZhy{}INDEX),TYPE=REPLACE
        COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,VAR=V1,                            *
            FIELD=(VALUE\PYGZhy{}OF,CURRENT\PYGZhy{}FOREACH\PYGZhy{}VARIABLE),TYPE=REPLACE
        ERROR\PYGZdl{} 0,\PYGZsq{}TOTO: \PYGZsq{},\PYGZsq{}*I1\PYGZsq{},\PYGZsq{}==\PYGZsq{},\PYGZsq{}*V1\PYGZsq{}
        ENDFOR\PYGZdl{} LOOP1
\end{sphinxVerbatim}

\sphinxAtStartPar
Example of CASE\$ with FOR loops.

\index{CONVERT\$@\spxentry{CONVERT\$}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!CONVERT\$@\spxentry{CONVERT\$}}\ignorespaces 

\subsubsection{CONVERT\$ instruction}
\label{\detokenize{User_Guide:convert-instruction}}\label{\detokenize{User_Guide:index-235}}
\sphinxAtStartPar
This instruction allows a scenario to translate a VIRTEL variable to or from EBCDIC, or to convert a variable to upper or
lower case.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
CONVERT\PYGZdl{} direction,VAR=varname,TABLE=\PYGZsq{}tabname\PYGZsq{}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{direction}
\sphinxAtStartPar
specifies the translation requested. Possible values are:
\begin{itemize}
\item {} 
\sphinxAtStartPar
ASCII\sphinxhyphen{}TO\sphinxhyphen{}EBCDIC

\item {} 
\sphinxAtStartPar
EBCDIC\sphinxhyphen{}TO\sphinxhyphen{}ASCII

\item {} 
\sphinxAtStartPar
UTF8\sphinxhyphen{}TO\sphinxhyphen{}EBCDIC

\item {} 
\sphinxAtStartPar
EBCDIC\sphinxhyphen{}TO\sphinxhyphen{}UTF8

\item {} 
\sphinxAtStartPar
EBCDIC\sphinxhyphen{}TO\sphinxhyphen{}UPPERCASE

\item {} 
\sphinxAtStartPar
EBCDIC\sphinxhyphen{}TO\sphinxhyphen{}LOWERCASE

\end{itemize}

\sphinxlineitem{varname}
\sphinxAtStartPar
is the name of a VIRTEL variable. The variable name must be placed in quotes.

\sphinxlineitem{tabname}
\sphinxAtStartPar
is the name of the translate table to be used for UTF\sphinxhyphen{}8 conversion. The possible values are given under the description of the DEFUTF8 parameter of the VIRTCT. The table name must be placed in quotes. If the TABLE parameter is not specified, then the table specified by the DEFUTF8 parameter is used as a default. VIRTCT parameters are described in the VIRTEL Installation Guide.

\end{description}

\newpage

\index{CONVERT\$@\spxentry{CONVERT\$}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!CONVERT\$@\spxentry{CONVERT\$}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{CONVERT\$ Examples}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
GETGOOG  SCREENS APPL=GETGOOG
*
        SCENARIO INITIAL
*
        SET\PYGZdl{}  ENCODING,UTF\PYGZhy{}8,\PYGZsq{}IBM1147\PYGZsq{}
        COPY\PYGZdl{} INPUT\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=\PYGZsq{}MYINPUT\PYGZsq{},VAR=\PYGZsq{}QUESTION\PYGZsq{}   * URL
        IF\PYGZdl{}      NOT\PYGZhy{}FOUND,THEN=NOSCENAR
        COPY\PYGZdl{} OUTPUT\PYGZhy{}FILE\PYGZhy{}TO\PYGZhy{}VARIABLE,FILE=\PYGZsq{}getreq.txt\PYGZsq{},         * Build req.
            VAR=\PYGZsq{}QUERY\PYGZsq{}
        CONVERT\PYGZdl{} UTF8\PYGZhy{}TO\PYGZhy{}EBCDIC,VAR=\PYGZsq{}QUERY\PYGZsq{},TABLE=\PYGZsq{}IBM1147\PYGZsq{}
*
        OPTION\PYGZdl{} FOR\PYGZhy{}HTTP,                                        *
            (METHOD,\PYGZsq{}GET\PYGZsq{}),                                      *
            (TO,\PYGZsq{}/search\PYGZsq{}),                                      *
            (TEXT,\PYGZsq{}*QUERY\PYGZsq{}),                                     *  Req. variable
            (SITE,\PYGZsq{}www.google.com\PYGZsq{}),                             *
            (HEADER,\PYGZsq{}Accept: text/html\PYGZsq{}),                        *
            (FILE\PYGZhy{}IN,\PYGZsq{}ANSWER\PYGZsq{}),                                  *  GOOGLE Response
            (RET\PYGZhy{}CODE,\PYGZsq{}HTTP\PYGZhy{}RC\PYGZsq{}),                                *  Return Code
            TOVAR=\PYGZsq{}MYPARMS\PYGZsq{}
*
        SEND\PYGZdl{} TO\PYGZhy{}LINE,LINE=\PYGZsq{}G\PYGZhy{}GOOG\PYGZsq{},PARMS=\PYGZsq{}MYPARMS\PYGZsq{},ERROR=ERRSCENAR  Call GOOGLE
*
        CONVERT\PYGZdl{} UTF8\PYGZhy{}TO\PYGZhy{}EBCDIC,VAR=\PYGZsq{}ANSWER\PYGZsq{},TABLE=\PYGZsq{}IBM1147\PYGZsq{}         Convert Response
        COPY\PYGZdl{} VALUE\PYGZhy{}TO\PYGZhy{}VARIABLE,VAR=\PYGZsq{}ERRORMESSAGE\PYGZsq{},              *
            VALUE=\PYGZsq{}Your message was sent \PYGZsq{}
        SCENARIO END
*
ERRSCENAR EQU   *
        COPY\PYGZdl{} VALUE\PYGZhy{}TO\PYGZhy{}VARIABLE,VAR=\PYGZsq{}ERRORMESSAGE\PYGZsq{},              *
            VALUE=\PYGZsq{}Sorry, your message could NOT be sent \PYGZsq{}
        ERROR\PYGZdl{} 1
*
NOSCENAR  EQU   *
        SCENARIO END
*
        SCRNEND
        END    ,
\end{sphinxVerbatim}

\sphinxAtStartPar
Example of CONVERT\$ in a scenario

\phantomsection\label{\detokenize{User_Guide:v462ug-copy}}
\index{COPY\$@\spxentry{COPY\$}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!COPY\$@\spxentry{COPY\$}}\ignorespaces 

\subsubsection{COPY\$ instruction}
\label{\detokenize{User_Guide:copy-instruction}}\label{\detokenize{User_Guide:index-237}}
\sphinxAtStartPar
This instruction allows various copy operations within the context of a scenario.

\index{COPY\$ FIELD\sphinxhyphen{}NAME\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE@\spxentry{COPY\$ FIELD\sphinxhyphen{}NAME\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}!COPY\$@\spxentry{COPY\$}}\index{COPY\$@\spxentry{COPY\$}!COPY\$ FIELD\sphinxhyphen{}NAME\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE@\spxentry{COPY\$ FIELD\sphinxhyphen{}NAME\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{COPY\$ FIELD\sphinxhyphen{}NAME\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}

\sphinxAtStartPar
Copies the name of an HTTP input field into a VIRTEL variable.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
COPY\PYGZdl{} FIELD\PYGZhy{}NAME\PYGZhy{}TO\PYGZhy{}VARIABLE,SCREEN=(row,col),VAR=\PYGZsq{}name2\PYGZsq{},TYPE=type
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{row,col}
\sphinxAtStartPar
starting row and column of the field on the screen.

\sphinxlineitem{name2}
\sphinxAtStartPar
the name of a VIRTEL table variable. If the variable does not exist, it will be created.

\sphinxlineitem{type}
\sphinxAtStartPar
(optional) may indicate one of the following values:
\begin{quote}
\begin{description}
\sphinxlineitem{TYPE=REPLACE}
\sphinxAtStartPar
indicates that the new value will replace the existing value of the variable. If TYPE=REPLACE is not specified, and the variable already exists, the new value will be appended to any existing values.

\end{description}
\end{quote}

\end{description}

\index{COPY\$ INPUT\sphinxhyphen{}FILE\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE@\spxentry{COPY\$ INPUT\sphinxhyphen{}FILE\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}!COPY\$@\spxentry{COPY\$}}\index{COPY\$@\spxentry{COPY\$}!COPY\$ INPUT\sphinxhyphen{}FILE\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE@\spxentry{COPY\$ INPUT\sphinxhyphen{}FILE\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{COPY\$ INPUT\sphinxhyphen{}FILE\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}

\sphinxAtStartPar
Copies the contents of a file into a VIRTEL variable. This instruction can be used in an input scenario which processes an HTTP request or SMTP input message having one or more attached files.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
COPY\PYGZdl{} INPUT\PYGZhy{}FILE\PYGZhy{}TO\PYGZhy{}VARIABLE,VAR=varname\PYGZsq{},FILE=\PYGZsq{}filename\PYGZsq{}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{varname}
\sphinxAtStartPar
the name of a VIRTEL table variable. If the variable does not exist, it will be created. If the variable already exists, the new value will be appended to any existing values. If this parameter is omitted, the variable name \$INFILE\$ is used.

\sphinxlineitem{filename}
\sphinxAtStartPar
the name of a file attached to the HTTP request or SMTP message. If this parameter is omitted, the first attached file will be read.

\end{description}

\sphinxAtStartPar
If the input request does not contain the requested file, the NOT\sphinxhyphen{}FOUND condition will be raised. This condition can be tested by means of the {\hyperref[\detokenize{User_Guide:v462ug-if}]{\sphinxcrossref{\DUrole{std,std-ref}{“IF\$ instruction”}}}}.

\index{COPY\$ INPUT\sphinxhyphen{}TO\sphinxhyphen{}SCREEN@\spxentry{COPY\$ INPUT\sphinxhyphen{}TO\sphinxhyphen{}SCREEN}!COPY\$@\spxentry{COPY\$}}\index{COPY\$@\spxentry{COPY\$}!COPY\$ INPUT\sphinxhyphen{}TO\sphinxhyphen{}SCREEN@\spxentry{COPY\$ INPUT\sphinxhyphen{}TO\sphinxhyphen{}SCREEN}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{COPY\$ INPUT\sphinxhyphen{}TO\sphinxhyphen{}SCREEN}

\sphinxAtStartPar
Copies the value of an HTTP query parameter to a given position on the 3270 screen.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
COPY\PYGZdl{} INPUT\PYGZhy{}TO\PYGZhy{}SCREEN,FIELD=\PYGZsq{}name1\PYGZsq{},SCREEN=(row,col,len),TYPE=type
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{name1}
\sphinxAtStartPar
the name of an HTTP query parameter (see {\hyperref[\detokenize{User_Guide:v462ug-url-formats}]{\sphinxcrossref{\DUrole{std,std-ref}{“VIRTEL URL formats”}}}})

\sphinxlineitem{row,col,len}
\sphinxAtStartPar
row, column, and length of the destination field on the screen.

\sphinxlineitem{type}
\sphinxAtStartPar
(optional) may indicate one of the following values:
\begin{quote}
\begin{description}
\sphinxlineitem{TYPE=ERASE\sphinxhyphen{}FIELD}
\sphinxAtStartPar
indicates that the destination field is cleared to nulls before copying the data.

\end{description}
\end{quote}

\end{description}

\sphinxAtStartPar
If the parameter name1 is not present in the input request, the NOT\sphinxhyphen{}FOUND condition will be raised. This condition can be tested by means of the {\hyperref[\detokenize{User_Guide:v462ug-if}]{\sphinxcrossref{\DUrole{std,std-ref}{“IF\$ instruction”}}}}.

\sphinxAtStartPar
If the destination row and column specify a protected field of the 3270 screen, the scenario terminates abnormally and message VIRS129E is issued to the system console. If the destination field is unprotected but the input value is too long for the field, the data will be silently truncated.

\index{COPY\$ INPUT\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE@\spxentry{COPY\$ INPUT\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}!COPY\$@\spxentry{COPY\$}}\index{COPY\$@\spxentry{COPY\$}!COPY\$ INPUT\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE@\spxentry{COPY\$ INPUT\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{COPY\$ INPUT\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}

\sphinxAtStartPar
Copies the value of an HTTP query parameter into a VIRTEL variable.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
COPY\PYGZdl{} INPUT\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=\PYGZsq{}name1\PYGZsq{},VAR=\PYGZsq{}name2\PYGZsq{},TYPE=type
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{name1}
\sphinxAtStartPar
the name of an HTTP query parameter (see {\hyperref[\detokenize{User_Guide:v462ug-url-formats}]{\sphinxcrossref{\DUrole{std,std-ref}{“VIRTEL URL formats”}}}})

\sphinxlineitem{name2}
\sphinxAtStartPar
the name of a VIRTEL table variable. If the variable does not exist, it will be created.

\sphinxlineitem{type}
\sphinxAtStartPar
(optional) may indicate one of the following values:
\begin{quote}
\begin{description}
\sphinxlineitem{TYPE\sphinxhyphen{}OFFSET\sphinxhyphen{}LENGTH}
\sphinxAtStartPar
indicates that the input parameter consists of two numeric values separated by a comma. The first numeric value is converted to binary and stored in the first 8 bytes of the result variable, and the second numeric value is converted to binary and stored in the next 4 bytes of the result variable. The 12\sphinxhyphen{}byte value thus produced is in the format required by the OFFAREA parameter for the read\sphinxhyphen{}partial and write\sphinxhyphen{}append functions of the VIRSVFIO service program.

\sphinxlineitem{TYPE=REPLACE}
\sphinxAtStartPar
indicates that the new value will replace the existing value of the variable. If TYPE=REPLACE is not specified, and the variable already exists, the new value will be appended to any existing values. If the parameter name1 is not present in the input request, the NOT\sphinxhyphen{}FOUND condition will be raised. This condition can be tested by means of the {\hyperref[\detokenize{User_Guide:v462ug-if}]{\sphinxcrossref{\DUrole{std,std-ref}{“IF\$ instruction”}}}}.

\end{description}
\end{quote}

\end{description}

\index{COPY\$ LIST\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE@\spxentry{COPY\$ LIST\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}!COPY\$@\spxentry{COPY\$}}\index{COPY\$@\spxentry{COPY\$}!COPY\$ LIST\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE@\spxentry{COPY\$ LIST\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{COPY\$ LIST\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}

\sphinxAtStartPar
Copies a a list of values (either constants or variables) to a variable.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
COPY\PYGZdl{} LIST\PYGZhy{}TO\PYGZhy{}VARIABLE,VAR=varname,
    LIST=(STRING,\PYGZsq{}string\PYGZsq{},VARIABLE,\PYGZsq{}fromvar\PYGZsq{},\PYGZsq{}string\PYGZsq{},\PYGZsq{}*fromvar\PYGZsq{}),
    LTRIM=(\PYGZsq{}string1\PYGZsq{},\PYGZsq{}string2\PYGZsq{},...),
    RTRIM=(\PYGZsq{}string1\PYGZsq{},\PYGZsq{}string2\PYGZsq{},...),
    TYPE=type
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{varname}
\sphinxAtStartPar
the name of a VIRTEL table variable. If the variable does not exist, it will be created.

\sphinxlineitem{string}
\sphinxAtStartPar
characters to be copied into the variable varname.

\sphinxlineitem{fromvar}
\sphinxAtStartPar
the name of a variable whose value is to be copied into the variable varname.

\sphinxlineitem{LTRIM}
\sphinxAtStartPar
(optional) Removes a set of characters from the start of a list variable (see Note) before copying it).
\begin{quote}
\begin{description}
\sphinxlineitem{‘string1’ {[},’string2’, …{]}}
\sphinxAtStartPar
one or more strings of text to be removed from the start of the variable.

\end{description}
\end{quote}

\sphinxlineitem{RTRIM}
\sphinxAtStartPar
(optional) Removes a set of characters from the end of a list variable (see Note) before copying it.
\begin{quote}
\begin{description}
\sphinxlineitem{‘string1’ {[},’string2’, …{]}}
\sphinxAtStartPar
one or more strings of text to be removed from the end of the variable.

\end{description}
\end{quote}

\sphinxlineitem{type}
\sphinxAtStartPar
(optional) may indicate one of the following values:
\begin{quote}
\begin{description}
\sphinxlineitem{TYPE=REPLACE}
\sphinxAtStartPar
indicates that the new value will replace the existing value of the variable. If TYPE=REPLACE is not specified, and the variable already exists, the new value will be appended to any existing values.

\end{description}
\end{quote}

\end{description}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
LTRIM and RTRIM only apply to variables. In the following example
\end{sphinxadmonition}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
COPY\PYGZdl{} LIST\PYGZhy{}TO\PYGZhy{}VARIABLE,VAR=VAR1,              *
RTRIM=(\PYGZsq{}\PYGZus{}\PYGZsq{},\PYGZsq{} \PYGZsq{}),LTRIM=(\PYGZsq{}\PYGZus{}\PYGZsq{},\PYGZsq{} \PYGZsq{}),              *
LIST=(\PYGZsq{}string1\PYGZsq{},\PYGZsq{}*var1\PYGZsq{},VARIABLE,\PYGZsq{}var2\PYGZsq{})
\end{sphinxVerbatim}

\sphinxAtStartPar
The variable VAR1 is created/modified, with ‘string1’ copied as is, var1 and var2 left and right trimmed.

\index{COPY\$ OUTPUT\sphinxhyphen{}FILE\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE@\spxentry{COPY\$ OUTPUT\sphinxhyphen{}FILE\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}!COPY\$@\spxentry{COPY\$}}\index{COPY\$@\spxentry{COPY\$}!COPY\$ OUTPUT\sphinxhyphen{}FILE\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE@\spxentry{COPY\$ OUTPUT\sphinxhyphen{}FILE\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{COPY\$ OUTPUT\sphinxhyphen{}FILE\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}

\sphinxAtStartPar
Generates an output page from a page template, and copies the result into a VIRTEL variable. Any VIRTEL tags within the page template are processed as if the page were being generated as the response to an HTTP request, but the generated page is placed in a variable instead of being sent to the terminal.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
COPY\PYGZdl{} OUTPUT\PYGZhy{}FILE\PYGZhy{}TO\PYGZhy{}VARIABLE,FILE=\PYGZsq{}filename\PYGZsq{},VAR=varname,                  *
    TYPE=type
COPY\PYGZdl{} OUTPUT\PYGZhy{}FILE\PYGZhy{}TO\PYGZhy{}VARIABLE,FILE=\PYGZsq{}*filenameVar\PYGZsq{},VAR=varname,              *
    TYPE=type
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{filename}
\sphinxAtStartPar
the name of the page template.

\sphinxlineitem{*filenameVar}
\sphinxAtStartPar
the name of a VIRTEL variable holding the name of the page template.

\sphinxlineitem{varname}
\sphinxAtStartPar
the name of a VIRTEL table variable which will receive the contents of the generated output page. If the variable does not exist, it will be created. If the variable already exists, the new value will be appended to any existing values.

\sphinxlineitem{type}
\sphinxAtStartPar
(optional) indicates that the result variable has a special format. The following values are possible:
\begin{quote}
\begin{description}
\sphinxlineitem{TYPE=ASCII}
\sphinxAtStartPar
indicates that the result should be converted to ASCII (or UTF\sphinxhyphen{}8 if the SET\sphinxhyphen{}OUTPUT\sphinxhyphen{}ENCODING\sphinxhyphen{}UTF\sphinxhyphen{}8 tag is present in the page template). This is the default value if the HTTP request is in ASCII.

\sphinxlineitem{TYPE=EBCDIC}
\sphinxAtStartPar
indicates that the result should be converted to EBCDIC. This is the default value if the HTTP request is in EBCDIC.

\sphinxlineitem{TYPE=LINEBUFFER}
\sphinxAtStartPar
indicates that the result should be converted to MakePDF “LINEBUF” format for input to the VIRSVPDF service program. The page template contains special tags (see {\hyperref[\detokenize{User_Guide:v462ug-pdf-output}]{\sphinxcrossref{\DUrole{std,std-ref}{“Generating PDF output”}}}}) which are converted to the format required by MakePDF.

\sphinxAtStartPar
If the specified file does not exist in the current VIRTEL directory, the NOT\sphinxhyphen{}FOUND condition will be raised. This condition can be tested by means of the {\hyperref[\detokenize{User_Guide:v462ug-if}]{\sphinxcrossref{\DUrole{std,std-ref}{“IF\$ instruction”}}}}.

\end{description}
\end{quote}

\end{description}

\index{COPY\$ SCREEN\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE@\spxentry{COPY\$ SCREEN\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}!COPY\$@\spxentry{COPY\$}}\index{COPY\$@\spxentry{COPY\$}!COPY\$ SCREEN\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE@\spxentry{COPY\$ SCREEN\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{COPY\$ SCREEN\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}

\sphinxAtStartPar
Copies a portion of the screen into a table variable.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
COPY\PYGZdl{} SCREEN\PYGZhy{}TO\PYGZhy{}VARIABLE,SCREEN=(row,col,len,ht),VAR=\PYGZsq{}name2\PYGZsq{},TYPE=type
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{row}
\sphinxAtStartPar
starting row of the portion of the screen to copy (see Note 1).

\sphinxlineitem{col}
\sphinxAtStartPar
starting column of the portion of the screen to copy (see Note 1).

\sphinxlineitem{len}
\sphinxAtStartPar
width (in columns) of the portion of the screen to copy (see Note 1).

\sphinxlineitem{ht}
\sphinxAtStartPar
height (in rows) of the portion of the screen to copy (see Note 2).

\sphinxlineitem{name2}
\sphinxAtStartPar
the name of a VIRTEL table variable containing ht values, each of length len. If the variable does not exist, it will be created.

\sphinxlineitem{type}
\sphinxAtStartPar
(optional) may indicate one of the following values:
\begin{quote}
\begin{description}
\sphinxlineitem{TYPE=REPLACE}
\sphinxAtStartPar
indicates that the new value will replace the existing value of the variable. If TYPE=REPLACE is not specified, and the variable already exists, the new value will be appended to any existing values.

\end{description}
\end{quote}

\end{description}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
Note 1: for row, col and len, a value of ‘=’ means the value of the current row, col or len as set by {\hyperref[\detokenize{User_Guide:v462ug-set-screen-position}]{\sphinxcrossref{\DUrole{std,std-ref}{“SET\$ SCREEN\sphinxhyphen{}POSITION”}}}}.

\sphinxAtStartPar
Note 2: the fourth sub\sphinxhyphen{}parameter (ht) of the SCREEN parameter is optional. If the fourth sub\sphinxhyphen{}parameter is specified, then attributes and binary zeroes will be replaced by blanks. To keep compatibility with existing scenarios, the instruction will ignore attributes and binary zeroes if the fourth SCREEN sub\sphinxhyphen{}parameter is NOT specified.
\end{sphinxadmonition}

\index{COPY\$ SYSTEM\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE@\spxentry{COPY\$ SYSTEM\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}!COPY\$@\spxentry{COPY\$}}\index{COPY\$@\spxentry{COPY\$}!COPY\$ SYSTEM\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE@\spxentry{COPY\$ SYSTEM\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{COPY\$ SYSTEM\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}

\sphinxAtStartPar
Copies a system information field into a table variable.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=(class,item),      *
VAR=varname,LENGTH=len,OFFSET=offset,             *
TYPE=type
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{varname}
\sphinxAtStartPar
the name of a VIRTEL table variable into which the system information will be copied.

\sphinxlineitem{class}
\sphinxAtStartPar
the type of system information to be copied. The following values may be specified for class:

\sphinxlineitem{HTTP\sphinxhyphen{}HEADER}
\sphinxAtStartPar
Information extracted from an HTTP header in the incoming HTTP request is copied into the specified variable. When HTTP\sphinxhyphen{}HEADER is specified, item represents one of the HTTP headers listed below.

\sphinxlineitem{TCT\sphinxhyphen{}HTTP\sphinxhyphen{}HEADER}
\sphinxAtStartPar
Information extracted from an HTTP header in the incoming HTTP request is copied into the specified variable. When TCT\sphinxhyphen{}HTTP\sphinxhyphen{}HEADER is specified, item represents one of the HTTP headers specified in the HTHEADR parameter in the VIRTCT (refer to “Parameters of the VIRTCT” in the VIRTEL Installation Guide for more information).

\sphinxlineitem{NAME\sphinxhyphen{}OF}
\sphinxAtStartPar
Information about the VIRTEL environment is copied to the table variable. When NAME\sphinxhyphen{}OF is specified, item represents the name of a VIRTEL data item.

\sphinxlineitem{NUMBER\sphinxhyphen{}OF}
\sphinxAtStartPar
A numeric value is copied to the table variable. When NUMBER\sphinxhyphen{}OF is specified, item represents the name of a VIRTEL numeric data item.

\sphinxlineitem{VALUE\sphinxhyphen{}OF}
\sphinxAtStartPar
Information about the VIRTEL environment is copied to the table variable. When VALUE\sphinxhyphen{}OF is specified, item represents the name of a VIRTEL data item. VALUE\sphinxhyphen{}OF is synonymous with NAME\sphinxhyphen{}OF.

\sphinxlineitem{USER\sphinxhyphen{}SECURITY\sphinxhyphen{}PROFILE}
\sphinxAtStartPar
Information from the user’s RACF profile is copied to the table variable. When USER\sphinxhyphen{}SECURITY\sphinxhyphen{}PROFILE is specified, item represents the name of a field in the RACF user profile. The supported fields are listed below.

\sphinxlineitem{NEW\sphinxhyphen{}PASSTICKET\sphinxhyphen{}FOR\sphinxhyphen{}TRANSACTION}
\sphinxAtStartPar
Generate a PassTicket allowing the current USERID. If the generation fails, the NOT\sphinxhyphen{}FOUND condition will be raised. This condition can be tested by means of the {\hyperref[\detokenize{User_Guide:v462ug-if}]{\sphinxcrossref{\DUrole{std,std-ref}{“IF\$ instruction”}}}}.

\sphinxlineitem{item}
\sphinxAtStartPar
When class is HTTP\sphinxhyphen{}HEADER, the following standard HTTP headers, described in RFC2616, may be specified:

\end{description}
\begin{itemize}
\item {} 
\sphinxAtStartPar
ACCEPT

\item {} 
\sphinxAtStartPar
ACCEPT\sphinxhyphen{}LANGUAGE

\item {} 
\sphinxAtStartPar
CONNECTION

\item {} 
\sphinxAtStartPar
CONTENT\sphinxhyphen{}TYPE

\item {} 
\sphinxAtStartPar
IF\sphinxhyphen{}MODIFIED\sphinxhyphen{}SINCE

\item {} 
\sphinxAtStartPar
HOST

\item {} 
\sphinxAtStartPar
USER\sphinxhyphen{}AGENT

\end{itemize}

\sphinxAtStartPar
In addition, the following non\sphinxhyphen{}standard HTTP headers, described in the IBM Tivoli Access Manager WebSEAL Administration Guide manual, may be specified:
\begin{itemize}
\item {} 
\sphinxAtStartPar
IV\sphinxhyphen{}USER

\item {} 
\sphinxAtStartPar
IV\sphinxhyphen{}USERL

\item {} 
\sphinxAtStartPar
IV\sphinxhyphen{}GROUPS

\item {} 
\sphinxAtStartPar
IV\sphinxhyphen{}CREDS

\end{itemize}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
IV headers provide reliable user identification only when the request comes from a trusted proxy. The proxy IP address can be specified in the “Calling DTE” field of a rule attached to the HTTP line. See the “Rules” chapter of the VIRTEL Configuration Reference manual for further information.
\end{sphinxadmonition}
\begin{description}
\sphinxlineitem{\sphinxstylestrong{NAME\sphinxhyphen{}OF or VALUE\sphinxhyphen{}OF Item list}}\begin{description}
\sphinxlineitem{The following VIRTEL data items may be specified:}\begin{description}
\sphinxlineitem{CHARACTER\sphinxhyphen{}SET}
\sphinxAtStartPar
The name of the current UTF\sphinxhyphen{}8 character set, or the country code if the page is not in UTF\sphinxhyphen{}8 mode (see {\hyperref[\detokenize{User_Guide:v462ug-ebcdic-translation}]{\sphinxcrossref{\DUrole{std,std-ref}{“EBCDIC translation management”}}}})

\sphinxlineitem{CURRENT\sphinxhyphen{}FOREACH\sphinxhyphen{}INDEX}
\sphinxAtStartPar
Value of the current index in a FOREACH loop.

\sphinxlineitem{CURRENT\sphinxhyphen{}FOREACH\sphinxhyphen{}VARIABLE}
\sphinxAtStartPar
Value of the variable at current index in a FOREACH loop (see {\hyperref[\detokenize{User_Guide:v462ug-foreach-variable}]{\sphinxcrossref{\DUrole{std,std-ref}{“FOREACH\$ VALUE\sphinxhyphen{}IN\sphinxhyphen{}VARIABLE”}}}}).

\end{description}

\sphinxAtStartPar
CURRENT\sphinxhyphen{}LINE

\sphinxAtStartPar
CURRENT\sphinxhyphen{}COLUMN

\sphinxAtStartPar
CURRENT\sphinxhyphen{}LENGTH
\begin{description}
\sphinxlineitem{CURRENT\sphinxhyphen{}HEIGHT}
\sphinxAtStartPar
The current values of the named field in the {\hyperref[\detokenize{User_Guide:v462ug-set-screen-position}]{\sphinxcrossref{\DUrole{std,std-ref}{“SET\$ SCREEN\sphinxhyphen{}POSITION”}}}}.

\sphinxlineitem{DATE\sphinxhyphen{}TIME}
\sphinxAtStartPar
The current date and time (14 characters in the format YYYYMMDDHHMMSS)

\sphinxlineitem{DIRECTORY}
\sphinxAtStartPar
The current VIRTEL directory name

\sphinxlineitem{ENTRY\sphinxhyphen{}POINT}
\sphinxAtStartPar
The VIRTEL entry point name

\sphinxlineitem{LINE\sphinxhyphen{}INTERNAL}
\sphinxAtStartPar
The internal name of the VIRTEL line

\sphinxlineitem{LINE\sphinxhyphen{}EXTERNAL}
\sphinxAtStartPar
The external name of the VIRTEL line

\sphinxlineitem{PAGE}
\sphinxAtStartPar
The name of the original HTML page template specified in the URL

\sphinxlineitem{PASSWORD}
\sphinxAtStartPar
The password entered during signon

\sphinxlineitem{PRINT\sphinxhyphen{}RELAY}
\sphinxAtStartPar
The relay LU name of the associated printer

\sphinxlineitem{PSEUDO\sphinxhyphen{}TERMINAL}
\sphinxAtStartPar
The VIRTEL terminal name

\sphinxlineitem{QUERY}
\sphinxAtStartPar
The query string from the URL

\sphinxlineitem{RELAY}
\sphinxAtStartPar
The relay LU name used to connect to the host application

\sphinxlineitem{ROUTING\sphinxhyphen{}PARAMETER}
\sphinxAtStartPar
The value specified in the userdata field of the URL or call packet

\sphinxlineitem{SNA\sphinxhyphen{}STATUS}\begin{description}
\sphinxlineitem{The status of the host LU2 session:}\begin{description}
\sphinxlineitem{X}
\sphinxAtStartPar
input is inhibited

\sphinxlineitem{blank}
\sphinxAtStartPar
input is allowed

\end{description}

\end{description}

\sphinxlineitem{TERMINAL}
\sphinxAtStartPar
The DNS name of the connected terminal. Rquires DNS subtask to be active. See DNS paramter of TCPx statement in the TCT.

\sphinxlineitem{TRANSACTION\sphinxhyphen{}INTERNAL}
\sphinxAtStartPar
The internal name of the VIRTEL transaction

\sphinxlineitem{TRANSACTION\sphinxhyphen{}EXTERNAL}
\sphinxAtStartPar
The external name of the VIRTEL transaction

\sphinxlineitem{URL}
\sphinxAtStartPar
The URL excluding the query string

\sphinxlineitem{USER}
\sphinxAtStartPar
The user name, if signon has occurred

\sphinxlineitem{USER\sphinxhyphen{}IP\sphinxhyphen{}ADDRESS}
\sphinxAtStartPar
The IP address of the client terminal

\sphinxlineitem{VIRTEL}
\sphinxAtStartPar
The VIRTEL APPLID specified in the VIRTCT

\sphinxlineitem{VIRTEL\sphinxhyphen{}VERSION}
\sphinxAtStartPar
The VIRTEL version number

\sphinxlineitem{xxx\sphinxhyphen{}SYMBOL}
\sphinxAtStartPar
The value of the system symbol xxx (only if SYSPLUS=YES is specified in the VIRTCT). Example: SYSNAME\sphinxhyphen{}SYMBOL

\end{description}

\end{description}

\sphinxlineitem{\sphinxstylestrong{NUMBER\sphinxhyphen{}OF Item list}}\begin{description}
\sphinxlineitem{The following VIRTEL numeric data items may be specified:}\begin{description}
\sphinxlineitem{SCREEN\sphinxhyphen{}COLUMNS}
\sphinxAtStartPar
The width of the current host 3270 screen

\sphinxlineitem{SCREEN\sphinxhyphen{}LINES}
\sphinxAtStartPar
The depth of the current host 3270 screen

\end{description}

\end{description}

\sphinxlineitem{\sphinxstylestrong{USER\sphinxhyphen{}SECURITY\sphinxhyphen{}PROFILE Item list}}\begin{description}
\sphinxlineitem{The following RACF field names may be specified:}\begin{description}
\sphinxlineitem{USERID}
\sphinxAtStartPar
The signed\sphinxhyphen{}on user id

\sphinxlineitem{GROUP}
\sphinxAtStartPar
The group to which the user belongs

\sphinxlineitem{WANAME}
\sphinxAtStartPar
User name for SYSOUT

\sphinxlineitem{WABLDG}
\sphinxAtStartPar
Building name for delivery

\sphinxlineitem{WADEPT}
\sphinxAtStartPar
Department name for delivery

\sphinxlineitem{WAROOM}
\sphinxAtStartPar
Room for delivery

\sphinxlineitem{WAADDR1}
\sphinxAtStartPar
Address line 1

\sphinxlineitem{WAADDR2}
\sphinxAtStartPar
Address line 2

\sphinxlineitem{WAADDR3}
\sphinxAtStartPar
Address line 3

\sphinxlineitem{WAADDR4}
\sphinxAtStartPar
Address line 4

\sphinxlineitem{WAACCNT}
\sphinxAtStartPar
Account number

\end{description}

\end{description}

\end{description}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
USER\sphinxhyphen{}SECURITY\sphinxhyphen{}PROFILE information is available only if the user has signed on and SECUR=(RACROUTE,RACF) has been specified in the VIRTCT. Otherwise null values are returned for all fields.
\end{sphinxadmonition}
\begin{description}
\sphinxlineitem{len}
\sphinxAtStartPar
(optional) the variable will be padded or truncated to the specified length. Alphanumeric data items are right\sphinxhyphen{}padded with blanks or truncated on the right. Numeric items are left\sphinxhyphen{}padded with zeroes on the left. The maximum length for a numeric item is 8. If the LENGTH parameter is omitted, the length of the variable will be equal to the length of the requested value.

\sphinxlineitem{item}
\sphinxAtStartPar
(optional) the variable will be padded or truncated to the specified length. Alphanumeric data items are right\sphinxhyphen{}padded with blanks or truncated on the right. Numeric items are left\sphinxhyphen{}padded with zeroes on the left. The maximum length for a numeric item is 8. If the LENGTH parameter is omitted, the length of the variable will be equal to the length of the requested value.

\sphinxlineitem{offset}
\sphinxAtStartPar
(optional) the starting offset within the data item from which to extract the information to be placed in the variable. If omitted, extraction starts from offset 0. This parameter is valid only when class is USER\sphinxhyphen{}SECURITY\sphinxhyphen{}PROFILE.

\sphinxlineitem{type}
\sphinxAtStartPar
(optional) may indicate one of the following values:
\begin{quote}
\begin{description}
\sphinxlineitem{TYPE=REPLACE}
\sphinxAtStartPar
indicates that the new value will replace the existing value of the variable. If TYPE=REPLACE is not specified, and the variable already exists, the new value will be appended to any existing values.

\end{description}
\end{quote}

\end{description}

\sphinxAtStartPar
Example of COPY\$ SYSTEM\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=(HTTP\PYGZhy{}HEADER,HOST),             X
    VAR=HOST
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=(HTTP\PYGZhy{}HEADER,USER\PYGZhy{}AGENT),       X
    VAR=BROWSER
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=(NAME\PYGZhy{}OF,VIRTEL),               X
    VAR=APPLID
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=(NAME\PYGZhy{}OF,LINE\PYGZhy{}INTERNAL),        X
    VAR=LINEINT
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=(NAME\PYGZhy{}OF,PSEUDO\PYGZhy{}TERMINAL),      X
    VAR=TERMID
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=(NAME\PYGZhy{}OF,RELAY),                X
    VAR=LUNAME
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=(NAME\PYGZhy{}OF,ENTRY\PYGZhy{}POINT),          X
    VAR=EPNAME
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=(NAME\PYGZhy{}OF,TRANSACTION\PYGZhy{}INTERNAL), X
    VAR=TRANINT
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=(NAME\PYGZhy{}OF,TRANSACTION\PYGZhy{}EXTERNAL), X
    VAR=TRANEXT
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=(NAME\PYGZhy{}OF,ROUTING\PYGZhy{}PARAMETER),    X
    VAR=ROUTPARM
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=(NAME\PYGZhy{}OF,URL),                  X
    VAR=URL
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=(NAME\PYGZhy{}OF,QUERY),                X
    VAR=QSTRING
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=(NAME\PYGZhy{}OF,PAGE),                 X
    VAR=pagename
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=(NAME\PYGZhy{}OF,DIRECTORY),            X
    VAR=DIRNAME
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=(NAME\PYGZhy{}OF,SNA\PYGZhy{}STATUS),           X
    VAR=SNASTAT
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=(NAME\PYGZhy{}OF,USER\PYGZhy{}IP\PYGZhy{}ADDRESS),      X
    VAR=CLIENT
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=(NAME\PYGZhy{}OF,CHARACTER\PYGZhy{}SET),        X
    VAR=CHARSET
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=(VALUE\PYGZhy{}OF,DATE\PYGZhy{}TIME),           X
    VAR=DATETIME
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=(VALUE\PYGZhy{}OF,VIRTEL\PYGZhy{}VERSION),      X
    VAR=VERSION
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=(VALUE\PYGZhy{}OF,SYSNAME\PYGZhy{}SYMBOL),      X
    VAR=SYSNAME
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=(VALUE\PYGZhy{}OF,SYSPLEX\PYGZhy{}SYMBOL),      X
    VAR=SYSPLEX
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=(NUMBER\PYGZhy{}OF,SCREEN\PYGZhy{}COLUMNS),     X
    VAR=COLS
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=(NUMBER\PYGZhy{}OF,SCREEN\PYGZhy{}LINES),       X
    VAR=ROWS
COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,                                      X
    FIELD=(USER\PYGZhy{}SECURITY\PYGZhy{}PROFILE,WADEPT),                      X
    VAR=DEPT
 COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,                                     X
    FIELD=(NAME\PYGZhy{}OF,TERMINAL),                                  X
    VAR=TERMINAL
\end{sphinxVerbatim}

\sphinxAtStartPar
The following table shows a possible result of this example scenario when used in conjunction with the URL:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
http://192.168.235.30:41001/w2h/WEB2AJAX.htm+Tso+model2?u=rxb\PYGZam{}g=sys1
\end{sphinxVerbatim}


\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TT}
\sphinxtoprule
\sphinxmultirow{2}{1}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxstyletheadfamily \sphinxAtStartPar
Variable
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
&\sphinxmultirow{2}{2}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{2}}
\sphinxstyletheadfamily \sphinxAtStartPar
Value
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
\\
\sphinxvlinecrossing{1}\sphinxfixclines{2}\sphinxtablestrut{1}&\sphinxtablestrut{2}\\
\sphinxmidrule
\sphinxtableatstartofbodyhook
\sphinxAtStartPar
HOST
&
\sphinxAtStartPar
“192.168.235.30:41001”
\\
\sphinxhline
\sphinxAtStartPar
BROWSER
&
\sphinxAtStartPar
“Mozilla/5.0 (Windows) Gecko/20070219 Firefox/2.0.0.2”
\\
\sphinxhline
\sphinxAtStartPar
APPLID
&
\sphinxAtStartPar
“VIRTEL”
\\
\sphinxhline
\sphinxAtStartPar
LINEINT
&
\sphinxAtStartPar
“W\sphinxhyphen{}HTTP”
\\
\sphinxhline
\sphinxAtStartPar
TERMID
&
\sphinxAtStartPar
“DEVTA003”
\\
\sphinxhline
\sphinxAtStartPar
LUNAME
&
\sphinxAtStartPar
“RHTVT000”
\\
\sphinxhline
\sphinxAtStartPar
EPNAME
&
\sphinxAtStartPar
“WEB2HOST”
\\
\sphinxhline
\sphinxAtStartPar
TRANINT
&
\sphinxAtStartPar
“W2H\sphinxhyphen{}13”
\\
\sphinxhline
\sphinxAtStartPar
TRANEXT
&
\sphinxAtStartPar
“Tso”
\\
\sphinxhline
\sphinxAtStartPar
ROUTPARM
&
\sphinxAtStartPar
“model2”
\\
\sphinxhline
\sphinxAtStartPar
URL
&
\sphinxAtStartPar
“/w2h/WEB2AJAX.htm+Tso+model2”
\\
\sphinxhline
\sphinxAtStartPar
QSTRING
&
\sphinxAtStartPar
“u=rxb\&g=sys1”
\\
\sphinxhline
\sphinxAtStartPar
pagename
&
\sphinxAtStartPar
“WEB2AJAX.htm”
\\
\sphinxhline
\sphinxAtStartPar
DIRNAME
&
\sphinxAtStartPar
“W2H\sphinxhyphen{}DIR”
\\
\sphinxhline
\sphinxAtStartPar
SNASTAT
&
\sphinxAtStartPar
” “
\\
\sphinxhline
\sphinxAtStartPar
CLIENT
&
\sphinxAtStartPar
“192.168.000.049”
\\
\sphinxhline
\sphinxAtStartPar
CHARSET
&
\sphinxAtStartPar
“IBM1140”
\\
\sphinxhline
\sphinxAtStartPar
DATETIME
&
\sphinxAtStartPar
“20110731093522”
\\
\sphinxhline
\sphinxAtStartPar
VERSION
&
\sphinxAtStartPar
“4.62 “
\\
\sphinxhline
\sphinxAtStartPar
SYSNAME
&
\sphinxAtStartPar
“MVSPROD1”
\\
\sphinxhline
\sphinxAtStartPar
SYSPLEX
&
\sphinxAtStartPar
“PRODPLEX”
\\
\sphinxhline
\sphinxAtStartPar
COLS
&
\sphinxAtStartPar
“80”
\\
\sphinxhline
\sphinxAtStartPar
ROWS
&
\sphinxAtStartPar
“24”
\\
\sphinxhline
\sphinxAtStartPar
DEPT
&
\sphinxAtStartPar
“SYSPROG”
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}

\index{COPY\$ VALUE\sphinxhyphen{}TO\sphinxhyphen{}SCREEN@\spxentry{COPY\$ VALUE\sphinxhyphen{}TO\sphinxhyphen{}SCREEN}!COPY\$@\spxentry{COPY\$}}\index{COPY\$@\spxentry{COPY\$}!COPY\$ VALUE\sphinxhyphen{}TO\sphinxhyphen{}SCREEN@\spxentry{COPY\$ VALUE\sphinxhyphen{}TO\sphinxhyphen{}SCREEN}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{COPY\$ VALUE\sphinxhyphen{}TO\sphinxhyphen{}SCREEN}

\sphinxAtStartPar
Copies a constant value to a given position on the 3270 screen.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
COPY\PYGZdl{} VALUE\PYGZhy{}TO\PYGZhy{}SCREEN,VALUE=\PYGZsq{}string\PYGZsq{},SCREEN=(row,col,len),TYPE=type
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{string}
\sphinxAtStartPar
characters to be copied to the screen.

\sphinxlineitem{row,col,len}
\sphinxAtStartPar
row, column, and length of the destination field on the screen.

\sphinxlineitem{type}\begin{description}
\sphinxlineitem{(optional) may indicate one of the following values:}\begin{description}
\sphinxlineitem{TYPE=ERASE\sphinxhyphen{}FIELD}
\sphinxAtStartPar
indicates that the destination field is cleared to nulls before copying the data.

\end{description}

\end{description}

\end{description}

\sphinxAtStartPar
If the destination row and column specify a protected field of the 3270 screen, the scenario terminates abnormally and message VIRS129E is issued to the system console. If the destination field is unprotected but the string is too long for the field, the string will be silently truncated.

\index{COPY\$ VALUE\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE@\spxentry{COPY\$ VALUE\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}!COPY\$@\spxentry{COPY\$}}\index{COPY\$@\spxentry{COPY\$}!COPY\$ VALUE\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE@\spxentry{COPY\$ VALUE\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{COPY\$ VALUE\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}

\sphinxAtStartPar
Copies a constant value to a variable.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
COPY\PYGZdl{} VALUE\PYGZhy{}TO\PYGZhy{}VARIABLE,VALUE=\PYGZsq{}string\PYGZsq{},VAR=\PYGZsq{}name2\PYGZsq{},TYPE=type
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{string}
\sphinxAtStartPar
characters to be copied into the variable name2.

\sphinxlineitem{name2}
\sphinxAtStartPar
the name of a VIRTEL table variable. If the variable does not exist, it will be created.

\sphinxlineitem{type}
\sphinxAtStartPar
(optional) may indicate one of the following values:
\begin{quote}
\begin{description}
\sphinxlineitem{TYPE=REPLACE}
\sphinxAtStartPar
indicates that the new value will replace the existing value of the variable. If TYPE=REPLACE is not specified, and the variable already exists, the new value will be appended to any existing values.

\end{description}
\end{quote}

\end{description}

\sphinxAtStartPar
The COPY\$ VALUE\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE instruction allows the DUP (X’1C’) and FM (X’1E’) characters to be included in the value of a variable which can subsequently be referenced by the COPY\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}SCREEN instruction.

\sphinxAtStartPar
The following example shows the instructions required to place FIELD MARK (X’1E’) followed by W (X’E6’) at the cursor position and press ENTER:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
COPY\PYGZdl{} VALUE\PYGZhy{}TO\PYGZhy{}VARIABLE,VAR=\PYGZsq{}FIELDMARK\PYGZhy{}W\PYGZsq{},TYPE=REPLACE,                    *
        VALUE=X\PYGZsq{}1EE6\PYGZsq{}
COPY\PYGZdl{} VARIABLE\PYGZhy{}TO\PYGZhy{}SCREEN,VAR=\PYGZsq{}FIELDMARK\PYGZhy{}W’
ACTION\PYGZdl{} TO\PYGZhy{}APPLICATION,KEY=7D
\end{sphinxVerbatim}

\index{COPY\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}SCREEN@\spxentry{COPY\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}SCREEN}!COPY\$@\spxentry{COPY\$}}\index{COPY\$@\spxentry{COPY\$}!COPY\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}SCREEN@\spxentry{COPY\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}SCREEN}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{COPY\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}SCREEN}

\sphinxAtStartPar
Copies the value of a variable to a given position on the 3270 screen. In the case of a table variable, only the first value is copied.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
COPY\PYGZdl{} VARIABLE\PYGZhy{}TO\PYGZhy{}SCREEN,VAR=\PYGZsq{}name2\PYGZsq{},SCREEN=(row,col,len),TYPE=type
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{name2}
\sphinxAtStartPar
the name of a VIRTEL variable.

\sphinxlineitem{row,col,len}
\sphinxAtStartPar
row, column, and length of the destination field on the screen. If the SCREEN parameter is not specified, the variable will be copied to the current cursor position. For row, col and len, a value of ‘=’ means the value of the current row, col or len as set by {\hyperref[\detokenize{User_Guide:v462ug-set-screen-position}]{\sphinxcrossref{\DUrole{std,std-ref}{“SET\$ SCREEN\sphinxhyphen{}POSITION”}}}}.

\sphinxlineitem{type}
\sphinxAtStartPar
(optional) may indicate one of the following values:
\begin{quote}
\begin{description}
\sphinxlineitem{TYPE=ERASE\sphinxhyphen{}FIELD}
\sphinxAtStartPar
indicates that the destination field is cleared to nulls before copying the data. If the variable name2 does not exist, the NOT\sphinxhyphen{}FOUND condition will be raised. This condition can be tested by means of the {\hyperref[\detokenize{User_Guide:v462ug-if}]{\sphinxcrossref{\DUrole{std,std-ref}{“IF\$ instruction”}}}}. If the destination row and column specify a protected field of the 3270 screen, the scenario terminates abnormally and message VIRS129E is issued to the system console. If the destination field is unprotected but the variable value is too long for the field, the data will be silently truncated.

\end{description}
\end{quote}

\end{description}

\index{COPY\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}SYSTEM@\spxentry{COPY\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}SYSTEM}!COPY\$@\spxentry{COPY\$}}\index{COPY\$@\spxentry{COPY\$}!COPY\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}SYSTEM@\spxentry{COPY\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}SYSTEM}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{COPY\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}SYSTEM}

\sphinxAtStartPar
Copies the value of a variable to a VIRTEL system field. In the case of a table variable, only the first value is copied.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
COPY\PYGZdl{} VARIABLE\PYGZhy{}TO\PYGZhy{}SYSTEM,VAR=varname,FIELD=(class,item)
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{varname}
\sphinxAtStartPar
the name of a VIRTEL variable.

\sphinxlineitem{class}
\sphinxAtStartPar
identifies the type of VIRTEL system field to be updated. The following values may be specified:
\begin{quote}
\begin{description}
\sphinxlineitem{NAME\sphinxhyphen{}OF}
\sphinxAtStartPar
A VIRTEL data item is to be updated. When NAME\sphinxhyphen{}OF is specified, item represents the name of a VIRTEL data item.

\sphinxlineitem{NUMBER\sphinxhyphen{}OF}
\sphinxAtStartPar
A VIRTEL data item is to be updated. When NUMBER\sphinxhyphen{}OF is specified, item represents the name of a VIRTEL numeric data item.

\sphinxlineitem{VALUE\sphinxhyphen{}OF}
\sphinxAtStartPar
A VIRTEL data item is to be updated. When VALUE\sphinxhyphen{}OF is specified, item represents the name of a VIRTEL data item. VALUE\sphinxhyphen{}OF is synonymous with NAME\sphinxhyphen{}OF.

\sphinxlineitem{OLD\sphinxhyphen{}PASSTICKET\sphinxhyphen{}FOR\sphinxhyphen{}TRANSACTION}
\sphinxAtStartPar
Evaluates the Passticket currently in ‘varname’ for the transaction ‘item’. If the evaluation fails, the NOT\sphinxhyphen{}FOUND condition will be raised. This condition can be tested by means of the {\hyperref[\detokenize{User_Guide:v462ug-if}]{\sphinxcrossref{\DUrole{std,std-ref}{“IF\$ instruction”}}}}.

\end{description}
\end{quote}

\sphinxlineitem{item}
\sphinxAtStartPar
When class is NAME\sphinxhyphen{}OF or VALUE\sphinxhyphen{}OF, the following VIRTEL data items may be specified:
\begin{quote}
\begin{description}
\sphinxlineitem{DIRECTORY}
\sphinxAtStartPar
Allows a scenario to specify the name of the VIRTEL directory The user name which will appear in the VIRLOG entry for this transaction.

\sphinxlineitem{USER}
\sphinxAtStartPar
Allows a scenario to specify the user name which will appear in the VIRLOG entry for this transaction and which will become the value of the system variable \&U (see “Connection/disconnection scripts” in the VIRTEL Connectivity Guide).

\sphinxlineitem{PASSWORD}
\sphinxAtStartPar
Allows a scenario to specify the password which will become the value of the system variable \&P (see “Connection/disconnection scripts” in the VIRTEL Connectivity Guide).

\sphinxlineitem{LOGMODE}
\sphinxAtStartPar
The name of the logmode to be used for the VTAM session with the host application. The logmode can be set in an Identification Scenario. It overrides the logmode specified in the terminal definition. It \sphinxstylestrong{does not} override any logmode specified in the transaction definition.

\sphinxlineitem{ROUTING\sphinxhyphen{}PARAMETER}
\sphinxAtStartPar
Allows an Identification Scenario to override the value of the routing parameter specified in the userdata field of the URL (see {\hyperref[\detokenize{User_Guide:v462ug-url-formats}]{\sphinxcrossref{\DUrole{std,std-ref}{“Virtel URL formats”}}}}).

\sphinxlineitem{RELAY}
\sphinxAtStartPar
Allows a identification Scenarion to override the value of the relay LU name used to connect to the host application.

\end{description}
\end{quote}

\end{description}

\sphinxAtStartPar
When class is NUMBER\sphinxhyphen{}OF, the following VIRTEL data items may be specified:
\begin{quote}
\begin{description}
\sphinxlineitem{SCREEN\sphinxhyphen{}COLUMNS}
\sphinxAtStartPar
The alternate width (number of columns) of the 3270 screen SCREEN\sphinxhyphen{}LINES.

\sphinxAtStartPar
The alternate depth (number of rows) of the 3270 screen SCREEN\sphinxhyphen{}COLUMNS and SCREEN\sphinxhyphen{}LINES can be set in an Identification Scenario. These parameters allow the scenario to specify the desired screen size when a dynamic logmode such as D4A32XX3 is used and the host application places the 3270 session in alternate mode using the Erase Write Alternate command. This command has no effect on the primary screen size which is always 24 rows by 80 columns.

\end{description}
\end{quote}
\begin{description}
\sphinxlineitem{item}
\sphinxAtStartPar
When class is OLD\sphinxhyphen{}PASSTICKET\sphinxhyphen{}FOR\sphinxhyphen{}TRANSACTION, the following VIRTEL data item must be specified:
\begin{quote}

\sphinxAtStartPar
TSO
To validate the PassTicket for TSO
\end{quote}

\end{description}

\index{COPY\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE@\spxentry{COPY\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}!COPY\$@\spxentry{COPY\$}}\index{COPY\$@\spxentry{COPY\$}!COPY\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE@\spxentry{COPY\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{COPY\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}

\sphinxAtStartPar
Copies a source variable to a target variable.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
COPY\PYGZdl{} VARIABLE\PYGZhy{}TO\PYGZhy{}VARIABLE,VAR=(source,target),
      OFFSET=offset,LENGTH=lend,PAD=\PYGZsq{}padChar \PYGZsq{},TYPE=type
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{source}
\sphinxAtStartPar
characters to be copied into the target variable.

\sphinxlineitem{target}
\sphinxAtStartPar
the name of a VIRTEL table variable. If the variable does not exist, it will be created.

\sphinxlineitem{offset}
\sphinxAtStartPar
(optional) the beginning index (defaulting to 0), inclusive, of the text to copy in source.

\sphinxlineitem{len}
\sphinxAtStartPar
(optional) the number of characters to copy.

\sphinxlineitem{padChar}
\sphinxAtStartPar
(optional) the character (defaulting to space) to pad target var, if length is longer than the source..

\sphinxlineitem{type}
\sphinxAtStartPar
(optional) indicates that the new value will replace the existing value of the variable. If TYPE=REPLACE is not specified, and the variable already exists, the new value will be appended to any existing values.

\end{description}

\sphinxAtStartPar
The following example will display ‘Target value is : Doe\_\_\_\_’

\begin{sphinxVerbatim}[commandchars=\\\{\}]
COPY\PYGZdl{} VALUE\PYGZhy{}TO\PYGZhy{}VARIABLE,VAR=source,VALUE=\PYGZsq{}John Doe\PYGZsq{}
COPY\PYGZdl{} VARIABLE\PYGZhy{}TO\PYGZhy{}VARIABLE,VAR=(source,target),OFFSET=5,                    X
        LENGTH=7,PAD=\PYGZsq{}\PYGZus{}\PYGZsq{}
ERROR\PYGZdl{} 0,\PYGZsq{}Target value is : \PYGZsq{},\PYGZsq{}*target\PYGZsq{}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{COPY\$ Example}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    SCENSITE SCREENS APPL=SCENSITE,EXEC=NO
*
* SCENARIO for SiteMinder
*
* The purpose of this scenario is to retrieve the contents of
* the identification headers inserted by the SiteMinder Proxy
*
    SCENARIO IDENTIFICATION
*
    COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,VAR=\PYGZsq{}USER\PYGZsq{}, \PYGZhy{}
        FIELD=(TCT\PYGZhy{}HTTP\PYGZhy{}HEADER,SM\PYGZus{}USER)
    IF\PYGZdl{} NOT\PYGZhy{}FOUND,THEN=NOUSER1
    COPY\PYGZdl{} VARIABLE\PYGZhy{}TO\PYGZhy{}SYSTEM,VAR=\PYGZsq{}USER\PYGZsq{}, \PYGZhy{}
        FIELD=(NAME\PYGZhy{}OF,USER)
*
EXIT1 DS 0H
    SCENARIO END
*
NOUSER1 DS 0H
    ERROR\PYGZdl{} 0,\PYGZsq{}SCENSITE ERROR: NO USER VARIABLE\PYGZsq{}
GOTO\PYGZdl{} EXIT1
    SCRNEND
    END
\end{sphinxVerbatim}

\sphinxAtStartPar
Example scenario with COPY\$

\index{DEBUG\$@\spxentry{DEBUG\$}!Scenario Intructions@\spxentry{Scenario Intructions}}\index{Scenario Intructions@\spxentry{Scenario Intructions}!DEBUG\$@\spxentry{DEBUG\$}}\ignorespaces 

\subsubsection{DEBUG\$ instruction}
\label{\detokenize{User_Guide:debug-instruction}}\label{\detokenize{User_Guide:index-251}}
\sphinxAtStartPar
This instruction allows a scenario to activate various debugging functions.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
DEBUG\PYGZdl{} [NO]TRACE,LINE|TERMINAL|SCENARIO,
        WHEN=(TRANSACTION\PYGZhy{}NAME\PYGZhy{}STARTS\PYGZhy{}WITH,\PYGZsq{}prefix\PYGZsq{})|ALWAYS
DEBUG\PYGZdl{} SNAP[,TERMINAL],
        WHEN=(TRANSACTION\PYGZhy{}NAME\PYGZhy{}STARTS\PYGZhy{}WITH,\PYGZsq{}prefix\PYGZsq{})|ALWAYS
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{TRACE,LINE or NOTRACE,LINE}
\sphinxAtStartPar
Starts or stops a trace on the current line. The trace is written to the VIRTRACE file.

\sphinxlineitem{TRACE,TERMINAL or NOTRACE,TERMINAL}
\sphinxAtStartPar
Starts or stops a trace on the current terminal. The trace is written to the VIRTRACE file.

\sphinxlineitem{TRACE,SCENARIO or NOTRACE,SCENARIO}
\sphinxAtStartPar
Starts or stops a trace on the scenario. The trace is downloadable by means of the {\hyperref[\detokenize{User_Guide:v462ug-create-variable-if}]{\sphinxcrossref{\DUrole{std,std-ref}{“CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}IF”}}}} tag intended for use by Virtel Studio.

\sphinxlineitem{SNAP}
\sphinxAtStartPar
Generates a snapshot of the VIRTEL internal trace table in the SYSPRINT file (same as the command F VIRTEL,SNAP).

\sphinxAtStartPar
SNAP is described in the “Audit and Performance” chapter of the VIRTEL Messages and Operations Guide.

\sphinxlineitem{SNAP,TERMINAL}
\sphinxAtStartPar
Generates a snapshot including terminal information (same as the command F VIRTEL,SNAP,T=termid where termid is the current terminal name).

\sphinxlineitem{WHEN=ALWAYS}
\sphinxAtStartPar
The DEBUG\$ instruction is executed unconditionally. This is the default.

\sphinxlineitem{WHEN=(TRANSACTION\sphinxhyphen{}NAME\sphinxhyphen{}STARTS\sphinxhyphen{}WITH,’prefix’)}
\sphinxAtStartPar
The DEBUG\$ instruction is executed only if the external name of the transaction being used begins with the characters specified by the string prefix.

\end{description}

\index{DEBUG\$ Example@\spxentry{DEBUG\$ Example}!Scenario Intructions@\spxentry{Scenario Intructions}}\index{Scenario Intructions@\spxentry{Scenario Intructions}!DEBUG\$ Example@\spxentry{DEBUG\$ Example}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{DEBUG\$ Example}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
    TSTSCLON SCREENS APPL=TSTSCLON    *
        SCENARIO INITIAL
        DEBUG\PYGZdl{} TRACE,LINE,WHEN=ALWAYS
        DEBUG\PYGZdl{} TRACE,TERMINAL
*
        DEBUG\PYGZdl{} TRACE,SCENARIO,                                        *
            WHEN=(TRANSACTION\PYGZhy{}NAME\PYGZhy{}STARTS\PYGZhy{}WITH,\PYGZsq{}DB\PYGZsq{})

        COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,VAR=VAR1,                            *
            FIELD=(VALUE\PYGZhy{}OF,SYSCLONE\PYGZhy{}SYMBOL)
        ERROR\PYGZdl{} 0,\PYGZsq{}SYSCLONE: \PYGZsq{},\PYGZsq{}*VAR1\PYGZsq{}
        COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,VAR=VAR1,                            *
            FIELD=(VALUE\PYGZhy{}OF,SYSPLEX\PYGZhy{}SYMBOL)
        ERROR\PYGZdl{} 0,\PYGZsq{}SYSPLEX: \PYGZsq{},\PYGZsq{}*VAR1\PYGZsq{}
*
        COPY\PYGZdl{} SYSTEM\PYGZhy{}TO\PYGZhy{}VARIABLE,VAR=VAR1,                            *
            FIELD=(NAME\PYGZhy{}OF,CHARACTER\PYGZhy{}SET)
        ERROR\PYGZdl{} 0,\PYGZsq{}CHARACTER\PYGZhy{}SET: \PYGZsq{},\PYGZsq{}*VAR1\PYGZsq{}
        DEBUG\PYGZdl{} NOTRACE,SCENARIO
        DEBUG\PYGZdl{} SNAP,TERMINAL
        SCENARIO END
        SCRNEND
        END    ,
\end{sphinxVerbatim}

\sphinxAtStartPar
Example scenario with DEBUG\$

\index{DECLARE\$@\spxentry{DECLARE\$}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!DECLARE\$@\spxentry{DECLARE\$}}\ignorespaces 

\subsubsection{DECLARE\$ instruction}
\label{\detokenize{User_Guide:declare-instruction}}\label{\detokenize{User_Guide:index-253}}
\sphinxAtStartPar
This instruction defines a portion of the screen as a clickable hyperlink. The hyperlink can invoke either a 3270 key (ENTER or PFnn), a JavaScript procedure, or an external URL. The generation of the hyperlink can optionally be conditional on the presence or absence of a particular value at the 3270 screen position. In any case, the hyperlink is generated only if the specified screen position is non\sphinxhyphen{}blank. It is designed to be used with the WEB2VIRT.htm template and in conjuction with the “GENERATE\sphinxhyphen{}HTML” tag.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
DECLARE\PYGZdl{} (row,col,len,\PYGZsq{}value\PYGZsq{},Condition),P1,P2,P3,TO=P4
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{row}
\sphinxAtStartPar
Specifies the row position of the hyperlink

\sphinxlineitem{col}
\sphinxAtStartPar
Specifies the column position of the hyperlink

\sphinxlineitem{len}
\sphinxAtStartPar
Specifies the length of the hyperlink

\sphinxlineitem{value}
\sphinxAtStartPar
Optional, this parameter specifies the value of the data tested at the specified screen position. Must be put in quotes

\sphinxlineitem{Condition}
\sphinxAtStartPar
Optional, this parameter determines the type of condition applicable to value
\begin{quote}
\begin{description}
\sphinxlineitem{EQ}
\sphinxAtStartPar
Equality (value by default).

\sphinxlineitem{NE}
\sphinxAtStartPar
Inequality.

\end{description}
\end{quote}

\sphinxlineitem{P1}
\sphinxAtStartPar
Specifies the type of processing applicable. The permissible values are:

\sphinxlineitem{AS\sphinxhyphen{}PFKEY}
\sphinxAtStartPar
Indicates that the indicated portion of the screen is to be interpreted as a function key hyperlink. The value of the function key (ENTER, PF1, etc) can be specified by parameter P2. If P2 is not specified, then the data at the indicated screen position is interpreted as the name of the function key. The values allowable as function key names are the same as those for {\hyperref[\detokenize{User_Guide:v462ug-pfkfield}]{\sphinxcrossref{\DUrole{std,std-ref}{“PfkField”}}}})

\sphinxlineitem{AS\sphinxhyphen{}PARAMETER}
\sphinxAtStartPar
Indicates that the indicated portion of the screen is to be treated as a hyperlink which calls a JavaScript function. The data at the indicated screen position is passed as a parameter to the JavaScript function. The name of the JavaScript function is specified in the TO parameter of the DECLARE\$ instruction. See {\hyperref[\detokenize{User_Guide:v462ug-javascript-functions}]{\sphinxcrossref{\DUrole{std,std-ref}{“JavaScript functions”}}}} for further details.

\sphinxlineitem{AS\sphinxhyphen{}HREF}
\sphinxAtStartPar
Indicates that the indicated portion of the screen is to be treated as a hyperlink which invokes the URL specified in the TO parameter of the DECLARE\$instruction. The data at the indicated screen position is appended to the URL, followed by the contents of the P2 parameter of the DECLARE\$ instruction, if specified.

\sphinxlineitem{P2}
\sphinxAtStartPar
(optional) Function parameter referenced by P1.

\sphinxlineitem{P3}
\sphinxAtStartPar
(optional) Text to be displayed in the status bar of the browser when the mouse pointer is over the indicated screen position.

\sphinxlineitem{P4}
\sphinxAtStartPar
Name of JavaScript function (for AS\sphinxhyphen{}PARAMETER) or URL (for AS\sphinxhyphen{}HREF).

\end{description}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
In conformance with assembler syntax, quotes and ampersands in the URL must be specified as double quotes and double ampersands.
\end{sphinxadmonition}
\phantomsection\label{\detokenize{User_Guide:v462ug-javascript-functions}}
\index{DECLARE and JavaScript functions@\spxentry{DECLARE and JavaScript functions}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!DECLARE and JavaScript functions@\spxentry{DECLARE and JavaScript functions}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{DECLARE\$ and JavaScript functions}

\sphinxAtStartPar
For the AS\sphinxhyphen{}PARAMETER form of the DECLARE\$ instruction, the TO parameter specifies the name of a JavaScript function which will be called when the user clicks on the field. The function name is case\sphinxhyphen{}sensitive. The following parameters are passed to the JavaScript function:
\begin{description}
\sphinxlineitem{Parameter 1}
\sphinxAtStartPar
an internally generated field name

\sphinxlineitem{Parameter 2}
\sphinxAtStartPar
the data at the indicated screen position

\sphinxlineitem{Parameter 3}
\sphinxAtStartPar
the contents of the P2 parameter of the DECLARE\$ instruction

\end{description}

\sphinxAtStartPar
The JavaScript function itself must be defined in the HTML template page, or in an included page. The following standard functions are provided in the page js01.js delivered with VIRTEL in the W2H\sphinxhyphen{}DIR directory:
\begin{description}
\sphinxlineitem{VClick}
\sphinxAtStartPar
Moves the cursor to the start of the clickable area and sends the indicated function key (P2 parameter) to the host application

\sphinxlineitem{VClick2}
\sphinxAtStartPar
Copies the contents of the clickable area to the field containing the cursor and sends the indicated function key (P2 parameter) to the host application

\sphinxlineitem{VClick3}
\sphinxAtStartPar
Copies the contents of the clickable area to the following input field and sends the indicated function key (P2 parameter) to the host application

\end{description}

\index{DECLARE\$Examples@\spxentry{DECLARE\$Examples}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!DECLARE\$Examples@\spxentry{DECLARE\$Examples}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{DECLARE\$ Examples}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
DECLARE\PYGZdl{} (23,19,04),AS\PYGZhy{}PFKEY
\end{sphinxVerbatim}

\sphinxAtStartPar
Row 23 column 19 length 4 becomes a clickable field. The contents of the field are treated as the name of a PF key. For example, if the field contains “PF12” then clicking on this field is equivalent to pressing the 3270 key PF12.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
DECLARE\PYGZdl{} (14,17,03),AS\PYGZhy{}PFKEY,\PYGZsq{}PA2\PYGZsq{}
\end{sphinxVerbatim}

\sphinxAtStartPar
Row 14 column 17 length 3 becomes a clickable field. When clicked it is the equivalent of pressing the 3270 key PA2.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
DECLARE\PYGZdl{} (24,02,04,\PYGZsq{}****\PYGZsq{},NE),AS\PYGZhy{}PFKEY
\end{sphinxVerbatim}

\sphinxAtStartPar
Row 24 column 2 length 4 becomes a clickable field, unless it contains asterisks. The contents of the field are treated as the name of a PF key.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
DECLARE\PYGZdl{} (20,02,06),AS\PYGZhy{}PARAMETER,\PYGZsq{}PF12\PYGZsq{},TO=VClick
\end{sphinxVerbatim}

\sphinxAtStartPar
Row 20 column 2 length 6 becomes a clickable field. It calls the JavaScript function VClick(‘Vxxxxxxx’,’cccccc’,’PF12’) where Vxxxxxxx is an internally generated field name, cccccc is the contents of the field, and PF12 is a constant specified in the DECLARE\$ instruction.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
DECLARE\PYGZdl{} (04,09,17),AS\PYGZhy{}HREF,\PYGZsq{}\PYGZam{}\PYGZam{}hl=fr\PYGZsq{},                              X
    TO=\PYGZsq{}http://www.google.com/search?q=\PYGZsq{}
\end{sphinxVerbatim}

\sphinxAtStartPar
Row 4 column 9 length 17 becomes a clickable field, hyperlinked to the URL:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
http//www.google.com/search?=ccc...ccc\PYGZam{}hl=fr
\end{sphinxVerbatim}

\sphinxAtStartPar
(where ccc…ccc is replaced by the contents of the clickable field)

\index{ENDFOR\$@\spxentry{ENDFOR\$}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!ENDFOR\$@\spxentry{ENDFOR\$}}\ignorespaces 

\subsubsection{ENDFOR\$ instruction}
\label{\detokenize{User_Guide:endfor-instruction}}\label{\detokenize{User_Guide:index-256}}
\sphinxAtStartPar
This instruction marks the end of a FOREACH loop.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
ENDFOR\PYGZdl{} groupname
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{groupname}
\sphinxAtStartPar
The label is required. It must match the label on the corresponding FOREACH\$ VALUE\sphinxhyphen{}IN\sphinxhyphen{}SCREEN or FOREACH\$ VALUE\sphinxhyphen{}IN\sphinxhyphen{}VARIABLE instruction.

\end{description}

\sphinxAtStartPar
\sphinxstylestrong{ENDFOR\$ Examples}

\sphinxAtStartPar
In the example below, the value of VAR1 which is copied is the current value in the FOREACH\$ loop.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
LOOP1    FOREACH\PYGZdl{} VALUE\PYGZhy{}IN\PYGZhy{}VARIABLE,VAR=VAR1

        COPY\PYGZdl{} VARIABLE\PYGZhy{}TO\PYGZhy{}SCREEN,VAR=VAR1,FOREACH=LOOP1,             *
            SCREEN=(=,=,=)

        COPY\PYGZdl{} VARIABLE\PYGZhy{}TO\PYGZhy{}VARIABLE,VAR=(VAR1,VAR2),FOREACH=LOOP1,    *
            OFFSET=8,LENGTH=5,PAD=\PYGZsq{} \PYGZsq{}


        ENDFOR\PYGZdl{} LOOP1
\end{sphinxVerbatim}

\index{ERROR\$@\spxentry{ERROR\$}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!ERROR\$@\spxentry{ERROR\$}}\ignorespaces 

\subsubsection{ERROR\$ instruction}
\label{\detokenize{User_Guide:error-instruction}}\label{\detokenize{User_Guide:index-257}}
\sphinxAtStartPar
This instruction returns an error code to the calling program. When this instruction is used, the return code in the
HTTP response will be “400 Bad Request” instead of “200 Ok”.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
ERROR\PYGZdl{} value [,\PYGZsq{}string1\PYGZsq{},\PYGZsq{}string2\PYGZsq{},...]
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{value}
\sphinxAtStartPar
Specifies the error code (decimal 0 to 255). If the error code is non\sphinxhyphen{}zero, a message is issued to the console and the scenario returns the error code to the calling program. If the error code is zero, a message is issued to the console and the scenario continues.

\sphinxlineitem{‘string1’ {[},’string2’, …{]}}
\sphinxAtStartPar
(optional) one or more strings of text to be concatenated together and displayed as a message on the console. If a string begins with an asterisk it represents the name of a VIRTEL variable whose contents is to be included in the message. The number of quoted strings is not limited, but the message itself cannot be larger than 252 characters.

\end{description}

\sphinxAtStartPar
\sphinxstylestrong{ERROR\$ Examples}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
GOOD\PYGZdl{} DS 0H
    ERROR\PYGZdl{} 0,\PYGZsq{}SCENSITE FINISHED: OK\PYGZsq{}
    GOTO\PYGZdl{} EXIT
BADG\PYGZdl{} DS 0H
    ERROR\PYGZdl{} 1,\PYGZsq{}SCENSITE FAILED: RC = 1\PYGZsq{}
    GOTO\PYGZdl{} EXIT
\end{sphinxVerbatim}

\index{FIELDS\$@\spxentry{FIELDS\$}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!FIELDS\$@\spxentry{FIELDS\$}}\ignorespaces 
\sphinxAtStartPar
Scenarios


\subsubsection{FIELD\$ instruction}
\label{\detokenize{User_Guide:field-instruction}}
\sphinxAtStartPar
This instruction defines the position and the length of the 3270 selection involved, as well as the set of presentation rules.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
FIELD\PYGZdl{} (row,col,len),operation,param\PYGZhy{}1,param\PYGZhy{}2,...,param\PYGZhy{}N
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{row}
\sphinxAtStartPar
Specifies the row position of the field

\sphinxlineitem{col}
\sphinxAtStartPar
Specifies the column position of the field

\sphinxlineitem{len}
\sphinxAtStartPar
Specifies the length of the field

\sphinxlineitem{operation}
\sphinxAtStartPar
Defines the presentation rule. The permissible values are:
\begin{quote}
\begin{description}
\sphinxlineitem{DEFINE\sphinxhyphen{}CHOICE}
\sphinxAtStartPar
Adds a value of type SELECT

\sphinxlineitem{DEFINE\sphinxhyphen{}VARIABLE\sphinxhyphen{}CHOICE}
\sphinxAtStartPar
Adds multiple values of type SELECT

\sphinxlineitem{IS\sphinxhyphen{}BINARY\sphinxhyphen{}CHOICE}
\sphinxAtStartPar
Defines a field as a checkbox

\sphinxlineitem{HIDE}
\sphinxAtStartPar
Defines a field as non\sphinxhyphen{}display param\sphinxhyphen{}N

\sphinxAtStartPar
Depends on the contents of the operation.

\end{description}
\end{quote}

\end{description}

\sphinxAtStartPar
The FIELD\$ instruction only operates on input fields.

\index{FIELD\$ DEFINE\sphinxhyphen{}CHOICE@\spxentry{FIELD\$ DEFINE\sphinxhyphen{}CHOICE}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!FIELD\$ DEFINE\sphinxhyphen{}CHOICE@\spxentry{FIELD\$ DEFINE\sphinxhyphen{}CHOICE}}\index{FIELD\$ DEFINE\sphinxhyphen{}CHOICE@\spxentry{FIELD\$ DEFINE\sphinxhyphen{}CHOICE}!FIELDS\$@\spxentry{FIELDS\$}}\index{FIELDS\$@\spxentry{FIELDS\$}!FIELD\$ DEFINE\sphinxhyphen{}CHOICE@\spxentry{FIELD\$ DEFINE\sphinxhyphen{}CHOICE}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{FIELD\$ DEFINE\sphinxhyphen{}CHOICE}

\sphinxAtStartPar
Generates a SELECT type entry field for the 3270 field concerned. This instruction requires a VAL parameter and
optionally a SHOW parameter.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
FIELD\PYGZdl{} (row,col,len),DEFINE\PYGZhy{}CHOICE,VAL=\PYGZsq{}value\PYGZsq{},SHOW=\PYGZsq{}label\PYGZsq{}
\end{sphinxVerbatim}

\sphinxAtStartPar
The VAL parameter generates an OPTION value for the SELECT field.
The optional SHOW parameter allows the specification of the text displayed in the SELECT field for the given value. If
the SHOW parameter is omitted, the text displayed is identical to the value.

\index{FIELD\$ DEFINE\sphinxhyphen{}VARIABLE\sphinxhyphen{}CHOICE@\spxentry{FIELD\$ DEFINE\sphinxhyphen{}VARIABLE\sphinxhyphen{}CHOICE}!FIELDS\$@\spxentry{FIELDS\$}}\index{FIELDS\$@\spxentry{FIELDS\$}!FIELD\$ DEFINE\sphinxhyphen{}VARIABLE\sphinxhyphen{}CHOICE@\spxentry{FIELD\$ DEFINE\sphinxhyphen{}VARIABLE\sphinxhyphen{}CHOICE}}\index{FIELD\$ DEFINE\sphinxhyphen{}VARIABLE\sphinxhyphen{}CHOICE@\spxentry{FIELD\$ DEFINE\sphinxhyphen{}VARIABLE\sphinxhyphen{}CHOICE}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!FIELD\$ DEFINE\sphinxhyphen{}VARIABLE\sphinxhyphen{}CHOICE@\spxentry{FIELD\$ DEFINE\sphinxhyphen{}VARIABLE\sphinxhyphen{}CHOICE}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{FIELD\$ DEFINE\sphinxhyphen{}VARIABLE\sphinxhyphen{}CHOICE}

\sphinxAtStartPar
Generates a list of SELECT entries for the 3270 field concerned. This instruction requires a VAL parameter.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
FIELD\PYGZdl{} (row,col,len),DEFINE\PYGZhy{}VARIABLE\PYGZhy{}CHOICE,VAL=varname
\end{sphinxVerbatim}

\sphinxAtStartPar
The VAL parameter of a DEFINE\sphinxhyphen{}VARIABLE\sphinxhyphen{}CHOICE operation specifies the name of a table variable which contains the
OPTION values for the SELECT statement generated for the 3270 field concerned. These values must be supplied by the
3270 application by means of a structured field type FAE5 or FAE6, or by means of the HOST4WEB command S
VARIABLE. Structured fields are described in the VIRTEL Programming Interface documentation 263 HOST4WEB
commands are described in the VIRTEL Programming Interface documentation 274

\index{FIELD\$ IS\sphinxhyphen{}BINARY\sphinxhyphen{}CHOICE@\spxentry{FIELD\$ IS\sphinxhyphen{}BINARY\sphinxhyphen{}CHOICE}!FIELDS\$@\spxentry{FIELDS\$}}\index{FIELDS\$@\spxentry{FIELDS\$}!FIELD\$ IS\sphinxhyphen{}BINARY\sphinxhyphen{}CHOICE@\spxentry{FIELD\$ IS\sphinxhyphen{}BINARY\sphinxhyphen{}CHOICE}}\index{FIELD\$ IS\sphinxhyphen{}BINARY\sphinxhyphen{}CHOICE@\spxentry{FIELD\$ IS\sphinxhyphen{}BINARY\sphinxhyphen{}CHOICE}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!FIELD\$ IS\sphinxhyphen{}BINARY\sphinxhyphen{}CHOICE@\spxentry{FIELD\$ IS\sphinxhyphen{}BINARY\sphinxhyphen{}CHOICE}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{FIELD\$ IS\sphinxhyphen{}BINARY\sphinxhyphen{}CHOICE}

\sphinxAtStartPar
Generates an INPUT TYPE=CHECKBOX field for the 3270 field concerned. This is useful for 3270 fields which can take
two values: one value representing a “checked” box and the other value representing an “unchecked” box. This
instruction requires a VAL parameter and optionally a NOTVAL parameter.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
FIELD\PYGZdl{} (row,col,len),IS\PYGZhy{}BINARY\PYGZhy{}CHOICE,VAL=\PYGZsq{}value\PYGZsq{},NOTVAL=\PYGZsq{}value\PYGZsq{}
\end{sphinxVerbatim}

\sphinxAtStartPar
For output messages, the box will be displayed as checked if the value of the 3270 field matches the VAL parameter,
otherwise it will be displayed as unchecked. For input messages, the VAL parameter specifies the value which will be
transmitted to the application in the 3270 field when the box is checked, and the NOTVAL parameter specifies the
value to be transmitted to the application if the box is unchecked. If the NOTVAL parameter is omitted then an empty
field will be transmitted to the application if the box is unchecked.

\sphinxAtStartPar
\sphinxstylestrong{FIELD\$ HIDE}

\sphinxAtStartPar
Generates an INPUT TYPE=HIDDEN field for the 3270 field concerned. This instruction takes no additional parameters.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
FIELD\PYGZdl{} (row,col,len),HIDE
\end{sphinxVerbatim}

\index{FILTER@\spxentry{FILTER}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!FILTER@\spxentry{FILTER}}\ignorespaces 

\subsubsection{FILTER\$ instruction}
\label{\detokenize{User_Guide:filter-instruction}}\label{\detokenize{User_Guide:index-262}}
\sphinxAtStartPar
\sphinxstylestrong{FILTER\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE}

\sphinxAtStartPar
The FILTER\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}VARIABLE instruction creates or adds values to a variable from another variable according to
a list of conditions, similar to the conditions in a CASE\$ instruction.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
FILTER\PYGZdl{} VARIABLE\PYGZhy{}TO\PYGZhy{}VARIABLE,
FROM=\PYGZsq{}varname1\PYGZsq{},TO=\PYGZsq{}varname2\PYGZsq{},
(WHEN,\PYGZsq{}YYYY\PYGZsq{},THEN,\PYGZsq{}aaa\PYGZsq{}),
(BEGIN,\PYGZsq{}XXXX\PYGZsq{},THEN,\PYGZsq{}bbb\PYGZsq{}),
(CONTAINS,\PYGZsq{}ZZZZ\PYGZsq{},THEN,IGNORE),
(OTHERWISE,KEEP)
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{FROM,TO}
\sphinxAtStartPar
varname1 is the name of the VIRTEL variable whose values are to be inspected, and varname2 is the name of the VIRTEL variable to which values are to be added. The variable varname2 will be created if it does not exist.

\sphinxlineitem{WHEN,THEN}
\sphinxAtStartPar
when a value ‘YYYY’ is found in variable varname1, then the value ‘aaa’ will be added to varname2.

\sphinxlineitem{BEGIN,THEN}
\sphinxAtStartPar
when a value beginning with ‘XXXX’ is found in varname1, then the value ‘bbb’ will be added to varname2.

\sphinxlineitem{CONTAINS,THEN,IGNORE}
\sphinxAtStartPar
when a value containing ‘ZZZZ’ is found in varname1, then no value will be added to varname2.

\sphinxlineitem{OTHERWISE,KEEP}
\sphinxAtStartPar
the default action, if none of the preceding conditions is met, is to copy the value from varname1 to a new value in varname2.

\end{description}

\index{FOREACH@\spxentry{FOREACH}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!FOREACH@\spxentry{FOREACH}}\ignorespaces 

\subsubsection{FOREACH\$}
\label{\detokenize{User_Guide:foreach}}\label{\detokenize{User_Guide:index-263}}
\sphinxAtStartPar
\sphinxstylestrong{FOREACH\$ VALUE\sphinxhyphen{}IN\sphinxhyphen{}SCREEN instruction}

\sphinxAtStartPar
The FOREACH\$ VALUE\sphinxhyphen{}IN\sphinxhyphen{}SCREEN instruction marks the start of a loop on a screen. Nested pairs of FOREACH\$ and ENDFOR\$ instructions are permitted.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
groupname FOREACH\PYGZdl{} VALUE\PYGZhy{}IN\PYGZhy{}SCREEN,SCREEN=(row,col,len,ht)
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{groupname}
\sphinxAtStartPar
The label is required. The FOREACH\$ VALUE\sphinxhyphen{}IN\sphinxhyphen{}SCREEN instruction must be matched by a subsequent ENDFOR\$ targeting the same label.

\sphinxlineitem{row}
\sphinxAtStartPar
starting row of the portion of the screen to copy (see Note 1).

\sphinxlineitem{col}
\sphinxAtStartPar
starting column of the portion of the screen to copy (see Note 1).

\sphinxlineitem{len}
\sphinxAtStartPar
width (in columns) of the portion of the screen to copy (see Note 1).

\sphinxlineitem{ht}
\sphinxAtStartPar
height (in rows) of the portion of the screen to copy (see Note 1).

\end{description}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
For row, col,len and ht, a value of ‘=’ means the value of the current row, col, len or height
\end{sphinxadmonition}
\phantomsection\label{\detokenize{User_Guide:v462ug-foreach-variable}}
\sphinxAtStartPar
\sphinxstylestrong{FOREACH\$ VALUE\sphinxhyphen{}IN\sphinxhyphen{}VARIABLE instruction}

\sphinxAtStartPar
The FOREACH\$ VALUE\sphinxhyphen{}IN\sphinxhyphen{}VARIABLE instruction marks the start of a loop on a table variable. Nested pairs of FOREACH\$
VALUE\sphinxhyphen{}IN\sphinxhyphen{}VARIABLE and ENDFOR\$ instructions are permitted.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
groupname FOREACH\PYGZdl{} VALUE\PYGZhy{}IN\PYGZhy{}VARIABLE,VAR=varname
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{groupname}
\sphinxAtStartPar
The label is required. The FOREACH\$ VALUE\sphinxhyphen{}IN\sphinxhyphen{}VARIABLE instruction must be matched by a subsequent ENDFOR\$ targeting the same label.

\sphinxlineitem{varname}
\sphinxAtStartPar
The name of the table variable beeing looped on.

\end{description}

\index{GOTO\$@\spxentry{GOTO\$}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!GOTO\$@\spxentry{GOTO\$}}\ignorespaces 

\subsubsection{GOTO\$ instruction}
\label{\detokenize{User_Guide:goto-instruction}}\label{\detokenize{User_Guide:index-264}}
\sphinxAtStartPar
This instruction directs the subsequent processing flow to a specified label.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
GOTO\PYGZdl{} label
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{label}
\sphinxAtStartPar
Specifies the instruction label at which execution of the scenario is to continue.

\end{description}

\index{HANDLE\$@\spxentry{HANDLE\$}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!HANDLE\$@\spxentry{HANDLE\$}}\ignorespaces 

\subsubsection{HANDLE\$ instruction}
\label{\detokenize{User_Guide:handle-instruction}}\label{\detokenize{User_Guide:index-265}}
\sphinxAtStartPar
This instruction manages various handle operations within the context of a scenario.
\begin{description}
\sphinxlineitem{. index::}
\sphinxAtStartPar
pair: HANDLE\$ ABEND ; Scenario Instructions
pair: HANDLE\$ ABEND ; HANDLE\$

\end{description}

\sphinxAtStartPar
\sphinxstylestrong{HANDLE\$ ABEND instruction}

\sphinxAtStartPar
This instruction allows a scenario to continue after an ABEND, due for instance to trying to write on the screen at a
protected position, and directs the subsequent processing flow to a specified label.

\sphinxAtStartPar
HANDLE\$ ABEND=label
\begin{description}
\sphinxlineitem{label}
\sphinxAtStartPar
Specifies the instruction label at which execution of the scenario is to continue.

\sphinxlineitem{. index::}
\sphinxAtStartPar
pair: HANDLE\$ LOOP ; Scenario Instructions
pair: HANDLE\$ LOOP ; HANDLE\$

\end{description}

\sphinxAtStartPar
\sphinxstylestrong{HANDLE\$ LOOP instruction}

\sphinxAtStartPar
This instruction allows to detect loops in a scenario. When the limit is reached, VIRTEL abends the scenario, and a
message VIRS12IE terminal LOOP WAS DETECTED IN SCENARIO scenname

\begin{sphinxVerbatim}[commandchars=\\\{\}]
HANDLE\PYGZdl{} LOOP=(label,counter)
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{label}
\sphinxAtStartPar
Specifies the instruction label at which execution of the scenario is to continue if the counter limit is reached.

\sphinxlineitem{Counter}
\sphinxAtStartPar
Specifies the number of instructions executed beyond which the program will be switched to the label previously specified.

\end{description}

\sphinxAtStartPar
This instruction can also be used with one of the following syntaxes.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
HANDLE\PYGZdl{} LOOP=label
\end{sphinxVerbatim}

\sphinxAtStartPar
If no instruction counter is specified, VIRTEL will take 32 times the number of instructions in the scenario as a default
counter.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
HANDLE\PYGZdl{} LOOP=label,ABEND=abendroutine
\end{sphinxVerbatim}

\sphinxAtStartPar
Both handle conditions may be spécified simultaneously.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
GOTO\PYGZdl{} label,WHEN=(LOOP,counter)
\end{sphinxVerbatim}

\sphinxAtStartPar
The previous syntax wich is also valid is generated internaly by the HANDLE\$ instruction.
After the loop is detected, and the specified handling routine is called, a new HANDLE\$ LOOP= instruction may be
issued and processing may continue.

\sphinxAtStartPar
If no HANDLE\$ is specified, VIRTEL will still set an instruction limit, equal to 32 times the number of instructions in the
scenario.

\phantomsection\label{\detokenize{User_Guide:v462ug-if}}
\index{IF\$@\spxentry{IF\$}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!IF\$@\spxentry{IF\$}}\ignorespaces 

\subsubsection{IF\$ instruction}
\label{\detokenize{User_Guide:if-instruction}}\label{\detokenize{User_Guide:index-266}}
\sphinxAtStartPar
This instruction enables the testing of the presence of a value in a 3270 screen, or a value in a VIRTEL variable, or a
condition set by a previous instruction, and directs the subsequent processing flow.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
IF\PYGZdl{} (row,col,len),EQ=\PYGZsq{}value\PYGZsq{},THEN=process1,ELSE=process2
IF\PYGZdl{} VARIABLE,\PYGZsq{}varname\PYGZsq{},EQ=\PYGZsq{}value\PYGZsq{},THEN=process1,ELSE=process2
IF\PYGZdl{} EXISTS\PYGZhy{}VARIABLE,\PYGZsq{}varname\PYGZsq{},THEN=process1,ELSE=process2
IF\PYGZdl{} NOT\PYGZhy{}EXISTS\PYGZhy{}VARIABLE,\PYGZsq{}varname\PYGZsq{},THEN=process1,ELSE=process2
IF\PYGZdl{} APPLICATION\PYGZhy{}TIMEOUT,THEN=process1,ELSE=process2
IF\PYGZdl{} CURSOR,THEN=process1,ELSE=process2
IF\PYGZdl{} FIRST\PYGZhy{}PASS,THEN=process1,ELSE=process2
IF\PYGZdl{} IND\PYGZdl{}FILE\PYGZhy{}TIMEOUT,THEN=process1,ELSE=process2
IF\PYGZdl{} NOT\PYGZhy{}FOUND,THEN=process1,ELSE=process2
IF\PYGZdl{} SCREEN\PYGZhy{}IS\PYGZhy{}BLANK,THEN=process1,ELSE=process2
IF\PYGZdl{} SCREEN\PYGZhy{}IS\PYGZhy{}UNFORMATTED,THEN=process1,ELSE=process2
IF\PYGZdl{} SESSION\PYGZhy{}SWITCH,THEN=process1,ELSE=process2
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{row,col,len}
\sphinxAtStartPar
Specifies the position (row, column) and length of the data tested.

\sphinxlineitem{value}
\sphinxAtStartPar
Specifies the value of the data tested (must be placed in quotes). If the value to be tested is in hexadecimal format, use EQ=X’CXNN…’ syntax.

\sphinxlineitem{VARIABLE}
\sphinxAtStartPar
Specifies that the value of a VIRTEL variable is to be tested.

\sphinxlineitem{EXISTS\sphinxhyphen{}VARIABLE}
\sphinxAtStartPar
Tests if the specified variable exists.

\sphinxlineitem{NOT\sphinxhyphen{}EXISTS\sphinxhyphen{}VARIABLE}
\sphinxAtStartPar
Tests if the specified variable does not exist.

\sphinxlineitem{varname}
\sphinxAtStartPar
Specifies the name of the VIRTEL variable to be tested (must be placed in quotes)

\sphinxlineitem{EQ}
\sphinxAtStartPar
Tests if the specified variable is equal to the value to test

\sphinxlineitem{APPLICATION\sphinxhyphen{}TIMEOUT}
\sphinxAtStartPar
Tests whether a previous ACTION\$ TO\sphinxhyphen{}APPLICATION instruction with a MAXTIME parameter ended in timeout.

\sphinxlineitem{CURSOR}
\sphinxAtStartPar
Tests whether the application has turned on the cursor. This option is valid for both 3270 applications and videotex servers.

\sphinxlineitem{FIRST\sphinxhyphen{}PASS}
\sphinxAtStartPar
Tests whether the scenario is entered for the first time after connecting to the VTAM application. This condition is no longer true after the scenario has exited for the first time, for example when waiting for the next message. If both an INPUT and an OUTPUT scenario are present, the FIRST\sphinxhyphen{}PASS condition is true the first time the INPUT scenario is run, and the first time the OUTPUT scenario is run as well. This condition is always true for other types of scenario.

\sphinxlineitem{IND\$FILE\sphinxhyphen{}TIMEOUT}
\sphinxAtStartPar
Tests whether, having received the 3270 messages which precede an IND\$FILE transfer, the transfer itself has still not started after a delay of one second. This condition indicates an IND\$FILE error and is usually accompanied by an error message on the TSO screen.

\sphinxlineitem{NOT\sphinxhyphen{}FOUND}
\sphinxAtStartPar
Tests the condition code set by the previous COPY\$ instruction.

\sphinxlineitem{SCREEN\sphinxhyphen{}IS\sphinxhyphen{}BLANK}
\sphinxAtStartPar
Tests whether the 3270 screen is completely blank. This condition is true if the screen contains only blanks, nulls, and attribute characters.

\sphinxlineitem{SCREEN\sphinxhyphen{}IS\sphinxhyphen{}UNFORMATTED}
\sphinxAtStartPar
Tests whether the 3270 screen is unformatted. This condition is true if the screen contains no attribute characters.

\sphinxlineitem{SESSION\sphinxhyphen{}SWITCH}
\sphinxAtStartPar
Tests whether the scenario is entered for a VTAM application which was already connected to this terminal. This condition is useful in VIRTEL multisession scenarios which must re\sphinxhyphen{}establish the environment before starting the transaction requested by the user. This condition remains true until the end of this activation of the scenario (for example until the scenario is reused for another session).

\sphinxlineitem{process1}
\sphinxAtStartPar
Specifies the address of the branch exit of the script if the condition is satisfied. Permitted values are:
\begin{quote}
\begin{description}
\sphinxlineitem{label}
\sphinxAtStartPar
instruction label at which execution of the scenario is to continue.

\sphinxlineitem{FAIL}
\sphinxAtStartPar
reserved word indicating that the scenario is to be terminated and the current message is to be discarded. The scenario will be called again on receipt of the next outbound message from the application.

\sphinxlineitem{SUCCESS}
\sphinxAtStartPar
reserved word indicating that the scenario is to be terminated and the current message is to be presented to the user. This is equivalent to branching to a SCENARIO END instruction.

\end{description}
\end{quote}

\sphinxlineitem{process2}
\sphinxAtStartPar
Specifies the address of the branch exit of the script if the condition is not satisfied. Permitted values are identical to process1.

\end{description}

\index{INDSCEN\$@\spxentry{INDSCEN\$}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!INDSCEN\$@\spxentry{INDSCEN\$}}\ignorespaces 

\subsubsection{INDSCEN\$ instruction}
\label{\detokenize{User_Guide:indscen-instruction}}\label{\detokenize{User_Guide:index-267}}
\sphinxAtStartPar
This instruction allows a scenario to enable the IND\$FILE file transfer function. The INDSCEN\$ macro instruction must
be included in both the input scenario and the output scenario.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
INDSCEN\PYGZdl{} HOST=type
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{type}
\sphinxAtStartPar
Specifies the type of host system running the IND\$FILE program. TSO is the only allowed value. The default is TSO.

\end{description}

\index{LABEL\$ Instruction@\spxentry{LABEL\$ Instruction}!Scenarios@\spxentry{Scenarios}}\index{Scenarios@\spxentry{Scenarios}!LABEL\$ Instruction@\spxentry{LABEL\$ Instruction}}\ignorespaces 

\subsubsection{LABEL\$ instruction}
\label{\detokenize{User_Guide:label-instruction}}\label{\detokenize{User_Guide:index-268}}
\sphinxAtStartPar
This instruction allows to define a label in a scenario.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
mylabel LABEL\PYGZdl{}
\end{sphinxVerbatim}

\sphinxAtStartPar
It is equivalent to the classic assembler:
\begin{quote}

\sphinxAtStartPar
mylabel EQU *

\sphinxAtStartPar
or

\sphinxAtStartPar
mylabel DS 0H
\end{quote}

\sphinxAtStartPar
It may be used in any scenario. If the scenario is not a subroutine, you can also simply generate :

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{mylabel} \PYG{n}{DS} \PYG{l+m+mi}{0}\PYG{n}{C}
\end{sphinxVerbatim}

\sphinxAtStartPar
If the scenario is a subroutine, you must use LABEL\$ instruction to define each labels inside the subroutine. Each label is suffixed with the name of the subroutine, in order to give some protection from conflicting labels and from branching over the limits of subroutines.
\begin{description}
\sphinxlineitem{mylabel}
\sphinxAtStartPar
Specifies the instruction label at which execution of a scenario is to continue.

\end{description}

\sphinxAtStartPar
A sample of the usage of LABEL\$ instruction is available in the PERFORM\$ instruction description.

\phantomsection\label{\detokenize{User_Guide:v462ug-map}}
\index{MAP\$@\spxentry{MAP\$}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!MAP\$@\spxentry{MAP\$}}\ignorespaces 

\subsubsection{MAP\$ instruction}
\label{\detokenize{User_Guide:map-instruction}}\label{\detokenize{User_Guide:index-269}}
\sphinxAtStartPar
The MAP\$ instruction defines the format of a flat\sphinxhyphen{}format data area known as a “commarea”, and describes how VIRTEL
converts XML or Query input data to commarea format. The MAP\$ instruction may also be used in conjunction with
the TOVAR\$ instruction to convert an output commarea to VIRTEL variables, which can be used with an appropriate
template to generate XML or other formats.
When the MAP\$ instruction is used to convert input data to commarea format, the input data may be supplied either
as XML, or as named parameters in a format known as “Query” data. In both cases, the input data may be attached to
an inbound HTTP request (GET or POST request), or it may be supplied in a VIRTEL variable. The result of the parsing
process is a commarea which is suitable for processing by an application program (typically a COBOL program running
under CICS). The commarea is written into a VIRTEL variable so that it can be passed to the application program by
means of the VIRTEL transaction script language.
Conversion of input data to commarea format (“input\sphinxhyphen{}to\sphinxhyphen{}commarea” conversion) is performed by means of an INITIAL
scenario. The scenario begins with a group of MAP\$ instructions (MAP\$ BEGIN, MAP\$ END, MAP\$ AREA, and MAP\$
AREA\sphinxhyphen{}ATTRIBUTE) which define the format of the commarea and its relationship to the XML tags or the Query
parameters. The scenario continues with a MAP\$ FROM\sphinxhyphen{}FIELD, MAP\$ FROM\sphinxhyphen{}INPUT, MAP\$ FROM\sphinxhyphen{}VARIABLE instruction
which defines the source of the XML or Query data. Finally, the scenario ends with a MAP\$ TO\sphinxhyphen{}VARIABLE instruction
which names the VIRTEL variable into which the commarea is to be stored.
Conversion from commarea format to VIRTEL variables (“commarea\sphinxhyphen{}to\sphinxhyphen{}output” conversion) may be performed by
means of an INITIAL scenario or an OUTPUT scenario. The scenario begins with a description of the commarea format
(MAP\$ BEGIN, MAP\$ END, MAP\$ AREA, and MAP\$ AREA\sphinxhyphen{}ATTRIBUTE), and continues with a TOVAR\$ instruction which
defines the source of the commarea. See the description of the {\hyperref[\detokenize{User_Guide:v462ug-tovar}]{\sphinxcrossref{\DUrole{std,std-ref}{“TOVAR\$ instruction”}}}} for further details of
commarea\sphinxhyphen{}to\sphinxhyphen{}output conversion.

\index{MAP\$ ABEND@\spxentry{MAP\$ ABEND}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!MAP\$ ABEND@\spxentry{MAP\$ ABEND}}\index{MAP\$ ABEND@\spxentry{MAP\$ ABEND}!MAP\$@\spxentry{MAP\$}}\index{MAP\$@\spxentry{MAP\$}!MAP\$ ABEND@\spxentry{MAP\$ ABEND}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{MAP\$ ABEND}

\sphinxAtStartPar
The MAP\$ ABEND instruction is intended for diagnostic purposes only. When VIRTEL encounters a MAP\$ ABEND
instruction while processing a commarea with the MAP\$ TO\sphinxhyphen{}VARIABLE or TOVAR\$ instructions, the scenario ends and a
SNAP dump is produced. The VIRTEL SNAP is described in the “Audit and Performance” chapter of the VIRTEL
Messages and Operations Guide.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
MAP\PYGZdl{} ABEND,WITH=\PYGZsq{}text\PYGZsq{}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{text}
\sphinxAtStartPar
A free\sphinxhyphen{}format description which will be printed in the SNAP at the time of the abend.

\end{description}

\sphinxAtStartPar
\sphinxstylestrong{MAP\$ ABEND\sphinxhyphen{}AT}

\sphinxAtStartPar
The MAP\$ ABEND\sphinxhyphen{}AT instruction is similar to MAP\$ ABEND except that it produces a SNAP only after it has been
executed the number of times indicated by the OCCURS parameter.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
MAP\PYGZdl{} ABEND\PYGZhy{}AT,OCCURS=n,WITH=\PYGZsq{}text\PYGZsq{}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{text}
\sphinxAtStartPar
A free\sphinxhyphen{}format description which will be printed in the SNAP at the time of the abend.

\sphinxlineitem{n}
\sphinxAtStartPar
The SNAP will be produced after the MAP\$ ABEND\sphinxhyphen{}AT instruction has been executed n times.

\end{description}

\index{MAP\$ AREA@\spxentry{MAP\$ AREA}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!MAP\$ AREA@\spxentry{MAP\$ AREA}}\index{MAP\$ AREA@\spxentry{MAP\$ AREA}!MAP\$@\spxentry{MAP\$}}\index{MAP\$@\spxentry{MAP\$}!MAP\$ AREA@\spxentry{MAP\$ AREA}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{MAP\$ AREA}

\sphinxAtStartPar
The MAP\$ AREA instruction defines a field within a commarea. The MAP\$ AREA instruction must be enclosed by a pair
of MAP\$ BEGIN and MAP\$ END instructions which define the start and end of the commarea.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
MAP\PYGZdl{} AREA,WITH=\PYGZsq{}name\PYGZsq{},LENGTH=nnn,TYPE=type,FORMAT=(\PYGZsq{}pattern\PYGZsq{},char)
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{name}
\sphinxAtStartPar
For input\sphinxhyphen{}to\sphinxhyphen{}commarea conversion, this is the name of the XML tag or Query parameter which identifies the input data item. For XML input, the WITH parameter may be omitted, and the tag at the current location in the input data is used. For commarea\sphinxhyphen{}to\sphinxhyphen{}output conversion, this is the name of the VIRTEL variable which will be generated.

\sphinxlineitem{nnn}
\sphinxAtStartPar
Specifies the fixed length of the field in the commarea.

\sphinxlineitem{type}\begin{description}
\sphinxlineitem{X}
\sphinxAtStartPar
indicates an alphanumeric field

\sphinxlineitem{9}
\sphinxAtStartPar
indicates a numeric field

\sphinxlineitem{S9}
\sphinxAtStartPar
indicates a numeric field with sign overpunch

\sphinxlineitem{ONLY9}
\sphinxAtStartPar
indicates a numeric field; any non\sphinxhyphen{}numeric characters in the input data item are ignored when copied to the commarea

\sphinxlineitem{(ONLY9,LEFT\sphinxhyphen{}ALIGNED)}
\sphinxAtStartPar
indicates that the numeric value is to be left\sphinxhyphen{}aligned in the field in the commarea

\sphinxlineitem{BASE64}
\sphinxAtStartPar
indicates that the data is encoded in Base64 format in the XML data stream

\end{description}

\sphinxAtStartPar
OFFSET\sphinxhyphen{}LENGTH

\sphinxAtStartPar
OFFSET\sphinxhyphen{}LENGTH\sphinxhyphen{}TEXT
\begin{description}
\sphinxlineitem{OFFSET\sphinxhyphen{}LENGTH\sphinxhyphen{}BINARY}
\sphinxAtStartPar
For input\sphinxhyphen{}to\sphinxhyphen{}commarea conversion, calculates the offset and length of the XML data element identified by the WITH parameter. The offset is calculated relative to the start of the XML data stream.

\sphinxAtStartPar
For OFFSET\sphinxhyphen{}LENGTH\sphinxhyphen{}TEXT the offset and length values are stored in the result commarea as two decimal numbers separated by a comma. OFFSET\sphinxhyphen{}LENGTH is a synonym for OFFSET\sphinxhyphen{}LENGTH\sphinxhyphen{}TEXT.

\sphinxAtStartPar
For OFFSET\sphinxhyphen{}LENGTH\sphinxhyphen{}BINARY the offset and length are stored as binary values (8 bytes and 4 bytes respectively) in the result commarea. When used in conjunction with the TO\sphinxhyphen{}VARIABLE or TO\sphinxhyphen{}VARIABLE\sphinxhyphen{}ONLY
parameters described below, the 12\sphinxhyphen{}byte value thus produced can subsequently be passed to the VIRSVFIO service program as the OFFAREA parameter for the read\sphinxhyphen{}partial and write\sphinxhyphen{}append functions.

\end{description}

\sphinxlineitem{pattern,char}
\sphinxAtStartPar
Specifies an editing pattern to be applied when the field is processed during commarea\sphinxhyphen{}to\sphinxhyphen{}output conversion. Character positions in pattern which contain char represent variable characters to be obtained from the field in the commarea, other characters in pattern represent constants. For example, if FORMAT=(‘9999\sphinxhyphen{}99\sphinxhyphen{}99’,9) is specified and the commarea field contains 20060621 then a result value of
2006\sphinxhyphen{}06\sphinxhyphen{}21 will be generated.

\end{description}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
XML tag names are case sensitive. WITH=’Title’ is not the same as WITH=’TITLE’ A variation of the MAP\$ AREA instruction allows the value of the field to be copied into a VIRTEL variable, in addition to being placed in the commarea. The variable will be created, if necessary, and its value will be set when the commarea is created by a subsequent MAP\$ FROM\sphinxhyphen{}FIELD, MAP\$ FROM\sphinxhyphen{}INPUT, or MAP\$ FROM\sphinxhyphen{}VARIABLE instruction. The value can then be tested by means of an IF\$ VARIABLE instruction (see {\hyperref[\detokenize{User_Guide:v462ug-virtel-scenarios}]{\sphinxcrossref{\DUrole{std,std-ref}{“Examples of VIRTEL Scenarios”}}}}):
\end{sphinxadmonition}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
MAP\PYGZdl{} AREA,TO\PYGZhy{}VARIABLE,VAR=varname,
    WITH=\PYGZsq{}name\PYGZsq{},LENGTH=nnn,TYPE=type
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{varname}
\sphinxAtStartPar
The name of the VIRTEL variable to which the field value is to be copied. The variable name must be placed in quotes. If the variable already exists, then its current value will be replaced. The parameters WITH, LENGTH, and TYPE are as previously described.

\end{description}

\sphinxAtStartPar
Another form of the MAP\$ AREA instruction defines a field in the commarea and fills the field with either a constant value, or the value of a VIRTEL variable:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
MAP\PYGZdl{} AREA,FROM\PYGZhy{}CONSTANT,\PYGZsq{}value\PYGZsq{},LENGTH=nnn,TYPE=type
MAP\PYGZdl{} AREA,FROM\PYGZhy{}VARIABLE,VAR=varname,LENGTH=nnn,
    TYPE=type,FORMAT=(\PYGZsq{}pattern\PYGZsq{},char)
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{value}
\sphinxAtStartPar
The value to be copied to the field. The value must be placed in quotes.

\sphinxlineitem{varname}
\sphinxAtStartPar
The name of the VIRTEL variable from which the field value is to be copied. The variable name must be placed in

\sphinxlineitem{quotes.}
\sphinxAtStartPar
The parameters LENGTH, TYPE, and FORMAT are as previously described.

\end{description}

\sphinxAtStartPar
A further variation of the MAP\$ AREA instruction places the value of a field into a VIRTEL variable, without copying it
into the commarea. The variable will be created or replaced during the processing of a subsequent MAP\$ FROM\sphinxhyphen{}FIELD, MAP\$ FROM\sphinxhyphen{}INPUT, or MAP\$ FROM\sphinxhyphen{}VARIABLE instruction.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
MAP\PYGZdl{} AREA,TO\PYGZhy{}VARIABLE\PYGZhy{}ONLY,VAR=varname
,
WITH=\PYGZsq{}name\PYGZsq{},LENGTH=nnn,TYPE=type
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{varname}
\sphinxAtStartPar
The name of the VIRTEL variable to which the field value is to be copied. The variable name must be placed in quotes. If the variable already exists, then its current value will be replaced.

\end{description}

\sphinxAtStartPar
The WITH parameter specifies the name of the XML tag or Query parameter, as previously described. If the LENGTH and TYPE parameters are specified, then the value of the field is edited, as previously described, to conform to the length and type specified. If the LENGTH and TYPE parameters are omitted, then the length and value of the variable
are copied exactly from the input data.

\sphinxAtStartPar
Another variation of the MAP\$ AREA instruction, TO\sphinxhyphen{}TABLE\sphinxhyphen{}VARIABLE\sphinxhyphen{}ONLY, is similar to TO\sphinxhyphen{}VARIABLE\sphinxhyphen{}ONLY except that if the variable already exists, the new value will be appended to any existing values instead of erasing the previous value.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
MAP\PYGZdl{} AREA,TO\PYGZhy{}TABLE\PYGZhy{}VARIABLE\PYGZhy{}ONLY,VAR=varname,
   WITH=\PYGZsq{}name\PYGZsq{},LENGTH=nnn,TYPE=type
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{varname}
\sphinxAtStartPar
The name of the VIRTEL variable to which the field value is to be copied. The variable name must be placed in quotes.

\end{description}

\sphinxAtStartPar
If the variable already exists, the new value will be appended to any existing values. The WITH, LENGTH and TYPE parameters are as previously described. For convenience, if the variable name is the same as the value of the WITH parameter, the variable name may be specified as VAR=’=WITH’ or VAR==WITH.

\sphinxAtStartPar
The FROM\sphinxhyphen{}LAST\sphinxhyphen{}ELEMENT\sphinxhyphen{}FOUND\sphinxhyphen{}NAME keyword of the MAP\$ AREA instruction copies into the output commarea the name of the last XML element found in the input stream. This may be used in conjunction with the NEXT\sphinxhyphen{}ELEMENT keyword of the MAP\$ BEGIN instruction.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
MAP\PYGZdl{} AREA,FROM\PYGZhy{}LAST\PYGZhy{}FOUND\PYGZhy{}ELEMENT\PYGZhy{}NAME,
    LENGTH=nnn,TYPE=X
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{nnn}
\sphinxAtStartPar
The length of the field in the output commarea where the name is to be placed.

\end{description}

\sphinxAtStartPar
1.18.57. MAP\$ AREA\sphinxhyphen{}ATTRIBUTE

\sphinxAtStartPar
The MAP\$ AREA\sphinxhyphen{}ATTRIBUTE instruction defines a field within a commarea. It is similar to MAP\$ AREA except that the
contents of the field are obtained from the value of an attribute parameter included within the specified XML start tag,
instead of from the data enclosed by the XML start and end tags.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
MAP\PYGZdl{} AREA\PYGZhy{}ATTRIBUTE,WITH=\PYGZsq{}xmlname\PYGZsq{},VALUEOF=\PYGZsq{}attrname\PYGZsq{},
    LENGTH=nnn,TYPE=type
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{xmlname}
\sphinxAtStartPar
The name of the XML tag in the input data whose attribute is to be copied. If the WITH parameter is omitted, the tag at the current location in the input data is used.

\sphinxlineitem{attrname}
\sphinxAtStartPar
The name of the XML attribute whose value is to be copied to the commarea.

\sphinxlineitem{nnn}
\sphinxAtStartPar
Specifies the fixed length of the field in the commarea.

\sphinxlineitem{type}
\sphinxAtStartPar
Same as type parameter of the MAP\$ AREA instruction.

\end{description}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
XML tag and attribute names are case sensitive.
\end{sphinxadmonition}

\sphinxAtStartPar
A variation of the MAP\$ AREA\sphinxhyphen{}ATTRIBUTE instruction allows the value of the attribute to be copied into a VIRTEL variable, in addition to being placed in the commarea:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
MAP\PYGZdl{} AREA\PYGZhy{}ATTRIBUTE,TO\PYGZhy{}VARIABLE,VAR=varname,
    WITH=\PYGZsq{}xmlname\PYGZsq{},VALUEOF=\PYGZsq{}attrname\PYGZsq{},LENGTH=nnn,TYPE=type
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{varname}
\sphinxAtStartPar
The name of the VIRTEL variable to which the attribute value is to be copied. The variable name must be placed in quotes. If the variable already exists, then its current value will be replaced. The parameters WITH, VALUEOF, LENGTH, and TYPE are as previously described

\end{description}

\sphinxAtStartPar
Another variation of the MAP\$ AREA\sphinxhyphen{}ATTRIBUTE instruction places the value of an attribute into a VIRTEL variable, without copying it into the commarea:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
MAP\PYGZdl{} AREA\PYGZhy{}ATTRIBUTE,TO\PYGZhy{}VARIABLE\PYGZhy{}ONLY,VAR=varname,
    WITH=\PYGZsq{}xmlname\PYGZsq{},VALUEOF=\PYGZsq{}attrname\PYGZsq{},LENGTH=nnn,TYPE=type
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{varname}
\sphinxAtStartPar
The name of the VIRTEL variable to which the attribute value is to be copied. The variable name must be placed in quotes. If the variable already exists, then its current value will be replaced.

\end{description}

\sphinxAtStartPar
The parameters WITH and VALUEOF are as previously described. If the LENGTH and TYPE parameters are specified, then the attribute value is edited, as previously described, to conform to the length and type specified. If the LENGTH and TYPE parameters are omitted, then the length and value of the attribute are copied exactly.

\index{MAP\$ BEGIN@\spxentry{MAP\$ BEGIN}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!MAP\$ BEGIN@\spxentry{MAP\$ BEGIN}}\index{MAP\$ BEGIN@\spxentry{MAP\$ BEGIN}!MAP\$@\spxentry{MAP\$}}\index{MAP\$@\spxentry{MAP\$}!MAP\$ BEGIN@\spxentry{MAP\$ BEGIN}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{MAP\$ BEGIN}

\sphinxAtStartPar
The MAP\$ BEGIN instruction marks the start of a commarea, or the start of a group of fields within a commarea. The optional WITH parameter indicates a group of fields enclosed by a specific XML tag in the input data. The optional OCCURS parameter indicates a repeating group of fields. Nested pairs of MAP\$ BEGIN and MAP\$ END instructions are
permitted.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
groupname MAP\PYGZdl{} BEGIN,WITH=\PYGZsq{}xmlname\PYGZsq{},OCCURS=nnn,COUNT=\PYGZsq{}countvar\PYGZsq{}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{groupname}
\sphinxAtStartPar
The label is required. It specifies the name of the commarea or field group. The MAP\$ BEGIN instruction must be matched by a subsequent MAP\$ END instruction having the same label.

\sphinxlineitem{xmlname}
\sphinxAtStartPar
The name of the XML tag which identifies the start of the group of fields in the input data. If the WITH parameter is omitted, processing for this group of fields starts at the current location in the input data. The special value NEXTELEMENT matches with the next XML tag in the input stream, regardless of its name.

\sphinxlineitem{nnn}
\sphinxAtStartPar
Specifies the number of occurrences for a repeating group of fields. If the OCCURS parameter is omitted, one occurrence will be generated. The special value OCCURS=UNLIMITED indicates that the field repeats indefinitely until the end of the input data is reached.

\sphinxlineitem{countvar}
\sphinxAtStartPar
Specifies the name of a VIRTEL variable which will be created when the MAP\$ is processed for commarea\sphinxhyphen{}to\sphinxhyphen{}output conversion for a repeating group of fields. The value of the variable is the number of occurrences actually processed (which may be less than the value of the OCCURS parameter if the length of the input commarea is insufficient to contain nnn occurrences of the field group). If the COUNT parameter is omitted, the groupname specified in the statement label is used as the variable name.

\end{description}

\sphinxAtStartPar
A variation of the MAP\$ BEGIN instruction can be used to force the scan of the XML input stream to be restarted:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
groupname MAP\PYGZdl{} BEGIN,TOP,WITH=\PYGZsq{}xmlname\PYGZsq{}
\end{sphinxVerbatim}

\sphinxAtStartPar
The TOP parameter specifies that the scan for the tag named xmlname starts from the beginning of the XML stream.

\sphinxAtStartPar
Another variation of the MAP\$ BEGIN instruction introduces a group of fields which are conditional on the current value of the \$EVENT\$ variable:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
groupname MAP\PYGZdl{} BEGIN,EVENT=\PYGZsq{}eventname\PYGZsq{}
\end{sphinxVerbatim}

\sphinxAtStartPar
The group of fields enclosed by the MAP\$ BEGIN and MAP\$ END instructions are processed only if the “current event” set by a previous MAP\$ EVENTUAL\sphinxhyphen{}AREA or MAP\$ ELSETHEN\sphinxhyphen{}AREA instruction matches the eventname specified. For commarea\sphinxhyphen{}to\sphinxhyphen{}output conversion, the names of the variables generated for this group are prefixed by eventname/

\index{MAP\$ END@\spxentry{MAP\$ END}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!MAP\$ END@\spxentry{MAP\$ END}}\index{MAP\$ END@\spxentry{MAP\$ END}!MAP\$@\spxentry{MAP\$}}\index{MAP\$@\spxentry{MAP\$}!MAP\$ END@\spxentry{MAP\$ END}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{MAP\$ END}

\sphinxAtStartPar
The MAP\$ END instruction marks the end of a commarea or field group.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
groupname MAP\PYGZdl{} END
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{groupname}
\sphinxAtStartPar
The label is required. It must match the label on the corresponding MAP\$ BEGIN instruction.

\end{description}
\phantomsection\label{\detokenize{User_Guide:v462ug-map-eventual-elsethen}}
\index{MAP\$ EVENTUAL\sphinxhyphen{}AREA@\spxentry{MAP\$ EVENTUAL\sphinxhyphen{}AREA}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!MAP\$ EVENTUAL\sphinxhyphen{}AREA@\spxentry{MAP\$ EVENTUAL\sphinxhyphen{}AREA}}\index{MAP\$ EVENTUAL\sphinxhyphen{}AREA@\spxentry{MAP\$ EVENTUAL\sphinxhyphen{}AREA}!MAP\$@\spxentry{MAP\$}}\index{MAP\$@\spxentry{MAP\$}!MAP\$ EVENTUAL\sphinxhyphen{}AREA@\spxentry{MAP\$ EVENTUAL\sphinxhyphen{}AREA}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{MAP\$ EVENTUAL\sphinxhyphen{}AREA, MAP\$ ELSETHEN\sphinxhyphen{}AREA}

\sphinxAtStartPar
The MAP\$ EVENTUAL\sphinxhyphen{}AREA and MAP\$ ELSETHEN\sphinxhyphen{}AREA instructions generate a field in a commarea whose value depends on the presence of a named tag in the XML stream, or whose value depends on the value of a specific XML tag.
The first form of these instructions tests for the presence of one of a set of named tags, and generates a value which corresponds to the tag which was found:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
MAP\PYGZdl{} EVENTUAL\PYGZhy{}AREA, or ELSETHEN\PYGZhy{}AREA,
FROM\PYGZhy{}CONSTANT,\PYGZsq{}value\PYGZsq{},
WHEN=(ELEMENT,\PYGZsq{}xmlname\PYGZsq{}),
EVENT=\PYGZsq{}varname\PYGZsq{}
MAP\PYGZdl{} ELSETHEN\PYGZhy{}AREA,FROM\PYGZhy{}CONSTANT,\PYGZsq{}value\PYGZsq{}
\end{sphinxVerbatim}

\sphinxAtStartPar
These instructions are coded as a group consisting of one MAP\$ EVENTUAL\sphinxhyphen{}AREA instruction followed by one or more
MAP\$ ELSETHEN\sphinxhyphen{}AREA instructions. A final MAP\$ ELSETHEN\sphinxhyphen{}AREA instruction with no WHEN parameter provides a
default value for the output field. The group is enclosed by a pair of MAP\$ BEGIN and MAP\$ END instructions which
specify the name of the enclosing XML tag.

\sphinxAtStartPar
The optional EVENT parameter specifies the name of the VIRTEL variable to be created when the MAP\$ is processed
for commarea\sphinxhyphen{}to\sphinxhyphen{}output conversion. If the EVENT parameter is omitted, then the variable has the same name as the
XML tag xmlname. The value of the EVENT parameter is also added to the \$EVENT\$ variable, and becomes the
“current event” for any subsequent MAP\$ BEGIN,EVENT instructions.

\sphinxAtStartPar
The following example illustrates the process. The XML stream in this example consists of an \textless{}identity\textgreater{} tag which may
enclose one of three different tags \textless{}bic\textgreater{} \textless{}iban\textgreater{} or \textless{}rib\textgreater{}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZlt{}}\PYG{n}{identity}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{n}{bic}\PYG{o}{\PYGZgt{}}\PYG{l+m+mi}{12345778}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{bic}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{identity}\PYG{o}{\PYGZgt{}}
\PYG{o+ow}{or}
\PYG{o}{\PYGZlt{}}\PYG{n}{identity}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{n}{iban}\PYG{o}{\PYGZgt{}}\PYG{l+m+mi}{12345778}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{iban}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{identity}\PYG{o}{\PYGZgt{}}
\PYG{o+ow}{or}
\PYG{o}{\PYGZlt{}}\PYG{n}{identity}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{n}{rib}\PYG{o}{\PYGZgt{}}\PYG{l+m+mi}{12345778}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{rib}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{identity}\PYG{o}{\PYGZgt{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The objective is to generate an output area which consists of a one\sphinxhyphen{}byte code (1=bic, 2=iban, 3=rib) followed by an
8\sphinxhyphen{}byte area containing the value of the indicated tag. If none of the indicated tags is found, the code is generated with
a space as the default value. This is achieved by means of the following instructions in the scenario:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
IDENT MAP\PYGZdl{} BEGIN,WITH=\PYGZsq{}identity\PYGZsq{}
MAP\PYGZdl{} EVENTUAL\PYGZhy{}AREA,FROM\PYGZhy{}CONSTANT,\PYGZsq{}1\PYGZsq{},WHEN=(ELEMENT,\PYGZsq{}bic\PYGZsq{})
MAP\PYGZdl{} ELSETHEN\PYGZhy{}AREA,FROM\PYGZhy{}CONSTANT,\PYGZsq{}2\PYGZsq{},WHEN=(ELEMENT,\PYGZsq{}iban\PYGZsq{})
MAP\PYGZdl{} ELSETHEN\PYGZhy{}AREA,FROM\PYGZhy{}CONSTANT,\PYGZsq{}3\PYGZsq{},WHEN=(ELEMENT,\PYGZsq{}rib\PYGZsq{})
MAP\PYGZdl{} ELSETHEN\PYGZhy{}AREA,FROM\PYGZhy{}CONSTANT,\PYGZsq{} \PYGZsq{}
MAP\PYGZdl{} AREA,LENGTH=8
IDENT MAP\PYGZdl{} END
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
XML tag names are case sensitive.
\end{sphinxadmonition}

\sphinxAtStartPar
The second form of the MAP\$ EVENTUAL\sphinxhyphen{}AREA and MAP\$ ELSETHEN\sphinxhyphen{}AREA instructions tests the data enclosed by a
named tag in the XML stream, and generates an output field with a corresponding value:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
MAP\PYGZdl{} EVENTUAL\PYGZhy{}AREA, or ELSETHEN\PYGZhy{}AREA,
    FROM\PYGZhy{}CONSTANT,\PYGZsq{}value\PYGZsq{},
    WHEN=(VALUE,\PYGZsq{}string\PYGZsq{})
MAP\PYGZdl{} ELSETHEN\PYGZhy{}AREA,FROM\PYGZhy{}CONSTANT,\PYGZsq{}value\PYGZsq{}
\end{sphinxVerbatim}

\sphinxAtStartPar
These instructions are coded as a group consisting of one MAP\$ EVENTUAL\sphinxhyphen{}AREA instruction followed by one or more
MAP\$ ELSETHEN\sphinxhyphen{}AREA instructions. A final MAP\$ ELSETHEN\sphinxhyphen{}AREA instruction with no WHEN parameter provides a
default value for the output field. The group is enclosed by a pair of MAP\$ BEGIN and MAP\$ END instructions which
specify the name of the XML tag whose value is being tested.

\sphinxAtStartPar
The following example illustrates the process. The XML stream in this example consists of an \textless{}indicator\textgreater{} tag which can
take the value “true” or “false”:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZlt{}}\PYG{n}{indicator}\PYG{o}{\PYGZgt{}}\PYG{n}{true}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{indicator}\PYG{o}{\PYGZgt{}}
\PYG{o+ow}{or}
\PYG{o}{\PYGZlt{}}\PYG{n}{indicator}\PYG{o}{\PYGZgt{}}\PYG{n}{false}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{indicator}\PYG{o}{\PYGZgt{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
The objective is to generate an output area which consists of a one\sphinxhyphen{}byte code (1=true, 0=false). A default value 0 is
generated if the tag data has any other value. This is achieved by means of the following instructions in the scenario:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
INDIC MAP\PYGZdl{} BEGIN,WITH=\PYGZsq{}indicator\PYGZsq{}
MAP\PYGZdl{} EVENTUAL\PYGZhy{}AREA,FROM\PYGZhy{}CONSTANT,\PYGZsq{}0\PYGZsq{},WHEN=(VALUE,\PYGZsq{}false\PYGZsq{})
MAP\PYGZdl{} ELSETHEN\PYGZhy{}AREA,FROM\PYGZhy{}CONSTANT,\PYGZsq{}1\PYGZsq{},WHEN=(VALUE,\PYGZsq{}true\PYGZsq{})
MAP\PYGZdl{} ELSETHEN\PYGZhy{}AREA,FROM\PYGZhy{}CONSTANT,\PYGZsq{}0\PYGZsq{}
INDIC MAP\PYGZdl{} END
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
XML tag names are case sensitive.
\end{sphinxadmonition}
\phantomsection\label{\detokenize{User_Guide:v462ug-map-execute}}
\index{MAP\$ EXECUTE@\spxentry{MAP\$ EXECUTE}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!MAP\$ EXECUTE@\spxentry{MAP\$ EXECUTE}}\index{MAP\$ EXECUTE@\spxentry{MAP\$ EXECUTE}!MAP\$@\spxentry{MAP\$}}\index{MAP\$@\spxentry{MAP\$}!MAP\$ EXECUTE@\spxentry{MAP\$ EXECUTE}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{MAP\$ EXECUTE}

\sphinxAtStartPar
The MAP\$ EXECUTE instruction allows a sequence of MAP\$ instructions to be interrupted in order to enter data on the
3270 screen before continuing the analysis. The MAP\$ EXECUTE instruction branches to a subroutine defined
elsewhere in the scenario. The subroutine ends with a RETURN\$ instruction.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
MAP\PYGZdl{} EXECUTE,mylabel
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{mylabel}
\sphinxAtStartPar
The label is required. It specifies the name of the subroutine to be called. The label mylabel must be defined elsewhere in the scenario. In the following example the two MAP\$ EVENT paragraphs each call a subroutine later in the scenario. After the subroutine executes a RETURN\$ instruction, the analysis continues:

\end{description}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
LIGNE0  MAP\PYGZdl{} BEGIN,EVENT=\PYGZsq{}LIGNE0\PYGZsq{}
        MAP\PYGZdl{} AREA,TO\PYGZhy{}VARIABLE,VAR=\PYGZsq{}QTE\PYGZsq{},LENGTH=5,TYPE=X,WITH=\PYGZsq{}QTE\PYGZsq{}
        MAP\PYGZdl{} AREA,TO\PYGZhy{}VARIABLE,VAR=\PYGZsq{}CAI\PYGZsq{},LENGTH=36,TYPE=X,WITH=\PYGZsq{}CAI\PYGZsq{}
        MAP\PYGZdl{} AREA,TO\PYGZhy{}VARIABLE,VAR=\PYGZsq{}CCD\PYGZsq{},LENGTH=3,TYPE=X,WITH=\PYGZsq{}CCD\PYGZsq{}
        MAP\PYGZdl{} AREA,FROM\PYGZhy{}CONSTANT,\PYGZsq{} \PYGZsq{},LENGTH=1,TYPE=X
        MAP\PYGZdl{} EXECUTE,LI0
LIGNE0  MAP\PYGZdl{} END
CMDVALID MAP\PYGZdl{} BEGIN,EVENT=\PYGZsq{}CMDVALID\PYGZsq{}
         MAP\PYGZdl{} AREA,FROM\PYGZhy{}CONSTANT,\PYGZsq{} \PYGZsq{},LENGTH=1,TYPE=X
         MAP\PYGZdl{} EXECUTE,CMDV
CMDVALID MAP\PYGZdl{} END
....
LI0 DS 0H
        COPY\PYGZdl{} VARIABLE\PYGZhy{}TO\PYGZhy{}SCREEN,VAR=\PYGZsq{}LIGNE0/QTE\PYGZsq{},SCREEN=(11,6,5), *
            TYPE=ERASE\PYGZhy{}FIELD
        COPY\PYGZdl{} VARIABLE\PYGZhy{}TO\PYGZhy{}SCREEN,VAR=\PYGZsq{}LIGNE0/CAI\PYGZsq{},SCREEN=(11,12,36), *
            TYPE=ERASE\PYGZhy{}FIELD
        COPY\PYGZdl{} VARIABLE\PYGZhy{}TO\PYGZhy{}SCREEN,VAR=\PYGZsq{}LIGNE0/QTE\PYGZsq{},SCREEN=(11,49,3), *
            TYPE=ERASE\PYGZhy{}FIELD
        RETURN\PYGZdl{}
CMDV DS 0H
* Send pf=ENTER
        ACTION\PYGZdl{} TO\PYGZhy{}APPLICATION,KEY=7D
* Add an occurrence of the table variable VIRTEL
* = return code after validation request
        COPY\PYGZdl{} SCREEN\PYGZhy{}TO\PYGZhy{}VARIABLE,SCREEN=(22,31,8),VAR=\PYGZsq{}RETOUR\PYGZsq{}
        RETURN\PYGZdl{}
\end{sphinxVerbatim}
\phantomsection\label{\detokenize{User_Guide:v462ug-map-from-field}}
\index{MAP\$ FROM\sphinxhyphen{}FIELD@\spxentry{MAP\$ FROM\sphinxhyphen{}FIELD}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!MAP\$ FROM\sphinxhyphen{}FIELD@\spxentry{MAP\$ FROM\sphinxhyphen{}FIELD}}\index{MAP\$ FROM\sphinxhyphen{}FIELD@\spxentry{MAP\$ FROM\sphinxhyphen{}FIELD}!MAP\$@\spxentry{MAP\$}}\index{MAP\$@\spxentry{MAP\$}!MAP\$ FROM\sphinxhyphen{}FIELD@\spxentry{MAP\$ FROM\sphinxhyphen{}FIELD}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{MAP\$ FROM\sphinxhyphen{}FIELD}

\sphinxAtStartPar
The MAP\$ FROM\sphinxhyphen{}FIELD instruction requests VIRTEL to generate a commarea from XML input data (“XML input\sphinxhyphen{}tocommarea” conversion). The XML input data is obtained from an HTML form field in the incoming HTTP request.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
groupname MAP\PYGZdl{} FROM\PYGZhy{}FIELD,FIELD=\PYGZsq{}fieldname\PYGZsq{}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{groupname}
\sphinxAtStartPar
The label is required. It specifies the name of the output area to be generated. It must match the label on a preceding MAP\$ BEGIN instruction.

\sphinxlineitem{fieldname}
\sphinxAtStartPar
The name of the HTML form field which contains the XML input data.

\end{description}

\sphinxAtStartPar
The MAP\$ FROM\sphinxhyphen{}FIELD instruction expects XML input data to be presented as a character string fieldname=xmldata
where xmldata is XML data in URL\sphinxhyphen{}encoded format. In URL\sphinxhyphen{}encoded format, a “+” sign represents a space, and “\%xx”
represents the hexadecimal encoding of an ASCII character. The string fieldname=xmldata may either be appended to
the URL (HTTP “GET” method) or it may be contained in the body of the HTTP request (HTTP “POST” method). See
{\hyperref[\detokenize{User_Guide:v462ug-sending-xml}]{\sphinxcrossref{\DUrole{std,std-ref}{“Sending XML input as URL\sphinxhyphen{}encoded data”}}}} for examples. To process requests containing XML data in plain
(unencoded) format, use instead the {\hyperref[\detokenize{User_Guide:v462ug-map-from-input}]{\sphinxcrossref{\DUrole{std,std-ref}{“MAP\$ FROM\sphinxhyphen{}INPUT”}}}}.

\phantomsection\label{\detokenize{User_Guide:v462ug-map-from-input}}
\index{MAP\$ FROM\sphinxhyphen{}INPUT@\spxentry{MAP\$ FROM\sphinxhyphen{}INPUT}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!MAP\$ FROM\sphinxhyphen{}INPUT@\spxentry{MAP\$ FROM\sphinxhyphen{}INPUT}}\index{MAP\$ FROM\sphinxhyphen{}INPUT@\spxentry{MAP\$ FROM\sphinxhyphen{}INPUT}!MAP\$@\spxentry{MAP\$}}\index{MAP\$@\spxentry{MAP\$}!MAP\$ FROM\sphinxhyphen{}INPUT@\spxentry{MAP\$ FROM\sphinxhyphen{}INPUT}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{MAP\$ FROM\sphinxhyphen{}INPUT}

\sphinxAtStartPar
The MAP\$ FROM\sphinxhyphen{}INPUT instruction requests VIRTEL to generate a commarea from XML, JSON or Query format input
data (“input\sphinxhyphen{}to\sphinxhyphen{}commarea” conversion). The input data is obtained from the incoming HTTP request.
groupname MAP\$ FROM\sphinxhyphen{}INPUT,format

\begin{sphinxVerbatim}[commandchars=\\\{\}]
MAP\PYGZdl{} FROM\PYGZhy{}INPUT,format,TO\PYGZhy{}VARIABLES
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{groupname}
\sphinxAtStartPar
The label is required. It specifies the name of the output area to be generated. It must match the label on a preceding MAP\$ BEGIN instruction.

\sphinxlineitem{format}
\sphinxAtStartPar
XML: specifies that the input data is in XML format
JSON: specifies that the input data is in JSON format
QUERY: specifies that the input data is in Query format

\sphinxAtStartPar
If no format is specified, the default is XML.

\sphinxlineitem{TO\sphinxhyphen{}VARIABLES}
\sphinxAtStartPar
Convert XML or JSON input directly to variables, without intermediate usage of a commarea. It is equivalent to:

\end{description}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
MYMAP MAP\PYGZdl{} FROM\PYGZhy{}INPUT,JSON generate commarea
MYMAP MAP\PYGZdl{} TO\PYGZhy{}VARIABLE,VAR=\PYGZsq{}MYCOMMAREA\PYGZsq{} copy commarea to variable
MYMAP TOVAR\PYGZdl{} FROM\PYGZhy{}VARIABLE,VAR=\PYGZsq{}MYCOMMAREA\PYGZsq{} generate variables
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
MAP\$ FROM\sphinxhyphen{}INPUT with a FIELD parameter is accepted and treated as MAP\$ FROM\sphinxhyphen{}FIELD.
\end{sphinxadmonition}

\sphinxAtStartPar
The MAP\$ FROM\sphinxhyphen{}INPUT instruction obtains its input data from an incoming HTTP request. The HTTP request may use either via the GET method (where the input data is appended to the URL) or the POST method (where the input data is contained in the request body). When the input format is XML, MAP\$ FROM\sphinxhyphen{}INPUT treats the entire data area as XML data without any translation. See {\hyperref[\detokenize{User_Guide:v462ug-xml-input-data}]{\sphinxcrossref{\DUrole{std,std-ref}{“HTTP request with XML input data”}}}} for an example. MAP\$ FROM\sphinxhyphen{}FIELD is preferred when using the GET method with XML input, because certain characters cannot be included in a URL without using URL\sphinxhyphen{}encoding.

\sphinxAtStartPar
When the input format is QUERY, MAP\$ FROM\sphinxhyphen{}INPUT expects the input data to contain one or more strings in the form fieldname=data. When the HTTP request uses the GET method, the strings are appended to the URL. The first string is preceded by a “?” character which separates it from the URL, and the remaining strings are separated by “\&” characters. When the HTTP request uses the POST method, the strings are contained in the request body, either one per line, or separated by “\&” characters if multiple strings are coded on the same line. For both the GET and POST methods, Query strings are expressed in URL\sphinxhyphen{}encoded format, where “+” sign represents a space, and “\%xx” represents the hexadecimal encoding of an ASCII character. See {\hyperref[\detokenize{User_Guide:v462ug-parsing-query-input}]{\sphinxcrossref{\DUrole{std,std-ref}{“Parsing Query Input”}}}} for examples.

\phantomsection\label{\detokenize{User_Guide:v462ug-map-from-variable}}
\index{MAP\$ FROM\sphinxhyphen{}VARIABLE@\spxentry{MAP\$ FROM\sphinxhyphen{}VARIABLE}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!MAP\$ FROM\sphinxhyphen{}VARIABLE@\spxentry{MAP\$ FROM\sphinxhyphen{}VARIABLE}}\index{MAP\$ FROM\sphinxhyphen{}VARIABLE@\spxentry{MAP\$ FROM\sphinxhyphen{}VARIABLE}!MAP\$@\spxentry{MAP\$}}\index{MAP\$@\spxentry{MAP\$}!MAP\$ FROM\sphinxhyphen{}VARIABLE@\spxentry{MAP\$ FROM\sphinxhyphen{}VARIABLE}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{MAP\$ FROM\sphinxhyphen{}VARIABLE}

\sphinxAtStartPar
The MAP\$ FROM\sphinxhyphen{}VARIABLE instruction requests VIRTEL to generate a commarea from XML or Query format input data (“input\sphinxhyphen{}to\sphinxhyphen{}commarea” conversion). The input data is contained in a VIRTEL variable.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
groupname MAP\PYGZdl{} FROM\PYGZhy{}VARIABLE,format,VAR=varname
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{groupname}
\sphinxAtStartPar
The label is required. It specifies the name of the output area to be generated. It must match the label on a preceding MAP\$ BEGIN instruction.

\sphinxlineitem{format}
\sphinxAtStartPar
XML: specifies that the input data is in XML format
JSON: specifies that the input data is in JSON format
QUERY: specifies that the input data is in Query format

\sphinxAtStartPar
If no format is specified, the default is XML.

\sphinxlineitem{varname}
\sphinxAtStartPar
The name of the VIRTEL variable which contains the input data.

\end{description}

\index{MAP\$ TO\sphinxhyphen{}VARIABLE@\spxentry{MAP\$ TO\sphinxhyphen{}VARIABLE}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!MAP\$ TO\sphinxhyphen{}VARIABLE@\spxentry{MAP\$ TO\sphinxhyphen{}VARIABLE}}\index{MAP\$ TO\sphinxhyphen{}VARIABLE@\spxentry{MAP\$ TO\sphinxhyphen{}VARIABLE}!MAP\$@\spxentry{MAP\$}}\index{MAP\$@\spxentry{MAP\$}!MAP\$ TO\sphinxhyphen{}VARIABLE@\spxentry{MAP\$ TO\sphinxhyphen{}VARIABLE}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{MAP\$ TO\sphinxhyphen{}VARIABLE}

\sphinxAtStartPar
The MAP\$ TO\sphinxhyphen{}VARIABLE instruction requests VIRTEL to copy a commarea into a VIRTEL variable. The commarea must have been already generated by a previous MAP\$ FROM\sphinxhyphen{}FIELD, FROM\sphinxhyphen{}INPUT, or FROM\sphinxhyphen{}VARIABLE instruction.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
groupname MAP\PYGZdl{} TO\PYGZhy{}VARIABLE,VAR=varname
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{groupname}
\sphinxAtStartPar
The label is required. It specifies the name of the output area to be copied. It must match the label on a preceding MAP\$ BEGIN instruction.

\sphinxlineitem{varname}
\sphinxAtStartPar
The name of the VIRTEL variable into which the commarea is to be copied.

\end{description}

\sphinxAtStartPar
MAP\$ COPY,VAR=varname is equivalent to MAP\$ TO\sphinxhyphen{}VARIABLE,VAR=varname

\phantomsection\label{\detokenize{User_Guide:v462ug-option}}
\index{OPTION\$@\spxentry{OPTION\$}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!OPTION\$@\spxentry{OPTION\$}}\ignorespaces 

\subsubsection{OPTION\$ instruction}
\label{\detokenize{User_Guide:option-instruction}}\label{\detokenize{User_Guide:index-280}}
\sphinxAtStartPar
This instruction allows the scenario to set up parameters for a subsequent SEND\$ TO\sphinxhyphen{}LINE instruction.

\index{OPTION\$ FOR\sphinxhyphen{}HTTP@\spxentry{OPTION\$ FOR\sphinxhyphen{}HTTP}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!OPTION\$ FOR\sphinxhyphen{}HTTP@\spxentry{OPTION\$ FOR\sphinxhyphen{}HTTP}}\index{OPTION\$ FOR\sphinxhyphen{}HTTP@\spxentry{OPTION\$ FOR\sphinxhyphen{}HTTP}!OPTION\$@\spxentry{OPTION\$}}\index{OPTION\$@\spxentry{OPTION\$}!OPTION\$ FOR\sphinxhyphen{}HTTP@\spxentry{OPTION\$ FOR\sphinxhyphen{}HTTP}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{OPTION\$ FOR\sphinxhyphen{}HTTP}

\sphinxAtStartPar
The OPTION\$ FOR\sphinxhyphen{}HTTP instruction, when used in conjunction with a SEND\$ TO\sphinxhyphen{}LINE instruction referencing an outbound HTTP line, allows a scenario to make a request to an HTTP server and to receive the response. The OPTION\$ FOR\sphinxhyphen{}HTTP instruction builds the parameter list for the subsequent SEND\$ TO\sphinxhyphen{}LINE instruction.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
OPTION\PYGZdl{} FOR\PYGZhy{}HTTP,              *
(METHOD,\PYGZsq{}method\PYGZsq{}),             *
(SITE,\PYGZsq{}sitename\PYGZsq{}),             *
(TO,\PYGZsq{}topath\PYGZsq{}),                 *
(TEXT,\PYGZsq{}querytext\PYGZsq{}),            *
(HEADER,\PYGZsq{}header\PYGZsq{}),             *
(FILE\PYGZhy{}OUT,\PYGZsq{}varnameo\PYGZsq{}),         *
(FILE\PYGZhy{}IN,\PYGZsq{}varnamei\PYGZsq{}),          *
(RET\PYGZhy{}CODE,\PYGZsq{}varnamer\PYGZsq{}),         *
TOVAR=varnamep
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{method}
\sphinxAtStartPar
(required) the HTTP method: GET or POST (see note below).

\sphinxlineitem{site}
\sphinxAtStartPar
the site portion of the URL (see notes below).

\sphinxlineitem{topath}
\sphinxAtStartPar
the path portion of the URL (see note below).

\sphinxlineitem{querytext}
\sphinxAtStartPar
optional text to be appended to the URL (see note below).

\sphinxlineitem{header}
\sphinxAtStartPar
additional HTTP headers to be inserted in the message. Multiple headers may be inserted by specifying more than one HEADER parameter.

\sphinxlineitem{varnameo}
\sphinxAtStartPar
the name of the VIRTEL variable which contains the HTTP POST data to be sent to the server. This parameter is required when the method is POST.

\sphinxlineitem{varnamei}
\sphinxAtStartPar
(required) the name of the VIRTEL variable which will receive the HTTP response data returned by the server.

\sphinxlineitem{varnamer}
\sphinxAtStartPar
the name of the VIRTEL variable which will receive the HTTP return code returned by the server.

\sphinxlineitem{varnamep}
\sphinxAtStartPar
the name of the VIRTEL variable which will contain the parameter list.

\end{description}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
If the field begins with “*” then it is treated as the name of a variable.
\end{sphinxadmonition}

\sphinxAtStartPar
You can use the SITE parameter to specify the name and port of the remote HTTP server, provided that the outbound HTTP line specified by the SEND\$ TO\sphinxhyphen{}LINE instruction is defined with the special value \$SITE\$ in the “Remote Ident” field. The value of the SITE parameter is also used to build the Host: header of the outbound HTTP request.

\index{OPTION\$ FOR\sphinxhyphen{}IND\$FILE@\spxentry{OPTION\$ FOR\sphinxhyphen{}IND\$FILE}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!OPTION\$ FOR\sphinxhyphen{}IND\$FILE@\spxentry{OPTION\$ FOR\sphinxhyphen{}IND\$FILE}}\index{OPTION\$ FOR\sphinxhyphen{}IND\$FILE@\spxentry{OPTION\$ FOR\sphinxhyphen{}IND\$FILE}!OPTION\$@\spxentry{OPTION\$}}\index{OPTION\$@\spxentry{OPTION\$}!OPTION\$ FOR\sphinxhyphen{}IND\$FILE@\spxentry{OPTION\$ FOR\sphinxhyphen{}IND\$FILE}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{OPTION\$ FOR\sphinxhyphen{}IND\$FILE}

\sphinxAtStartPar
The OPTION\$ FOR\sphinxhyphen{}IND\$FILE instruction prepares a TSO session for a file transfer operation using the IND\$FILE
protocol. This instruction does not itself perform a file transfer; instead it produces an IND\$FILE command in a VIRTEL
variable. The scenario must send the command to the TSO session to initiate the file transfer.

\sphinxAtStartPar
The format of the OPTION\$ FOR\sphinxhyphen{}IND\$FILE command for a transfer from TSO to the workstation is shown below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
OPTION\PYGZdl{} FOR\PYGZhy{}IND\PYGZdl{}FILE\PYGZhy{}DOWNLOAD,                     *
    (METHOD,\PYGZsq{}options\PYGZsq{}),                            *
    (FROM,\PYGZsq{}dsname\PYGZsq{}),                               *
    (FILE\PYGZhy{}OUT,\PYGZsq{}outvar\PYGZsq{}),                           *
    (RET\PYGZhy{}CODE,\PYGZsq{}retvar\PYGZsq{}),                           *
    TOVAR=\PYGZsq{}cmdvar\PYGZsq{}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{options}
\sphinxAtStartPar
optional parameters (for example, ‘ASCII CRLF’) to be appended to the IND\$FILE command line (see note 1 below).

\sphinxlineitem{dsname}
\sphinxAtStartPar
(required) the TSO dataset name to be downloaded (see notes 1 and 2 below).

\sphinxlineitem{outvar}
\sphinxAtStartPar
(required) the name of the VIRTEL variable which is to receive the contents of the downloaded file.

\sphinxlineitem{retvar}
\sphinxAtStartPar
the name of the VIRTEL variable which will receive the completion message sent by IND\$FILE at the end of the transfer.

\sphinxlineitem{cmdvar}
\sphinxAtStartPar
(required) the name of the VIRTEL variable which will contain the generated IND\$FILE command.

\end{description}

\sphinxAtStartPar
The format of the OPTION\$ FOR\sphinxhyphen{}IND\$FILE command for a transfer from the workstation to TSO is shown below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
OPTION\PYGZdl{} FOR\PYGZhy{}IND\PYGZdl{}FILE\PYGZhy{}UPLOAD,                      *
    (METHOD,\PYGZsq{}options\PYGZsq{}),                           *
    (TO,\PYGZsq{}dsname\PYGZsq{}),                                *
    (FILE\PYGZhy{}IN,\PYGZsq{}invar\PYGZsq{}),                            *
    (RET\PYGZhy{}CODE,\PYGZsq{}retvar\PYGZsq{}),                          *
    TOVAR=\PYGZsq{}cmdvar\PYGZsq{}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{options}
\sphinxAtStartPar
optional parameters (for example, ‘ASCII CRLF NEW’) to be appended to the IND\$FILE command line (see note 1 below).

\sphinxlineitem{dsname}
\sphinxAtStartPar
(required) the destination TSO dataset name (see notes 1 and 2 below).

\sphinxlineitem{invar}
\sphinxAtStartPar
(required) the name of the VIRTEL variable which contains the data to be uploaded.

\sphinxlineitem{retvar}
\sphinxAtStartPar
the name of the VIRTEL variable which will receive the completion message sent by IND\$FILE at the end of the transfer.

\sphinxlineitem{cmdvar}
\sphinxAtStartPar
(required) the name of the VIRTEL variable which will contain the generated IND\$FILE command.

\end{description}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
1: If the field begins with “*” then it is treated as the name of a variable.

\sphinxAtStartPar
2: TSO will prefix the dataset name by your prefix (usually your userid) unless the dataset name is enclosed in quotes. If you specify the dataset name as a literal in the instruction (as opposed to indirectly as the value of a variable) then triple quotes must be used, for example: (FROM,’’’SYS1.PARMLIB(IEASYS00)’’’)
\end{sphinxadmonition}

\index{OPTION\$ FOR\sphinxhyphen{}IND\$FILE Examples@\spxentry{OPTION\$ FOR\sphinxhyphen{}IND\$FILE Examples}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!OPTION\$ FOR\sphinxhyphen{}IND\$FILE Examples@\spxentry{OPTION\$ FOR\sphinxhyphen{}IND\$FILE Examples}}\index{OPTION\$ FOR\sphinxhyphen{}IND\$FILE Examples@\spxentry{OPTION\$ FOR\sphinxhyphen{}IND\$FILE Examples}!OPTION\$@\spxentry{OPTION\$}}\index{OPTION\$@\spxentry{OPTION\$}!OPTION\$ FOR\sphinxhyphen{}IND\$FILE Examples@\spxentry{OPTION\$ FOR\sphinxhyphen{}IND\$FILE Examples}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{OPTION IND\$FILE Examples}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
OPTION\PYGZdl{} FOR\PYGZhy{}IND\PYGZdl{}FILE\PYGZhy{}DOWNLOAD,                            *
    (METHOD,\PYGZsq{}*OPT\PYGZsq{}),              \PYGZdq{}ASCII CRLF\PYGZdq{} or null    *
    (FROM,\PYGZsq{}*DSN\PYGZsq{}),                 TSO dataset name       *
    (FILE\PYGZhy{}OUT,\PYGZsq{}DOWNLOAD\PYGZsq{}),                                *
    (RET\PYGZhy{}CODE,\PYGZsq{}RETURN\PYGZhy{}CODE\PYGZsq{}),                             *
    TOVAR=\PYGZsq{}FTCOMMAND\PYGZsq{}
\end{sphinxVerbatim}

\sphinxAtStartPar
In this example, the VIRTEL variable OPT contains the IND\$FILE optional parameters and DSN contains the dataset
name. On completion of the instruction, FTCOMMAND contains the IND\$FILE command to be sent to TSO. When the
file transfer completes, the VIRTEL variable DOWNLOAD contains the contents of the downloaded file, and RETURNCODE
contains the IND\$FILE completion message “TRANS03 File transfer complete” or an error message.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
OPTION\PYGZdl{} FOR\PYGZhy{}IND\PYGZdl{}FILE\PYGZhy{}UPLOAD,                              *
(METHOD,\PYGZsq{}*OPT\PYGZsq{}),                    \PYGZdq{}ASCII CRLF\PYGZdq{} or null  *
(TO,\PYGZsq{}*DSN\PYGZsq{}),                             TSO dataset name *
(FILE\PYGZhy{}IN,\PYGZsq{}UPLOAD\PYGZsq{}),                                       *
(RET\PYGZhy{}CODE,\PYGZsq{}RETURN\PYGZhy{}CODE\PYGZsq{}),                                 *
TOVAR=\PYGZsq{}FTCOMMAND\PYGZsq{}
\end{sphinxVerbatim}

\sphinxAtStartPar
In this example, the VIRTEL variable OPT contains the IND\$FILE optional parameters and DSN contains the dataset
name. On completion of the instruction, FTCOMMAND contains the IND\$FILE command to be sent to TSO. When the
file transfer is initiated, VIRTEL sends the contents of the variable UPLOAD to IND\$FILE. When the file transfer
completes, RETURN\sphinxhyphen{}CODE contains the IND\$FILE completion message “TRANS03 File transfer complete” or an error
message.

\index{OPTION\$ FOR\sphinxhyphen{}MQ@\spxentry{OPTION\$ FOR\sphinxhyphen{}MQ}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!OPTION\$ FOR\sphinxhyphen{}MQ@\spxentry{OPTION\$ FOR\sphinxhyphen{}MQ}}\index{OPTION\$ FOR\sphinxhyphen{}MQ@\spxentry{OPTION\$ FOR\sphinxhyphen{}MQ}!OPTION\$@\spxentry{OPTION\$}}\index{OPTION\$@\spxentry{OPTION\$}!OPTION\$ FOR\sphinxhyphen{}MQ@\spxentry{OPTION\$ FOR\sphinxhyphen{}MQ}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{OPTION\$ FOR\sphinxhyphen{}MQ}

\sphinxAtStartPar
Builds a parameter list for a subsequent SEND\$ TO\sphinxhyphen{}LINE instruction when the line type is MQ.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
OPTION\PYGZdl{} FOR\PYGZhy{}MQ,                   *
(METHOD,\PYGZsq{}REQUEST\PYGZhy{}AND\PYGZhy{}RESPONSE\PYGZsq{}),  *
(REPLY\PYGZhy{}TO\PYGZhy{}Q,\PYGZsq{}MQ\PYGZhy{}REP\PYGZsq{}),            *
(REPLY\PYGZhy{}TO\PYGZhy{}QMGR,\PYGZsq{}qmgrid\PYGZsq{}),         *
(FILE\PYGZhy{}OUT,\PYGZsq{}varname1\PYGZsq{}),            *
(FILE\PYGZhy{}IN,\PYGZsq{}varname2\PYGZsq{}),             *
(RET\PYGZhy{}CODE,\PYGZsq{}retcode\PYGZsq{}),             *
TOVAR=varnamep
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{qmgrid}
\sphinxAtStartPar
The MQ queue manager ID

\sphinxlineitem{varname2}
\sphinxAtStartPar
the name of the VIRTEL variable which contains the input data (COMMAREA or container).

\sphinxlineitem{varname1}
\sphinxAtStartPar
the name of the VIRTEL variable which contains data to be written to the MQ line.

\sphinxlineitem{varnamep}
\sphinxAtStartPar
the name of the VIRTEL variable which will contain the parameter list.

\sphinxlineitem{retcode}
\sphinxAtStartPar
the name of the VIRTEL variable which will receive the return code from the MQ request.

\end{description}

\index{OPTION\$ FOR\sphinxhyphen{}QUICKLNK@\spxentry{OPTION\$ FOR\sphinxhyphen{}QUICKLNK}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!OPTION\$ FOR\sphinxhyphen{}QUICKLNK@\spxentry{OPTION\$ FOR\sphinxhyphen{}QUICKLNK}}\index{OPTION\$ FOR\sphinxhyphen{}QUICKLNK@\spxentry{OPTION\$ FOR\sphinxhyphen{}QUICKLNK}!OPTION\$@\spxentry{OPTION\$}}\index{OPTION\$@\spxentry{OPTION\$}!OPTION\$ FOR\sphinxhyphen{}QUICKLNK@\spxentry{OPTION\$ FOR\sphinxhyphen{}QUICKLNK}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{OPTION\$ FOR\sphinxhyphen{}QUICKLNK}

\sphinxAtStartPar
Builds a parameter list for a subsequent SEND\$ TO\sphinxhyphen{}LINE instruction when the line type is QUICKLNK.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
OPTION\PYGZdl{} FOR\PYGZhy{}QUICKLNK,
    (METHOD,\PYGZsq{}CALL\PYGZsq{}),
    (PROGRAM,\PYGZsq{}program\PYGZsq{}),
    (TERMINAL,\PYGZsq{}terminal\PYGZsq{}),
    (FILE\PYGZhy{}OUT,\PYGZsq{}fileIn\PYGZsq{}),
    (FILE\PYGZhy{}IN,\PYGZsq{}fileOut\PYGZsq{}),
    (RET\PYGZhy{}CODE,\PYGZsq{}retCode\PYGZsq{}),
    (RET\PYGZhy{}CICS1,\PYGZsq{}retCics1\PYGZsq{}),
    (RET\PYGZhy{}CICS2,\PYGZsq{}retCics2\PYGZsq{}),
    TOVAR=\PYGZsq{}params\PYGZsq{}

OPTION\PYGZdl{} FOR\PYGZhy{}QUICKLNK,
    (METHOD,\PYGZsq{}CALL\PYGZhy{}CONTAINER\PYGZsq{}),
    (PROGRAM,\PYGZsq{}program\PYGZsq{}),
    (TERMINAL,\PYGZsq{}terminal\PYGZsq{}),
    (CHANNEL,\PYGZsq{}*channel\PYGZsq{}),
    (FILE\PYGZhy{}OUT,\PYGZsq{}fileIn\PYGZsq{}),
    (FILE\PYGZhy{}IN,\PYGZsq{}fileOut\PYGZsq{}),
    (RET\PYGZhy{}CODE,\PYGZsq{}retCode\PYGZsq{}),
    (RET\PYGZhy{}CICS1,\PYGZsq{}retCics1\PYGZsq{}),
    (RET\PYGZhy{}CICS2,\PYGZsq{}retCics2\PYGZsq{}),
    TOVAR=\PYGZsq{}params\PYGZsq{}

OPTION\PYGZdl{} FOR\PYGZhy{}QUICKLNK,
    (METHOD,\PYGZsq{}CALL\PYGZhy{}CONTAINER\PYGZhy{}LIST\PYGZsq{}),
    (PROGRAM,\PYGZsq{}*program\PYGZsq{}),
    (TERMINAL,\PYGZsq{}terminal\PYGZsq{}),
    (CHANNEL,\PYGZsq{}*channel\PYGZsq{}),
    (CONTAINERS\PYGZhy{}FOR\PYGZhy{}QUESTION,\PYGZsq{}contIn\PYGZsq{}),
    (CONTAINERS\PYGZhy{}FOR\PYGZhy{}RESPONSE,\PYGZsq{}contOut\PYGZsq{}),
    (RET\PYGZhy{}CODE,\PYGZsq{}retCode\PYGZsq{}),
    (RET\PYGZhy{}CICS1,\PYGZsq{}retCics1\PYGZsq{}),
    (RET\PYGZhy{}CICS2,\PYGZsq{}retCics2\PYGZsq{}),
    TOVAR=\PYGZsq{}params\PYGZsq{}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{METHOD}
\sphinxAtStartPar
(mandatory) the service method Valid values are:

\sphinxlineitem{CALL}
\sphinxAtStartPar
Call with a COMMAREA

\sphinxlineitem{CALL\sphinxhyphen{}CONTAINER}
\sphinxAtStartPar
Call with a container

\sphinxlineitem{CALL\sphinxhyphen{}CONTAINER\sphinxhyphen{}LIST}
\sphinxAtStartPar
Call with a list of containers

\sphinxlineitem{program}
\sphinxAtStartPar
(mandatory) the name of the CICS program to call (see Note).

\sphinxlineitem{terminal}
\sphinxAtStartPar
(optional) the name of a CICS terminal.

\sphinxlineitem{channel}
\sphinxAtStartPar
name (1\textendash{}16 characters) of the channel that owns the container (see Note). Mandatory if METHOD is ‘CALL\sphinxhyphen{}CONTAINER’ or ‘CALL\sphinxhyphen{}CONTAINER\sphinxhyphen{}LIST’.

\sphinxlineitem{contIn}
\sphinxAtStartPar
the name of the VIRTEL variable which contains the input data as a containers list (see Note). Mandatory if METHOD is ‘CALL\sphinxhyphen{}CONTAINER\sphinxhyphen{}LIST’, invalid otherwise.

\sphinxlineitem{contOut}
\sphinxAtStartPar
the name of the VIRTEL variable which will receive the output data as a containers list (see Note). Mandatory if METHOD is ‘CALL\sphinxhyphen{}CONTAINER\sphinxhyphen{}LIST’, invalid otherwise.

\sphinxlineitem{fileIn}
\sphinxAtStartPar
the name of the VIRTEL variable which contains the input data (COMMAREA or container) (see Note). Mandatory if METHOD is ‘CALL’ or ‘CALL\sphinxhyphen{}CONTAINER’, invalid otherwise.

\sphinxlineitem{fileOut}
\sphinxAtStartPar
the name of the VIRTEL variable which will receive the output data (COMMAREA or container) (see Note). Mandatory if METHOD is ‘CALL’ or ‘CALL\sphinxhyphen{}CONTAINER’, invalid otherwise.

\sphinxlineitem{retCode}
\sphinxAtStartPar
(Mandatory) the name of the VIRTEL variable which will receive the service return code.

\sphinxlineitem{retCics1}
\sphinxAtStartPar
(Mandatory) the name of the VIRTEL variable which will receive the CICS return code (EIBRESP).

\sphinxlineitem{retCics2}
\sphinxAtStartPar
(Mandatory) the name of the VIRTEL variable which will receive a complementary CICS return code (EIBRESP2).

\sphinxlineitem{params}
\sphinxAtStartPar
(Mandatory) the name of the VIRTEL variable which will contain the parameter list.

\end{description}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
If the field begins with “*” then it is treated as the name of a variable.
\end{sphinxadmonition}

\index{OPTION\$ FOR\sphinxhyphen{}SMTP@\spxentry{OPTION\$ FOR\sphinxhyphen{}SMTP}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!OPTION\$ FOR\sphinxhyphen{}SMTP@\spxentry{OPTION\$ FOR\sphinxhyphen{}SMTP}}\index{OPTION\$ FOR\sphinxhyphen{}SMTP@\spxentry{OPTION\$ FOR\sphinxhyphen{}SMTP}!OPTION\$@\spxentry{OPTION\$}}\index{OPTION\$@\spxentry{OPTION\$}!OPTION\$ FOR\sphinxhyphen{}SMTP@\spxentry{OPTION\$ FOR\sphinxhyphen{}SMTP}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{OPTION\$ FOR\sphinxhyphen{}SMTP}

\sphinxAtStartPar
Builds a parameter list for a subsequent SEND\$ TO\sphinxhyphen{}LINE instruction when the line type is SMTP.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
OPTION\PYGZdl{} FOR\PYGZhy{}SMTP,                                       *
    (TO,\PYGZsq{}toaddr\PYGZsq{}),                                      *
    (FROM,\PYGZsq{}fromaddr\PYGZsq{}),                                  *
    (CC,\PYGZsq{}ccaddr\PYGZsq{}),                                      *
    (BCC,\PYGZsq{}bccaddr\PYGZsq{}),                                    *
    (TEXT,\PYGZsq{}bodytext\PYGZsq{}),                                  *
    (SUBJECT,\PYGZsq{}subjtext\PYGZsq{}),                               *
    (CHARSET,\PYGZsq{}charset\PYGZsq{}),                                *
    (HEADER,\PYGZsq{}header\PYGZsq{}),                                  *
    (FILE\PYGZhy{}OUT,\PYGZsq{}varname\PYGZsq{},\PYGZsq{}filename\PYGZsq{},\PYGZsq{}filetype\PYGZsq{},\PYGZsq{}disp\PYGZsq{}),  *
    (ALTERNATE\PYGZhy{}TEXT,\PYGZsq{}altvar\PYGZsq{},\PYGZsq{}altfn\PYGZsq{},\PYGZsq{}altft\PYGZsq{},\PYGZsq{}altdp\PYGZsq{}),  *
    TOVAR=varnamep
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{toaddr}
\sphinxAtStartPar
the email address of the recipient (see note below).

\sphinxlineitem{fromaddr}
\sphinxAtStartPar
the email address of the sender (see note below).

\sphinxlineitem{ccaddr}
\sphinxAtStartPar
the email address(es) of the carbon\sphinxhyphen{}copy recipient(s) (see note below).

\sphinxlineitem{bccaddr}
\sphinxAtStartPar
the email address(es) of the blind carbon\sphinxhyphen{}copy recipient(s) (see note below).

\sphinxlineitem{bodytext}
\sphinxAtStartPar
a character string to be placed in the message body (see note below).

\sphinxlineitem{subjtext}
\sphinxAtStartPar
a character string to be placed in the message subject line (see note below).

\sphinxlineitem{charset}
\sphinxAtStartPar
the character set name to be included in the SMTP Content\sphinxhyphen{}type header (see note below). For example, ISO\sphinxhyphen{}8859\sphinxhyphen{}15

\sphinxlineitem{header}
\sphinxAtStartPar
additional SMTP headers to be inserted in the message. Multiple headers may be inserted by specifying more than one HEADER parameter.

\sphinxlineitem{varname}
\sphinxAtStartPar
the name of the VIRTEL variable which contains data to be written as an attached file. Multiple files may be attached by specifying more than one FILE\sphinxhyphen{}OUT parameter.

\sphinxlineitem{filename}
\sphinxAtStartPar
the name of the attached file.

\sphinxlineitem{filetype}
\sphinxAtStartPar
the file type to be sent in the Content\sphinxhyphen{}type mime header of the attached file. For example text/plain, application/x\sphinxhyphen{}tar, etc.

\sphinxlineitem{disp}
\sphinxAtStartPar
the Content\sphinxhyphen{}Disposition of the attached file. Possible values are inline and attachment. This is an optional subparameter and its default value is attachment.

\sphinxlineitem{altvar}
\sphinxAtStartPar
the name of the VIRTEL variable which contains data to be written as an alternate text file. When the ALTERNATETEXT parameter is specified, the generated email will be structured as a multipart/alternative message, and the bodytext specified in the TEXT parameter will become a file with content type text/plain

\sphinxlineitem{altfn}
\sphinxAtStartPar
the name of the alternate text file.

\sphinxlineitem{altft}
\sphinxAtStartPar
the file type of the alternate text file, usually text/html

\sphinxlineitem{altdp}
\sphinxAtStartPar
the Content\sphinxhyphen{}Disposition of the alternate text file, usually inline.

\sphinxlineitem{varnamep}
\sphinxAtStartPar
the name of the VIRTEL variable which will contain the parameter list.

\end{description}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
If the field begins with “*” then it is treated as the name of a variable.
\end{sphinxadmonition}

\index{OPTION\$ FOR\sphinxhyphen{}HTTP Example@\spxentry{OPTION\$ FOR\sphinxhyphen{}HTTP Example}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!OPTION\$ FOR\sphinxhyphen{}HTTP Example@\spxentry{OPTION\$ FOR\sphinxhyphen{}HTTP Example}}\index{OPTION\$ FOR\sphinxhyphen{}HTTP Example@\spxentry{OPTION\$ FOR\sphinxhyphen{}HTTP Example}!OPTION\$@\spxentry{OPTION\$}}\index{OPTION\$@\spxentry{OPTION\$}!OPTION\$ FOR\sphinxhyphen{}HTTP Example@\spxentry{OPTION\$ FOR\sphinxhyphen{}HTTP Example}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{1.18.25.7. OPTION\$ Example:}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
OPTION\PYGZdl{} FOR\PYGZhy{}HTTP,                                  *
    (METHOD,\PYGZsq{}POST\PYGZsq{}),                               *
    (SITE,\PYGZsq{}api.google.com:80\PYGZsq{}),                    *
    (TO,\PYGZsq{}/search/beta2\PYGZsq{}),                          *
    (HEADER,\PYGZsq{}Content\PYGZhy{}Type: application/soap+xml\PYGZsq{}), *
    (HEADER,\PYGZsq{}SOAPAction: urn:GoogleSearchAction\PYGZsq{}), *
    (FILE\PYGZhy{}OUT,\PYGZsq{}QUESTION\PYGZsq{}),                         *
    (FILE\PYGZhy{}IN,\PYGZsq{}ANSWER\PYGZsq{}),                            *
    (RET\PYGZhy{}CODE,\PYGZsq{}HTTP\PYGZhy{}RETURN\PYGZhy{}CODE\PYGZsq{}),                 *
    TOVAR=\PYGZsq{}MYPARMS\PYGZsq{}
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
OPTION\PYGZdl{} FOR\PYGZhy{}HTTP,                                  *
    (METHOD,\PYGZsq{}GET\PYGZsq{}),                                *
    (SITE,\PYGZsq{}*SITENAME\PYGZsq{}),                            *
    (TO,\PYGZsq{}/search\PYGZsq{}),                                *
    (TEXT,\PYGZsq{}?ie=UTF\PYGZhy{}8\PYGZam{}q=test\PYGZsq{}),                     *
    (HEADER,\PYGZsq{}Accept: text/xml\PYGZsq{}),                   *
    (FILE\PYGZhy{}IN,\PYGZsq{}ANSWER\PYGZsq{}),                            *
    TOVAR=\PYGZsq{}MYPARMS\PYGZsq{}
\end{sphinxVerbatim}

\sphinxAtStartPar
In the above example, the VIRTEL variable SITENAME contains the value of the SITE parameter.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
OPTION\PYGZdl{} FOR\PYGZhy{}SMTP,                                      *
    (TO,\PYGZsq{}*DESTADDR\PYGZsq{}),                                  *
    (FROM,\PYGZsq{}me@y.com\PYGZsq{}),                                 *
    (CC,\PYGZsq{}info@y.com\PYGZsq{}),                                 *
    (BCC,\PYGZsq{}archive@y.com\PYGZsq{}),                             *
    (TEXT,\PYGZsq{}your file is attached\PYGZsq{}),                    *
    (SUBJECT,\PYGZsq{}analysis result\PYGZsq{}),                       *
    (CHARSET,\PYGZsq{}ISO\PYGZhy{}8859\PYGZhy{}15\PYGZsq{}),                           *
    (HEADER,\PYGZsq{}X\PYGZhy{}Priority: 3\PYGZsq{}),                          *
    (FILE\PYGZhy{}OUT,\PYGZsq{}MYVAR1\PYGZsq{},\PYGZsq{}out.tar\PYGZsq{},\PYGZsq{}application/x\PYGZhy{}tar\PYGZsq{}), *
    (FILE\PYGZhy{}OUT,\PYGZsq{}MYVAR2\PYGZsq{},,\PYGZsq{}application/x\PYGZhy{}tar\PYGZsq{}),          *
    (ALTERNATE\PYGZhy{}TEXT,\PYGZsq{}M01\PYGZsq{},\PYGZsq{}Message.html\PYGZsq{},              *
    \PYGZsq{}text/html\PYGZsq{},\PYGZsq{}inline\PYGZsq{}),                             *
    TOVAR=\PYGZsq{}MYPARMS\PYGZsq{}
\end{sphinxVerbatim}

\sphinxAtStartPar
In the above example, the variable DESTADDR contains the value of the TO parameter.

\index{PERFORM\$@\spxentry{PERFORM\$}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!PERFORM\$@\spxentry{PERFORM\$}}\ignorespaces 

\subsubsection{PERFORM\$ instruction}
\label{\detokenize{User_Guide:perform-instruction}}\label{\detokenize{User_Guide:index-288}}
\sphinxAtStartPar
This instruction allows to execute a SUBROUTINE scenario before continuing in sequence.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
PERFORM\PYGZdl{} mylabel
\end{sphinxVerbatim}

\sphinxAtStartPar
It may be used in any scenario. A subroutine may contains a PERFORM\$ instruction to call another subroutine up to 3
levels. For example, main scenario may call level\_1 subroutine scenario, which may call level\_2 subroutine scenario,
which may call level\_3 subroutine scenario, but level\_3 cannot call level\_4 subroutine scenario.
\begin{description}
\sphinxlineitem{mylabel}
\sphinxAtStartPar
Specifies the subroutine scenario label to be performed.

\sphinxlineitem{. index::}
\sphinxAtStartPar
pair: PERFORM\$ Examples; Scenario Instructions

\end{description}

\sphinxAtStartPar
\sphinxstylestrong{PERFORM\$ Example}

\sphinxAtStartPar
Here is a sample of the usage of PERFORM\$ and LABEL\$ instructions.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
PERFORM SCREENS APPL=PERFORM,EXEC=NO
* SCENARIO TO TEST PERFORM\PYGZdl{} AND SCENARIO SUBROUTINE
*
        SCENARIO INITIAL
*
        ERROR\PYGZdl{} 0,\PYGZsq{}Level 0\PYGZsq{}
        PERFORM\PYGZdl{} LEVEL1
        ERROR\PYGZdl{} 0,\PYGZsq{}Level 0\PYGZsq{}
        GOTO\PYGZdl{} FIN
        FIN LABEL\PYGZdl{}
        SCENARIO END
*
LEVEL1  SCENARIO SUBROUTINE
        ERROR\PYGZdl{} 0,\PYGZsq{}Level 1\PYGZsq{}
        PERFORM\PYGZdl{} LEVEL2
        ERROR\PYGZdl{} 0,\PYGZsq{}Level 1\PYGZsq{}
        IF\PYGZdl{} EXISTS\PYGZhy{}VARIABLE,\PYGZsq{}TOTO\PYGZsq{},THEN=FIN,ELSE=PASFIN
        PASFIN LABEL\PYGZdl{}
        GOTO\PYGZdl{} FIN
FIN     LABEL\PYGZdl{}
SCENARIO END
*
LEVEL2  SCENARIO SUBROUTINE
        ERROR\PYGZdl{} 0,\PYGZsq{}Level 2\PYGZsq{}
        PERFORM\PYGZdl{} LEVEL3
        ERROR\PYGZdl{} 0,\PYGZsq{}Level 2\PYGZsq{}
ETIQ    CASE\PYGZdl{} (1,1,8),(EQ,\PYGZsq{}TOTO\PYGZsq{},ET1),(EQ,\PYGZsq{}TITI\PYGZsq{},ET2),                  *
            (GE,\PYGZsq{}YYYY\PYGZsq{},ET4),(LE,\PYGZsq{}ZZZ\PYGZsq{},ET5),                             *
            (EQ,VARIABLE,\PYGZsq{}VVVV\PYGZsq{},ET6),                                   *
            (EQ,\PYGZsq{}*VVVV\PYGZsq{},ET6),                                           *
            (EQ,STRING,\PYGZsq{}SSSS\PYGZsq{},ET7),                                     *
            (BEGIN,\PYGZsq{}XXXX\PYGZsq{},ET3),                                         *
            (CONTAINS,\PYGZsq{}XXXX\PYGZsq{},ET3),                                      *
            ELSE=ET6
ET1     LABEL\PYGZdl{}
ET2     LABEL\PYGZdl{}
ET3     LABEL\PYGZdl{}
ET4     LABEL\PYGZdl{}
ET5     LABEL\PYGZdl{}
ET6     LABEL\PYGZdl{}
ET7     LABEL\PYGZdl{}
        SCENARIO END
*
LEVEL3  SCENARIO SUBROUTINE
        ERROR\PYGZdl{} 0,\PYGZsq{}Level 3\PYGZsq{}
        SCENARIO END
*
       SCRNEND
END
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{. index::}
\sphinxAtStartPar
pair: POP\$; Scenario Instructions

\end{description}


\subsubsection{POP\$ instruction}
\label{\detokenize{User_Guide:pop-instruction}}
\sphinxAtStartPar
This instruction allows a scenario to delete values from VIRTEL table variables.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
POP\PYGZdl{} ALL\PYGZhy{}VALUES\PYGZhy{}OF,VAR=varname
POP\PYGZdl{} FIRST\PYGZhy{}VALUE\PYGZhy{}OF,VAR=varname
POP\PYGZdl{} VAR=varname
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{ALL\sphinxhyphen{}VALUES\sphinxhyphen{}OF}
\sphinxAtStartPar
indicates that all values of the table variable are to be deleted.

\sphinxlineitem{FIRST\sphinxhyphen{}VALUE\sphinxhyphen{}OF}
\sphinxAtStartPar
indicates that the first value of a table variable is to be deleted. If the variable contains only one value, then the variable is deleted entirely.

\sphinxlineitem{varname}
\sphinxAtStartPar
the name of the VIRTEL variable.

\end{description}

\sphinxAtStartPar
POP\$ VAR=varname is equivalent to POP\$ FIRST\sphinxhyphen{}VALUE\sphinxhyphen{}OF,VAR=varname
\begin{description}
\sphinxlineitem{. index::}
\sphinxAtStartPar
pair: RETURN\$; Scenario Instructions

\end{description}


\subsubsection{RETURN\$ instruction}
\label{\detokenize{User_Guide:return-instruction}}
\sphinxAtStartPar
This instruction terminates a subroutine called by a {\hyperref[\detokenize{User_Guide:v462ug-map-execute}]{\sphinxcrossref{\DUrole{std,std-ref}{“MAP\$ EXECUTE”}}}} instruction.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
RETURN\PYGZdl{}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{. index::}
\sphinxAtStartPar
pair: SEND\$; Scenario Instructions

\end{description}


\subsubsection{SEND\$ instruction}
\label{\detokenize{User_Guide:send-instruction}}
\sphinxAtStartPar
This instruction allows a scenario to construct the response to an input request.

\index{SEND\$ AS\sphinxhyphen{}ANSWER@\spxentry{SEND\$ AS\sphinxhyphen{}ANSWER}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!SEND\$ AS\sphinxhyphen{}ANSWER@\spxentry{SEND\$ AS\sphinxhyphen{}ANSWER}}\index{SEND\$ AS\sphinxhyphen{}ANSWER@\spxentry{SEND\$ AS\sphinxhyphen{}ANSWER}!SEND\$@\spxentry{SEND\$}}\index{SEND\$@\spxentry{SEND\$}!SEND\$ AS\sphinxhyphen{}ANSWER@\spxentry{SEND\$ AS\sphinxhyphen{}ANSWER}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{SEND\$ AS\sphinxhyphen{}ANSWER}

\sphinxAtStartPar
Sends the contents of a VIRTEL variable as the response to an HTTP request.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SEND\PYGZdl{} AS\PYGZhy{}ANSWER,VAR=varname,TYPE=\PYGZsq{}filetype\PYGZsq{},EXPIRES=exphdr
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{varname}
\sphinxAtStartPar
the name of the VIRTEL variable which contains the response data.

\sphinxlineitem{filetype}
\sphinxAtStartPar
the file type to be sent in the Content\sphinxhyphen{}Type HTTP header. Typical values are text/plain, text/html, and text/xml

\sphinxlineitem{exphdr}\begin{description}
\sphinxlineitem{EXPIRES=IMMEDIATELY}
\sphinxAtStartPar
specifies that the response should not be kept in a cache (this is the default value)

\sphinxlineitem{EXPIRES=ENDOFDAY}
\sphinxAtStartPar
specifies that the request result can be kept in cache until end of day

\end{description}

\end{description}

\sphinxAtStartPar
The SEND\$ AS\sphinxhyphen{}ANSWER instruction is intended for use with files which can be displayed directly by the browser (text,
html, xml). For other types of file, which are intended to be saved on the user’s hard drive, use the SEND\$ AS\sphinxhyphen{}FILE
instruction instead.
If the line type is not HTTP, the SEND\$ AS\sphinxhyphen{}ANSWER and SEND\$ AS\sphinxhyphen{}FILE instructions are processed as “SEND\$ VARIABLETO\sphinxhyphen{}
LINE” \textless{}\#\_V462UG\_capability\_types9 with the LINE parameter set to the line on which the scenario is running.

\index{SEND\$ AS\sphinxhyphen{}ANSWER@\spxentry{SEND\$ AS\sphinxhyphen{}ANSWER}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!SEND\$ AS\sphinxhyphen{}ANSWER@\spxentry{SEND\$ AS\sphinxhyphen{}ANSWER}}\index{SEND\$ AS\sphinxhyphen{}ANSWER@\spxentry{SEND\$ AS\sphinxhyphen{}ANSWER}!SEND\$@\spxentry{SEND\$}}\index{SEND\$@\spxentry{SEND\$}!SEND\$ AS\sphinxhyphen{}ANSWER@\spxentry{SEND\$ AS\sphinxhyphen{}ANSWER}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{SEND\$ AS\sphinxhyphen{}FILE}

\sphinxAtStartPar
Sends the contents of a VIRTEL variable as an attached file in response to an HTTP request. Unlike the SEND\$ ASANSWER
instruction, the response includes a Content\sphinxhyphen{}Disposition: Attachment header, which means that the browser
displays a “Save As” dialog box instead of attempting to display the file in the browser window.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SEND\PYGZdl{} AS\PYGZhy{}FILE,VAR=varname,TYPE=\PYGZsq{}filetype\PYGZsq{},NAME=\PYGZsq{}filename\PYGZsq{}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{varname}
\sphinxAtStartPar
the name of the VIRTEL variable which contains the file.

\sphinxlineitem{filetype}
\sphinxAtStartPar
the file type to be sent in the Content\sphinxhyphen{}Type HTTP header. This parameter may be specified as a literal, or as ‘*varname’ where varname is the name of a VIRTEL variable whose value is the filetype. Examples of typical file types are application/pdf, application/x\sphinxhyphen{}tar

\sphinxlineitem{filename}
\sphinxAtStartPar
the file name to be included in the Content\sphinxhyphen{}Disposition HTTP header. This parameter may be specified as a literal, or as ‘*varname’ where varname is the name of a VIRTEL variable whose value is the filename.

\end{description}

\index{SEND\$ TO@\spxentry{SEND\$ TO}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!SEND\$ TO@\spxentry{SEND\$ TO}}\index{SEND\$ TO@\spxentry{SEND\$ TO}!SEND\$@\spxentry{SEND\$}}\index{SEND\$@\spxentry{SEND\$}!SEND\$ TO@\spxentry{SEND\$ TO}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{SEND\$ TO}

\sphinxAtStartPar
Sends an outbound message to a VIRTEL line. The name of the destination line is specified indirectly through a VIRTEL transaction. The SEND\$ TO instruction must be preceded by an {\hyperref[\detokenize{User_Guide:v462ug-option}]{\sphinxcrossref{\DUrole{std,std-ref}{“OPTION\$”}}}} instruction which sets up the parameters for the outbound message according to the line type.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SEND\PYGZdl{} TO,\PYGZsq{}tranname\PYGZsq{},PARMS=\PYGZsq{}varnamep\PYGZsq{},ERROR=label
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{tranname}
\sphinxAtStartPar
the external name of a VIRTEL transaction defined under the entry point applicable to this scenario. In the transaction definition, the “Application type” field must be 5 and the “Application” field must be the internal or external name of a VIRTEL line.

\sphinxlineitem{varnamep}
\sphinxAtStartPar
the name of the VIRTEL variable which contains the parameter list. This variable must have been created by a previous OPTION\$ instruction.

\sphinxlineitem{errlabel}
\sphinxAtStartPar
A branch will be made to this label if the message cannot be sent to the requested line.

\end{description}

\index{SEND\$ TO\sphinxhyphen{}LINE@\spxentry{SEND\$ TO\sphinxhyphen{}LINE}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!SEND\$ TO\sphinxhyphen{}LINE@\spxentry{SEND\$ TO\sphinxhyphen{}LINE}}\index{SEND\$ TO\sphinxhyphen{}LINE@\spxentry{SEND\$ TO\sphinxhyphen{}LINE}!SEND\$@\spxentry{SEND\$}}\index{SEND\$@\spxentry{SEND\$}!SEND\$ TO\sphinxhyphen{}LINE@\spxentry{SEND\$ TO\sphinxhyphen{}LINE}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{SEND\$ TO\sphinxhyphen{}LINE}

\sphinxAtStartPar
Sends an outbound message on the specified line. SEND\$ TO\sphinxhyphen{}LINE is identical to SEND\$ TO except that the name of the line is specified directly in the scenario instead of via a transaction. The SEND\$ TO\sphinxhyphen{}LINE instruction must be preceded by an {\hyperref[\detokenize{User_Guide:v462ug-option}]{\sphinxcrossref{\DUrole{std,std-ref}{“OPTION\$”}}}} instruction which sets up the parameters for the outbound message according to the line type.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SEND\PYGZdl{} TO\PYGZhy{}LINE,LINE=\PYGZsq{}linename\PYGZsq{},MAXTIME=maxtime,PARMS=\PYGZsq{}varnamep\PYGZsq{},ERROR=label
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{linename}
\sphinxAtStartPar
the name of the VIRTEL line on which the message is to be sent. This may be the internal or external name of a line defined in the VIRTEL configuration.

\sphinxlineitem{varnamep}
\sphinxAtStartPar
the name of the VIRTEL variable which contains the parameter list. This variable must have been created by a previous OPTION\$ instruction.

\sphinxlineitem{errlabel}
\sphinxAtStartPar
A branch will be made to this label if the message cannot be sent to the requested line.

\sphinxlineitem{maxtime}
\sphinxAtStartPar
(optional) specifies the maximum time, in hundredths of a second, that the scenario will wait for an answer from the partner to which a request is sent. When this time expires, the scenario continues by going to the ERROR= lable. If the MAXTIME parameter is not specified, the scenario will wait indefinitely, or until VIRTEL disconnects the session when the timeout value of the entry point is exceeded.

\sphinxAtStartPar
This only apply to SEND\$ requests which imply a response, like sending a SOAP request to an HTTP server which would wait for a SOAP response.

\end{description}

\index{SEND\$ VARIABLE\sphinxhyphen{}TO@\spxentry{SEND\$ VARIABLE\sphinxhyphen{}TO}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!SEND\$ VARIABLE\sphinxhyphen{}TO@\spxentry{SEND\$ VARIABLE\sphinxhyphen{}TO}}\index{SEND\$ VARIABLE\sphinxhyphen{}TO@\spxentry{SEND\$ VARIABLE\sphinxhyphen{}TO}!SEND\$@\spxentry{SEND\$}}\index{SEND\$@\spxentry{SEND\$}!SEND\$ VARIABLE\sphinxhyphen{}TO@\spxentry{SEND\$ VARIABLE\sphinxhyphen{}TO}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{SEND\$ VARIABLE\sphinxhyphen{}TO}

\sphinxAtStartPar
Sends the contents of the specified variable as an outbound message on a VIRTEL line. The name of the destination line is specified indirectly through a VIRTEL transaction. A SEND\$ VARIABLE\sphinxhyphen{}TO instruction is equivalent to an {\hyperref[\detokenize{User_Guide:v462ug-option}]{\sphinxcrossref{\DUrole{std,std-ref}{“OPTION\$ instructions”}}}}  instruction followed by a SEND\$ TO instruction in the case where OPTION\$ specifies only a variable name.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SEND\PYGZdl{} VARIABLE\PYGZhy{}TO,tranname,VAR=varname,ERROR=label
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{tranname}
\sphinxAtStartPar
the external name of a VIRTEL transaction defined under the entry point applicable to this scenario. In the transaction definition, the “Application type” field must be 5 and the “Application” field must be the internal or external name of a VIRTEL line.

\sphinxlineitem{varname}
\sphinxAtStartPar
the name of the VIRTEL variable which contains data to be written to the line.

\sphinxlineitem{errlabel}
\sphinxAtStartPar
A branch will be made to this label if the message cannot be sent to the requested line.

\end{description}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
When an input scenario sends a variable to a VIRPASS line, the response from the VIRPASS line is passed to the output scenario in the \$VIRPASS\$ variable.
\end{sphinxadmonition}

\index{SEND\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}LINE@\spxentry{SEND\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}LINE}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!SEND\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}LINE@\spxentry{SEND\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}LINE}}\index{SEND\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}LINE@\spxentry{SEND\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}LINE}!SEND\$@\spxentry{SEND\$}}\index{SEND\$@\spxentry{SEND\$}!SEND\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}LINE@\spxentry{SEND\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}LINE}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{SEND\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}LINE}

\sphinxAtStartPar
Sends the contents of the specified variable as an outbound message on the specified VIRTEL line. SEND\$ VARIABLETO\sphinxhyphen{}
LINE is identical to SEND\$ VARIABLE\sphinxhyphen{}TO except that the name of the line is specified directly in the scenario instead
of via a transaction. A SEND\$ VARIABLE\sphinxhyphen{}TO\sphinxhyphen{}LINE instruction is equivalent to an {\hyperref[\detokenize{User_Guide:v462ug-option}]{\sphinxcrossref{\DUrole{std,std-ref}{“OPTION\$”}}}} instruction
followed by a SEND\$ TO\sphinxhyphen{}LINE instruction in the case where OPTION\$ specifies only a variable name.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SEND\PYGZdl{} VARIABLE\PYGZhy{}TO\PYGZhy{}LINE,VAR=varname,LINE=\PYGZsq{}linename\PYGZsq{},ERROR=label
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{varname}
\sphinxAtStartPar
the name of the VIRTEL variable which contains data to be written to the line.

\sphinxlineitem{linename}
\sphinxAtStartPar
the name of the VIRTEL line on which the message is to be sent. This may be the internal or external name of a line defined in the VIRTEL configuration.

\sphinxlineitem{errlabel}
\sphinxAtStartPar
A branch will be made to this label if the message cannot be sent to the requested line.

\sphinxlineitem{. index::}
\sphinxAtStartPar
pair: SET\$; Scenario Instruction

\end{description}


\subsubsection{SET\$ instruction}
\label{\detokenize{User_Guide:set-instruction}}
\sphinxAtStartPar
This instruction allows various parameters to be set.

\phantomsection\label{\detokenize{User_Guide:v462ug-set-encoding}}
\index{SET\$ ENCODING@\spxentry{SET\$ ENCODING}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!SET\$ ENCODING@\spxentry{SET\$ ENCODING}}\index{SET\$ ENCODING@\spxentry{SET\$ ENCODING}!SET\$@\spxentry{SET\$}}\index{SET\$@\spxentry{SET\$}!SET\$ ENCODING@\spxentry{SET\$ ENCODING}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{SET\$ ENCODING}

\sphinxAtStartPar
The SET\$ ENCODING instruction allows a scenario specify the default encoding for subsequent pages sent to the terminal, and the encoding of subsequent URLs for this session.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SET\PYGZdl{} ENCODING,UTF\PYGZhy{}8,\PYGZsq{}charset\PYGZsq{}
SET\PYGZdl{} ENCODING,UTF\PYGZhy{}8
SET\PYGZdl{} ENCODING,ISO\PYGZhy{}FOR\PYGZhy{}COUNTRY,\PYGZsq{}country\PYGZsq{}
SET\PYGZdl{} ENCODING,ISO\PYGZhy{}FOR\PYGZhy{}COUNTRY
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{UTF\sphinxhyphen{}8}
\sphinxAtStartPar
specifies that the terminal will be placed in UTF\sphinxhyphen{}8 mode.

\sphinxlineitem{charset}
\sphinxAtStartPar
specifies the name of the UTF\sphinxhyphen{}8 translation table to be used. Refer to the DEFUTF8 parameter in the section “Parameters of the VIRTCT” in the VIRTEL Installation Guide for a list of valid translation table names. If charset is not specified, the value of the DEFUTF8 parameter in the VIRTCT is used.

\sphinxlineitem{ISO\sphinxhyphen{}FOR\sphinxhyphen{}COUNTRY}
\sphinxAtStartPar
specifies that the terminal will be placed in ISO mode.

\sphinxlineitem{country}
\sphinxAtStartPar
specifies the name of the ISO translation table to be used. Refer to the {\hyperref[\detokenize{User_Guide:v462ug-set-country-code}]{\sphinxcrossref{\DUrole{std,std-ref}{“SET\sphinxhyphen{}COUNTRY\sphinxhyphen{}CODE”}}}} for a list of valid country names. If country is not specified, the value of the COUNTRY parameter in the VIRTCT is used.

\end{description}

\sphinxAtStartPar
By default, VIRTEL expects query parameters in the URL to be encoded in the same character set as the last page sent to the user. For the first URL of a session, where no page has yet been sent to the user, VIRTEL assumes the ISO encoding for the default country. The SET\$ ENCODING instruction allows a scenario to override this default.

\sphinxAtStartPar
The following example shows part of an input scenario. The scenario allows the user to override the default input encoding for query parameters by specifying either IE=UTF\sphinxhyphen{}8 or IE=ISO as an additional parameter of the URL.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
        COPY\PYGZdl{} INPUT\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=\PYGZsq{}IE\PYGZsq{},VAR=\PYGZsq{}IE\PYGZsq{}
        IF\PYGZdl{} NOT\PYGZhy{}FOUND,THEN=SUITE
        CASE\PYGZdl{} \PYGZsq{}IE\PYGZsq{}, *
            (EQ,\PYGZsq{}UTF\PYGZhy{}8\PYGZsq{},SETUTF8),                      *
            (EQ,\PYGZsq{}ISO\PYGZsq{},SETISO), *
            ELSE=SUITE
SETUTF8 SET\PYGZdl{} ENCODING,UTF\PYGZhy{}8,\PYGZsq{}IBM1147\PYGZsq{}
        GOTO\PYGZdl{} SUITE
SETISO  SET\PYGZdl{} ENCODING,ISO\PYGZhy{}FOR\PYGZhy{}COUNTRY,\PYGZsq{}US\PYGZsq{}
SUITE   EQU *
\end{sphinxVerbatim}

\sphinxAtStartPar
See also the {\hyperref[\detokenize{User_Guide:v462ug-set-url-encoding}]{\sphinxcrossref{\DUrole{std,std-ref}{“SET\$ URL\sphinxhyphen{}ENCODING”}}}}.

\index{SET\$ PAGE@\spxentry{SET\$ PAGE}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!SET\$ PAGE@\spxentry{SET\$ PAGE}}\index{SET\$ PAGE@\spxentry{SET\$ PAGE}!SET\$@\spxentry{SET\$}}\index{SET\$@\spxentry{SET\$}!SET\$ PAGE@\spxentry{SET\$ PAGE}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{SET\$ PAGE}

\sphinxAtStartPar
Indicates the name of the page template to be used for the current 3270 screen and all subsequent screens. This instruction has the same effect as the HOST4WEB command S GLOBAL PAGE.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SET\PYGZdl{} PAGE,\PYGZsq{}pagename\PYGZsq{}
\end{sphinxVerbatim}

\index{SET\$ PAGE\sphinxhyphen{}FROM\sphinxhyphen{}VARIABLE@\spxentry{SET\$ PAGE\sphinxhyphen{}FROM\sphinxhyphen{}VARIABLE}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!SET\$ PAGE\sphinxhyphen{}FROM\sphinxhyphen{}VARIABLE@\spxentry{SET\$ PAGE\sphinxhyphen{}FROM\sphinxhyphen{}VARIABLE}}\index{SET\$ PAGE\sphinxhyphen{}FROM\sphinxhyphen{}VARIABLE@\spxentry{SET\$ PAGE\sphinxhyphen{}FROM\sphinxhyphen{}VARIABLE}!SET\$@\spxentry{SET\$}}\index{SET\$@\spxentry{SET\$}!SET\$ PAGE\sphinxhyphen{}FROM\sphinxhyphen{}VARIABLE@\spxentry{SET\$ PAGE\sphinxhyphen{}FROM\sphinxhyphen{}VARIABLE}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{SET\$ PAGE\sphinxhyphen{}FROM\sphinxhyphen{}VARIABLE}

\sphinxAtStartPar
This instruction is similar to SET\$ PAGE except that the name of the page template is contained in a VIRTEL variable.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SET\PYGZdl{} PAGE\PYGZhy{}FROM\PYGZhy{}VARIABLE,\PYGZsq{}varname\PYGZsq{},\PYGZsq{}suffix\PYGZsq{}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{varname}
\sphinxAtStartPar
the name of the VIRTEL variable which contains the page name. Trailing blanks are removed.

\sphinxlineitem{suffix}
\sphinxAtStartPar
a character string to be appended to the page name.

\end{description}

\sphinxAtStartPar
Example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
COPY\PYGZdl{} SCREEN\PYGZhy{}TO\PYGZhy{}VARIABLE,SCREEN=(02,12,05),VAR=\PYGZsq{}MYSCREEN\PYGZsq{}
SET\PYGZdl{} PAGE\PYGZhy{}FROM\PYGZhy{}VARIABLE,\PYGZsq{}MYSCREEN\PYGZsq{},\PYGZsq{}.html\PYGZsq{}
\end{sphinxVerbatim}

\sphinxAtStartPar
In this example, if row 2 column 12 of the 3270 screen contains the characters “MAPъъ” (where ъ represents a blank) then the page name will be set to “MAP.html”

\index{SET\$ PRIORITY@\spxentry{SET\$ PRIORITY}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!SET\$ PRIORITY@\spxentry{SET\$ PRIORITY}}\index{SET\$ PRIORITY@\spxentry{SET\$ PRIORITY}!SET\$@\spxentry{SET\$}}\index{SET\$@\spxentry{SET\$}!SET\$ PRIORITY@\spxentry{SET\$ PRIORITY}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{SET\$ PRIORITY}

\sphinxAtStartPar
Allows a running scenario to reduce its priority in order to limit its CPU consumption.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SET\PYGZdl{} PRIORITY,level
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{level}
\sphinxAtStartPar
specifies the priority to be assigned to the scenario. The following values may be specified:
\begin{description}
\sphinxlineitem{LOW}
\sphinxAtStartPar
the scenario runs at low priority

\sphinxlineitem{MEDIUM}
\sphinxAtStartPar
the scenario runs at medium priority

\sphinxlineitem{HIGH}
\sphinxAtStartPar
the scenario runs at high priority. This is the default priority assigned to a scenario if no SET\$ PRIORITY instruction is executed.

\end{description}

\end{description}
\phantomsection\label{\detokenize{User_Guide:v462ug-set-screen-position}}
\index{SET\$ SCREEN\sphinxhyphen{}POSITION@\spxentry{SET\$ SCREEN\sphinxhyphen{}POSITION}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!SET\$ SCREEN\sphinxhyphen{}POSITION@\spxentry{SET\$ SCREEN\sphinxhyphen{}POSITION}}\index{SET\$ SCREEN\sphinxhyphen{}POSITION@\spxentry{SET\$ SCREEN\sphinxhyphen{}POSITION}!SET\$@\spxentry{SET\$}}\index{SET\$@\spxentry{SET\$}!SET\$ SCREEN\sphinxhyphen{}POSITION@\spxentry{SET\$ SCREEN\sphinxhyphen{}POSITION}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{SET\$ SCREEN\sphinxhyphen{}POSITION}

\sphinxAtStartPar
The SET\$ SCREEN\sphinxhyphen{}POSITION instruction allows a scenario to specify a rectangular screen area and loop on it letting VIRTEL handle the current line (column, length) value, referenced by the equal sign (‘=’).

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SET\PYGZdl{} SCREEN\PYGZhy{}POSITION,(row,col,len,ht),
SET\PYGZdl{} SCREEN\PYGZhy{}POSITION,TO\PYGZhy{}NEXT\PYGZhy{}LINE
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{row}
\sphinxAtStartPar
starting row of the portion of the screen to select

\sphinxlineitem{col}
\sphinxAtStartPar
starting column of the portion of the screen to select

\sphinxlineitem{len}
\sphinxAtStartPar
width (in columns) of the portion of the screen to select

\sphinxlineitem{ht}
\sphinxAtStartPar
height (in rows) of the portion of the screen to select

\sphinxlineitem{TO\sphinxhyphen{}NEXT\sphinxhyphen{}LINE}
\sphinxAtStartPar
sets the current position to the next line. If the next line is after the end of the current screen rectangle,the NOTFOUND condition will be raised. This condition can be tested by means of the {\hyperref[\detokenize{User_Guide:v462ug-if}]{\sphinxcrossref{\DUrole{std,std-ref}{“IF\$ instruction”}}}}.

\end{description}

\index{SET\$ SIGNON@\spxentry{SET\$ SIGNON}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!SET\$ SIGNON@\spxentry{SET\$ SIGNON}}\index{SET\$ SIGON@\spxentry{SET\$ SIGON}!SET\$@\spxentry{SET\$}}\index{SET\$@\spxentry{SET\$}!SET\$ SIGON@\spxentry{SET\$ SIGON}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{SET\$ SIGNON}

\sphinxAtStartPar
Allows an IDENTIFICATION scenario to sign on to the security manager.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SET\PYGZdl{} SIGNON,\PYGZsq{}userid\PYGZsq{},\PYGZsq{}password\PYGZsq{},[\PYGZsq{}newpassword\PYGZsq{}],\PYGZsq{}retvar\PYGZsq{}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{userid}
\sphinxAtStartPar
The user name.

\sphinxlineitem{password}
\sphinxAtStartPar
The user’s current password.

\sphinxlineitem{newpassword}
\sphinxAtStartPar
The new password, if the user’s current password is to be changed.

\sphinxlineitem{retvar}
\sphinxAtStartPar
The name of a VIRTEL variable into which the security manager return code will be stored. The return code is stored as a decimal string (for example, ‘0’).

\end{description}

\sphinxAtStartPar
The user name and password fields may be specified as a string constant (not recommended), or as the name of a VIRTEL variable preceded by an asterisk. The retvar variable name is not preceded by an asterisk.

\index{SET\$ TEMPORARY\sphinxhyphen{}PAGE@\spxentry{SET\$ TEMPORARY\sphinxhyphen{}PAGE}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!SET\$ TEMPORARY\sphinxhyphen{}PAGE@\spxentry{SET\$ TEMPORARY\sphinxhyphen{}PAGE}}\index{SET\$ TEMPORARY\sphinxhyphen{}PAGE@\spxentry{SET\$ TEMPORARY\sphinxhyphen{}PAGE}!SET\$@\spxentry{SET\$}}\index{SET\$@\spxentry{SET\$}!SET\$ TEMPORARY\sphinxhyphen{}PAGE@\spxentry{SET\$ TEMPORARY\sphinxhyphen{}PAGE}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{SET\$ TEMPORARY\sphinxhyphen{}PAGE}

\sphinxAtStartPar
Indicates the name of the page template to be used for the current 3270 screen (but not for subsequent screens). This instruction has the same effect as the HOST4WEB command S PAGE.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SET\PYGZdl{} TEMPORARY\PYGZhy{}PAGE,\PYGZsq{}pagename\PYGZsq{}
\end{sphinxVerbatim}

\index{SET\$ TRANSACTION@\spxentry{SET\$ TRANSACTION}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!SET\$ TRANSACTION@\spxentry{SET\$ TRANSACTION}}\index{SET\$ TRANSACTION@\spxentry{SET\$ TRANSACTION}!SET\$@\spxentry{SET\$}}\index{SET\$@\spxentry{SET\$}!SET\$ TRANSACTION@\spxentry{SET\$ TRANSACTION}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{SET\$ TRANSACTION}

\sphinxAtStartPar
Allows an IDENTIFICATION scenario to select the transaction which will be executed.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SET\PYGZdl{} TRANSACTION,\PYGZsq{}tranname\PYGZsq{}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{tranname}
\sphinxAtStartPar
The external name of the transaction to be executed.

\end{description}
\phantomsection\label{\detokenize{User_Guide:v462ug-set-url-encoding}}
\index{SET\$ URL\sphinxhyphen{}ENCODING@\spxentry{SET\$ URL\sphinxhyphen{}ENCODING}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!SET\$ URL\sphinxhyphen{}ENCODING@\spxentry{SET\$ URL\sphinxhyphen{}ENCODING}}\index{SET\$ URL\sphinxhyphen{}ENCODING@\spxentry{SET\$ URL\sphinxhyphen{}ENCODING}!SET\$@\spxentry{SET\$}}\index{SET\$@\spxentry{SET\$}!SET\$ URL\sphinxhyphen{}ENCODING@\spxentry{SET\$ URL\sphinxhyphen{}ENCODING}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{SET\$ URL\sphinxhyphen{}ENCODING}

\sphinxAtStartPar
The SET\$ URL\sphinxhyphen{}ENCODING instruction is similar to the SET\$ ENCODING instruction, except that SET\$ URL\sphinxhyphen{}ENCODING
applies only to URLs received from the terminal, without affecting the default encoding for pages sent to the terminal.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SET\PYGZdl{} URL\PYGZhy{}ENCODING,UTF\PYGZhy{}8,\PYGZsq{}charset\PYGZsq{}
SET\PYGZdl{} URL\PYGZhy{}ENCODING,UTF\PYGZhy{}8
SET\PYGZdl{} URL\PYGZhy{}ENCODING,ISO\PYGZhy{}FOR\PYGZhy{}COUNTRY,\PYGZsq{}country\PYGZsq{}
SET\PYGZdl{} URL\PYGZhy{}ENCODING,ISO\PYGZhy{}FOR\PYGZhy{}COUNTRY
\end{sphinxVerbatim}

\sphinxAtStartPar
Refer to {\hyperref[\detokenize{User_Guide:v462ug-set-encoding}]{\sphinxcrossref{\DUrole{std,std-ref}{“SET\$ ENCODING”}}}} for a description of the parameters.

\sphinxAtStartPar
The SET\$ URL\sphinxhyphen{}ENCODING instruction can be used in an identification scenario to specify the encoding for the first URL
of a session, where no page has yet been sent to the user. If the encoding is not set by a scenario, VIRTEL assumes that
the first URL of a session is encoded using the ISO encoding for the default country.

\index{SET\$ SCREEN\sphinxhyphen{}POSITION Example@\spxentry{SET\$ SCREEN\sphinxhyphen{}POSITION Example}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!SET\$ SCREEN\sphinxhyphen{}POSITION Example@\spxentry{SET\$ SCREEN\sphinxhyphen{}POSITION Example}}\index{SET\$ SCREEN\sphinxhyphen{}POSITION Example@\spxentry{SET\$ SCREEN\sphinxhyphen{}POSITION Example}!SET\$@\spxentry{SET\$}}\index{SET\$@\spxentry{SET\$}!SET\$ SCREEN\sphinxhyphen{}POSITION Example@\spxentry{SET\$ SCREEN\sphinxhyphen{}POSITION Example}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{SET\$ Example}

\sphinxAtStartPar
Loop on the screen from line 11 to 20, looking for a given reference. When found, enter ‘X’ on colum 4 and key Enter

\begin{sphinxVerbatim}[commandchars=\\\{\}]
            SET\PYGZdl{} SCREEN\PYGZhy{}POSITION,(11,01,80,10)
*
LOOP\PYGZus{}FORM   EQU *
            CASE\PYGZdl{} (=,19,8),(NE,VARIABLE,\PYGZsq{}searchedRef\PYGZsq{},FORM\PYGZus{}NEXT)         X
            COPY\PYGZdl{} VALUE\PYGZhy{}TO\PYGZhy{}SCREEN,VALUE=\PYGZsq{}X\PYGZsq{},SCREEN=(=,04,01),            X
                TYPE=ERASE\PYGZhy{}FIELD
            ACTION\PYGZdl{} TO\PYGZhy{}APPLICATION,KEY=7D
            GOTO\PYGZdl{} THEEND
*
FORM\PYGZus{}NEXT EQU *
            SET\PYGZdl{} SCREEN\PYGZhy{}POSITION,TO\PYGZhy{}NEXT\PYGZhy{}LINE
            IF\PYGZdl{} NOT\PYGZhy{}FOUND,THEN=FORM\PYGZus{}COMPLETED,ELSE=LOOP\PYGZus{}FORM
*
FORM\PYGZus{}COMPLETED EQU *
            ERROR\PYGZdl{} 0,\PYGZsq{}Reference not found\PYGZsq{}
            GOTO\PYGZdl{} THEEND
\end{sphinxVerbatim}
\phantomsection\label{\detokenize{User_Guide:v462ug-tovar}}
\index{TOVAR\$@\spxentry{TOVAR\$}!Scenario Instruction@\spxentry{Scenario Instruction}}\index{Scenario Instruction@\spxentry{Scenario Instruction}!TOVAR\$@\spxentry{TOVAR\$}}\ignorespaces 

\subsubsection{TOVAR\$ instruction}
\label{\detokenize{User_Guide:tovar-instruction}}\label{\detokenize{User_Guide:index-305}}
\sphinxAtStartPar
The TOVAR\$ instruction assists in the generation of XML from a fixed\sphinxhyphen{}format data area known as a commarea. The
TOVAR\$ instruction works in conjunction with the MAP\$ instruction, which describes the format of the commarea and
its relation to the XML data stream.

\sphinxAtStartPar
Whereas the MAP\$ instruction allows the XML stream to be converted into commarea format, the TOVAR\$ instruction
uses the MAP\$ instructions to perform the reverse operation (“commarea\sphinxhyphen{}to\sphinxhyphen{}output” conversion). In other words, it
takes a commarea as input and generates a series of VIRTEL variables, which, with the aid of a suitable page template,
can be used to generate XML. See {\hyperref[\detokenize{User_Guide:v462ug-xml-parser}]{\sphinxcrossref{\DUrole{std,std-ref}{“VIRTEL as an XML parser/generator”}}}}.

\sphinxAtStartPar
The input commarea is specified according to one of the several formats of the TOVAR\$ instruction, as shown in the
following paragraphs.

\index{TOVAR\$ FROM\sphinxhyphen{}FIELD@\spxentry{TOVAR\$ FROM\sphinxhyphen{}FIELD}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!TOVAR\$ FROM\sphinxhyphen{}FIELD@\spxentry{TOVAR\$ FROM\sphinxhyphen{}FIELD}}\index{TOVAR\$ FROM\sphinxhyphen{}FIELD@\spxentry{TOVAR\$ FROM\sphinxhyphen{}FIELD}!TOVAR\$@\spxentry{TOVAR\$}}\index{TOVAR\$@\spxentry{TOVAR\$}!TOVAR\$ FROM\sphinxhyphen{}FIELD@\spxentry{TOVAR\$ FROM\sphinxhyphen{}FIELD}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{TOVAR\$ FROM\sphinxhyphen{}FIELD}

\sphinxAtStartPar
The TOVAR\$ FROM\sphinxhyphen{}FIELD instruction requests VIRTEL to generate a set of VIRTEL variables from an input commarea.
The input commarea is obtained from an HTML form field in the incoming HTTP request. The TOVAR\$ FROM\sphinxhyphen{}FIELD
instruction is normally contained in an INITIAL scenario.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
groupname TOVAR\PYGZdl{} FROM\PYGZhy{}FIELD,FIELD=\PYGZsq{}fieldname\PYGZsq{}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{groupname}
\sphinxAtStartPar
The label is required. It specifies the name of the input commarea. It must match the label on a preceding MAP\$ BEGIN instruction.

\sphinxlineitem{fieldname}
\sphinxAtStartPar
The name of the HTML form field which contains the input commarea data.

\end{description}
\phantomsection\label{\detokenize{User_Guide:v462ug-tovar-from-input}}
\index{TOVAR\$ FROM\sphinxhyphen{}INPUT@\spxentry{TOVAR\$ FROM\sphinxhyphen{}INPUT}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!TOVAR\$ FROM\sphinxhyphen{}INPUT@\spxentry{TOVAR\$ FROM\sphinxhyphen{}INPUT}}\index{TOVAR\$ FROM\sphinxhyphen{}INPUT@\spxentry{TOVAR\$ FROM\sphinxhyphen{}INPUT}!TOVAR\$@\spxentry{TOVAR\$}}\index{TOVAR\$@\spxentry{TOVAR\$}!TOVAR\$ FROM\sphinxhyphen{}INPUT@\spxentry{TOVAR\$ FROM\sphinxhyphen{}INPUT}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{TOVAR\$ FROM\sphinxhyphen{}INPUT}

\sphinxAtStartPar
The TOVAR\$ FROM\sphinxhyphen{}INPUT instruction requests VIRTEL to generate a set of VIRTEL variables from an input commarea.
The input commarea is obtained from the data area of the incoming HTTP request. The TOVAR\$ FROM\sphinxhyphen{}INPUT
instruction is normally contained in an INITIAL scenario.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
groupname TOVAR\PYGZdl{} FROM\PYGZhy{}INPUT
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{groupname}
\sphinxAtStartPar
The label is required. It specifies the name of the input commarea. It must match the label on a preceding MAP\$ BEGIN instruction.

\end{description}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
TOVAR\$ FROM\sphinxhyphen{}INPUT with a FIELD parameter is accepted and treated as TOVAR\$ FROM\sphinxhyphen{}FIELD
\end{sphinxadmonition}

\sphinxAtStartPar
The TOVAR\$ FROM\sphinxhyphen{}FIELD and TOVAR\$ FROM\sphinxhyphen{}INPUT instructions both obtain their data from an incoming HTTP
request. The HTTP request may use either via the GET method (where the input data is appended to the URL) or the
POST method (where the input data is contained in the request body). The difference between the two instructions is
that TOVAR\$ FROM\sphinxhyphen{}INPUT treats the entire data area as commarea data without any translation, whereas TOVAR\$
FROM\sphinxhyphen{}FIELD expects the data to be in the format fieldname=commareadata where commareadata is interpreted as
URL\sphinxhyphen{}encoded data (a “+” sign represents a space, and “\%xx” represents the hexadecimal encoding of an ASCII
character). TOVAR\$ FROM\sphinxhyphen{}FIELD is preferred when using the GET method, because certain characters cannot be
included in a URL without using URL\sphinxhyphen{}encoding.

\index{TOVAR\$ FROM\sphinxhyphen{}VARIABLE@\spxentry{TOVAR\$ FROM\sphinxhyphen{}VARIABLE}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!TOVAR\$ FROM\sphinxhyphen{}VARIABLE@\spxentry{TOVAR\$ FROM\sphinxhyphen{}VARIABLE}}\index{TOVAR\$ FROM\sphinxhyphen{}VARIABLE@\spxentry{TOVAR\$ FROM\sphinxhyphen{}VARIABLE}!TOVAR\$@\spxentry{TOVAR\$}}\index{TOVAR\$@\spxentry{TOVAR\$}!TOVAR\$ FROM\sphinxhyphen{}VARIABLE@\spxentry{TOVAR\$ FROM\sphinxhyphen{}VARIABLE}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{TOVAR\$ FROM\sphinxhyphen{}VARIABLE}

\sphinxAtStartPar
The TOVAR\$ FROM\sphinxhyphen{}VARIABLE instruction requests VIRTEL to generate a set of VIRTEL variables from an input
commarea. The input commarea is contained in a VIRTEL variable. The TOVAR\$ FROM\sphinxhyphen{}VARIABLE instruction is normally
contained in an OUTPUT scenario.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
groupname TOVAR\PYGZdl{} FROM\PYGZhy{}VARIABLE,VAR=varname
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{groupname}
\sphinxAtStartPar
The label is required. It specifies the name of the input commarea. It must match the label on a preceding MAP\$ BEGIN instruction.

\sphinxlineitem{varname}
\sphinxAtStartPar
The name of the VIRTEL variable which contains the input commarea data.

\sphinxlineitem{. index::}
\sphinxAtStartPar
pair: VIRSV\$; Scenario Instructions

\end{description}


\subsubsection{VIRSV\$ instruction}
\label{\detokenize{User_Guide:virsv-instruction}}
\sphinxAtStartPar
The VIRSV\$ instruction allows a service program to be called from a scenario. A service program is an external program
which is not part of VIRTEL but which executes in the VIRTEL address space. The VIRSV service request manager
dispatches work to service programs. Refer to the document Using VIRSV for details of writing service programs which
execute under the control of VIRSV.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
VIRSV\PYGZdl{} CALL or CALL\PYGZhy{}REUSE or TRANSACTION,
        (\PYGZsq{}servname\PYGZsq{},\PYGZsq{}progname\PYGZsq{}),
        (NUMBER,\PYGZsq{}n\PYGZsq{}),
        (STRINGZ,\PYGZsq{}cc..cc\PYGZsq{}),
        (IN\PYGZhy{}VARIABLE,\PYGZsq{}varname\PYGZsq{},len),
        (OUT\PYGZhy{}VARIABLE,\PYGZsq{}varname\PYGZsq{},len),
        OPTION=(option,option,...),
        TRACE=(traceopt,traceopt,...),
        ERROR=errlabel,TASKS=count
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{CALL}
\sphinxAtStartPar
Indicates that a new instance of the service program will be created for each request.

\sphinxlineitem{CALL\sphinxhyphen{}REUSE}
\sphinxAtStartPar
Indicates that the request will be routed to an existing instance of the service program, if one is available. Otherwise a new instance of the service program will be started to process this request, after which the service program will remain active and available to process further requests.

\sphinxlineitem{TRANSACTION}
\sphinxAtStartPar
Indicates a call to the service program which is part of a VIRSV transaction.

\sphinxlineitem{servname}
\sphinxAtStartPar
The name assigned to this service. The VIRSV service request manager uses this name to identify the request queue which will process this service request. Choose a unique service name for each service program. If more than one scenario calls the same service program, the same service name can be used by each scenario, and in this case the scenarios will all share the same request queue. Alternatively, each scenario can specify a different service name, in which case there will be an independent request queue for each scenario. The service name must consist of at least 6 alphanumeric characters and must be in quotes.

\sphinxlineitem{progname}
\sphinxAtStartPar
The name of the service program to be called. The program name must be in quotes.

\sphinxlineitem{option}
\sphinxAtStartPar
One or more of the following options may be specified:

\sphinxlineitem{CLOSE}
\sphinxAtStartPar
for a transaction call, specifies that the transaction is to be closed after processing this VIRSV\$ instruction.

\sphinxlineitem{traceopt}
\sphinxAtStartPar
Specifies activation or deactivation of the VIRSV trace facility. One or more of the following options may be specified:
\begin{description}
\sphinxlineitem{APPLICATION\sphinxhyphen{}TRACE or NO\sphinxhyphen{}APPLICATION\sphinxhyphen{}TRACE}
\sphinxAtStartPar
activates or deactivates tracing by the service program (if the service program supports this type of trace).

\sphinxlineitem{CALLS\sphinxhyphen{}TRACE or NO\sphinxhyphen{}CALLS\sphinxhyphen{}TRACE}
\sphinxAtStartPar
activates or deactivates tracing of the requests and responses passed between VIRTEL and VIRSV.

\sphinxlineitem{DISPATCH\sphinxhyphen{}TRACE or NO\sphinxhyphen{}DISPATCH\sphinxhyphen{}TRACE}
\sphinxAtStartPar
activates or deactivates tracing of the VIRSV request queue and task dispatcher.

\sphinxlineitem{MEMORY\sphinxhyphen{}TRACE or NO\sphinxhyphen{}MEMORY\sphinxhyphen{}TRACE}
\sphinxAtStartPar
activates or deactivates tracing of the memory blocks used by VIRSV and the service program.

\end{description}

\sphinxAtStartPar
The default value of each trace option is determined by VIRSV. The trace is written to the VSVTRACE file of the VIRTEL started task.

\sphinxlineitem{errlabel}
\sphinxAtStartPar
A branch will be made to this label if the service cannot be called, or if VIRSV or the service program returned a nonzero return code.

\sphinxlineitem{count}
\sphinxAtStartPar
The maximum number of concurrent instances of the service program which can be started for this service name. If there are already count instances of the requested service program active and in\sphinxhyphen{}use under this service name, the scenario will wait until an instance becomes available. The default value is 1. This parameter applies only if the call type is CALL\sphinxhyphen{}REUSE.

\end{description}

\sphinxAtStartPar
The remaining fields indicate parameters passed to the service program. Any number of parameters may be specified
in any order. For each parameter, VIRTEL places either one or two fullwords into the request input area. Depending on
the parameter type, these fullwords may contain a binary value, an address, or a pair of addresses, as described below.
The address of the request input area is passed to the service program in the LIST\sphinxhyphen{}ADR\sphinxhyphen{}REQU field of the LIST\sphinxhyphen{}POINTER
structure built by the CALL VSVPSYNC routine.
\begin{description}
\sphinxlineitem{(NUMBER,’n’)}
\sphinxAtStartPar
Indicates a parameter passed to the service program. n is a decimal number whose value is converted to a 32\sphinxhyphen{}bit binary integer and stored in the request input area. The number n must be placed in quotes.

\sphinxlineitem{(POINTER\sphinxhyphen{}TO\sphinxhyphen{}NUMBER,’n’)}
\sphinxAtStartPar
Indicates a parameter passed to the service program. n is a decimal number whose value is converted to a 32\sphinxhyphen{}bit binary integer. A fullword containing the address of this 32\sphinxhyphen{}bit value is stored in the request input area. The number n must be placed in quotes.

\sphinxlineitem{(STRINGZ,’cc..cc’)}
\sphinxAtStartPar
Indicates a parameter passed to the service program. A terminating character (X’00’) is appended to the character string cc..cc, and a fullword containing the address of the string is stored in the request input area. The string must be placed in quotes.

\sphinxlineitem{(STRINGZ\sphinxhyphen{}FROM\sphinxhyphen{}VARIABLE,’varname’)}
\sphinxAtStartPar
Indicates a parameter passed to the service program. The value of the VIRTEL variable varname is copied to a character string and a terminating character (X’00’) is appended. A fullword containing the address of this nullterminated string is stored in the request input area. The variable name must be placed in quotes.

\sphinxlineitem{(IN\sphinxhyphen{}VARIABLE,’varname’,len)}
\sphinxAtStartPar
Indicates a parameter passed to the service program. Two fullwords are stored in the request input area: the first contains the address of the value of the VIRTEL variable varname and the second contains the address of a fullword containing the length of this value. The len parameter is ignored unless it contains the special value *n (see below). The variable name must be placed in quotes. For a scenario which processes an inbound request on an MQ line, the special variable name ‘\$INFILE\$’ denotes the contents of the input request.

\sphinxlineitem{(OUT\sphinxhyphen{}VARIABLE,’varname’,len)}
\sphinxAtStartPar
Indicates an output parameter returned by the service program. VIRTEL allocates a buffer of length len and stores two fullwords in the request input area: the first contains the address of the buffer and the second contains the address of a fullword which contains the buffer length. The service program places the output value in the buffer and updates the length fullword. VIRTEL copies the contents of the buffer into the VIRTEL variable varname after the service program returns. The len parameter contains the desired buffer length (nn, nnK, or nnM), or the special value *n (see below). The variable name must be placed in quotes.

\end{description}

\index{VIRSV\$ \sphinxhyphen{} Allocating buffers@\spxentry{VIRSV\$ \sphinxhyphen{} Allocating buffers}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!VIRSV\$ \sphinxhyphen{} Allocating buffers@\spxentry{VIRSV\$ \sphinxhyphen{} Allocating buffers}}\index{VIRSV\$ \sphinxhyphen{} Allocating buffers@\spxentry{VIRSV\$ \sphinxhyphen{} Allocating buffers}!VIRSV\$@\spxentry{VIRSV\$}}\index{VIRSV\$@\spxentry{VIRSV\$}!VIRSV\$ \sphinxhyphen{} Allocating buffers@\spxentry{VIRSV\$ \sphinxhyphen{} Allocating buffers}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{VIRSV\$ \sphinxhyphen{} Allocating variable length output buffers}

\sphinxAtStartPar
A special form of the len parameter may be used to allocate output buffers whose length varies depending on the
length of an input variable. This is done by specifying the len parameter in the form *n where n is a decimal number.
When the len parameter of an input variable is specified as *n this means that the actual length of the variable is
divided by n to obtain the unit of measurement. Subsequent output variables may then specify length *m where m is a
number. This means that the buffer length for that output variable will be m times the unit of measurement.

\sphinxAtStartPar
For example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
VIRSV\PYGZdl{} CALL\PYGZhy{}REUSE,(\PYGZsq{}SERVTAR\PYGZsq{},\PYGZsq{}VENTAR\PYGZsq{}),               *
        (NUMBER,\PYGZsq{}2\PYGZsq{}),                                 *
        (IN\PYGZhy{}VARIABLE,\PYGZsq{}\PYGZdl{}INFILE\PYGZdl{}\PYGZsq{},*3),                  *
        (OUT\PYGZhy{}VARIABLE,\PYGZsq{}HEADER\PYGZsq{},*1),                   *
        (OUT\PYGZhy{}VARIABLE,\PYGZsq{}BODY\PYGZsq{},*3),                     *
        (OUT\PYGZhy{}VARIABLE,\PYGZsq{}SIGNATURE\PYGZsq{},4),                 *
        ERROR=REJECTQ,TASKS=5
\end{sphinxVerbatim}

\sphinxAtStartPar
In this example, assume that the variable \$INFILE\$ has length 4500 bytes. Because its len parameter is specified as *3,
VIRTEL calculates the unit of measurement as 1500. The output variable HEADER has len set to *1 which means that
the buffer length allocated is one unit, or 1500 bytes. The output variable BODY has len *3 which means that its buffer
length is 3 units, or 4500 bytes. By contrast, the output variable SIGNATURE has a fixed buffer length of 4 bytes.
If more than one input variable specifies a len parameter in the format *n then the largest value is taken as the unit of
measurement.

\index{SCENARION SUBROUTINE@\spxentry{SCENARION SUBROUTINE}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!SCENARION SUBROUTINE@\spxentry{SCENARION SUBROUTINE}}\ignorespaces 

\subsubsection{Subroutine scenario}
\label{\detokenize{User_Guide:subroutine-scenario}}\label{\detokenize{User_Guide:index-310}}
\sphinxAtStartPar
Subroutine scenario represent a certain part of code that can be invoked from within a scenario. Subroutine scenario starts with a SCENARIO SUBROUTINE instruction and ends with a SCENARIO END instruction.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{mysub} \PYG{n}{SCENARIO} \PYG{n}{SUBROUTINE}
\PYG{o}{.}\PYG{o}{.}\PYG{o}{.} \PYG{o}{/} \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
\PYG{n}{SCENARIO} \PYG{n}{END}
\end{sphinxVerbatim}

\sphinxAtStartPar
The following restrictions apply to a SCENARIO SUBROUTINE :\sphinxhyphen{}
\begin{itemize}
\item {} 
\sphinxAtStartPar
It must not contain any other scenario.

\item {} 
\sphinxAtStartPar
It must not be included in a scenario.

\item {} 
\sphinxAtStartPar
All its labels must use the LABEL\$ instruction

\item {} 
\sphinxAtStartPar
It must end with a SCENARIO END instruction which acts as a RETURN\$ instruction.

\item {} 
\sphinxAtStartPar
It must not try to branch outside of its limits.

\end{itemize}

\sphinxAtStartPar
The subroutine scenario can be invoked from a main scenario using :

\begin{sphinxVerbatim}[commandchars=\\\{\}]
PERFORM\PYGZdl{} mysub
\end{sphinxVerbatim}

\sphinxAtStartPar
This will call the subroutine and the calling scenario will continue in sequence when the subroutine SCENARIO END
instruction will be reached.

\sphinxAtStartPar
A subroutine may contains a PERFORM\$ instruction to call another subroutine up to 3 levels. For example, main
scenario may call level\_1 subroutine scenario, which may call level\_2 subroutine scenario, which may call level\_3
subroutine scenario, but level\_3 cannot call level\_4 subroutine scenario.

\index{Multi\sphinxhyphen{}Session@\spxentry{Multi\sphinxhyphen{}Session}!Scenarios@\spxentry{Scenarios}}\index{Scenarios@\spxentry{Scenarios}!Multi\sphinxhyphen{}Session@\spxentry{Multi\sphinxhyphen{}Session}}\ignorespaces 

\subsubsection{Multi\sphinxhyphen{}Session scenarios}
\label{\detokenize{User_Guide:multi-session-scenarios}}\label{\detokenize{User_Guide:index-311}}
\sphinxAtStartPar
A scenario may also be specified in the “Output Scenario” field of a transaction invoked by VIRTEL Multi\sphinxhyphen{}Session. By
executing an OUTPUT scenario on a 3270 terminal, VIRTEL allows automated 3270 navigation (for example, logon to
VTAM application) from the Multi\sphinxhyphen{}Session screen.

\sphinxAtStartPar
When the same VTAM application is re\sphinxhyphen{}invoked from a VIRTEL Multi\sphinxhyphen{}Session screen using a different transaction from
the one which was previously active, VIRTEL will call the OUTPUT scenario of the new transaction so that the scenario
can terminate the previous transaction and start the new one. In this case the IF\$ SESSION\sphinxhyphen{}SWITCH instruction is
useful (refer to {\hyperref[\detokenize{User_Guide:v462ug-if}]{\sphinxcrossref{\DUrole{std,std-ref}{“IF\$ instructions”}}}} for further details).

\index{Web Modernisation Scenario Example@\spxentry{Web Modernisation Scenario Example}!Scenarios@\spxentry{Scenarios}}\index{Scenarios@\spxentry{Scenarios}!Web Modernisation Scenario Example@\spxentry{Web Modernisation Scenario Example}}\ignorespaces 

\subsection{Examples of VIRTEL Web Modernisation Scenarios}
\label{\detokenize{User_Guide:examples-of-virtel-web-modernisation-scenarios}}\label{\detokenize{User_Guide:index-312}}
\index{Create a list of values for selected field@\spxentry{Create a list of values for selected field}!Scenarios@\spxentry{Scenarios}}\index{Scenarios@\spxentry{Scenarios}!Create a list of values for selected field@\spxentry{Create a list of values for selected field}}\ignorespaces 

\subsubsection{Creation of a list of values for a selected field}
\label{\detokenize{User_Guide:creation-of-a-list-of-values-for-a-selected-field}}\label{\detokenize{User_Guide:index-313}}
\sphinxAtStartPar
Many 3270 applications consist of fields which can take only one of a restricted set of values. In this case, it is possible
to offer the end user a list of allowable values by requesting VIRTEL to generate the field in the form of a SELECT rather
than in the form of a normal field. This type of modification is performed by the FIELD\$ instruction.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} *
* Example of SELECT, CHECKBOX, and HIDDEN fields *
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} *
*
VIRMM01     SCREENS APPL=SYNAPSE,EXEC=NO
*
SCENARIO    OUTPUT
*
TMG         IF\PYGZdl{} (01,12,12),EQ=\PYGZsq{}General Menu\PYGZsq{},THEN=MENUG,ELSE=ERRSCRN
*
MENUG       FIELD\PYGZdl{} (03,20,1),DEFINE\PYGZhy{}CHOICE,VAL=9
            FIELD\PYGZdl{} (03,20,1),DEFINE\PYGZhy{}CHOICE,VAL=8
            FIELD\PYGZdl{} (03,20,1),DEFINE\PYGZhy{}CHOICE,VAL=4
            FIELD\PYGZdl{} (03,20,1),DEFINE\PYGZhy{}CHOICE,VAL=3
            FIELD\PYGZdl{} (03,20,1),DEFINE\PYGZhy{}CHOICE,VAL=2
            FIELD\PYGZdl{} (03,20,1),DEFINE\PYGZhy{}CHOICE,VAL=1
*
            FIELD\PYGZdl{} (05,20,1),IS\PYGZhy{}BINARY\PYGZhy{}CHOICE,VAL=\PYGZsq{}X\PYGZsq{}
*
            FIELD\PYGZdl{} (07,20,8),HIDE
*
            SCENARIO END
*
ERRSCRN     ERROR\PYGZdl{} 0099
            SCRNEND
END
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{HTTP presentation module: List of values for input field}

\index{Make clickable fields@\spxentry{Make clickable fields}!Scenarios@\spxentry{Scenarios}}\index{Scenarios@\spxentry{Scenarios}!Make clickable fields@\spxentry{Make clickable fields}}\ignorespaces 

\subsubsection{Making clickable fields}
\label{\detokenize{User_Guide:making-clickable-fields}}\label{\detokenize{User_Guide:index-314}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
TESTCT1 SCREENS APPL=Demopfks,EXEC=NO
*
        SCENARIO OUTPUT
*
        IF\PYGZdl{} (02,27,27),EQ=\PYGZsq{}C O N T A C T C L I E N T\PYGZsq{},THEN=CONTACT
        IF\PYGZdl{} (02,27,09),EQ=\PYGZsq{}STATEMENT\PYGZsq{},THEN=STATMNT,ELSE=ERRSCRN
*
CONTACT DECLARE\PYGZdl{} (23,03,02,\PYGZsq{}06\PYGZsq{}),AS\PYGZhy{}PFKEY,\PYGZsq{}PF6\PYGZsq{}
        DECLARE\PYGZdl{} (23,08,02,\PYGZsq{}EF\PYGZsq{}),AS\PYGZhy{}PFKEY,\PYGZsq{}CLEAR\PYGZsq{}
        DECLARE\PYGZdl{} (23,18,02,\PYGZsq{}02\PYGZsq{}),AS\PYGZhy{}PFKEY,\PYGZsq{}PF2\PYGZsq{}
        DECLARE\PYGZdl{} (23,28,02,\PYGZsq{}09\PYGZsq{}),AS\PYGZhy{}PFKEY,\PYGZsq{}PF9\PYGZsq{}
        DECLARE\PYGZdl{} (23,38,02,\PYGZsq{}13\PYGZsq{}),AS\PYGZhy{}PFKEY,\PYGZsq{}PF13\PYGZsq{}
        DECLARE\PYGZdl{} (23,48,02,\PYGZsq{}14\PYGZsq{}),AS\PYGZhy{}PFKEY,\PYGZsq{}PF14\PYGZsq{}
        DECLARE\PYGZdl{} (23,58,02,\PYGZsq{}15\PYGZsq{}),AS\PYGZhy{}PFKEY,\PYGZsq{}PF15\PYGZsq{}
        DECLARE\PYGZdl{} (23,68,02,\PYGZsq{}16\PYGZsq{}),AS\PYGZhy{}PFKEY,\PYGZsq{}PF16\PYGZsq{}
        SCENARIO END
*
STATMNT DECLARE\PYGZdl{} (23,03,02,\PYGZsq{}06\PYGZsq{}),AS\PYGZhy{}PFKEY,\PYGZsq{}PF6\PYGZsq{}
        DECLARE\PYGZdl{} (23,08,02),AS\PYGZhy{}PFKEY,\PYGZsq{}CLEAR\PYGZsq{}
        DECLARE\PYGZdl{} (23,18,02),AS\PYGZhy{}PFKEY,\PYGZsq{}PF7\PYGZsq{}
        DECLARE\PYGZdl{} (23,28,02),AS\PYGZhy{}PFKEY,\PYGZsq{}PF9\PYGZsq{}
        DECLARE\PYGZdl{} (23,38,02),AS\PYGZhy{}PFKEY,\PYGZsq{}PF13\PYGZsq{}
        DECLARE\PYGZdl{} (23,48,02),AS\PYGZhy{}PFKEY,\PYGZsq{}PF14\PYGZsq{}
        DECLARE\PYGZdl{} (23,58,02),AS\PYGZhy{}PFKEY,\PYGZsq{}PF15\PYGZsq{}
        DECLARE\PYGZdl{} (23,68,02),AS\PYGZhy{}PFKEY,\PYGZsq{}PF17\PYGZsq{}
*
* One click, sends PF9 with the cursor position.
        DECLARE\PYGZdl{} (09,23,08,\PYGZsq{}Echéance\PYGZsq{}),                           C
                AS\PYGZhy{}PARAMETER,\PYGZsq{}P9\PYGZsq{},\PYGZsq{}ZOOM\PYGZsq{},TO=VClick
* A click in position 11,23 sends PF9 with the cursor position.
        DECLARE\PYGZdl{} (11,23,08),AS\PYGZhy{}PARAMETER,\PYGZsq{}PF9\PYGZsq{},\PYGZsq{}ZOOM\PYGZsq{},TO=VClick
*
* A click on the client name invokes an internet google search.
        DECLARE\PYGZdl{} (04,09,17),AS\PYGZhy{}HREF,\PYGZsq{}\PYGZam{}\PYGZam{}hl=en\PYGZam{}\PYGZam{}csr=\PYGZsq{},              C
                TO=\PYGZsq{}http://www.google.com/search?q=\PYGZsq{}
*
        SCENARIO END
*
        ERRSCRN ERROR\PYGZdl{} 0099
        SCRNEND
END
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{HTTP presentation module: Clickable fields using DECLARE\$}

\index{Add calendars to date fields@\spxentry{Add calendars to date fields}!Scenarios@\spxentry{Scenarios}}\index{Scenarios@\spxentry{Scenarios}!Add calendars to date fields@\spxentry{Add calendars to date fields}}\ignorespaces 

\subsubsection{Adding calendars to date fields}
\label{\detokenize{User_Guide:adding-calendars-to-date-fields}}\label{\detokenize{User_Guide:index-315}}
\sphinxAtStartPar
By using a combination of an output scenario and a JavaScript application, date fields on the 3270 screen can be
transformed into HTML fields on which a small calendar window appears when the user clicks on the field. The user
chooses the desired date from the calendar, and VIRTEL inserts the date in the correct format into the 3270 input field.

\sphinxAtStartPar
An example scenario for declaring date fields is shown below. As usual, the name of this scenario must be specified in
the “Output Scenario” field of the VIRTEL transaction which calls the host application.

\sphinxAtStartPar
In this example, the correct screen is first identified by using its screen identifier “DEM275” in row 1 column 2, then
three calendar fields are declared at row 8 column 28, row 8 column 64, and row 9 column 28. For the purposes of
illustration, a different date format is declared for each field:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SCENCALR    SCREENS EXEC=NO
            SCENARIO OUTPUT
*
* Identify the correct screen
*
            IF\PYGZdl{} (01,02,06),EQ=\PYGZsq{}DEM275\PYGZsq{},THEN=MENU275
            SCENARIO END
*
* Declare the calendar fields
*
MENU275 EQU *
        CALENDR\PYGZdl{} SCREEN=(8,28),DATEFMT=\PYGZsq{}\PYGZpc{}Y\PYGZpc{}m\PYGZpc{}d\PYGZsq{}
        CALENDR\PYGZdl{} SCREEN=(8,64),DATEFMT=\PYGZsq{}\PYGZpc{}m/\PYGZpc{}d/\PYGZpc{}y\PYGZsq{}
        CALENDR\PYGZdl{} SCREEN=(9,28),DATEFMT=\PYGZsq{}\PYGZpc{}e\PYGZhy{}\PYGZpc{}b\PYGZhy{}\PYGZpc{}Y\PYGZsq{}
SCENARIO END
SCRNEND
END
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{HTTP presentation module: Defining calendar fields}

\sphinxAtStartPar
In the DATEFMT parameter:
\begin{description}
\sphinxlineitem{\%Y}
\sphinxAtStartPar
represents the year (4 digits)

\sphinxlineitem{\%y}
\sphinxAtStartPar
represents the year (2 digits)

\sphinxlineitem{\%d}
\sphinxAtStartPar
represents the day of the month (01\sphinxhyphen{}31)

\sphinxlineitem{\%e}
\sphinxAtStartPar
represents the day of the month (1\sphinxhyphen{}31)

\sphinxlineitem{\%m}
\sphinxAtStartPar
represents the month (01\sphinxhyphen{}12)

\sphinxlineitem{\%b}
\sphinxAtStartPar
represents the abbreviated month name (Jan, Feb, etc)

\end{description}

\sphinxAtStartPar
Refer to the Date.prototype.print function in the calendar.js file for details of all of the allowable date formats.

\sphinxAtStartPar
The CALENDR\$ macro generates two VIRTEL table variables: CALENDAR and DATEFMT. The CALENDAR variable
contains the VIRTEL\sphinxhyphen{}generated names of the 3270 fields which are to be processed as calendar fields. The DATEFMT
variable contains the corresponding date formats for each field.

\sphinxAtStartPar
The page template must include logic to call the calendar application whenever the output screen has declared
calendar fields. The extract below shows the necessary statements which are included in the VIRTEL sample page
WEB2VIRT.htm:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{In} \PYG{n}{the} \PYG{o}{\PYGZlt{}}\PYG{n}{head}\PYG{o}{\PYGZgt{}} \PYG{n}{section}\PYG{p}{:}

\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{WHEN}\PYG{o}{\PYGZhy{}}\PYG{n}{EXISTS} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CALENDAR}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
    \PYG{o}{\PYGZlt{}}\PYG{n}{link} \PYG{n}{rel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{stylesheet}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n+nb}{type}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{text/css}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{media}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{all}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{n}{href}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{dynarch/cal\PYGZhy{}w2k\PYGZhy{}c1.css}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{title}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{win2k\PYGZhy{}cold\PYGZhy{}1}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{/}\PYG{o}{\PYGZgt{}}
    \PYG{o}{\PYGZlt{}}\PYG{n}{script} \PYG{n+nb}{type}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{text/Javascript}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{src}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{dynarch/calendar.js}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{script}\PYG{o}{\PYGZgt{}}
    \PYG{o}{\PYGZlt{}}\PYG{n}{script} \PYG{n+nb}{type}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{text/Javascript}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{src}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{dynarch/cal\PYGZhy{}en.js}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{script}\PYG{o}{\PYGZgt{}}
    \PYG{o}{\PYGZlt{}}\PYG{n}{script} \PYG{n+nb}{type}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{text/Javascript}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{src}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{dynarch/cal\PYGZhy{}setup.js}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{script}\PYG{o}{\PYGZgt{}}
    \PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{SET}\PYG{o}{\PYGZhy{}}\PYG{n}{LOCAL}\PYG{o}{\PYGZhy{}}\PYG{n}{OPTIONS} \PYG{p}{(}\PYG{n}{ID}\PYG{p}{)} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{WHEN}\PYG{o}{\PYGZhy{}}\PYG{n}{EXISTS} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CALENDAR}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}

\PYG{n}{After} \PYG{n}{the} \PYG{o}{\PYGZlt{}}\PYG{n}{form}\PYG{o}{\PYGZgt{}} \PYG{n}{section}\PYG{p}{:}

\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{WHEN}\PYG{o}{\PYGZhy{}}\PYG{n}{EXISTS} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CALENDAR}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
    \PYG{o}{\PYGZlt{}}\PYG{n}{script} \PYG{n}{language}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Javascript}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n+nb}{type}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{text/Javascript}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}
        \PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{FOR}\PYG{o}{\PYGZhy{}}\PYG{n}{EACH}\PYG{o}{\PYGZhy{}}\PYG{n}{VALUE}\PYG{o}{\PYGZhy{}}\PYG{n}{IN} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CALENDAR}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
            \PYG{n}{Calendar}\PYG{o}{.}\PYG{n}{setup}\PYG{p}{(}\PYG{p}{\PYGZob{}}\PYG{n}{inputField}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZob{}\PYGZob{}}\PYG{l+s+s2}{\PYGZob{}}\PYG{l+s+s2}{CURRENT\PYGZhy{}VALUE\PYGZhy{}OF }\PYG{l+s+s2}{\PYGZdq{}}\PYG{n}{CALENDAR}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZcb{}\PYGZcb{}\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
                    \PYG{n}{ifFormat}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZob{}\PYGZob{}}\PYG{l+s+s2}{\PYGZob{}}\PYG{l+s+s2}{CURRENT\PYGZhy{}VALUE\PYGZhy{}OF }\PYG{l+s+s2}{\PYGZdq{}}\PYG{n}{DATEFMT}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZcb{}\PYGZcb{}\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{)}\PYG{p}{;}
        \PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{FOR} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CALENDAR}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
    \PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{script}\PYG{o}{\PYGZgt{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{WHEN}\PYG{o}{\PYGZhy{}}\PYG{n}{EXISTS} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{CALENDAR}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{HTML page template for calendar fields}

\index{VIRTEL\sphinxhyphen{}SUGGEST Function@\spxentry{VIRTEL\sphinxhyphen{}SUGGEST Function}!Scenarios@\spxentry{Scenarios}}\index{Scenarios@\spxentry{Scenarios}!VIRTEL\sphinxhyphen{}SUGGEST Function@\spxentry{VIRTEL\sphinxhyphen{}SUGGEST Function}}\index{VIRTEL\sphinxhyphen{}SUGGEST Function@\spxentry{VIRTEL\sphinxhyphen{}SUGGEST Function}!SUGGEST\$@\spxentry{SUGGEST\$}}\index{SUGGEST\$@\spxentry{SUGGEST\$}!VIRTEL\sphinxhyphen{}SUGGEST Function@\spxentry{VIRTEL\sphinxhyphen{}SUGGEST Function}}\ignorespaces 

\subsubsection{VIRTEL SUGGUEST}
\label{\detokenize{User_Guide:virtel-sugguest}}\label{\detokenize{User_Guide:index-316}}
\sphinxAtStartPar
VIRTEL Suggest is a facility which presents lists of suggested values for specific 3270 fields. The suggested values are
presented in a drop\sphinxhyphen{}down list which appears automatically when the user starts typing into a field. The list modifies
itself dynamically as the user types. At any time the user can select one of the suggested values by clicking or moving
the cursor to the desired value.

\sphinxAtStartPar
Fields eligible for processing by VIRTEL Suggest are identified by means of an output scenario containing SUGGEST\$
macros. Each SUGGEST\$ macro identifies a “suggest” field and indicates the data source for the list of suggested
values. The data source may be a DB2 table, a FLECS application1, or a user\sphinxhyphen{}written CICS transaction.

\sphinxAtStartPar
An example scenario for declaring a “suggest” field is shown below. As usual, the name of this scenario must be
specified in the “Output Scenario” field of the VIRTEL transaction which calls the host application.

\sphinxAtStartPar
In this example, the correct screen is first identified by using its screen identifier “VIR0091” in row 1 column 2, then a
VIRTEL Suggest field is declared at row 8 column 21. The data source for this field is column “LASTNAME” in the DB2
table named “DSN8810.EMP”:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SCENAJAX SCREENS EXEC=NO
*
* DEMONSTRATION SCENARIO FOR VIRTEL\PYGZhy{}SUGGEST FUNCTIONS
*
* The purpose of this scenario is to activate
* a VIRTEL\PYGZhy{}Suggest field in the demo application VIR0091.
*
        SCENARIO OUTPUT
        IF\PYGZdl{} (1,2,7),EQ=\PYGZsq{}VIR0091\PYGZsq{},THEN=DEMOAPPL
        SCENARIO END
*
* The test panel identifier is VIR0091
*
DEMOAPPL EQU *
*
* Activate VIRTEL\PYGZhy{}Suggest in the NAME field
*
        SUGGEST\PYGZdl{} TRAN=\PYGZsq{}suggestD\PYGZsq{}
        SUGGEST\PYGZdl{} TABLE=\PYGZsq{}DSN8810.EMP\PYGZsq{}
        SUGGEST\PYGZdl{} SCREEN=(8,21),FIELD=\PYGZsq{}LASTNAME\PYGZsq{}
*
SCENARIO END
SCRNEND
END
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{HTTP presentation module: Defining VIRTEL Suggest fields}

\index{SUGGEST\$@\spxentry{SUGGEST\$}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!SUGGEST\$@\spxentry{SUGGEST\$}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{SUGGEST\$ instruction}

\sphinxAtStartPar
The parameters of the SUGGEST\$ macro instruction are as follows:
\begin{description}
\sphinxlineitem{TRAN=’name’}
\sphinxAtStartPar
the name of the VIRTEL transaction which provides the link to the data source for the field. The following transactions are supplied as standard in the VIRTEL entry point WEB2HOST:
\begin{quote}
\begin{description}
\sphinxlineitem{suggestD}
\sphinxAtStartPar
Data source is a column in a DB2 table

\sphinxlineitem{suggestF}
\sphinxAtStartPar
Data source is a field in a FLECS application (via CICS)

\sphinxlineitem{suggestV}
\sphinxAtStartPar
Data source is a field in a FLECS application (via VIRTEL)

\end{description}
\end{quote}

\sphinxlineitem{TABLE=’name’}
\sphinxAtStartPar
the name of the DB2 table, or the name of the FLECS application

\sphinxlineitem{FIELD=’name’}
\sphinxAtStartPar
the name of the DB2 column, or the name of the FLECS field

\sphinxlineitem{SCREEN=(row,col)}
\sphinxAtStartPar
the screen position (row, column) of the field on the 3270 screen

\end{description}

\sphinxAtStartPar
A SUGGEST\$ instruction containing only TRAN and/or TABLE parameters may be used to set the values for subsequent
SUGGEST\$ instructions. Each SUGGEST\$ instruction which contains a SCREEN parameter and a FIELD parameter
generates a VIRTEL Suggest field. If the TRAN and TABLE parameters are not specified then the values from the
previous SUGGEST\$ instruction are used.

\index{SUGGEST\$ installation@\spxentry{SUGGEST\$ installation}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!SUGGEST\$ installation@\spxentry{SUGGEST\$ installation}}\index{SUGGEST\$ installation@\spxentry{SUGGEST\$ installation}!SUGGEST\$@\spxentry{SUGGEST\$}}\index{SUGGEST\$@\spxentry{SUGGEST\$}!SUGGEST\$ installation@\spxentry{SUGGEST\$ installation}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{Suggest\$ \sphinxhyphen{} Installation pre\sphinxhyphen{}requisites}

\sphinxAtStartPar
Before you can use the suggestD transaction, you must install the program VDBSUGST in your CICS system with
transaction code VDBS. The JCL to compile, link, and bind this program is in member DB2COBC of VIRTEL.SAMPLIB. You
must also update the definition of the suggestD transaction (W2H\sphinxhyphen{}53 in the WEB2HOST entry point) to specify the
VTAM applid of the appropriate CICS region.

\sphinxAtStartPar
The suggestF transaction requires the FLECS product to be installed in your CICS system. You must also update the
definition of the suggestF transaction (W2H\sphinxhyphen{}51 in the WEB2HOST entry point) to specify the VTAM applid of the CICS
region in which FLECS is installed.

\sphinxAtStartPar
If you plan to use the suggestV transaction, you must add DD statements to the VIRTEL started task JCL specifying the
FLECS catalog file (F20CAT) and the pointer files it references. You must also update the VIRTCT by adding UFILEn
parameters for the FLECS catalog file and each pointer file, together with the corresponding ACB definitions.

\index{SUGGEST\$ Page Template@\spxentry{SUGGEST\$ Page Template}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!SUGGEST\$ Page Template@\spxentry{SUGGEST\$ Page Template}}\index{SUGGEST\$ Page Template@\spxentry{SUGGEST\$ Page Template}!SUGGEST\$@\spxentry{SUGGEST\$}}\index{SUGGEST\$@\spxentry{SUGGEST\$}!SUGGEST\$ Page Template@\spxentry{SUGGEST\$ Page Template}}\ignorespaces 
\sphinxAtStartPar
\sphinxstylestrong{Page template for VIRTEL Suggest}

\sphinxAtStartPar
The page template must include logic to call the data source transaction whenever the output screen has declared
VIRTEL Suggest fields. The extract below shows the necessary statements which are included in the VIRTEL sample
page WEB2VIRT.htm:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{In} \PYG{n}{the} \PYG{o}{\PYGZlt{}}\PYG{n}{head}\PYG{o}{\PYGZgt{}} \PYG{n}{section}\PYG{p}{:}

\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{WHEN}\PYG{o}{\PYGZhy{}}\PYG{n}{EXISTS} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SUGGEST\PYGZhy{}ELEMENT}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
    \PYG{o}{\PYGZlt{}}\PYG{n}{link} \PYG{n}{rel}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{stylesheet}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n+nb}{type}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{text/css}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{href}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{suggest.css}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{/}\PYG{o}{\PYGZgt{}}
    \PYG{o}{\PYGZlt{}}\PYG{n}{script} \PYG{n+nb}{type}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{text/Javascript}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{src}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{suggest.js}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{script}\PYG{o}{\PYGZgt{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{WHEN}\PYG{o}{\PYGZhy{}}\PYG{n}{EXISTS} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SUGGEST\PYGZhy{}ELEMENT}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}

\PYG{n}{After} \PYG{n}{the} \PYG{o}{\PYGZlt{}}\PYG{n}{form}\PYG{o}{\PYGZgt{}} \PYG{n}{section}\PYG{p}{:}

\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{WHEN}\PYG{o}{\PYGZhy{}}\PYG{n}{EXISTS} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SUGGEST\PYGZhy{}ELEMENT}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{FOR}\PYG{o}{\PYGZhy{}}\PYG{n}{EACH}\PYG{o}{\PYGZhy{}}\PYG{n}{VALUE}\PYG{o}{\PYGZhy{}}\PYG{n}{IN} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SUGGEST\PYGZhy{}ELEMENT}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{n}{var} \PYG{n}{o}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{n}{CURRENT}\PYG{o}{\PYGZhy{}}\PYG{n}{VALUE}\PYG{o}{\PYGZhy{}}\PYG{n}{OF} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SUGGEST\PYGZhy{}ELEMENT}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{n}{box} \PYG{o}{=} \PYG{n}{new} \PYG{n}{AutoSuggestControl}\PYG{p}{(}
\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZob{}\PYGZob{}}\PYG{l+s+s2}{\PYGZob{}}\PYG{l+s+s2}{CURRENT\PYGZhy{}VALUE\PYGZhy{}OF }\PYG{l+s+s2}{\PYGZdq{}}\PYG{n}{SUGGEST}\PYG{o}{\PYGZhy{}}\PYG{n}{ELEMENT}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZcb{}\PYGZcb{}\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
\PYG{n}{new} \PYG{n}{VirtelSuggestions}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZob{}\PYGZob{}}\PYG{l+s+s2}{\PYGZob{}}\PYG{l+s+s2}{CURRENT\PYGZhy{}VALUE\PYGZhy{}OF }\PYG{l+s+s2}{\PYGZdq{}}\PYG{n}{SUGGEST}\PYG{o}{\PYGZhy{}}\PYG{n}{TRANSNAME}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZcb{}\PYGZcb{}\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZob{}\PYGZob{}}\PYG{l+s+s2}{\PYGZob{}}\PYG{l+s+s2}{CURRENT\PYGZhy{}VALUE\PYGZhy{}OF }\PYG{l+s+s2}{\PYGZdq{}}\PYG{n}{SUGGEST}\PYG{o}{\PYGZhy{}}\PYG{n}{TABLENAME}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZcb{}\PYGZcb{}\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZob{}\PYGZob{}}\PYG{l+s+s2}{\PYGZob{}}\PYG{l+s+s2}{CURRENT\PYGZhy{}VALUE\PYGZhy{}OF }\PYG{l+s+s2}{\PYGZdq{}}\PYG{n}{SUGGEST}\PYG{o}{\PYGZhy{}}\PYG{n}{FIELDNAME}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZcb{}\PYGZcb{}\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{;}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{FOR} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SUGGEST\PYGZhy{}ELEMENT}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{WHEN}\PYG{o}{\PYGZhy{}}\PYG{n}{EXISTS} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SUGGEST\PYGZhy{}ELEMENT}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{HTML page template for VIRTEL Suggest fields}

\sphinxAtStartPar
The SUGGEST\$ macro instruction generates four VIRTEL table variables: SUGGEST\sphinxhyphen{}ELEMENT, SUGGEST\sphinxhyphen{}TRANSNAME,
SUGGEST\sphinxhyphen{}TABLENAME, SUGGEST\sphinxhyphen{}FIELDNAME. The first entry in each table corresponds to the first VIRTEL Suggest field
on the page, the second entry corresponds to the second VIRTEL Suggest field on the page, and so on.

\index{AUTOREFRESH@\spxentry{AUTOREFRESH}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!AUTOREFRESH@\spxentry{AUTOREFRESH}}\ignorespaces 

\subsection{Scenario AUTOREFRESH}
\label{\detokenize{User_Guide:scenario-autorefresh}}\label{\detokenize{User_Guide:index-320}}
\sphinxAtStartPar
The majority of host applications use the 3270 protocol in a synchronous manner, meaning that each user input
(ENTER or PF key) generates one response consisting of a 3270 screen built by a single VTAM message. Certain host
applications, however, may build a 3270 screen in two or more segments, by sending more than one VTAM message to
the terminal. Other applications may send asynchronous updates to a 3270 screen which are not a direct result of user
input. Such applications need special handling to ensure that VIRTEL can present the updated 3270 screen image to
the user without requiring the user to press ENTER to refresh the screen. VIRTEL handles this situation by means of an
AJAX request containing the VerifyVirtelSession keyword (see {\hyperref[\detokenize{User_Guide:v462ug-session-management}]{\sphinxcrossref{\DUrole{std,std-ref}{“3270 Session Management”}}}}). By using an
output scenario with a suitable page template, the HTML page can determine whether the 3270 screen image has
been updated, and if so can dynamically refresh the data displayed in the browser.

\sphinxAtStartPar
An example scenario is shown below. As usual, the name of this scenario must be specified in the “Output Scenario”
field of the VIRTEL transaction which calls the host application. This scenario is supplied as member SCENREFR in the VIRTEL SAMPLIB.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SCENREFR    SCREENS EXEC=NO
*
* SCENARIO FOR MVS CONSOLE APPLICATION
*
            SCENARIO OUTPUT
            IF\PYGZdl{} (1,11,7),EQ=\PYGZsq{}SNACONS\PYGZsq{},THEN=REFR1
            IF\PYGZdl{} (21,3,7),EQ=\PYGZsq{}IEE612I\PYGZsq{},THEN=REFR2
            SCENARIO END
*
* SET AUTOREFRESH ONCE FOR SIGNON SCREEN
*
REFR1       EQU *
            COPY\PYGZdl{} VALUE\PYGZhy{}TO\PYGZhy{}VARIABLE,VAR=\PYGZsq{}AUTOREFRESH\PYGZsq{},VALUE=\PYGZsq{}ONCE\PYGZsq{}
            SCENARIO END
*
* SET AUTOREFRESH EVERY 2 SECONDS FOR CONSOLE SCREEN
*
REFR2       EQU *
            COPY\PYGZdl{} VALUE\PYGZhy{}TO\PYGZhy{}VARIABLE,VAR=\PYGZsq{}AUTOREFRESH\PYGZsq{},VALUE=\PYGZsq{}2\PYGZsq{}
            SCENARIO END
*
            SCRNEND
            END
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{HTTP presentation module: 3270 auto\sphinxhyphen{}refresh}

\sphinxAtStartPar
This example activates auto\sphinxhyphen{}refresh for two specific application screens. The first screen, identified by the word
“SNACONS” in row 1 column 11, is built by the application in two parts. For this screen, the AUTOREFRESH variable is
set to “ONCE” which causes the page template to return to VIRTEL one time only to request the second part of the
screen. The second screen, identified by “IEE612I” in row 21 column 3, is updated continuously by the application. For
this screen, the AUTOREFRESH variable is set to “2” which causes the browser to issue an AJAX request every two
seconds to ask VIRTEL if the screen has been updated. A positive response from VIRTEL triggers a request to refresh
the screen.

\sphinxAtStartPar
The following table shows the permissible values for the AUTOREFRESH variable:


\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TT}
\sphinxtoprule
\sphinxstyletheadfamily 
\sphinxAtStartPar
Value
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Meaning
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook
\sphinxAtStartPar
nnn
&
\sphinxAtStartPar
refresh once, then every nnn seconds
\\
\sphinxhline
\sphinxAtStartPar
nnn,max
&
\sphinxAtStartPar
refresh once, then after nnn seconds, then double the
interval after each refresh, with a maximum interval of
max seconds.
\\
\sphinxhline
\sphinxAtStartPar
ONCE
&
\sphinxAtStartPar
refresh once only
\\
\sphinxhline
\sphinxAtStartPar
NO or NONE
&
\sphinxAtStartPar
do not refresh
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}

\sphinxAtStartPar
\sphinxstyleemphasis{Settings for 3270 auto\sphinxhyphen{}refresh}

\sphinxAtStartPar
The page template must include logic to process the AUTOREFRESH variable and issue the necessary AJAX functions.
The extract below shows the necessary statements which are included in the VIRTEL sample page WEB2VIRT.htm:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{In} \PYG{n}{the} \PYG{o}{\PYGZlt{}}\PYG{n}{head}\PYG{o}{\PYGZgt{}} \PYG{n}{section}\PYG{p}{:}

\PYG{o}{\PYGZlt{}}\PYG{n}{script} \PYG{n}{src}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{js01.js}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n+nb}{type}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{text/Javascript}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{script}\PYG{o}{\PYGZgt{}}

\PYG{n}{After} \PYG{n}{the} \PYG{o}{\PYGZlt{}}\PYG{n}{form}\PYG{o}{\PYGZgt{}} \PYG{n}{section}\PYG{p}{:}

\PYG{o}{\PYGZlt{}}\PYG{n}{script}\PYG{o}{\PYGZgt{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{WHEN}\PYG{o}{\PYGZhy{}}\PYG{n}{EXISTS} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{AUTOREFRESH}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{n}{AutoRefresh}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZob{}\PYGZob{}}\PYG{l+s+s2}{\PYGZob{}}\PYG{l+s+s2}{CURRENT\PYGZhy{}VALUE\PYGZhy{}OF }\PYG{l+s+s2}{\PYGZdq{}}\PYG{n}{AUTOREFRESH}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZcb{}\PYGZcb{}\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{n}{sesscode}\PYG{p}{)}\PYG{p}{;}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{WHEN}\PYG{o}{\PYGZhy{}}\PYG{n}{EXISTS} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{AUTOREFRESH}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{WHEN}\PYG{o}{\PYGZhy{}}\PYG{n}{NOT}\PYG{o}{\PYGZhy{}}\PYG{n}{EXISTS} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{AUTOREFRESH}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{n}{AutoRefresh}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{1.2,10}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}\PYG{n}{sesscode}\PYG{p}{)}\PYG{p}{;}
\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}}\PYG{p}{\PYGZob{}} \PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{WHEN}\PYG{o}{\PYGZhy{}}\PYG{n}{NOT}\PYG{o}{\PYGZhy{}}\PYG{n}{EXISTS} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{AUTOREFRESH}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}\PYG{p}{\PYGZcb{}}
\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{script}\PYG{o}{\PYGZgt{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{HTML page template for 3270 auto\sphinxhyphen{}refresh}

\sphinxAtStartPar
This page supplies a default value which takes effect if no AUTOREFRESH variable is specified by the scenario. The
default value is set to ‘1.2,10’ which means that a refresh will occur immediately after each screen is loaded, another
refresh will occur 1.2 seconds later, then at intervals of 2.4 seconds, 4.8 seconds, and 9.6 seconds, and finally a refresh
will occur every 10 seconds thereafter.

\sphinxAtStartPar
The autorefresh function may be disabled by specifying SCENAUTN in the “Output scenario” field of the VIRTEL
transaction definition. The source code for the SCENAUTN scenario is supplied in the VIRTEL SAMPLIB.

\phantomsection\label{\detokenize{User_Guide:v462ug-pdf}}
\index{PDF Output Generation@\spxentry{PDF Output Generation}!Scenarios@\spxentry{Scenarios}}\index{Scenarios@\spxentry{Scenarios}!PDF Output Generation@\spxentry{PDF Output Generation}}\index{MakePDF@\spxentry{MakePDF}!Scenarios@\spxentry{Scenarios}}\index{Scenarios@\spxentry{Scenarios}!MakePDF@\spxentry{MakePDF}}\ignorespaces 

\subsection{PDF output generation}
\label{\detokenize{User_Guide:pdf-output-generation}}\label{\detokenize{User_Guide:index-321}}
\sphinxAtStartPar
This example shows a scenario which generates a PDF output file using the MakePDF program product via the service
program VIRSVPDF.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SCENPDF SCREENS EXEC=NO
*
* Scenario for generating PDF output using MakePDF
*
        SCENARIO IDENTIFICATION
*
* Create INPUT file for MakePDF
        COPY\PYGZdl{} OUTPUT\PYGZhy{}FILE\PYGZhy{}TO\PYGZhy{}VARIABLE,TYPE=LINEBUFFER,         \PYGZhy{}
            FILE=\PYGZsq{}INPUT.TXT\PYGZsq{},VAR=\PYGZsq{}INPUT\PYGZsq{}
* Create DOCOPT file for MakePDF
        COPY\PYGZdl{} OUTPUT\PYGZhy{}FILE\PYGZhy{}TO\PYGZhy{}VARIABLE,TYPE=LINEBUFFER,         \PYGZhy{}
            FILE=\PYGZsq{}DOCOPT.TXT\PYGZsq{},VAR=\PYGZsq{}DOCOPT\PYGZsq{}
* Create LAYOUT file for MakePDF
        COPY\PYGZdl{} OUTPUT\PYGZhy{}FILE\PYGZhy{}TO\PYGZhy{}VARIABLE,TYPE=LINEBUFFER,         \PYGZhy{}
            FILE=\PYGZsq{}LAYOUT.TXT\PYGZsq{},VAR=\PYGZsq{}LAYOUT\PYGZsq{}
* Call service program VIRSVPDF which calls MakePDF
        VIRSV\PYGZdl{} CALL\PYGZhy{}REUSE,(\PYGZsq{}SERVPDF\PYGZsq{},\PYGZsq{}VIRSVPDF\PYGZsq{}),              \PYGZhy{}
            (IN\PYGZhy{}VARIABLE,\PYGZsq{}INPUT\PYGZsq{},*3),                          \PYGZhy{}
            (IN\PYGZhy{}VARIABLE,\PYGZsq{}DOCOPT\PYGZsq{},*1),                         \PYGZhy{}
            (IN\PYGZhy{}VARIABLE,\PYGZsq{}LAYOUT\PYGZsq{},*1),                         \PYGZhy{}
            (OUT\PYGZhy{}VARIABLE,\PYGZsq{}OUTPUT\PYGZsq{},500K),                      \PYGZhy{}
            (OUT\PYGZhy{}VARIABLE,\PYGZsq{}MAKEPDFMESSAGE\PYGZsq{},160),               \PYGZhy{}
            (NUMBER,\PYGZsq{}3\PYGZsq{}), MakePDF trace level                  \PYGZhy{}
            TRACE=(APPLICATION\PYGZhy{}TRACE, Virsv trace level        \PYGZhy{}
            NO\PYGZhy{}CALLS\PYGZhy{}TRACE,NO\PYGZhy{}DISPATCH\PYGZhy{}TRACE,NO\PYGZhy{}MEMORY\PYGZhy{}TRACE), \PYGZhy{}
            ERROR=REJECT,TASKS=1
* Send result to browser
       SEND\PYGZdl{} AS\PYGZhy{}FILE,VAR=\PYGZsq{}OUTPUT\PYGZsq{}, \PYGZhy{}
            TYPE=\PYGZsq{}application/pdf\PYGZsq{},NAME=\PYGZsq{}my.pdf\PYGZsq{}
REJECT EQU *
        SCENARIO END
        SCRNEND
END
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{HTTP presentation module: PDF output generation}

\sphinxAtStartPar
For the purpose of this scenario, INPUT.TXT, DOCOPT.TXT and LAYOUT.TXT are files created on a PC, then uploaded to
VIRTEL as page templates (see {\hyperref[\detokenize{User_Guide:v462ug-uploading-html-pages}]{\sphinxcrossref{\DUrole{std,std-ref}{“Uploading HTML Pages”}}}}). The TYPE=LINEBUFFER parameters on the COPY\$
statements tell VIRTEL that these files should be converted to MakePDF “LINEBUF” format. The VIRSV\$ statement calls
an intermediary service program VIRSVPDF which sets up the commarea and calls MakePDF. Then the SEND\$
statement sends back the result file to the browser, giving it the name my.pdf.

\sphinxAtStartPar
The files INPUT.TXT, DOCOPT.TXT, and LAYOUT.TXT for this example are shown below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZlt{}!\PYGZhy{}\PYGZhy{}VIRTEL start=\PYGZdq{}\PYGZob{}\PYGZob{}\PYGZob{}\PYGZdq{} end=\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{} \PYGZhy{}\PYGZhy{}\PYGZgt{}
\PYGZob{}\PYGZob{}\PYGZob{}PDF\PYGZhy{}NEW\PYGZhy{}INPUT \PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZob{}\PYGZob{}\PYGZob{}PDF\PYGZhy{}USE\PYGZhy{}DOCOPT \PYGZdq{}1\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZob{}\PYGZob{}\PYGZob{}PDF\PYGZhy{}USE\PYGZhy{}LAYOUT \PYGZdq{}1\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
1. Incoming calls
213
\PYGZob{}\PYGZob{}\PYGZob{}PDF\PYGZhy{}LINES\PYGZhy{}PER\PYGZhy{}PAGE (5) \PYGZcb{}\PYGZcb{}\PYGZcb{}
PAGE 1 FIRST INPUT
\PYGZob{}\PYGZob{}\PYGZob{}CURRENT\PYGZhy{}VALUE\PYGZhy{}OF \PYGZdq{}I1\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZob{}\PYGZob{}\PYGZob{}PDF\PYGZhy{}NEW\PYGZhy{}INPUT \PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZob{}\PYGZob{}\PYGZob{}PDF\PYGZhy{}USE\PYGZhy{}DOCOPT \PYGZdq{}1\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZob{}\PYGZob{}\PYGZob{}PDF\PYGZhy{}USE\PYGZhy{}LAYOUT \PYGZdq{}2\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
PAGE 2 SECOND INPUT
\PYGZob{}\PYGZob{}\PYGZob{}CURRENT\PYGZhy{}VALUE\PYGZhy{}OF \PYGZdq{}I2\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZob{}\PYGZob{}\PYGZob{}PDF\PYGZhy{}NEW\PYGZhy{}INPUT \PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZob{}\PYGZob{}\PYGZob{}PDF\PYGZhy{}USE\PYGZhy{}DOCOPT \PYGZdq{}1\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZob{}\PYGZob{}\PYGZob{}PDF\PYGZhy{}USE\PYGZhy{}LAYOUT \PYGZdq{}3\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
PAGE 3 THIRD INPUT
\PYGZob{}\PYGZob{}\PYGZob{}CURRENT\PYGZhy{}VALUE\PYGZhy{}OF \PYGZdq{}I3\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{MakePDF INPUT.TXT file for PDF generation}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZlt{}!\PYGZhy{}\PYGZhy{}VIRTEL start=\PYGZdq{}\PYGZob{}\PYGZob{}\PYGZob{}\PYGZdq{} end=\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{} \PYGZhy{}\PYGZhy{}\PYGZgt{}
\PYGZob{}\PYGZob{}\PYGZob{}PDF\PYGZhy{}NEW\PYGZhy{}DOCOPT \PYGZdq{}1\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
OPTIONS COMPRESS=YES
PAGE SIZE=A4 PORTRAIT
DEFINEFONT DEFAULT NATIVE=COURIER\PYGZhy{}BOLD
DEFAULTFONTSIZE 8 9
DefineFont Font1 Native=\PYGZob{}\PYGZob{}\PYGZob{}CURRENT\PYGZhy{}VALUE\PYGZhy{}OF \PYGZdq{}IF1\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
DefineFont Font2 Native=\PYGZob{}\PYGZob{}\PYGZob{}CURRENT\PYGZhy{}VALUE\PYGZhy{}OF \PYGZdq{}IF2\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
DefineFont Font3 Native=\PYGZob{}\PYGZob{}\PYGZob{}CURRENT\PYGZhy{}VALUE\PYGZhy{}OF \PYGZdq{}IF3\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
DOCINFO AUTHOR=\PYGZdq{}SYSPERTEC\PYGZdq{}
DEFINEOVERLAY FORM1 FILE=OVERLAY1
DEFINEOVERLAY FORM2 FILE=OVERLAY2
DEFINEOVERLAY FORM3 FILE=OVERLAY3
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{MakePDF DOCOPT.TXT file for PDF generation}
\begin{quote}

\sphinxAtStartPar
\textless{}!\textendash{}VIRTEL start=”\{\{\{” end=”\}\}\}” \textendash{}\textgreater{}
\{\{\{PDF\sphinxhyphen{}NEW\sphinxhyphen{}LAYOUT “1”\}\}\}
APPLYOVERLAY FORM1
AT (3.0’ 18.0’)
TEXTBEGIN
Font Font1 size(8 9)
PAGECONTENTS LINES(ALL)
TEXTEND
;
\{\{\{PDF\sphinxhyphen{}NEW\sphinxhyphen{}LAYOUT “2”\}\}\}
APPLYOVERLAY FORM2
AT (3.0’ 18.0’)
TEXTBEGIN
Font Font2 size(8 9)
PAGECONTENTS LINES(ALL)
TEXTEND
;
\{\{\{PDF\sphinxhyphen{}NEW\sphinxhyphen{}LAYOUT “3”\}\}\}
APPLYOVERLAY FORM3
AT (3.0’ 18.0’)
TEXTBEGIN
Font Font3 size(8 9)
PAGECONTENTS LINES(ALL)
TEXTEND
;
\end{quote}

\sphinxAtStartPar
\sphinxstyleemphasis{MakePDF LAYOUT.TXT file for PDF generation}

\newpage

\index{Virtel Web integration (VWI)@\spxentry{Virtel Web integration}\spxextra{VWI}}\ignorespaces 

\section{VIRTEL Web Integration}
\label{\detokenize{User_Guide:virtel-web-integration}}\label{\detokenize{User_Guide:v462ug-virtel-integration}}\label{\detokenize{User_Guide:index-322}}
\sphinxAtStartPar
VIRTEL Web Integration allows XML or other web services requests to be interpreted and transformed into requests which can be processed by legacy applications such as CICS/COBOL, with the results being transformed back into XML format for transmission via HTTP or SMTP. By using the scenario language described in section {\hyperref[\detokenize{User_Guide:v462ug-virtel-scenarios}]{\sphinxcrossref{\DUrole{std,std-ref}{“Web Modernisation VIRTEL Scenarios”}}}}, legacy transactions can be converted into Web Services.

\phantomsection\label{\detokenize{User_Guide:v462ug-parsing-query-input}}
\index{Parsing Query Parameters@\spxentry{Parsing Query Parameters}!Virtel Web Intergration@\spxentry{Virtel Web Intergration}}\index{Virtel Web Intergration@\spxentry{Virtel Web Intergration}!Parsing Query Parameters@\spxentry{Parsing Query Parameters}}\ignorespaces 

\subsection{Parsing Query input}
\label{\detokenize{User_Guide:parsing-query-input}}\label{\detokenize{User_Guide:index-323}}
\sphinxAtStartPar
By using a combination of an INITIAL scenario and a VIRTEL transaction script, VIRTEL can transform Query parameters
in an HTTP request into a fixed\sphinxhyphen{}format data area for processing by a COBOL legacy application program.


\subsubsection{HTTP request with Query data (GET method)}
\label{\detokenize{User_Guide:http-request-with-query-data-get-method}}
\sphinxAtStartPar
The HTML page shown below generates an HTTP request with Query parameters:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZlt{}}\PYG{n}{html}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{n}{head}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{n}{title}\PYG{o}{\PYGZgt{}}\PYG{n}{Syspertec} \PYG{o}{\PYGZhy{}} \PYG{n}{Query} \PYG{n}{data} \PYG{k}{for} \PYG{n}{VIRTEL}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{title}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{head}\PYG{o}{\PYGZgt{}}
\PYG{o}{\PYGZlt{}}\PYG{n}{body}\PYG{o}{\PYGZgt{}}
\PYG{o}{\PYGZlt{}}\PYG{n}{FORM} \PYG{n}{METHOD}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{GET}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{action}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{querydemo.htm+tranq}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}
\PYG{o}{\PYGZlt{}}\PYG{n}{p}\PYG{o}{\PYGZgt{}}\PYG{n}{Ident} \PYG{n}{number}\PYG{p}{:} \PYG{o}{\PYGZlt{}}\PYG{n+nb}{input} \PYG{n+nb}{type}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{text}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{name}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{num}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n+nb}{input}\PYG{o}{\PYGZgt{}}
\PYG{o}{\PYGZlt{}}\PYG{n}{p}\PYG{o}{\PYGZgt{}}\PYG{n}{Check} \PYG{n}{digits}\PYG{p}{:} \PYG{o}{\PYGZlt{}}\PYG{n+nb}{input} \PYG{n+nb}{type}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{text}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{name}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{key}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n+nb}{input}\PYG{o}{\PYGZgt{}}
\PYG{o}{\PYGZlt{}}\PYG{n}{p}\PYG{o}{\PYGZgt{}}\PYG{n}{Request} \PYG{n}{date}\PYG{p}{:} \PYG{o}{\PYGZlt{}}\PYG{n+nb}{input} \PYG{n+nb}{type}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{text}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{name}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{date}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n+nb}{input}\PYG{o}{\PYGZgt{}}
\PYG{o}{\PYGZlt{}}\PYG{n}{p}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{n}{button} \PYG{n+nb}{type}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{submit}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{\PYGZgt{}}\PYG{n}{Submit}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{button}\PYG{o}{\PYGZgt{}}
\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{form}\PYG{o}{\PYGZgt{}}
\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{body}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{html}\PYG{o}{\PYGZgt{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{HTML form for generating Query input data (GET method)}

\sphinxAtStartPar
If the user enters, for example, the values “1531499136”, “05”, and “07/01/15” in the three fields and presses the Submit button, an HTTP request is presented to VIRTEL in the format shown below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
GET querydemo.htm+tranq?num=1531499136\PYGZam{}key=05\PYGZam{}date=07\PYGZpc{}2F01\PYGZpc{}2F15 HTTP/1.0
Host: 192.168.235.30:41000
Accept: */*
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example HTTP request with Query data (GET method)}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
The “/” characters in the user’s input have been encoded by the browser as “\%2F” because Query parameters are always transmitted in URL\sphinxhyphen{}encoded format in the HTTP request.
\end{sphinxadmonition}

\index{Sending Query Data with POST@\spxentry{Sending Query Data with POST}!Virtel Web Intergration@\spxentry{Virtel Web Intergration}}\index{Virtel Web Intergration@\spxentry{Virtel Web Intergration}!Sending Query Data with POST@\spxentry{Sending Query Data with POST}}\index{Sending Query Data with POST@\spxentry{Sending Query Data with POST}!Scenario Instructions@\spxentry{Scenario Instructions}}\index{Scenario Instructions@\spxentry{Scenario Instructions}!Sending Query Data with POST@\spxentry{Sending Query Data with POST}}\ignorespaces 

\subsubsection{HTTP request with Query data (POST method)}
\label{\detokenize{User_Guide:http-request-with-query-data-post-method}}\label{\detokenize{User_Guide:index-324}}
\sphinxAtStartPar
By changing the FORM METHOD to POST (instead of GET) in the HTML form, the HTTP request can be presented to VIRTEL in the alternative format shown below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{POST} \PYG{o}{/}\PYG{n}{demohttp}\PYG{o}{/}\PYG{n}{querydemo}\PYG{o}{.}\PYG{n}{htm}\PYG{o}{+}\PYG{n}{tran4} \PYG{n}{HTTP}\PYG{o}{/}\PYG{l+m+mf}{1.0}
\PYG{n}{Host}\PYG{p}{:} \PYG{l+m+mf}{192.168}\PYG{l+m+mf}{.235}\PYG{l+m+mf}{.30}\PYG{p}{:}\PYG{l+m+mi}{41000}
\PYG{n}{Accept}\PYG{p}{:} \PYG{o}{*}\PYG{o}{/}\PYG{o}{*}
\PYG{n}{Content}\PYG{o}{\PYGZhy{}}\PYG{n}{Type}\PYG{p}{:} \PYG{n}{application}\PYG{o}{/}\PYG{n}{x}\PYG{o}{\PYGZhy{}}\PYG{n}{www}\PYG{o}{\PYGZhy{}}\PYG{n}{form}\PYG{o}{\PYGZhy{}}\PYG{n}{urlencoded}
\PYG{n}{Content}\PYG{o}{\PYGZhy{}}\PYG{n}{Length}\PYG{p}{:} \PYG{l+m+mi}{31}
\PYG{n}{num}\PYG{o}{=}\PYG{l+m+mi}{1531499136}\PYG{o}{\PYGZam{}}\PYG{n}{key}\PYG{o}{=}\PYG{l+m+mi}{05}\PYG{o}{\PYGZam{}}\PYG{n}{date}\PYG{o}{=}\PYG{l+m+mi}{07}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{2}\PYG{n}{F01}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{2}\PYG{n}{F15}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example HTTP request with Query data (POST method)}

\sphinxAtStartPar
VIRTEL considers this POST request to be identical to the GET request presented in the previous paragraph.

\index{Extracting Query Data@\spxentry{Extracting Query Data}!Scenarios@\spxentry{Scenarios}}\index{Scenarios@\spxentry{Scenarios}!Extracting Query Data@\spxentry{Extracting Query Data}}\ignorespaces 

\subsubsection{Presentation module for Query input data}
\label{\detokenize{User_Guide:presentation-module-for-query-input-data}}\label{\detokenize{User_Guide:index-325}}
\sphinxAtStartPar
An example INITIAL scenario for converting this Query data to commarea format is coded in the presentation module SCENQRYI shown below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SCENQRYI SCREENS APPL=SCENQRYI
         SCENARIO INITIAL
COMMAREA MAP\PYGZdl{} BEGIN
         MAP\PYGZdl{} AREA,WITH=\PYGZsq{}num\PYGZsq{},LENGTH=10,TYPE=9
         MAP\PYGZdl{} AREA,WITH=\PYGZsq{}key\PYGZsq{},LENGTH=2,TYPE=9
         MAP\PYGZdl{} AREA,WITH=\PYGZsq{}date\PYGZsq{},LENGTH=8,TYPE=X
COMMAREA MAP\PYGZdl{} END
COMMAREA MAP\PYGZdl{} FROM\PYGZhy{}INPUT,QUERY
COMMAREA MAP\PYGZdl{} TO\PYGZhy{}VARIABLE,VAR=\PYGZsq{}MYAREA\PYGZsq{}
         SCENARIO END
         SCRNEND
         END
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{HTTP presentation module for Query input data.}

\sphinxAtStartPar
The same presentation module may be used to process both GET and POST requests.

\index{Commarea Example@\spxentry{Commarea Example}!Scenarios@\spxentry{Scenarios}}\index{Scenarios@\spxentry{Scenarios}!Commarea Example@\spxentry{Commarea Example}}\ignorespaces 

\subsubsection{Contents of generated commarea}
\label{\detokenize{User_Guide:contents-of-generated-commarea}}\label{\detokenize{User_Guide:index-326}}
\sphinxAtStartPar
The figure below shows the 20\sphinxhyphen{}byte commarea generated in the VIRTEL variable MYAREA:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2}
\PYG{l+m+mi}{15314991360507}\PYG{o}{/}\PYG{l+m+mi}{01}\PYG{o}{/}\PYG{l+m+mi}{15}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Commarea generated from Query data}

\index{Query input Data@\spxentry{Query input Data}!Virtel Web Intergration@\spxentry{Virtel Web Intergration}}\index{Virtel Web Intergration@\spxentry{Virtel Web Intergration}!Query input Data@\spxentry{Query input Data}}\index{Query input Data@\spxentry{Query input Data}!Scenarios@\spxentry{Scenarios}}\index{Scenarios@\spxentry{Scenarios}!Query input Data@\spxentry{Query input Data}}\ignorespaces 

\subsubsection{Transaction definition for Query input data}
\label{\detokenize{User_Guide:transaction-definition-for-query-input-data}}\label{\detokenize{User_Guide:index-327}}
\sphinxAtStartPar
The HTTP requests shown in the GET and POST examples above use the URL querydemo.htm+tranq to invoke the
VIRTEL transaction shown below (tranq is the “external name” of the transaction). The “TIOA at logon” field contains a
connection script. After signing on to CICS, the connection script uses the \&/S order to process the INITIAL scenario in
the presentation module SCENQRYI. This scenario converts the Query parameter input data into a VIRTEL variable
named MYAREA. The script then invokes a CICS transaction VQRY, passing the contents of MYAREA as input data. The
CICS transaction performs an EXEC CICS RECEIVE to obtain the input data.

\def\sphinxLiteralBlockLabel{\label{\detokenize{User_Guide:virt462ug-transaction-detail}}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
TRANSACTION DETAIL DEFINITION \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} Applid: VIRTELD2 15:32:33
Internal name    ===\PYGZgt{} CLI\PYGZhy{}17Q             To associate with an entry point name
External name    ===\PYGZgt{} tranq               Name displayed on user menu
Description      ===\PYGZgt{} Demonstration VIRTEL Query
Application      ===\PYGZgt{} CICSPROD            Application to be called
PassTicket       ===\PYGZgt{} 0 Name ===\PYGZgt{}         0=no 1=yes 2=unsigned
Application type ===\PYGZgt{} 1                   1=VTAM 2=VIRTEL 3=SERV 4=PAGE 5=LINE
Pseudo\PYGZhy{}terminals ===\PYGZgt{} CLVTA               Prefix of name of partner terminals
Logmode ===\PYGZgt{}                              Specify when LOGMODE must be changed
How started ===\PYGZgt{} 1                        1=menu 2=sub\PYGZhy{}menu 3=auto
Security ===\PYGZgt{} 0                           0=none 1=basic 2=NTLM 3=TLS 4=HTML
H4W commands ? ===\PYGZgt{} 024                   0=no 1=yes 2=if2VIRTEL 4=auto
Logon message ===\PYGZgt{}

TIOA at logon ===\PYGZgt{} Signon to CICS\PYGZam{}/W\PYGZam{}*F34BE9\PYGZam{}/A\PYGZam{}(\PYGZam{}/S VQRY\PYGZam{}=MYAREA=\PYGZam{}/A\PYGZam{})

TIOA at logoff ===\PYGZgt{}

Initial Scenario ===\PYGZgt{} SCENQRYI            Final Scenario ===\PYGZgt{}
Input Scenario ===\PYGZgt{}                       Output Scenario ===\PYGZgt{}

P1=Update                          P3=Return                        P12=Server
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{VIRTEL transaction definition for Query input data}

\phantomsection\label{\detokenize{User_Guide:v462ug-xml-input-data}}
\index{Processing XML Data@\spxentry{Processing XML Data}!XML@\spxentry{XML}}\index{XML@\spxentry{XML}!Processing XML Data@\spxentry{Processing XML Data}}\index{Processing XML Data@\spxentry{Processing XML Data}!Virtel Web Intergration@\spxentry{Virtel Web Intergration}}\index{Virtel Web Intergration@\spxentry{Virtel Web Intergration}!Processing XML Data@\spxentry{Processing XML Data}}\ignorespaces 

\subsection{Parsing XML input}
\label{\detokenize{User_Guide:parsing-xml-input}}\label{\detokenize{User_Guide:index-328}}
\sphinxAtStartPar
By using a combination of an INITIAL scenario and a VIRTEL transaction script, VIRTEL can transform XML input data in
an HTTP request into a fixed\sphinxhyphen{}format data area for processing by a COBOL legacy application program.


\subsubsection{HTTP request with XML input data}
\label{\detokenize{User_Guide:http-request-with-xml-input-data}}
\sphinxAtStartPar
The simplest method of sending XML data to VIRTEL is to build an HTTP POST request containing the raw XML data in
the request body. This is the format expected by the MAP\$ FROM\sphinxhyphen{}INPUT instruction described 189. The figure below
shows an example of an HTTP request containing XML input data:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
POST /demohttp/xmldemo.xml+tran3 HTTP/1.0
Host: 192.168.235.30
Accept: */*
Content\PYGZhy{}Length: 197

\PYGZlt{}?xml version=\PYGZdq{}1.0\PYGZdq{} ?\PYGZgt{}
\PYGZlt{}methodCall\PYGZgt{}
\PYGZlt{}screenname\PYGZgt{}T000\PYGZhy{}GAL\PYGZlt{}/screenname\PYGZgt{}
\PYGZlt{}screentype\PYGZgt{}3270\PYGZlt{}/screentype\PYGZgt{}
\PYGZlt{}params\PYGZgt{}
    \PYGZlt{}fieldname\PYGZgt{}FIELD001\PYGZlt{}/fieldname\PYGZgt{}
    \PYGZlt{}uinput\PYGZgt{}A\PYGZlt{}/uinput\PYGZgt{}
\PYGZlt{}/params\PYGZgt{}
\PYGZlt{}/methodCall\PYGZgt{}\PYGZlt{}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example HTTP request with XML input data}

\index{Processing XML Data@\spxentry{Processing XML Data}!Scenarios@\spxentry{Scenarios}}\index{Scenarios@\spxentry{Scenarios}!Processing XML Data@\spxentry{Processing XML Data}}\index{Processing XML Data@\spxentry{Processing XML Data}!Virtel Web Intergration@\spxentry{Virtel Web Intergration}}\index{Virtel Web Intergration@\spxentry{Virtel Web Intergration}!Processing XML Data@\spxentry{Processing XML Data}}\ignorespaces 

\subsubsection{Presentation module for XML input data}
\label{\detokenize{User_Guide:presentation-module-for-xml-input-data}}\label{\detokenize{User_Guide:index-329}}
\sphinxAtStartPar
An example INITIAL scenario for processing this XML input data is coded in the presentation module SCENXMLI shown below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SCENXMLI    SCREENS APPL=SCENXMLI
*
            SCENARIO INITIAL
OUTAREA     MAP\PYGZdl{} BEGIN
            MAP\PYGZdl{} AREA,WITH=\PYGZsq{}screenname\PYGZsq{},LENGTH=8,TYPE=X
PARAMS      MAP\PYGZdl{} BEGIN,WITH=\PYGZsq{}params\PYGZsq{}
            MAP\PYGZdl{} AREA,WITH=\PYGZsq{}fieldname\PYGZsq{},LENGTH=8,TYPE=X
            MAP\PYGZdl{} AREA,WITH=\PYGZsq{}uinput\PYGZsq{},LENGTH=20,TYPE=X
PARAMS      MAP\PYGZdl{} END
OUTAREA     MAP\PYGZdl{} END
*
OUTAREA     MAP\PYGZdl{} FROM\PYGZhy{}INPUT
OUTAREA     MAP\PYGZdl{} TO\PYGZhy{}VARIABLE,VAR=\PYGZsq{}MYAREA\PYGZsq{}
            SCENARIO END
*
            SCRNEND
END ,
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{HTTP presentation module for XML input data}


\subsubsection{Contents of generated commarea}
\label{\detokenize{User_Guide:id7}}
\sphinxAtStartPar
The figure below shows the 36\sphinxhyphen{}byte commarea generated in the VIRTEL variable MYAREA:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{3}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}
\PYG{n}{T000}\PYG{o}{\PYGZhy{}}\PYG{n}{GALFIELD001A}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Commarea generated from XML input data}

\phantomsection\label{\detokenize{User_Guide:v462ug-sending-xml}}
\index{Encoding XML Data@\spxentry{Encoding XML Data}!XML@\spxentry{XML}}\index{XML@\spxentry{XML}!Encoding XML Data@\spxentry{Encoding XML Data}}\index{Encoding XML Data@\spxentry{Encoding XML Data}!Virtel Web Intergration@\spxentry{Virtel Web Intergration}}\index{Virtel Web Intergration@\spxentry{Virtel Web Intergration}!Encoding XML Data@\spxentry{Encoding XML Data}}\ignorespaces 

\subsubsection{Sending XML input as URL\sphinxhyphen{}encoded data}
\label{\detokenize{User_Guide:sending-xml-input-as-url-encoded-data}}\label{\detokenize{User_Guide:index-330}}
\sphinxAtStartPar
For some applications it may be more convenient to send the XML data as part of the URL. To conform with URL syntax
rules, the XML data is embedded in an HTML text field, and blanks and other special characters in the XML data are
replaced by their corresponding URL\sphinxhyphen{}encoded values (“+” signs and “\%xx” sequences). This format can be generated
by means of an HTML form, as shown in the example below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZlt{}HTML\PYGZgt{}\PYGZlt{}HEAD\PYGZgt{}\PYGZlt{}TITLE\PYGZgt{}Syspertec \PYGZhy{} XML Application with VIRTEL\PYGZlt{}/TITLE\PYGZgt{}\PYGZlt{}/HEAD\PYGZgt{}
\PYGZlt{}BODY\PYGZgt{}\PYGZlt{}CENTER\PYGZgt{}
\PYGZlt{}FORM method=GET name=\PYGZdq{}VirtelForm\PYGZdq{} action=\PYGZdq{}/demohttp/xmldemo.xml+tran3\PYGZdq{}\PYGZgt{}
\PYGZlt{}TEXTAREA cols=\PYGZdq{}45\PYGZdq{} rows=\PYGZdq{}20\PYGZdq{} name=\PYGZdq{}MYINPUT\PYGZdq{}\PYGZgt{}
\PYGZlt{}?xml version=\PYGZdq{}1.0\PYGZdq{} ?\PYGZgt{}
\PYGZlt{}methodCall\PYGZgt{}
\PYGZlt{}screenname\PYGZgt{}T000\PYGZhy{}GAL\PYGZlt{}/screenname\PYGZgt{}
\PYGZlt{}screentype\PYGZgt{}3270\PYGZlt{}/screentype\PYGZgt{}
\PYGZlt{}params\PYGZgt{}
    \PYGZlt{}fieldname\PYGZgt{}FIELD001\PYGZlt{}/fieldname\PYGZgt{}
    \PYGZlt{}uinput\PYGZgt{}A\PYGZlt{}/uinput\PYGZgt{}
\PYGZlt{}/params\PYGZgt{}
\PYGZlt{}/methodCall\PYGZgt{}
\PYGZlt{}/TEXTAREA\PYGZgt{}
\PYGZlt{}p\PYGZgt{}\PYGZlt{}BUTTON type=\PYGZdq{}submit\PYGZdq{}\PYGZgt{}Submit\PYGZlt{}/BUTTON\PYGZgt{}
\PYGZlt{}/FORM\PYGZgt{}\PYGZlt{}/CENTER\PYGZgt{}
\PYGZlt{}/BODY\PYGZgt{}
\PYGZlt{}/HTML\PYGZgt{}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{HTML form with XML input data embedded in a text field}

\sphinxAtStartPar
The HTTP request generated by the above HTML form is presented to VIRTEL in the format shown below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
GET /demohttp/xmldemo.xml+tran3?MYINPUT=\PYGZpc{}3C\PYGZpc{}3Fxml+version\PYGZpc{}3D\PYGZpc{}221.0\PYGZpc{}22\PYGZpc{}3F\PYGZpc{}
3E\PYGZpc{}0D\PYGZpc{}0A\PYGZpc{}3CmethodCall\PYGZpc{}3E\PYGZpc{}0D\PYGZpc{}0A\PYGZpc{}3Cscreenname\PYGZpc{}3ET000\PYGZhy{}GAL\PYGZpc{}3C\PYGZpc{}2Fscreenname\PYGZpc{}3E
\PYGZpc{}0D\PYGZpc{}0A\PYGZpc{}3Cscreentype\PYGZpc{}3E3270\PYGZpc{}3C\PYGZpc{}2Fscreentype\PYGZpc{}3E\PYGZpc{}0D\PYGZpc{}0A\PYGZpc{}3Cparams\PYGZpc{}3E\PYGZpc{}0D\PYGZpc{}0A++\PYGZpc{}3
Cfieldname\PYGZpc{}3EFIELD001\PYGZpc{}3C\PYGZpc{}2Ffieldname\PYGZpc{}3E\PYGZpc{}0D\PYGZpc{}0A++\PYGZpc{}3Cuinput\PYGZpc{}3EA\PYGZpc{}3C\PYGZpc{}2Fuinput\PYGZpc{}
3E\PYGZpc{}0D\PYGZpc{}0A\PYGZpc{}3C\PYGZpc{}2Fparams\PYGZpc{}3E\PYGZpc{}0D\PYGZpc{}0A\PYGZpc{}3C\PYGZpc{}2FmethodCall\PYGZpc{}3E\PYGZpc{}0D\PYGZpc{}0A HTTP/1.0
Host: 192.168.235.30
Accept: */*
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{XML input data in URL\sphinxhyphen{}encoded format (HTTP GET method)}

\sphinxAtStartPar
By changing the FORM METHOD to POST (instead of GET), the HTTP request can be presented to VIRTEL in the alternative format shown below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{POST} \PYG{o}{/}\PYG{n}{demohttp}\PYG{o}{/}\PYG{n}{xmldemo}\PYG{o}{.}\PYG{n}{xml}\PYG{o}{+}\PYG{n}{tran3} \PYG{n}{HTTP}\PYG{o}{/}\PYG{l+m+mf}{1.0}
\PYG{n}{Host}\PYG{p}{:} \PYG{l+m+mf}{192.168}\PYG{l+m+mf}{.235}\PYG{l+m+mf}{.30}
\PYG{n}{Accept}\PYG{p}{:} \PYG{o}{*}\PYG{o}{/}\PYG{o}{*}
\PYG{n}{Content}\PYG{o}{\PYGZhy{}}\PYG{n}{Type}\PYG{p}{:} \PYG{n}{application}\PYG{o}{/}\PYG{n}{x}\PYG{o}{\PYGZhy{}}\PYG{n}{www}\PYG{o}{\PYGZhy{}}\PYG{n}{form}\PYG{o}{\PYGZhy{}}\PYG{n}{urlencoded}
\PYG{n}{Content}\PYG{o}{\PYGZhy{}}\PYG{n}{Length}\PYG{p}{:} \PYG{l+m+mi}{314}
\PYG{n}{MYINPUT}\PYG{o}{=}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{C}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{Fxml}\PYG{o}{+}\PYG{n}{version}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{D}\PYG{o}{\PYGZpc{}}\PYG{l+m+mf}{221.0}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{22}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{F}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{E}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{0}\PYG{n}{D}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{0}\PYG{n}{A}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{CmethodCall}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{E}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{0}\PYG{n}{D}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{0}\PYG{n}{A}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{C}
\PYG{n}{screenname}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{ET000}\PYG{o}{\PYGZhy{}}\PYG{n}{GAL}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{C}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{2}\PYG{n}{Fscreenname}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{E}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{0}\PYG{n}{D}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{0}\PYG{n}{A}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{Cscreentype}\PYG{o}{\PYGZpc{}}\PYG{l+m+mf}{3E3270}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{C}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{2}\PYG{n}{Fsc}
\PYG{n}{reentype}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{E}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{0}\PYG{n}{D}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{0}\PYG{n}{A}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{Cparams}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{E}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{0}\PYG{n}{D}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{0}\PYG{n}{A}\PYG{o}{+}\PYG{o}{+}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{Cfieldname}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{EFIELD001}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{C}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{2}\PYG{n}{Ffieldnam}
\PYG{n}{e}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{E}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{0}\PYG{n}{D}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{0}\PYG{n}{A}\PYG{o}{+}\PYG{o}{+}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{Cuinput}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{EA}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{C}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{2}\PYG{n}{Fuinput}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{E}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{0}\PYG{n}{D}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{0}\PYG{n}{A}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{C}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{2}\PYG{n}{Fparams}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{E}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{0}\PYG{n}{D}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{0}\PYG{n}{A}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{C}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{2}\PYG{n}{Fm}
\PYG{n}{ethodCall}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{3}\PYG{n}{E}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{0}\PYG{n}{D}\PYG{o}{\PYGZpc{}}\PYG{l+m+mi}{0}\PYG{n}{A}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{XML input data in URL\sphinxhyphen{}encoded format (HTTP POST method)}

\sphinxAtStartPar
Both of these request formats can be processed by a presentation module similar to the SCENXMLI module shown
previously. The only change necessary to process URL\sphinxhyphen{}encoded data is that the statement OUTAREA MAP\$ FROMINPUT
must be replaced by the statement OUTAREA MAP\$ FROM\sphinxhyphen{}FIELD,FIELD=’MYINPUT’

\index{XML Data Transactions@\spxentry{XML Data Transactions}!XML@\spxentry{XML}}\index{XML@\spxentry{XML}!XML Data Transactions@\spxentry{XML Data Transactions}}\index{XML Data Transactions@\spxentry{XML Data Transactions}!Virtel Web Intergration@\spxentry{Virtel Web Intergration}}\index{Virtel Web Intergration@\spxentry{Virtel Web Intergration}!XML Data Transactions@\spxentry{XML Data Transactions}}\ignorespaces 

\subsubsection{Transaction definition for XML input data}
\label{\detokenize{User_Guide:transaction-definition-for-xml-input-data}}\label{\detokenize{User_Guide:index-331}}
\sphinxAtStartPar
The HTTP requests shown above use the URL /demohttp/xmldemo.xml+tran3 to invoke the VIRTEL transaction shown
below (tran3 is the “external name” of the transaction). The “TIOA at logon” field contains a connection script. After
signing on to CICS, the connection script uses the \&/S order to process the INITIAL scenario in the presentation module
SCENXMLI. This scenario converts the XML data into a VIRTEL variable named MYAREA. The script then invokes a CICS
transaction VHLP, passing the contents of MYAREA as input data. The CICS transaction performs an EXEC CICS RECEIVE
to obtain the input data.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
TRANSACTION DETAIL DEFINITION \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} Applid: VIRTELD2 15:32:33
Internal name ===\PYGZgt{} CLI\PYGZhy{}16E                To associate with an entry point name
External name ===\PYGZgt{} tran3                  Name displayed on user menu
Description   ===\PYGZgt{} Demonstration VIRTEL XML
Application   ===\PYGZgt{} CICSPROD               Application to be called
PassTicket    ===\PYGZgt{} 0 Name ===\PYGZgt{}            0=no 1=yes 2=unsigned
Application type ===\PYGZgt{} 1                   1=VTAM 2=VIRTEL 3=SERV 4=PAGE 5=LINE
Pseudo\PYGZhy{}terminals ===\PYGZgt{} CLVTA               Prefix of name of partner terminals
Logmode          ===\PYGZgt{}                     Specify when LOGMODE must be changed
How started      ===\PYGZgt{} 1                   1=menu 2=sub\PYGZhy{}menu 3=auto
Security         ===\PYGZgt{} 0                   0=none 1=basic 2=NTLM 3=TLS 4=HTML
H4W commands ?   ===\PYGZgt{} 024                 0=no 1=yes 2=if2VIRTEL 4=auto
Logon message    ===\PYGZgt{}

TIOA at logon    ===\PYGZgt{} Signon to CICS\PYGZam{}/W\PYGZam{}*F34BE9\PYGZam{}/A\PYGZam{}(\PYGZam{}/S VHLP\PYGZam{}=MYAREA=\PYGZam{}/A\PYGZam{})

TIOA at logoff   ===\PYGZgt{}

Initial Scenario ===\PYGZgt{} SCENXMLI            Final Scenario ===\PYGZgt{}
Input Scenario   ===\PYGZgt{}                     Output Scenario ===\PYGZgt{} SCENXMLO

P1=Update                          P3=Return                        P12=Server
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{VIRTEL transaction definition for XML input data}

\index{XML nput attrubutes and repeating Groups@\spxentry{XML nput attrubutes and repeating Groups}!XML@\spxentry{XML}}\index{XML@\spxentry{XML}!XML nput attrubutes and repeating Groups@\spxentry{XML nput attrubutes and repeating Groups}}\index{XML nput attrubutes and repeating Groups@\spxentry{XML nput attrubutes and repeating Groups}!Virtel Web Intergration@\spxentry{Virtel Web Intergration}}\index{Virtel Web Intergration@\spxentry{Virtel Web Intergration}!XML nput attrubutes and repeating Groups@\spxentry{XML nput attrubutes and repeating Groups}}\ignorespaces 

\subsubsection{XML input with attributes and repeating groups}
\label{\detokenize{User_Guide:xml-input-with-attributes-and-repeating-groups}}\label{\detokenize{User_Guide:index-332}}
\sphinxAtStartPar
The figure below shows an example of XML input data containing attributes and repeating groups of fields:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZlt{}?xml version=\PYGZdq{}1.0\PYGZdq{} ?\PYGZgt{}
\PYGZlt{}request\PYGZgt{}
\PYGZlt{}id type=\PYGZdq{}RP\PYGZdq{} date=\PYGZdq{}20.01.2006\PYGZdq{} numreq=\PYGZdq{}2\PYGZdq{}\PYGZgt{}8019A\PYGZlt{}/id\PYGZgt{}
\PYGZlt{}part\PYGZgt{}
    \PYGZlt{}key suffix=\PYGZdq{}01\PYGZdq{}\PYGZgt{}GROMMET\PYGZlt{}/key\PYGZgt{}
    \PYGZlt{}stat\PYGZgt{}3\PYGZlt{}/stat\PYGZgt{}
    \PYGZlt{}type\PYGZgt{}C\PYGZlt{}/type\PYGZgt{}
\PYGZlt{}/part\PYGZgt{}
\PYGZlt{}part\PYGZgt{}
    \PYGZlt{}key suffix=\PYGZdq{}02\PYGZdq{}\PYGZgt{}GREVILE\PYGZlt{}/key\PYGZgt{}
    \PYGZlt{}type\PYGZgt{}D\PYGZlt{}/type\PYGZgt{}
    \PYGZlt{}stat\PYGZgt{}3\PYGZlt{}/stat\PYGZgt{}
\PYGZlt{}/part\PYGZgt{}
\PYGZlt{}/request\PYGZgt{}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example XML input data with attributes and repeating groups}

\index{Example of using XML Data@\spxentry{Example of using XML Data}!XML@\spxentry{XML}}\index{XML@\spxentry{XML}!Example of using XML Data@\spxentry{Example of using XML Data}}\index{Example of using XML Data@\spxentry{Example of using XML Data}!Virte Web Intergration@\spxentry{Virte Web Intergration}}\index{Virte Web Intergration@\spxentry{Virte Web Intergration}!Example of using XML Data@\spxentry{Example of using XML Data}}\ignorespaces 
\sphinxAtStartPar
An INITIAL scenario for processing this XML input data is coded in the presentation module SCENXMLA shown below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SCENXMLA    SCREENS APPL=SCENXMLA
*
            SCENARIO INITIAL
*
COMMAREA    MAP\PYGZdl{} BEGIN
            MAP\PYGZdl{} AREA,WITH=\PYGZsq{}id\PYGZsq{},LENGTH=5
            MAP\PYGZdl{} AREA\PYGZhy{}ATTRIBUTE,VALUEOF=\PYGZsq{}date\PYGZsq{},LENGTH=8,TYPE=ONLY9
            MAP\PYGZdl{} AREA\PYGZhy{}ATTRIBUTE,VALUEOF=\PYGZsq{}type\PYGZsq{},LENGTH=2
            MAP\PYGZdl{} AREA\PYGZhy{}ATTRIBUTE,VALUEOF=\PYGZsq{}numreq\PYGZsq{},LENGTH=2,TYPE=9
DETAIL      MAP\PYGZdl{} BEGIN,WITH=\PYGZsq{}part\PYGZsq{},OCCURS=5
            MAP\PYGZdl{} AREA\PYGZhy{}ATTRIBUTE,WITH=\PYGZsq{}key\PYGZsq{},VALUEOF=\PYGZsq{}suffix\PYGZsq{},             *
                LENGTH=2,TYPE=9
            MAP\PYGZdl{} AREA,LENGTH=8
            MAP\PYGZdl{} AREA,WITH=\PYGZsq{}type\PYGZsq{},LENGTH=1
            MAP\PYGZdl{} AREA,WITH=\PYGZsq{}stat\PYGZsq{},LENGTH=1
DETAIL      MAP\PYGZdl{} END
COMMAREA    MAP\PYGZdl{} END
*
COMMAREA    MAP\PYGZdl{} FROM\PYGZhy{}INPUT
COMMAREA    MAP\PYGZdl{} TO\PYGZhy{}VARIABLE,VAR=\PYGZsq{}MYCOMMAREA\PYGZsq{}
            SCENARIO END
*
            SCRNEND
END
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Presentation module for XML input with attributes and repeating groups}

\sphinxAtStartPar
The figure below shows the 77\sphinxhyphen{}byte commarea generated in the VIRTEL variable MYCOMMAREA:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{3}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{4}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{5}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{6}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{7}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}
\PYG{l+m+mi}{8019}\PYG{n}{A20012006RP0201GROMMET} \PYG{n}{C302GREVILE} \PYG{n}{D300} \PYG{l+m+mi}{00} \PYG{l+m+mi}{00}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Commarea generated from XML input with attributes and repeating groups}

\index{Redefinition of data fields@\spxentry{Redefinition of data fields}!XML@\spxentry{XML}}\index{XML@\spxentry{XML}!Redefinition of data fields@\spxentry{Redefinition of data fields}}\index{Redefinition of data fields@\spxentry{Redefinition of data fields}!Virte Web Intergration@\spxentry{Virte Web Intergration}}\index{Virte Web Intergration@\spxentry{Virte Web Intergration}!Redefinition of data fields@\spxentry{Redefinition of data fields}}\ignorespaces 

\subsubsection{XML input with redefinition of fields}
\label{\detokenize{User_Guide:xml-input-with-redefinition-of-fields}}\label{\detokenize{User_Guide:index-334}}
\sphinxAtStartPar
This example shows how the commarea can be redefined according to the value of a field in the XML input. In this
example, the input can be in one of two formats, depending on the value of the field whose name is “reqtype”:\sphinxhyphen{}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Request type A

\PYGZlt{}?xml version=\PYGZdq{}1.0\PYGZdq{} ?\PYGZgt{}
\PYGZlt{}request\PYGZgt{}
    \PYGZlt{}reqid\PYGZgt{}1234\PYGZlt{}/reqid\PYGZgt{}
    \PYGZlt{}reqtype\PYGZgt{}A\PYGZlt{}/reqtype\PYGZgt{}
    \PYGZlt{}itemcode\PYGZgt{}12345\PYGZlt{}/itemcode\PYGZgt{}
    \PYGZlt{}details\PYGZgt{}
        \PYGZlt{}color\PYGZgt{}blue\PYGZlt{}/color\PYGZgt{}
        \PYGZlt{}quantity\PYGZgt{}5\PYGZlt{}/quantity\PYGZgt{}
    \PYGZlt{}/details\PYGZgt{}
\PYGZlt{}/request\PYGZgt{}

Request type B

\PYGZlt{}?xml version=\PYGZdq{}1.0\PYGZdq{} ?\PYGZgt{}
\PYGZlt{}request\PYGZgt{}
    \PYGZlt{}reqid\PYGZgt{}2345\PYGZlt{}/reqid\PYGZgt{}
    \PYGZlt{}reqtype\PYGZgt{}B\PYGZlt{}/reqtype\PYGZgt{}
    \PYGZlt{}itemcode\PYGZgt{}23457\PYGZlt{}/itemcode\PYGZgt{}
    \PYGZlt{}details\PYGZgt{}
        \PYGZlt{}lang\PYGZgt{}EN\PYGZlt{}/lang\PYGZgt{}
        \PYGZlt{}format\PYGZgt{}quarto\PYGZlt{}/format\PYGZgt{}
    \PYGZlt{}/details\PYGZgt{}
\PYGZlt{}/request\PYGZgt{}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example XML input data with redefinition of fields}

\sphinxAtStartPar
An INITIAL scenario for processing this XML input data is coded in the presentation module SCENXMLR shown below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SCENXMLR    SCREENS APPL=SCENXMLR
*
            SCENARIO INITIAL
*
HEADER      MAP\PYGZdl{} BEGIN
            MAP\PYGZdl{} AREA,WITH=\PYGZsq{}reqid\PYGZsq{},LENGTH=4,TYPE=9
            MAP\PYGZdl{} AREA,WITH=\PYGZsq{}reqtype\PYGZsq{},LENGTH=1,TYPE=X,VAR=\PYGZsq{}TRIGGER\PYGZsq{}
            MAP\PYGZdl{} AREA,WITH=\PYGZsq{}itemcode\PYGZsq{},LENGTH=6,TYPE=9
HEADER      MAP\PYGZdl{} END
*
HEADER      MAP\PYGZdl{} FROM\PYGZhy{}INPUT,FIELD=\PYGZsq{}MYINPUT\PYGZsq{}
HEADER      MAP\PYGZdl{} TO\PYGZhy{}VARIABLE,VAR=\PYGZsq{}MYHEAD\PYGZsq{}
*
            IF\PYGZdl{} VARIABLE,\PYGZsq{}TRIGGER\PYGZsq{},EQ=\PYGZsq{}A\PYGZsq{},THEN=TYPEA
            IF\PYGZdl{} VARIABLE,\PYGZsq{}TRIGGER\PYGZsq{},EQ=\PYGZsq{}B\PYGZsq{},THEN=TYPEB
            SCENARIO END
*
TYPEA       EQU *
DETAILA     MAP\PYGZdl{} BEGIN,WITH=\PYGZsq{}details\PYGZsq{}
            MAP\PYGZdl{} AREA,WITH=\PYGZsq{}color\PYGZsq{},LENGTH=8,TYPE=X
            MAP\PYGZdl{} AREA,WITH=\PYGZsq{}quantity\PYGZsq{},LENGTH=5,TYPE=9
DETAILA     MAP\PYGZdl{} END
*
DETAILA     MAP\PYGZdl{} FROM\PYGZhy{}INPUT,FIELD=\PYGZsq{}MYINPUT\PYGZsq{}
DETAILA     MAP\PYGZdl{} TO\PYGZhy{}VARIABLE,VAR=\PYGZsq{}MYBODY\PYGZsq{}
            SCENARIO END
*
TYPEB       EQU *
DETAILB     MAP\PYGZdl{} BEGIN,WITH=\PYGZsq{}details\PYGZsq{}
            MAP\PYGZdl{} AREA,WITH=\PYGZsq{}lang\PYGZsq{},LENGTH=2,TYPE=X
            MAP\PYGZdl{} AREA,WITH=\PYGZsq{}format\PYGZsq{},LENGTH=8,TYPE=X
DETAILB     MAP\PYGZdl{} END
*
DETAILB     MAP\PYGZdl{} FROM\PYGZhy{}INPUT,FIELD=\PYGZsq{}MYINPUT\PYGZsq{}
DETAILB     MAP\PYGZdl{} TO\PYGZhy{}VARIABLE,VAR=\PYGZsq{}MYBODY\PYGZsq{}
            SCENARIO END
*
            SCRNEND
END
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Presentation module for XML input with redefinition of fields}

\sphinxAtStartPar
This scenario generates two commareas, which are saved in VIRTEL variables MYHEAD and MYBODY, as shown below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{Request} \PYG{n+nb}{type} \PYG{n}{A}
\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{3}
\PYG{n}{MYHEAD}\PYG{p}{:} \PYG{l+m+mi}{1234}\PYG{n}{A012345}
\PYG{n}{MYBODY}\PYG{p}{:} \PYG{n}{blue} \PYG{l+m+mi}{00005}

\PYG{n}{Request} \PYG{n+nb}{type} \PYG{n}{B}
\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{+}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{3}
\PYG{n}{MYHEAD}\PYG{p}{:} \PYG{l+m+mi}{2345}\PYG{n}{B023457}
\PYG{n}{MYBODY}\PYG{p}{:} \PYG{n}{ENquarto}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Commarea generated from XML input with redefinition of fields}

\index{Presentation of XML output@\spxentry{Presentation of XML output}!XML@\spxentry{XML}}\index{XML@\spxentry{XML}!Presentation of XML output@\spxentry{Presentation of XML output}}\index{Presentation of XML output@\spxentry{Presentation of XML output}!Virte Web Intergration@\spxentry{Virte Web Intergration}}\index{Virte Web Intergration@\spxentry{Virte Web Intergration}!Presentation of XML output@\spxentry{Presentation of XML output}}\ignorespaces 

\subsection{Presentation of XML output}
\label{\detokenize{User_Guide:presentation-of-xml-output}}\label{\detokenize{User_Guide:index-335}}
\sphinxAtStartPar
By using an output scenario and a suitable page template, VIRTEL can transform application program output into XML when the result is sent back in the HTTP response.


\subsubsection{Presentation module for XML output}
\label{\detokenize{User_Guide:presentation-module-for-xml-output}}
\sphinxAtStartPar
An output scenario is used to extract data from the output 3270 data stream of the transaction and place it into one or
more table variables. The example presentation module SCENXMLO shown below contains an OUTPUT scenario which
creates two variables, ACCTNUM and FULLNAME, from a table of values displayed on the 3270 screen:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
SCENXMLO    SCREENS EXEC=NO
SCENARIO    OUTPUT
            IF\PYGZdl{} (04,2,6),EQ=\PYGZsq{} \PYGZsq{},THEN=SKIP04
            COPY\PYGZdl{} SCREEN\PYGZhy{}TO\PYGZhy{}VARIABLE,SCREEN=(04,2,6),VAR=\PYGZsq{}ACCTNUM\PYGZsq{}
            COPY\PYGZdl{} SCREEN\PYGZhy{}TO\PYGZhy{}VARIABLE,SCREEN=(04,10,20),VAR=\PYGZsq{}FULLNAME\PYGZsq{}
SKIP04      EQU *
            IF\PYGZdl{} (05,2,6),EQ=\PYGZsq{} \PYGZsq{},THEN=SKIP05
            COPY\PYGZdl{} SCREEN\PYGZhy{}TO\PYGZhy{}VARIABLE,SCREEN=(05,2,6),VAR=\PYGZsq{}ACCTNUM\PYGZsq{}
            COPY\PYGZdl{} SCREEN\PYGZhy{}TO\PYGZhy{}VARIABLE,SCREEN=(05,10,20),VAR=\PYGZsq{}FULLNAME\PYGZsq{}
SKIP05      EQU *
            IF\PYGZdl{} (06,2,6),EQ=\PYGZsq{} \PYGZsq{},THEN=SKIP06
            COPY\PYGZdl{} SCREEN\PYGZhy{}TO\PYGZhy{}VARIABLE,SCREEN=(06,2,6),VAR=\PYGZsq{}ACCTNUM\PYGZsq{}
            COPY\PYGZdl{} SCREEN\PYGZhy{}TO\PYGZhy{}VARIABLE,SCREEN=(06,10,20),VAR=\PYGZsq{}FULLNAME\PYGZsq{}
SKIP06      EQU *
            IF\PYGZdl{} (07,2,6),EQ=\PYGZsq{} \PYGZsq{},THEN=SKIP07
            COPY\PYGZdl{} SCREEN\PYGZhy{}TO\PYGZhy{}VARIABLE,SCREEN=(07,2,6),VAR=\PYGZsq{}ACCTNUM\PYGZsq{}
            COPY\PYGZdl{} SCREEN\PYGZhy{}TO\PYGZhy{}VARIABLE,SCREEN=(07,10,20),VAR=\PYGZsq{}FULLNAME\PYGZsq{}
SKIP07      EQU *
            SCENARIO END
            SCRNEND
            END
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{HTTP presentation module for XML output}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
It is also possible for the application program to create VIRTEL table variables directly, either by means of an {\hyperref[\detokenize{User_Guide:v462ug-fae5}]{\sphinxcrossref{\DUrole{std,std-ref}{“FAE5”}}}} structured field, or via the HOST4WEB command {\hyperref[\detokenize{User_Guide:v462ug-set-variable}]{\sphinxcrossref{\DUrole{std,std-ref}{“SET VARIABLE”}}}}. The FAE5 structured field allows the application to pass large amounts of raw data to VIRTEL without being constrained by the limitations of the 3270 screen geometry. For such “VIRTEL\sphinxhyphen{}aware” applications, an output scenario is not necessary.
\end{sphinxadmonition}

\index{Page template for XML output@\spxentry{Page template for XML output}!XML@\spxentry{XML}}\index{XML@\spxentry{XML}!Page template for XML output@\spxentry{Page template for XML output}}\index{Page template for XML output@\spxentry{Page template for XML output}!Virte Web Intergration@\spxentry{Virte Web Intergration}}\index{Virte Web Intergration@\spxentry{Virte Web Intergration}!Page template for XML output@\spxentry{Page template for XML output}}\ignorespaces 

\subsubsection{Page template for XML output}
\label{\detokenize{User_Guide:page-template-for-xml-output}}\label{\detokenize{User_Guide:index-336}}
\sphinxAtStartPar
The URL in this example is /demohttp/xmldemo.xml+tran3 which requests VIRTEL to use the page template
xmldemo.xml to process the output of the tran3 transaction. The purpose of the page template is to convert the
transaction output into XML format.

\sphinxAtStartPar
In the page template xmldemo.xml shown below, the output data is obtained from the VIRTEL table variables
ACCTNUM and FULLNAME which were created either by the output scenario SCENXMLO, or directly by the application
program:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZlt{}?xml version=\PYGZdq{}1.0\PYGZdq{}?\PYGZgt{}
\PYGZlt{}!\PYGZhy{}\PYGZhy{}VIRTEL start=\PYGZdq{}\PYGZob{}\PYGZob{}\PYGZob{}\PYGZdq{} end=\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{} \PYGZhy{}\PYGZhy{}\PYGZgt{}
\PYGZob{}\PYGZob{}\PYGZob{}SET\PYGZhy{}OUTPUT\PYGZhy{}ENCODING\PYGZhy{}UTF\PYGZhy{}8 \PYGZdq{}\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZlt{}accounts\PYGZgt{}
\PYGZob{}\PYGZob{}\PYGZob{}FOR\PYGZhy{}EACH\PYGZhy{}VALUE\PYGZhy{}IN \PYGZdq{}ACCTNUM\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
    \PYGZlt{}account\PYGZgt{}
        \PYGZlt{}id\PYGZgt{}\PYGZob{}\PYGZob{}\PYGZob{}TRIMMED\PYGZhy{}VALUE\PYGZhy{}OF \PYGZdq{}ACCTNUM\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZlt{}/id\PYGZgt{}
        \PYGZlt{}name\PYGZgt{}\PYGZob{}\PYGZob{}\PYGZob{}TRIMMED\PYGZhy{}VALUE\PYGZhy{}OF \PYGZdq{}FULLNAME\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZlt{}/name\PYGZgt{}
    \PYGZlt{}account\PYGZgt{}
\PYGZob{}\PYGZob{}\PYGZob{}END\PYGZhy{}FOR \PYGZdq{}ACCTNUM\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZlt{}/accounts\PYGZgt{}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example page template for XML output data}

\phantomsection\label{\detokenize{User_Guide:v462ug-xml-parser}}
\index{XML Parser/Generator@\spxentry{XML Parser/Generator}!XML@\spxentry{XML}}\index{XML@\spxentry{XML}!XML Parser/Generator@\spxentry{XML Parser/Generator}}\index{XML Parser/Generator@\spxentry{XML Parser/Generator}!Virte Web Intergration@\spxentry{Virte Web Intergration}}\index{Virte Web Intergration@\spxentry{Virte Web Intergration}!XML Parser/Generator@\spxentry{XML Parser/Generator}}\ignorespaces 

\subsection{VIRTEL as an XML parser/generator}
\label{\detokenize{User_Guide:virtel-as-an-xml-parser-generator}}\label{\detokenize{User_Guide:index-337}}
\sphinxAtStartPar
An application can use the VIRTEL HTTP server as an XML parser/generator engine. A client program establishes a TCP/
IP session with the VIRTEL HTTP server, and sends XML or commarea data to VIRTEL in an HTTP request. VIRTEL
performs conversion to or from XML, and returns the resulting commarea or XML data to the client program in the
HTTP response.

\sphinxAtStartPar
It is the INITIAL scenario associated with the VIRTEL transaction which determines whether the conversion is from XML
to commarea format, or vice versa. Conversion from XML to commarea format is performed by a transaction whose
INITIAL scenario contains a MAP\$ FROM\sphinxhyphen{}FIELD or MAP\$ FROM\sphinxhyphen{}INPUT instruction. Conversion from commarea to XML
format is performed by a transaction whose INITIAL scenario contains a TOVAR\$ FROM\sphinxhyphen{}FIELD or TOVAR\$ FROM\sphinxhyphen{}INPUT
instruction. Both scenarios can reference a common set of MAP\$ statements which describe the relationship between
the XML stream and the commarea. In each case an appropriate page template must also be used, as shown in the
detailed examples which follow.

\index{VIRKIX@\spxentry{VIRKIX}!Virte Web Intergration@\spxentry{Virte Web Intergration}}\index{Virte Web Intergration@\spxentry{Virte Web Intergration}!VIRKIX@\spxentry{VIRKIX}}\ignorespaces 

\subsubsection{Communication via VIRKIX}
\label{\detokenize{User_Guide:communication-via-virkix}}\label{\detokenize{User_Guide:index-338}}
\sphinxAtStartPar
A client program running under CICS on MVS can use VIRKIX to establish the HTTP connection, send the request, and
receive the response. The client program may send the request in either ASCII or EBCDIC; both formats are recognized
and supported by VIRTEL. Notice the use of the special header GIVE\sphinxhyphen{}LENGTH\sphinxhyphen{}PREFIX which requests VIRTEL to add a
4\sphinxhyphen{}byte length prefix to the HTTP response, to conform with the format expected by VIRKIX CALL type ‘M’.

\index{VIRKIX MAP\$ Example@\spxentry{VIRKIX MAP\$ Example}!VIRKIX@\spxentry{VIRKIX}}\index{VIRKIX@\spxentry{VIRKIX}!VIRKIX MAP\$ Example@\spxentry{VIRKIX MAP\$ Example}}\index{VIRKIX MAP\$ Example@\spxentry{VIRKIX MAP\$ Example}!Scenarios@\spxentry{Scenarios}}\index{Scenarios@\spxentry{Scenarios}!VIRKIX MAP\$ Example@\spxentry{VIRKIX MAP\$ Example}}\index{VIRKIX MAP\$ Example@\spxentry{VIRKIX MAP\$ Example}!Virte Web Intergration@\spxentry{Virte Web Intergration}}\index{Virte Web Intergration@\spxentry{Virte Web Intergration}!VIRKIX MAP\$ Example@\spxentry{VIRKIX MAP\$ Example}}\ignorespaces 

\subsubsection{Example MAP\$ statements}
\label{\detokenize{User_Guide:example-map-statements}}\label{\detokenize{User_Guide:index-339}}
\sphinxAtStartPar
The copy member SCONVMAP shown below contains the MAP\$ statements common to both examples presented in
this section. This member is copied into each of the scenarios SCONVXML and SCONVPLA by means of an assembler
COPY statement.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Member name SCONVMAP

CAREA       MAP\PYGZdl{} BEGIN
            MAP\PYGZdl{} AREA,WITH=\PYGZsq{}date\PYGZsq{},LENGTH=8,TYPE=(ONLY9,LEFT\PYGZhy{}ALIGNED),     *
                FORMAT=(\PYGZsq{}9999\PYGZhy{}99\PYGZhy{}99\PYGZsq{},9)
IDENT       MAP\PYGZdl{} BEGIN,WITH=\PYGZsq{}identity\PYGZsq{}
            MAP\PYGZdl{} EVENTUAL\PYGZhy{}AREA,FROM\PYGZhy{}CONSTANT,\PYGZsq{}1\PYGZsq{},WHEN=(ELEMENT,\PYGZsq{}bic\PYGZsq{})
            MAP\PYGZdl{} ELSETHEN\PYGZhy{}AREA,FROM\PYGZhy{}CONSTANT,\PYGZsq{}2\PYGZsq{},WHEN=(ELEMENT,\PYGZsq{}iban\PYGZsq{})
            MAP\PYGZdl{} ELSETHEN\PYGZhy{}AREA,FROM\PYGZhy{}CONSTANT,\PYGZsq{}3\PYGZsq{},WHEN=(ELEMENT,\PYGZsq{}rib\PYGZsq{})
            MAP\PYGZdl{} ELSETHEN\PYGZhy{}AREA,FROM\PYGZhy{}CONSTANT,\PYGZsq{} \PYGZsq{}
            MAP\PYGZdl{} AREA,LENGTH=8
IDENT       MAP\PYGZdl{} END
VERIF       MAP\PYGZdl{} BEGIN,WITH=\PYGZsq{}verified\PYGZsq{}
            MAP\PYGZdl{} EVENTUAL\PYGZhy{}AREA,FROM\PYGZhy{}CONSTANT,\PYGZsq{}1\PYGZsq{},WHEN=(VALUE,\PYGZsq{}yes\PYGZsq{})
            MAP\PYGZdl{} ELSETHEN\PYGZhy{}AREA,FROM\PYGZhy{}CONSTANT,\PYGZsq{}0\PYGZsq{},WHEN=(VALUE,\PYGZsq{}no\PYGZsq{})
            MAP\PYGZdl{} ELSETHEN\PYGZhy{}AREA,FROM\PYGZhy{}CONSTANT,\PYGZsq{}0\PYGZsq{}
VERIF       MAP\PYGZdl{} END
            MAP\PYGZdl{} AREA,WITH=\PYGZsq{}amount\PYGZsq{},LENGTH=5,TYPE=ONLY9,                  *
                FORMAT=(\PYGZsq{}\PYGZdl{}999.99\PYGZsq{},9)
CAREA MAP\PYGZdl{} END
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{MAP\$ statements for VIRTEL XML parser/generator}

\index{XML\sphinxhyphen{}To\sphinxhyphen{}COMMAREA Example@\spxentry{XML\sphinxhyphen{}To\sphinxhyphen{}COMMAREA Example}!XML@\spxentry{XML}}\index{XML@\spxentry{XML}!XML\sphinxhyphen{}To\sphinxhyphen{}COMMAREA Example@\spxentry{XML\sphinxhyphen{}To\sphinxhyphen{}COMMAREA Example}}\index{XML\sphinxhyphen{}To\sphinxhyphen{}COMMAREA Example@\spxentry{XML\sphinxhyphen{}To\sphinxhyphen{}COMMAREA Example}!Scenarios@\spxentry{Scenarios}}\index{Scenarios@\spxentry{Scenarios}!XML\sphinxhyphen{}To\sphinxhyphen{}COMMAREA Example@\spxentry{XML\sphinxhyphen{}To\sphinxhyphen{}COMMAREA Example}}\index{XML\sphinxhyphen{}To\sphinxhyphen{}COMMAREA Example@\spxentry{XML\sphinxhyphen{}To\sphinxhyphen{}COMMAREA Example}!Virte Web Intergration@\spxentry{Virte Web Intergration}}\index{Virte Web Intergration@\spxentry{Virte Web Intergration}!XML\sphinxhyphen{}To\sphinxhyphen{}COMMAREA Example@\spxentry{XML\sphinxhyphen{}To\sphinxhyphen{}COMMAREA Example}}\ignorespaces 

\subsubsection{XML\sphinxhyphen{}to\sphinxhyphen{}commarea conversion using the VIRTEL XML parser}
\label{\detokenize{User_Guide:xml-to-commarea-conversion-using-the-virtel-xml-parser}}\label{\detokenize{User_Guide:index-340}}
\sphinxAtStartPar
The figure below shows an example transaction definition to be used for XML\sphinxhyphen{}to\sphinxhyphen{}commarea conversion using the
VIRTEL XML parser. The external name “tranxml” is the name referenced in the URL of the HTTP request which calls
the transaction. The special application name \$NONE\$ indicates that no host application is to be called. The /\&S order
specified in the “TIOA at Logon” field causes the INITIAL scenario {\hyperref[\detokenize{User_Guide:v462ug-sconvxml}]{\sphinxcrossref{\DUrole{std,std-ref}{“SCONVXML”}}}} to be executed.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
TRANSACTION DETAIL DEFINITION \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} Applid: VIRTELD2 16:39:25
Internal name ===\PYGZgt{} HTTP\PYGZhy{}16X               To associate with an entry point name
External name ===\PYGZgt{} tranxml                Name displayed on user menu
Description   ===\PYGZgt{} VIRTEL XML parser
Application   ===\PYGZgt{} \PYGZdl{}NONE\PYGZdl{}                 Application to be called
PassTicket    ===\PYGZgt{} 0 Name ===\PYGZgt{}            0=no 1=yes 2=unsigned
Application type ===\PYGZgt{} 2                   1=VTAM 2=VIRTEL 3=SERV 4=PAGE 5=LINE
Pseudo\PYGZhy{}terminals ===\PYGZgt{} HTLOC               Prefix of name of partner terminals
Logmode ===\PYGZgt{}                              Specify when LOGMODE must be changed
How started ===\PYGZgt{} 1                        1=menu 2=sub\PYGZhy{}menu 3=auto
Security ===\PYGZgt{} 0                           0=none 1=basic 2=NTLM 3=TLS 4=HTML
H4W commands ? ===\PYGZgt{}                       0=no 1=yes 2=if2VIRTEL 4=auto
Logon message ===\PYGZgt{}

TIOA at logon ===\PYGZgt{} \PYGZam{}/S \PYGZam{}/T

TIOA at logoff ===\PYGZgt{}

Initial Scenario ===\PYGZgt{} SCONVXML            Final Scenario    ===\PYGZgt{}
Input Scenario   ===\PYGZgt{}                     Output Scenario   ===\PYGZgt{}

P1=Update P3=Return P12=Server
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{VIRTEL transaction definition for XML\sphinxhyphen{}to\sphinxhyphen{}commarea conversion}

\sphinxAtStartPar
The initial scenario for XML\sphinxhyphen{}to\sphinxhyphen{}commarea conversion is shown below:

\def\sphinxLiteralBlockLabel{\label{\detokenize{User_Guide:v462ug-sconvxml}}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
Member name SCONVXML

SCONVXML    SCREENS APPL=SCONVXML
SCENARIO    INITIAL
            COPY SCONVMAP (copy member shown in Figure 1 \PYGZhy{}126)
CAREA       MAP\PYGZdl{} FROM\PYGZhy{}INPUT
CAREA       MAP\PYGZdl{} TO\PYGZhy{}VARIABLE,VAR=\PYGZsq{}MYAREA\PYGZsq{}
            SCENARIO END
            SCRNEND
END
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Initial scenario for XML\sphinxhyphen{}to\sphinxhyphen{}commarea conversion}

\sphinxAtStartPar
An example request for XML\sphinxhyphen{}to\sphinxhyphen{}commarea conversion using the VIRTEL XML parser is shown in the figure below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
POST /demohttp/myarea.txt+tranxml HTTP/1.1
Host: 192.168.235.30
Accept: */*
Content\PYGZhy{}Length: 172
Special: GIVE\PYGZhy{}LENGTH\PYGZhy{}PREFIX
\PYGZlt{}?xml version=\PYGZdq{}1.0\PYGZdq{} ?\PYGZgt{}
\PYGZlt{}request\PYGZgt{}
    \PYGZlt{}date\PYGZgt{}2006\PYGZhy{}06\PYGZhy{}21\PYGZlt{}/date\PYGZgt{}
    \PYGZlt{}identity\PYGZgt{}\PYGZlt{}iban\PYGZgt{}AB1234CD\PYGZlt{}/iban\PYGZgt{}\PYGZlt{}/identity\PYGZgt{}
    \PYGZlt{}verified\PYGZgt{}yes\PYGZlt{}/verified\PYGZgt{}
    \PYGZlt{}amount\PYGZgt{}\PYGZdl{}123.45\PYGZlt{}/amount\PYGZgt{}
\PYGZlt{}/request\PYGZgt{}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Input request for XML\sphinxhyphen{}to\sphinxhyphen{}commarea conversion}

\sphinxAtStartPar
The HTTP request shown above specifies the use of a page template named myarea.txt which is stored in a VIRTEL
directory and is shown in the figure below. By use of this page template, the commarea MYAREA created by the
INITIAL scenario SCONVXML is inserted into the HTTP response data:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Page template myarea.txt

\PYGZlt{}!\PYGZhy{}\PYGZhy{}VIRTEL start=\PYGZdq{}\PYGZob{}\PYGZob{}\PYGZob{}\PYGZdq{} end=\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{} \PYGZhy{}\PYGZhy{}\PYGZgt{}
\PYGZob{}\PYGZob{}\PYGZob{} SET\PYGZhy{}CONTENT\PYGZhy{}TYPE \PYGZdq{}text/plain\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZob{}\PYGZob{}\PYGZob{} CURRENT\PYGZhy{}VALUE\PYGZhy{}OF \PYGZdq{}MYAREA\PYGZdq{} \PYGZcb{}\PYGZcb{}\PYGZcb{}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Page template for XML\sphinxhyphen{}to\sphinxhyphen{}commarea conversion}

\sphinxAtStartPar
The figure below shows the HTTP response returned by VIRTEL. The body of the response contains the input data converted to commarea format:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{HTTP}\PYG{o}{/}\PYG{l+m+mf}{1.1} \PYG{l+m+mi}{200} \PYG{n}{Ok}
\PYG{n}{Server}\PYG{p}{:} \PYG{n}{Virtel}\PYG{o}{/}\PYG{l+m+mf}{4.32}
\PYG{n}{Date}\PYG{p}{:} \PYG{n}{Wed}\PYG{p}{,} \PYG{l+m+mi}{21} \PYG{n}{Jun} \PYG{l+m+mi}{2006} \PYG{l+m+mi}{15}\PYG{p}{:}\PYG{l+m+mi}{31}\PYG{p}{:}\PYG{l+m+mi}{02} \PYG{n}{GMT}
\PYG{n}{Expires}\PYG{p}{:} \PYG{l+m+mi}{0}
\PYG{n}{Content}\PYG{o}{\PYGZhy{}}\PYG{n}{length}\PYG{p}{:} \PYG{l+m+mi}{00000029}
\PYG{n}{Content}\PYG{o}{\PYGZhy{}}\PYG{n+nb}{type}\PYG{p}{:} \PYG{n}{text}\PYG{o}{/}\PYG{n}{plain}
\PYG{l+m+mi}{200606212}\PYG{n}{AB1234CD112345}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Output response from XML\sphinxhyphen{}to\sphinxhyphen{}commarea conversion}

\index{COMMAREA\sphinxhyphen{}To\sphinxhyphen{}XML Example@\spxentry{COMMAREA\sphinxhyphen{}To\sphinxhyphen{}XML Example}!XML@\spxentry{XML}}\index{XML@\spxentry{XML}!COMMAREA\sphinxhyphen{}To\sphinxhyphen{}XML Example@\spxentry{COMMAREA\sphinxhyphen{}To\sphinxhyphen{}XML Example}}\index{COMMAREA\sphinxhyphen{}To\sphinxhyphen{}XML Example@\spxentry{COMMAREA\sphinxhyphen{}To\sphinxhyphen{}XML Example}!Scenarios@\spxentry{Scenarios}}\index{Scenarios@\spxentry{Scenarios}!COMMAREA\sphinxhyphen{}To\sphinxhyphen{}XML Example@\spxentry{COMMAREA\sphinxhyphen{}To\sphinxhyphen{}XML Example}}\index{COMMAREA\sphinxhyphen{}To\sphinxhyphen{}XML Example@\spxentry{COMMAREA\sphinxhyphen{}To\sphinxhyphen{}XML Example}!Virte Web Intergration@\spxentry{Virte Web Intergration}}\index{Virte Web Intergration@\spxentry{Virte Web Intergration}!COMMAREA\sphinxhyphen{}To\sphinxhyphen{}XML Example@\spxentry{COMMAREA\sphinxhyphen{}To\sphinxhyphen{}XML Example}}\ignorespaces 

\subsubsection{Commarea\sphinxhyphen{}to\sphinxhyphen{}XML conversion using the VIRTEL XML generator}
\label{\detokenize{User_Guide:commarea-to-xml-conversion-using-the-virtel-xml-generator}}\label{\detokenize{User_Guide:index-341}}
\sphinxAtStartPar
The figure below shows an example transaction definition to be used for commarea\sphinxhyphen{}to\sphinxhyphen{}XML conversion using the
VIRTEL XML generator. The external name “trancom” is the name referenced in the URL of the HTTP request which
calls the transaction. The special application name \$NONE\$ indicates that no host application is to be called. The /\&S
order specified in the “TIOA at Logon” field causes the INITIAL scenario {\hyperref[\detokenize{User_Guide:v462ug-sconvpla}]{\sphinxcrossref{\DUrole{std,std-ref}{“SCONVPLA”}}}} to be executed.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
TRANSACTION DETAIL DEFINITION \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} Applid: VIRTELD2 16:39:58
Internal name ===\PYGZgt{} HTTP\PYGZhy{}16Y               To associate with an entry point name
External name ===\PYGZgt{} trancom                Name displayed on user menu
Description   ===\PYGZgt{} VIRTEL XML generator
Application   ===\PYGZgt{} \PYGZdl{}NONE\PYGZdl{}                 Application to be called
PassTicket   ===\PYGZgt{} 0 Name ===\PYGZgt{}             0=no 1=yes 2=unsigned
Application type ===\PYGZgt{} 2                   1=VTAM 2=VIRTEL 3=SERV 4=PAGE 5=LINE
Pseudo\PYGZhy{}terminals ===\PYGZgt{} HTLOC               Prefix of name of partner terminals
Logmode          ===\PYGZgt{}                     Specify when LOGMODE must be changed
How started      ===\PYGZgt{} 1                   1=menu 2=sub\PYGZhy{}menu 3=auto
Security         ===\PYGZgt{} 0                   0=none 1=basic 2=NTLM 3=TLS 4=HTML
H4W commands ?   ===\PYGZgt{}                     0=no 1=yes 2=if2VIRTEL 4=auto
Logon message    ===\PYGZgt{}
TIOA at logon    ===\PYGZgt{} \PYGZam{}/S \PYGZam{}/T

TIOA at logoff   ===\PYGZgt{}

Initial Scenario ===\PYGZgt{} SCONVPLA         Final Scenario  ===\PYGZgt{}
Input Scenario   ===\PYGZgt{}                  Output Scenario ===\PYGZgt{}

P1=Update                       P3=Return                           P12=Server
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{VIRTEL transaction definition for commarea\sphinxhyphen{}to\sphinxhyphen{}XML conversion}

\phantomsection\label{\detokenize{User_Guide:v462ug-sconvpla}}
\index{COMMAREA Conversion Example@\spxentry{COMMAREA Conversion Example}!XML@\spxentry{XML}}\index{XML@\spxentry{XML}!COMMAREA Conversion Example@\spxentry{COMMAREA Conversion Example}}\index{COMMAREA Conversion Example@\spxentry{COMMAREA Conversion Example}!Scenarios@\spxentry{Scenarios}}\index{Scenarios@\spxentry{Scenarios}!COMMAREA Conversion Example@\spxentry{COMMAREA Conversion Example}}\index{COMMAREA Conversion Example@\spxentry{COMMAREA Conversion Example}!Virte Web Intergration@\spxentry{Virte Web Intergration}}\index{Virte Web Intergration@\spxentry{Virte Web Intergration}!COMMAREA Conversion Example@\spxentry{COMMAREA Conversion Example}}\ignorespaces 
\sphinxAtStartPar
The initial scenario for commarea\sphinxhyphen{}to\sphinxhyphen{}XML conversion is shown below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Member name SCONVPLA

SCONVPLA SCREENS APPL=SCONVPLA
SCENARIO INITIAL
COPY SCONVMAP
CAREA TOVAR\PYGZdl{} FROM\PYGZhy{}INPUT
SCENARIO END
SCRNEND
END
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Initial scenario for commarea\sphinxhyphen{}to\sphinxhyphen{}XML conversion}

\sphinxAtStartPar
An example request for commarea\sphinxhyphen{}to\sphinxhyphen{}XML conversion using the VIRTEL XML parser is shown in the figure below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{POST} \PYG{o}{/}\PYG{n}{demohttp}\PYG{o}{/}\PYG{n}{mydata}\PYG{o}{.}\PYG{n}{xml}\PYG{o}{+}\PYG{n}{trancom} \PYG{n}{HTTP}\PYG{o}{/}\PYG{l+m+mf}{1.1}
\PYG{n}{Host}\PYG{p}{:} \PYG{l+m+mf}{192.168}\PYG{l+m+mf}{.235}\PYG{l+m+mf}{.30}
\PYG{n}{Accept}\PYG{p}{:} \PYG{o}{*}\PYG{o}{/}\PYG{o}{*}
\PYG{n}{Content}\PYG{o}{\PYGZhy{}}\PYG{n}{Length}\PYG{p}{:} \PYG{l+m+mi}{27}
\PYG{n}{Special}\PYG{p}{:} \PYG{n}{GIVE}\PYG{o}{\PYGZhy{}}\PYG{n}{LENGTH}\PYG{o}{\PYGZhy{}}\PYG{n}{PREFIX}
\PYG{l+m+mi}{200606212}\PYG{n}{AB1234CD112345}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Input request for commarea\sphinxhyphen{}to\sphinxhyphen{}XML conversion}

\sphinxAtStartPar
The HTTP request shown above specifies the use of a page template named mydata.xml which is stored in a VIRTEL
directory and is shown in the figure below. By use of this page template, the output variables created by the TOVAR\$
instruction in the INITIAL scenario SCONVPLA are inserted into the HTTP response data:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Page template mydata.xml

\PYGZlt{}?xml version=\PYGZdq{}1.0\PYGZdq{} encoding=\PYGZdq{}UTF\PYGZhy{}8\PYGZdq{}?\PYGZgt{}
\PYGZlt{}!\PYGZhy{}\PYGZhy{}VIRTEL start=\PYGZdq{}\PYGZob{}\PYGZob{}\PYGZob{}\PYGZdq{} end=\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{} \PYGZhy{}\PYGZhy{}\PYGZgt{}
\PYGZob{}\PYGZob{}\PYGZob{} SET\PYGZhy{}CONTENT\PYGZhy{}TYPE \PYGZdq{}text/xml\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZob{}\PYGZob{}\PYGZob{}SET\PYGZhy{}OUTPUT\PYGZhy{}ENCODING\PYGZhy{}UTF\PYGZhy{}8 \PYGZdq{}\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZlt{}request\PYGZgt{}
 \PYGZlt{}date\PYGZgt{}\PYGZob{}\PYGZob{}\PYGZob{}CURRENT\PYGZhy{}VALUE\PYGZhy{}OF \PYGZdq{}date\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZlt{}/date\PYGZgt{}
 \PYGZlt{}identity\PYGZgt{}
  \PYGZob{}\PYGZob{}\PYGZob{}WHEN\PYGZhy{}EXISTS \PYGZdq{}bic\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZlt{}bic\PYGZgt{}\PYGZob{}\PYGZob{}\PYGZob{}CURRENT\PYGZhy{}VALUE\PYGZhy{}OF \PYGZdq{}bic\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZlt{}/bic\PYGZgt{}\PYGZob{}\PYGZob{}\PYGZob{}END
 \PYGZhy{}WHEN\PYGZhy{}EXISTS \PYGZdq{}bic\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
  \PYGZob{}\PYGZob{}\PYGZob{}WHEN\PYGZhy{}EXISTS \PYGZdq{}iban\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZlt{}iban\PYGZgt{}\PYGZob{}\PYGZob{}\PYGZob{}CURRENT\PYGZhy{}VALUE\PYGZhy{}OF
 \PYGZdq{}iban\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZlt{}/iban\PYGZgt{}\PYGZob{}\PYGZob{}\PYGZob{}END\PYGZhy{}WHEN\PYGZhy{}EXISTS \PYGZdq{}iban\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
  \PYGZob{}\PYGZob{}\PYGZob{}WHEN\PYGZhy{}EXISTS \PYGZdq{}rib\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZlt{}rib\PYGZgt{}\PYGZob{}\PYGZob{}\PYGZob{}CURRENT\PYGZhy{}VALUE\PYGZhy{}OF \PYGZdq{}rib\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZlt{}/rib\PYGZgt{}\PYGZob{}\PYGZob{}\PYGZob{}END
 \PYGZhy{}WHEN\PYGZhy{}EXISTS \PYGZdq{}rib\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
 \PYGZlt{}/identity\PYGZgt{}
 \PYGZlt{}verified\PYGZgt{}\PYGZob{}\PYGZob{}\PYGZob{}CURRENT\PYGZhy{}VALUE\PYGZhy{}OF \PYGZdq{}verified\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZlt{}/verified\PYGZgt{}
 \PYGZlt{}amount\PYGZgt{}\PYGZob{}\PYGZob{}\PYGZob{}CURRENT\PYGZhy{}VALUE\PYGZhy{}OF \PYGZdq{}amount\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZlt{}/amount\PYGZgt{}
\PYGZlt{}/request\PYGZgt{}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Page template for commarea\sphinxhyphen{}to\sphinxhyphen{}XML conversion}

\sphinxAtStartPar
The figure below shows the HTTP response returned by VIRTEL. The body of the response contains the input
commarea data converted to XML format:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
HTTP/1.1 200 Ok
Server: Virtel/4.32
Date: Wed, 21 Jun 2006 16:02:55 GMT
Expires: 0
Content\PYGZhy{}length: 00000207
Content\PYGZhy{}type: text/xml

\PYGZlt{}?xml version=\PYGZdq{}1.0\PYGZdq{} encoding=\PYGZdq{}UTF\PYGZhy{}8\PYGZdq{}?\PYGZgt{}

\PYGZlt{}request\PYGZgt{}
    \PYGZlt{}date\PYGZgt{}2006\PYGZhy{}06\PYGZhy{}21\PYGZlt{}/date\PYGZgt{}
    \PYGZlt{}identity\PYGZgt{}
        \PYGZlt{}iban\PYGZgt{}AB1234CD\PYGZlt{}/iban\PYGZgt{}
    \PYGZlt{}/identity\PYGZgt{}
    \PYGZlt{}verified\PYGZgt{}yes\PYGZlt{}/verified\PYGZgt{}
    \PYGZlt{}amount\PYGZgt{}\PYGZdl{}123.45\PYGZlt{}/amount\PYGZgt{}
\PYGZlt{}/request\PYGZgt{}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Output response from commarea\sphinxhyphen{}to\sphinxhyphen{}XML conversion}

\index{Automatic Scenario Generation@\spxentry{Automatic Scenario Generation}!Virtel Web Intergration@\spxentry{Virtel Web Intergration}}\index{Virtel Web Intergration@\spxentry{Virtel Web Intergration}!Automatic Scenario Generation@\spxentry{Automatic Scenario Generation}}\ignorespaces 

\subsection{Automatic scenario generation}
\label{\detokenize{User_Guide:automatic-scenario-generation}}\label{\detokenize{User_Guide:index-343}}
\index{Using MAPGEN@\spxentry{Using MAPGEN}!Virtel Web Intergration@\spxentry{Virtel Web Intergration}}\index{Virtel Web Intergration@\spxentry{Virtel Web Intergration}!Using MAPGEN@\spxentry{Using MAPGEN}}\index{Using MAPGEN@\spxentry{Using MAPGEN}!Scenarios@\spxentry{Scenarios}}\index{Scenarios@\spxentry{Scenarios}!Using MAPGEN@\spxentry{Using MAPGEN}}\ignorespaces 

\subsubsection{MAPGEN program}
\label{\detokenize{User_Guide:mapgen-program}}\label{\detokenize{User_Guide:index-344}}
\sphinxAtStartPar
The MAPGEN program allows the automatic generation of scenarios from COBOL copybooks.
The input to the MAPGEN program is a COBOL copybook containing data division definitions of a commarea. The
output from the MAPGEN program may be:
• a scenario for “input\sphinxhyphen{}to\sphinxhyphen{}commarea” conversion
• a scenario for “commarea\sphinxhyphen{}to\sphinxhyphen{}output” conversion
• an optional page template to convert the generated output variables into XML format
The MAPGEN program (MAPGREX) and the JCL to execute it (MAPGJCL) are delivered as members of the VIRTEL
SAMPLIB. The start of the MAPGJCL job is shown below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{/}\PYG{n}{VIRMAPGN} \PYG{n}{JOB} \PYG{l+m+mi}{1}\PYG{p}{,}\PYG{n}{MAPGEN}\PYG{p}{,}\PYG{n}{CLASS}\PYG{o}{=}\PYG{n}{A}\PYG{p}{,}\PYG{n}{MSGCLASS}\PYG{o}{=}\PYG{n}{X}\PYG{p}{,}\PYG{n}{NOTIFY}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{SYSUID}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*} \PYG{n}{MAPGEN} \PYG{p}{:} \PYG{n}{Generate} \PYG{n}{VIRTEL} \PYG{n}{SCENARIO} \PYG{k+kn}{from} \PYG{n+nn}{COBOL} \PYG{n}{copybook}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{SET} \PYG{n}{QUAL}\PYG{o}{=}\PYG{n}{yourqual}\PYG{o}{.}\PYG{n}{VIRTnnn} \PYG{n}{Prefix} \PYG{n}{of} \PYG{n}{VIRTEL} \PYG{n}{dataset} \PYG{n}{names}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{SET} \PYG{n}{COPYLIB}\PYG{o}{=}\PYG{n}{your}\PYG{o}{.}\PYG{n}{cobol}\PYG{o}{.}\PYG{n}{srcelib} \PYG{n}{Library} \PYG{n}{containing} \PYG{n}{copybook}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{SET} \PYG{n}{MEMBER}\PYG{o}{=}\PYG{n}{copybook} \PYG{n}{Copybook} \PYG{n}{member} \PYG{n}{name}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{SET} \PYG{n}{STYLE}\PYG{o}{=}\PYG{n}{APOST} \PYG{n}{APOST} \PYG{o+ow}{or} \PYG{n}{QUOTE}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{SET} \PYG{n}{PREFIX}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{TIOA\PYGZhy{}}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{Field} \PYG{n}{name} \PYG{n}{prefix} \PYG{n}{to} \PYG{n}{be} \PYG{n}{removed}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{SET} \PYG{n}{CASE}\PYG{o}{=}\PYG{n}{LOWER} \PYG{n}{Field} \PYG{n}{names} \PYG{n}{UPPER} \PYG{o+ow}{or} \PYG{n}{LOWER} \PYG{n}{case}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{SET} \PYG{n}{CODE}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ENC=IE}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{UTF}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{8} \PYG{o+ow}{or} \PYG{n}{ISO} \PYG{o+ow}{or} \PYG{n}{ENC}\PYG{o}{=}\PYG{n}{varname}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{SET} \PYG{n}{FORMAT}\PYG{o}{=}\PYG{n}{QUERY} \PYG{n}{XML} \PYG{n}{QUERY} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{XML=f}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{COM} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{COM=x}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{SET} \PYG{n}{VAR}\PYG{o}{=}\PYG{n}{MYCOMMAREA} \PYG{n}{Output} \PYG{p}{(}\PYG{n}{XML}\PYG{o}{/}\PYG{n}{QUERY}\PYG{p}{)} \PYG{n}{Input} \PYG{p}{(}\PYG{n}{COM}\PYG{p}{)}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{SET} \PYG{n}{XMLGEN}\PYG{o}{=}\PYG{n}{NO} \PYG{n}{YES} \PYG{o+ow}{or} \PYG{n}{NO} \PYG{n}{to} \PYG{n}{run} \PYG{n}{XMLGEN} \PYG{n}{step}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Automatic scenario generation: MAPGJCL job}

\sphinxAtStartPar
The parameters required to customize this job are coded as SET statements at the start of the job. The meaning of the parameters is as follows:
\begin{description}
\sphinxlineitem{QUAL=yourqual.VIRTnnn}
\sphinxAtStartPar
Prefix of VIRTEL dataset names. This job requires access to the SAMPLIB, LOADLIB, and SCRNAPI.MACLIB datasets. The generated scenario is written as a load module in the LOADLIB dataset.

\sphinxlineitem{COPYLIB=your.cobol.srcelib}
\sphinxAtStartPar
Name of library containing the input copybook

\sphinxlineitem{MEMBER=copybook}
\sphinxAtStartPar
Member name of the input copybook in the COPYLIB library

\sphinxlineitem{STYLE=APOST|QUOTE}
\sphinxAtStartPar
STYLE specifies whether the copybook uses single or double quotation marks to delimit strings. APOST (single quotation marks) is the default.

\sphinxlineitem{PREFIX=’prefix’}
\sphinxAtStartPar
(optional) If specified, the prefix will be removed from the field names in the copybook

\sphinxlineitem{CASE=LOWER|UPPER}
\sphinxAtStartPar
(optional) If specified, all field names in the copybook will be converted to LOWER or UPPER case. If not specified, the case will be preserved.

\sphinxlineitem{CODE=encoding}
\sphinxAtStartPar
(optional) Specifies the encoding of HTML form\sphinxhyphen{}field parameters in the input URL. The following encodings may be specified:\sphinxhyphen{}
\begin{quote}
\begin{description}
\sphinxlineitem{UTF\sphinxhyphen{}8}
\sphinxAtStartPar
Input form\sphinxhyphen{}fields are encoded in UTF\sphinxhyphen{}8 format

\sphinxlineitem{ISO}
\sphinxAtStartPar
Input form\sphinxhyphen{}fields are encoded in non\sphinxhyphen{}UTF\sphinxhyphen{}8 format

\sphinxlineitem{‘ENC=fieldname’}
\sphinxAtStartPar
The contents of the URL form\sphinxhyphen{}field named fieldname are queried to obtain the encoding value (UTF\sphinxhyphen{}8 or ISO). This allows the client to dynamically specify the encoding method by means of a URL parameter. If CODE is not specified, or if CODE=’ENC=fieldname’ is specified and the URL does not contain the parameter fieldname=UTF\sphinxhyphen{}8 or fieldname=ISO, then the VIRTEL default encoding (ISO) is assumed.

\end{description}
\end{quote}

\sphinxlineitem{FORMAT=format}
\sphinxAtStartPar
Specifies the type of scenario to be generated. The following formats may be specified:\sphinxhyphen{}
\begin{quote}
\begin{description}
\sphinxlineitem{QUERY}
\sphinxAtStartPar
Generates an INITIAL scenario which accepts input data encoded as HTML form\sphinxhyphen{}fields, and produces an output commarea. The generated scenario contains a {\hyperref[\detokenize{User_Guide:v462ug-map-from-input}]{\sphinxcrossref{\DUrole{std,std-ref}{“MAP\$ FROM\sphinxhyphen{}INPUT”}}}}, QUERY instruction.

\sphinxlineitem{XML}
\sphinxAtStartPar
Generates an INITIAL scenario which accepts XML input data in the body of an HTTP request, and produces an output commarea. The generated scenario contains a {\hyperref[\detokenize{User_Guide:v462ug-map-from-input}]{\sphinxcrossref{\DUrole{std,std-ref}{“MAP\$ FROM\sphinxhyphen{}INPUT”}}}}, XML instruction.

\sphinxlineitem{‘XML=fieldname’}
\sphinxAtStartPar
Generates an INITIAL scenario which accepts XML input encoded within an HTML form\sphinxhyphen{}field named fieldname, and produces an output commarea. The generated scenario contains a {\hyperref[\detokenize{User_Guide:v462ug-map-from-field}]{\sphinxcrossref{\DUrole{std,std-ref}{“MAP\$ FROM\sphinxhyphen{}FIELD”}}}} instruction with the parameter FIELD=fieldname.

\sphinxlineitem{COM}
\sphinxAtStartPar
When VAR is not specified: Generates an INITIAL scenario which accepts an input commarea in the body of an HTTP request, and produces a set of VIRTEL variables whose names correspond to the fields in the copybook. The generated scenario contains a {\hyperref[\detokenize{User_Guide:v462ug-tovar-from-input}]{\sphinxcrossref{\DUrole{std,std-ref}{“TOVAR\$ FROM\sphinxhyphen{}INPUT”}}}} instruction.

\sphinxAtStartPar
When VAR is specified: Generates an OUTPUT scenario which accepts an input commarea contained in the VIRTEL variable named by the VAR parameter, and produces a set of VIRTEL variables whose names correspond to the fields in the copybook. The generated scenario contains a {\hyperref[\detokenize{User_Guide:v462ug-map-from-variable}]{\sphinxcrossref{\DUrole{std,std-ref}{“MAP\$ FROM\sphinxhyphen{}VARIABLE”}}}} instruction.

\sphinxlineitem{‘COM=fieldname’}
\sphinxAtStartPar
Generates an INITIAL scenario which accepts an input commarea encoded within an HTML form\sphinxhyphen{}field named fieldname, and produces a set of VIRTEL variables whose names correspond to the fields in the copybook. The generated scenario contains a {\hyperref[\detokenize{User_Guide:v462ug-map-from-field}]{\sphinxcrossref{\DUrole{std,std-ref}{“MAP\$ FROM\sphinxhyphen{}FIELD”}}}} instruction with the parameter FIELD=fieldname.

\end{description}
\end{quote}

\sphinxlineitem{VAR=commareaname}\begin{description}
\sphinxlineitem{For FORMAT=QUERY, FORMAT=XML, FORMAT=’XML=fieldname’}
\sphinxAtStartPar
Specifies the name of the VIRTEL variable into which the output commarea is written. If not specified, the default is VAR=AREA

\sphinxlineitem{For FORMAT=COM}
\sphinxAtStartPar
Optionally specifies the name of the VIRTEL variable which contains the input commarea

\end{description}

\sphinxlineitem{XMLGEN=YES|NO}
\sphinxAtStartPar
Specifies whether an additional XMLGEN step is to be run. This parameter is useful when FORMAT=COM or FORMAT=’COM=fieldname’ is specified. If XMLGEN=YES then the job also generates a VIRTEL page template suitable for converting the VIRTEL result variables into XML format. The generated page template is written to userid.XMLGEN.OUTPUT which must be preallocated as a sequential dataset. The contents of this dataset should then be transferred to your workstation where it can be uploaded into a VIRTEL directory (see {\hyperref[\detokenize{User_Guide:v462ug-uploading-html-pages}]{\sphinxcrossref{\DUrole{std,std-ref}{“Uploading pages by HTTP”}}}}).

\end{description}

\newpage
\phantomsection\label{\detokenize{User_Guide:v462ug-email-incoming}}
\index{Incoming E\sphinxhyphen{}Mail Calls@\spxentry{Incoming E\sphinxhyphen{}Mail Calls}}\index{Incoming E\sphinxhyphen{}Mail Calls@\spxentry{Incoming E\sphinxhyphen{}Mail Calls}!SMTP@\spxentry{SMTP}}\index{SMTP@\spxentry{SMTP}!Incoming E\sphinxhyphen{}Mail Calls@\spxentry{Incoming E\sphinxhyphen{}Mail Calls}}\ignorespaces 

\section{Incoming E\sphinxhyphen{}mails}
\label{\detokenize{User_Guide:incoming-e-mails}}\label{\detokenize{User_Guide:index-345}}
\sphinxAtStartPar
The arrival of an e\sphinxhyphen{}mail on an SMTP line can trigger one of two types of action in VIRTEL, depending on the entry point chosen by the rules of the SMTP line:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Transfer of attached files to a VIRTEL directory

\item {} 
\sphinxAtStartPar
Start a CICS transaction (or other VTAM application)

\end{itemize}

\index{SMTP line Rules@\spxentry{SMTP line Rules}!SMTP@\spxentry{SMTP}}\index{SMTP@\spxentry{SMTP}!SMTP line Rules@\spxentry{SMTP line Rules}}\index{SMTP line Rules@\spxentry{SMTP line Rules}!Incoming E\sphinxhyphen{}Mail Calls@\spxentry{Incoming E\sphinxhyphen{}Mail Calls}}\index{Incoming E\sphinxhyphen{}Mail Calls@\spxentry{Incoming E\sphinxhyphen{}Mail Calls}!SMTP line Rules@\spxentry{SMTP line Rules}}\ignorespaces 

\subsection{Rules of the SMTP line}
\label{\detokenize{User_Guide:rules-of-the-smtp-line}}\label{\detokenize{User_Guide:index-346}}
\sphinxAtStartPar
When an e\sphinxhyphen{}mail arrives on an SMTP line, VIRTEL examines the rules of the line to determine which entry point will be
used to process the incoming message. In the example below, the rule specifies that when the e\sphinxhyphen{}mail destination
address is \sphinxhref{mailto:cicsmail@sample.com}{cicsmail@sample.com}, and the sender address is \sphinxhref{mailto:customer@client.com}{customer@client.com}, then entry point SMTPCICS will be
used:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{DETAIL} \PYG{n}{of} \PYG{n}{RULE} \PYG{k+kn}{from} \PYG{n+nn}{RULE} \PYG{n}{SET}\PYG{p}{:} \PYG{n}{S}\PYG{o}{\PYGZhy{}}\PYG{n}{SMTP} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{n}{Applid}\PYG{p}{:} \PYG{n}{VIRTEL} \PYG{l+m+mi}{15}\PYG{p}{:}\PYG{l+m+mi}{46}\PYG{p}{:}\PYG{l+m+mi}{00}
\PYG{n}{Name}          \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{SM200EML}               \PYG{n}{Rule} \PYG{n}{priority} \PYG{o+ow}{is} \PYG{n}{per} \PYG{n}{name}
\PYG{n}{Status}        \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{ACTIVE}                 \PYG{l+m+mi}{19} \PYG{n}{May} \PYG{l+m+mi}{2004} \PYG{l+m+mi}{15}\PYG{p}{:}\PYG{l+m+mi}{46}\PYG{p}{:}\PYG{l+m+mi}{00} \PYG{n}{VIRDBA}
\PYG{n}{Description}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{Appels} \PYG{n}{entrants} \PYG{n}{SMTP}
\PYG{n}{Entry} \PYG{n}{point}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{SMTPCICS}               \PYG{n}{Target} \PYG{n}{Entry} \PYG{n}{Point}
\PYG{n}{Parameter}     \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{optional} \PYG{o}{\PYGZam{}}\PYG{l+m+mi}{1} \PYG{n}{value}
\PYG{n}{Trace}         \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                        \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{commands} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{data} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{partner}

\PYG{n}{C} \PYG{p}{:} \PYG{l+m+mi}{0}\PYG{o}{=}\PYG{n}{IGNORE} \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{IS} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{IS} \PYG{n}{NOT} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{STARTS} \PYG{n}{WITH} \PYG{l+m+mi}{4}\PYG{o}{=}\PYG{n}{DOES} \PYG{n}{NOT} \PYG{l+m+mi}{5}\PYG{o}{=}\PYG{n}{ENDS} \PYG{n}{WITH} \PYG{l+m+mi}{6}\PYG{o}{=}\PYG{n}{DOES} \PYG{n}{NOT}
\PYG{l+m+mi}{0} \PYG{n}{IP} \PYG{n}{Subnet}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mf}{000.000}\PYG{l+m+mf}{.000}\PYG{l+m+mf}{.000}        \PYG{n}{Mask} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mf}{000.000}\PYG{l+m+mf}{.000}\PYG{l+m+mf}{.000}
\PYG{l+m+mi}{1} \PYG{n}{Host}        \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{cicsmail}\PYG{n+nd}{@sample}\PYG{o}{.}\PYG{n}{com}
\PYG{l+m+mi}{1} \PYG{n}{eMail}       \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{customer}\PYG{n+nd}{@client}\PYG{o}{.}\PYG{n}{com}
\PYG{l+m+mi}{0} \PYG{n}{Calling} \PYG{n}{DTE} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                        \PYG{n}{Calling} \PYG{n}{DTE} \PYG{n}{address}
\PYG{l+m+mi}{0} \PYG{n}{Called}      \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                        \PYG{n}{Called} \PYG{n}{DTE} \PYG{n}{address}
\PYG{l+m+mi}{0} \PYG{n}{CUD0} \PYG{p}{(}\PYG{n}{Hex}\PYG{p}{)}  \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                        \PYG{n}{First} \PYG{l+m+mi}{4} \PYG{n+nb}{bytes} \PYG{n}{of} \PYG{n}{CUD} \PYG{p}{(}\PYG{n}{X25} \PYG{n}{protocol}\PYG{p}{)}
\PYG{l+m+mi}{0} \PYG{n}{User} \PYG{n}{Data}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}

\PYG{l+m+mi}{0} \PYG{n}{Days}        \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{M}\PYG{p}{:}     \PYG{n}{T}\PYG{p}{:}      \PYG{n}{W}\PYG{p}{:}      \PYG{n}{T}\PYG{p}{:}      \PYG{n}{F}\PYG{p}{:}      \PYG{n}{S}\PYG{p}{:}      \PYG{n}{S}\PYG{p}{:}
\PYG{l+m+mi}{0} \PYG{n}{Start} \PYG{n}{time}  \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{H}\PYG{p}{:}     \PYG{n}{M}\PYG{p}{:}      \PYG{n}{S}\PYG{p}{:}     \PYG{n}{End} \PYG{n}{time} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{H}\PYG{p}{:}      \PYG{n}{M}\PYG{p}{:}      \PYG{n}{S}\PYG{p}{:}

\PYG{n}{P1}\PYG{o}{=}\PYG{n}{Update}                        \PYG{n}{P3}\PYG{o}{=}\PYG{n}{Return}                        \PYG{n}{Enter}\PYG{o}{=}\PYG{n}{Add}
\PYG{n}{P4}\PYG{o}{=}\PYG{n}{Activate}                      \PYG{n}{P5}\PYG{o}{=}\PYG{n}{Inactivate}                    \PYG{n}{P12}\PYG{o}{=}\PYG{n}{Entry} \PYG{n}{P}\PYG{o}{.}
\PYG{n}{CREATION} \PYG{n}{OK}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Rule for routing an incoming e\sphinxhyphen{}mail on an SMTP line}

\index{File Transfer by E\sphinxhyphen{}Mail@\spxentry{File Transfer by E\sphinxhyphen{}Mail}!SMTP@\spxentry{SMTP}}\index{SMTP@\spxentry{SMTP}!File Transfer by E\sphinxhyphen{}Mail@\spxentry{File Transfer by E\sphinxhyphen{}Mail}}\index{File Trasnfer by E\sphinxhyphen{}Mail@\spxentry{File Trasnfer by E\sphinxhyphen{}Mail}!Incoming E\sphinxhyphen{}Mail Calls@\spxentry{Incoming E\sphinxhyphen{}Mail Calls}}\index{Incoming E\sphinxhyphen{}Mail Calls@\spxentry{Incoming E\sphinxhyphen{}Mail Calls}!File Trasnfer by E\sphinxhyphen{}Mail@\spxentry{File Trasnfer by E\sphinxhyphen{}Mail}}\ignorespaces 

\subsection{File transfer by e\sphinxhyphen{}mail}
\label{\detokenize{User_Guide:file-transfer-by-e-mail}}\label{\detokenize{User_Guide:index-347}}
\sphinxAtStartPar
An entry point which is used for file file transfer (including the upload of HTML pages) has a single transaction which
calls VIRTEL module VIR0041B. This transaction is defined with application type 2 and integration mode 1. The menu
program specified in the entry point must be VIR0021B. Only authorized users can perform transfers. See \sphinxstyleemphasis{Correspondent Management} in the Virtel Administration Guide.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
ENTRY POINT DETAIL DEFINITION \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} Applid: VIRTEL 15:52:26
Name          ===\PYGZgt{} SMTP                Name this ENTRY POINT (LOGON DATA)
Description   ===\PYGZgt{} Receive e\PYGZhy{}mail for file transfer
Transactions  ===\PYGZgt{} SMTP                Prefix for associated transactions
Videotex key  ===\PYGZgt{}                     If videotex, keyword or \PYGZdl{}NONE\PYGZdl{}
Transparency  ===\PYGZgt{}                     Server types NOT to emulate
Time out      ===\PYGZgt{} 0005   minutes      Maximum inactive time
Do if timeout ===\PYGZgt{} 0                   0=logoff 1=bip+logoff 2=anti pad
Emulation     ===\PYGZgt{} EMAIL               Type of terminal:
MINITEL : 40 or 80 columns             PC  : Emulation done by VirtelPC
HTML    : Web Browser                  VT  : VT 100
EBCDIC  : not translated               X25 : uses low level dialog
Signon program           ===\PYGZgt{}          Controls user name and password
Menu program             ===\PYGZgt{} VIR0021B  List of transactions
Identification scenario  ===\PYGZgt{}          eg XML identification
Type 3 compression       ===\PYGZgt{}          Discover typical screens (Virtel/PC)
Mandatory identification ===\PYGZgt{}                               (PC or minitel)
3270 swap key            ===\PYGZgt{}          eg P24
Extended colors          ===\PYGZgt{}          E: extended X: extended + DBCS

P1=Update                       P3=Return                  P4=Transactions
Enter=Add
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Entry point for file transfer by SMTP}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{TRANSACTION} \PYG{n}{DETAIL} \PYG{n}{DEFINITION} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{n}{Applid}\PYG{p}{:} \PYG{n}{VIRTEL} \PYG{l+m+mi}{15}\PYG{p}{:}\PYG{l+m+mi}{56}\PYG{p}{:}\PYG{l+m+mi}{00}
\PYG{n}{Internal} \PYG{n}{name} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{SMTP}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{05}               \PYG{n}{To} \PYG{n}{associate} \PYG{k}{with} \PYG{n}{an} \PYG{n}{entry} \PYG{n}{point} \PYG{n}{name}
\PYG{n}{External} \PYG{n}{name} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{E}\PYG{o}{\PYGZhy{}}\PYG{n}{Mail}                \PYG{n}{Name} \PYG{n}{displayed} \PYG{n}{on} \PYG{n}{user} \PYG{n}{menu}
\PYG{n}{Description}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{File} \PYG{n}{transfer} \PYG{n}{by} \PYG{n}{SMTP}
\PYG{n}{Application}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{VIR0041B}              \PYG{n}{Application} \PYG{n}{to} \PYG{n}{be} \PYG{n}{called}
\PYG{n}{PassTicket}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{0} \PYG{n}{Name} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}           \PYG{l+m+mi}{0}\PYG{o}{=}\PYG{n}{no} \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{yes} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{unsigned}
\PYG{n}{Application} \PYG{n+nb}{type} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{2}                  \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{VTAM} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{VIRTEL} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{SERV} \PYG{l+m+mi}{4}\PYG{o}{=}\PYG{n}{PAGE} \PYG{l+m+mi}{5}\PYG{o}{=}\PYG{n}{LINE}
\PYG{n}{Pseudo}\PYG{o}{\PYGZhy{}}\PYG{n}{terminals} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                    \PYG{n}{Prefix} \PYG{n}{of} \PYG{n}{name} \PYG{n}{of} \PYG{n}{partner} \PYG{n}{terminals}
\PYG{n}{Logmode}          \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                    \PYG{n}{Specify} \PYG{n}{when} \PYG{n}{LOGMODE} \PYG{n}{must} \PYG{n}{be} \PYG{n}{changed}
\PYG{n}{How} \PYG{n}{started}      \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{1}                  \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{menu} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{sub}\PYG{o}{\PYGZhy{}}\PYG{n}{menu} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{auto}
\PYG{n}{Security}         \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{1}                  \PYG{l+m+mi}{0}\PYG{o}{=}\PYG{n}{none} \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{basic} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{NTLM} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{TLS} \PYG{l+m+mi}{4}\PYG{o}{=}\PYG{n}{HTML}
\PYG{n}{Translation}\PYG{p}{(}\PYG{n}{s}\PYG{p}{)}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                    \PYG{l+m+mi}{0}\PYG{o}{=}\PYG{n}{idem} \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{l+m+mi}{8040} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{l+m+mi}{8080} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{l+m+mi}{4040} \PYG{l+m+mi}{4}\PYG{o}{=}\PYG{n}{auto}
\PYG{n}{Logon} \PYG{n}{message}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}

\PYG{n}{TIOA} \PYG{n}{at} \PYG{n}{logon}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}

\PYG{n}{TIOA} \PYG{n}{at} \PYG{n}{logoff}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}

\PYG{n}{Initial} \PYG{n}{Scenario} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                   \PYG{n}{Final} \PYG{n}{Scenario}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}
\PYG{n}{Input} \PYG{n}{Scenario}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                   \PYG{n}{Output} \PYG{n}{Scenario}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}

\PYG{n}{P1}\PYG{o}{=}\PYG{n}{Update}                        \PYG{n}{P3}\PYG{o}{=}\PYG{n}{Return}                     \PYG{n}{P12}\PYG{o}{=}\PYG{n}{Server}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Transaction for file transfer by SMTP}

\index{Starting an application by E\sphinxhyphen{}Mail@\spxentry{Starting an application by E\sphinxhyphen{}Mail}!Incoming E\sphinxhyphen{}Mail Calls@\spxentry{Incoming E\sphinxhyphen{}Mail Calls}}\index{Incoming E\sphinxhyphen{}Mail Calls@\spxentry{Incoming E\sphinxhyphen{}Mail Calls}!Starting an application by E\sphinxhyphen{}Mail@\spxentry{Starting an application by E\sphinxhyphen{}Mail}}\index{Starting an application by E\sphinxhyphen{}Mail@\spxentry{Starting an application by E\sphinxhyphen{}Mail}!SMTP@\spxentry{SMTP}}\index{SMTP@\spxentry{SMTP}!Starting an application by E\sphinxhyphen{}Mail@\spxentry{Starting an application by E\sphinxhyphen{}Mail}}\ignorespaces 

\subsection{Starting an application by E\sphinxhyphen{}Mail}
\label{\detokenize{User_Guide:starting-an-application-by-e-mail}}\label{\detokenize{User_Guide:index-348}}
\sphinxAtStartPar
When an entry point is used for starting an application by e\sphinxhyphen{}mail, the application must be associated with a relay (or
pseudo\sphinxhyphen{}3270 terminal) through which the application can retrieve the contents of the e\sphinxhyphen{}mail. It is therefore necessary
to specify the name of a relay LU in the definition of the terminals attached to the SMTP line (refer to the VIRTEL
Connectivity Reference documentation for details of defining an SMTP line).

\sphinxAtStartPar
For this type of application, the entry point chosen by the rules of the SMTP line has a single VIRTEL transaction,
defined with application type 1 and integration mode 1, which calls the target VTAM application (such as CICS). The name
of the CICS transaction to be started can be specified in the “TIOA at logon” field of the VIRTEL transaction definition.

\sphinxAtStartPar
The menu program specified in the entry point must be VIR0021B.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
ENTRY POINT DETAIL DEFINITION \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} Applid: VIRTEL 16:07:14
Name          ===\PYGZgt{} SMTPCICS            Name this ENTRY POINT (LOGON DATA)
Description   ===\PYGZgt{} CICS transaction started by email
Transactions  ===\PYGZgt{} SMCICS              Prefix for associated transactions
Videotex key  ===\PYGZgt{}                     If videotex, keyword or \PYGZdl{}NONE\PYGZdl{}
Transparency  ===\PYGZgt{}                     Server types NOT to emulate
Time out      ===\PYGZgt{} 0001   minutes      Maximum inactive time
Do if timeout ===\PYGZgt{} 0                   0=logoff 1=bip+logoff 2=anti pad
Emulation     ===\PYGZgt{} EMAIL               Type of terminal:
MINITEL : 40 or 80 columns             PC  : Emulation done by VirtelPC
HTML    : Web Browser                  VT  : VT 100
EBCDIC  : not translated               X25 : uses low level dialog
Signon program           ===\PYGZgt{}          Controls user name and password
Menu program             ===\PYGZgt{} VIR0021B  List of transactions
Identification scenario  ===\PYGZgt{}          eg XML identification
Type 3 compression       ===\PYGZgt{}          Discover typical screens (Virtel/PC)
Mandatory identification ===\PYGZgt{}                               (PC or minitel)
3270 swap key            ===\PYGZgt{}          eg P24
Extended colors          ===\PYGZgt{}          E: extended X: extended + DBCS

P1=Update                       P3=Return                  P4=Transactions
Enter=Add
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Entry point for application started by SMTP}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{TRANSACTION} \PYG{n}{DETAIL} \PYG{n}{DEFINITION} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{n}{Applid}\PYG{p}{:} \PYG{n}{VIRTEL} \PYG{l+m+mi}{15}\PYG{p}{:}\PYG{l+m+mi}{56}\PYG{p}{:}\PYG{l+m+mi}{00}
\PYG{n}{Internal} \PYG{n}{name} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{SMCICS}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}              \PYG{n}{To} \PYG{n}{associate} \PYG{k}{with} \PYG{n}{an} \PYG{n}{entry} \PYG{n}{point} \PYG{n}{name}
\PYG{n}{External} \PYG{n}{name} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{MAILIN}                \PYG{n}{Name} \PYG{n}{displayed} \PYG{n}{on} \PYG{n}{user} \PYG{n}{menu}
\PYG{n}{Description}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{CICS} \PYG{n}{transaction} \PYG{n}{started} \PYG{n}{by} \PYG{n}{Email}
\PYG{n}{Application}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{SPCICST}               \PYG{n}{Application} \PYG{n}{to} \PYG{n}{be} \PYG{n}{called}
\PYG{n}{PassTicket}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{0} \PYG{n}{Name} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}           \PYG{l+m+mi}{0}\PYG{o}{=}\PYG{n}{no} \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{yes} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{unsigned}
\PYG{n}{Application} \PYG{n+nb}{type} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{1}                  \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{VTAM} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{VIRTEL} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{SERV} \PYG{l+m+mi}{4}\PYG{o}{=}\PYG{n}{PAGE} \PYG{l+m+mi}{5}\PYG{o}{=}\PYG{n}{LINE}
\PYG{n}{Pseudo}\PYG{o}{\PYGZhy{}}\PYG{n}{terminals} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                    \PYG{n}{Prefix} \PYG{n}{of} \PYG{n}{name} \PYG{n}{of} \PYG{n}{partner} \PYG{n}{terminals}
\PYG{n}{Logmode}          \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                    \PYG{n}{Specify} \PYG{n}{when} \PYG{n}{LOGMODE} \PYG{n}{must} \PYG{n}{be} \PYG{n}{changed}
\PYG{n}{How} \PYG{n}{started}      \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{1}                  \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{menu} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{sub}\PYG{o}{\PYGZhy{}}\PYG{n}{menu} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{auto}
\PYG{n}{Security}         \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{1}                  \PYG{l+m+mi}{0}\PYG{o}{=}\PYG{n}{none} \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{basic} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{NTLM} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{TLS} \PYG{l+m+mi}{4}\PYG{o}{=}\PYG{n}{HTML}
\PYG{n}{Translation}\PYG{p}{(}\PYG{n}{s}\PYG{p}{)}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                    \PYG{l+m+mi}{0}\PYG{o}{=}\PYG{n}{idem} \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{l+m+mi}{8040} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{l+m+mi}{8080} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{l+m+mi}{4040} \PYG{l+m+mi}{4}\PYG{o}{=}\PYG{n}{auto}
\PYG{n}{Logon} \PYG{n}{message}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}

\PYG{n}{TIOA} \PYG{n}{at} \PYG{n}{logon}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{MELI}

\PYG{n}{TIOA} \PYG{n}{at} \PYG{n}{logoff}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}

\PYG{n}{Initial} \PYG{n}{Scenario} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                   \PYG{n}{Final} \PYG{n}{Scenario}    \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}
\PYG{n}{Input} \PYG{n}{Scenario}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                   \PYG{n}{Output} \PYG{n}{Scenario}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}

\PYG{n}{P1}\PYG{o}{=}\PYG{n}{Update}                        \PYG{n}{P3}\PYG{o}{=}\PYG{n}{Return}                     \PYG{n}{P12}\PYG{o}{=}\PYG{n}{Server}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Transaction for application started by SMTP}

\sphinxAtStartPar
The corresponding CICS definition is shown in the example below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{DEFINE} \PYG{n}{PROFILE}\PYG{p}{(}\PYG{n}{MELPROF}\PYG{p}{)} \PYG{n}{GROUP}\PYG{p}{(}\PYG{n}{VIRTSMTP}\PYG{p}{)}
       \PYG{n}{DESCRIPTION}\PYG{p}{(}\PYG{n}{TRANSACTION} \PYG{n}{TO} \PYG{n}{PROCESS} \PYG{n}{INCOMING} \PYG{n}{EMAILS}\PYG{p}{)}
       \PYG{n}{UCTRAN}\PYG{p}{(}\PYG{n}{NO}\PYG{p}{)}
\PYG{n}{DEFINE} \PYG{n}{TRANSACTION}\PYG{p}{(}\PYG{n}{MELI}\PYG{p}{)} \PYG{n}{GROUP}\PYG{p}{(}\PYG{n}{VIRTSMTP}\PYG{p}{)}
       \PYG{n}{DESCRIPTION}\PYG{p}{(}\PYG{n}{TRANSACTION} \PYG{n}{TO} \PYG{n}{PROCESS} \PYG{n}{INCOMING} \PYG{n}{EMAILS}\PYG{p}{)}
       \PYG{n}{PROGRAM}\PYG{p}{(}\PYG{n}{SMTPMELI}\PYG{p}{)} \PYG{n}{PROFILE}\PYG{p}{(}\PYG{n}{MELPROF}\PYG{p}{)}
\PYG{n}{DEFINE} \PYG{n}{PROGRAM}\PYG{p}{(}\PYG{n}{SMTPMELI}\PYG{p}{)} \PYG{n}{GROUP}\PYG{p}{(}\PYG{n}{VIRTSMTP}\PYG{p}{)}
       \PYG{n}{DESCRIPTION}\PYG{p}{(}\PYG{n}{PROGRAM} \PYG{n}{TO} \PYG{n}{PROCESS} \PYG{n}{INCOMING} \PYG{n}{EMAILS}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{CICS definitions for application started by e\sphinxhyphen{}mail}

\sphinxAtStartPar
Note that the UCTRAN(NO) parameter must be specified both in the PROFILE and in the TYPETERM, and that the
RECEIVESIZE specified in the TYPETERM must be sufficient to contain the e\sphinxhyphen{}mail response data structured field.
One the application has been launched, it can retrieve data from the e\sphinxhyphen{}mail by sending an FAC8 code 12 structured
field to VIRTEL via the relay LU and reading the response (see {\hyperref[\detokenize{User_Guide:v462ug-email-retrieve-data}]{\sphinxcrossref{\DUrole{std,std-ref}{“Retrieve Data From An E\sphinxhyphen{}Mail”}}}}).

\newpage
\phantomsection\label{\detokenize{User_Guide:v462ug-virtel-batch}}
\index{Virtel Batch@\spxentry{Virtel Batch}}\ignorespaces 

\section{VIRTEL Batch}
\label{\detokenize{User_Guide:virtel-batch}}\label{\detokenize{User_Guide:index-349}}
\sphinxAtStartPar
The VIRTEL Batch facility allows you to run VIRTEL as a batch job to execute HTTP\sphinxhyphen{}like requests. VIRTEL reads HTTP\sphinxhyphen{}like
requests from a SYSIN dataset, executes the desired transaction, and writes an HTTP\sphinxhyphen{}like response to a SYSOUT
dataset. When all of the HTTP\sphinxhyphen{}like requests have been processed, VIRTEL terminates if requested.
VIRTEL runs as a batch job when both of the following conditions are true:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
The VIRTCT contains a BATCH1 parameter. For details, refer to “Parameters of the VIRTCT” in the VIRTEL Installation Guide manual.

\item {} 
\sphinxAtStartPar
A BATCH line is defined in the VIRTEL configuration in the VIRARBO file. For details, refer to “Definition of a BATCH line” in the VIRTEL Connectivity Reference manual.

\end{enumerate}

\sphinxAtStartPar
Before running a VIRTEL Batch job for the first time, several preparatory steps must be performed:\sphinxhyphen{}
\begin{itemize}
\item {} 
\sphinxAtStartPar
A VIRTCT for VIRTEL Batch must be assembled and link\sphinxhyphen{}edited into the VIRTEL load library

\item {} 
\sphinxAtStartPar
A configuration file (VIRARBO) for VIRTEL Batch must be built

\item {} 
\sphinxAtStartPar
A page template file (HTMLTRSF) for the VIRTEL Batch job must be allocated and loaded

\item {} 
\sphinxAtStartPar
Work files (VIRSWAP, VIRHTML) for the VIRTEL Batch job must be allocated and initialized

\end{itemize}

\sphinxAtStartPar
These preparatory steps, which in general only need to be performed once, are described in the following sections.

\index{Assembling TCT@\spxentry{Assembling TCT}!Virtel Batch@\spxentry{Virtel Batch}}\index{Virtel Batch@\spxentry{Virtel Batch}!Assembling TCT@\spxentry{Assembling TCT}}\ignorespaces 

\subsection{Assembling the VIRTCT for VIRTEL Batch}
\label{\detokenize{User_Guide:assembling-the-virtct-for-virtel-batch}}\label{\detokenize{User_Guide:index-350}}
\sphinxAtStartPar
VIRTEL Batch requires a special VIRTCT which must be assembled and link\sphinxhyphen{}edited into the VIRTEL load library. The
figure below shows SAMPLIB member VIRTCTBA, which is an example VIRTCT suitable for running VIRTEL Batch. The
job ASMTCT in the VIRTEL SAMPLIB should be run once to assemble and link\sphinxhyphen{}edit this module as VIRTCTBA in the
VIRTEL load library:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
     \PYG{n}{VIRTCTBA} \PYG{n}{TITLE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VIRTCT FOR VIRTEL BATCH}\PYG{l+s+s1}{\PYGZsq{}}
     \PYG{n}{PRINT} \PYG{n}{GEN}
     \PYG{n}{VIRTERM} \PYG{n}{TYPE}\PYG{o}{=}\PYG{n}{INITIAL}\PYG{p}{,}\PYG{n}{APPLID}\PYG{o}{=}\PYG{o}{*}\PYG{n}{NOAPPL}\PYG{o}{*}\PYG{p}{,}                             \PYG{o}{*}
         \PYG{n}{BATCH1}\PYG{o}{=}\PYG{p}{(}\PYG{n}{SYSIN}\PYG{p}{,}\PYG{n}{DCBI1}\PYG{p}{,}\PYG{n}{SYSPRINT}\PYG{p}{,}\PYG{n}{DCBO1}\PYG{p}{)}\PYG{p}{,}                          \PYG{o}{*}
         \PYG{n}{VIRSV1}\PYG{o}{=}\PYG{p}{(}\PYG{n}{VIRSV}\PYG{p}{)}\PYG{p}{,}                                               \PYG{o}{*}
         \PYG{n}{HTVSAM}\PYG{o}{=}\PYG{n}{VIRHTML}\PYG{p}{,}                                               \PYG{o}{*}
         \PYG{n}{BUFSIZE}\PYG{o}{=}\PYG{l+m+mi}{16000}\PYG{p}{,}                                                \PYG{o}{*}
         \PYG{n}{STATS}\PYG{o}{=}\PYG{n}{NO}\PYG{p}{,}                                                     \PYG{o}{*}
         \PYG{n}{UFILE1}\PYG{o}{=}\PYG{p}{(}\PYG{n}{HTMLTRSF}\PYG{p}{,}\PYG{n}{ACBH1}\PYG{p}{,}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{l+m+mi}{10}\PYG{p}{,}\PYG{l+m+mi}{01}\PYG{p}{)}\PYG{p}{,}                              \PYG{o}{*}
         \PYG{n}{MEMORY}\PYG{o}{=}\PYG{n}{ABOVE}\PYG{p}{,}                                                 \PYG{o}{*}
         \PYG{n}{COMPANY}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{YOUR COMPANY NAME}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                                  \PYG{o}{*}
         \PYG{n}{ADDR1}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{YOUR COMPANY ADDRESS}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                                 \PYG{o}{*}
         \PYG{n}{ADDR2}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{YOUR COMPANY ADDRESS}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                                 \PYG{o}{*}
         \PYG{n}{LICENCE}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{YOUR LICENCE ID}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}                                    \PYG{o}{*}
         \PYG{n}{EXPIRE}\PYG{o}{=}\PYG{p}{(}\PYG{l+m+mi}{2008}\PYG{p}{,}\PYG{l+m+mi}{12}\PYG{p}{,}\PYG{l+m+mi}{31}\PYG{p}{)}\PYG{p}{,}                                          \PYG{o}{*}
         \PYG{n}{CODE}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{00000000}\PYG{l+s+s1}{\PYGZsq{}}
         \PYG{n}{TITRE1}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VIRTEL BATCH}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{o}{*}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{n}{ACBH1}    \PYG{n}{ACB} \PYG{n}{AM}\PYG{o}{=}\PYG{n}{VSAM}\PYG{p}{,}\PYG{n}{DDNAME}\PYG{o}{=}\PYG{n}{HTMLTRSF}\PYG{p}{,}\PYG{n}{MACRF}\PYG{o}{=}\PYG{p}{(}\PYG{n}{SEQ}\PYG{p}{,}\PYG{n}{DIR}\PYG{p}{,}\PYG{n}{OUT}\PYG{p}{,}\PYG{n}{LSR}\PYG{p}{)}\PYG{p}{,}          \PYG{o}{*}
         \PYG{n}{STRNO}\PYG{o}{=}\PYG{l+m+mi}{3}
\PYG{o}{*}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{n}{DCBI1}    \PYG{n}{DCB} \PYG{n}{DDNAME}\PYG{o}{=}\PYG{n}{SYSIN}\PYG{p}{,}             \PYG{n}{SYSIN} \PYG{n}{DD}                        \PYG{o}{*}
         \PYG{n}{DCBE}\PYG{o}{=}\PYG{n}{DCBI1X}\PYG{p}{,}                                                  \PYG{o}{*}
         \PYG{n}{LRECL}\PYG{o}{=}\PYG{l+m+mi}{80}\PYG{p}{,}                                                     \PYG{o}{*}
         \PYG{n}{DSORG}\PYG{o}{=}\PYG{n}{PS}\PYG{p}{,}                                                     \PYG{o}{*}
         \PYG{n}{RECFM}\PYG{o}{=}\PYG{n}{FB}\PYG{p}{,}                                                     \PYG{o}{*}
         \PYG{n}{MACRF}\PYG{o}{=}\PYG{p}{(}\PYG{n}{GL}\PYG{p}{)}
 \PYG{n}{DCBI1X}  \PYG{n}{DCBE} \PYG{n}{EODAD}\PYG{o}{=}\PYG{l+m+mi}{0}\PYG{p}{,}\PYG{n}{RMODE31}\PYG{o}{=}\PYG{n}{BUFF}
 \PYG{o}{*}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{*}
 \PYG{n}{DCBO1}   \PYG{n}{DCB} \PYG{n}{DDNAME}\PYG{o}{=}\PYG{n}{SYSPRINT}\PYG{p}{,} \PYG{n}{SYSPRINT} \PYG{n}{DD}                               \PYG{o}{*}
         \PYG{n}{DCBE}\PYG{o}{=}\PYG{n}{DCBO1X}\PYG{p}{,}                                                   \PYG{o}{*}
         \PYG{n}{LRECL}\PYG{o}{=}\PYG{l+m+mi}{133}\PYG{p}{,}                                                     \PYG{o}{*}
         \PYG{n}{DSORG}\PYG{o}{=}\PYG{n}{PS}\PYG{p}{,}                                                      \PYG{o}{*}
         \PYG{n}{RECFM}\PYG{o}{=}\PYG{n}{FBA}\PYG{p}{,}                                                     \PYG{o}{*}
         \PYG{n}{MACRF}\PYG{o}{=}\PYG{p}{(}\PYG{n}{PM}\PYG{p}{)}
 \PYG{n}{DCBO1X}  \PYG{n}{DCBE} \PYG{n}{RMODE31}\PYG{o}{=}\PYG{n}{BUFF}
 \PYG{o}{*}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{*}
         \PYG{n}{END}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example VIRTCT for VIRTEL Batch}

\sphinxAtStartPar
\sphinxstyleemphasis{1.22.1.2. Building the configuration file for VIRTEL Batch}

\sphinxAtStartPar
VIRTEL Batch requires its own configuration file (VIRARBO) which defines a Batch Line, the page template dataset, a
Batch Entry Point, and the Transactions which will be executed by the VIRTEL Batch job. The figure below shows SAMPLIB member VIRBATAR, which is an example of a job to create the VIRARBO file for use by VIRTEL Batch. This job should be run once before the first execution of a VIRTEL Batch job:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
//VIRBATAR JOB 1,VIRBATAR,CLASS=A,MSGCLASS=X,NOTIFY=\PYGZam{}SYSUID
// SET LOADLIB=yourqual.VIRTnnn.LOADLIB
//DEFINE EXEC PGM=IDCAMS
//SYSPRINT DD SYSOUT=*
    DELETE (yourqual.VIRBATCH.ARBO) CLUSTER PURGE
    SET MAXCC = 0
    DEFINE CLUSTER(NAME(yourqual.VIRBATCH.ARBO) \PYGZhy{}
        KEYS(9 0) RECSZ(100 4089) FSPC(10 10) \PYGZhy{}
        VOL(XXXXXX) REC(250,50) SHR(2) SPEED) \PYGZhy{}
    DATA(NAME(yourqual.VIRBATCH.ARBO.DATA) CISZ(4096)) \PYGZhy{}
    INDEX(NAME(yourqual.VIRBATCH.ARBO.INDEX))
//CONFIG EXEC PGM=VIRCONF,COND=(0,NE),PARM=\PYGZsq{}LOAD,LANG=\PYGZam{}LANG\PYGZsq{}
//STEPLIB DD DSN=\PYGZam{}LOADLIB,DISP=SHR
//SYSPRINT DD SYSOUT=*
//VIRARBO DD DSN=yourqual.VIRBATCH.ARBO,DISP=SHR
    LINE ID=B\PYGZhy{}BT1,NAME=BATCH\PYGZhy{}L1,
        DESC=\PYGZsq{}VIRTEL Batch line\PYGZsq{},
        TYPE=BATCH1,ENTRY=EPBATCH,TERMINAL=BT,RETRY=2,
        INOUT=1,PROTOCOL=VIRHTTP,RULESET=B\PYGZhy{}BT1
    TERMINAL ID=BTLOC000,
        DESC=\PYGZsq{}VIRTEL Batch terminals (no relay)\PYGZsq{},
        TYPE=3,COMPRESS=2,INOUT=3,STATS=12,REPEAT=4
    TERMINAL ID=BTVTA000,RELAY=*HTTPOOL,
        DESC=\PYGZsq{}VIRTEL Batch terminals (with relay)\PYGZsq{},
        TYPE=3,COMPRESS=2,INOUT=3,STATS=12,REPEAT=4
    TERMINAL ID=BTVTP000,RELAY=RVIRBT00,POOL=*HTTPOOL,
        DESC=\PYGZsq{}Relay pool for HTTP\PYGZsq{},
        TYPE=3,COMPRESS=2,INOUT=3,STATS=12,REPEAT=4
    SUBDIR ID=W2H\PYGZhy{}DIR,
        DESC=\PYGZsq{}Pages for WEB2HOST\PYGZsq{},
        FSTYPE=V,DDNAME=HTMLTRSF,KEY=W2H\PYGZhy{}KEY,
        NAMELEN=64,AUTHUP=X,AUTHDOWN=X,AUTHDEL=X
    ENTRY ID=EPBATCH,
        DESC=\PYGZsq{}VIRTEL Batch entry point\PYGZsq{},
        TRANSACT=BAT,TIMEOUT=1,ACTION=0,EXTCOLOR=X,
        EMUL=HTML,SIGNON=VIR0020H,MENU=VIR0021A
    TRANSACT ID=BAT\PYGZhy{}00,NAME=EPBATCH,
         DESC=\PYGZsq{}Default directory = entry point name\PYGZsq{},
        APPL=W2H\PYGZhy{}DIR,TYPE=4,
        TERMINAL=BTLOC,integration=2,SECURITY=0
    TRANSACT ID=BAT\PYGZhy{}14,NAME=\PYGZsq{}Protide\PYGZsq{},
        DESC=\PYGZsq{}XML conversion\PYGZsq{},
        APPL=\PYGZdl{}NONE\PYGZdl{},TYPE=2,
        TERMINAL=BTLOC,integration=1,SECURITY=0,
        TIOASTA=\PYGZsq{}\PYGZam{}/S OK \PYGZam{}/T\PYGZsq{},
        EXITSTA=SCENSVIO
* END OF CONFIGURATION
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Job to build configuration file for VIRTEL Batch}

\index{Page Template File@\spxentry{Page Template File}!Virtel Batch@\spxentry{Virtel Batch}}\index{Virtel Batch@\spxentry{Virtel Batch}!Page Template File@\spxentry{Page Template File}}\ignorespaces 

\subsection{Allocating the page template file for VIRTEL Batch}
\label{\detokenize{User_Guide:allocating-the-page-template-file-for-virtel-batch}}\label{\detokenize{User_Guide:index-351}}
\sphinxAtStartPar
Each VIRTEL Batch job requires an HTMLTRSF file which contains the page templates used by the transactions which
will be executed by the VIRTEL Batch job. The figure below shows SAMPLIB member VIRBATAT, which is an example job
to allocate the HTMLTRSF file and to copy the page templates from the sample file (SAMPTRSF) distributed with
VIRTEL. This job should be run once before the first execution of a VIRTEL Batch job:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{/}\PYG{n}{VIRBATAT} \PYG{n}{JOB} \PYG{l+m+mi}{1}\PYG{p}{,}\PYG{n}{VIRBATAT}\PYG{p}{,}\PYG{n}{CLASS}\PYG{o}{=}\PYG{n}{A}\PYG{p}{,}\PYG{n}{MSGCLASS}\PYG{o}{=}\PYG{n}{X}\PYG{p}{,}\PYG{n}{NOTIFY}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{SYSUID}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*} \PYG{n}{DEFINITION} \PYG{n}{OF} \PYG{n}{FILE} \PYG{n}{HTMLTRSF} \PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SAMPTRF} \PYG{n}{EXEC} \PYG{n}{PGM}\PYG{o}{=}\PYG{n}{IDCAMS}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSPRINT} \PYG{n}{DD} \PYG{n}{SYSOUT}\PYG{o}{=}\PYG{o}{*}
    \PYG{n}{DELETE} \PYG{p}{(}\PYG{n}{yourqual}\PYG{o}{.}\PYG{n}{VIRBATCH}\PYG{o}{.}\PYG{n}{HTMLTRSF}\PYG{p}{)} \PYG{n}{CLUSTER} \PYG{n}{PURGE}
    \PYG{n}{SET} \PYG{n}{MAXCC} \PYG{o}{=} \PYG{l+m+mi}{0}
    \PYG{n}{DEFINE} \PYG{n}{CLUSTER} \PYG{p}{(}\PYG{n}{NAME}\PYG{p}{(}\PYG{n}{yourqual}\PYG{o}{.}\PYG{n}{VIRBATCH}\PYG{o}{.}\PYG{n}{HTMLTRSF}\PYG{p}{)} \PYG{o}{\PYGZhy{}}
        \PYG{n}{VOL}\PYG{p}{(}\PYG{n}{XXXXXX}\PYG{p}{)} \PYG{n}{SHR}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{)} \PYG{n}{KEYS}\PYG{p}{(}\PYG{l+m+mi}{16} \PYG{l+m+mi}{0}\PYG{p}{)} \PYG{n}{RECSZ}\PYG{p}{(}\PYG{l+m+mi}{100} \PYG{l+m+mi}{32758}\PYG{p}{)} \PYG{n}{REC}\PYG{p}{(}\PYG{l+m+mi}{250} \PYG{l+m+mi}{100}\PYG{p}{)}\PYG{p}{)} \PYG{o}{\PYGZhy{}}
    \PYG{n}{DATA} \PYG{p}{(}\PYG{n}{NAME}\PYG{p}{(}\PYG{n}{yourqual}\PYG{o}{.}\PYG{n}{VIRBATCH}\PYG{o}{.}\PYG{n}{HTMLTRSF}\PYG{o}{.}\PYG{n}{DATA}\PYG{p}{)} \PYG{n}{SPANNED} \PYG{n}{CISZ}\PYG{p}{(}\PYG{l+m+mi}{4096}\PYG{p}{)}\PYG{p}{)} \PYG{o}{\PYGZhy{}}
    \PYG{n}{INDEX} \PYG{p}{(}\PYG{n}{NAME}\PYG{p}{(}\PYG{n}{yourqual}\PYG{o}{.}\PYG{n}{VIRBATCH}\PYG{o}{.}\PYG{n}{HTMLTRSF}\PYG{o}{.}\PYG{n}{INDEX}\PYG{p}{)} \PYG{n}{CISZ}\PYG{p}{(}\PYG{l+m+mi}{512}\PYG{p}{)}\PYG{p}{)}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*} \PYG{n}{INITIALISATION} \PYG{n}{OF} \PYG{n}{FILE} \PYG{n}{HTMLTRSF} \PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SAMPTRF} \PYG{n}{EXEC} \PYG{n}{PGM}\PYG{o}{=}\PYG{n}{IDCAMS}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSPRINT} \PYG{n}{DD} \PYG{n}{SYSOUT}\PYG{o}{=}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SAMPTRSF} \PYG{n}{DD} \PYG{n}{DSN}\PYG{o}{=}\PYG{n}{yourqual}\PYG{o}{.}\PYG{n}{VIRTnnn}\PYG{o}{.}\PYG{n}{SAMP}\PYG{o}{.}\PYG{n}{TRSF}\PYG{p}{,}\PYG{n}{DISP}\PYG{o}{=}\PYG{n}{SHR}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{HTMLTRSF} \PYG{n}{DD} \PYG{n}{DSN}\PYG{o}{=}\PYG{n}{yourqual}\PYG{o}{.}\PYG{n}{VIRBATCH}\PYG{o}{.}\PYG{n}{HTMLTRSF}\PYG{p}{,}\PYG{n}{DISP}\PYG{o}{=}\PYG{n}{OLD}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSIN} \PYG{n}{DD} \PYG{o}{*}
    \PYG{n}{REPRO} \PYG{n}{INFILE}\PYG{p}{(}\PYG{n}{SAMPTRSF}\PYG{p}{)} \PYG{n}{OUTFILE}\PYG{p}{(}\PYG{n}{HTMLTRSF}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Job to allocate page template file for VIRTEL Batch}

\index{Allocating work files@\spxentry{Allocating work files}!Virtel Batch@\spxentry{Virtel Batch}}\index{Virtel Batch@\spxentry{Virtel Batch}!Allocating work files@\spxentry{Allocating work files}}\ignorespaces 

\subsection{Allocating work files for VIRTEL Batch}
\label{\detokenize{User_Guide:allocating-work-files-for-virtel-batch}}\label{\detokenize{User_Guide:index-352}}
\sphinxAtStartPar
Each VIRTEL Batch job requires its own VIRSWAP and VIRHTML files. The figure below shows SAMPLIB member
VIRBATAW, which is an example job to allocate these files:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
//VIRBATAW JOB 1,VIRBATAW,CLASS=A,MSGCLASS=X,NOTIFY=\PYGZam{}SYSUID
//*\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}*
//* DEFINITION OF FILES VIRSWAP AND VIRHTML *
//*\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}*
//VIRWORK EXEC PGM=IDCAMS
//SYSPRINT DD SYSOUT=*
    DELETE (yourqual.VIRBATCH.SWAP) CLUSTER PURGE
    DELETE (yourqual.VIRBATCH.HTML) CLUSTER PURGE
    SET MAXCC = 0
    DEFINE CLUSTER (NAME(yourqual.VIRBATCH.SWAP) \PYGZhy{}
        VOL(XXXXXX) KEYS(16 0) REC(10,5) RECSZ(100 8185) \PYGZhy{}
        REUSE FSPC(10 10) SHR(2) SPEED) \PYGZhy{}
    DATA (NAME(yourqual.VIRBATCH.SWAP.DATA) CISZ(8192)) \PYGZhy{}
    INDEX (NAME(yourqual.VIRBATCH.SWAP.INDEX))
    DEFINE CLUSTER (NAME(yourqual.VIRBATCH.HTML) \PYGZhy{}
        VOL(XXXXXX) KEYS(64 0) REC(5 5) RECSZ(1000 4089) \PYGZhy{}
        FSPC(10 10) SHR(2) SPEED) \PYGZhy{}
    DATA (NAME(yourqual.VIRBATCH.HTML.DATA) CISZ(4096)) \PYGZhy{}
    INDEX (NAME(yourqual.VIRBATCH.HTML.INDEX))
//*\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}*
//* INITIALISATION OF FILE VIRHTML *
//*\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}*
//INIHTML EXEC PGM=IDCAMS
//SYSPRINT DD SYSOUT=*
//INIT DD DATA,DLM=AA
    \PYGZdl{}\PYGZdl{}\PYGZdl{}\PYGZdl{}IWS.WORKREC.INW\PYGZdl{}TEMP
    AA
//VIRHTML DD DSN=yourqual.VIRBATCH.HTML,DISP=OLD
    REPRO INFILE(INIT) OUTFILE(VIRHTML)
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Job to allocate work files for VIRTEL Batch}

\index{Running the VIRTEL batch job@\spxentry{Running the VIRTEL batch job}!Virtel Batch@\spxentry{Virtel Batch}}\index{Virtel Batch@\spxentry{Virtel Batch}!Running the VIRTEL batch job@\spxentry{Running the VIRTEL batch job}}\ignorespaces 

\subsection{Running the VIRTEL Batch job}
\label{\detokenize{User_Guide:running-the-virtel-batch-job}}\label{\detokenize{User_Guide:index-353}}
\sphinxAtStartPar
The figure below shows SAMPLIB member VIRBATCH, which contains an example of a VIRTEL Batch job:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{/}\PYG{n}{VIRBATCH} \PYG{n}{JOB} \PYG{l+m+mi}{1}\PYG{p}{,}\PYG{n}{VIRBATCH}\PYG{p}{,}\PYG{n}{CLASS}\PYG{o}{=}\PYG{n}{G}\PYG{p}{,}\PYG{n}{MSGCLASS}\PYG{o}{=}\PYG{n}{X}\PYG{p}{,}\PYG{n}{NOTIFY}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{SYSUID}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{SET} \PYG{n}{TCT}\PYG{o}{=}\PYG{n}{BA}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{SET} \PYG{n}{QUAL1}\PYG{o}{=}\PYG{n}{yourqual}\PYG{o}{.}\PYG{n}{VIRT462}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{SET} \PYG{n}{QUAL2}\PYG{o}{=}\PYG{n}{yourqual}\PYG{o}{.}\PYG{n}{VIRBATCH}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{VIRBAT}   \PYG{n}{EXEC} \PYG{n}{PGM}\PYG{o}{=}\PYG{n}{VIR0000}\PYG{p}{,}\PYG{n}{REGION}\PYG{o}{=}\PYG{l+m+mi}{64}\PYG{n}{M}\PYG{p}{,}\PYG{n}{PARM}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{TCT}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{STEPLIB}  \PYG{n}{DD} \PYG{n}{DISP}\PYG{o}{=}\PYG{n}{SHR}\PYG{p}{,}\PYG{n}{DSN}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{QUAL1}\PYG{o}{.}\PYG{o}{.}\PYG{n}{LOADLIB}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{DFHRPL}   \PYG{n}{DD} \PYG{n}{DISP}\PYG{o}{=}\PYG{n}{SHR}\PYG{p}{,}\PYG{n}{DSN}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{QUAL1}\PYG{o}{.}\PYG{o}{.}\PYG{n}{LOADLIB}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SERVLIB}  \PYG{n}{DD} \PYG{n}{DISP}\PYG{o}{=}\PYG{n}{SHR}\PYG{p}{,}\PYG{n}{DSN}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{QUAL1}\PYG{o}{.}\PYG{o}{.}\PYG{n}{LOADLIB}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{VIRARBO}  \PYG{n}{DD} \PYG{n}{DISP}\PYG{o}{=}\PYG{n}{OLD}\PYG{p}{,}\PYG{n}{DSN}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{QUAL2}\PYG{o}{.}\PYG{o}{.}\PYG{n}{ARBO}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{VIRSWAP}  \PYG{n}{DD} \PYG{n}{DISP}\PYG{o}{=}\PYG{n}{OLD}\PYG{p}{,}\PYG{n}{DSN}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{QUAL2}\PYG{o}{.}\PYG{o}{.}\PYG{n}{SWAP}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{VIRHTML}  \PYG{n}{DD} \PYG{n}{DISP}\PYG{o}{=}\PYG{n}{OLD}\PYG{p}{,}\PYG{n}{DSN}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{QUAL2}\PYG{o}{.}\PYG{o}{.}\PYG{n}{HTML}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{HTMLTRSF} \PYG{n}{DD} \PYG{n}{DISP}\PYG{o}{=}\PYG{n}{OLD}\PYG{p}{,}\PYG{n}{DSN}\PYG{o}{=}\PYG{o}{\PYGZam{}}\PYG{n}{QUAL2}\PYG{o}{.}\PYG{o}{.}\PYG{n}{HTMLTRSF}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSIN} \PYG{n}{DD} \PYG{o}{*}
    \PYG{p}{(}\PYG{n}{commands} \PYG{o+ow}{and} \PYG{n}{data} \PYG{n}{statements}\PYG{p}{,} \PYG{n}{see} \PYG{n}{below}\PYG{p}{)}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{SYSPRINT} \PYG{n}{DD} \PYG{n}{SYSOUT}\PYG{o}{=}\PYG{o}{*}
\PYG{o}{/}\PYG{o}{/}\PYG{n}{VIRLOG} \PYG{n}{DD} \PYG{n}{SYSOUT}\PYG{o}{=}\PYG{o}{*}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example JCL for VIRTEL Batch}

\sphinxAtStartPar
The SYSIN file contains commands and data statements. The following commands are valid in the SYSIN file:
\begin{description}
\sphinxlineitem{.GET}
\sphinxAtStartPar
indicates the start of an HTTP GET command

\sphinxlineitem{.POST}
\sphinxAtStartPar
indicates the start of an HTTP POST command

\sphinxlineitem{.RAW}
\sphinxAtStartPar
indicates the start of a raw HTTP request command

\sphinxlineitem{.END}
\sphinxAtStartPar
indicates the end of a GET, POST, or RAW command

\sphinxlineitem{.EOJ}
\sphinxAtStartPar
causes VIRTEL to terminate

\end{description}

\index{Commands@\spxentry{Commands}!Virtel Batch@\spxentry{Virtel Batch}}\index{Virtel Batch@\spxentry{Virtel Batch}!Commands@\spxentry{Commands}}\ignorespaces 
\sphinxAtStartPar
These commands are described in the following sections.

\index{VIRTEL Batch Commands@\spxentry{VIRTEL Batch Commands}!Virtel Batch@\spxentry{Virtel Batch}}\index{Virtel Batch@\spxentry{Virtel Batch}!VIRTEL Batch Commands@\spxentry{VIRTEL Batch Commands}}\ignorespaces 

\subsection{VIRTEL Batch commands}
\label{\detokenize{User_Guide:virtel-batch-commands}}\label{\detokenize{User_Guide:index-355}}
\index{GET Command@\spxentry{GET Command}!Virtel Batch@\spxentry{Virtel Batch}}\index{Virtel Batch@\spxentry{Virtel Batch}!GET Command@\spxentry{GET Command}}\index{GET Command@\spxentry{GET Command}!Virtel Batch Commands@\spxentry{Virtel Batch Commands}}\index{Virtel Batch Commands@\spxentry{Virtel Batch Commands}!GET Command@\spxentry{GET Command}}\ignorespaces 

\subsubsection{VIRTEL Batch GET command}
\label{\detokenize{User_Guide:virtel-batch-get-command}}\label{\detokenize{User_Guide:index-356}}
\sphinxAtStartPar
The following figure shows an example SYSIN file containing two GET commands:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{.}\PYG{n}{GET}
\PYG{o}{/}\PYG{n}{protide}\PYG{o}{.}\PYG{n}{htm}\PYG{o}{+}\PYG{n}{protide} \PYG{n}{VIRTEL} \PYG{n}{transaction} \PYG{n}{name}
\PYG{n}{schema}\PYG{o}{=}\PYG{n}{TCC} \PYG{n}{Schema} \PYG{n}{name}
\PYG{o+ow}{in}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{TCC.DATA}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{Input} \PYG{n}{dataset} \PYG{n}{name}
\PYG{n}{out}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{TCC.XML}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{Output} \PYG{n}{dataset} \PYG{n}{name}
\PYG{n}{mode}\PYG{o}{=}\PYG{n}{wb}\PYG{p}{,}\PYG{n}{recfm}\PYG{o}{=}\PYG{n}{vb}\PYG{p}{,}\PYG{n}{lrecl}\PYG{o}{=}\PYG{l+m+mi}{512}\PYG{p}{,}\PYG{n}{space}\PYG{o}{=}\PYG{p}{(}\PYG{n}{cyl}\PYG{p}{,}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{,}\PYG{l+m+mi}{5}\PYG{p}{)}\PYG{p}{)} \PYG{n}{Output} \PYG{n}{file} \PYG{n}{attributes}
\PYG{n}{output\PYGZus{}encoding}\PYG{o}{=}\PYG{n}{U} \PYG{n}{Output} \PYG{n}{encoding} \PYG{n}{U} \PYG{o+ow}{or} \PYG{n}{E}
 \PYG{o}{.}\PYG{n}{END}
 \PYG{o}{.}\PYG{n}{GET}
\PYG{o}{/}\PYG{n}{protide}\PYG{o}{.}\PYG{n}{htm}\PYG{o}{+}\PYG{n}{protide} \PYG{n}{VIRTEL} \PYG{n}{transaction} \PYG{n}{name}
\PYG{n}{schema}\PYG{o}{=}\PYG{n}{CRPR} \PYG{n}{Schema} \PYG{n}{name}
\PYG{o+ow}{in}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{CRPR.XML}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{Input} \PYG{n}{dataset} \PYG{n}{name}
\PYG{n}{out}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{CRPR.DATA}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{Output} \PYG{n}{dataset} \PYG{n}{name}
\PYG{n}{mode}\PYG{o}{=}\PYG{n}{wb}\PYG{p}{,}\PYG{n}{recfm}\PYG{o}{=}\PYG{n}{fb}\PYG{p}{,}\PYG{n}{lrecl}\PYG{o}{=}\PYG{l+m+mi}{200} \PYG{n}{Output} \PYG{n}{file} \PYG{n}{attributes}
\PYG{n}{input\PYGZus{}encoding}\PYG{o}{=}\PYG{n}{U} \PYG{n}{Input} \PYG{n}{encoding} \PYG{n}{U} \PYG{o+ow}{or} \PYG{n}{E}
 \PYG{o}{.}\PYG{n}{END}
 \PYG{o}{.}\PYG{n}{EOJ}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example VIRTEL Batch GET commands}

\sphinxAtStartPar
Each .GET command is followed by one or more data statements.

\sphinxAtStartPar
The first statement following the .GET command is the VIRTEL URL of the HTTP request (see {\hyperref[\detokenize{User_Guide:v462ug-url-formats}]{\sphinxcrossref{\DUrole{std,std-ref}{“Virtel URL formats”}}}}). Only the pathname, pagename, and tranname parts of the URL are required. The \sphinxurl{http://ipaddr:port} part of the URL must be omitted.

\sphinxAtStartPar
All subsequent statements (if any) following the .GET command are appended to the URL as query parameters. To
conform with standard HTTP query syntax, VIRTEL adds a “?” before the first parameter and a “\&” before each
subsequent parameter. Thus, in the above example, VIRTEL generates two HTTP requests:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
GET /protide.htm+protide?
schema=TCC\PYGZam{}in=\PYGZsq{}TCC.DATA\PYGZsq{}\PYGZam{}out=\PYGZsq{}TCC.XML\PYGZsq{}\PYGZam{}mode=wb,recfm=vb,lrecl=512,
space=(cyl,(10,5))\PYGZam{}output\PYGZus{}encoding=U HTTP/1.1
GET /protide.htm+protide?schema=CRPR\PYGZam{}in=\PYGZsq{}CRPR.XML\PYGZsq{}\PYGZam{}out=\PYGZsq{}CRPR.DATA\PYGZsq{}\PYGZam{}mode=wb,
recfm=fb,lrecl=200\PYGZam{}input\PYGZus{}encoding=U HTTP/1.1
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example VIRTEL Batch GET requests}

\index{POST Command@\spxentry{POST Command}!Virtel Batch@\spxentry{Virtel Batch}}\index{Virtel Batch@\spxentry{Virtel Batch}!POST Command@\spxentry{POST Command}}\index{POST Command@\spxentry{POST Command}!Virtel Batch Commands@\spxentry{Virtel Batch Commands}}\index{Virtel Batch Commands@\spxentry{Virtel Batch Commands}!POST Command@\spxentry{POST Command}}\ignorespaces 

\subsubsection{VIRTEL Batch POST command}
\label{\detokenize{User_Guide:virtel-batch-post-command}}\label{\detokenize{User_Guide:index-357}}
\sphinxAtStartPar
The following figure shows an example SYSIN file containing a POST command followed by XML data:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
.POST text/xml
/xmldemo.xml+tran3
\PYGZlt{}?xml version=\PYGZdq{}1.0\PYGZdq{} ?\PYGZgt{}
\PYGZlt{}methodCall\PYGZgt{}
    \PYGZlt{}screenname\PYGZgt{}T000\PYGZhy{}GAL\PYGZlt{}/screenname\PYGZgt{}
    \PYGZlt{}screentype\PYGZgt{}3270\PYGZlt{}/screentype\PYGZgt{}
    \PYGZlt{}params\PYGZgt{}
        \PYGZlt{}fieldname\PYGZgt{}FIELD001\PYGZlt{}/fieldname\PYGZgt{}
        \PYGZlt{}uinput\PYGZgt{}A\PYGZlt{}/uinput\PYGZgt{}
    \PYGZlt{}/params\PYGZgt{}
\PYGZlt{}/methodCall\PYGZgt{}
.END
.EOJ
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example VIRTEL Batch POST command}

\sphinxAtStartPar
Each .POST command is followed by two or more data statements containing the URL and the request body.

\sphinxAtStartPar
The first statement following the .POST command is the VIRTEL URL of the HTTP request (see {\hyperref[\detokenize{User_Guide:v462ug-url-formats}]{\sphinxcrossref{\DUrole{std,std-ref}{“Virtel URL formats”}}}}). Only the pathname, pagename, and tranname parts of the URL are required. The \sphinxurl{http://ipaddr:port} part of the URL must be omitted.

\sphinxAtStartPar
All subsequent statements following the .POST command are considered to be the request body. VIRTEL automatically
generates a Content\sphinxhyphen{}length: header corresponding to the size of the request body. VIRTEL also adds a Content\sphinxhyphen{}type:
header if the content type is specified as an operand of the .POST command as shown in the example. Thus, in the
above example, VIRTEL generates the following HTTP request:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
POST /xmldemo.xml+tran3 HTTP/1.1
Content\PYGZhy{}Length: 00000201
Content\PYGZhy{}Type: text/xml
Special: GIVE\PYGZhy{}LENGTH\PYGZhy{}PREFIX
\PYGZlt{}?xml version=\PYGZdq{}1.0\PYGZdq{} ?\PYGZgt{}
\PYGZlt{}methodCall\PYGZgt{}
\PYGZlt{}screenname\PYGZgt{}T000\PYGZhy{}GAL\PYGZlt{}/screenname\PYGZgt{}
\PYGZlt{}screentype\PYGZgt{}3270\PYGZlt{}/screentype\PYGZgt{}
\PYGZlt{}params\PYGZgt{}
\PYGZlt{}fieldname\PYGZgt{}FIELD001\PYGZlt{}/fieldname\PYGZgt{}
\PYGZlt{}uinput\PYGZgt{}A\PYGZlt{}/uinput\PYGZgt{}
\PYGZlt{}/params\PYGZgt{}
\PYGZlt{}/methodCall\PYGZgt{}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example VIRTEL Batch POST request}

\index{RAW Command@\spxentry{RAW Command}!Virtel Batch@\spxentry{Virtel Batch}}\index{Virtel Batch@\spxentry{Virtel Batch}!RAW Command@\spxentry{RAW Command}}\ignorespaces 
\index{RAW Command@\spxentry{RAW Command}!Virtel Batch@\spxentry{Virtel Batch}}\index{Virtel Batch@\spxentry{Virtel Batch}!RAW Command@\spxentry{RAW Command}}\index{RAW Command@\spxentry{RAW Command}!Virtel Batch Commands@\spxentry{Virtel Batch Commands}}\index{Virtel Batch Commands@\spxentry{Virtel Batch Commands}!RAW Command@\spxentry{RAW Command}}\ignorespaces 

\subsection{VIRTEL Batch RAW command}
\label{\detokenize{User_Guide:virtel-batch-raw-command}}\label{\detokenize{User_Guide:index-359}}
\sphinxAtStartPar
The following figure shows an example SYSIN file containing a RAW command followed by HTTP request data:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{.}\PYG{n}{RAW}
\PYG{n}{POST} \PYG{o}{/}\PYG{n}{virmsg}\PYG{o}{.}\PYG{n}{txt}\PYG{o}{+}\PYG{n}{uplw2h} \PYG{n}{HTTP}\PYG{o}{/}\PYG{l+m+mf}{1.1}
\PYG{n}{Content}\PYG{o}{\PYGZhy{}}\PYG{n}{Type}\PYG{p}{:} \PYG{n}{multipart}\PYG{o}{/}\PYG{n}{form}\PYG{o}{\PYGZhy{}}\PYG{n}{data}\PYG{p}{;} \PYG{n}{boundary}\PYG{o}{=}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{9503744825200}
\PYG{n}{Content}\PYG{o}{\PYGZhy{}}\PYG{n}{Length}\PYG{p}{:} \PYG{l+m+mi}{227}
\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{9503744825200}
\PYG{n}{Content}\PYG{o}{\PYGZhy{}}\PYG{n}{Disposition}\PYG{p}{:} \PYG{n}{form}\PYG{o}{\PYGZhy{}}\PYG{n}{data}\PYG{p}{;} \PYG{n}{name}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{file}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{;} \PYG{n}{filename}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{test.txt}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{n}{Content}\PYG{o}{\PYGZhy{}}\PYG{n}{Type}\PYG{p}{:} \PYG{n}{text}\PYG{o}{/}\PYG{n}{plain}
\PYG{n}{This} \PYG{o+ow}{is} \PYG{n}{the} \PYG{n}{test} \PYG{n}{data} \PYG{n}{file} \PYG{k}{for} \PYG{n}{upload}
\PYG{n}{More} \PYG{n}{test} \PYG{n}{data} \PYG{n}{here}
\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{9503744825200}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}
\PYG{o}{.}\PYG{n}{END}
\PYG{o}{.}\PYG{n}{EOJ}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example VIRTEL Batch RAW command}

\sphinxAtStartPar
Each .RAW command is followed by one or more data statements containing the HTTP request line, the request
headers, and the request body. A blank line separates the request headers from the request body. VIRTEL generates an
HTTP request exactly as contained in the data statements.

\index{Return Codes@\spxentry{Return Codes}!Virtel Batch@\spxentry{Virtel Batch}}\index{Virtel Batch@\spxentry{Virtel Batch}!Return Codes@\spxentry{Return Codes}}\ignorespaces 

\subsection{VIRTEL Batch return codes}
\label{\detokenize{User_Guide:virtel-batch-return-codes}}\label{\detokenize{User_Guide:index-360}}
\sphinxAtStartPar
When a VIRTEL Batch job terminates, the condition code is set to the highest ERROR\$ code set by the of the scenarios
executed (value 0 to 255).

\sphinxAtStartPar
The condition code may also be set to 4 or 5 (unless a scenario has indicated a higher value) if a request executed by
the batch job produced an HTTP response code in the range 4xx or 5xx.

\sphinxAtStartPar
In the case of a scenario abend, the completion code contains the offset of the abend within the scenario.

\sphinxAtStartPar
If the VIRTEL Batch job terminates because of an error condition (for example, an invalid batch command, missing DD
statement, or insufficient memory) then the condition code is set to 16.

\newpage

\index{Outgoing Calls@\spxentry{Outgoing Calls}}\ignorespaces 

\chapter{Outgoing Calls}
\label{\detokenize{User_Guide:outgoing-calls}}\label{\detokenize{User_Guide:index-361}}
\index{Outgoing Calls@\spxentry{Outgoing Calls}}\index{Outgoing E\sphinxhyphen{}Mails@\spxentry{Outgoing E\sphinxhyphen{}Mails}!Outgoing Calls@\spxentry{Outgoing Calls}}\index{Outgoing Calls@\spxentry{Outgoing Calls}!Outgoing E\sphinxhyphen{}Mails@\spxentry{Outgoing E\sphinxhyphen{}Mails}}\ignorespaces 

\section{Outgoing E\sphinxhyphen{}mails}
\label{\detokenize{User_Guide:outgoing-e-mails}}\label{\detokenize{User_Guide:index-362}}
\index{Transactions@\spxentry{Transactions}!Outgoing Calls@\spxentry{Outgoing Calls}}\index{Outgoing Calls@\spxentry{Outgoing Calls}!Transactions@\spxentry{Transactions}}\index{Transactions@\spxentry{Transactions}!Outgoing E\sphinxhyphen{}mails@\spxentry{Outgoing E\sphinxhyphen{}mails}}\index{Outgoing E\sphinxhyphen{}mails@\spxentry{Outgoing E\sphinxhyphen{}mails}!Transactions@\spxentry{Transactions}}\ignorespaces 
\sphinxAtStartPar
The FAD4 structured field allows a host application to send an e\sphinxhyphen{}mail. This function is described in the VIRTEL
Programming Interface documentation 280.
The entry point used to invoke the host application must contain a type\sphinxhyphen{}3 transaction with external name \$MAIL\$. The
“Application” field must contain the name of the SMTP line to be used for sending the outgoing e\sphinxhyphen{}mail.
An example transaction is shown below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
TRANSACTION DETAIL DEFINITION \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} Applid: VIRTEL 13:43:23
Internal name ===\PYGZgt{} W2H\PYGZhy{}75                To associate with an entry point name
External name ===\PYGZgt{} \PYGZdl{}mail\PYGZdl{}                Name displayed on user menu
Description   ===\PYGZgt{} Send messages via SMTP
Application   ===\PYGZgt{} S\PYGZhy{}SMTP                Application to be called
PassTicket    ===\PYGZgt{} 0 Name ===\PYGZgt{}           0=no 1=yes 2=unsigned
Application type ===\PYGZgt{} 3                  1=VTAM 2=VIRTEL 3=SERV 4=PAGE 5=LINE
Pseudo\PYGZhy{}terminals ===\PYGZgt{}                    Prefix of name of partner terminals
Logmode          ===\PYGZgt{}                    Specify when LOGMODE must be changed
How started      ===\PYGZgt{} 2                  1=menu 2=sub\PYGZhy{}menu 3=auto
Security         ===\PYGZgt{} 1                  0=none 1=basic 2=NTLM 3=TLS 4=HTML
Translation(s)   ===\PYGZgt{}                    0=idem 1=8040 2=8080 3=4040 4=auto
Logon message    ===\PYGZgt{}

TIOA at logon    ===\PYGZgt{}

TIOA at logoff   ===\PYGZgt{}

Initial Scenario ===\PYGZgt{}                   Final Scenario    ===\PYGZgt{}
Input Scenario   ===\PYGZgt{}                   Output Scenario   ===\PYGZgt{}

P1=Update                        P3=Return                     P12=Server
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Transaction definition for outgoing e\sphinxhyphen{}mails}

\sphinxAtStartPar
Refer to the VIRTEL Connectivity Reference documentation for details of defining transactions, entry points, and SMTP lines.

\newpage

\index{Programming interfaces@\spxentry{Programming interfaces}}\ignorespaces 

\chapter{Programming Interfaces}
\label{\detokenize{User_Guide:programming-interfaces}}\label{\detokenize{User_Guide:v462ug-programming-interfaces}}\label{\detokenize{User_Guide:index-364}}
\sphinxAtStartPar
Certain VIRTEL functions can be driven by application programs. These functions are generally requested by sending specially formatted commands to VIRTEL on the same 3270 session through which the application communicates with the end user. An application can request VIRTEL functions in the following ways:
\begin{itemize}
\item {} 
\sphinxAtStartPar
By sending a message containing structured fields recognized by VIRTEL

\item {} 
\sphinxAtStartPar
By embedding HOST4WEB commands in the 3270 screen (available from VIRTEL version 4.28 onwards)

\end{itemize}

\index{Structured Fields@\spxentry{Structured Fields}!Programming Interfaces@\spxentry{Programming Interfaces}}\index{Programming Interfaces@\spxentry{Programming Interfaces}!Structured Fields@\spxentry{Structured Fields}}\ignorespaces 

\section{Structred Fields}
\label{\detokenize{User_Guide:structred-fields}}\label{\detokenize{User_Guide:index-365}}\begin{quote}

\sphinxAtStartPar
In addition to sending normal screen display data, a 3270
application may also send data in specially formatted fields known
as “structured fields”. Structured fields are sent using a special
3270 command “Write Structured Field” (code X’F3’). Each structured
field contains a 2\sphinxhyphen{}byte identification code. VIRTEL intercepts
structured fields whose code begins with X’FA’. By sending
structured fields to VIRTEL on the 3270 session, the VIRTEL Web
Integration application can direct VIRTEL to perform certain
functions.

\sphinxAtStartPar
The operations available to VIRTEL Web Integration applications via
structured fields are as follows:
\end{quote}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Specify the HTML page template to be used to format 3270 screens for
the browser

\item {} 
\sphinxAtStartPar
Specify the directory from which HTML page templates are to be
retrieved

\item {} 
\sphinxAtStartPar
Send a list of values (a table variable) to an HTML page

\item {} 
\sphinxAtStartPar
Send an outgoing e\sphinxhyphen{}mail

\item {} 
\sphinxAtStartPar
Retrieve the contents of an incoming e\sphinxhyphen{}mail

\end{itemize}

\index{Structured Fields Format Example@\spxentry{Structured Fields Format Example}!Programming Interfaces@\spxentry{Programming Interfaces}}\index{Programming Interfaces@\spxentry{Programming Interfaces}!Structured Fields Format Example@\spxentry{Structured Fields Format Example}}\ignorespaces 

\subsection{General format of a 3270 structured field}
\label{\detokenize{User_Guide:general-format-of-a-3270-structured-field}}\label{\detokenize{User_Guide:index-366}}
\sphinxAtStartPar
As a general rule, the format of a structured field is as shown below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{nnnnccccdd....dd}\PYG{l+s+s1}{\PYGZsq{}}
\end{sphinxVerbatim}
\begin{description}
\sphinxlineitem{nnnn}
\sphinxAtStartPar
The length. The length includes the length of the nnnn and cccc
fields, thus nnnn is always 4 more than the length of the data.

\sphinxlineitem{cccc}
\sphinxAtStartPar
the identification code

\sphinxlineitem{dd….dd}
\sphinxAtStartPar
the data.

\end{description}

\index{Write Structured Field command@\spxentry{Write Structured Field command}!Programming Interfaces@\spxentry{Programming Interfaces}}\index{Programming Interfaces@\spxentry{Programming Interfaces}!Write Structured Field command@\spxentry{Write Structured Field command}}\ignorespaces 

\subsection{Sending structured fields via the Write Structured Field command}
\label{\detokenize{User_Guide:sending-structured-fields-via-the-write-structured-field-command}}\label{\detokenize{User_Guide:index-367}}
\sphinxAtStartPar
VIRTEL recognizes that a message contains structured fields whenever the application uses the 3270 command X’F3’
(Write Structured Field) to send the message to the terminal.
For CICS applications, the STRFIELD option of the EXEC CICS SEND command requests CICS to send the message using
command code X’F3’:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{EXEC} \PYG{n}{CICS} \PYG{n}{SEND} \PYG{n}{FROM}\PYG{p}{(}\PYG{n}{DATA1}\PYG{p}{)}
    \PYG{n}{LENGTH}\PYG{p}{(}\PYG{n}{LENGTH} \PYG{n}{OF} \PYG{n}{DATA1}\PYG{p}{)}
    \PYG{n}{STRFIELD}
\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{EXEC}\PYG{o}{.}
\end{sphinxVerbatim}

\sphinxAtStartPar
For non\sphinxhyphen{}CICS applications, the appropriate method of generating a Write Structured Field command should be used. It
is also possible to convert a normal message into a structured field message by means of VIRTEL exit 4 (outbound
message exit).

\index{SRTVIRTEL prefix@\spxentry{SRTVIRTEL prefix}!Programming Interfaces@\spxentry{Programming Interfaces}}\index{Programming Interfaces@\spxentry{Programming Interfaces}!SRTVIRTEL prefix@\spxentry{SRTVIRTEL prefix}}\ignorespaces 

\subsection{Sending structured fields using the SRTVIRTEL prefix}
\label{\detokenize{User_Guide:sending-structured-fields-using-the-srtvirtel-prefix}}\label{\detokenize{User_Guide:index-368}}
\sphinxAtStartPar
If the application monitor does not support the X’F3’ (Write Structured Field) command for sending structured fields
(for example, IMS), VIRTEL provides an alternative method for processing structured field data. If the 3270 message
begins with the special header:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{1140401D40}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}\PYG{n}{C}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{SRTVIRTEL}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}\PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{11404B}\PYG{l+s+s1}{\PYGZsq{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
then VIRTEL treats the remainder of the message as structured fields.
The SRTVIRTEL header is built by the application, and the application monitor adds 3270 command byte X’F1’ (Write),
X’F5’ (Erase/Write), or X’7E’ (Erase/Write Alternate), followed by an appropriate WCC (Write Control Character).
For example,

\sphinxAtStartPar
F1 C3 1140401D40 C’SRTVIRTEL’ 11404B 0016 FAE5 08 08 E3D9F0F0F0F0F0F1 818683A796A34040

\sphinxAtStartPar
is processed identically to:

\sphinxAtStartPar
F3 0016 FAE5 08 08 E3D9F0F0F0F0F0F1 818683A796A34040

\index{How to if running under Virtel@\spxentry{How to if running under Virtel}!Programming Interfaces@\spxentry{Programming Interfaces}}\index{Programming Interfaces@\spxentry{Programming Interfaces}!How to if running under Virtel@\spxentry{How to if running under Virtel}}\ignorespaces 

\subsection{How To Determine If Running Under Virtel}
\label{\detokenize{User_Guide:how-to-determine-if-running-under-virtel}}\label{\detokenize{User_Guide:index-369}}
\sphinxAtStartPar
Because the structured fields described in this chapter are understood only by VIRTEL and not by regular 3270
terminals, your application will need to determine whether it is communicating with a VIRTEL pseudo\sphinxhyphen{}terminal before
writing a VIRTEL structured field. This section describes some techniques that your application can use to decide if it is
communicating with VIRTEL pseudo\sphinxhyphen{}terminal or with a regular 3270 terminal.


\subsubsection{Use a different transaction code}
\label{\detokenize{User_Guide:use-a-different-transaction-code}}
\sphinxAtStartPar
By defining two different transaction codes which invoke the same CICS application program (for example, DEMO for
3270, and VEMO for VIRTEL), the application can test the field EIBTRNID to determine if it is running under VIRTEL.
The figure below shows sample DFHCSDUP statements to associate two transaction codes (DEMO and VEMO) with a
single application program DEMOPROG:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{DEFINE} \PYG{n}{TRANSACTION}\PYG{p}{(}\PYG{n}{DEMO}\PYG{p}{)} \PYG{n}{GROUP}\PYG{p}{(}\PYG{n}{DEMOGRP}\PYG{p}{)}
    \PYG{n}{PROGRAM}\PYG{p}{(}\PYG{n}{DEMOPROG}\PYG{p}{)} \PYG{n}{PROFILE}\PYG{p}{(}\PYG{n}{DFHCICST}\PYG{p}{)} \PYG{n}{STATUS}\PYG{p}{(}\PYG{n}{ENABLED}\PYG{p}{)}
\PYG{n}{DEFINE} \PYG{n}{TRANSACTION}\PYG{p}{(}\PYG{n}{VEMO}\PYG{p}{)} \PYG{n}{GROUP}\PYG{p}{(}\PYG{n}{DEMOGRP}\PYG{p}{)}
    \PYG{n}{PROGRAM}\PYG{p}{(}\PYG{n}{DEMOPROG}\PYG{p}{)} \PYG{n}{PROFILE}\PYG{p}{(}\PYG{n}{DFHCICST}\PYG{p}{)} \PYG{n}{STATUS}\PYG{p}{(}\PYG{n}{ENABLED}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Defining an alternate CICS transaction code for an application}

\sphinxAtStartPar
The figure below shows sample VIRCONF statements to define a VIRTEL transaction which starts the application using
the CICS transaction code VEMO:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{TRANSACT} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{CLI}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{10}\PYG{p}{,}
        \PYG{n}{NAME}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{CICS}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
        \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Logon to DEMO application}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
        \PYG{n}{APPL}\PYG{o}{=}\PYG{n}{DBDCCICS}\PYG{p}{,}
        \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,}
        \PYG{n}{TERMINAL}\PYG{o}{=}\PYG{n}{CLVTA}\PYG{p}{,}
        \PYG{n}{integration}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,}
        \PYG{n}{SECURITY}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,}
        \PYG{n}{TIOASTA}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Signon\PYGZam{}/W\PYGZam{}*7D4C7D\PYGZam{}}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{114BE9}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{\PYGZam{}U\PYGZam{}}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{114CF9}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{\PYGZam{}P\PYGZam{}/Acomplete\PYGZam{}/W VEMO\PYGZam{}/A}\PYG{l+s+s2}{\PYGZdq{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Invoking the alternate transaction code from VIRTEL}

\sphinxAtStartPar
The figure below shows sample COBOL statements which allow the DEMOPROG program to take different actions
based upon the CICS transaction code:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{In} \PYG{n}{Working}\PYG{o}{\PYGZhy{}}\PYG{n}{Storage}\PYG{p}{:}

\PYG{l+m+mi}{01} \PYG{n}{THIS}\PYG{o}{\PYGZhy{}}\PYG{n}{IS}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CALL}\PYG{o}{\PYGZhy{}}\PYG{n}{SW}       \PYG{n}{PIC} \PYG{n}{X}\PYG{o}{.}
    \PYG{l+m+mi}{88} \PYG{n}{THIS}\PYG{o}{\PYGZhy{}}\PYG{n}{IS}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CALL}      \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Y}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{88} \PYG{n}{THIS}\PYG{o}{\PYGZhy{}}\PYG{n}{IS}\PYG{o}{\PYGZhy{}}\PYG{n}{NOT}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CALL}  \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{N}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}

\PYG{n}{In} \PYG{n}{the} \PYG{n}{Procedure} \PYG{n}{Division}\PYG{p}{:}

\PYG{n}{IF} \PYG{n}{EIBTRNID} \PYG{p}{(}\PYG{l+m+mi}{1} \PYG{p}{:} \PYG{l+m+mi}{1}\PYG{p}{)} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{V}\PYG{l+s+s1}{\PYGZsq{}}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Y}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{THIS}\PYG{o}{\PYGZhy{}}\PYG{n}{IS}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CALL}\PYG{o}{\PYGZhy{}}\PYG{n}{SW}
\PYG{n}{ELSE}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{N}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{THIS}\PYG{o}{\PYGZhy{}}\PYG{n}{IS}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CALL}\PYG{o}{\PYGZhy{}}\PYG{n}{SW}
\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{IF}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Detecting VIRTEL by testing the transaction code}

\index{Including Parameters@\spxentry{Including Parameters}!Programming Interfaces@\spxentry{Programming Interfaces}}\index{Programming Interfaces@\spxentry{Programming Interfaces}!Including Parameters@\spxentry{Including Parameters}}\ignorespaces 

\subsubsection{Include parameters after the transaction code}
\label{\detokenize{User_Guide:include-parameters-after-the-transaction-code}}\label{\detokenize{User_Guide:index-370}}
\sphinxAtStartPar
By adding additional data after the transaction code when the transaction is invoked by VIRTEL, the application can
receive the parameter data to verify whether it is running under VIRTEL. In the following example we add a V after the
transaction code when the application is called via VIRTEL.
The figure below shows sample VIRCONF statements to define a VIRTEL transaction which starts the CICS transaction
DEMO with an additional parameter (“V”):

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{TRANSACT} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{CLI}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{10}\PYG{p}{,}
        \PYG{n}{NAME}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{CICS}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
        \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Logon to DEMO application}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
        \PYG{n}{APPL}\PYG{o}{=}\PYG{n}{DBDCCICS}\PYG{p}{,}
        \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,}
        \PYG{n}{TERMINAL}\PYG{o}{=}\PYG{n}{CLVTA}\PYG{p}{,}
        \PYG{n}{integration}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,}
        \PYG{n}{SECURITY}\PYG{o}{=}\PYG{l+m+mi}{1}\PYG{p}{,}
        \PYG{n}{TIOASTA}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Signon\PYGZam{}/W\PYGZam{}*7D4C7D\PYGZam{}}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{114BE9}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{\PYGZam{}U\PYGZam{}}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{114CF9}\PYG{l+s+s2}{\PYGZsq{}}\PYG{l+s+s2}{\PYGZam{}P\PYGZam{}/Acomplete\PYGZam{}/W DEMOV\PYGZam{}/A}\PYG{l+s+s2}{\PYGZdq{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Invoking a CICS transaction with additional parameters}

\sphinxAtStartPar
The figure below shows sample COBOL statements which must be added to the DEMOPROG program to receive and
test the parameter data. When the transaction is started by VIRTEL, the parameter field contains “V”. When the
transaction is started from a terminal, using the transaction code DEMO with no additional parameters, the parameter
field contains spaces:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o+ow}{in} \PYG{n}{Working}\PYG{o}{\PYGZhy{}}\PYG{n}{Storage}\PYG{p}{:}

\PYG{l+m+mi}{01} \PYG{n}{CICS}\PYG{o}{\PYGZhy{}}\PYG{n}{TIOA}\PYG{o}{.}
    \PYG{l+m+mi}{02} \PYG{n}{CICS}\PYG{o}{\PYGZhy{}}\PYG{n}{TIOA}\PYG{o}{\PYGZhy{}}\PYG{n}{TRANID} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)} \PYG{n}{VALUE} \PYG{n}{SPACES}\PYG{o}{.}
    \PYG{l+m+mi}{02} \PYG{n}{CICS}\PYG{o}{\PYGZhy{}}\PYG{n}{TIOA}\PYG{o}{\PYGZhy{}}\PYG{n}{PARAMV} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{)} \PYG{n}{VALUE} \PYG{n}{SPACES}\PYG{o}{.}
    \PYG{l+m+mi}{02} \PYG{n}{FILLER} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{75}\PYG{p}{)} \PYG{n}{VALUE} \PYG{n}{SPACES}\PYG{o}{.}
\PYG{l+m+mi}{01} \PYG{n}{THIS}\PYG{o}{\PYGZhy{}}\PYG{n}{IS}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CALL}\PYG{o}{\PYGZhy{}}\PYG{n}{SW} \PYG{n}{PIC} \PYG{n}{X}\PYG{o}{.}
    \PYG{l+m+mi}{88} \PYG{n}{THIS}\PYG{o}{\PYGZhy{}}\PYG{n}{IS}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CALL} \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Y}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{88} \PYG{n}{THIS}\PYG{o}{\PYGZhy{}}\PYG{n}{IS}\PYG{o}{\PYGZhy{}}\PYG{n}{NOT}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CALL} \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{N}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}

\PYG{o+ow}{in} \PYG{n}{the} \PYG{n}{Procedure} \PYG{n}{Division}\PYG{p}{:}

\PYG{n}{EXEC} \PYG{n}{CICS} \PYG{n}{RECEIVE}
        \PYG{n}{INTO}\PYG{p}{(}\PYG{n}{CICS}\PYG{o}{\PYGZhy{}}\PYG{n}{TIOA}\PYG{p}{)}
\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{EXEC}
\PYG{n}{IF} \PYG{n}{CICS}\PYG{o}{\PYGZhy{}}\PYG{n}{TIOA}\PYG{o}{\PYGZhy{}}\PYG{n}{PARAMV} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{V}\PYG{l+s+s1}{\PYGZsq{}}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Y}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{THIS}\PYG{o}{\PYGZhy{}}\PYG{n}{IS}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CALL}\PYG{o}{\PYGZhy{}}\PYG{n}{SW}
\PYG{n}{ELSE}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{N}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{THIS}\PYG{o}{\PYGZhy{}}\PYG{n}{IS}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CALL}\PYG{o}{\PYGZhy{}}\PYG{n}{SW}
\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{IF}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Detecting VIRTEL by inspecting the contents of the TIOA}

\index{Including Specific Terminal Ranges@\spxentry{Including Specific Terminal Ranges}!Programming Interfaces@\spxentry{Programming Interfaces}}\index{Programming Interfaces@\spxentry{Programming Interfaces}!Including Specific Terminal Ranges@\spxentry{Including Specific Terminal Ranges}}\ignorespaces 

\subsubsection{Use a specific range of terminal names}
\label{\detokenize{User_Guide:use-a-specific-range-of-terminal-names}}\label{\detokenize{User_Guide:index-371}}
\sphinxAtStartPar
Since all VIRTEL requests are made from the VIRTEL terminal pool, the application program can test the CICS terminal
id or the VTAM LU name to determine if it is running under VIRTEL, as shown in the following example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{TERMINAL} \PYG{n}{ID}\PYG{o}{=}\PYG{n}{W2HTP000}\PYG{p}{,}
        \PYG{n}{RELAY}\PYG{o}{=}\PYG{n}{VIRTVT00}\PYG{p}{,}
        \PYG{n}{POOL}\PYG{o}{=}\PYG{o}{*}\PYG{n}{W2HPOOL}\PYG{p}{,}
        \PYG{n}{DESC}\PYG{o}{=}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Relay pool for HTTP}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{,}
        \PYG{n}{RELAY2}\PYG{o}{=}\PYG{n}{VIRTPR00}\PYG{p}{,}
        \PYG{n}{TYPE}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}
        \PYG{n}{COMPRESS}\PYG{o}{=}\PYG{l+m+mi}{2}\PYG{p}{,}
        \PYG{n}{INOUT}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{,}
        \PYG{n}{STATS}\PYG{o}{=}\PYG{l+m+mi}{12}\PYG{p}{,}
        \PYG{n}{REPEAT}\PYG{o}{=}\PYG{l+m+mi}{0080}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Defining the VIRTEL terminal pool}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
VIRTVT?? APPL AUTH=(ACQ,PASS),MODETAB=ISTINCLM,DLOGMOD=SNX32702,EAS=1
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{VTAM definition for the VIRTEL terminal pool}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{In} \PYG{n}{Working}\PYG{o}{\PYGZhy{}}\PYG{n}{Storage}\PYG{p}{:}

\PYG{l+m+mi}{01} \PYG{n}{THIS}\PYG{o}{\PYGZhy{}}\PYG{n}{IS}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CALL}\PYG{o}{\PYGZhy{}}\PYG{n}{SW} \PYG{n}{PIC} \PYG{n}{X}\PYG{o}{.}
    \PYG{l+m+mi}{88} \PYG{n}{THIS}\PYG{o}{\PYGZhy{}}\PYG{n}{IS}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CALL} \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Y}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{88} \PYG{n}{THIS}\PYG{o}{\PYGZhy{}}\PYG{n}{IS}\PYG{o}{\PYGZhy{}}\PYG{n}{NOT}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CALL} \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{N}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}

\PYG{n}{In} \PYG{n}{the} \PYG{n}{Procedure} \PYG{n}{Division}\PYG{p}{:}

\PYG{n}{IF} \PYG{n}{EIBTRMID} \PYG{p}{(}\PYG{l+m+mi}{1} \PYG{p}{:} \PYG{l+m+mi}{2}\PYG{p}{)} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VT}\PYG{l+s+s1}{\PYGZsq{}}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Y}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{THIS}\PYG{o}{\PYGZhy{}}\PYG{n}{IS}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CALL}\PYG{o}{\PYGZhy{}}\PYG{n}{SW}
\PYG{n}{ELSE}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{N}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{THIS}\PYG{o}{\PYGZhy{}}\PYG{n}{IS}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CALL}\PYG{o}{\PYGZhy{}}\PYG{n}{SW}
\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{IF}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Detecting VIRTEL by testing the CICS terminal id}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{In} \PYG{n}{Working}\PYG{o}{\PYGZhy{}}\PYG{n}{Storage}\PYG{p}{:}

\PYG{l+m+mi}{01} \PYG{n}{MYLUNAME}                    \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{8}\PYG{p}{)}\PYG{o}{.}
\PYG{l+m+mi}{01} \PYG{n}{THIS}\PYG{o}{\PYGZhy{}}\PYG{n}{IS}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CALL}\PYG{o}{\PYGZhy{}}\PYG{n}{SW}      \PYG{n}{PIC} \PYG{n}{X}\PYG{o}{.}
    \PYG{l+m+mi}{88} \PYG{n}{THIS}\PYG{o}{\PYGZhy{}}\PYG{n}{IS}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CALL}     \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Y}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{88} \PYG{n}{THIS}\PYG{o}{\PYGZhy{}}\PYG{n}{IS}\PYG{o}{\PYGZhy{}}\PYG{n}{NOT}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CALL} \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{N}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}

\PYG{n}{In} \PYG{n}{the} \PYG{n}{Procedure} \PYG{n}{Division}\PYG{p}{:}

\PYG{n}{EXEC} \PYG{n}{CICS} \PYG{n}{ASSIGN}
        \PYG{n}{NETNAME}\PYG{p}{(}\PYG{n}{MYLUNAME}\PYG{p}{)}
\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{EXEC}
\PYG{n}{IF} \PYG{n}{MYLUNAME} \PYG{p}{(}\PYG{l+m+mi}{1} \PYG{p}{:} \PYG{l+m+mi}{4}\PYG{p}{)} \PYG{o}{=} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VIRT}\PYG{l+s+s1}{\PYGZsq{}}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Y}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{THIS}\PYG{o}{\PYGZhy{}}\PYG{n}{IS}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CALL}\PYG{o}{\PYGZhy{}}\PYG{n}{SW}
\PYG{n}{ELSE}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{N}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{THIS}\PYG{o}{\PYGZhy{}}\PYG{n}{IS}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CALL}\PYG{o}{\PYGZhy{}}\PYG{n}{SW}
\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{IF}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Detecting VIRTEL by testing the VTAM LU name}

\index{FA88 \sphinxhyphen{} Request data@\spxentry{FA88 \sphinxhyphen{} Request data}!Programming Interfaces@\spxentry{Programming Interfaces}}\index{Programming Interfaces@\spxentry{Programming Interfaces}!FA88 \sphinxhyphen{} Request data@\spxentry{FA88 \sphinxhyphen{} Request data}}\ignorespaces 

\subsection{FA88: Transmit large data message to application}
\label{\detokenize{User_Guide:fa88-transmit-large-data-message-to-application}}\label{\detokenize{User_Guide:index-372}}
\sphinxAtStartPar
By using the FA88 structured field, an application can request data from an HTTP terminal without being limited to the
size of a 3270 screen.

\sphinxAtStartPar
The application sends an FA88 structured field containing the name of a URL parameter to be retrieved. The “send
message to terminal” flag causes VIRTEL to send an HTTP response to the terminal. When the terminal sends its next
URL, VIRTEL sends to the application an FA88 structured field response containing the value of the URL parameter. The
application may retrieve the value in multiple segments. If the value exceeds 32K in size then it must be retrieved in
multiple segments. Once the first segment has been received, the application requests subsequent segments by
sending another FA88 structured field containing the “immediate answer” flag and the offset of the segment
requested. VIRTEL responds with an FA88 structured field response containing the segment requested. In each
response VIRTEL sets the flag byte to indicate whether there is more data to be retrieved, and if so the number of
bytes remaining. The application continues the procedure until there is no more data to be retrieved.

\sphinxAtStartPar
The format of the FA88 structured field sent by the application is shown below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{2} \PYG{n+nb}{bytes} \PYG{n}{Length} \PYG{n}{of} \PYG{n}{structured} \PYG{n}{field} \PYG{o}{=} \PYG{l+m+mi}{14} \PYG{o}{+} \PYG{n}{n}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{2} \PYG{n+nb}{bytes} \PYG{n}{Structured} \PYG{n}{field} \PYG{n}{identification} \PYG{n}{code} \PYG{o}{=} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{FA88}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{1} \PYG{n+nb}{bytes} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{00}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{1} \PYG{n+nb}{bytes} \PYG{n}{Flags}\PYG{p}{:}
        \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{01}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{=} \PYG{n}{immediate} \PYG{n}{answer}
        \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{04}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{=} \PYG{n}{send} \PYG{n}{message} \PYG{n}{to} \PYG{n}{terminal}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{2} \PYG{n+nb}{bytes} \PYG{n}{Maximum} \PYG{n}{segment} \PYG{n}{size} \PYG{n}{requested} \PYG{p}{(}\PYG{n}{m}\PYG{p}{)}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{4} \PYG{n+nb}{bytes} \PYG{n}{Offset} \PYG{n}{of} \PYG{n}{requested} \PYG{n}{segment} \PYG{p}{(}\PYG{n}{o}\PYG{p}{)}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{2} \PYG{n+nb}{bytes} \PYG{n}{Length} \PYG{n}{of} \PYG{n}{name} \PYG{p}{(}\PYG{n}{n}\PYG{p}{)}
\PYG{o}{\PYGZhy{}} \PYG{n}{n} \PYG{n+nb}{bytes} \PYG{n}{Name} \PYG{n}{of} \PYG{n}{URL} \PYG{n}{parameter}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Format of structured field FA88}

\sphinxAtStartPar
The format of the FA88 structured field response returned by VIRTEL is shown below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{2} \PYG{n+nb}{bytes} \PYG{n}{Length} \PYG{n}{of} \PYG{n}{structured} \PYG{n}{field} \PYG{o}{=} \PYG{l+m+mi}{14} \PYG{o}{+} \PYG{n}{n} \PYG{o}{+} \PYG{n}{x}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{2} \PYG{n+nb}{bytes} \PYG{n}{Structured} \PYG{n}{field} \PYG{n}{identification} \PYG{n}{code} \PYG{o}{=} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{FA88}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{1} \PYG{n+nb}{bytes} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{00}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{1} \PYG{n+nb}{bytes} \PYG{n}{Flags}\PYG{p}{:}
            \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{02}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{=} \PYG{n}{there} \PYG{o+ow}{is} \PYG{n}{more} \PYG{n}{data}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{2} \PYG{n+nb}{bytes} \PYG{n}{Length} \PYG{n}{of} \PYG{n}{segment} \PYG{n}{returned} \PYG{p}{(}\PYG{n}{x}\PYG{p}{)}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{4} \PYG{n+nb}{bytes} \PYG{n}{Number} \PYG{n}{of} \PYG{n+nb}{bytes} \PYG{n}{remaining} \PYG{p}{(}\PYG{n}{r}\PYG{p}{)}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{2} \PYG{n+nb}{bytes} \PYG{n}{Length} \PYG{n}{of} \PYG{n}{name} \PYG{p}{(}\PYG{n}{n}\PYG{p}{)}
\PYG{o}{\PYGZhy{}} \PYG{n}{n} \PYG{n+nb}{bytes} \PYG{n}{Name} \PYG{n}{of} \PYG{n}{variable}
\PYG{o}{\PYGZhy{}} \PYG{n}{x} \PYG{n+nb}{bytes} \PYG{n}{Requested} \PYG{n}{data} \PYG{n}{segment}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Format of structured field response FA88}

\index{FAC8 Structured field@\spxentry{FAC8 Structured field}!Programming Interfaces@\spxentry{Programming Interfaces}}\index{Programming Interfaces@\spxentry{Programming Interfaces}!FAC8 Structured field@\spxentry{FAC8 Structured field}}\ignorespaces 

\subsection{FAC8: Selection of page template}
\label{\detokenize{User_Guide:fac8-selection-of-page-template}}\label{\detokenize{User_Guide:index-373}}
\sphinxAtStartPar
VIRTEL recognizes the FAC8 structured field for the following operations:
\sphinxhyphen{} Change of directory for HTML page templates
\sphinxhyphen{} Change of HTML page template

\sphinxAtStartPar
To perform more than one function at a time, multiple FAC8 structured fields can be sent in the same message.

\index{FAC8.06 \sphinxhyphen{} Specify Virtel directory@\spxentry{FAC8.06 \sphinxhyphen{} Specify Virtel directory}!Programming Interfaces@\spxentry{Programming Interfaces}}\index{Programming Interfaces@\spxentry{Programming Interfaces}!FAC8.06 \sphinxhyphen{} Specify Virtel directory@\spxentry{FAC8.06 \sphinxhyphen{} Specify Virtel directory}}\ignorespaces 

\subsubsection{Structured field FAC8 code 06}
\label{\detokenize{User_Guide:structured-field-fac8-code-06}}\label{\detokenize{User_Guide:index-374}}
\sphinxAtStartPar
Structured field FAC8 code 06 allows the application to specify the name of the VIRTEL directory to be used to retrieve
the page template for the current 3270 screen and all subsequent screens.
The format of a structured field FAC8 code 06 is:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{2} \PYG{n+nb}{bytes} \PYG{n}{Length} \PYG{n}{of} \PYG{n}{structured} \PYG{n}{field} \PYG{o}{=} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{000D}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{2} \PYG{n+nb}{bytes} \PYG{n}{Structured} \PYG{n}{field} \PYG{n}{identification} \PYG{n}{code} \PYG{o}{=} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{FAC8}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{1} \PYG{n+nb}{bytes} \PYG{n}{Code} \PYG{o}{=} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{06}\PYG{l+s+s1}{\PYGZsq{}} \PYG{p}{(}\PYG{n}{change} \PYG{n}{VIRTEL} \PYG{n}{directory}\PYG{p}{)}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{8} \PYG{n+nb}{bytes} \PYG{n}{Directory} \PYG{n}{name}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Format of structured field FAC8 code 06}

\index{FAC8.07 \sphinxhyphen{} Specify template@\spxentry{FAC8.07 \sphinxhyphen{} Specify template}!Programming Interfaces@\spxentry{Programming Interfaces}}\index{Programming Interfaces@\spxentry{Programming Interfaces}!FAC8.07 \sphinxhyphen{} Specify template@\spxentry{FAC8.07 \sphinxhyphen{} Specify template}}\ignorespaces 

\subsubsection{Structured field FAC8 code 07}
\label{\detokenize{User_Guide:structured-field-fac8-code-07}}\label{\detokenize{User_Guide:index-375}}
\sphinxAtStartPar
Structured field FAC8 code 07 allows the application to specify the name of the page template for the current 3270
screen and all subsequent screens.

\sphinxAtStartPar
The format of a structured field FAC8 code 07 is:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{2} \PYG{n+nb}{bytes} \PYG{n}{Length} \PYG{n}{of} \PYG{n}{structured} \PYG{n}{field} \PYG{o}{=} \PYG{n}{variable} \PYG{p}{(}\PYG{n}{n}\PYG{o}{+}\PYG{l+m+mi}{5}\PYG{p}{)}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{2} \PYG{n+nb}{bytes} \PYG{n}{Structured} \PYG{n}{field} \PYG{n}{identification} \PYG{n}{code} \PYG{o}{=} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{FAC8}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{1} \PYG{n+nb}{bytes} \PYG{n}{Code} \PYG{o}{=} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{07}\PYG{l+s+s1}{\PYGZsq{}} \PYG{p}{(}\PYG{n}{change} \PYG{n}{HTML} \PYG{n}{page} \PYG{n}{template}\PYG{p}{)}
\PYG{o}{\PYGZhy{}} \PYG{n}{n} \PYG{n+nb}{bytes} \PYG{n}{Page} \PYG{n}{template} \PYG{n}{name}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Format of structured field FAC8 code 07}

\index{COBOL Example@\spxentry{COBOL Example}!Programming Interfaces@\spxentry{Programming Interfaces}}\index{Programming Interfaces@\spxentry{Programming Interfaces}!COBOL Example@\spxentry{COBOL Example}}\ignorespaces 

\subsubsection{COBOL example using FAC8}
\label{\detokenize{User_Guide:cobol-example-using-fac8}}\label{\detokenize{User_Guide:index-376}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o+ow}{in} \PYG{n}{Working}\PYG{o}{\PYGZhy{}}\PYG{n}{Storage}\PYG{p}{:}
\PYG{o}{*}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{*} \PYG{o}{\PYGZhy{}} \PYG{n}{FAC8} \PYG{n}{request} \PYG{n}{to} \PYG{n}{VIRTEL} \PYG{p}{(}\PYG{n}{HTML} \PYG{n}{page} \PYG{n}{management}\PYG{p}{)} \PYG{o}{*}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{*} \PYG{o}{\PYGZhy{}} \PYG{n}{send} \PYG{n}{structured} \PYG{n}{field}\PYG{p}{:} \PYG{o}{*}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{*} \PYG{n}{F3} \PYG{n}{LLLL} \PYG{n}{FAC8} \PYG{n}{F} \PYG{n}{PAGE} \PYG{o+ow}{or} \PYG{n}{DIRECTORY} \PYG{o}{*}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{*} \PYG{n}{LLLL}\PYG{p}{:} \PYG{n}{Length} \PYG{n}{of} \PYG{n}{structured} \PYG{n}{field} \PYG{p}{(}\PYG{l+m+mi}{2} \PYG{n}{BYTES}\PYG{p}{)} \PYG{o}{*}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{*} \PYG{n}{FAC8}\PYG{p}{:} \PYG{n}{Structured} \PYG{n}{field} \PYG{n+nb}{id} \PYG{n}{code} \PYG{p}{(}\PYG{l+m+mi}{2} \PYG{n}{BYTES}\PYG{p}{)} \PYG{o}{*}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{*} \PYG{n}{F} \PYG{p}{:} \PYG{n}{Requested} \PYG{n}{function} \PYG{p}{(}\PYG{l+m+mi}{1} \PYG{n}{BYTE} \PYG{n}{BINARY}\PYG{p}{)} \PYG{o}{*}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{*} \PYG{l+m+mi}{06}\PYG{p}{:} \PYG{n}{change} \PYG{n}{VIRTEL} \PYG{n}{directory} \PYG{o}{*}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{*} \PYG{l+m+mi}{07}\PYG{p}{:} \PYG{n}{change} \PYG{n}{HTML} \PYG{n}{page} \PYG{n}{template} \PYG{o}{*}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{*} \PYG{n}{PAGE} \PYG{o+ow}{or} \PYG{n}{DIRECTORY}\PYG{p}{:} \PYG{n}{name} \PYG{p}{(}\PYG{l+m+mi}{8} \PYG{n+nb}{bytes}\PYG{p}{)} \PYG{o}{*}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}

\PYG{l+m+mi}{01} \PYG{n}{FAC8}\PYG{o}{\PYGZhy{}}\PYG{n}{DEM}\PYG{o}{.}

    \PYG{l+m+mi}{05} \PYG{n}{FAC8}\PYG{o}{\PYGZhy{}}\PYG{n}{LONG} \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)} \PYG{n}{COMP} \PYG{n}{VALUE} \PYG{o}{+}\PYG{l+m+mf}{5.}
    \PYG{l+m+mi}{05} \PYG{n}{FAC8}\PYG{o}{\PYGZhy{}}\PYG{n}{FILL1} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{02}\PYG{p}{)} \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{FAC8}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAC8}\PYG{o}{\PYGZhy{}}\PYG{n}{FONCTION} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{01}\PYG{p}{)} \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ }\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAC8}\PYG{o}{\PYGZhy{}}\PYG{n}{ARGUMENT} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{08}\PYG{p}{)} \PYG{n}{VALUE} \PYG{n}{SPACES}\PYG{o}{.}

\PYG{l+m+mi}{01} \PYG{n}{FAC8}\PYG{o}{\PYGZhy{}}\PYG{n}{DEM}\PYG{o}{\PYGZhy{}}\PYG{n}{REPERTOIRE} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{01}\PYG{p}{)} \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{06}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
\PYG{l+m+mi}{01} \PYG{n}{FAC8}\PYG{o}{\PYGZhy{}}\PYG{n}{DEM}\PYG{o}{\PYGZhy{}}\PYG{n}{PAGE}\PYG{o}{\PYGZhy{}}\PYG{n}{HTML} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{01}\PYG{p}{)} \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{07}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}

\PYG{o+ow}{in} \PYG{n}{the} \PYG{n}{Procedure} \PYG{n}{Division}\PYG{p}{:}

    \PYG{n}{MOVE} \PYG{n}{LENGTH} \PYG{n}{OF} \PYG{n}{FAC8}\PYG{o}{\PYGZhy{}}\PYG{n}{DEM} \PYG{n}{TO} \PYG{n}{FAC8}\PYG{o}{\PYGZhy{}}\PYG{n}{LONG}\PYG{o}{.}
    \PYG{n}{MOVE} \PYG{n}{FAC8}\PYG{o}{\PYGZhy{}}\PYG{n}{DEM}\PYG{o}{\PYGZhy{}}\PYG{n}{PAGE}\PYG{o}{\PYGZhy{}}\PYG{n}{HTML} \PYG{n}{TO} \PYG{n}{FAC8}\PYG{o}{\PYGZhy{}}\PYG{n}{FONCTION}\PYG{o}{.}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{TOUTNOIR}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{FAC8}\PYG{o}{\PYGZhy{}}\PYG{n}{ARGUMENT}\PYG{o}{.}
    \PYG{n}{PERFORM} \PYG{l+m+mi}{8150}\PYG{o}{\PYGZhy{}}\PYG{n}{ENVOI}\PYG{o}{\PYGZhy{}}\PYG{n}{FAC8} \PYG{n}{THRU} \PYG{l+m+mi}{8150}\PYG{o}{\PYGZhy{}}\PYG{n}{FIN}
    \PYG{n}{PERFORM} \PYG{l+m+mi}{8830}\PYG{o}{\PYGZhy{}}\PYG{n}{ENVOI}\PYG{o}{\PYGZhy{}}\PYG{n}{MAP} \PYG{n}{THRU} \PYG{l+m+mi}{8830}\PYG{o}{\PYGZhy{}}\PYG{n}{FIN}\PYG{o}{.}

\PYG{o}{*}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/} \PYG{n}{SEND} \PYG{n}{STRUCTURED} \PYG{n}{FIELD} \PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}

\PYG{l+m+mi}{8150}\PYG{o}{\PYGZhy{}}\PYG{n}{ENVOI}\PYG{o}{\PYGZhy{}}\PYG{n}{FAC8}\PYG{o}{.}

    \PYG{n}{EXEC} \PYG{n}{CICS} \PYG{n}{SEND}  \PYG{n}{FROM} \PYG{p}{(}\PYG{n}{FAC8}\PYG{o}{\PYGZhy{}}\PYG{n}{DEM}\PYG{p}{)}
                    \PYG{n}{FROMLENGTH} \PYG{p}{(}\PYG{n}{FAC8}\PYG{o}{\PYGZhy{}}\PYG{n}{LONG}\PYG{p}{)}
                    \PYG{n}{STRFIELD}
                    \PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{EXEC}\PYG{o}{.}
\PYG{l+m+mi}{8150}\PYG{o}{\PYGZhy{}}\PYG{n}{FIN}\PYG{o}{.}

\PYG{o}{*}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/} \PYG{n}{SEND} \PYG{n}{MESSAGE} \PYG{l+m+mi}{3270} \PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{/}\PYG{o}{*}

\PYG{l+m+mi}{8830}\PYG{o}{\PYGZhy{}}\PYG{n}{ENVOI}\PYG{o}{\PYGZhy{}}\PYG{n}{MAP}\PYG{o}{.}
    \PYG{n}{EXEC} \PYG{n}{CICS} \PYG{n}{SEND}  \PYG{n}{MAP} \PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{NOMMAP2}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
                    \PYG{n}{MAPSET} \PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{NONMAP2}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
                    \PYG{n}{ERASE}
                    \PYG{n}{CURSOR} \PYG{p}{(}\PYG{n}{CICS}\PYG{o}{\PYGZhy{}}\PYG{n}{TS}\PYG{o}{\PYGZhy{}}\PYG{n}{POS}\PYG{o}{\PYGZhy{}}\PYG{n}{CURS}\PYG{p}{)}
                    \PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{EXEC}\PYG{o}{.}
\PYG{l+m+mi}{8830}\PYG{o}{\PYGZhy{}}\PYG{n}{FIN}\PYG{o}{.}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example of sending structured field FAC8}

\sphinxAtStartPar
An example of this function is supplied in member FAC8SAMP of the VIRTEL SAMPLIB.

\index{FAE5 \sphinxhyphen{} Send a table variable@\spxentry{FAE5 \sphinxhyphen{} Send a table variable}!Programming Interfaces@\spxentry{Programming Interfaces}}\index{Programming Interfaces@\spxentry{Programming Interfaces}!FAE5 \sphinxhyphen{} Send a table variable@\spxentry{FAE5 \sphinxhyphen{} Send a table variable}}\index{FAE6 \sphinxhyphen{} Send a table variable@\spxentry{FAE6 \sphinxhyphen{} Send a table variable}!Programming Interfaces@\spxentry{Programming Interfaces}}\index{Programming Interfaces@\spxentry{Programming Interfaces}!FAE6 \sphinxhyphen{} Send a table variable@\spxentry{FAE6 \sphinxhyphen{} Send a table variable}}\ignorespaces 

\subsection{FAE5, FAE6: Sending a table variable}
\label{\detokenize{User_Guide:fae5-fae6-sending-a-table-variable}}\label{\detokenize{User_Guide:index-377}}
\sphinxAtStartPar
Structured field FAE5 allows the application to send a named data table (“table variable”) to VIRTEL. The data in the
table variable is made available for insertion in the current HTML page by means of VIRTEL tags coded in the page
template (see {\hyperref[\detokenize{User_Guide:v462ug-table-variables}]{\sphinxcrossref{\DUrole{std,std-ref}{“Handling table variables”}}}}), or by means of a scenario instruction (see “FIELD\$ DEFINE\sphinxhyphen{}CHOICE”,
page 174) which allows the application to supply lists of drop\sphinxhyphen{}down values for selection fields.

\phantomsection\label{\detokenize{User_Guide:v462ug-fae5}}
\index{FAE5 \sphinxhyphen{} Structured fields@\spxentry{FAE5 \sphinxhyphen{} Structured fields}!Programming Interfaces@\spxentry{Programming Interfaces}}\index{Programming Interfaces@\spxentry{Programming Interfaces}!FAE5 \sphinxhyphen{} Structured fields@\spxentry{FAE5 \sphinxhyphen{} Structured fields}}\ignorespaces 

\subsubsection{Structured field FAE5}
\label{\detokenize{User_Guide:structured-field-fae5}}\label{\detokenize{User_Guide:index-378}}
\sphinxAtStartPar
The application can send one or more FAE5 structured fields. Each structured field contains the name of a variable
followed by a table of values. The format of structured field FAE5 is shown below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{2} \PYG{n+nb}{bytes} \PYG{n}{Length} \PYG{n}{of} \PYG{n}{structured} \PYG{n}{field} \PYG{o}{=} \PYG{n}{variable}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{2} \PYG{n+nb}{bytes} \PYG{n}{Structured} \PYG{n}{field} \PYG{n}{identification} \PYG{n}{code} \PYG{o}{=} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{FAE5}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{1} \PYG{n+nb}{bytes} \PYG{n}{Length} \PYG{n}{of} \PYG{n}{each} \PYG{n}{value} \PYG{p}{(}\PYG{n}{p}\PYG{p}{)}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{1} \PYG{n+nb}{bytes} \PYG{n}{Length} \PYG{n}{of} \PYG{n}{name} \PYG{p}{(}\PYG{n}{n}\PYG{p}{)}
\PYG{o}{\PYGZhy{}} \PYG{n}{n} \PYG{n+nb}{bytes} \PYG{n}{Name} \PYG{n}{of} \PYG{n}{variable}
\PYG{o}{\PYGZhy{}} \PYG{n}{p} \PYG{n+nb}{bytes} \PYG{n}{Value} \PYG{l+m+mi}{1}
\PYG{o}{\PYGZhy{}} \PYG{n}{p} \PYG{n+nb}{bytes} \PYG{n}{Value} \PYG{l+m+mi}{2}
\PYG{o}{\PYGZhy{}} \PYG{n}{etc}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Format of structured field FAE5 \textendash{} format 1}

\sphinxAtStartPar
The above format limits the length of each value to a maximum of 255 bytes. A second format of the FAE5 structured
field allows the application to set a single value whose length is equal to the remainder of the structured field:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZhy{} 2 bytes Length of structured field = variable
\PYGZhy{} 2 bytes Structured field identification code = X\PYGZsq{}FAE5\PYGZsq{}
\PYGZhy{} 1 bytes X\PYGZsq{}00\PYGZsq{}
\PYGZhy{} 1 bytes Length of name (n)
\PYGZhy{} n bytes Name of variable
\PYGZhy{} x bytes Value (x=structured field length \textendash{} 6 \textendash{} n)
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Format of structured field FAE5 \textendash{} format 2}

\sphinxAtStartPar
After the application has sent a message containing an FAE5 structured field, VIRTEL considers the current screen
complete and sends the response to the user.

\index{FAE6 \sphinxhyphen{} Structured fields@\spxentry{FAE6 \sphinxhyphen{} Structured fields}!Programming Interfaces@\spxentry{Programming Interfaces}}\index{Programming Interfaces@\spxentry{Programming Interfaces}!FAE6 \sphinxhyphen{} Structured fields@\spxentry{FAE6 \sphinxhyphen{} Structured fields}}\ignorespaces 

\subsubsection{Structured field FAE6}
\label{\detokenize{User_Guide:structured-field-fae6}}\label{\detokenize{User_Guide:index-379}}
\sphinxAtStartPar
Structured field FAE6 is identical to FAE5, except that VIRTEL does not consider the current screen to be complete, and
waits for a further output message from the application before sending the response to the user.

\index{COBOL Example using FAE5@\spxentry{COBOL Example using FAE5}!Programming Interfaces@\spxentry{Programming Interfaces}}\index{Programming Interfaces@\spxentry{Programming Interfaces}!COBOL Example using FAE5@\spxentry{COBOL Example using FAE5}}\ignorespaces 

\subsubsection{COBOL example using FAE5}
\label{\detokenize{User_Guide:cobol-example-using-fae5}}\label{\detokenize{User_Guide:index-380}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o+ow}{in} \PYG{n}{Working}\PYG{o}{\PYGZhy{}}\PYG{n}{Storage}\PYG{p}{:}

\PYG{l+m+mi}{01} \PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{LONG}                    \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)}   \PYG{n}{COMP} \PYG{n}{VALUE} \PYG{o}{+}\PYG{l+m+mf}{0.}
\PYG{l+m+mi}{01} \PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{AREA}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{VARIABLE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{1.}
        \PYG{l+m+mi}{10} \PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{SFLENGTH}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}      \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)}   \PYG{n}{COMP} \PYG{n}{VALUE} \PYG{o}{+}\PYG{l+m+mf}{0.}
        \PYG{l+m+mi}{10} \PYG{n}{FILLER}               \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{)}    \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{FAE5}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{LONG}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}    \PYG{n}{PIC} \PYG{n}{X}       \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{0A}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{LONG}\PYG{o}{\PYGZhy{}}\PYG{n}{NOM}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}      \PYG{n}{PIC} \PYG{n}{X}       \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{08}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{NOM}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}           \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{8}\PYG{p}{)}    \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VARNAME1}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}       \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}   \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VALUE1}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2}       \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}   \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VALUE2}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{3}       \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}   \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VALUE3}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{VARIABLE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{2.}
        \PYG{l+m+mi}{10} \PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{SFLENGTH}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2}      \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)}   \PYG{n}{COMP} \PYG{n}{VALUE} \PYG{o}{+}\PYG{l+m+mf}{0.}
        \PYG{l+m+mi}{10} \PYG{n}{FILLER}               \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{)}    \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{FAE5}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{LONG}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2}    \PYG{n}{PIC} \PYG{n}{X}       \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{04}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{LONG}\PYG{o}{\PYGZhy{}}\PYG{n}{NOM}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2}      \PYG{n}{PIC} \PYG{n}{X}       \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{08}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{NOM}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2}           \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{8}\PYG{p}{)}    \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VARNAME2}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}       \PYG{n}{PIC} \PYG{l+m+mi}{9}\PYG{p}{(}\PYG{l+m+mi}{6}\PYG{p}{)}    \PYG{n}{VALUE} \PYG{l+m+mf}{123.}
        \PYG{l+m+mi}{10} \PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2}       \PYG{n}{PIC} \PYG{l+m+mi}{9}\PYG{p}{(}\PYG{l+m+mi}{6}\PYG{p}{)}    \PYG{n}{VALUE} \PYG{l+m+mf}{234.}
        \PYG{l+m+mi}{10} \PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{3}       \PYG{n}{PIC} \PYG{l+m+mi}{9}\PYG{p}{(}\PYG{l+m+mi}{6}\PYG{p}{)}    \PYG{n}{VALUE} \PYG{l+m+mf}{457.}

\PYG{o+ow}{in} \PYG{n}{the} \PYG{n}{Procedure} \PYG{n}{Division}\PYG{p}{:}

\PYG{n}{MOVE} \PYG{n}{LENGTH} \PYG{n}{OF} \PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{VARIABLE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1} \PYG{n}{TO} \PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{SFLENGTH}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}
\PYG{n}{MOVE} \PYG{n}{LENGTH} \PYG{n}{OF} \PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{VARIABLE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2} \PYG{n}{TO} \PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{SFLENGTH}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2}
\PYG{n}{MOVE} \PYG{n}{LENGTH} \PYG{n}{OF} \PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{AREA} \PYG{n}{TO} \PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{LONG}
\PYG{n}{EXEC} \PYG{n}{CICS} \PYG{n}{SEND}  \PYG{n}{FROM}\PYG{p}{(}\PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{AREA}\PYG{p}{)}
                \PYG{n}{LENGTH}\PYG{p}{(}\PYG{n}{FAE5}\PYG{o}{\PYGZhy{}}\PYG{n}{LONG}\PYG{p}{)}
                \PYG{n}{STRFIELD}
\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{EXEC}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example of sending structured field FAE5}

\index{Call interface@\spxentry{Call interface}!Virtel@\spxentry{Virtel}}\index{Virtel@\spxentry{Virtel}!Call interface@\spxentry{Call interface}}\ignorespaces 

\subsection{Call Interface}
\label{\detokenize{User_Guide:call-interface}}\label{\detokenize{User_Guide:index-381}}
\sphinxAtStartPar
Application programs running in a CICS or IMS environment using Language Environment (LE) can request certain
VIRTEL Web Integration functions by means of callable modules. These modules construct the necessary structured
fields and send them to VIRTEL via CICS or IMS, thus simplifying the job of the application programmer. These modules
are primarily designed to be called by CICS or IMS\sphinxhyphen{}COBOL programs, however they can also be used by application
programs written in other languages. The modules, CALL VIRSETA, CALL VIRSETV (for CICS), CALL VIRSETAI, CALL
VIRSETVI (for IMS) and CALL VIRTEL, are described in the following sections.

\index{VIRSETA@\spxentry{VIRSETA}!Call Interface@\spxentry{Call Interface}}\index{Call Interface@\spxentry{Call Interface}!VIRSETA@\spxentry{VIRSETA}}\ignorespaces 

\subsubsection{CALL VIRSETA}
\label{\detokenize{User_Guide:call-virseta}}\label{\detokenize{User_Guide:index-382}}
\sphinxAtStartPar
This module allows a CICS application program to copy an array of values into a VIRTEL table variable. The calling
program supplies the name of the variable and an array containing the values. The VIRSETA module builds one or more
FAE6 structured fields containing the variable name and the values, and sends the structured field(s) to VIRTEL using
the EXEC CICS SEND STRFIELD command.
The total size of the structured fields sent by a single call to VIRSETA cannot exceed 32K, but additional data can be
added to the VIRTEL table variable by calling VIRSETA again with the same variable name.
When VIRSETA is used to copy values into a VIRTEL table variable, all of the values must have the same length. To
create a VIRTEL table variable containing values of varying lengths, use CALL VIRSETV described in the next section.

\index{VIRSETA Parameters@\spxentry{VIRSETA Parameters}!Call Interface@\spxentry{Call Interface}}\index{Call Interface@\spxentry{Call Interface}!VIRSETA Parameters@\spxentry{VIRSETA Parameters}}\index{VIRSETA Parameters@\spxentry{VIRSETA Parameters}!VIRSETA@\spxentry{VIRSETA}}\index{VIRSETA@\spxentry{VIRSETA}!VIRSETA Parameters@\spxentry{VIRSETA Parameters}}\ignorespaces 

\subsubsection{CALL VIRSETA parameters}
\label{\detokenize{User_Guide:call-virseta-parameters}}\label{\detokenize{User_Guide:index-383}}
\sphinxAtStartPar
Parameters passed by calling program:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
DFHEIBLK

\item {} 
\sphinxAtStartPar
DFHCOMMAREA

\item {} 
\sphinxAtStartPar
Variable name (variable length EBCDIC string of 1\sphinxhyphen{}255 characters terminated by blank or X’00’)

\item {} 
\sphinxAtStartPar
An array of elements each containing one data item

\item {} 
\sphinxAtStartPar
Element size (signed halfword) contains the length of each element of the array

\item {} 
\sphinxAtStartPar
Count (signed halfword) contains the number of elements in the array

\item {} 
\sphinxAtStartPar
Data length (signed halfword) contains the length of the data item contained in each element of the array. This may be less than or equal to the element size.

\end{enumerate}

\index{VIRSETA Example@\spxentry{VIRSETA Example}!Call Interface@\spxentry{Call Interface}}\index{Call Interface@\spxentry{Call Interface}!VIRSETA Example@\spxentry{VIRSETA Example}}\index{VIRSETA Example@\spxentry{VIRSETA Example}!VIRSETA@\spxentry{VIRSETA}}\index{VIRSETA@\spxentry{VIRSETA}!VIRSETA Example@\spxentry{VIRSETA Example}}\ignorespaces 

\subsubsection{CALL VIRSETA example}
\label{\detokenize{User_Guide:call-virseta-example}}\label{\detokenize{User_Guide:index-384}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o+ow}{in} \PYG{n}{Working}\PYG{o}{\PYGZhy{}}\PYG{n}{Storage}\PYG{p}{:}
\PYG{l+m+mi}{01} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{ARRAY}\PYG{o}{.}
\PYG{l+m+mi}{05} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{ELEMENT} \PYG{n}{OCCURS} \PYG{l+m+mi}{50} \PYG{n}{TIMES}\PYG{o}{.}
\PYG{l+m+mi}{10} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{DATA}\PYG{o}{\PYGZhy{}}\PYG{n}{ITEM} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{80}\PYG{p}{)}\PYG{o}{.}
\PYG{l+m+mi}{10} \PYG{n}{FILLER} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{20}\PYG{p}{)}\PYG{o}{.}
\PYG{l+m+mi}{77} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{ELEMENT}\PYG{o}{\PYGZhy{}}\PYG{n}{SIZE} \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)} \PYG{n}{COMP} \PYG{n}{SYNC}\PYG{o}{.}
\PYG{l+m+mi}{77} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{COUNT} \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)} \PYG{n}{COMP} \PYG{n}{SYNC}\PYG{o}{.}
\PYG{l+m+mi}{77} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{DATA}\PYG{o}{\PYGZhy{}}\PYG{n}{LENGTH} \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)} \PYG{n}{COMP} \PYG{n}{SYNC}\PYG{o}{.}
\PYG{o+ow}{in} \PYG{n}{the} \PYG{n}{Procedure} \PYG{n}{Division}\PYG{p}{:}
\PYG{n}{MOVE} \PYG{n}{LENGTH} \PYG{n}{OF} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{ELEMENT} \PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{)} \PYG{n}{TO} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{ELEMENT}\PYG{o}{\PYGZhy{}}\PYG{n}{SIZE}\PYG{o}{.}
\PYG{n}{MOVE} \PYG{l+m+mi}{50} \PYG{n}{TO} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{COUNT}\PYG{o}{.}
\PYG{n}{MOVE} \PYG{n}{LENGTH} \PYG{n}{OF} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{DATA}\PYG{o}{\PYGZhy{}}\PYG{n}{ITEM} \PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{)} \PYG{n}{TO} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{DATA}\PYG{o}{\PYGZhy{}}\PYG{n}{LENGTH}\PYG{o}{.}
\PYG{n}{CALL} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VIRSETA}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{USING} \PYG{n}{DFHEIBLK}
\PYG{n}{DFHCOMMAREA}
\PYG{n}{BY} \PYG{n}{CONTENT} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{MYVAR }\PYG{l+s+s1}{\PYGZsq{}}
\PYG{n}{BY} \PYG{n}{REFERENCE} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{ARRAY}
\PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{ELEMENT}\PYG{o}{\PYGZhy{}}\PYG{n}{SIZE}
\PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{COUNT}
\PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{DATA}\PYG{o}{\PYGZhy{}}\PYG{n}{LENGTH}\PYG{o}{.}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example of VIRTEL Web Integration application using CALL VIRSETA}

\index{VIRSETA return codes@\spxentry{VIRSETA return codes}!Call Interface@\spxentry{Call Interface}}\index{Call Interface@\spxentry{Call Interface}!VIRSETA return codes@\spxentry{VIRSETA return codes}}\index{VIRSETA return codes@\spxentry{VIRSETA return codes}!VIRSETA@\spxentry{VIRSETA}}\index{VIRSETA@\spxentry{VIRSETA}!VIRSETA return codes@\spxentry{VIRSETA return codes}}\ignorespaces 

\subsubsection{CALL VIRSETA return codes}
\label{\detokenize{User_Guide:call-virseta-return-codes}}\label{\detokenize{User_Guide:index-385}}
\sphinxAtStartPar
If the call was successful, VIRSETA returns to the calling program. Otherwise, VIRSETA terminates with an EXEC CICS ABEND.
The following abend codes may be issued by VIRSETA:
\begin{description}
\sphinxlineitem{VSA1}
\sphinxAtStartPar
Length of variable name is outside the range 1\sphinxhyphen{}255, or the required terminator (blank or X’00’) is missing

\sphinxlineitem{VSA2}
\sphinxAtStartPar
Data length is less than 1, or exceeds the element length.

\sphinxlineitem{VSA3}
\sphinxAtStartPar
Count is less than 1.

\sphinxlineitem{VSA4}
\sphinxAtStartPar
Data exceeds the maximum allowed size. If the length of each data item is 255 or less, then the total size of the data (count x data length) must not exceed 32760 \textendash{} N, where N is the number of characters in the variable name. If the length of each data item is 256 or more, then count x (data length + 6 + N) must not exceed 32767.

\end{description}

\sphinxAtStartPar
Additionally CICS may issue an abend if the EXEC CICS SEND STRFIELD command is unsuccessful.

\index{VIRSETV (CICS)@\spxentry{VIRSETV}\spxextra{CICS}!Call Interface@\spxentry{Call Interface}}\index{Call Interface@\spxentry{Call Interface}!VIRSETV (CICS)@\spxentry{VIRSETV}\spxextra{CICS}}\index{Set value of varibale@\spxentry{Set value of varibale}!VIRSETV@\spxentry{VIRSETV}}\index{VIRSETV@\spxentry{VIRSETV}!Set value of varibale@\spxentry{Set value of varibale}}\ignorespaces 

\subsubsection{CALL VIRSETV (CICS)}
\label{\detokenize{User_Guide:call-virsetv-cics}}\label{\detokenize{User_Guide:index-386}}
\sphinxAtStartPar
This module allows a CICS application program to set the value of a VIRTEL variable. The calling program supplies the
name of the variable and the value to be set. The VIRSETV module builds an FAE6 structured field containing the
variable name and value, and sends the structured field to VIRTEL using the EXEC CICS SEND STRFIELD command.

\sphinxAtStartPar
VIRTEL variables containing more than one value are known as table variables. The application program can create a
table variable by calling the VIRSETV module several times with the same variable name. The first call creates the
variable and adds the first value to it. Subsequent calls add additional values to the table variable.

\index{VIRSETV Parameters@\spxentry{VIRSETV Parameters}!Call Interface@\spxentry{Call Interface}}\index{Call Interface@\spxentry{Call Interface}!VIRSETV Parameters@\spxentry{VIRSETV Parameters}}\index{VIRSETV Parameters@\spxentry{VIRSETV Parameters}!VIRSETV@\spxentry{VIRSETV}}\index{VIRSETV@\spxentry{VIRSETV}!VIRSETV Parameters@\spxentry{VIRSETV Parameters}}\ignorespaces 

\subsubsection{CALL VIRSETV parameters}
\label{\detokenize{User_Guide:call-virsetv-parameters}}\label{\detokenize{User_Guide:index-387}}
\sphinxAtStartPar
Parameters passed by calling program:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
DFHEIBLK

\item {} 
\sphinxAtStartPar
DFHCOMMAREA

\item {} 
\sphinxAtStartPar
Variable name (variable length EBCDIC string of 1\sphinxhyphen{}255 characters terminated by blank or X’00’)

\item {} 
\sphinxAtStartPar
Value (variable length)

\item {} 
\sphinxAtStartPar
Length (signed halfword field containing length of value)

\end{enumerate}

\index{VIRSETV Example@\spxentry{VIRSETV Example}!Call Interface@\spxentry{Call Interface}}\index{Call Interface@\spxentry{Call Interface}!VIRSETV Example@\spxentry{VIRSETV Example}}\index{VIRSETV Example@\spxentry{VIRSETV Example}!VIRSETV@\spxentry{VIRSETV}}\index{VIRSETV@\spxentry{VIRSETV}!VIRSETV Example@\spxentry{VIRSETV Example}}\ignorespaces 

\subsubsection{CALL VIRSETV example}
\label{\detokenize{User_Guide:call-virsetv-example}}\label{\detokenize{User_Guide:index-388}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o+ow}{in} \PYG{n}{Working}\PYG{o}{\PYGZhy{}}\PYG{n}{Storage}\PYG{p}{:}
\PYG{l+m+mi}{77} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{BUFFER} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{80}\PYG{p}{)} \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{** MY VALUE **}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
\PYG{l+m+mi}{77} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{LENGTH} \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)} \PYG{n}{COMP} \PYG{n}{SYNC}\PYG{o}{.}
\PYG{o+ow}{in} \PYG{n}{the} \PYG{n}{Procedure} \PYG{n}{Division}\PYG{p}{:}
\PYG{n}{MOVE} \PYG{n}{LENGTH} \PYG{n}{OF} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{BUFFER} \PYG{n}{TO} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{LENGTH}\PYG{o}{.}
\PYG{n}{CALL} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VIRSETV}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{USING} \PYG{n}{DFHEIBLK}
\PYG{n}{DFHCOMMAREA}
\PYG{n}{BY} \PYG{n}{CONTENT} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{MYVAR }\PYG{l+s+s1}{\PYGZsq{}}
\PYG{n}{BY} \PYG{n}{REFERENCE} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{BUFFER}
\PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{LENGTH}\PYG{o}{.}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example of VIRTEL Web Integration application using CALL VIRSETV}

\index{VIRSETV return codes@\spxentry{VIRSETV return codes}!Call Interface@\spxentry{Call Interface}}\index{Call Interface@\spxentry{Call Interface}!VIRSETV return codes@\spxentry{VIRSETV return codes}}\index{VIRSETV return codes@\spxentry{VIRSETV return codes}!VIRSETV@\spxentry{VIRSETV}}\index{VIRSETV@\spxentry{VIRSETV}!VIRSETV return codes@\spxentry{VIRSETV return codes}}\ignorespaces 

\subsubsection{CALL VIRSETV return codes}
\label{\detokenize{User_Guide:call-virsetv-return-codes}}\label{\detokenize{User_Guide:index-389}}
\sphinxAtStartPar
If the call was successful, VIRSETV returns to the calling program. Otherwise, VIRSETV terminates with an EXEC CICS ABEND.
The following abend codes may be issued by VIRSETV:
\begin{description}
\sphinxlineitem{VSV1}
\sphinxAtStartPar
Length of variable name is outside the range 1\sphinxhyphen{}255, or the required terminator (blank or X’00’) is missing

\sphinxlineitem{VSV2}
\sphinxAtStartPar
Length of value is negative or exceeds the maximum allowed length (32760 minus the length of the variable name).

\end{description}

\sphinxAtStartPar
Additionally CICS may issue an abend if the EXEC CICS SEND STRFIELD command is unsuccessful.

\index{VIRSETAI@\spxentry{VIRSETAI}!Call Interface@\spxentry{Call Interface}}\index{Call Interface@\spxentry{Call Interface}!VIRSETAI@\spxentry{VIRSETAI}}\index{Copy an array@\spxentry{Copy an array}!VIRSETAI@\spxentry{VIRSETAI}}\index{VIRSETAI@\spxentry{VIRSETAI}!Copy an array@\spxentry{Copy an array}}\ignorespaces 

\subsubsection{CALL VIRSETAI (IMS)}
\label{\detokenize{User_Guide:call-virsetai-ims}}\label{\detokenize{User_Guide:index-390}}
\sphinxAtStartPar
This module allows an IMS application program to copy an array of values into a VIRTEL table variable. The calling
program supplies the name of the variable and an array containing the values. The VIRSETAI module builds one or
more FAE6 structured fields containing the variable name and the values, and sends the structured field(s) to VIRTEL
using the CALL ‘CBLTDLI’ USING ISRT, LS\sphinxhyphen{}IOPCB, OUTPUT\sphinxhyphen{}MESSAGE, MFS command.

\sphinxAtStartPar
The total size of the structured fields sent by a single call to VIRSETAI cannot exceed 32K, but additional data can be
added to the VIRTEL table variable by calling VIRSETAI again with the same variable name.

\sphinxAtStartPar
When VIRSETAI is used to copy values into a VIRTEL table variable, all of the values must have the same length. To
create a VIRTEL table variable containing values of varying lengths, use CALL VIRSETVI described in the next section.

\index{VIRSETAI parameters@\spxentry{VIRSETAI parameters}!Call Interface@\spxentry{Call Interface}}\index{Call Interface@\spxentry{Call Interface}!VIRSETAI parameters@\spxentry{VIRSETAI parameters}}\index{VIRSETAI parameters@\spxentry{VIRSETAI parameters}!VIRSETAI@\spxentry{VIRSETAI}}\index{VIRSETAI@\spxentry{VIRSETAI}!VIRSETAI parameters@\spxentry{VIRSETAI parameters}}\ignorespaces 

\subsubsection{CALL VIRSETAI parameters}
\label{\detokenize{User_Guide:call-virsetai-parameters}}\label{\detokenize{User_Guide:index-391}}
\sphinxAtStartPar
Parameters passed by calling program:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Variable name (variable length EBCDIC string of 1\sphinxhyphen{}255 characters terminated by blank or X’00’)

\item {} 
\sphinxAtStartPar
An array of elements each containing one data item

\item {} 
\sphinxAtStartPar
Element size (signed halfword) contains the length of each element of the array

\item {} 
\sphinxAtStartPar
Count (signed halfword) contains the number of elements in the array

\item {} 
\sphinxAtStartPar
Data length (signed halfword) contains the length of the data item contained in each element of the array. This may be less than or equal to the element size.

\item {} 
\sphinxAtStartPar
IMS I/O PCB

\end{enumerate}

\index{VIRSETAI Example@\spxentry{VIRSETAI Example}!Call Interface@\spxentry{Call Interface}}\index{Call Interface@\spxentry{Call Interface}!VIRSETAI Example@\spxentry{VIRSETAI Example}}\index{VIRSETAI Example@\spxentry{VIRSETAI Example}!VIRSETAI@\spxentry{VIRSETAI}}\index{VIRSETAI@\spxentry{VIRSETAI}!VIRSETAI Example@\spxentry{VIRSETAI Example}}\ignorespaces 

\subsubsection{CALL VIRSETAI example}
\label{\detokenize{User_Guide:call-virsetai-example}}\label{\detokenize{User_Guide:index-392}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o+ow}{in} \PYG{n}{Working}\PYG{o}{\PYGZhy{}}\PYG{n}{Storage}\PYG{p}{:}

\PYG{l+m+mi}{01} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{TABLE}\PYG{o}{.}
\PYG{l+m+mi}{05} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{ELEMENT} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{80}\PYG{p}{)} \PYG{n}{OCCURS} \PYG{l+m+mi}{100} \PYG{n}{TIMES}\PYG{o}{.}
\PYG{l+m+mi}{77} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{TESTDATA} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)} \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{TEST DATA}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
\PYG{l+m+mi}{77} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{ELEMSIZE} \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)} \PYG{n}{COMP} \PYG{n}{SYNC}\PYG{o}{.}
\PYG{l+m+mi}{77} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{COUNT} \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)} \PYG{n}{COMP} \PYG{n}{SYNC}\PYG{o}{.}
\PYG{l+m+mi}{77} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{DATALEN} \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)} \PYG{n}{COMP} \PYG{n}{SYNC}\PYG{o}{.}
\PYG{l+m+mi}{77} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{RC1} \PYG{n}{PIC} \PYG{n}{X}\PYG{o}{.}

\PYG{o+ow}{in} \PYG{n}{Procedure} \PYG{n}{Division}\PYG{p}{:}

\PYG{n}{MOVE} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{TESTDATA} \PYG{n}{TO} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{ELEMENT} \PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{)}\PYG{o}{.}
\PYG{n}{MOVE} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{TESTDATA} \PYG{n}{TO} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{ELEMENT} \PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{)}\PYG{o}{.}
\PYG{n}{MOVE} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{TESTDATA} \PYG{n}{TO} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{ELEMENT} \PYG{p}{(}\PYG{l+m+mi}{3}\PYG{p}{)}\PYG{o}{.}
\PYG{n}{MOVE} \PYG{n}{LENGTH} \PYG{n}{OF} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{ELEMENT} \PYG{p}{(}\PYG{l+m+mi}{1}\PYG{p}{)} \PYG{n}{TO} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{ELEMSIZE}\PYG{o}{.}
\PYG{n}{MOVE} \PYG{l+m+mi}{3} \PYG{n}{TO} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{COUNT}\PYG{o}{.}
\PYG{n}{MOVE} \PYG{n}{LENGTH} \PYG{n}{OF} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{TESTDATA} \PYG{n}{TO} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{DATALEN}\PYG{o}{.}
\PYG{n}{CALL} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VIRSETAI}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{USING} \PYG{n}{CONTENT} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{MYVAR }\PYG{l+s+s1}{\PYGZsq{}}
\PYG{n}{REFERENCE} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{TABLE}
\PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{ELEMSIZE}
\PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{COUNT}
\PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{DATALEN}
\PYG{n}{LS}\PYG{o}{\PYGZhy{}}\PYG{n}{IOPCB}
\PYG{n}{RETURNING} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{RC1}\PYG{o}{.}
\PYG{n}{IF} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{RC1} \PYG{n}{NOT} \PYG{n}{EQUAL} \PYG{l+m+mi}{0} \PYG{n}{GO} \PYG{n}{TO} \PYG{n}{ERROR}\PYG{o}{.}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example of VIRTEL Web Integration application using CALL VIRSETAI}

\index{VIRSETVI@\spxentry{VIRSETVI}!Call Interface@\spxentry{Call Interface}}\index{Call Interface@\spxentry{Call Interface}!VIRSETVI@\spxentry{VIRSETVI}}\index{Set value of variable@\spxentry{Set value of variable}!VIRSETVI@\spxentry{VIRSETVI}}\index{VIRSETVI@\spxentry{VIRSETVI}!Set value of variable@\spxentry{Set value of variable}}\ignorespaces 

\subsubsection{CALL VIRSETVI (IMS)}
\label{\detokenize{User_Guide:call-virsetvi-ims}}\label{\detokenize{User_Guide:index-393}}
\sphinxAtStartPar
This module allows an IMS application program to set the value of a VIRTEL variable. The calling program supplies the
name of the variable and the value to be set. The VIRSETVI module builds an FAE6 structured field containing the
variable name and value, and sends the structured field to VIRTEL using the CALL ‘CBLTDLI’ USING ISRT, LS\sphinxhyphen{}IOPCB,
OUTPUT\sphinxhyphen{}MESSAGE, MFS command.
VIRTEL variables containing more than one value are known as table variables. The application program can create a
table variable by calling the VIRSETVI module several times with the same variable name. The first call creates the
variable and adds the first value to it. Subsequent calls add additional values to the table variable.


\subsubsection{CALL VIRSETVI parameters}
\label{\detokenize{User_Guide:call-virsetvi-parameters}}
\sphinxAtStartPar
Parameters passed by calling program:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Variable name (variable length EBCDIC string of 1\sphinxhyphen{}255 characters terminated by blank or X’00’)

\item {} 
\sphinxAtStartPar
Value (variable length)

\item {} 
\sphinxAtStartPar
Length (signed halfword field containing length of value)

\item {} 
\sphinxAtStartPar
IMS I/O PCB

\end{enumerate}


\subsubsection{CALL VIRSETVI example}
\label{\detokenize{User_Guide:call-virsetvi-example}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o+ow}{in} \PYG{n}{Working}\PYG{o}{\PYGZhy{}}\PYG{n}{Storage}\PYG{p}{:}

    \PYG{l+m+mi}{77} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{BUFFER} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{80}\PYG{p}{)} \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{** MY VALUE **}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{77} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{LENGTH} \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)} \PYG{n}{COMP} \PYG{n}{SYNC}\PYG{o}{.}
    \PYG{l+m+mi}{77} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{RC1} \PYG{n}{PIC} \PYG{n}{X}\PYG{o}{.}

\PYG{o+ow}{in} \PYG{n}{Procedure} \PYG{n}{Division}\PYG{p}{:}
    \PYG{n}{MOVE} \PYG{n}{LENGTH} \PYG{n}{OF} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{BUFFER} \PYG{n}{TO} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{LENGTH}\PYG{o}{.}
    \PYG{n}{CALL} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VIRSETVI}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{USING} \PYG{n}{CONTENT} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{MYVAR }\PYG{l+s+s1}{\PYGZsq{}}
                    \PYG{n}{REFERENCE} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{BUFFER}
                    \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{LENGTH}
                    \PYG{n}{LS}\PYG{o}{\PYGZhy{}}\PYG{n}{IOPCB}
        \PYG{n}{RETURNING} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{RC1}\PYG{o}{.}
\PYG{n}{IF} \PYG{n}{WS}\PYG{o}{\PYGZhy{}}\PYG{n}{RC1} \PYG{n}{NOT} \PYG{n}{EQUAL} \PYG{l+m+mi}{0} \PYG{n}{GO} \PYG{n}{TO} \PYG{n}{ERROR}\PYG{o}{.}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example of VIRTEL Web Integration application using CALL VIRSETVI}

\index{VIRTEL@\spxentry{VIRTEL}!Call Interface@\spxentry{Call Interface}}\index{Call Interface@\spxentry{Call Interface}!VIRTEL@\spxentry{VIRTEL}}\index{Build and send structured fields@\spxentry{Build and send structured fields}!VIRTEL@\spxentry{VIRTEL}}\index{VIRTEL@\spxentry{VIRTEL}!Build and send structured fields@\spxentry{Build and send structured fields}}\ignorespaces 

\subsubsection{CALL VIRTEL (CICS)}
\label{\detokenize{User_Guide:call-virtel-cics}}\label{\detokenize{User_Guide:index-394}}
\sphinxAtStartPar
Application programs running in a CICS environment with LE can also call a module named VIRTEL (see source
delivered in the VIRTEL SAMPLIB library at installation time) which builds and sends the structured fields necessary to
invoke the following functions:
\sphinxhyphen{} specify page template and directory (structured field FAC8)
\sphinxhyphen{} send data for table variables (structured field FAE6)

\index{VIRTEL@\spxentry{VIRTEL}!Call Interface@\spxentry{Call Interface}}\index{Call Interface@\spxentry{Call Interface}!VIRTEL@\spxentry{VIRTEL}}\index{VIRTEL Example@\spxentry{VIRTEL Example}!VIRTEL@\spxentry{VIRTEL}}\index{VIRTEL@\spxentry{VIRTEL}!VIRTEL Example@\spxentry{VIRTEL Example}}\ignorespaces 

\subsubsection{CALL VIRTEL example}
\label{\detokenize{User_Guide:call-virtel-example}}\label{\detokenize{User_Guide:index-395}}
\sphinxAtStartPar
The following COBOL example shows how to use CALL VIRTEL to send two table variables (CHP\_NUM1 and
CPT\_NUM1) and to request the use of a specific page template (page WEB2VIRT in directory DEMO):

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o+ow}{in} \PYG{n}{Working}\PYG{o}{\PYGZhy{}}\PYG{n}{Storage}\PYG{p}{:}

\PYG{o}{*} \PYG{n}{CALL} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VIRTEL}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{takes} \PYG{n}{one} \PYG{n}{parameter} \PYG{k}{with} \PYG{n}{maximum} \PYG{n}{size} \PYG{l+m+mi}{2048} \PYG{n+nb}{bytes}
\PYG{l+m+mi}{01} \PYG{n}{PARAMETRES}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{FAC8}\PYG{o}{.}
    \PYG{l+m+mi}{02} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{FONCTION}\PYG{o}{\PYGZhy{}}\PYG{n}{FAC8} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)} \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{SENDPAGW}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{02} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CODE}\PYG{o}{\PYGZhy{}}\PYG{n}{RETOUR}\PYG{o}{\PYGZhy{}}\PYG{n}{FAC8} \PYG{n}{PIC} \PYG{l+m+mi}{9}\PYG{p}{(}\PYG{l+m+mi}{02}\PYG{p}{)} \PYG{n}{VALUE} \PYG{l+m+mf}{0.}
    \PYG{l+m+mi}{02} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{PAGE}\PYG{o}{\PYGZhy{}}\PYG{n}{HTML} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)} \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{WEB2VIRT}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{02} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{REPERTOIRE} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)} \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{DEMO }\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{02} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{FILLER}\PYG{o}{\PYGZhy{}}\PYG{n}{FAC8} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{2016}\PYG{p}{)}\PYG{o}{.}
\PYG{l+m+mi}{01} \PYG{n}{PARAMETRES}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{FAE6}\PYG{o}{.}
    \PYG{l+m+mi}{02} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{FONCTION}\PYG{o}{\PYGZhy{}}\PYG{n}{FAE6} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)} \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{SENDTABW}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{02} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CODE}\PYG{o}{\PYGZhy{}}\PYG{n}{RETOUR}\PYG{o}{\PYGZhy{}}\PYG{n}{FAE6} \PYG{n}{PIC} \PYG{l+m+mi}{9}\PYG{p}{(}\PYG{l+m+mi}{02}\PYG{p}{)} \PYG{n}{VALUE} \PYG{l+m+mf}{0.}
    \PYG{l+m+mi}{02} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{LONG}\PYG{o}{\PYGZhy{}}\PYG{n}{NOM} \PYG{n}{PIC} \PYG{l+m+mi}{9}\PYG{p}{(}\PYG{l+m+mi}{02}\PYG{p}{)}\PYG{o}{.}
    \PYG{l+m+mi}{02} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{LONG}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE} \PYG{n}{PIC} \PYG{l+m+mi}{9}\PYG{p}{(}\PYG{l+m+mi}{02}\PYG{p}{)}\PYG{o}{.}
    \PYG{l+m+mi}{02} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{NBR}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE} \PYG{n}{PIC} \PYG{l+m+mi}{9}\PYG{p}{(}\PYG{l+m+mi}{03}\PYG{p}{)}\PYG{o}{.}
    \PYG{l+m+mi}{02} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{FAE6}\PYG{o}{\PYGZhy{}}\PYG{n}{DATA}\PYG{o}{.}
        \PYG{l+m+mi}{05} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{NOM} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{08}\PYG{p}{)}\PYG{o}{.}
        \PYG{l+m+mi}{05} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{01} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{o}{.}
        \PYG{l+m+mi}{05} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{02} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{o}{.}
        \PYG{l+m+mi}{05} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{03} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{o}{.}
        \PYG{l+m+mi}{05} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{04} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{o}{.}
        \PYG{l+m+mi}{05} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{05} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{o}{.}
        \PYG{l+m+mi}{05} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{06} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{o}{.}
        \PYG{l+m+mi}{05} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{07} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{o}{.}
        \PYG{l+m+mi}{05} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{08} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{o}{.}
        \PYG{l+m+mi}{05} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{09} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{o}{.}
        \PYG{l+m+mi}{05} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{FILLER}\PYG{o}{\PYGZhy{}}\PYG{n}{FAE6} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{1937}\PYG{p}{)}\PYG{o}{.}
    \PYG{l+m+mi}{02} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{FAE6}\PYG{o}{\PYGZhy{}}\PYG{n}{DATA1} \PYG{n}{REDEFINES} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{FAE6}\PYG{o}{\PYGZhy{}}\PYG{n}{DATA}\PYG{o}{.}
        \PYG{l+m+mi}{05} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{NOM1} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{08}\PYG{p}{)}\PYG{o}{.}
        \PYG{l+m+mi}{05} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE1}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{01} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{o}{.}
        \PYG{l+m+mi}{05} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE1}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{02} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{o}{.}
        \PYG{l+m+mi}{05} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE1}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{03} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{o}{.}
        \PYG{l+m+mi}{05} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE1}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{04} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{o}{.}
        \PYG{l+m+mi}{05} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE1}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{05} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{o}{.}
        \PYG{l+m+mi}{05} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE1}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{06} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{o}{.}
        \PYG{l+m+mi}{05} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE1}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{07} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{o}{.}
        \PYG{l+m+mi}{05} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE1}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{08} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{o}{.}
        \PYG{l+m+mi}{05} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE1}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{09} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)}\PYG{o}{.}
        \PYG{l+m+mi}{05} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{FILLER1}\PYG{o}{\PYGZhy{}}\PYG{n}{FAE6} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{913}\PYG{p}{)}\PYG{o}{.}

\PYG{o+ow}{in} \PYG{n}{the} \PYG{n}{Procedure} \PYG{n}{Division}\PYG{p}{:}

    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{SENDPAGW}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{FONCTION}\PYG{o}{\PYGZhy{}}\PYG{n}{FAC8}
    \PYG{n}{MOVE} \PYG{l+m+mi}{0} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CODE}\PYG{o}{\PYGZhy{}}\PYG{n}{RETOUR}\PYG{o}{\PYGZhy{}}\PYG{n}{FAC8}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{WEB2VIRT}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{PAGE}\PYG{o}{\PYGZhy{}}\PYG{n}{HTML}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{DEMO }\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{REPERTOIRE}
    \PYG{n}{MOVE} \PYG{n}{SPACES} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{FILLER}\PYG{o}{\PYGZhy{}}\PYG{n}{FAC8}
    \PYG{n}{CALL} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VIRTEL}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{USING} \PYG{n}{DFHEIBLK}
                        \PYG{n}{PARAMETRES}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{FAC8}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{SENDTABW}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{FONCTION}\PYG{o}{\PYGZhy{}}\PYG{n}{FAE6}
    \PYG{n}{MOVE} \PYG{l+m+mi}{0} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CODE}\PYG{o}{\PYGZhy{}}\PYG{n}{RETOUR}\PYG{o}{\PYGZhy{}}\PYG{n}{FAE6}
    \PYG{n}{MOVE} \PYG{l+m+mi}{08} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{LONG}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{.}
    \PYG{n}{MOVE} \PYG{l+m+mi}{9} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{NBR}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{.}
    \PYG{n}{MOVE} \PYG{l+m+mi}{08} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{LONG}\PYG{o}{\PYGZhy{}}\PYG{n}{NOM}\PYG{o}{.}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{CHP\PYGZus{}NUM1}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{NOM}\PYG{o}{.}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VAL\PYGZhy{}001}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{01}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VAL\PYGZhy{}002}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{02.}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VAL\PYGZhy{}003}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{03.}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VAL\PYGZhy{}004}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{04.}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VAL\PYGZhy{}005}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{05.}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VAL\PYGZhy{}006}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{06.}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VAL\PYGZhy{}007}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{07.}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VAL\PYGZhy{}008}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{08.}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VAL\PYGZhy{}009}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{09.}
    \PYG{n}{MOVE} \PYG{n}{SPACES} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{FILLER}\PYG{o}{\PYGZhy{}}\PYG{n}{FAE6}
    \PYG{n}{CALL} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VIRTEL}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{USING} \PYG{n}{DFHEIBLK}
                        \PYG{n}{PARAMETRES}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{FAE6}
    \PYG{n}{MOVE} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CODE}\PYG{o}{\PYGZhy{}}\PYG{n}{RETOUR}\PYG{o}{\PYGZhy{}}\PYG{n}{FAE6} \PYG{n}{TO} \PYG{n}{TD}\PYG{o}{\PYGZhy{}}\PYG{n}{MSG}\PYG{o}{\PYGZhy{}}\PYG{n}{RETCODE}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{SENDTABW}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{FONCTION}\PYG{o}{\PYGZhy{}}\PYG{n}{FAE6}
    \PYG{n}{MOVE} \PYG{l+m+mi}{0} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CODE}\PYG{o}{\PYGZhy{}}\PYG{n}{RETOUR}\PYG{o}{\PYGZhy{}}\PYG{n}{FAE6}
    \PYG{n}{MOVE} \PYG{l+m+mi}{08} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{LONG}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{.}
    \PYG{n}{MOVE} \PYG{l+m+mi}{9} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{NBR}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE}\PYG{o}{.}
    \PYG{n}{MOVE} \PYG{l+m+mi}{08} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{LONG}\PYG{o}{\PYGZhy{}}\PYG{n}{NOM}\PYG{o}{.}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{CPT\PYGZus{}NUM1}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{NOM1}\PYG{o}{.}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{CPT\PYGZhy{}0001}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE1}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{01.}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{CPT\PYGZhy{}0002}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE1}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{02.}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{CPT\PYGZhy{}0003}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE1}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{03.}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{CPT\PYGZhy{}0004}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE1}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{04.}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{CPT\PYGZhy{}0005}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE1}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{05.}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{CPT\PYGZhy{}0006}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE1}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{06.}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{CPT\PYGZhy{}0007}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE1}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{07.}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{CPT\PYGZhy{}0008}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE1}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{08.}
    \PYG{n}{MOVE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{CPT\PYGZhy{}0009}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{POSTE1}\PYG{o}{\PYGZhy{}}\PYG{l+m+mf}{09.}
    \PYG{n}{MOVE} \PYG{n}{SPACES} \PYG{n}{TO} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{FILLER1}\PYG{o}{\PYGZhy{}}\PYG{n}{FAE6}
    \PYG{n}{CALL} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{VIRTEL}\PYG{l+s+s1}{\PYGZsq{}} \PYG{n}{USING} \PYG{n}{DFHEIBLK}
                        \PYG{n}{PARAMETRES}\PYG{o}{\PYGZhy{}}\PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{FAE6}
\PYG{n}{MOVE} \PYG{n}{VIRTEL}\PYG{o}{\PYGZhy{}}\PYG{n}{CODE}\PYG{o}{\PYGZhy{}}\PYG{n}{RETOUR}\PYG{o}{\PYGZhy{}}\PYG{n}{FAE6} \PYG{n}{TO} \PYG{n}{TD}\PYG{o}{\PYGZhy{}}\PYG{n}{MSG}\PYG{o}{\PYGZhy{}}\PYG{n}{RETCODE}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example of VIRTEL Web Integration application using CALL VIRTEL}

\index{VIRTEL@\spxentry{VIRTEL}!Call Interface@\spxentry{Call Interface}}\index{Call Interface@\spxentry{Call Interface}!VIRTEL@\spxentry{VIRTEL}}\index{VIRTEL return codes@\spxentry{VIRTEL return codes}!VIRTEL@\spxentry{VIRTEL}}\index{VIRTEL@\spxentry{VIRTEL}!VIRTEL return codes@\spxentry{VIRTEL return codes}}\ignorespaces 

\subsubsection{CALL VIRTEL return codes}
\label{\detokenize{User_Guide:call-virtel-return-codes}}\label{\detokenize{User_Guide:index-396}}
\sphinxAtStartPar
Return codes for the SENDPAGW function
\begin{quote}

\sphinxAtStartPar
The VIRTEL\sphinxhyphen{}CODE\sphinxhyphen{}RETOUR field should be initialized to 0. The following values may be returned:
\begin{description}
\sphinxlineitem{0}
\sphinxAtStartPar
OK, VIRTEL request accepted (does not guarantee that page has been displayed in browser)

\sphinxlineitem{1}
\sphinxAtStartPar
Invalid function

\sphinxlineitem{2}
\sphinxAtStartPar
HTML page name invalid (blank or low\sphinxhyphen{}value)

\sphinxlineitem{3}
\sphinxAtStartPar
Directory name invalid (blank or low\sphinxhyphen{}value)

\end{description}
\end{quote}

\sphinxAtStartPar
Return codes for the SENDTABW function
\begin{quote}

\sphinxAtStartPar
The VIRTEL\sphinxhyphen{}CODE\sphinxhyphen{}RETOUR field should be initialized to 0. The following values may be returned:
\begin{description}
\sphinxlineitem{0}
\sphinxAtStartPar
OK, VIRTEL request accepted (does not guarantee that page has been displayed in browser)

\sphinxlineitem{1}
\sphinxAtStartPar
Invalid function

\sphinxlineitem{11}
\sphinxAtStartPar
Length of NAME non\sphinxhyphen{}numeric

\sphinxlineitem{12}
\sphinxAtStartPar
Length of VALUE non\sphinxhyphen{}numeric

\sphinxlineitem{13}
\sphinxAtStartPar
Number of values is non\sphinxhyphen{}numeric

\end{description}
\end{quote}

\newpage
\phantomsection\label{\detokenize{User_Guide:v462ug-host4web}}
\index{HOST4WEB@\spxentry{HOST4WEB}}\index{Commands@\spxentry{Commands}!HOST4WEB@\spxentry{HOST4WEB}}\index{HOST4WEB@\spxentry{HOST4WEB}!Commands@\spxentry{Commands}}\ignorespaces 

\subsection{HOST4WEB commands}
\label{\detokenize{User_Guide:host4web-commands}}\label{\detokenize{User_Guide:index-397}}
\sphinxAtStartPar
When an application is invoked from a browser via an entry point defined with emulation type HOST4WEB, the
application can use a set of VIRTEL control commands known as “HOST4WEB” commands, which are coded in the 3270
screen.2

\index{Processing conditions@\spxentry{Processing conditions}!HOST4WEB@\spxentry{HOST4WEB}}\index{HOST4WEB@\spxentry{HOST4WEB}!Processing conditions@\spxentry{Processing conditions}}\ignorespaces 

\subsubsection{Processing conditions}
\label{\detokenize{User_Guide:processing-conditions}}\label{\detokenize{User_Guide:index-398}}
\sphinxAtStartPar
HOST4WEB commands are recognized by VIRTEL when the entry point definition specifies emulation type HTML, HOST4WEB, or H4W, and any of the following conditions is true:
\begin{itemize}
\item {} 
\sphinxAtStartPar
the VIRTEL transaction definition contains value 1 in the “H4W Commands” field

\item {} 
\sphinxAtStartPar
the VIRTEL transaction definition contains value 2 in the “H4W Commands” field and the message has a ‘2VIRTEL’ prefix (see below)

\item {} 
\sphinxAtStartPar
the VIRTEL transaction definition contains value 4 in the “H4W Commands” field and the entry point definition specifies emulation type HOST4WEB or H4W

\item {} 
\sphinxAtStartPar
the VIRTEL transaction definition contains value 4 in the “H4W Commands” field and the entry point definition specifies emulation type HTML and the message has a ‘2VIRTEL’ prefix (see below)

\item {} 
\sphinxAtStartPar
the previous screen contained the HOST4WEB command C SCAN NEXT SCREEN

\item {} 
\sphinxAtStartPar
the application previously sent an FAD5 code 01 structured field

\end{itemize}

\sphinxAtStartPar
All HOST4WEB commands must begin immediately after a 3270 attrbute byte, in other words each command must appear at the start of a 3270 field. The non\sphinxhyphen{}display attribute may be used, if desired, to prevent the command appearing on the screen. To define a non\sphinxhyphen{}display field in BMS, specify ATTRB=(ASKIP,DRK). To define a non\sphinxhyphen{}display field in ISPF, use an attribute character defined as INTENS(NON) in the )ATTR section of the panel.

\sphinxAtStartPar
ISPF applications must use the ISPEXEC CONTROL DISPLAY REFRESH command before the ISPEXEC DISPLAY PANEL
command to ensure that HOST4WEB commands are transmitted to VIRTEL in their entirety.

\index{2VIRTEL prefix@\spxentry{2VIRTEL prefix}!HOST4WEB@\spxentry{HOST4WEB}}\index{HOST4WEB@\spxentry{HOST4WEB}!2VIRTEL prefix@\spxentry{2VIRTEL prefix}}\ignorespaces 

\subsubsection{2VIRTEL prefix}
\label{\detokenize{User_Guide:virtel-prefix}}\label{\detokenize{User_Guide:index-399}}
\sphinxAtStartPar
An application can send a 3270 message with a special prefix to indicate to VIRTEL that the screen contains HOST4WEB commands. The prefix consists of a 3270 field starting with the characters ‘2VIRTEL’. This field must be the first field transmitted in the message. The field can be defined with the “non\sphinxhyphen{}display” attribute, if desired, to prevent the prefix appearing on the screen.

\index{HOST4WEB Commands@\spxentry{HOST4WEB Commands}!HOST4WEB@\spxentry{HOST4WEB}}\index{HOST4WEB@\spxentry{HOST4WEB}!HOST4WEB Commands@\spxentry{HOST4WEB Commands}}\ignorespaces 

\subsubsection{List of commands}
\label{\detokenize{User_Guide:list-of-commands}}\label{\detokenize{User_Guide:index-400}}
\index{C AUTO VARIABLES@\spxentry{C AUTO VARIABLES}!HOST4WEB Commands@\spxentry{HOST4WEB Commands}}\index{HOST4WEB Commands@\spxentry{HOST4WEB Commands}!C AUTO VARIABLES@\spxentry{C AUTO VARIABLES}}\index{C AUTO VARIABLES@\spxentry{C AUTO VARIABLES}!HOST4WEB@\spxentry{HOST4WEB}}\index{HOST4WEB@\spxentry{HOST4WEB}!C AUTO VARIABLES@\spxentry{C AUTO VARIABLES}}\ignorespaces 

\subsubsection{C AUTO VARIABLES (Command Auto Variables)}
\label{\detokenize{User_Guide:c-auto-variables-command-auto-variables}}\label{\detokenize{User_Guide:index-401}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{C} \PYG{n}{AUTO} \PYG{n}{VARIABLES}
\end{sphinxVerbatim}

\sphinxAtStartPar
Requests VIRTEL to automatically free all variables whenever a user response is sent to the application. This command
cancels the effect of the KEEP VARIABLES command.

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
Structured field FAD5 code 08 produces the same effect as this command.
\end{sphinxadmonition}

\index{C KEEP VARIABLES@\spxentry{C KEEP VARIABLES}!HOST4WEB Commands@\spxentry{HOST4WEB Commands}}\index{HOST4WEB Commands@\spxentry{HOST4WEB Commands}!C KEEP VARIABLES@\spxentry{C KEEP VARIABLES}}\index{C KEEP VARIABLES@\spxentry{C KEEP VARIABLES}!HOST4WEB@\spxentry{HOST4WEB}}\index{HOST4WEB@\spxentry{HOST4WEB}!C KEEP VARIABLES@\spxentry{C KEEP VARIABLES}}\ignorespaces 

\subsubsection{C KEEP VARIABLES (Command Keep Variables)}
\label{\detokenize{User_Guide:c-keep-variables-command-keep-variables}}\label{\detokenize{User_Guide:index-402}}\begin{description}
\sphinxlineitem{::}
\sphinxAtStartPar
C KEEP VARIABLES

\end{description}

\sphinxAtStartPar
Requests VIRTEL to keep all variables created by the application. Normally VIRTEL will free all variables whenever a
user response is sent to the application. This command allows the variables to be kept for use by a subsequent output
screen. The variables may be freed by a subsequent KILL VARIABLES command, otherwise they will be automatically
freed at the end of the transaction.

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
Structured field FAD5 code 02 produces the same effect as this command.
\end{sphinxadmonition}

\index{C KILL VARIABLES@\spxentry{C KILL VARIABLES}!HOST4WEB Commands@\spxentry{HOST4WEB Commands}}\index{HOST4WEB Commands@\spxentry{HOST4WEB Commands}!C KILL VARIABLES@\spxentry{C KILL VARIABLES}}\index{C KILL VARIABLES@\spxentry{C KILL VARIABLES}!HOST4WEB@\spxentry{HOST4WEB}}\index{HOST4WEB@\spxentry{HOST4WEB}!C KILL VARIABLES@\spxentry{C KILL VARIABLES}}\ignorespaces 

\subsubsection{C KILL VARIABLES (Command Kill Variables)}
\label{\detokenize{User_Guide:c-kill-variables-command-kill-variables}}\label{\detokenize{User_Guide:index-403}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{C} \PYG{n}{KILL} \PYG{n}{VARIABLES}
\end{sphinxVerbatim}

\sphinxAtStartPar
Requests VIRTEL to free all variables.

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
Structured field FAD5 code 04 produces the same effect as this command.
\end{sphinxadmonition}

\index{C RETURN@\spxentry{C RETURN}!HOST4WEB Commands@\spxentry{HOST4WEB Commands}}\index{HOST4WEB Commands@\spxentry{HOST4WEB Commands}!C RETURN@\spxentry{C RETURN}}\index{C RETURN@\spxentry{C RETURN}!HOST4WEB@\spxentry{HOST4WEB}}\index{HOST4WEB@\spxentry{HOST4WEB}!C RETURN@\spxentry{C RETURN}}\ignorespaces 

\subsubsection{C RETURN (Command Return)}
\label{\detokenize{User_Guide:c-return-command-return}}\label{\detokenize{User_Guide:index-404}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{C} \PYG{n}{RETURN}
\end{sphinxVerbatim}

\sphinxAtStartPar
Requests VIRTEL to immediately return a response to the application with a simulated “Enter”. The screen containing
this command is never displayed to the user.

\index{C SCAN NEXT SCREEN@\spxentry{C SCAN NEXT SCREEN}!HOST4WEB Commands@\spxentry{HOST4WEB Commands}}\index{HOST4WEB Commands@\spxentry{HOST4WEB Commands}!C SCAN NEXT SCREEN@\spxentry{C SCAN NEXT SCREEN}}\index{C SCAN NEXT SCREEN@\spxentry{C SCAN NEXT SCREEN}!HOST4WEB@\spxentry{HOST4WEB}}\index{HOST4WEB@\spxentry{HOST4WEB}!C SCAN NEXT SCREEN@\spxentry{C SCAN NEXT SCREEN}}\ignorespaces 

\subsubsection{C SCAN NEXT SCREEN (Command Scan)}
\label{\detokenize{User_Guide:c-scan-next-screen-command-scan}}\label{\detokenize{User_Guide:index-405}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{C} \PYG{n}{SCAN} \PYG{n}{NEXT} \PYG{n}{SCREEN}
\end{sphinxVerbatim}

\sphinxAtStartPar
Indicates that the following screen will contain HOST4WEB commands, which will be processed by VIRTEL without the
need for a ‘2VIRTEL’ prefix.

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
Structured field FAD5 code 01 produces the same effect as this command.
\end{sphinxadmonition}

\index{C WAIT NEXT SCREEN@\spxentry{C WAIT NEXT SCREEN}!HOST4WEB Commands@\spxentry{HOST4WEB Commands}}\index{HOST4WEB Commands@\spxentry{HOST4WEB Commands}!C WAIT NEXT SCREEN@\spxentry{C WAIT NEXT SCREEN}}\index{C WAIT NEXT SCREEN@\spxentry{C WAIT NEXT SCREEN}!HOST4WEB@\spxentry{HOST4WEB}}\index{HOST4WEB@\spxentry{HOST4WEB}!C WAIT NEXT SCREEN@\spxentry{C WAIT NEXT SCREEN}}\ignorespaces 

\subsubsection{C WAIT NEXT SCREEN (Command Wait)}
\label{\detokenize{User_Guide:c-wait-next-screen-command-wait}}\label{\detokenize{User_Guide:index-406}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{C} \PYG{n}{WAIT} \PYG{n}{NEXT} \PYG{n}{SCREEN}
\end{sphinxVerbatim}

\sphinxAtStartPar
Indicates that the current screen should not be sent to the user yet.

\index{C TERMSESS@\spxentry{C TERMSESS}!HOST4WEB Commands@\spxentry{HOST4WEB Commands}}\index{HOST4WEB Commands@\spxentry{HOST4WEB Commands}!C TERMSESS@\spxentry{C TERMSESS}}\index{C TERMSESS@\spxentry{C TERMSESS}!HOST4WEB@\spxentry{HOST4WEB}}\index{HOST4WEB@\spxentry{HOST4WEB}!C TERMSESS@\spxentry{C TERMSESS}}\ignorespaces 

\subsubsection{C TERMSESS (Command Terminate Session)}
\label{\detokenize{User_Guide:c-termsess-command-terminate-session}}\label{\detokenize{User_Guide:index-407}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{C} \PYG{n}{TERMSESS}
\end{sphinxVerbatim}

\sphinxAtStartPar
Allows a service transaction to request termination of the host application session after the current message has been
sent.

\index{G EMULATION TYPE@\spxentry{G EMULATION TYPE}!HOST4WEB Commands@\spxentry{HOST4WEB Commands}}\index{HOST4WEB Commands@\spxentry{HOST4WEB Commands}!G EMULATION TYPE@\spxentry{G EMULATION TYPE}}\index{G EMULATION TYPE@\spxentry{G EMULATION TYPE}!HOST4WEB@\spxentry{HOST4WEB}}\index{HOST4WEB@\spxentry{HOST4WEB}!G EMULATION TYPE@\spxentry{G EMULATION TYPE}}\ignorespaces 

\subsubsection{G EMULATION TYPE (Get Emulation Type)}
\label{\detokenize{User_Guide:g-emulation-type-get-emulation-type}}\label{\detokenize{User_Guide:index-408}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{G} \PYG{n}{EMULATION} \PYG{n}{TYPE}
\end{sphinxVerbatim}

\sphinxAtStartPar
When VIRTEL returns the next input to the application, the contents of this field are replaced by the emulation type
defined in the entry point.

\index{G PAGE NAME@\spxentry{G PAGE NAME}!HOST4WEB Commands@\spxentry{HOST4WEB Commands}}\index{HOST4WEB Commands@\spxentry{HOST4WEB Commands}!G PAGE NAME@\spxentry{G PAGE NAME}}\index{G PAGE NAME@\spxentry{G PAGE NAME}!HOST4WEB@\spxentry{HOST4WEB}}\index{HOST4WEB@\spxentry{HOST4WEB}!G PAGE NAME@\spxentry{G PAGE NAME}}\ignorespaces 

\subsubsection{G PAGE NAME (Get Current Template Name)}
\label{\detokenize{User_Guide:g-page-name-get-current-template-name}}\label{\detokenize{User_Guide:index-409}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{G} \PYG{n}{PAGE} \PYG{n}{NAME}
\end{sphinxVerbatim}

\sphinxAtStartPar
When VIRTEL returns the next input to the application, the contents of this field are replaced by the name of the
current page template.

\index{G URL PARAMETER@\spxentry{G URL PARAMETER}!HOST4WEB Commands@\spxentry{HOST4WEB Commands}}\index{HOST4WEB Commands@\spxentry{HOST4WEB Commands}!G URL PARAMETER@\spxentry{G URL PARAMETER}}\index{G URL PARAMETER@\spxentry{G URL PARAMETER}!HOST4WEB@\spxentry{HOST4WEB}}\index{HOST4WEB@\spxentry{HOST4WEB}!G URL PARAMETER@\spxentry{G URL PARAMETER}}\ignorespaces 

\subsubsection{G URL PARAMETER (Get URL Parameter)}
\label{\detokenize{User_Guide:g-url-parameter-get-url-parameter}}\label{\detokenize{User_Guide:index-410}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{G} \PYG{n}{URL} \PYG{n}{PARAMETER} \PYG{n}{paramname}
\end{sphinxVerbatim}

\sphinxAtStartPar
When VIRTEL returns the next input to the application, the contents of this field are replaced by the value of the
parameter paramname in the URL.

\index{S DIRECTORY@\spxentry{S DIRECTORY}!HOST4WEB Commands@\spxentry{HOST4WEB Commands}}\index{HOST4WEB Commands@\spxentry{HOST4WEB Commands}!S DIRECTORY@\spxentry{S DIRECTORY}}\index{S DIRECTORY@\spxentry{S DIRECTORY}!HOST4WEB@\spxentry{HOST4WEB}}\index{HOST4WEB@\spxentry{HOST4WEB}!S DIRECTORY@\spxentry{S DIRECTORY}}\ignorespaces 

\subsubsection{S DIRECTORY (Set Temporary Directory Name)}
\label{\detokenize{User_Guide:s-directory-set-temporary-directory-name}}\label{\detokenize{User_Guide:index-411}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{S} \PYG{n}{DIRECTORY} \PYG{n}{dirname}
\end{sphinxVerbatim}

\sphinxAtStartPar
Indicates the name of the directory from which VIRTEL is to retrieve the page template for the current 3270 screen
(but not for subsequent screens). dirname is the name of a VIRTEL directory defined in the Directory Management
sub\sphinxhyphen{}application (as described 23). This name must not contain any blanks.

\index{S GLOBAL PAGE@\spxentry{S GLOBAL PAGE}!HOST4WEB Commands@\spxentry{HOST4WEB Commands}}\index{HOST4WEB Commands@\spxentry{HOST4WEB Commands}!S GLOBAL PAGE@\spxentry{S GLOBAL PAGE}}\index{S GLOBAL PAGE@\spxentry{S GLOBAL PAGE}!HOST4WEB@\spxentry{HOST4WEB}}\index{HOST4WEB@\spxentry{HOST4WEB}!S GLOBAL PAGE@\spxentry{S GLOBAL PAGE}}\ignorespaces 

\subsubsection{S GLOBAL PAGE (Set Global Template Name)}
\label{\detokenize{User_Guide:s-global-page-set-global-template-name}}\label{\detokenize{User_Guide:index-412}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{S} \PYG{n}{GLOBAL} \PYG{n}{PAGE} \PYG{n}{pagename}
\end{sphinxVerbatim}

\sphinxAtStartPar
Indicates the name of the page template to be used for the current 3270 screen and all subsequent screens. This name
must not contain any blanks.

\index{S PAGE@\spxentry{S PAGE}!HOST4WEB Commands@\spxentry{HOST4WEB Commands}}\index{HOST4WEB Commands@\spxentry{HOST4WEB Commands}!S PAGE@\spxentry{S PAGE}}\index{S PAGE@\spxentry{S PAGE}!HOST4WEB@\spxentry{HOST4WEB}}\index{HOST4WEB@\spxentry{HOST4WEB}!S PAGE@\spxentry{S PAGE}}\ignorespaces 

\subsubsection{S PAGE (Set Temporary Template Name)}
\label{\detokenize{User_Guide:s-page-set-temporary-template-name}}\label{\detokenize{User_Guide:index-413}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{S} \PYG{n}{PAGE} \PYG{n}{pagename}
\end{sphinxVerbatim}

\sphinxAtStartPar
Indicates the name of the page template to be used for the current 3270 screen (but not for subsequent screens). This
name must not contain any blanks.

\phantomsection\label{\detokenize{User_Guide:v462ug-set-variable}}
\index{S VARIABLE@\spxentry{S VARIABLE}!HOST4WEB Commands@\spxentry{HOST4WEB Commands}}\index{HOST4WEB Commands@\spxentry{HOST4WEB Commands}!S VARIABLE@\spxentry{S VARIABLE}}\index{S VARIABLE@\spxentry{S VARIABLE}!HOST4WEB@\spxentry{HOST4WEB}}\index{HOST4WEB@\spxentry{HOST4WEB}!S VARIABLE@\spxentry{S VARIABLE}}\ignorespaces 

\subsubsection{S VARIABLE (Set Variable)}
\label{\detokenize{User_Guide:s-variable-set-variable}}\label{\detokenize{User_Guide:index-414}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{S} \PYG{n}{VARIABLE} \PYG{n}{varname}\PYG{o}{+}\PYG{n}{value}\PYG{o}{+}
\end{sphinxVerbatim}

\sphinxAtStartPar
Adds a new value to a table variable named varname. The variable is automatically created if necessary. The value is
contained in the 3270 field immediately following the S VARIABLE varname command, and the value has the same
length as the 3270 field which contains it. The “+” characters in the figure above represent the 3270 attribute bytes
which act as field delimiters.

\newpage

\index{Incoming Calls@\spxentry{Incoming Calls}}\ignorespaces 

\chapter{Incoming Calls}
\label{\detokenize{User_Guide:incoming-calls}}\label{\detokenize{User_Guide:index-415}}
\index{Incoming Calls@\spxentry{Incoming Calls}}\index{Incoming Calls E\sphinxhyphen{}Mails@\spxentry{Incoming Calls E\sphinxhyphen{}Mails}!Incoming Calls@\spxentry{Incoming Calls}}\index{Incoming Calls@\spxentry{Incoming Calls}!Incoming Calls E\sphinxhyphen{}Mails@\spxentry{Incoming Calls E\sphinxhyphen{}Mails}}\ignorespaces 

\section{Incoming E\sphinxhyphen{}mails}
\label{\detokenize{User_Guide:index-416}}\label{\detokenize{User_Guide:id8}}\phantomsection\label{\detokenize{User_Guide:v462ug-email-retrieve-data}}
\index{Transactions@\spxentry{Transactions}!Incoming Calls@\spxentry{Incoming Calls}}\index{Incoming Calls@\spxentry{Incoming Calls}!Transactions@\spxentry{Transactions}}\index{Transactions@\spxentry{Transactions}!Incoming E\sphinxhyphen{}mails@\spxentry{Incoming E\sphinxhyphen{}mails}}\index{Incoming E\sphinxhyphen{}mails@\spxentry{Incoming E\sphinxhyphen{}mails}!Transactions@\spxentry{Transactions}}\index{FAC8 \sphinxhyphen{} Retrieve data from email@\spxentry{FAC8 \sphinxhyphen{} Retrieve data from email}!Programming Interfaces@\spxentry{Programming Interfaces}}\index{Programming Interfaces@\spxentry{Programming Interfaces}!FAC8 \sphinxhyphen{} Retrieve data from email@\spxentry{FAC8 \sphinxhyphen{} Retrieve data from email}}\ignorespaces 

\subsection{FAC8: Retrieve data from an e\sphinxhyphen{}mail}
\label{\detokenize{User_Guide:fac8-retrieve-data-from-an-e-mail}}\label{\detokenize{User_Guide:index-417}}
\sphinxAtStartPar
An application started by an incoming e\sphinxhyphen{}mail (see {\hyperref[\detokenize{User_Guide:v462ug-email-incoming}]{\sphinxcrossref{\DUrole{std,std-ref}{“Incomming e\sphinxhyphen{}mails”}}}}) can retrieve data from the content
of the e\sphinxhyphen{}mail. To request VIRTEL to extract the data from the e\sphinxhyphen{}mail, the application sends a structured field FAC8 code
12 or 13 to the associated relay (3270 pseudo\sphinxhyphen{}terminal). VIRTEL intercepts the structured field and sends a response to
the application in the form of a QUERY REPLY (x‘88’) structured field.

\index{FAC8 \sphinxhyphen{} Structured field code 12@\spxentry{FAC8 \sphinxhyphen{} Structured field code 12}!Incoming E\sphinxhyphen{}mails@\spxentry{Incoming E\sphinxhyphen{}mails}}\index{Incoming E\sphinxhyphen{}mails@\spxentry{Incoming E\sphinxhyphen{}mails}!FAC8 \sphinxhyphen{} Structured field code 12@\spxentry{FAC8 \sphinxhyphen{} Structured field code 12}}\index{FAC8 \sphinxhyphen{} Structured field code 12@\spxentry{FAC8 \sphinxhyphen{} Structured field code 12}!Programming Interfaces@\spxentry{Programming Interfaces}}\index{Programming Interfaces@\spxentry{Programming Interfaces}!FAC8 \sphinxhyphen{} Structured field code 12@\spxentry{FAC8 \sphinxhyphen{} Structured field code 12}}\ignorespaces 

\subsubsection{FAC8 \sphinxhyphen{} Structured field code 13}
\label{\detokenize{User_Guide:fac8-structured-field-code-13}}\label{\detokenize{User_Guide:index-418}}
\sphinxAtStartPar
The format of a structured field FAC8 code 12 is:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{2} \PYG{n+nb}{bytes} \PYG{n}{Length} \PYG{n}{of} \PYG{n}{structured} \PYG{n}{field} \PYG{o}{=} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{0007}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{2} \PYG{n+nb}{bytes} \PYG{n}{Structured} \PYG{n}{field} \PYG{n}{identification} \PYG{n}{code} \PYG{o}{=} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{FAC8}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{1} \PYG{n+nb}{bytes} \PYG{n}{Code} \PYG{o}{=} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{12}\PYG{l+s+s1}{\PYGZsq{}} \PYG{p}{(}\PYG{n}{extraction} \PYG{n}{of} \PYG{n}{e}\PYG{o}{\PYGZhy{}}\PYG{n}{mail} \PYG{n}{data}\PYG{p}{)}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{2} \PYG{n+nb}{bytes} \PYG{n}{Option} \PYG{n}{indicating} \PYG{n}{the} \PYG{n}{category} \PYG{n}{of} \PYG{n}{data} \PYG{n}{requested}\PYG{p}{:}
\PYG{l+m+mi}{0004} \PYG{n}{Received}\PYG{p}{:}
\PYG{l+m+mi}{0008} \PYG{n}{Message}\PYG{o}{\PYGZhy{}}\PYG{n}{ID}\PYG{p}{:}
\PYG{l+m+mi}{000}\PYG{n}{C} \PYG{n}{Date}\PYG{p}{:}
\PYG{l+m+mi}{0010} \PYG{n}{References}\PYG{p}{:}
\PYG{l+m+mi}{0014} \PYG{n}{Content}\PYG{o}{\PYGZhy{}}\PYG{n}{Type}\PYG{p}{:}
\PYG{l+m+mi}{0018} \PYG{n}{MIME}\PYG{o}{\PYGZhy{}}\PYG{n}{Version}\PYG{p}{:}
\PYG{l+m+mi}{001}\PYG{n}{C} \PYG{n}{Subject}\PYG{p}{:}
\PYG{l+m+mi}{0020} \PYG{p}{(}\PYG{n}{message} \PYG{n}{text}\PYG{p}{)}
\PYG{l+m+mi}{003}\PYG{n}{C} \PYG{n}{MAIL} \PYG{n}{FROM}\PYG{p}{:} \PYG{p}{(}\PYG{n}{see} \PYG{n}{note}\PYG{p}{)}
\PYG{l+m+mi}{0040} \PYG{n}{RCPT} \PYG{n}{TO}\PYG{p}{:} \PYG{p}{(}\PYG{n}{see} \PYG{n}{note}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Format of structured field FAC8 code 12}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
MAIL FROM and RCPT TO are respectively the name of the sender and recipient as specified in the SMTP envelope.
\end{sphinxadmonition}

\sphinxAtStartPar
The response consists of one or more structured fields, prefixed by an AID byte x‘88’ (QUERY REPLY). The format of the
query reply structured field is:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZhy{} 2 bytes Length of structured field = variable
\PYGZhy{} 2 bytes Type of response data.
Values are same as the ‘option’ field of the corresponding request.
\PYGZhy{} 4 bytes (type 0020 only) number of lines of text
\PYGZhy{} 4 bytes (type 0020 only) flags (reserved)
\PYGZhy{} n bytes Data (in EBCDIC)
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Format of the response to structured field FAC8 code 12}

\begin{sphinxadmonition}{note}{Note:}\begin{itemize}
\item {} 
\sphinxAtStartPar
Response types other than 0020 do not contain the number of lines or flags.

\item {} 
\sphinxAtStartPar
Response types are returned in the same order as specified in the request.

\item {} 
\sphinxAtStartPar
All of the response types requested are present, even if they are zero length.

\item {} 
\sphinxAtStartPar
Lines of message text are delimited by X’0D25’ (EBCDIC carriage\sphinxhyphen{}return / line\sphinxhyphen{}feed).

\end{itemize}
\end{sphinxadmonition}

\index{FAC8 \sphinxhyphen{} Structured field code 13@\spxentry{FAC8 \sphinxhyphen{} Structured field code 13}!Incoming E\sphinxhyphen{}mails@\spxentry{Incoming E\sphinxhyphen{}mails}}\index{Incoming E\sphinxhyphen{}mails@\spxentry{Incoming E\sphinxhyphen{}mails}!FAC8 \sphinxhyphen{} Structured field code 13@\spxentry{FAC8 \sphinxhyphen{} Structured field code 13}}\index{FAC8 \sphinxhyphen{} Structured field code 13@\spxentry{FAC8 \sphinxhyphen{} Structured field code 13}!Programming Interfaces@\spxentry{Programming Interfaces}}\index{Programming Interfaces@\spxentry{Programming Interfaces}!FAC8 \sphinxhyphen{} Structured field code 13@\spxentry{FAC8 \sphinxhyphen{} Structured field code 13}}\ignorespaces 

\subsubsection{FAC8 \sphinxhyphen{} Structured field code 13}
\label{\detokenize{User_Guide:index-419}}\label{\detokenize{User_Guide:id9}}
\sphinxAtStartPar
Structured field FAC8 code 13 searches the e\sphinxhyphen{}mail for a specific character string, then returns the string together with
the remainder of the line.

\sphinxAtStartPar
The format of a structured field FAC8 code 13 is:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{2} \PYG{n+nb}{bytes} \PYG{n}{Length} \PYG{n}{of} \PYG{n}{structured} \PYG{n}{field} \PYG{o}{=} \PYG{l+m+mi}{7} \PYG{o}{+} \PYG{n}{length} \PYG{n}{of} \PYG{n}{string}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{2} \PYG{n+nb}{bytes} \PYG{n}{Structured} \PYG{n}{field} \PYG{n}{identification} \PYG{n}{code} \PYG{o}{=} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{FAC8}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{1} \PYG{n+nb}{bytes} \PYG{n}{Code} \PYG{o}{=} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{13}\PYG{l+s+s1}{\PYGZsq{}} \PYG{p}{(}\PYG{n}{scan} \PYG{n}{e}\PYG{o}{\PYGZhy{}}\PYG{n}{mail} \PYG{n}{data}\PYG{p}{)}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{2} \PYG{n+nb}{bytes} \PYG{n}{Option} \PYG{n}{indicating} \PYG{n}{the} \PYG{n}{category} \PYG{n}{of} \PYG{n}{data} \PYG{n}{to} \PYG{n}{be} \PYG{n}{searched}\PYG{p}{:}
\PYG{p}{(}\PYG{n}{see} \PYG{n}{structured} \PYG{n}{field} \PYG{n}{FAC8} \PYG{n}{code} \PYG{l+m+mi}{12}\PYG{p}{)}
\PYG{o}{\PYGZhy{}} \PYG{n}{n} \PYG{n+nb}{bytes} \PYG{n}{Character} \PYG{n}{string} \PYG{n}{to} \PYG{n}{search} \PYG{k}{for}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Format of structured field FAC8 code 13}

\sphinxAtStartPar
The response consists of one or more structured fields, prefixed by an AID byte x‘88’ (QUERY REPLY). The format of the
query reply structured field is:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZhy{} 2 bytes Length of structured field = variable
\PYGZhy{} 2 bytes Type of response data.
Values are same as the ‘option’ field of the corresponding request.
\PYGZhy{} n bytes Data (in EBCDIC)
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Format of the response to structured field FAC8 code 13}

\begin{sphinxadmonition}{note}{Note:}\begin{itemize}
\item {} 
\sphinxAtStartPar
The data returned includes the character string searched for, and all characters which follow, up to the end of the line. The characters X’0D25’, indicating the end of line, are not included in the response.

\item {} 
\sphinxAtStartPar
Response types are returned in the same order as specified in the request.

\item {} 
\sphinxAtStartPar
All of the response types requested are present, even if they are zero length.

\item {} 
\sphinxAtStartPar
Structured fields FAC8 code 12 and code 13 can be combined in the same request / response.

\end{itemize}
\end{sphinxadmonition}

\index{COBOL FAC8 example@\spxentry{COBOL FAC8 example}!Incoming E\sphinxhyphen{}mails@\spxentry{Incoming E\sphinxhyphen{}mails}}\index{Incoming E\sphinxhyphen{}mails@\spxentry{Incoming E\sphinxhyphen{}mails}!COBOL FAC8 example@\spxentry{COBOL FAC8 example}}\index{COBOL FAC8 example@\spxentry{COBOL FAC8 example}!Programming Interfaces@\spxentry{Programming Interfaces}}\index{Programming Interfaces@\spxentry{Programming Interfaces}!COBOL FAC8 example@\spxentry{COBOL FAC8 example}}\ignorespaces 

\subsubsection{COBOL FAC8 example}
\label{\detokenize{User_Guide:cobol-fac8-example}}\label{\detokenize{User_Guide:index-420}}
\sphinxAtStartPar
Example (in Cobol format) of receiving an e\sphinxhyphen{}mail:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o+ow}{in} \PYG{n}{Working}\PYG{o}{\PYGZhy{}}\PYG{n}{Storage}\PYG{p}{:}

\PYG{o}{*} \PYG{n}{Request} \PYG{n}{FAC812} \PYG{n}{to} \PYG{n}{VIRTEL}
\PYG{l+m+mi}{01} \PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{DEM}\PYG{o}{\PYGZhy{}}\PYG{n}{LENG} \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)} \PYG{n}{COMP} \PYG{n}{VALUE} \PYG{o}{+}\PYG{l+m+mf}{0.}
\PYG{l+m+mi}{01} \PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{DEM}\PYG{o}{\PYGZhy{}}\PYG{n}{EMAIL}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FILLER} \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)} \PYG{n}{COMP} \PYG{n}{VALUE} \PYG{o}{+}\PYG{l+m+mf}{7.}
    \PYG{l+m+mi}{05} \PYG{n}{FILLER} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{3}\PYG{p}{)} \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{FAC812}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{DEM}\PYG{o}{\PYGZhy{}}\PYG{n}{OPTION}\PYG{o}{\PYGZhy{}}\PYG{n}{SUBJ} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{)} \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{001C}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FILLER} \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)} \PYG{n}{COMP} \PYG{n}{VALUE} \PYG{o}{+}\PYG{l+m+mf}{7.}
    \PYG{l+m+mi}{05} \PYG{n}{FILLER} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{3}\PYG{p}{)} \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{FAC812}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{DEM}\PYG{o}{\PYGZhy{}}\PYG{n}{OPTION}\PYG{o}{\PYGZhy{}}\PYG{n}{TEXT} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{)} \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{0020}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FILLER} \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)} \PYG{n}{COMP} \PYG{n}{VALUE} \PYG{o}{+}\PYG{l+m+mf}{17.}
    \PYG{l+m+mi}{05} \PYG{n}{FILLER} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{3}\PYG{p}{)} \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{FAC813}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAC813}\PYG{o}{\PYGZhy{}}\PYG{n}{DEM}\PYG{o}{\PYGZhy{}}\PYG{n}{OPTION}\PYG{o}{\PYGZhy{}}\PYG{n}{OREF} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{)} \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{0020}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FILLER} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{10}\PYG{p}{)} \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Order ref:}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
\PYG{o}{*} \PYG{n}{Response} \PYG{k+kn}{from} \PYG{n+nn}{Virtel} \PYG{n}{following} \PYG{n}{FAC812}
\PYG{l+m+mi}{01} \PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{LENG} \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)} \PYG{n}{COMP} \PYG{n}{VALUE} \PYG{o}{+}\PYG{l+m+mf}{0.}
\PYG{l+m+mi}{01} \PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{AREA}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{SUBJ}\PYG{o}{\PYGZhy{}}\PYG{n}{LENG} \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)} \PYG{n}{COMP}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{SUBJ}\PYG{o}{\PYGZhy{}}\PYG{n}{CODE} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{)}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{SUBJ}\PYG{o}{\PYGZhy{}}\PYG{n}{DATA}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{SUBJ}\PYG{o}{\PYGZhy{}}\PYG{n}{CHAR} \PYG{n}{PIC} \PYG{n}{X}
                                \PYG{n}{OCCURS} \PYG{l+m+mi}{0} \PYG{n}{TO} \PYG{l+m+mi}{256} \PYG{n}{TIMES}
                                \PYG{n}{DEPENDING} \PYG{n}{ON} \PYG{n}{SUBJ}\PYG{o}{\PYGZhy{}}\PYG{n}{LENG}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{TEXT}\PYG{o}{\PYGZhy{}}\PYG{n}{LENG} \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)} \PYG{n}{COMP}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{TEXT}\PYG{o}{\PYGZhy{}}\PYG{n}{CODE} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{)}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{TEXT}\PYG{o}{\PYGZhy{}}\PYG{n}{NLIG} \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{8}\PYG{p}{)} \PYG{n}{COMP}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{TEXT}\PYG{o}{\PYGZhy{}}\PYG{n}{FLAG} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{TEXT}\PYG{o}{\PYGZhy{}}\PYG{n}{DATA}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{TEXT}\PYG{o}{\PYGZhy{}}\PYG{n}{CHAR} \PYG{n}{PIC} \PYG{n}{X}
                                \PYG{n}{OCCURS} \PYG{l+m+mi}{0} \PYG{n}{TO} \PYG{l+m+mi}{1000} \PYG{n}{TIMES}
                                \PYG{n}{DEPENDING} \PYG{n}{ON} \PYG{n}{TEXT}\PYG{o}{\PYGZhy{}}\PYG{n}{LENG}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAC813}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{OREF}\PYG{o}{\PYGZhy{}}\PYG{n}{LENG} \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)} \PYG{n}{COMP}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAC813}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{OREF}\PYG{o}{\PYGZhy{}}\PYG{n}{CODE} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{)}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAC813}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{OREF}\PYG{o}{\PYGZhy{}}\PYG{n}{DATA}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAC813}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{OREF}\PYG{o}{\PYGZhy{}}\PYG{n}{CHAR} \PYG{n}{PIC} \PYG{n}{X}
                                \PYG{n}{OCCURS} \PYG{l+m+mi}{0} \PYG{n}{TO} \PYG{l+m+mi}{256} \PYG{n}{TIMES}
                                \PYG{n}{DEPENDING} \PYG{n}{ON} \PYG{n}{OREF}\PYG{o}{\PYGZhy{}}\PYG{n}{LENG}\PYG{o}{.}
\PYG{l+m+mi}{01} \PYG{n}{SUBJ}\PYG{o}{\PYGZhy{}}\PYG{n}{LENG} \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)} \PYG{n}{COMP} \PYG{n}{VALUE} \PYG{o}{+}\PYG{l+m+mf}{0.}
\PYG{l+m+mi}{01} \PYG{n}{SUBJ}\PYG{o}{\PYGZhy{}}\PYG{n}{MESSAGE}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FILLER} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{5}\PYG{p}{)} \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{SUBJ:}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{SUBJ}\PYG{o}{\PYGZhy{}}\PYG{n}{DATA} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{50}\PYG{p}{)}\PYG{o}{.}
\PYG{l+m+mi}{01} \PYG{n}{TEXT}\PYG{o}{\PYGZhy{}}\PYG{n}{LENG} \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)} \PYG{n}{COMP} \PYG{n}{VALUE} \PYG{o}{+}\PYG{l+m+mf}{0.}
\PYG{l+m+mi}{01} \PYG{n}{TEXT}\PYG{o}{\PYGZhy{}}\PYG{n}{MESSAGE}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FILLER} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{5}\PYG{p}{)} \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{TEXT:}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{TEXT}\PYG{o}{\PYGZhy{}}\PYG{n}{DATA} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{80}\PYG{p}{)}\PYG{o}{.}
\PYG{l+m+mi}{01} \PYG{n}{OREF}\PYG{o}{\PYGZhy{}}\PYG{n}{LENG} \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)} \PYG{n}{COMP} \PYG{n}{VALUE} \PYG{o}{+}\PYG{l+m+mf}{0.}
\PYG{l+m+mi}{01} \PYG{n}{OREF}\PYG{o}{\PYGZhy{}}\PYG{n}{MESSAGE}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FILLER} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{5}\PYG{p}{)} \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{OREF:}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{OREF}\PYG{o}{\PYGZhy{}}\PYG{n}{DATA} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{50}\PYG{p}{)}\PYG{o}{.}
\PYG{l+m+mi}{01} \PYG{n}{ERR}\PYG{o}{\PYGZhy{}}\PYG{n}{MESSAGE} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{40}\PYG{p}{)} \PYG{n}{VALUE}
    \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{RBC8 UNEXPECTED RESPONSE FROM VIRTEL}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}

\PYG{o+ow}{in} \PYG{n}{the} \PYG{n}{Procedure} \PYG{n}{Division}\PYG{p}{:}

\PYG{n}{MOVE} \PYG{o}{+}\PYG{l+m+mi}{256} \PYG{n}{TO} \PYG{n}{SUBJ}\PYG{o}{\PYGZhy{}}\PYG{n}{LENG}
\PYG{n}{MOVE} \PYG{o}{+}\PYG{l+m+mi}{1000} \PYG{n}{TO} \PYG{n}{TEXT}\PYG{o}{\PYGZhy{}}\PYG{n}{LENG}
\PYG{n}{MOVE} \PYG{o}{+}\PYG{l+m+mi}{256} \PYG{n}{TO} \PYG{n}{OREF}\PYG{o}{\PYGZhy{}}\PYG{n}{LENG}
\PYG{n}{MOVE} \PYG{n}{LENGTH} \PYG{n}{OF} \PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{DEM}\PYG{o}{\PYGZhy{}}\PYG{n}{EMAIL} \PYG{n}{TO} \PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{DEM}\PYG{o}{\PYGZhy{}}\PYG{n}{LENG}
\PYG{n}{MOVE} \PYG{n}{LENGTH} \PYG{n}{OF} \PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{AREA} \PYG{n}{TO} \PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{LENG}
\PYG{n}{EXEC} \PYG{n}{CICS} \PYG{n}{CONVERSE}  \PYG{n}{FROM}\PYG{p}{(}\PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{DEM}\PYG{o}{\PYGZhy{}}\PYG{n}{EMAIL}\PYG{p}{)}
                    \PYG{n}{FROMLENGTH}\PYG{p}{(}\PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{DEM}\PYG{o}{\PYGZhy{}}\PYG{n}{LENG}\PYG{p}{)}
                    \PYG{n}{INTO}\PYG{p}{(}\PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{AREA}\PYG{p}{)}
                    \PYG{n}{TOLENGTH}\PYG{p}{(}\PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{LENG}\PYG{p}{)}
                    \PYG{n}{STRFIELD}
\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{EXEC}
\PYG{n}{IF} \PYG{n}{EIBAID} \PYG{n}{EQUAL} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{88}\PYG{l+s+s1}{\PYGZsq{}}
    \PYG{n}{SUBTRACT} \PYG{l+m+mi}{4} \PYG{n}{FROM} \PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{SUBJ}\PYG{o}{\PYGZhy{}}\PYG{n}{LENG} \PYG{n}{GIVING} \PYG{n}{SUBJ}\PYG{o}{\PYGZhy{}}\PYG{n}{LENG}
    \PYG{n}{MOVE} \PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{SUBJ}\PYG{o}{\PYGZhy{}}\PYG{n}{DATA} \PYG{n}{TO} \PYG{n}{SUBJ}\PYG{o}{\PYGZhy{}}\PYG{n}{DATA}
    \PYG{n}{EXEC} \PYG{n}{CICS} \PYG{n}{WRITEQ} \PYG{n}{TD} \PYG{n}{QUEUE}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{CSMT}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
                    \PYG{n}{FROM}\PYG{p}{(}\PYG{n}{SUBJ}\PYG{o}{\PYGZhy{}}\PYG{n}{MESSAGE}\PYG{p}{)}
    \PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{EXEC}
    \PYG{n}{SUBTRACT} \PYG{l+m+mi}{12} \PYG{n}{FROM} \PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{TEXT}\PYG{o}{\PYGZhy{}}\PYG{n}{LENG}
        \PYG{n}{GIVING} \PYG{n}{TEXT}\PYG{o}{\PYGZhy{}}\PYG{n}{LENG}
    \PYG{n}{MOVE} \PYG{n}{FAC812}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{TEXT}\PYG{o}{\PYGZhy{}}\PYG{n}{DATA} \PYG{n}{TO} \PYG{n}{TEXT}\PYG{o}{\PYGZhy{}}\PYG{n}{DATA}
    \PYG{n}{EXEC} \PYG{n}{CICS} \PYG{n}{WRITEQ} \PYG{n}{TD} \PYG{n}{QUEUE}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{CSMT}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
                    \PYG{n}{FROM}\PYG{p}{(}\PYG{n}{TEXT}\PYG{o}{\PYGZhy{}}\PYG{n}{MESSAGE}\PYG{p}{)}
    \PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{EXEC}
    \PYG{n}{SUBTRACT} \PYG{l+m+mi}{4} \PYG{n}{FROM} \PYG{n}{FAC813}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{OREF}\PYG{o}{\PYGZhy{}}\PYG{n}{LENG} \PYG{n}{GIVING} \PYG{n}{OREF}\PYG{o}{\PYGZhy{}}\PYG{n}{LENG}
    \PYG{n}{MOVE} \PYG{n}{FAC813}\PYG{o}{\PYGZhy{}}\PYG{n}{REP}\PYG{o}{\PYGZhy{}}\PYG{n}{OREF}\PYG{o}{\PYGZhy{}}\PYG{n}{DATA} \PYG{n}{TO} \PYG{n}{OREF}\PYG{o}{\PYGZhy{}}\PYG{n}{DATA}
    \PYG{n}{EXEC} \PYG{n}{CICS} \PYG{n}{WRITEQ} \PYG{n}{TD} \PYG{n}{QUEUE}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{CSMT}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
                \PYG{n}{FROM}\PYG{p}{(}\PYG{n}{OREF}\PYG{o}{\PYGZhy{}}\PYG{n}{MESSAGE}\PYG{p}{)}
    \PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{EXEC}
\PYG{n}{ELSE}
    \PYG{n}{EXEC} \PYG{n}{CICS} \PYG{n}{WRITEQ} \PYG{n}{TD} \PYG{n}{QUEUE}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{CSMT}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}
            \PYG{n}{FROM}\PYG{p}{(}\PYG{n}{ERR}\PYG{o}{\PYGZhy{}}\PYG{n}{MESSAGE}\PYG{p}{)}
    \PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{EXEC}
\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{IF}
\PYG{n}{EXEC} \PYG{n}{CICS} \PYG{n}{ISSUE} \PYG{n}{DISCONNECT}
\PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{EXEC}\PYG{o}{.}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example of sending structured field FAC8 code 12 and 13}

\index{FAD4 \sphinxhyphen{} Send e\sphinxhyphen{}mail from application@\spxentry{FAD4 \sphinxhyphen{} Send e\sphinxhyphen{}mail from application}!Incoming E\sphinxhyphen{}Mails@\spxentry{Incoming E\sphinxhyphen{}Mails}}\index{Incoming E\sphinxhyphen{}Mails@\spxentry{Incoming E\sphinxhyphen{}Mails}!FAD4 \sphinxhyphen{} Send e\sphinxhyphen{}mail from application@\spxentry{FAD4 \sphinxhyphen{} Send e\sphinxhyphen{}mail from application}}\index{FAD4 \sphinxhyphen{} Send e\sphinxhyphen{}mail from application@\spxentry{FAD4 \sphinxhyphen{} Send e\sphinxhyphen{}mail from application}!Programming Interfaces@\spxentry{Programming Interfaces}}\index{Programming Interfaces@\spxentry{Programming Interfaces}!FAD4 \sphinxhyphen{} Send e\sphinxhyphen{}mail from application@\spxentry{FAD4 \sphinxhyphen{} Send e\sphinxhyphen{}mail from application}}\ignorespaces 

\subsection{FAD4: Sending an e\sphinxhyphen{}mail from a host application}
\label{\detokenize{User_Guide:fad4-sending-an-e-mail-from-a-host-application}}\label{\detokenize{User_Guide:index-421}}
\sphinxAtStartPar
It is possible at any time to send an e\sphinxhyphen{}mail from a host application under VIRTEL control. This operation is performed
by sending a WRITE STRUCTURED FIELD to the 3270 session which is intercepted by VIRTEL. The structured field data
consists of a sequence of FAD4 structured fields as described below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{2} \PYG{n+nb}{bytes} \PYG{n}{Length} \PYG{n}{of} \PYG{n}{structured} \PYG{n}{field} \PYG{o}{=} \PYG{n}{variable}
\PYG{o}{\PYGZhy{}} \PYG{l+m+mi}{2} \PYG{n+nb}{bytes} \PYG{n}{Structured} \PYG{n}{field} \PYG{n}{identification} \PYG{n}{code} \PYG{o}{=} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{FAD4}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{o}{\PYGZhy{}} \PYG{n}{n} \PYG{n+nb}{bytes} \PYG{n}{Command} \PYG{n}{code}
\PYG{o}{\PYGZhy{}} \PYG{n}{n} \PYG{n+nb}{bytes} \PYG{n}{Value} \PYG{n}{associated} \PYG{k}{with} \PYG{n}{command} \PYG{n}{code}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Format of structured field FAD4}

\sphinxAtStartPar
The possible command codes are:
\begin{description}
\sphinxlineitem{N}
\sphinxAtStartPar
(Name) e\sphinxhyphen{}mail address of recipient.

\sphinxlineitem{F}
\sphinxAtStartPar
(From) e\sphinxhyphen{}mail address of sender. If this code is not supplied, the default sender address specified on the SMTP line will be used.

\sphinxlineitem{X’CD’}
\sphinxAtStartPar
(Code) Message identification.

\sphinxlineitem{S}
\sphinxAtStartPar
(Subject) Message subject line.

\sphinxlineitem{T}
\sphinxAtStartPar
(Text) Message text. The sequence X’0D25’ (EBCDIC carriage\sphinxhyphen{}return / line\sphinxhyphen{}feed) can be used to separate lines of text.

\sphinxlineitem{C}
\sphinxAtStartPar
(Charset) Add a message header indicating the character set used; ISO\sphinxhyphen{}8859\sphinxhyphen{}15 for European character set with Euro currency sign.

\sphinxlineitem{H}
\sphinxAtStartPar
(Header) Add one or more headers. The sequence X’0D25’ (EBCDIC carriage\sphinxhyphen{}return / line\sphinxhyphen{}feed) indicates the end of each of the headers in this structured field.

\end{description}

\sphinxAtStartPar
The entry point used to invoke the host application must contain a type\sphinxhyphen{}3 transaction whose external name is \$MAIL\$
and whose “Application” field contains the name of the SMTP line to be used for sending the outgoing e\sphinxhyphen{}mail.

\index{COBOL FAD4 example@\spxentry{COBOL FAD4 example}!Incoming E\sphinxhyphen{}Mails@\spxentry{Incoming E\sphinxhyphen{}Mails}}\index{Incoming E\sphinxhyphen{}Mails@\spxentry{Incoming E\sphinxhyphen{}Mails}!COBOL FAD4 example@\spxentry{COBOL FAD4 example}}\index{COBOL FAD4 example@\spxentry{COBOL FAD4 example}!Programming Interfaces@\spxentry{Programming Interfaces}}\index{Programming Interfaces@\spxentry{Programming Interfaces}!COBOL FAD4 example@\spxentry{COBOL FAD4 example}}\ignorespaces 

\subsubsection{COBOL FAD4 example}
\label{\detokenize{User_Guide:cobol-fad4-example}}\label{\detokenize{User_Guide:index-422}}
\sphinxAtStartPar
Example (in Cobol format) of sending an e\sphinxhyphen{}mail :

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o+ow}{in} \PYG{n}{Working}\PYG{o}{\PYGZhy{}}\PYG{n}{Storage}\PYG{p}{:}

\PYG{l+m+mi}{01} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{LONG}                \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)}   \PYG{n}{COMP} \PYG{n}{VALUE} \PYG{o}{+}\PYG{l+m+mf}{0.}
\PYG{l+m+mi}{01} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{AREA}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{COMMANDE}\PYG{o}{\PYGZhy{}}\PYG{n}{N}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{SFLENGTH}\PYG{o}{\PYGZhy{}}\PYG{n}{N}  \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)}   \PYG{n}{COMP} \PYG{n}{VALUE} \PYG{o}{+}\PYG{l+m+mf}{0.}
        \PYG{l+m+mi}{10} \PYG{n}{FILLER}           \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{)}    \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{FAD4}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FILLER}           \PYG{n}{PIC} \PYG{n}{X}       \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{N}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{DESTINATION} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{22}\PYG{p}{)}
            \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{bowler@saint.cloud.com}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{COMMANDE}\PYG{o}{\PYGZhy{}}\PYG{n}{F}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{SFLENGTH}\PYG{o}{\PYGZhy{}}\PYG{n}{F}  \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)}   \PYG{n}{COMP} \PYG{n}{VALUE} \PYG{o}{+}\PYG{l+m+mf}{0.}
        \PYG{l+m+mi}{10} \PYG{n}{FILLER}           \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{)}    \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{FAD4}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FILLER}           \PYG{n}{PIC} \PYG{n}{X}       \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{F}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{SENDER}      \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{22}\PYG{p}{)}
            \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{virtel@saint.cloud.com}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{COMMANDE}\PYG{o}{\PYGZhy{}}\PYG{n}{CD}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{SFLENGTH}\PYG{o}{\PYGZhy{}}\PYG{n}{CD} \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)}   \PYG{n}{COMP} \PYG{n}{VALUE} \PYG{o}{+}\PYG{l+m+mf}{0.}
        \PYG{l+m+mi}{10} \PYG{n}{FILLER}           \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{)}    \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{FAD4}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FILLER}           \PYG{n}{PIC} \PYG{n}{X}       \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{CD}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{MESSAGE}\PYG{o}{\PYGZhy{}}\PYG{n}{ID}  \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{32}\PYG{p}{)}
                \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{20010321174652K07F44354K608EAF00}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{COMMANDE}\PYG{o}{\PYGZhy{}}\PYG{n}{S}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{SFLENGTH}\PYG{o}{\PYGZhy{}}\PYG{n}{S}  \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)}   \PYG{n}{COMP} \PYG{n}{VALUE} \PYG{o}{+}\PYG{l+m+mf}{0.}
        \PYG{l+m+mi}{10} \PYG{n}{FILLER}           \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{)}    \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{FAD4}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FILLER}           \PYG{n}{PIC} \PYG{n}{X}       \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{S}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{SUBJECT}     \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{17}\PYG{p}{)}
                \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{email from virtel}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{COMMANDE}\PYG{o}{\PYGZhy{}}\PYG{n}{T}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{SFLENGTH}\PYG{o}{\PYGZhy{}}\PYG{n}{T}  \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)}   \PYG{n}{COMP} \PYG{n}{VALUE} \PYG{o}{+}\PYG{l+m+mf}{0.}
        \PYG{l+m+mi}{10} \PYG{n}{FILLER}           \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{)}    \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{FAD4}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FILLER}           \PYG{n}{PIC} \PYG{n}{X}       \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{T}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{TEXT}\PYG{o}{\PYGZhy{}}\PYG{n}{LINE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{14}\PYG{p}{)}   \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Balance report}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FILLER}           \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{)}    \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{0D25}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{TEXT}\PYG{o}{\PYGZhy{}}\PYG{n}{LINE}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2} \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{9}\PYG{p}{)}    \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{Total is }\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{CURRENCY}    \PYG{n}{PIC} \PYG{n}{X}       \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{9F}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{AMOUNT}      \PYG{n}{PIC} \PYG{l+m+mi}{9999}    \PYG{n}{VALUE} \PYG{l+m+mf}{2345.}
        \PYG{l+m+mi}{10} \PYG{n}{FILLER}           \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{)}    \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{0D25}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{COMMANDE}\PYG{o}{\PYGZhy{}}\PYG{n}{H}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{SFLENGTH}\PYG{o}{\PYGZhy{}}\PYG{n}{H}  \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)}   \PYG{n}{COMP} \PYG{n}{VALUE} \PYG{o}{+}\PYG{l+m+mf}{0.}
        \PYG{l+m+mi}{10} \PYG{n}{FILLER}           \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{)}    \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{FAD4}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FILLER}           \PYG{n}{PIC} \PYG{n}{X}       \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{H}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{HEADER}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1}    \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{33}\PYG{p}{)}
                \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{X\PYGZhy{}Transaction\PYGZhy{}Server: CICS\PYGZhy{}TS 2.2}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FILLER}           \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{)}    \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{0D25}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{HEADER}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{2}    \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{28}\PYG{p}{)}
                \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{X\PYGZhy{}Operating\PYGZhy{}System: z/OS 1.4}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FILLER}           \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{)}    \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{0D25}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
    \PYG{l+m+mi}{05} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{COMMANDE}\PYG{o}{\PYGZhy{}}\PYG{n}{C}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{SFLENGTH}\PYG{o}{\PYGZhy{}}\PYG{n}{C} \PYG{n}{PIC} \PYG{n}{S9}\PYG{p}{(}\PYG{l+m+mi}{4}\PYG{p}{)}    \PYG{n}{COMP} \PYG{n}{VALUE} \PYG{o}{+}\PYG{l+m+mf}{0.}
        \PYG{l+m+mi}{10} \PYG{n}{FILLER}           \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{2}\PYG{p}{)}    \PYG{n}{VALUE} \PYG{n}{X}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{FAD4}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FILLER}           \PYG{n}{PIC} \PYG{n}{X}       \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{C}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}
        \PYG{l+m+mi}{10} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{CHARSET}     \PYG{n}{PIC} \PYG{n}{X}\PYG{p}{(}\PYG{l+m+mi}{33}\PYG{p}{)}   \PYG{n}{VALUE} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{ISO\PYGZhy{}8859\PYGZhy{}15}\PYG{l+s+s1}{\PYGZsq{}}\PYG{o}{.}

\PYG{o+ow}{in} \PYG{n}{the} \PYG{n}{Procedure} \PYG{n}{Division}\PYG{p}{:}

    \PYG{n}{MOVE} \PYG{n}{LENGTH} \PYG{n}{OF} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{COMMANDE}\PYG{o}{\PYGZhy{}}\PYG{n}{N} \PYG{n}{TO} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{SFLENGTH}\PYG{o}{\PYGZhy{}}\PYG{n}{N}
    \PYG{n}{MOVE} \PYG{n}{LENGTH} \PYG{n}{OF} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{COMMANDE}\PYG{o}{\PYGZhy{}}\PYG{n}{F} \PYG{n}{TO} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{SFLENGTH}\PYG{o}{\PYGZhy{}}\PYG{n}{F}
    \PYG{n}{MOVE} \PYG{n}{LENGTH} \PYG{n}{OF} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{COMMANDE}\PYG{o}{\PYGZhy{}}\PYG{n}{CD} \PYG{n}{TO} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{SFLENGTH}\PYG{o}{\PYGZhy{}}\PYG{n}{CD}
    \PYG{n}{MOVE} \PYG{n}{LENGTH} \PYG{n}{OF} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{COMMANDE}\PYG{o}{\PYGZhy{}}\PYG{n}{S} \PYG{n}{TO} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{SFLENGTH}\PYG{o}{\PYGZhy{}}\PYG{n}{S}
    \PYG{n}{MOVE} \PYG{n}{LENGTH} \PYG{n}{OF} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{COMMANDE}\PYG{o}{\PYGZhy{}}\PYG{n}{T} \PYG{n}{TO} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{SFLENGTH}\PYG{o}{\PYGZhy{}}\PYG{n}{T}
    \PYG{n}{MOVE} \PYG{n}{LENGTH} \PYG{n}{OF} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{COMMANDE}\PYG{o}{\PYGZhy{}}\PYG{n}{H} \PYG{n}{TO} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{SFLENGTH}\PYG{o}{\PYGZhy{}}\PYG{n}{H}
    \PYG{n}{MOVE} \PYG{n}{LENGTH} \PYG{n}{OF} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{COMMANDE}\PYG{o}{\PYGZhy{}}\PYG{n}{C} \PYG{n}{TO} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{SFLENGTH}\PYG{o}{\PYGZhy{}}\PYG{n}{C}
    \PYG{n}{MOVE} \PYG{n}{LENGTH} \PYG{n}{OF} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{AREA} \PYG{n}{TO} \PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{LONG}
    \PYG{n}{EXEC} \PYG{n}{CICS} \PYG{n}{SEND}  \PYG{n}{FROM}\PYG{p}{(}\PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{AREA}\PYG{p}{)}
                    \PYG{n}{LENGTH}\PYG{p}{(}\PYG{n}{FAD4}\PYG{o}{\PYGZhy{}}\PYG{n}{LONG}\PYG{p}{)}
                    \PYG{n}{STRFIELD}
    \PYG{n}{END}\PYG{o}{\PYGZhy{}}\PYG{n}{EXEC}\PYG{o}{.}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example of sending structured field FAD4}

\sphinxAtStartPar
Example of the e\sphinxhyphen{}mail generated by the above program:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
Date: Fri, 30 Apr 2004 15:14:05 +0100
From: virtel@saint.cloud.com
Organization: SYSPERTEC COMMUNICATION
To: bowler@saint.cloud.com
Message\PYGZhy{}id: \PYGZlt{}20010321174652K07F44354K608EAF00\PYGZhy{}bowler@saint.cloud.com\PYGZgt{}
Content\PYGZhy{}Type: text/plain; charset=ISO\PYGZhy{}8859\PYGZhy{}15
Content\PYGZhy{}Transfer\PYGZhy{}Encoding: 8bit
X\PYGZhy{}Transaction\PYGZhy{}Server: CICS\PYGZhy{}TS 2.2
X\PYGZhy{}Operating\PYGZhy{}System: z/OS 1.4
Subject: email from virtel

Balance report
Total is \texteuro{}2345
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example of e\sphinxhyphen{}mail generated by structured field FAD4}

\newpage

\index{Security@\spxentry{Security}}\ignorespaces 

\chapter{Security}
\label{\detokenize{User_Guide:v462ug-security}}\label{\detokenize{User_Guide:index-423}}\label{\detokenize{User_Guide:id10}}
\index{Virtel Web Access Security@\spxentry{Virtel Web Access Security}!Security@\spxentry{Security}}\index{Security@\spxentry{Security}!Virtel Web Access Security@\spxentry{Virtel Web Access Security}}\ignorespaces 

\section{VIRTEL Web Access Security}
\label{\detokenize{User_Guide:virtel-web-access-security}}\label{\detokenize{User_Guide:index-424}}
\sphinxAtStartPar
VIRTEL examines the URL of every VIRTEL Web Access request which arrives from a browser. Since there is no
permanent IP session between the browser and VIRTEL, there is less risk of a session being “hijacked”. In addition to
standard network security features (firewall, network sign on, SSO, etc.), each URL sent to VIRTEL has a structure which
allows VIRTEL to enforce authorization rules based on Entry Point, Rules, and Transactions, which are VIRTEL entities
described in the “VIRTEL Connectivity Reference” manual.

\index{Password restrictions@\spxentry{Password restrictions}!Passphrase restrictions@\spxentry{Passphrase restrictions}}\index{Passphrase restrictions@\spxentry{Passphrase restrictions}!Password restrictions@\spxentry{Password restrictions}}\ignorespaces 

\subsection{Password and Passphrase constraints}
\label{\detokenize{User_Guide:password-and-passphrase-constraints}}\label{\detokenize{User_Guide:index-425}}
\sphinxAtStartPar
As of PTF5912 a password credential is considered to be eight characters or less. If the credentials are greater than eight characters, then the credential is considered to be a passphrase. A password cannot be replaced  by a passphrase, and equally, a passphrase cannot be replaced by a password. For example, you cannot replace a 8 character password with a 12 character passphrase.

\index{Entry point security@\spxentry{Entry point security}!Virtel Web Access Security@\spxentry{Virtel Web Access Security}}\index{Virtel Web Access Security@\spxentry{Virtel Web Access Security}!Entry point security@\spxentry{Entry point security}}\ignorespaces 

\subsection{Specifying security in the entry point}
\label{\detokenize{User_Guide:specifying-security-in-the-entry-point}}\label{\detokenize{User_Guide:index-426}}
\sphinxAtStartPar
VIRTEL supplies a signon program for HTTP lines called VIR0020H (refer to the “VIRTEL Connectivity Reference” manual
for more details about how to specify a signon program in an entry point).

\sphinxAtStartPar
When the first call is made to a secure transaction under an entry point which specifies VIR0020H as its signon
program, VIRTEL requests the browser (via a 401 response) to display a dialog box inviting the user to enter a userid
and password. VIRTEL passes the userid and password to the security manager (RACF, etc.) for validation. VIRTEL can
also propagate the userid and password to other applications (for example, CICS) by means of connection /
disconnection scripts defined in the transaction (see the “VIRTEL Connectivity Reference” manual for details).
Depending on the userid, the security manager may authorize or deny access to the requested transaction.

\sphinxAtStartPar
\sphinxincludegraphics{{image65}.png}

\sphinxAtStartPar
\sphinxstyleemphasis{Example of signon dialog box displayed by browser}

\index{Transaction@\spxentry{Transaction}!Virtel Web Access Security@\spxentry{Virtel Web Access Security}}\index{Virtel Web Access Security@\spxentry{Virtel Web Access Security}!Transaction@\spxentry{Transaction}}\ignorespaces 

\subsection{Specifying security in the transaction}
\label{\detokenize{User_Guide:specifying-security-in-the-transaction}}\label{\detokenize{User_Guide:index-427}}
\sphinxAtStartPar
To display the signon dialog box shown above, the transaction under the entry point must specify SECURITY 1
(standard). Refer to the “Transactions” section of the “VIRTEL Connectivity Reference” manual for details of the
security field in the VIRTEL transaction definition.

\sphinxAtStartPar
Security can be specified either on the application transaction (transaction type 1, 2, 3), or on the directory transaction
(transaction type 4). In the above example, “SECURE” is the directory transaction, and “Cics” is the application
transaction. Specifying security at the directory level can be useful in that it forces the user to sign on even when
displaying a static page which has no associated application transaction.

\index{Password support@\spxentry{Password support}!Virtel Web Access Security@\spxentry{Virtel Web Access Security}}\index{Virtel Web Access Security@\spxentry{Virtel Web Access Security}!Password support@\spxentry{Password support}}\ignorespaces 

\subsection{Mixed\sphinxhyphen{}case password support}
\label{\detokenize{User_Guide:mixed-case-password-support}}\label{\detokenize{User_Guide:index-428}}
\sphinxAtStartPar
If SECUR=RACROUTE or SECUR=(RACROUTE,RACF) is specified in the VIRTCT, and if the security manager reports that it
supports lower\sphinxhyphen{}case characters in passwords, then VIRTEL will pass all passwords to the security manager in mixed
case as entered by the user. Otherwise VIRTEL will translate all passwords to upper case before passing them to the
security manager. Message VIR0861I at integration indicates that VIRTEL will use mixed\sphinxhyphen{}case passwords.

\index{Username retrieval@\spxentry{Username retrieval}!Virtel Web Access Security@\spxentry{Virtel Web Access Security}}\index{Virtel Web Access Security@\spxentry{Virtel Web Access Security}!Username retrieval@\spxentry{Username retrieval}}\ignorespaces 

\subsection{Automatic retrieval of username}
\label{\detokenize{User_Guide:automatic-retrieval-of-username}}\label{\detokenize{User_Guide:index-429}}
\sphinxAtStartPar
NTLM security allows VIRTEL to retrieve the username under which the user has already signed on to Windows. This
allows VIRTEL Web Access to sign on the user without requiring him or her to enter a username and password.

\sphinxAtStartPar
When SECURITY 2 (NTLM) is specified in the VIRTEL transaction definition (either the application transaction or the
directory transaction) VIRTEL requests the browser to supply the Windows username.

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
When the user is identified by NTLM, VIRTEL does not have access to the user’s password, and therefore VIRTEL
cannot verify the validity of the username, and cannot propagate the signon to other applications such as CICS.
\end{sphinxadmonition}

\sphinxAtStartPar
Before NTML can be used with the Firefox browser, the server name must be configured into the browser. Type
\sphinxurl{about:config} in the address bar, and enter the VIRTEL Web Access server address (for example, 192.168.235.61:41000)
as the value of the network.automatic\sphinxhyphen{}ntlm\sphinxhyphen{}auth.trusted\sphinxhyphen{}uris parameter.

\phantomsection\label{\detokenize{User_Guide:v462ug-data-encryption-ssl}}
\index{Encryption@\spxentry{Encryption}!Virtel Web Access Security@\spxentry{Virtel Web Access Security}}\index{Virtel Web Access Security@\spxentry{Virtel Web Access Security}!Encryption@\spxentry{Encryption}}\index{Encryption@\spxentry{Encryption}!AT\sphinxhyphen{}TLS@\spxentry{AT\sphinxhyphen{}TLS}}\index{AT\sphinxhyphen{}TLS@\spxentry{AT\sphinxhyphen{}TLS}!Encryption@\spxentry{Encryption}}\ignorespaces 

\subsection{Data encryption by AT\sphinxhyphen{}TLS/SSL}
\label{\detokenize{User_Guide:data-encryption-by-at-tls-ssl}}\label{\detokenize{User_Guide:index-430}}
\sphinxAtStartPar
The AT\sphinxhyphen{}TLS feature (“Application Transparent Transport Layer Security”), available with z/OS Communication Server
V1R7 and later releases, allows direct access to the VIRTEL Web Access server in SSL mode (HTTPS), without using an
intermediate server. The SSLSETUP job in the VIRTEL SAMPLIB contains an example of the definitions required to place
VIRTEL Web Access sessions under AT\sphinxhyphen{}TLS control.

\sphinxAtStartPar
For VSE sites, or earlier versions of MVS where AT\sphinxhyphen{}TLS is not available, access to VIRTEL in HTTPS mode can be achieved
by means of an intermediate server (such as Apache) operating in Reverse\sphinxhyphen{}Proxy mode. The function of the reverse
proxy is to transform the dataflow into HTTP mode before sending it on to VIRTEL.

\begin{sphinxadmonition}{warning}{Warning:}
\sphinxAtStartPar
Higher CPU usgage will result in the TCP/IP address space if this feature is used without the services of a hardware Crypto Card.
\end{sphinxadmonition}

\index{Certificates@\spxentry{Certificates}!Virtel Web Access Security@\spxentry{Virtel Web Access Security}}\index{Virtel Web Access Security@\spxentry{Virtel Web Access Security}!Certificates@\spxentry{Certificates}}\index{Certificates@\spxentry{Certificates}!AT\sphinxhyphen{}TLS@\spxentry{AT\sphinxhyphen{}TLS}}\index{AT\sphinxhyphen{}TLS@\spxentry{AT\sphinxhyphen{}TLS}!Certificates@\spxentry{Certificates}}\ignorespaces 

\subsection{Identification by certificate}
\label{\detokenize{User_Guide:index-431}}\label{\detokenize{User_Guide:identification-by-certificate}}
\sphinxAtStartPar
The definition of a transaction with SECURITY 3 (TLS) allows VIRTEL to recognize a VIRTEL Web Access user by means of
a digital certificate installed in the user’s web browser. VIRTEL will use the RACF userid associated with the certificate
to determine the user’s authority to execute the transaction.

\sphinxAtStartPar
VIRTEL is able to obtain the client’s userid, without requiring the user to sign on, when all of the following conditions
are true:
\sphinxhyphen{} The user enters VIRTEL via a secure https session using the AT\sphinxhyphen{}TLS function of z/OS V1R7 or later
\sphinxhyphen{} The TTLSConnectionAction or TTLSEnvironmentAction statement in the policy agent configuration file contains the parameter HandshakeRole ServerWithClientAuth
\sphinxhyphen{} The client’s browser presents a valid certificate during SSL handshake
\sphinxhyphen{} The z/OS Security Server (RACF) recognizes the certificate as belonging to the user (Refer to “Chapter 21 RACF and Digital Certificates” in “SA22\sphinxhyphen{}7683\sphinxhyphen{}05 z/OS Security Server RACF Security Administrator’s Guide” for more information on associating user IDs with certificates)

\sphinxAtStartPar
The sample job SSLUCERT in the VIRTEL SAMPLIB illustrates how to generate a user client certificate using RACF. The
certificate is registered in the RACF database and is exported to a PKCS12 (.P12) file which contains both the user
certificate and the user’s private key encrypted under a passphrase. The .P12 file must be downloaded in binary to the
user’s workstation and installed in the user’s browser.

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
When a user is identified by certificate, VIRTEL does not have access to the user’s password, and therefore cannot propagate the signon to other applications such as CICS.
\end{sphinxadmonition}
\phantomsection\label{\detokenize{User_Guide:v462ug-password-encryption}}
\index{Password Encryption@\spxentry{Password Encryption}!Virtel Web Access Security@\spxentry{Virtel Web Access Security}}\index{Virtel Web Access Security@\spxentry{Virtel Web Access Security}!Password Encryption@\spxentry{Password Encryption}}\ignorespaces 

\subsection{Password encryption}
\label{\detokenize{User_Guide:password-encryption}}\label{\detokenize{User_Guide:index-432}}
\sphinxAtStartPar
VIRTEL Web Access offers the possibility of encrypting passwords (3270 non\sphinxhyphen{}display fields) transmitted in HTML pages.
VIRTEL uses the encryption facilities provided by the System z hardware through the z/OS Integrated Cryptographic
Service Facility (ICSF). Password encryption is available only when using VIRTEL Web Access in Ajax mode using the
WEB2AJAX.htm page template (see {\hyperref[\detokenize{User_Guide:v462ug-presentation-modes}]{\sphinxcrossref{\DUrole{std,std-ref}{“Presentation modes”}}}}).

\sphinxAtStartPar
To activate the password encryption option for WEB2AJAX.htm you must specify a CRYPTn parameter in the VIRTCT
(see “Parameters of the VIRTCT” in the VIRTEL Installation Guide). The CRYPTn parameter must specify CRYPT3270 as
the name and ICSF as the encryption engine, as in example shown below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{CRYPT1}\PYG{o}{=}\PYG{p}{(}\PYG{n}{CRYPT3270}\PYG{p}{,}\PYG{l+m+mi}{3}\PYG{n}{TDEA}\PYG{p}{,}\PYG{n}{RSA}\PYG{o}{\PYGZhy{}}\PYG{l+m+mi}{1024}\PYG{p}{,}\PYG{n}{ICSF}\PYG{p}{,}\PYG{n}{HEX}\PYG{p}{)}\PYG{p}{,} \PYG{o}{*}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{CRYPTn parameter for password encryption using WEB2AJAX.htm}

\phantomsection\label{\detokenize{User_Guide:v462ug-signon-using-html}}
\index{Signing on using HTML fields@\spxentry{Signing on using HTML fields}!Virtel Web Access Security@\spxentry{Virtel Web Access Security}}\index{Virtel Web Access Security@\spxentry{Virtel Web Access Security}!Signing on using HTML fields@\spxentry{Signing on using HTML fields}}\ignorespaces 

\subsection{Signon using HTML fields}
\label{\detokenize{User_Guide:signon-using-html-fields}}\label{\detokenize{User_Guide:index-433}}
\sphinxAtStartPar
The definition of a transaction with SECURITY 4 (HTML) allows VIRTEL to obtain the userid and password from fields
embedded in the HTML page.

\sphinxAtStartPar
When a security type 4 transaction is requested, and the user is not already signed on, VIRTEL will send the requested
page to the browser without connecting to the application. The page template must use the CREATE\sphinxhyphen{}VARIABLE\sphinxhyphen{}IF tag
(described 62) to determine whether signon is required, and the DECLARE\sphinxhyphen{}FIELD\sphinxhyphen{}AS tag (described 62) to declare the
username and password fields.

\sphinxAtStartPar
Following an unsuccessful signon attempt, the special variable \$ERRMSG\$ contains one or more error messages which
may be included in the page template.

\sphinxAtStartPar
The figure below shows an example of a transaction with security type 4:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
TRANSACTION DETAIL DEFINITION \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} Applid: VIRTEL 11:35:36
Internal name ===\PYGZgt{} HTTP\PYGZhy{}16               To associate with an entry point name
External name ===\PYGZgt{} cicsHtml              Name displayed on user menu
Description   ===\PYGZgt{} Access CICSD with HTML security
Application   ===\PYGZgt{} SPCICSD               Application to be called
PassTicket    ===\PYGZgt{} 0 Name ===\PYGZgt{}           0=no 1=yes 2=unsigned
Application type ===\PYGZgt{} 1                  1=VTAM 2=VIRTEL 3=SERV 4=PAGE 5=LINE
Pseudo\PYGZhy{}terminals ===\PYGZgt{} HTVT               Prefix of name of partner terminals
Logmode          ===\PYGZgt{}                    Specify when LOGMODE must be changed
How started      ===\PYGZgt{} 2                  1=menu 2=sub\PYGZhy{}menu 3=auto
Security         ===\PYGZgt{} 4                  0=none 1=basic 2=NTLM 3=TLS 4=HTML
H4W commands ?   ===\PYGZgt{}                    0=no 1=yes 2=if2VIRTEL 4=auto
Logon message    ===\PYGZgt{}

TIOA at logon    ===\PYGZgt{} Signon to CICS\PYGZam{}/W\PYGZam{}\PYGZsq{}114BE9\PYGZsq{}\PYGZam{}U\PYGZam{}\PYGZsq{}114CF9\PYGZsq{}\PYGZam{}P\PYGZam{}/A

TIOA at logoff   ===\PYGZgt{} \PYGZam{}£6D

Initial Scenario ===\PYGZgt{}                     Final Scenario  ===\PYGZgt{}
Input Scenario   ===\PYGZgt{}                     Output Scenario ===\PYGZgt{}
P1=Update                          P3=Return                        P12=Server
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{HTML security: Example transaction with security type 4}

\index{SESSION\sphinxhyphen{}CODE@\spxentry{SESSION\sphinxhyphen{}CODE}!tags@\spxentry{tags}}\index{tags@\spxentry{tags}!SESSION\sphinxhyphen{}CODE@\spxentry{SESSION\sphinxhyphen{}CODE}}\ignorespaces 
\sphinxAtStartPar
The figure below shows an example of a page template containing userid and password fields which can be used with
the security type 4 transaction as shown above.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZlt{}!\PYGZhy{}\PYGZhy{}VIRTEL start=\PYGZdq{}\PYGZob{}\PYGZob{}\PYGZob{}\PYGZdq{} end=\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{} \PYGZhy{}\PYGZhy{}\PYGZgt{}
\PYGZlt{}!doctype html public \PYGZdq{}\PYGZhy{}//w3c//dtd html 4.0//en\PYGZdq{}\PYGZgt{}
\PYGZlt{}html\PYGZgt{}\PYGZlt{}head\PYGZgt{}\PYGZob{}\PYGZob{}\PYGZob{} SET\PYGZhy{}OUTPUT\PYGZhy{}ENCODING\PYGZhy{}UTF\PYGZhy{}8 \PYGZdq{}\PYGZdq{} \PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZlt{}meta http\PYGZhy{}equiv=\PYGZdq{}Content\PYGZhy{}Type\PYGZdq{} content=\PYGZdq{}text/html; charset=utf\PYGZhy{}8\PYGZdq{}\PYGZgt{}
\PYGZob{}\PYGZob{}\PYGZob{}CREATE\PYGZhy{}VARIABLE\PYGZhy{}IF (SIGNON\PYGZhy{}IS\PYGZhy{}NEEDED) \PYGZdq{}\PYGZdl{}\PYGZdl{}SIGTYPE\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZob{}\PYGZob{}\PYGZob{}CREATE\PYGZhy{}VARIABLE\PYGZhy{}IF (APPLICATION\PYGZhy{}IS\PYGZhy{}CONNECTED) \PYGZdq{}\PYGZdl{}\PYGZdl{}APP\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
    \PYGZlt{}script language=\PYGZdq{}Javascript\PYGZdq{} src=\PYGZdq{}../w2h/js01.js\PYGZdq{}
type=\PYGZdq{}text/Javascript\PYGZdq{}\PYGZgt{}\PYGZlt{}/script\PYGZgt{}
    \PYGZlt{}script\PYGZgt{}document.write(\PYGZdq{}\PYGZlt{}link rel=\PYGZsq{}stylesheet\PYGZsq{} type=\PYGZsq{}text/css\PYGZsq{}
href=\PYGZsq{}../w2h/STYL\PYGZdq{}+w2hparm.style+\PYGZdq{}.css\PYGZsq{} /\PYGZgt{}\PYGZdq{})\PYGZlt{}/script\PYGZgt{}
    \PYGZob{}\PYGZob{}\PYGZob{}WHEN\PYGZhy{}EXISTS \PYGZdq{}\PYGZdl{}\PYGZdl{}SIGTYPE\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
    \PYGZlt{}link rel=\PYGZdq{}stylesheet\PYGZdq{} type=\PYGZdq{}text/css\PYGZdq{} href=\PYGZdq{}../w2h/login.css\PYGZdq{} /\PYGZgt{}
    \PYGZlt{}title\PYGZgt{}\PYGZob{}\PYGZob{}\PYGZob{}NAME\PYGZhy{}OF (VIRTEL)\PYGZcb{}\PYGZcb{}\PYGZcb{} signon\PYGZlt{}/title\PYGZgt{}
    \PYGZlt{}script src=\PYGZdq{}../w2h/md5.js\PYGZdq{} type=\PYGZdq{}text/Javascript\PYGZdq{}\PYGZgt{}\PYGZlt{}/script\PYGZgt{}
\PYGZlt{}/head\PYGZgt{}
\PYGZlt{}body\PYGZgt{}
\PYGZob{}\PYGZob{}\PYGZob{}DECLARE\PYGZhy{}FIELD\PYGZhy{}AS (USERNAME) \PYGZdq{}USERNAME\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZob{}\PYGZob{}\PYGZob{}DECLARE\PYGZhy{}FIELD\PYGZhy{}AS (PASSWORD,HEX) \PYGZdq{}PASSWORD\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZob{}\PYGZob{}\PYGZob{}DECLARE\PYGZhy{}FIELD\PYGZhy{}AS (NEW\PYGZhy{}PASSWORD,HEX) \PYGZdq{}NEWPASSWORD\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZob{}\PYGZob{}\PYGZob{}DEFINE\PYGZhy{}HTML\PYGZhy{}PFKEY \PYGZdq{}pf\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZlt{}script\PYGZgt{}
genloginform(\PYGZdq{}\PYGZob{}\PYGZob{}\PYGZob{}NAME\PYGZhy{}OF (PAGE)\PYGZcb{}\PYGZcb{}\PYGZcb{}++\PYGZob{}\PYGZob{}\PYGZob{}AJAX\PYGZhy{}SESSION\PYGZhy{}CODE\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{},
\PYGZdq{}\PYGZob{}\PYGZob{}\PYGZob{}NAME\PYGZhy{}OF (VIRTEL)\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{},\PYGZdq{}\PYGZob{}\PYGZob{}\PYGZob{}NAME\PYGZhy{}OF (TRANSACTION\PYGZhy{}EXTERNAL)\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{},
\PYGZdq{}\PYGZob{}\PYGZob{}\PYGZob{}NAME\PYGZhy{}OF (USER)\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{},\PYGZdq{}\PYGZob{}\PYGZob{}\PYGZob{}NAME\PYGZhy{}OF (PASSWORD)\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{},
\PYGZdq{}\PYGZob{}\PYGZob{}\PYGZob{}TRIMMED\PYGZhy{}VALUE\PYGZhy{}OF \PYGZdq{}\PYGZdl{}ERRMSG\PYGZdl{}\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{});
\PYGZlt{}/script\PYGZgt{}
\PYGZlt{}/body\PYGZgt{}
\PYGZob{}\PYGZob{}\PYGZob{}END\PYGZhy{}WHEN\PYGZhy{}EXISTS \PYGZdq{}\PYGZdl{}\PYGZdl{}SIGTYPE\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZob{}\PYGZob{}\PYGZob{}WHEN\PYGZhy{}NOT\PYGZhy{}EXISTS \PYGZdq{}\PYGZdl{}\PYGZdl{}SIGTYPE\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZlt{}body onLoad=\PYGZdq{} VirtelFormload()\PYGZdq{}\PYGZgt{}
\PYGZlt{}p\PYGZgt{}Logged in as \PYGZlt{}strong\PYGZgt{}\PYGZob{}\PYGZob{}\PYGZob{}TRIMMED\PYGZhy{}VALUE\PYGZhy{}OF \PYGZdq{}\PYGZdl{}\PYGZdl{}SIG\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZlt{}/strong\PYGZgt{}\PYGZlt{}/p\PYGZgt{}
\PYGZob{}\PYGZob{}\PYGZob{}FOR\PYGZhy{}EACH\PYGZhy{}VALUE\PYGZhy{}IN \PYGZdq{}\PYGZdl{}ERRMSG\PYGZdl{}\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZlt{}p\PYGZgt{}\PYGZob{}\PYGZob{}\PYGZob{}CURRENT\PYGZhy{}VALUE\PYGZhy{}OF \PYGZdq{}\PYGZdl{}ERRMSG\PYGZdl{}\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZlt{}/p\PYGZgt{}
\PYGZob{}\PYGZob{}\PYGZob{}END\PYGZhy{}FOR \PYGZdq{}\PYGZdl{}ERRMSG\PYGZdl{}\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZlt{}form name=virtelForm
    action=\PYGZdq{}classics.htm++\PYGZob{}\PYGZob{}\PYGZob{} SESSION\PYGZhy{}CODE \PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{} method=\PYGZdq{}POST\PYGZdq{}\PYGZgt{}
\PYGZlt{}pre\PYGZgt{}\PYGZlt{}div id=\PYGZdq{}printReady\PYGZdq{}\PYGZgt{}\PYGZob{}\PYGZob{}\PYGZob{} GENERATE\PYGZhy{}HTML (1,1,5000) \PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZlt{}/div\PYGZgt{}\PYGZlt{}/pre\PYGZgt{}
\PYGZlt{}input type=\PYGZdq{}submit\PYGZdq{} name=\PYGZdq{}disco\PYGZdq{} value=\PYGZdq{}Disconnect\PYGZdq{}
    onclick=\PYGZdq{}submitForm(\PYGZsq{}DISCONNECT\PYGZsq{})\PYGZdq{} \PYGZgt{}
\PYGZob{}\PYGZob{}\PYGZob{} DEFINE\PYGZhy{}HTML\PYGZhy{}PFKEY \PYGZdq{}pf\PYGZdq{} \PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZlt{}input name=\PYGZdq{}pf\PYGZdq{} type=\PYGZdq{}HIDDEN\PYGZdq{} value=\PYGZdq{}ENTER\PYGZdq{}\PYGZgt{}
\PYGZob{}\PYGZob{}\PYGZob{} DEFINE\PYGZhy{}HTML\PYGZhy{}FOCUS\PYGZhy{}FIELD \PYGZdq{}focusField\PYGZdq{} \PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZlt{}input name=\PYGZdq{}focusField\PYGZdq{} type=\PYGZdq{}hidden\PYGZdq{} value=\PYGZdq{}\PYGZob{}\PYGZob{}\PYGZob{}FIELD\PYGZhy{}WITH\PYGZhy{}CURSOR\PYGZcb{}\PYGZcb{}\PYGZcb{}\PYGZdq{}\PYGZgt{}
\PYGZlt{}/form\PYGZgt{}
\PYGZob{}\PYGZob{}\PYGZob{}END\PYGZhy{}WHEN\PYGZhy{}NOT\PYGZhy{}EXISTS \PYGZdq{}\PYGZdl{}\PYGZdl{}SIGTYPE\PYGZdq{}\PYGZcb{}\PYGZcb{}\PYGZcb{}
\PYGZlt{}/body\PYGZgt{}\PYGZlt{}/html\PYGZgt{}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{HTML security: Example page template}

\index{Virtel Rules@\spxentry{Virtel Rules}!Virtel Web Access Security@\spxentry{Virtel Web Access Security}}\index{Virtel Web Access Security@\spxentry{Virtel Web Access Security}!Virtel Rules@\spxentry{Virtel Rules}}\index{Virtel Rules@\spxentry{Virtel Rules}!Security@\spxentry{Security}}\index{Security@\spxentry{Security}!Virtel Rules@\spxentry{Virtel Rules}}\ignorespaces 

\subsection{Virtel Rules}
\label{\detokenize{User_Guide:virtel-rules}}\label{\detokenize{User_Guide:index-435}}
\sphinxAtStartPar
The rules attached to an HTTP line allow security to be implemented at the entry point level. The following example shows a set of three rules which are used to filter incoming HTTP calls. The first rule, 1HT00100, assigns an entry point specifically for users known to VIRTEL and identified by means of a “cookie” included in their HTTP request. In this
case, the entry point will be chosen according to the set of rules associated with that particular user. See \sphinxstyleemphasis{Correspondent Management} in the Virtel Administration Guide. The second rule, 1HT00200, assigns the entry point EPINTERN to clients whose IP address is 192.168.n.n, and only during the period Monday to Friday during the hours 08:30 to 17:30. The
third rule, 1HT00900, assigns the entry point EPPUBLIC to all other requests (this entry point could, for example, display a page containing the message “Access not authorised”).

\begin{sphinxVerbatim}[commandchars=\\\{\}]
LIST of RULES in RULE SET: H\PYGZhy{}HTTP \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} Applid: VIRTEL 13:57:53

Name     Status   Description                                    Entry Point
1HT00100 ACTIVE   HTTP access (users authorised by cookie)       \PYGZdl{}COOKIE\PYGZdl{}
1HT00200 ACTIVE   HTTP access (internal network, working hours)  EPINTERN
1HT00900 ACTIVE   HTTP access (other users)                      EPPUBLIC











P1=Update          P2=Suppress                 P3=Return
P6=1st page        P7=Page\PYGZhy{}1                   P8=Page+1             P12=Edit
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{HTTP security by rule: List of rules}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
DETAIL of RULE from RULE SET: S\PYGZhy{}SMTP \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} Applid: VIRTEL 15:46:00
Name          ===\PYGZgt{} 1HT00100               Rule priority is per name
Status        ===\PYGZgt{} ACTIVE                 19 May 2004 15:46:00 VIRDBA
Description   ===\PYGZgt{} HTTP access (Users authorised by cookie)
Entry point   ===\PYGZgt{} \PYGZdl{}COOKIE\PYGZdl{}               Target Entry Point
Parameter     ===\PYGZgt{}
Trace         ===\PYGZgt{}                        1=commands 2=data 3=partner

C : 0=IGNORE 1=IS 2=IS NOT 3=STARTS WITH 4=DOES NOT 5=ENDS WITH 6=DOES NOT
0 IP Subnet   ===\PYGZgt{}                        Mask ===\PYGZgt{}
0 Host        ===\PYGZgt{}
0 eMail       ===\PYGZgt{}
0 Calling DTE ===\PYGZgt{}                        Calling DTE address
0 Called      ===\PYGZgt{}                        Called DTE address
0 CUD0 (Hex)  ===\PYGZgt{}                        First 4 bytes of CUD (X25 protocol)
0 User Data   ===\PYGZgt{}

0 Days        ===\PYGZgt{} M:     T:      W:      T:      F:      S:      S:
0 Start time  ===\PYGZgt{} H:     M:      S:     End time ===\PYGZgt{} H:      M:      S:

P1=Update                        P3=Return                        Enter=Add
P4=Activate                      P5=Inactivate                    P12=Entry P.
CREATION OK
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{HTTP security by rule: Users authorized by cookie}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{DETAIL} \PYG{n}{of} \PYG{n}{RULE} \PYG{k+kn}{from} \PYG{n+nn}{RULE} \PYG{n}{SET}\PYG{p}{:} \PYG{n}{S}\PYG{o}{\PYGZhy{}}\PYG{n}{SMTP} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{n}{Applid}\PYG{p}{:} \PYG{n}{VIRTEL} \PYG{l+m+mi}{15}\PYG{p}{:}\PYG{l+m+mi}{46}\PYG{p}{:}\PYG{l+m+mi}{00}
\PYG{n}{Name}          \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{1}\PYG{n}{HT00200}               \PYG{n}{Rule} \PYG{n}{priority} \PYG{o+ow}{is} \PYG{n}{per} \PYG{n}{name}
\PYG{n}{Status}        \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{ACTIVE}                 \PYG{l+m+mi}{19} \PYG{n}{May} \PYG{l+m+mi}{2004} \PYG{l+m+mi}{15}\PYG{p}{:}\PYG{l+m+mi}{46}\PYG{p}{:}\PYG{l+m+mi}{00} \PYG{n}{VIRDBA}
\PYG{n}{Description}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{HTTP} \PYG{n}{access} \PYG{p}{(}\PYG{n}{Internal} \PYG{n}{network}\PYG{p}{,} \PYG{n}{working} \PYG{n}{hours}\PYG{p}{)}
\PYG{n}{Entry} \PYG{n}{point}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{EPINTERN}               \PYG{n}{Target} \PYG{n}{Entry} \PYG{n}{Point}
\PYG{n}{Parameter}     \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}
\PYG{n}{Trace}         \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                        \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{commands} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{data} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{partner}

\PYG{n}{C} \PYG{p}{:} \PYG{l+m+mi}{0}\PYG{o}{=}\PYG{n}{IGNORE} \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{IS} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{IS} \PYG{n}{NOT} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{STARTS} \PYG{n}{WITH} \PYG{l+m+mi}{4}\PYG{o}{=}\PYG{n}{DOES} \PYG{n}{NOT} \PYG{l+m+mi}{5}\PYG{o}{=}\PYG{n}{ENDS} \PYG{n}{WITH} \PYG{l+m+mi}{6}\PYG{o}{=}\PYG{n}{DOES} \PYG{n}{NOT}
\PYG{l+m+mi}{1} \PYG{n}{IP} \PYG{n}{Subnet}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mf}{192.168}\PYG{l+m+mf}{.000}\PYG{l+m+mf}{.000}        \PYG{n}{Mask} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mf}{255.255}\PYG{l+m+mf}{.000}\PYG{l+m+mf}{.000}
\PYG{l+m+mi}{0} \PYG{n}{Host}        \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}
\PYG{l+m+mi}{0} \PYG{n}{eMail}       \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}
\PYG{l+m+mi}{0} \PYG{n}{Calling} \PYG{n}{DTE} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                        \PYG{n}{Calling} \PYG{n}{DTE} \PYG{n}{address}
\PYG{l+m+mi}{0} \PYG{n}{Called}      \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                        \PYG{n}{Called} \PYG{n}{DTE} \PYG{n}{address}
\PYG{l+m+mi}{0} \PYG{n}{CUD0} \PYG{p}{(}\PYG{n}{Hex}\PYG{p}{)}  \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                        \PYG{n}{First} \PYG{l+m+mi}{4} \PYG{n+nb}{bytes} \PYG{n}{of} \PYG{n}{CUD} \PYG{p}{(}\PYG{n}{X25} \PYG{n}{protocol}\PYG{p}{)}
\PYG{l+m+mi}{0} \PYG{n}{User} \PYG{n}{Data}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}

\PYG{l+m+mi}{1} \PYG{n}{Days}        \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{M}\PYG{p}{:} \PYG{n}{X}   \PYG{n}{T}\PYG{p}{:} \PYG{n}{X}    \PYG{n}{W}\PYG{p}{:} \PYG{n}{X}    \PYG{n}{T}\PYG{p}{:} \PYG{n}{X}    \PYG{n}{F}\PYG{p}{:} \PYG{n}{X}    \PYG{n}{S}\PYG{p}{:}      \PYG{n}{S}\PYG{p}{:}
\PYG{l+m+mi}{1} \PYG{n}{Start} \PYG{n}{time}  \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{H}\PYG{p}{:} \PYG{l+m+mi}{08}  \PYG{n}{M}\PYG{p}{:} \PYG{l+m+mi}{30}   \PYG{n}{S}\PYG{p}{:} \PYG{l+m+mi}{00}  \PYG{n}{End} \PYG{n}{time} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{H}\PYG{p}{:} \PYG{l+m+mi}{17}   \PYG{n}{M}\PYG{p}{:} \PYG{l+m+mi}{30}   \PYG{n}{S}\PYG{p}{:} \PYG{l+m+mi}{00}

\PYG{n}{P1}\PYG{o}{=}\PYG{n}{Update}                        \PYG{n}{P3}\PYG{o}{=}\PYG{n}{Return}                        \PYG{n}{Enter}\PYG{o}{=}\PYG{n}{Add}
\PYG{n}{P4}\PYG{o}{=}\PYG{n}{Activate}                      \PYG{n}{P5}\PYG{o}{=}\PYG{n}{Inactivate}                    \PYG{n}{P12}\PYG{o}{=}\PYG{n}{Entry} \PYG{n}{P}\PYG{o}{.}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{HTTP security by rule: Internal network, working hours}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{DETAIL} \PYG{n}{of} \PYG{n}{RULE} \PYG{k+kn}{from} \PYG{n+nn}{RULE} \PYG{n}{SET}\PYG{p}{:} \PYG{n}{S}\PYG{o}{\PYGZhy{}}\PYG{n}{SMTP} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{n}{Applid}\PYG{p}{:} \PYG{n}{VIRTEL} \PYG{l+m+mi}{15}\PYG{p}{:}\PYG{l+m+mi}{46}\PYG{p}{:}\PYG{l+m+mi}{00}
\PYG{n}{Name}          \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{1}\PYG{n}{HT00900}               \PYG{n}{Rule} \PYG{n}{priority} \PYG{o+ow}{is} \PYG{n}{per} \PYG{n}{name}
\PYG{n}{Status}        \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{ACTIVE}                 \PYG{l+m+mi}{19} \PYG{n}{May} \PYG{l+m+mi}{2004} \PYG{l+m+mi}{15}\PYG{p}{:}\PYG{l+m+mi}{46}\PYG{p}{:}\PYG{l+m+mi}{00} \PYG{n}{VIRDBA}
\PYG{n}{Description}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{HTTP} \PYG{n}{access} \PYG{p}{(}\PYG{n}{Other} \PYG{n}{users}\PYG{p}{)}
\PYG{n}{Entry} \PYG{n}{point}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{EPPUBLIC}               \PYG{n}{Target} \PYG{n}{Entry} \PYG{n}{Point}
\PYG{n}{Parameter}     \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}
\PYG{n}{Trace}         \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                        \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{commands} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{data} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{partner}

\PYG{n}{C} \PYG{p}{:} \PYG{l+m+mi}{0}\PYG{o}{=}\PYG{n}{IGNORE} \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{IS} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{IS} \PYG{n}{NOT} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{STARTS} \PYG{n}{WITH} \PYG{l+m+mi}{4}\PYG{o}{=}\PYG{n}{DOES} \PYG{n}{NOT} \PYG{l+m+mi}{5}\PYG{o}{=}\PYG{n}{ENDS} \PYG{n}{WITH} \PYG{l+m+mi}{6}\PYG{o}{=}\PYG{n}{DOES} \PYG{n}{NOT}
\PYG{l+m+mi}{0} \PYG{n}{IP} \PYG{n}{Subnet}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mf}{000.000}\PYG{l+m+mf}{.000}\PYG{l+m+mf}{.000}        \PYG{n}{Mask} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mf}{000.000}\PYG{l+m+mf}{.000}\PYG{l+m+mf}{.000}
\PYG{l+m+mi}{0} \PYG{n}{Host}        \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}
\PYG{l+m+mi}{0} \PYG{n}{eMail}       \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}
\PYG{l+m+mi}{0} \PYG{n}{Calling} \PYG{n}{DTE} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                        \PYG{n}{Calling} \PYG{n}{DTE} \PYG{n}{address}
\PYG{l+m+mi}{0} \PYG{n}{Called}      \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                        \PYG{n}{Called} \PYG{n}{DTE} \PYG{n}{address}
\PYG{l+m+mi}{0} \PYG{n}{CUD0} \PYG{p}{(}\PYG{n}{Hex}\PYG{p}{)}  \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                        \PYG{n}{First} \PYG{l+m+mi}{4} \PYG{n+nb}{bytes} \PYG{n}{of} \PYG{n}{CUD} \PYG{p}{(}\PYG{n}{X25} \PYG{n}{protocol}\PYG{p}{)}
\PYG{l+m+mi}{0} \PYG{n}{User} \PYG{n}{Data}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}

\PYG{l+m+mi}{0} \PYG{n}{Days}        \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{M}\PYG{p}{:}     \PYG{n}{T}\PYG{p}{:}      \PYG{n}{W}\PYG{p}{:}      \PYG{n}{T}\PYG{p}{:}      \PYG{n}{F}\PYG{p}{:}      \PYG{n}{S}\PYG{p}{:}      \PYG{n}{S}\PYG{p}{:}
\PYG{l+m+mi}{0} \PYG{n}{Start} \PYG{n}{time}  \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{H}\PYG{p}{:}     \PYG{n}{M}\PYG{p}{:}      \PYG{n}{S}\PYG{p}{:}     \PYG{n}{End} \PYG{n}{time} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{H}\PYG{p}{:}      \PYG{n}{M}\PYG{p}{:}      \PYG{n}{S}\PYG{p}{:}

\PYG{n}{P1}\PYG{o}{=}\PYG{n}{Update}                        \PYG{n}{P3}\PYG{o}{=}\PYG{n}{Return}                        \PYG{n}{Enter}\PYG{o}{=}\PYG{n}{Add}
\PYG{n}{P4}\PYG{o}{=}\PYG{n}{Activate}                      \PYG{n}{P5}\PYG{o}{=}\PYG{n}{Inactivate}                    \PYG{n}{P12}\PYG{o}{=}\PYG{n}{Entry} \PYG{n}{P}\PYG{o}{.}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{HTTP security by rule: Other users}

\newpage

\index{HOWTOs@\spxentry{HOWTOs}}\ignorespaces 

\chapter{HOWTOs}
\label{\detokenize{User_Guide:howtos}}\label{\detokenize{User_Guide:index-436}}
\index{HOWTOs@\spxentry{HOWTOs}!Virtel@\spxentry{Virtel}}\index{Virtel@\spxentry{Virtel}!HOWTOs@\spxentry{HOWTOs}}\index{Use different screen size@\spxentry{Use different screen size}!HOWTOs@\spxentry{HOWTOs}}\index{HOWTOs@\spxentry{HOWTOs}!Use different screen size@\spxentry{Use different screen size}}\ignorespaces 

\section{How To Use Different Screen Sizes}
\label{\detokenize{User_Guide:how-to-use-different-screen-sizes}}\label{\detokenize{User_Guide:index-437}}
\sphinxAtStartPar
Although the standard 3270 screen size is 24 rows by 80 columns, certain applications benefit from the use of
terminals with larger screen sizes. The screen size is determined by the LOGMODE used for the session between
VIRTEL and the host application. VTAM offers logmodes for the following standard screen sizes:
\begin{itemize}
\item {} 
\sphinxAtStartPar
model 2 : 24x80 (logmode SNX32702)

\item {} 
\sphinxAtStartPar
model 3 : 32x80 (logmode SNX32703)

\item {} 
\sphinxAtStartPar
model 4 : 43x80 (logmode SNX32704)

\item {} 
\sphinxAtStartPar
model 5 : 27x132 (logmode SNX32705)

\end{itemize}

\sphinxAtStartPar
There are two different ways that the VIRTEL administrator can set up the configuration to allow the VIRTEL Web
Access user to select the desired logmode:
\begin{itemize}
\item {} 
\sphinxAtStartPar
define a separate VIRTEL transaction for each screen size, and allow the user to select the appropriate transaction

\item {} 
\sphinxAtStartPar
group the VTAM relay LUs into pools, each pool having a different logmode, and allow the user to select the pool by coding an appropriate parameter on the URL

\end{itemize}


\subsection{LOGMODE defined by the transaction}
\label{\detokenize{User_Guide:logmode-defined-by-the-transaction}}
\sphinxAtStartPar
With this method, the administrator defines multiple VIRTEL transactions for a single application, each transaction
specifying a different logmode. For example, transactions Tso2 and Tso5 delivered in the sample configuration both
define TSO as the target application, but specify different logmodes SNX32702 and SNX32705 respectively. The user
selects the desired transaction from the applist menu displayed by the “Other applications” link in the VIRTEL Web
Access menu.

\sphinxAtStartPar
The figure below shows the definition of the Tso5 transaction defined under the WEB2HOST entry point:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
TRANSACTION DETAIL DEFINITION \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} Applid: VIRTEL 17:12:54
Internal name ===\PYGZgt{} W2H\PYGZhy{}13M5             To associate with an entry point name
External name ===\PYGZgt{} Tso5                 Name displayed on user menu
Description   ===\PYGZgt{} Logon to Tso (3270 model 5)
Application   ===\PYGZgt{} TSO                  Application to be called
PassTicket    ===\PYGZgt{} 0 Name ===\PYGZgt{}          0=no 1=yes 2=unsigned
Application type ===\PYGZgt{} 1                 1=VTAM 2=VIRTEL 3=SERV 4=PAGE 5=LINE
Pseudo\PYGZhy{}terminals ===\PYGZgt{} DEVT              Prefix of name of partner terminals
Logmode          ===\PYGZgt{} SNX32705          Specify when LOGMODE must be changed
How started      ===\PYGZgt{} 1                 1=menu 2=sub\PYGZhy{}menu 3=auto
Security         ===\PYGZgt{} 0                 0=none 1=basic 2=NTLM 3=TLS 4=HTML
H4W commands ?   ===\PYGZgt{}                   0=no 1=yes 2=if2VIRTEL 4=auto
Logon message    ===\PYGZgt{}

TIOA at logon    ===\PYGZgt{}

TIOA at logoff   ===\PYGZgt{}

Initial Scenario ===\PYGZgt{}                   Final Scenario  ===\PYGZgt{}
Input Scenario   ===\PYGZgt{}                   Output Scenario ===\PYGZgt{}

P1=Update                         P3=Return                          P12=Server
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example of TSO transaction TSO specifying logmode SNX32705}

\sphinxAtStartPar
The URL to access this transaction could be of the format:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{l+m+mf}{10.20}\PYG{l+m+mf}{.170}\PYG{l+m+mf}{.71}\PYG{p}{:}\PYG{l+m+mi}{41001}\PYG{o}{/}\PYG{n}{w2h}\PYG{o}{/}\PYG{n}{WEB2AJAX}\PYG{o}{.}\PYG{n}{htm}\PYG{o}{+}\PYG{n}{Tso5}
\end{sphinxVerbatim}


\subsection{Assigning a LOGMODE by URL parameter}
\label{\detokenize{User_Guide:assigning-a-logmode-by-url-parameter}}
\sphinxAtStartPar
The URL which allows the browser to connect to a host application via VIRTEL may contain a parameter, such as “model5” as shown in this example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{l+m+mf}{10.20}\PYG{l+m+mf}{.170}\PYG{l+m+mf}{.71}\PYG{p}{:}\PYG{l+m+mi}{41001}\PYG{o}{/}\PYG{n}{w2h}\PYG{o}{/}\PYG{n}{WEB2AJAX}\PYG{o}{.}\PYG{n}{htm}\PYG{o}{+}\PYG{n}{Tso}\PYG{o}{+}\PYG{n}{model5}
\end{sphinxVerbatim}

\sphinxAtStartPar
This form of a VIRTEL URL is described in the section {\hyperref[\detokenize{User_Guide:v462ug-dynamic-url}]{\sphinxcrossref{\DUrole{std,std-ref}{“Dynamic URL with user data”}}}}.

\sphinxAtStartPar
This form of URL is processed by VIRTEL with reference to the “rule set” associated with the HTTP line. VIRTEL looks for
a rule whose “User Data” field matches the value of the parameter (model5). The “Parameter” field of the selected
rule assigns a relay LU name from the pool defined with logmode SNX32705.

\sphinxAtStartPar
The VTAM definition of the relay pool is shown in the example below. In this example, LU names in the range
RHTVT5nn are defined to have the model5 logmode SNX32705:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
VIRTAPPL VBUILD TYPE=APPL
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} *
* RHTVTxxx : Relay for VTAM applications acceded by WEB to HOST *
* \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} *
* 3270 model 2 terminals
RHTVT0?? APPL AUTH=(ACQ,PASS),MODETAB=ISTINCLM,DLOGMOD=SNX32702,EAS=1
* 3270 model 5 terminals
RHTVT5?? APPL AUTH=(ACQ,PASS),MODETAB=ISTINCLM,DLOGMOD=SNX32705,EAS=1
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{VTAM definition of terminal groups}

\sphinxAtStartPar
The screen below shows an example rule which assigns a relay LU from the range RHTVT5nn when the URL contains
the parameter model5:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{DETAIL} \PYG{n}{of} \PYG{n}{RULE} \PYG{k+kn}{from} \PYG{n+nn}{RULE} \PYG{n}{SET}\PYG{p}{:} \PYG{n}{S}\PYG{o}{\PYGZhy{}}\PYG{n}{SMTP} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{n}{Applid}\PYG{p}{:} \PYG{n}{VIRTEL} \PYG{l+m+mi}{17}\PYG{p}{:}\PYG{l+m+mi}{15}\PYG{p}{:}\PYG{l+m+mi}{15}
\PYG{n}{Name}          \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{WHT00150}               \PYG{n}{Rule} \PYG{n}{priority} \PYG{o+ow}{is} \PYG{n}{per} \PYG{n}{name}
\PYG{n}{Status}        \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{ACTIVE}                 \PYG{l+m+mi}{19} \PYG{n}{May} \PYG{l+m+mi}{2004} \PYG{l+m+mi}{15}\PYG{p}{:}\PYG{l+m+mi}{46}\PYG{p}{:}\PYG{l+m+mi}{00} \PYG{n}{VIRDBA}
\PYG{n}{Description}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{HTTP} \PYG{n}{access} \PYG{p}{(}\PYG{n}{With} \PYG{n}{model5} \PYG{n}{URL} \PYG{n}{parameter}\PYG{p}{)}
\PYG{n}{Entry} \PYG{n}{point}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{WEB2HOST}               \PYG{n}{Target} \PYG{n}{Entry} \PYG{n}{Point}
\PYG{n}{Parameter}     \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{RHTVT5}\PYG{o}{*}                       \PYG{o}{\PYGZam{}}\PYG{l+m+mi}{1} \PYG{n}{value} \PYG{o+ow}{or} \PYG{n}{LUNAME}
\PYG{n}{Trace}         \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                        \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{commands} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{data} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{partner}

\PYG{n}{C} \PYG{p}{:} \PYG{l+m+mi}{0}\PYG{o}{=}\PYG{n}{IGNORE} \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{IS} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{IS} \PYG{n}{NOT} \PYG{l+m+mi}{3}\PYG{o}{=}\PYG{n}{STARTS} \PYG{n}{WITH} \PYG{l+m+mi}{4}\PYG{o}{=}\PYG{n}{DOES} \PYG{n}{NOT} \PYG{l+m+mi}{5}\PYG{o}{=}\PYG{n}{ENDS} \PYG{n}{WITH} \PYG{l+m+mi}{6}\PYG{o}{=}\PYG{n}{DOES} \PYG{n}{NOT}
\PYG{l+m+mi}{0} \PYG{n}{IP} \PYG{n}{Subnet}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                        \PYG{n}{Mask} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}
\PYG{l+m+mi}{0} \PYG{n}{Host}        \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}
\PYG{l+m+mi}{0} \PYG{n}{eMail}       \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}
\PYG{l+m+mi}{0} \PYG{n}{Calling} \PYG{n}{DTE} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                        \PYG{n}{Calling} \PYG{n}{DTE} \PYG{n}{address}
\PYG{l+m+mi}{0} \PYG{n}{Called}      \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                        \PYG{n}{Called} \PYG{n}{DTE} \PYG{n}{address}
\PYG{l+m+mi}{0} \PYG{n}{CUD0} \PYG{p}{(}\PYG{n}{Hex}\PYG{p}{)}  \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                        \PYG{n}{First} \PYG{l+m+mi}{4} \PYG{n+nb}{bytes} \PYG{n}{of} \PYG{n}{CUD} \PYG{p}{(}\PYG{n}{X25} \PYG{n}{protocol}\PYG{p}{)}
\PYG{l+m+mi}{0} \PYG{n}{User} \PYG{n}{Data}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{model5}

\PYG{l+m+mi}{0} \PYG{n}{Days}        \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{M}\PYG{p}{:}     \PYG{n}{T}\PYG{p}{:}      \PYG{n}{W}\PYG{p}{:}      \PYG{n}{T}\PYG{p}{:}      \PYG{n}{F}\PYG{p}{:}      \PYG{n}{S}\PYG{p}{:}      \PYG{n}{S}\PYG{p}{:}
\PYG{l+m+mi}{0} \PYG{n}{Start} \PYG{n}{time}  \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{H}\PYG{p}{:}     \PYG{n}{M}\PYG{p}{:}      \PYG{n}{S}\PYG{p}{:}     \PYG{n}{End} \PYG{n}{time} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{H}\PYG{p}{:}      \PYG{n}{M}\PYG{p}{:}      \PYG{n}{S}\PYG{p}{:}

\PYG{n}{P1}\PYG{o}{=}\PYG{n}{Update}                        \PYG{n}{P3}\PYG{o}{=}\PYG{n}{Return}                        \PYG{n}{Enter}\PYG{o}{=}\PYG{n}{Add}
\PYG{n}{P4}\PYG{o}{=}\PYG{n}{Activate}                      \PYG{n}{P5}\PYG{o}{=}\PYG{n}{Inactivate}                    \PYG{n}{P12}\PYG{o}{=}\PYG{n}{Entry} \PYG{n}{P}\PYG{o}{.}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example rule for selection of logmode by URL}

\sphinxAtStartPar
The LU name (RHTVT5nn) assigned by the rule must belong to the LU pool shared assigned to the HTTP line, as shown in the example below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
TERMINAL DETAIL DEFINITION \PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{} Applid: VIRTEL 13:32:28
Terminal          ===\PYGZgt{} W2HTP500       ?wxyZZZZ for dynamic allocation
                                      w : Sna or Non\PYGZhy{}sna or * (category)
                                      x : 1, 2, 3, 4, 5 or * (model)
                                      y : Colour, Monochrome or *
                                      Z : any characters
Relay             ===\PYGZgt{} RHTVT500 Name seen by VTAM applications
                                      = : copied from the terminal name
*Pool name        ===\PYGZgt{} *W2HPOOL       Pool where to put this terminal
Description       ===\PYGZgt{} Relay pool for HTTP (3270 model 5)

Entry Point       ===\PYGZgt{}                Enforced Entry Point
2nd relay         ===\PYGZgt{} RHTIM500       Possible 2nd relay (Printer)
Terminal type     ===\PYGZgt{} 3              1=LU1 2=3270 3=FC P=Printer S=Scs
Compression       ===\PYGZgt{} 2              0, 1, 2 or 3 : compression type
Possible Calls    ===\PYGZgt{} 3              0=None 1=Inbound 2=Outbound 3=Both
Write Stats to ===\PYGZgt{} 12                1,4=VIRSTAT 2=VIRLOG

Repeat ===\PYGZgt{} 0020 Number of generated terminals

P1=Update                         P3=Return                         Enter=Add
                                                                    P12=Server
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Definition of model 5 terminals in the W2HPOOL pool}


\subsection{User\sphinxhyphen{}specified LOGMODE}
\label{\detokenize{User_Guide:user-specified-logmode}}
\sphinxAtStartPar
When the entry point definition specifies SCENLOGM in the “Identification scenario” field, the user may override the
default logmode by appending an additional parameter LOGMODE=modename to the URL, as shown in this example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
http://10.20.170.71:41001/w2h/WEB2AJAX.htm+Tso?logmode=SNX32705
\end{sphinxVerbatim}

\sphinxAtStartPar
The source code for the SCENLOGM scenario is supplied in the VIRTEL SAMPLIB.

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
To activate this functionality, SCENLOGM must be specified in the “Identification scenario” field of the ENTRY POINT (not the transaction definition). Also, the transaction definition must not have a LOGMODE= value.
\end{sphinxadmonition}


\subsection{Dynamic logmode with user\sphinxhyphen{}specified screen size}
\label{\detokenize{User_Guide:dynamic-logmode-with-user-specified-screen-size}}
\sphinxAtStartPar
VIRTEL Web Access also supports the use of “dynamic” logmodes, such as D4A32XX3, which allow the user to specify a
non\sphinxhyphen{}standard alternate screen size. When the entry point definition specifies SCENLOGM in the “Identification
scenario” field, the user may also append ROWS and COLS parameters to the URL, as shown in this example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
http://10.20.170.71:41001/w2h/WEB2AJAX.htm+Tso?logmode=D4A32XX3\PYGZam{}rows=54\PYGZam{}cols=132
\end{sphinxVerbatim}

\sphinxAtStartPar
VIRTEL allows a maximum screen size of 62 rows by 160 columns. The host application must also support the use of
non\sphinxhyphen{}standard screen sizes.

\index{Support multile Code Pages@\spxentry{Support multile Code Pages}!HOWTOs@\spxentry{HOWTOs}}\index{HOWTOs@\spxentry{HOWTOs}!Support multile Code Pages@\spxentry{Support multile Code Pages}}\ignorespaces 

\section{How To Support Multiple Codes Pages}
\label{\detokenize{User_Guide:how-to-support-multiple-codes-pages}}\label{\detokenize{User_Guide:index-438}}
\sphinxAtStartPar
VIRTEL can use two methods of EBCDIC translation and this is governed by the template or web page being displayed. If the page contains the embedded VIRTEL tag \{\{\{SET\sphinxhyphen{}OUTPUT\sphinxhyphen{}ENCODING\sphinxhyphen{}UTF\sphinxhyphen{}8\}\}\} than the TCT DEFUTF8 parameter is used. If the page doesn’t contain the tag then the code pages identified by the COUNTRY parameter are used. (See
“COUNTRY” and “DEFUTF8” parameters in the VIRTEL Installation Guide for further details). Code Page Support can be provided at the following levels:
\begin{itemize}
\item {} 
\sphinxAtStartPar
TCT Level \sphinxhyphen{} This would provide Code Page translation defaults for all lines and transaction. Effectively a Global option for an instance of VIRTEL.

\item {} 
\sphinxAtStartPar
URL Level \textendash{} This overrides the TCT default.

\item {} 
\sphinxAtStartPar
Transaction level \sphinxhyphen{} Code pages can be determined through the VIRTEL Scenario language using the SET\$ ENCODING and SET\$ URL\sphinxhyphen{}ENCODING instructions.

\end{itemize}


\subsection{Defining Code Pages translation defaults}
\label{\detokenize{User_Guide:defining-code-pages-translation-defaults}}
\sphinxAtStartPar
This is done by defining a default value for “COUNTRY” and “DEFUTF8” parameters in the VIRTEL TCT (see “Parameters of the VIRTCT” in the VIRTEL Installation Guide).


\subsubsection{Override the TCT defaults at URL level}
\label{\detokenize{User_Guide:override-the-tct-defaults-at-url-level}}
\sphinxAtStartPar
Users who require a codepage different from the TCT definition can specify the code page as a parameter of the URL.
For example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
http://10.20.170.71:41001/w2h/WEB2AJAX.htm+Tso?codepage=IBM1047
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
To activate this functionality, SCENLOGM must be specified in the “Identification scenario” field of the ENTRY POINT (not the transaction definition).
\end{sphinxadmonition}

\sphinxAtStartPar
The value of the CODEPAGE parameter may be either:
\begin{itemize}
\item {} 
\sphinxAtStartPar
one of the values listed for the DEFUTF8 parameter of the VIRTCT (see “Parameters of the VIRTCT” in the VIRTEL Installation Guide); or

\item {} 
\sphinxAtStartPar
one of the additional codepages you have specified in the CHARSET parameter in your VIRTCT at VIRTEL installation time

\end{itemize}


\subsubsection{Override the TCT defaults at business logic level}
\label{\detokenize{User_Guide:override-the-tct-defaults-at-business-logic-level}}
\sphinxAtStartPar
At a transaction level code pages can be determined through the VIRTEL Scenario language using the SET\$ ENCODING
and SET\$ URL\sphinxhyphen{}ENCODING instructions. These are described in the VWA Users Guide.


\subsection{Supporting multiple countries.}
\label{\detokenize{User_Guide:supporting-multiple-countries}}
\sphinxAtStartPar
If we take the scenario that applications can be accessible globally than VIRTEL can incorporate the country differences through one of the following methods. In most case the TCT or URL override will accommodate such a set up.
\begin{itemize}
\item {} 
\sphinxAtStartPar
For each country supported, have a different instance of VIRTEL specifying the relevant country code pages at the TCT level.

\item {} 
\sphinxAtStartPar
For each country supported, have a separate line/port and use the URL overrides.

\item {} 
\sphinxAtStartPar
For each country supported, have a common line/port and use the URL overrides.

\end{itemize}

\index{Session Termination@\spxentry{Session Termination}!HOWTOs@\spxentry{HOWTOs}}\index{HOWTOs@\spxentry{HOWTOs}!Session Termination@\spxentry{Session Termination}}\ignorespaces 

\section{How To Handle Host Session Termination}
\label{\detokenize{User_Guide:how-to-handle-host-session-termination}}\label{\detokenize{User_Guide:index-439}}
\sphinxAtStartPar
When the user terminates the application session by pressing the “Disconnect” button in the browser, various options are available:
\sphinxhyphen{} Return to the application selection menu
\sphinxhyphen{} Display a specific HTML page
\sphinxhyphen{} Close the browser window and return to the desktop

\sphinxAtStartPar
Remember that it is always best to exit cleanly from the host application by pressing the “Disconnect” button, rather than closing the browser window. If the browser window is closed abruptly, the host session resources may not be freed until the expiry of the timeout period specified in the entry point definition.


\subsection{Return to the application selection menu}
\label{\detokenize{User_Guide:return-to-the-application-selection-menu}}
\sphinxAtStartPar
When a “Disconnect” request is received, VIRTEL returns to the root URL and displays the default page for the line, which will normally be an application selection menu. For detailed information, see {\hyperref[\detokenize{User_Guide:v462ug-url-formats}]{\sphinxcrossref{\DUrole{std,std-ref}{“Virtel URL formats”}}}}. The user can then choose to connect to the same or a different application by clicking on the appropriate link in the
application selection menu.


\subsection{Displaying a specific page on disconnection}
\label{\detokenize{User_Guide:displaying-a-specific-page-on-disconnection}}
\sphinxAtStartPar
Those sites wishing to display a specific page at the end of a session may use the “Last page” field in the definition of the entry point associated with the HTTP line or the entry point selected by the rules of the line. The “Last page” field indicates the name of the page to be displayed following disconnection from the host application. The indicated file must be uploaded to the same directory as specified in the URL for the host application (for example W2H\sphinxhyphen{}DIR if the URL specifies /w2h/WEB2AJAX.htm).

\sphinxAtStartPar
The “Last page” may contain instructions to the user and may include system information provided by VIRTEL (such as the application and terminal name, date and time, etc.)


\subsection{Closing the browser window automatically}
\label{\detokenize{User_Guide:closing-the-browser-window-automatically}}
\sphinxAtStartPar
Sites who wish to close the browser window and return to the desktop when the user disconnects from the host application may specify close.htm in the “Last page” field of the entry point definition. This page contains JavaScript code which will attempt to close the current browser window. Depending on the browser version and security settings, the window may close, a prompt may be issued, or the window may remain open. The close.htm page is delivered as standard in the W2H\sphinxhyphen{}DIR directory but may be copied to another directory if required.

\sphinxAtStartPar
The figure below shows an example of an entry point definition with close.htm specified as the “Last page”:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{ENTRY} \PYG{n}{POINT} \PYG{n}{DETAIL} \PYG{n}{DEFINITION} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}} \PYG{n}{Applid}\PYG{p}{:} \PYG{n}{VIRTEL} \PYG{l+m+mi}{15}\PYG{p}{:}\PYG{l+m+mi}{52}\PYG{p}{:}\PYG{l+m+mi}{26}
       \PYG{n}{Name}          \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{WEB2HOST}            \PYG{n}{Name} \PYG{n}{this} \PYG{n}{ENTRY} \PYG{n}{POINT} \PYG{p}{(}\PYG{n}{LOGON} \PYG{n}{DATA}\PYG{p}{)}
       \PYG{n}{Description}   \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{HTTP} \PYG{n}{entry} \PYG{n}{point} \PYG{p}{(}\PYG{n}{SysperTec} \PYG{n}{menu}\PYG{p}{)}
       \PYG{n}{Transactions}  \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{W2H}                 \PYG{n}{Prefix} \PYG{k}{for} \PYG{n}{associated} \PYG{n}{transactions}
       \PYG{n}{Last} \PYG{n}{page} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{CLOSE}\PYG{o}{.}\PYG{n}{HTM}               \PYG{n}{Displayed} \PYG{n}{at} \PYG{n}{end} \PYG{n}{of} \PYG{n}{session}
       \PYG{n}{Transparency}  \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                     \PYG{n}{Server} \PYG{n}{types} \PYG{n}{NOT} \PYG{n}{to} \PYG{n}{emulate}
       \PYG{n}{Time} \PYG{n}{out}      \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{0005}   \PYG{n}{minutes}      \PYG{n}{Maximum} \PYG{n}{inactive} \PYG{n}{time}
       \PYG{n}{Do} \PYG{k}{if} \PYG{n}{timeout} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{l+m+mi}{0}                   \PYG{l+m+mi}{0}\PYG{o}{=}\PYG{n}{logoff} \PYG{l+m+mi}{1}\PYG{o}{=}\PYG{n}{bip}\PYG{o}{+}\PYG{n}{logoff} \PYG{l+m+mi}{2}\PYG{o}{=}\PYG{n}{anti} \PYG{n}{pad}
       \PYG{n}{Emulation}     \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{HTML}                \PYG{n}{Type} \PYG{n}{of} \PYG{n}{terminal}\PYG{p}{:}
       \PYG{n}{HOST4WEB}    \PYG{p}{:} \PYG{n}{program} \PYG{n}{driven}           \PYG{n}{HTML}  \PYG{p}{:} \PYG{n}{Web} \PYG{n}{Browser}
       \PYG{n}{SCENARIO}    \PYG{p}{:} \PYG{n}{script} \PYG{n}{driven}            \PYG{n}{EMAIL} \PYG{p}{:} \PYG{n}{SMTP} \PYG{n}{client}
       \PYG{n}{MINITEL}     \PYG{p}{:} \PYG{l+m+mi}{40} \PYG{o+ow}{or} \PYG{l+m+mi}{80} \PYG{n}{columns}         \PYG{n}{X25}   \PYG{p}{:} \PYG{n}{uses} \PYG{n}{low} \PYG{n}{level} \PYG{n}{dialog}
       \PYG{n}{Signon} \PYG{n}{program}           \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{VIR0020H} \PYG{n}{Controls} \PYG{n}{user} \PYG{n}{name} \PYG{o+ow}{and} \PYG{n}{password}
       \PYG{n}{Menu} \PYG{n}{program}             \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{VIR0021A} \PYG{n}{List} \PYG{n}{of} \PYG{n}{transactions}
       \PYG{n}{Identification} \PYG{n}{scenario}  \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}          \PYG{n}{eg} \PYG{n}{XML} \PYG{n}{identification}
       \PYG{n}{Type} \PYG{l+m+mi}{3} \PYG{n}{compression}       \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}          \PYG{n}{Discover} \PYG{n}{typical} \PYG{n}{screens} \PYG{p}{(}\PYG{n}{Virtel}\PYG{o}{/}\PYG{n}{PC}\PYG{p}{)}
       \PYG{n}{Mandatory} \PYG{n}{identification} \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}                               \PYG{p}{(}\PYG{n}{PC} \PYG{o+ow}{or} \PYG{n}{minitel}\PYG{p}{)}
       \PYG{l+m+mi}{3270} \PYG{n}{swap} \PYG{n}{key}            \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}}          \PYG{n}{eg} \PYG{n}{P24}
       \PYG{n}{Extended} \PYG{n}{colors}          \PYG{o}{==}\PYG{o}{=}\PYG{o}{\PYGZgt{}} \PYG{n}{X}        \PYG{n}{E}\PYG{p}{:} \PYG{n}{extended} \PYG{n}{X}\PYG{p}{:} \PYG{n}{extended} \PYG{o}{+} \PYG{n}{DBCS}

       \PYG{n}{P1}\PYG{o}{=}\PYG{n}{Update}                       \PYG{n}{P3}\PYG{o}{=}\PYG{n}{Return}                  \PYG{n}{P4}\PYG{o}{=}\PYG{n}{Transactions}
       \PYG{n}{Enter}\PYG{o}{=}\PYG{n}{Add}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example of entry point with last page}

\index{Access Host Application Directly@\spxentry{Access Host Application Directly}!HOWTOs@\spxentry{HOWTOs}}\index{HOWTOs@\spxentry{HOWTOs}!Access Host Application Directly@\spxentry{Access Host Application Directly}}\ignorespaces 

\section{How To Access A Host Application Directly}
\label{\detokenize{User_Guide:how-to-access-a-host-application-directly}}\label{\detokenize{User_Guide:index-440}}
\sphinxAtStartPar
It is not always necessary to pass via an application selection menu to connect to a host application. A host application may be accessed directly by opening the URL containing the complete path to the application. This URL may result in the display of the host signon screen, the first application screen, or possibly (if a script or scenario is used), a subsequent screen sent by the application. For more information about how VIRTEL can be used to automate the process of connection to a host application, see {\hyperref[\detokenize{User_Guide:v462ug-url-formats}]{\sphinxcrossref{\DUrole{std,std-ref}{“Virtel URL formats”}}}} of this manual, and “Connection/Disconnection Scripts” in the VIRTEL Connectivity Reference manual.


\subsection{Full path URL}
\label{\detokenize{User_Guide:full-path-url}}
\sphinxAtStartPar
For example, you can access the VIRTEL transaction whose external name is “CICS” by pointing the browser at a URL of the following format:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{l+m+mf}{10.20}\PYG{l+m+mf}{.170}\PYG{l+m+mf}{.71}\PYG{p}{:}\PYG{l+m+mi}{41001}\PYG{o}{/}\PYG{n}{w2h}\PYG{o}{/}\PYG{n}{WEB2AJAX}\PYG{o}{.}\PYG{n}{htm}\PYG{o}{+}\PYG{n}{Cics}
\end{sphinxVerbatim}

\sphinxAtStartPar
At the end of the session with the host application, VIRTEL examines the “Last page” field (see previous section) to decide whether to return to the desktop or to redisplay the application selection menu.


\subsection{Default URL for the entry point}
\label{\detokenize{User_Guide:default-url-for-the-entry-point}}
\sphinxAtStartPar
An application URL may be coded in the “TIOA at logon” field of the default transaction for the entry point (the default transaction is the transaction whose external name is the same as the entry point name). This allows the user to go directly to the host application simply by entering a URL of the format:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{l+m+mf}{10.20}\PYG{l+m+mf}{.170}\PYG{l+m+mf}{.71}\PYG{p}{:}\PYG{l+m+mi}{41001}
\end{sphinxVerbatim}

\sphinxAtStartPar
The example below shows the default transaction for the WEB2HOST entry point set up to go directly to the
transaction whose external name is “Cics”:

\sphinxAtStartPar
TRANSACTION DETAIL DEFINITION ———————\sphinxhyphen{} Applid: VIRTEL 15:01:02
Internal name    ===\textgreater{} W2H\sphinxhyphen{}00            To associate with an entry point name
External name    ===\textgreater{} WEB2HOST          Name displayed on user menu
Description      ===\textgreater{} Default directory = entry point name
Application      ===\textgreater{} W2H\sphinxhyphen{}DIR           Application to be called
PassTicket       ===\textgreater{} 0 Name ===\textgreater{}       0=no 1=yes 2=unsigned
Application type ===\textgreater{} 4                 1=VTAM 2=VIRTEL 3=SERV 4=PAGE 5=LINE
Pseudo\sphinxhyphen{}terminals ===\textgreater{} DELOC             Prefix of name of partner terminals
Logmode ===\textgreater{}                            Specify when LOGMODE must be changed
How started      ===\textgreater{} 2                 1=menu 2=sub\sphinxhyphen{}menu 3=auto
Security         ===\textgreater{} 0                 0=none 1=basic 2=NTLM 3=TLS 4=HTML
H4W commands ?   ===\textgreater{}                   0=no 1=yes 2=if2VIRTEL 4=auto
Check URL Prefix ===\textgreater{}

\sphinxAtStartPar
TIOA at logon    ===\textgreater{} /w2h/WEB2AJAX.htm+Cics

\sphinxAtStartPar
TIOA at logoff   ===\textgreater{}

\sphinxAtStartPar
Initial Scenario ===\textgreater{}                   Final Scenario ===\textgreater{}
Input Scenario   ===\textgreater{}                   Output Scenario ===\textgreater{}

\sphinxAtStartPar
P1=Update                         P3=Return                           P12=Server

\sphinxAtStartPar
\sphinxstyleemphasis{Example of default URL}

\sphinxAtStartPar
For more information see {\hyperref[\detokenize{User_Guide:v462ug-url-formats}]{\sphinxcrossref{\DUrole{std,std-ref}{“Virtel URL formats”}}}}.

\index{Change Font@\spxentry{Change Font}!HOWTOs@\spxentry{HOWTOs}}\index{HOWTOs@\spxentry{HOWTOs}!Change Font@\spxentry{Change Font}}\ignorespaces 

\section{How To Change The Font For Web Access}
\label{\detokenize{User_Guide:how-to-change-the-font-for-web-access}}\label{\detokenize{User_Guide:index-441}}
\sphinxAtStartPar
The {\hyperref[\detokenize{User_Guide:v462ug-settings-menu}]{\sphinxcrossref{\DUrole{std,std-ref}{“Web Access settings menu”}}}} allows you to change the font family and font size. By default VIRTEL will calculate an appropriate font size to fit the browser window size, but you can choose a fixed font size if you prefer. VIRTEL Web Access uses a fixed\sphinxhyphen{}pitch font to display the 3270 screen. If you do not like the default font then you can choose any fixed\sphinxhyphen{}pitch font installed on the workstation. Typical fonts available on Windows workstations are Courier New, Fixedsys, Terminal, Consolas, and Lucida Console. You can use the Windows Control Panel \textendash{} Fonts dialog to view the installed fonts.

\index{Change Display Style@\spxentry{Change Display Style}!HOWTOs@\spxentry{HOWTOs}}\index{HOWTOs@\spxentry{HOWTOs}!Change Display Style@\spxentry{Change Display Style}}\ignorespaces 

\section{How To Change The 3270 Display Style}
\label{\detokenize{User_Guide:how-to-change-the-3270-display-style}}\label{\detokenize{User_Guide:index-442}}
\sphinxAtStartPar
The {\hyperref[\detokenize{User_Guide:v462ug-settings-menu}]{\sphinxcrossref{\DUrole{std,std-ref}{“Web Access settings menu”}}}} allows you to change the display style to suit your needs. By default VIRTEL
provides 3 defaults models named “3270”, “Gray” and “White”, If you need some more, you must request your
Administrators.

\sphinxAtStartPar
Selecting display pattern : The display model changes will take effect at the next connection to a 3270 application.

\index{Change Key Settings@\spxentry{Change Key Settings}!HOWTOs@\spxentry{HOWTOs}}\index{HOWTOs@\spxentry{HOWTOs}!Change Key Settings@\spxentry{Change Key Settings}}\ignorespaces 

\section{How To Customize The Enter Key Settings}
\label{\detokenize{User_Guide:how-to-customize-the-enter-key-settings}}\label{\detokenize{User_Guide:index-443}}
\sphinxAtStartPar
Many 3270 users prefer to customize the keyboard mapping so that the “Enter” key on the main keyboard is handled as a 3270 newline, while the right “Ctrl” key and the “Enter” key on the numeric keypad are treated as 3270 Enter. The {\hyperref[\detokenize{User_Guide:v462ug-settings-menu}]{\sphinxcrossref{\DUrole{std,std-ref}{“Web Access settings menu”}}}} allows you to specify this configuration using the following settings:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ctrl}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ENTER}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{enter}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Newline}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{kpenter}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ENTER}\PYG{l+s+s2}{\PYGZdq{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Versions 6, 7, and 8 of Internet Explorer do not distinguish between the Enter key on the main keyboard and the Enter key on the numeric keypad. For users who want the two “Enter” keys to be handled differently, Syspertec supplies an additional DLL to be installed in Internet Explorer as a “Browser Helper Object”. This DLL can be installed by clicking on the “Install VirtKey BHO” link on the VIRTEL Web Access menu. After installing the DLL, go to “Tools” \textendash{} “Internet Options” \textendash{} “Advanced” and check that the option “Enable third\sphinxhyphen{}party browser extensions” is ticked, then stop and restart Internet Explorer. Administrator privilege is needed to install the Browser Helper Object, but once installed the BHO can be used by users without administrator privileges.

\sphinxAtStartPar
Although other browsers (including Internet Explorer 9) are capable of recognizing the keypad Enter key without the need for a BHO, older releases of Firefox, Chrome, and Safari do not distinguish between the left and right Ctrl keys. This means that when “ctrl” is set to “ENTER” then both Ctrl keys will be handled as 3270 Enter. In addition, the AltGr key will be treated as Ctrl under Firefox. The most recent versions of Firefox (from version 15 onwards for Windows 7 and from version 17 onwards for Windows XP) and Chrome (from version 23 onwards) are capable of distinguishing between the left and right Ctrl keys like Internet Explorer.


\subsection{Managing CTRL keydown being lost}
\label{\detokenize{User_Guide:managing-ctrl-keydown-being-lost}}
\sphinxAtStartPar
With some Windows Operating System, the CTRL keydown events may be lost half the time. In such case, you must turn on a special feature by introducing the following command into a “custom.js” file.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*} \PYG{n}{The} \PYG{n}{workaround} \PYG{k}{for} \PYG{n}{missing} \PYG{n}{CTRL} \PYG{n}{key} \PYG{n}{events} \PYG{p}{(}\PYG{n}{on} \PYG{n}{some} \PYG{n}{Windows} \PYG{n}{system}\PYG{p}{)} \PYG{o+ow}{is}
\PYG{o}{*} \PYG{n}{activated} \PYG{k}{if} \PYG{n}{this} \PYG{n+nb}{property} \PYG{o+ow}{is} \PYG{n+nb}{set} \PYG{n}{to} \PYG{n}{true}\PYG{o}{.}
\PYG{o}{*} \PYG{n}{Default} \PYG{n}{value} \PYG{p}{(}\PYG{k}{if} \PYG{n}{unspecified}\PYG{p}{)} \PYG{p}{:} \PYG{n}{false}
\PYG{o}{*}\PYG{o}{/}
\PYG{n}{w2hparm}\PYG{o}{.}\PYG{n}{fixMissingCtrlKeydown} \PYG{o}{=} \PYG{n}{true}\PYG{p}{;}
\end{sphinxVerbatim}
\phantomsection\label{\detokenize{User_Guide:v462ug-customize-display}}
\index{Customize Display Styles@\spxentry{Customize Display Styles}!HOWTOs@\spxentry{HOWTOs}}\index{HOWTOs@\spxentry{HOWTOs}!Customize Display Styles@\spxentry{Customize Display Styles}}\ignorespaces 

\section{How To Customize Display Styles}
\label{\detokenize{User_Guide:how-to-customize-display-styles}}\label{\detokenize{User_Guide:index-444}}
\sphinxAtStartPar
VIRTEL users can customise the screen display to suit their needs. An exception to this is the model type which is an Administration function. Administrators will configure model types which can then be selected by a user.


\subsection{Add or remove a display style}
\label{\detokenize{User_Guide:add-or-remove-a-display-style}}
\sphinxAtStartPar
To add a new display style, you must :
\begin{itemize}
\item {} 
\sphinxAtStartPar
Create a CSS file with a “.css” extension name,

\item {} 
\sphinxAtStartPar
Load this file in any directory of your choice except in W2H\sphinxhyphen{}DIR,

\item {} 
\sphinxAtStartPar
Make sure that this directory is referenced in the entry point by using a transaction that contains the string “/w2h/custom\sphinxhyphen{}css” (without the quotes) in the “URL prefix”  field. Ensure that the string  “/w2h/custom\sphinxhyphen{}css”  doesn’t end with slash /.

\item {} 
\sphinxAtStartPar
Create (or modify) a customized javascript file to reference the recently added CSS file (see below):
\begin{itemize}
\item {} 
\sphinxAtStartPar
Load the custom.js file in any directory of your choice except in W2H\sphinxhyphen{}DIR,

\item {} 
\sphinxAtStartPar
Make sure that this directory is referenced in the entry point by using a transaction that contains the string “/w2h/custom\sphinxhyphen{}js” (without the quotes) in the “URL prefix” field. Ensure that the string  “/w2h/custom\sphinxhyphen{}js”  doesn’t end with a slash /.

\end{itemize}

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{*}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{=}
\PYG{o}{*}
\PYG{o}{*} \PYG{n}{CUSTOM} \PYG{n}{CODE} \PYG{n}{SAMPLE} \PYG{n}{TO} \PYG{n}{ADD} \PYG{n}{A} \PYG{n}{CUSTOM} \PYG{n}{CSS} \PYG{n}{FILE}
\PYG{o}{*} \PYG{n}{OR} \PYG{n}{TO} \PYG{n}{REMOVE} \PYG{n}{A} \PYG{n}{DEFAULT} \PYG{n}{CSS} \PYG{n}{FILE}
\PYG{o}{*}
\PYG{o}{*}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{==}\PYG{o}{*}\PYG{o}{/}
\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*} \PYG{n}{This} \PYG{n}{implementation} \PYG{n}{adds} \PYG{l+m+mi}{3} \PYG{n}{custom} \PYG{n}{CSS} \PYG{n}{to} \PYG{n}{the} \PYG{n}{settings} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Display Style}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n+nb}{list} \PYG{n}{choice}\PYG{p}{,}
\PYG{o}{*} \PYG{o+ow}{and} \PYG{n}{removes} \PYG{n}{the} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{white}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{default} \PYG{n}{choice} \PYG{k+kn}{from} \PYG{n+nn}{this} \PYG{n+nb}{list}\PYG{o}{.}
\PYG{o}{*}\PYG{o}{/}
\PYG{n}{function} \PYG{n}{modify\PYGZus{}settingsValues}\PYG{p}{(}\PYG{n}{name}\PYG{p}{,} \PYG{n}{values}\PYG{p}{)} \PYG{p}{\PYGZob{}}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{The} \PYG{n}{target} \PYG{o+ow}{is} \PYG{n}{the} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{style}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n+nb}{list} \PYG{n}{settings}
\PYG{k}{if} \PYG{p}{(}\PYG{n}{name} \PYG{o}{==} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{style}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{p}{\PYGZob{}}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{Remove} \PYG{n}{the} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{white}\PYG{l+s+s2}{\PYGZdq{}} \PYG{n}{default} \PYG{n}{entry} \PYG{k+kn}{from} \PYG{n+nn}{the} \PYG{n+nb}{list} \PYG{n}{of} \PYG{n}{choices}
\PYG{n}{values}\PYG{o}{.}\PYG{n}{splice}\PYG{p}{(} \PYG{n}{values}\PYG{o}{.}\PYG{n}{indexOf}\PYG{p}{(}\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{white}\PYG{l+s+s1}{\PYGZsq{}}\PYG{p}{)}\PYG{p}{,} \PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{;}
\PYG{o}{/}\PYG{o}{/} \PYG{n}{Append} \PYG{l+m+mi}{3} \PYG{n}{custom} \PYG{n}{styles} \PYG{n}{to} \PYG{n}{the} \PYG{n+nb}{list} \PYG{n}{of} \PYG{n}{choices}
\PYG{k}{return} \PYG{n}{values}\PYG{o}{.}\PYG{n}{concat}\PYG{p}{(} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{GREEN.CSS}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{BLUE.CSS}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{RED.CSS}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{)}\PYG{p}{;}
\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}
\PYG{o}{/}\PYG{o}{*}
\PYG{o}{*} \PYG{n}{This} \PYG{n}{block} \PYG{n}{of} \PYG{n}{code} \PYG{n}{sets} \PYG{n}{a} \PYG{n}{specific} \PYG{n}{label} \PYG{k}{for} \PYG{n}{each} \PYG{n}{style} \PYG{n}{added}\PYG{o}{.}
\PYG{o}{*} \PYG{n}{If} \PYG{n}{this} \PYG{n}{code} \PYG{o+ow}{is} \PYG{n}{omitted}\PYG{p}{,} \PYG{n}{the} \PYG{n}{raw} \PYG{n}{value} \PYG{n}{of} \PYG{n}{the} \PYG{n}{entries} \PYG{n}{are} \PYG{n}{displayed} \PYG{n}{instead}\PYG{o}{.}
\PYG{o}{*}\PYG{o}{/}
\PYG{n}{oVWAmsg}\PYG{o}{.}\PYG{n}{custom}\PYG{p}{(} \PYG{p}{\PYGZob{}} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{style:GREEN.CSS}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Custom}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{/}\PYG{o}{/} \PYG{n}{Use} \PYG{n}{this} \PYG{n}{label} \PYG{n}{instead} \PYG{n}{of} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{GREEN.CSS}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{style:BLUE.CSS}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Test}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{/}\PYG{o}{/} \PYG{n}{Use} \PYG{n}{this} \PYG{n}{label} \PYG{n}{instead} \PYG{n}{of} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{BLUE.CSS}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{style:RED.CSS}\PYG{l+s+s2}{\PYGZdq{}} \PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Red !}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{/}\PYG{o}{/} \PYG{n}{Use} \PYG{n}{this} \PYG{n}{label} \PYG{n}{instead} \PYG{n}{of} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{RED.CSS}\PYG{l+s+s1}{\PYGZsq{}}
\PYG{p}{\PYGZcb{}}\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example of a custom.js file to add or remove a display style}


\subsection{Add or remove a print style}
\label{\detokenize{User_Guide:add-or-remove-a-print-style}}\label{\detokenize{User_Guide:v462ug-customize-print}}
\sphinxAtStartPar
To add a new print style, proceed as for a display style, but in the VWAmsg.custom order, replace the word “style” by

\begin{sphinxVerbatim}[commandchars=\\\{\}]
“printstyle”.
/*=====================================================================
*
* CUSTOM CODE SAMPLE TO ADD A CUSTOM CSS FILE
* OR TO REMOVE A DEFAULT CSS FILE
*
*====================================================================*/
/*
* This implementation adds 3 custom CSS to the settings \PYGZdq{}Display Style\PYGZdq{} list choice,
* and removes the \PYGZdq{}white\PYGZdq{} default choice from this list.
*/
function modify\PYGZus{}settingsValues(name, values) \PYGZob{}
// The target is the \PYGZdq{}printstyle\PYGZdq{} list settings
if (name == \PYGZdq{}printstyle\PYGZdq{}) \PYGZob{}
// Remove the \PYGZdq{}white\PYGZdq{} default entry from the list of choices
values.splice( values.indexOf(\PYGZsq{}white\PYGZsq{}), 1);
// Append 3 custom print styles to the list of choices
return values.concat( \PYGZdq{}GREEN.CSS\PYGZdq{}
, \PYGZdq{}BLUE.CSS\PYGZdq{}
, \PYGZdq{}RED.CSS\PYGZdq{} );
\PYGZcb{}
\PYGZcb{}
/*
* This block of code sets a specific label for each print style added.
* If this code is omitted, the raw value of the entries are displayed instead.
*/
oVWAmsg.custom( \PYGZob{} \PYGZdq{}printstyle:GREEN.CSS\PYGZdq{} : \PYGZdq{}Custom\PYGZdq{} // Use this label instead of \PYGZsq{}GREEN.CSS\PYGZsq{}
, \PYGZdq{}printstyle:BLUE.CSS\PYGZdq{} : \PYGZdq{}Test\PYGZdq{} // Use this label instead of \PYGZsq{}BLUE.CSS\PYGZsq{}
, \PYGZdq{}printstyle:RED.CSS\PYGZdq{} : \PYGZdq{}Red !\PYGZdq{} // Use this label instead of \PYGZsq{}RED.CSS\PYGZsq{}
\PYGZcb{});
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstyleemphasis{Example of a custom.js file to add or remove a print style}


\subsection{3270 support blinking fields}
\label{\detokenize{User_Guide:support-blinking-fields}}
\sphinxAtStartPar
Becoming unpopular over time, and even stated as being the cause of adverse reactions in people with epilepsy, the “\textless{}blink\textgreater{}” tag was retired from the HTML API, although it still remains within the browsers code. The feature can be reactivated through the use of CSS code but by doing so Web Accessibility guidelines may be compromised. This may be a violation in certain jurisdictions, contravening laws and regulations with regard to web design and accessibility and what is permissible. It is up to each individual to determine the purpose and usefulness of reactivating this feature.

\sphinxAtStartPar
To reactivate blinking support, you can include the following code in your custom.css file :

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{*} \PYG{n}{To} \PYG{n}{support} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{BLINKING}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o+ow}{in} \PYG{n}{Virtel} \PYG{n}{Web} \PYG{n}{Access} \PYG{l+m+mi}{3270} \PYG{n}{emulation}\PYG{p}{,} \PYG{n}{the} \PYG{n}{following} \PYG{n}{code} \PYG{n}{has} \PYG{n}{to} \PYG{n}{be} \PYG{n}{included} \PYG{n}{into} \PYG{n}{your} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{.BBLUE, .BRED, .BPINK, .BGREEN, .BTURQUOISE, .BYELLOW, .BWHITE }\PYG{l+s+s2}{\PYGZob{}}
\PYG{o}{\PYGZhy{}}\PYG{n}{webkit}\PYG{o}{\PYGZhy{}}\PYG{n}{animation}\PYG{p}{:} \PYG{n}{blink} \PYG{l+m+mi}{1}\PYG{n}{s} \PYG{n}{step}\PYG{o}{\PYGZhy{}}\PYG{n}{end} \PYG{n}{infinite}\PYG{p}{;}
\PYG{o}{\PYGZhy{}}\PYG{n}{moz}\PYG{o}{\PYGZhy{}}\PYG{n}{animation}\PYG{p}{:} \PYG{n}{blink} \PYG{l+m+mi}{1}\PYG{n}{s} \PYG{n}{step}\PYG{o}{\PYGZhy{}}\PYG{n}{end} \PYG{n}{infinite}\PYG{p}{;}
\PYG{o}{\PYGZhy{}}\PYG{n}{o}\PYG{o}{\PYGZhy{}}\PYG{n}{animation}\PYG{p}{:} \PYG{n}{blink} \PYG{l+m+mi}{1}\PYG{n}{s} \PYG{n}{step}\PYG{o}{\PYGZhy{}}\PYG{n}{end} \PYG{n}{infinite}\PYG{p}{;}
\PYG{n}{animation}\PYG{p}{:} \PYG{n}{blink} \PYG{l+m+mi}{1}\PYG{n}{s} \PYG{n}{step}\PYG{o}{\PYGZhy{}}\PYG{n}{end} \PYG{n}{infinite}\PYG{p}{;}
\PYG{p}{\PYGZcb{}}
\PYG{o}{@}\PYG{o}{\PYGZhy{}}\PYG{n}{webkit}\PYG{o}{\PYGZhy{}}\PYG{n}{keyframes} \PYG{n}{blink} \PYG{p}{\PYGZob{}}
\PYG{l+m+mi}{67}\PYG{o}{\PYGZpc{}} \PYG{p}{\PYGZob{}} \PYG{n}{opacity}\PYG{p}{:} \PYG{l+m+mi}{0} \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}
\PYG{o}{@}\PYG{o}{\PYGZhy{}}\PYG{n}{moz}\PYG{o}{\PYGZhy{}}\PYG{n}{keyframes} \PYG{n}{blink} \PYG{p}{\PYGZob{}}
\PYG{l+m+mi}{67}\PYG{o}{\PYGZpc{}} \PYG{p}{\PYGZob{}} \PYG{n}{opacity}\PYG{p}{:} \PYG{l+m+mi}{0} \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}
\PYG{o}{@}\PYG{o}{\PYGZhy{}}\PYG{n}{o}\PYG{o}{\PYGZhy{}}\PYG{n}{keyframes} \PYG{n}{blink} \PYG{p}{\PYGZob{}}
\PYG{l+m+mi}{67}\PYG{o}{\PYGZpc{}} \PYG{p}{\PYGZob{}} \PYG{n}{opacity}\PYG{p}{:} \PYG{l+m+mi}{0} \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}
\PYG{n+nd}{@keyframes} \PYG{n}{blink} \PYG{p}{\PYGZob{}}
\PYG{l+m+mi}{67}\PYG{o}{\PYGZpc{}} \PYG{p}{\PYGZob{}} \PYG{n}{opacity}\PYG{p}{:} \PYG{l+m+mi}{0} \PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
This code can also be found into the “custom\sphinxhyphen{}blink.css” source file store into the “tools” subdirectory of any update delivered from number \#5310 and over.

\index{Change default settings@\spxentry{Change default settings}!HOWTOs@\spxentry{HOWTOs}}\index{HOWTOs@\spxentry{HOWTOs}!Change default settings@\spxentry{Change default settings}}\ignorespaces 

\section{How To Change The Default User Settings}
\label{\detokenize{User_Guide:how-to-change-the-default-user-settings}}\label{\detokenize{User_Guide:index-445}}
\sphinxAtStartPar
The site default settings for Web Access are stored in the file w2hparm.js (see {\hyperref[\detokenize{User_Guide:v462ug-global-modifications}]{\sphinxcrossref{\DUrole{std,std-ref}{“Global modification of Web Access settings”}}}})

\index{Support a reverse proxy@\spxentry{Support a reverse proxy}!HOWTOs@\spxentry{HOWTOs}}\index{HOWTOs@\spxentry{HOWTOs}!Support a reverse proxy@\spxentry{Support a reverse proxy}}\ignorespaces 

\section{How To Support A Reverse Proxy}
\label{\detokenize{User_Guide:how-to-support-a-reverse-proxy}}\label{\detokenize{User_Guide:index-446}}
\sphinxAtStartPar
If your installation uses a reverse proxy (or bastion host) between the user’s browser and the VIRTEL Web Access server, then the VIRTEL log and statistics file will show the IP address of the proxy instead of the address of the end user. In order for VIRTEL to recognize and log the originating user’s IP address, you must declare the proxy in the HTFORWD parameter of the VIRTCT (see “Parameters of the VIRTCT” in the VIRTEL Installation Guide) or in a rule attached to the HTTP line (see “Rules” in the VIRTEL Connectivity Reference manual).

\index{Support Virtual Hosting@\spxentry{Support Virtual Hosting}!HOWTOs@\spxentry{HOWTOs}}\index{HOWTOs@\spxentry{HOWTOs}!Support Virtual Hosting@\spxentry{Support Virtual Hosting}}\ignorespaces 

\section{How To Support Virtual Hosting}
\label{\detokenize{User_Guide:how-to-support-virtual-hosting}}\label{\detokenize{User_Guide:index-447}}
\sphinxAtStartPar
Name\sphinxhyphen{}based virtual hosting is a method for supporting multiple sites (for example, site1.mycompany.com and site2.mycompany.com) using the same IP address and port number. By means of the “HTTP Host” field in the rules attached to the HTTP line, VIRTEL can recognize the site name and direct the request to a specific entry point. Refer to “Rules” in the VIRTEL Connectivity Reference manual for further details. You can install a set sample definitions for virtual hosting by running the ARBOLOAD job (delivered in the VIRTEL SAMPLIB) with the VHOST=YES parameter.

\index{Control APPLIST behaviour@\spxentry{Control APPLIST behaviour}!HOWTOs@\spxentry{HOWTOs}}\index{HOWTOs@\spxentry{HOWTOs}!Control APPLIST behaviour@\spxentry{Control APPLIST behaviour}}\ignorespaces 

\section{How To Control APPLIST behaviour}
\label{\detokenize{User_Guide:how-to-control-applist-behaviour}}\label{\detokenize{User_Guide:index-448}}
\sphinxAtStartPar
To open an application in a new TAB instead of the current window code the following in the customizable exit \sphinxstyleemphasis{before\_launchApplink(href)}.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{/}\PYG{o}{*} \PYG{n}{To} \PYG{n+nb}{open} \PYG{n}{an} \PYG{n}{application} \PYG{p}{(}\PYG{n}{issued} \PYG{k+kn}{from} \PYG{n+nn}{applist} \PYG{n}{transaction}\PYG{p}{)} \PYG{o+ow}{in} \PYG{n}{a} \PYG{n}{new} \PYG{n}{TAB} \PYG{n}{instead} \PYG{n}{of} \PYG{n}{the} \PYG{n}{same} \PYG{n}{window} \PYG{o}{*}\PYG{o}{/}
\PYG{n}{function} \PYG{n}{before\PYGZus{}launchApplink}\PYG{p}{(}\PYG{n}{href}\PYG{p}{)} \PYG{p}{\PYGZob{}}
    \PYG{k}{return} \PYG{p}{\PYGZob{}}
            \PYG{n}{url}\PYG{p}{:} \PYG{n}{href}\PYG{p}{,}            \PYG{o}{/}\PYG{o}{/} \PYG{n}{Return} \PYG{n}{received} \PYG{n}{URL}
            \PYG{n}{target}\PYG{p}{:} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{\PYGZus{}blank}\PYG{l+s+s1}{\PYGZsq{}}    \PYG{o}{/}\PYG{o}{/} \PYG{n}{Target} \PYG{o+ow}{is} \PYG{n}{a} \PYG{n}{new} \PYG{n}{TAB}
    \PYG{p}{\PYGZcb{}}\PYG{p}{;}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
Create an options entry to support this modification against transaction applist (CLI\sphinxhyphen{}90). For example, using the Virtel HTML Admin. panel, select transaction applist and use the toolbox Icon to generate the options file. In the transaction set the options field to appmenu. Remember to save the changes to the transaction!  Place the above code into a file called custJS.appmenu.js and upload to the directory defined for the ‘options’ path.

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
You must have setup the “options” mode customization before you can generate “option” files. The ARBOLOAD job must be run with OPTIONS=YES to add the options transactions. See {\hyperref[\detokenize{User_Guide:v462ug-customizing-with-option}]{\sphinxcrossref{\DUrole{std,std-ref}{“Virtel Customization Modes”}}}} on how to set up customising with the options mode.
\end{sphinxadmonition}

\index{Left align text@\spxentry{Left align text}!HOWTOs@\spxentry{HOWTOs}}\index{HOWTOs@\spxentry{HOWTOs}!Left align text@\spxentry{Left align text}}\ignorespaces 

\section{Left align text}
\label{\detokenize{User_Guide:left-align-text}}\label{\detokenize{User_Guide:index-449}}
\sphinxAtStartPar
To display languages which require left alignment, such as a character set where no monospace font is available, Thailand for example, set the W2HPARM option “leftalignpage” to true. By default, W2H displays centres each line when the font is not exactly monospace. Aligning left may give a better display.

\index{Special UNICODE character support@\spxentry{Special UNICODE character support}!HOWTOs@\spxentry{HOWTOs}}\index{HOWTOs@\spxentry{HOWTOs}!Special UNICODE character support@\spxentry{Special UNICODE character support}}\ignorespaces 

\section{Special UNICODE character support}
\label{\detokenize{User_Guide:special-unicode-character-support}}\label{\detokenize{User_Guide:index-450}}
\sphinxAtStartPar
Some UNICODE characters have no EBCDIC equivalent and are translated to an equivalent value. Curly quotes are an example. These are translated to striaght quotes. To disable this translation set the W2HPARM option “unicodereplactiv” to false.

\index{Square bracket support@\spxentry{Square bracket support}!HOWTOs@\spxentry{HOWTOs}}\index{HOWTOs@\spxentry{HOWTOs}!Square bracket support@\spxentry{Square bracket support}}\ignorespaces 

\section{Square Bracket Support}
\label{\detokenize{User_Guide:square-bracket-support}}\label{\detokenize{User_Guide:index-451}}
\sphinxAtStartPar
Characters {[} and {]} may be incorrectly displayed on the MVS console. The character set used natively by the MVS console is CP1047. For this reason, VIRTEL uses this codepage to write its messages to the console. To be able to view {[}{]} from VWA, the codepage IBM1047 must be used. If this is not the default Virtel codepage (as specified in the TCT), it can be forced directly in the calling URL:
\begin{description}
\sphinxlineitem{::}
\sphinxAtStartPar
\sphinxurl{http://10.20.170.71:41001/w2h/WEB2AJAX.htm+Tso?codepage=IBM1047}

\end{description}

\sphinxAtStartPar
The entry point must refer to a scenario allowing to process the contents of the URL variable CODEPAGE. By default the SCENLOGM scenario can be used.If another identification
scenario is implemented, it must contain the following lines:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
COPY\PYGZdl{} INPUT\PYGZhy{}TO\PYGZhy{}VARIABLE,FIELD=\PYGZsq{}CODEPAGE\PYGZsq{},             *
    VAR=\PYGZsq{}CODEPAGE\PYGZsq{}
IF\PYGZdl{} NOT\PYGZhy{}FOUND,THEN=NOCODEPG
SET\PYGZdl{}  ENCODING,UTF\PYGZhy{}8,\PYGZsq{}*CODEPAGE\PYGZsq{}
\end{sphinxVerbatim}


\chapter{Appendix}
\label{\detokenize{User_Guide:appendix}}

\section{Appendix A}
\label{\detokenize{User_Guide:appendix-a}}

\subsection{Default values for W2H parameters}
\label{\detokenize{User_Guide:default-values-for-w2h-parameters}}\label{\detokenize{User_Guide:v462ug-w2hparm-defaults}}

\begin{savenotes}
\sphinxatlongtablestart
\sphinxthistablewithglobalstyle
\makeatletter
  \LTleft \@totalleftmargin plus1fill
  \LTright\dimexpr\columnwidth-\@totalleftmargin-\linewidth\relax plus1fill
\makeatother
\begin{longtable}{*{3}{\X{1}{3}}}
\sphinxtoprule
\sphinxstyletheadfamily 
\sphinxAtStartPar
Keyword
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Caption
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Possible values
\\
\sphinxmidrule
\endfirsthead

\multicolumn{3}{c}{\sphinxnorowcolor
    \makebox[0pt]{\sphinxtablecontinued{\tablename\ \thetable{} \textendash{} continued from previous page}}%
}\\
\sphinxtoprule
\sphinxstyletheadfamily 
\sphinxAtStartPar
Keyword
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Caption
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Possible values
\\
\sphinxmidrule
\endhead

\sphinxbottomrule
\multicolumn{3}{r}{\sphinxnorowcolor
    \makebox[0pt][r]{\sphinxtablecontinued{continues on next page}}%
}\\
\endfoot

\endlastfoot
\sphinxtableatstartofbodyhook

\sphinxAtStartPar
“fontsize”
&
\sphinxAtStartPar
Font size
&
\sphinxAtStartPar
“window”, “screen”, “8”, “10”, “12”, “14”, “16”
\\
\sphinxhline
\sphinxAtStartPar
“font”
&
\sphinxAtStartPar
Font family
&
\sphinxAtStartPar
“font name”
\\
\sphinxhline
\sphinxAtStartPar
“autocapture”
&
\sphinxAtStartPar
Auto\sphinxhyphen{}capture
&
\sphinxAtStartPar
true, false
\\
\sphinxhline
\sphinxAtStartPar
“autoprint”
&
\sphinxAtStartPar
Auto\sphinxhyphen{}print
&
\sphinxAtStartPar
true, false
\\
\sphinxhline
\sphinxAtStartPar
“cursor”
&
\sphinxAtStartPar
Cursor “Bar”,
&
\sphinxAtStartPar
“Blink”, “Block”, “Smart”
\\
\sphinxhline
\sphinxAtStartPar
“vline”
&
\sphinxAtStartPar
Vertical line
&
\sphinxAtStartPar
true, false
\\
\sphinxhline
\sphinxAtStartPar
“hline”
&
\sphinxAtStartPar
Horiz line
&
\sphinxAtStartPar
true, false
\\
\sphinxhline
\sphinxAtStartPar
“esc”
&
\sphinxAtStartPar
Esc key
&
\sphinxAtStartPar
“no”, “ATTN”, “CLEAR”, “Reset”
\\
\sphinxhline
\sphinxAtStartPar
“ctrl”
&
\sphinxAtStartPar
Ctrl key
&
\sphinxAtStartPar
“no”, “ENTER”, “Newline”
\\
\sphinxhline
\sphinxAtStartPar
“cmdleft”
&
\sphinxAtStartPar
Left Cmd key
&
\sphinxAtStartPar
“no”, “Reset”
\\
\sphinxhline
\sphinxAtStartPar
“cmdright”
&
\sphinxAtStartPar
Right Cmd key
&
\sphinxAtStartPar
“no”, “ENTER”
\\
\sphinxhline
\sphinxAtStartPar
“enter”
&
\sphinxAtStartPar
Enter key
&
\sphinxAtStartPar
“ENTER”, “Newline”
\\
\sphinxhline
\sphinxAtStartPar
“home”
&
\sphinxAtStartPar
Home key
&
\sphinxAtStartPar
“no”, “Home”
\\
\sphinxhline
\sphinxAtStartPar
“end”
&
\sphinxAtStartPar
End key
&
\sphinxAtStartPar
“no”, “ErEof”, “End”
\\
\sphinxhline
\sphinxAtStartPar
“pgup”
&
\sphinxAtStartPar
PageUp key
&
\sphinxAtStartPar
“PF7”, “PF19”, “PA1”, “no”
\\
\sphinxhline
\sphinxAtStartPar
“pgdn”
&
\sphinxAtStartPar
PageDown key
&
\sphinxAtStartPar
“PF8”, “PF20”, “PA2”, “no”
\\
\sphinxhline
\sphinxAtStartPar
“pause”
&
\sphinxAtStartPar
Pause key
&
\sphinxAtStartPar
“CLEAR”, “ATTN”, “PA3”, “no”
\\
\sphinxhline
\sphinxAtStartPar
“kpenter”
&
\sphinxAtStartPar
Keypad Enter
&
\sphinxAtStartPar
“ENTER”, “Newline”
\\
\sphinxhline
\sphinxAtStartPar
“shiftenter”
&
\sphinxAtStartPar
Shift+Enter
&
\sphinxAtStartPar
“no”,”ENTER”, “Newline”
\\
\sphinxhline
\sphinxAtStartPar
“shiftesc”
&
\sphinxAtStartPar
Shift+Esc
&
\sphinxAtStartPar
“no”, “ATTN”, “CLEAR”, “Reset”
\\
\sphinxhline
\sphinxAtStartPar
“shiftins”
&
\sphinxAtStartPar
Shift+Insert
&
\sphinxAtStartPar
“no”, “Dup”
\\
\sphinxhline
\sphinxAtStartPar
“shiftdel”
&
\sphinxAtStartPar
Shift+Delete
&
\sphinxAtStartPar
“no”, “ErEof”
\\
\sphinxhline
\sphinxAtStartPar
“shifthome”
&
\sphinxAtStartPar
Shift+Home
&
\sphinxAtStartPar
“no”, “FieldMark”, “Home”
\\
\sphinxhline
\sphinxAtStartPar
“shiftend”
&
\sphinxAtStartPar
Shift+End
&
\sphinxAtStartPar
“no”, “ErEof”, “End”
\\
\sphinxhline
\sphinxAtStartPar
“shiftpgdn”
&
\sphinxAtStartPar
Shift+PageDown
&
\sphinxAtStartPar
“no”, “PA3”
\\
\sphinxhline
\sphinxAtStartPar
“shiftjoker”
&
\sphinxAtStartPar
Shift+Joker
&
\sphinxAtStartPar
“no”, “Reset”, “ATTN”, “CLEAR”, “Ins”
\\
\sphinxhline
\sphinxAtStartPar
“ctrlenter”
&
\sphinxAtStartPar
Ctrl+Enter
&
\sphinxAtStartPar
“no”,”ENTER”, “Newline”
\\
\sphinxhline
\sphinxAtStartPar
“ctrlins”
&
\sphinxAtStartPar
Ctrl+Insert
&
\sphinxAtStartPar
“no”, “PA1”
\\
\sphinxhline
\sphinxAtStartPar
“ctrldel”
&
\sphinxAtStartPar
Ctrl+Delete
&
\sphinxAtStartPar
“no”, “PA2”, “ErEof”
\\
\sphinxhline
\sphinxAtStartPar
“ctrlhome”
&
\sphinxAtStartPar
Ctrl+Home
&
\sphinxAtStartPar
“no”, “PA3”, “Home”, “ChgCur”
\\
\sphinxhline
\sphinxAtStartPar
“ctrlend”
&
\sphinxAtStartPar
Ctrl+End
&
\sphinxAtStartPar
“no”, “ErEof”, “End”
\\
\sphinxhline
\sphinxAtStartPar
“ctrlr”
&
\sphinxAtStartPar
Ctrl+Right
&
\sphinxAtStartPar
“no”, “Refresh”
\\
\sphinxhline
\sphinxAtStartPar
“altenter”
&
\sphinxAtStartPar
Alt+Enter
&
\sphinxAtStartPar
“no”, “MirrorToggle”
\\
\sphinxhline
\sphinxAtStartPar
“altshift”
&
\sphinxAtStartPar
Alt+Shift
&
\sphinxAtStartPar
“RTLinput”, “no”
\\
\sphinxhline
\sphinxAtStartPar
“altins”
&
\sphinxAtStartPar
Alt+Ins
&
\sphinxAtStartPar
“no”, “PA1”
\\
\sphinxhline
\sphinxAtStartPar
“althome”
&
\sphinxAtStartPar
Alt+Home
&
\sphinxAtStartPar
“no”, “PA2”
\\
\sphinxhline
\sphinxAtStartPar
“altjoker”
&
\sphinxAtStartPar
Alternate Joker
&
\sphinxAtStartPar
“no”, “”no”, “ATTN”, “CLEAR”, “PA3”
\\
\sphinxhline
\sphinxAtStartPar
“altpgup”
&
\sphinxAtStartPar
Alt+PageUp
&
\sphinxAtStartPar
“no”, “PA1”
\\
\sphinxhline\sphinxmultirow{2}{118}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
“altpgdn”
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
&\sphinxmultirow{2}{119}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
Alt+PageDown
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
&\sphinxmultirow{2}{120}{%
\begin{varwidth}[t]{\sphinxcolwidth{1}{3}}
\sphinxAtStartPar
“no”, “PA2”
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
}%
\\
\sphinxvlinecrossing{1}\sphinxvlinecrossing{2}\sphinxfixclines{3}\sphinxtablestrut{118}&\sphinxtablestrut{119}&\sphinxtablestrut{120}\\
\sphinxhline
\sphinxAtStartPar
“altpause”
&
\sphinxAtStartPar
Alt+Pause
&
\sphinxAtStartPar
“no”, “ATTN”, “CLEAR”, “PA3”
\\
\sphinxhline
\sphinxAtStartPar
“altf1”
&
\sphinxAtStartPar
Alt+F1
&
\sphinxAtStartPar
“no”, “PA1”, “ENTER”
\\
\sphinxhline
\sphinxAtStartPar
“altf2”
&
\sphinxAtStartPar
Alt+F2
&
\sphinxAtStartPar
“no”, “PA2”
\\
\sphinxhline
\sphinxAtStartPar
“altf3”
&
\sphinxAtStartPar
Alt+F3
&
\sphinxAtStartPar
“no”, “PA3”, “ChgCur”
\\
\sphinxhline
\sphinxAtStartPar
“kpslash”
&
\sphinxAtStartPar
Keypad /
&
\sphinxAtStartPar
“/”, “PA1”
\\
\sphinxhline
\sphinxAtStartPar
“kpaster”
&
\sphinxAtStartPar
Keypad *
&
\sphinxAtStartPar
“*”, “PA2”
\\
\sphinxhline
\sphinxAtStartPar
“kpminus”
&
\sphinxAtStartPar
Keypad \sphinxhyphen{}
&
\sphinxAtStartPar
“\sphinxhyphen{}”, “Backtab”
\\
\sphinxhline
\sphinxAtStartPar
“kpplus”
&
\sphinxAtStartPar
Keypad +
&
\sphinxAtStartPar
“+”, “Tab”, “Newline”
\\
\sphinxhline
\sphinxAtStartPar
“kpdot”
&
\sphinxAtStartPar
Keypad .
&
\sphinxAtStartPar
“.”, “,”
\\
\sphinxhline
\sphinxAtStartPar
“dblclick”
&
\sphinxAtStartPar
Double Click
&
\sphinxAtStartPar
“Word”, “ENTER”, “no”
\\
\sphinxhline
\sphinxAtStartPar
“urlhotspot”
&
\sphinxAtStartPar
URL hotspots
&
\sphinxAtStartPar
true, false
\\
\sphinxhline
\sphinxAtStartPar
“pfkhotspot”
&
\sphinxAtStartPar
PF key hotspots
&
\sphinxAtStartPar
true, false
\\
\sphinxhline
\sphinxAtStartPar
“inputhotspot”
&
\sphinxAtStartPar
Input field hotspots
&
\sphinxAtStartPar
true, false
\\
\sphinxhline
\sphinxAtStartPar
“pasteereof”
&
\sphinxAtStartPar
Paste erase EOF
&
\sphinxAtStartPar
true, false
\\
\sphinxhline
\sphinxAtStartPar
“pastetyping”
&
\sphinxAtStartPar
Map Ctrl+V to Paste
by Typing
&
\sphinxAtStartPar
true, false
\\
\sphinxhline
\sphinxAtStartPar
“movecursor”
&
\sphinxAtStartPar
Move cursor on activat
&
\sphinxAtStartPar
true, false
\\
\sphinxhline
\sphinxAtStartPar
“style”
&
\sphinxAtStartPar
Style
&
\sphinxAtStartPar
“3270”, “gray”, “white”, “3270classic”
\\
\sphinxhline
\sphinxAtStartPar
“printstyle”
&
\sphinxAtStartPar
Print style
&
\sphinxAtStartPar
“3270”, “color”, “white”
\\
\sphinxhline
\sphinxAtStartPar
“rtm”
&
\sphinxAtStartPar
Response time monitor
&
\sphinxAtStartPar
true, false
\\
\sphinxhline
\sphinxAtStartPar
“omitnulls”
&
\sphinxAtStartPar
Omit nulls from input
&
\sphinxAtStartPar
true, false
\\
\sphinxhline
\sphinxAtStartPar
“keepmacpad”
&
\sphinxAtStartPar
Keep macro pad open
&
\sphinxAtStartPar
true, false
\\
\sphinxhline
\sphinxAtStartPar
“keepkeypad”
&
\sphinxAtStartPar
Keep keypad open
&
\sphinxAtStartPar
true, false
\\
\sphinxhline
\sphinxAtStartPar
“hiliteinput”
&
\sphinxAtStartPar
Highlight input fields
&
\sphinxAtStartPar
true, false
\\
\sphinxhline
\sphinxAtStartPar
“caretnot”
&
\sphinxAtStartPar
Remap \textasciicircum{} to logical not
&
\sphinxAtStartPar
true, false
\\
\sphinxhline
\sphinxAtStartPar
“adaptfontratio”
&
\sphinxAtStartPar
Adapt font size ratio
&
\sphinxAtStartPar
true, false
\\
\sphinxhline
\sphinxAtStartPar
“charspace”
&
\sphinxAtStartPar
Character spacing
&
\sphinxAtStartPar
true, false
\\
\sphinxhline
\sphinxAtStartPar
“linespace”
&
\sphinxAtStartPar
Line spacing
&
\sphinxAtStartPar
true, false
\\
\sphinxhline
\sphinxAtStartPar
“settingsGUI”
&
\sphinxAtStartPar
Uuser interface type
&
\sphinxAtStartPar
v2
\\
\sphinxhline
\sphinxAtStartPar
“preservein”
&
\sphinxAtStartPar
Preserve insert mode
&
\sphinxAtStartPar
true, false
\\
\sphinxhline
\sphinxAtStartPar
“nolongpoll”
&
\sphinxAtStartPar
AsynchSupport
&
\sphinxAtStartPar
true, false
\\
\sphinxhline
\sphinxAtStartPar
“MirrorMode”
&
\sphinxAtStartPar
BiDirectional mode
&
\sphinxAtStartPar
false, true
\\
\sphinxhline
\sphinxAtStartPar
“NOstretch”
&
\sphinxAtStartPar
Font Size Stretch
&
\sphinxAtStartPar
true, false
\\
\sphinxhline
\sphinxAtStartPar
“joker”
&
\sphinxAtStartPar
Jokey Key
&
\sphinxAtStartPar
“no”, “Reset”, “ATTN”, “CLEAR”
\\
\sphinxhline
\sphinxAtStartPar
“jokerkey”
&
\sphinxAtStartPar
Jokey Key Value
&
\sphinxAtStartPar
222,value
\\
\sphinxhline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{3}}
\sphinxAtStartPar
“unicodereplactiv” | Convert UNICODE
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
&
\sphinxAtStartPar
true, false
\\
\sphinxhline
\sphinxAtStartPar
“leftalignpage”
&
\sphinxAtStartPar
Align text to left
&
\sphinxAtStartPar
false, true
\\
\sphinxhline
\sphinxAtStartPar
“mousewheeldn”
&
\sphinxAtStartPar
Allocate mouse wheel
down. Default=PF8
&
\sphinxAtStartPar
“PFn”, “no”
\\
\sphinxhline
\sphinxAtStartPar
“mousewheelup”
&
\sphinxAtStartPar
Allocate mouse wheel
up. Default=PF7
&
\sphinxAtStartPar
“PFn”, “no”
\\
\sphinxhline\sphinxstartmulticolumn{3}%
\begin{varwidth}[t]{\sphinxcolwidth{3}{3}}
\begin{description}
\sphinxlineitem{“inhibAppendCopyPasteMode”  | Force copy/paste in replace mode | false, true}
\begin{DUlineblock}{0em}
\item[] and hide toolbar butttons        |
\end{DUlineblock}

\end{description}
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
\\
\sphinxhline
\sphinxAtStartPar
“backspace”
&
\sphinxAtStartPar
Backspace
&
\sphinxAtStartPar
“no”, “Backtab”, “Newline”, “Ins”
\\
\sphinxhline
\sphinxAtStartPar
“shiftbackspace
&
\sphinxAtStartPar
SHIFT+Backspace
&
\sphinxAtStartPar
“no”, “Backtab”, “CLEAR”, “Ins”
\\
\sphinxhline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{3}}
\sphinxAtStartPar
“escapeGraphicChars” | Escape Graphics
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
&
\sphinxAtStartPar
false, true
\\
\sphinxhline
\sphinxAtStartPar
“hideinfo”
&
\sphinxAtStartPar
Hide Server info.
&
\sphinxAtStartPar
false, true
\\
\sphinxhline
\sphinxAtStartPar
“macroPad”
&
\sphinxAtStartPar
Macros in Window
&
\sphinxAtStartPar
false, true
\\
\sphinxhline
\sphinxAtStartPar
“pasteCursor”
&
\sphinxAtStartPar
Move cusor when paste.
&
\sphinxAtStartPar
false, true
\\
\sphinxhline\sphinxstartmulticolumn{2}%
\begin{varwidth}[t]{\sphinxcolwidth{2}{3}}
\sphinxAtStartPar
“preserveinsmode” | Keep INS mode
\par
\vskip-\baselineskip\vbox{\hbox{\strut}}\end{varwidth}%
\sphinxstopmulticolumn
&
\sphinxAtStartPar
false, true
\\
\sphinxhline
\sphinxAtStartPar
“show3278T”
&
\sphinxAtStartPar
3278T ICON in toolbar
&
\sphinxAtStartPar
false, true
\\
\sphinxhline
\sphinxAtStartPar
“showFTP”
&
\sphinxAtStartPar
FTP ICON in toolbar
&
\sphinxAtStartPar
false, true
\\
\sphinxbottomrule
\end{longtable}
\sphinxtableafterendhook
\sphinxatlongtableend
\end{savenotes}

\sphinxAtStartPar
\sphinxstyleemphasis{Default W2H parameters: List of keywords and possible values}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
Some settings my be deprecated and therefore may no longer be in use. They remain for reasons of downward compatibility.
\end{sphinxadmonition}


\section{Trademarks}
\label{\detokenize{User_Guide:trademarks}}
\sphinxAtStartPar
SysperTec, the SysperTec logo, syspertec.com and VIRTEL are trademarks or registered trademarks of SysperTec
Communication Group, registered in France and other countries.

\sphinxAtStartPar
IBM, VTAM, CICS, IMS, RACF, DB2, MVS, WebSphere, MQSeries, System z are trademarks or registered trademarks of
International Business Machines Corp., registered in United States and other countries.

\sphinxAtStartPar
Adobe, Acrobat, PostScript and all Adobe\sphinxhyphen{}based trademarks are either registered trademarks or trademarks of Adobe
Systems Incorporated in the United States and other countries.

\sphinxAtStartPar
Microsoft, Windows, Windows NT, and the Windows logo are trademarks of Microsoft Corporation in the United States
and other countries.

\sphinxAtStartPar
UNIX is a registered trademark of The Open Group in the United States and other countries.
Java and all Java\sphinxhyphen{}based trademarks and logos are trademarks or registered trademarks of Oracle and/or its affiliates.

\sphinxAtStartPar
Linux is a trademark of Linus Torvalds in the United States, other countries, or both.

\sphinxAtStartPar
Other company, product, or service names may be trademarks or service names of others.


\section{Open Source Software}
\label{\detokenize{User_Guide:open-source-software}}
\sphinxAtStartPar
The current VIRTEL Web Access product uses the following open source software:
\begin{itemize}
\item {} \begin{description}
\sphinxlineitem{jQuery}
\sphinxAtStartPar
Under MIT license \sphinxhyphen{} \sphinxurl{https://jquery.org/license/}

\end{description}

\item {} \begin{description}
\sphinxlineitem{StoreJson}
\sphinxAtStartPar
Under MIT license \sphinxhyphen{} \sphinxurl{https://github.com/marcuswestin/store.js/commit/baf3d41b7092f0bacd441b768a77650199c25fa7}

\end{description}

\item {} \begin{description}
\sphinxlineitem{jQuery\_UI}
\sphinxAtStartPar
Under MIT license \sphinxhyphen{} \sphinxurl{http://en.wikipedia.org/wiki/JQuery\_UI}

\end{description}

\end{itemize}



\renewcommand{\indexname}{Index}
\printindex
\end{document}
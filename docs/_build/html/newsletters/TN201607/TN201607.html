<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>What’s new in Virtel 4.56 (September 2016) &mdash; Virtel 9 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Virtel
              <img src="../../_static/logo_virtel_web.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                4.61
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../virtel.html">Virtel Manuals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../newsletters.html">Technical Newsletters</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Virtel</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">What’s new in Virtel 4.56 (September 2016)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/newsletters/TN201607/TN201607.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="whats-new-in-virtel-4-56-september-2016">
<span id="tn201607"></span><h1>What’s new in Virtel 4.56 (September 2016)<a class="headerlink" href="#whats-new-in-virtel-4-56-september-2016" title="Permalink to this heading"></a></h1>
<p>The following newsletter discusses some of the new features that are available in Virtel Release 4.56 and also includes the features announced in Virtel 4.55.</p>
<p><strong>Pre-requisites before running Virtel 4.56</strong></p>
<p>Add ‘Option compatibility’ keyword to your TCT and re-assemble if you wish to maintain previous customised behaviour for CSS, w2HPARM and custom.js files. The “option” feature has been changed in Virtel 4.56.
The default is now “Option Transaction”. Before it was “Option Entry Point”. To maintain compatibility code the following TCT parameter and re-assemble the TCT using the Virtel 4.56 maclib library.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HTSETn</span> <span class="o">=</span> <span class="p">(</span><span class="n">OPTION</span><span class="o">-</span><span class="n">DEFAULT</span><span class="o">-</span><span class="n">COMPATIBILITY</span><span class="p">)</span>                  <span class="o">/*</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">1</span><span class="o">-</span><span class="mi">4</span> <span class="o">*/</span>
</pre></div>
</div>
<p><strong>MAXSOC TCT default</strong></p>
<p>The default for the MAXSOC parameter in the TCT has been increased from
50 to 1000.</p>
<p><strong>Virplex option</strong></p>
<p>The new Virplex feature of Virtel implements a dialog between two or more Virtel lines sharing a common IP address. The feature enables multiple Virtel instances to share the same ARBO and TRSF files and
removes the need of “Timed Affinity” which is required by dynamic VIPA’s. Changes in the URL format now enable participating Virtels within the Virplex to determine whether they are the target of the URL
or if the URL belongs to another Virtel. In the latter case the URL is forwarded onto the target Virtel destination. For further information see the Virplex Section in the Virtel Communications Guide.</p>
<p><strong>Macro Editor</strong></p>
<p>The text area size of the macro editor has been increased from 2 lines to 8 lines.</p>
<p><strong>Virtel customisation - Extended Option enhancement.</strong></p>
<p>In order to address some customer requirements and to improve
performance, a new option feature has been implemented with VIRTEL 4.55.
This new feature changes the way Virtel accesses customization
parameters. Before Virtel customization was set at the Entry point level
whereas with this new option feature the customization level is the
VIRTEL transaction. In previous releases of Virtel, Entry Point
customization controlled features for all associated transactions
through three files. Those being:-</p>
<ul class="simple">
<li><p>/w2h/custom-js</p></li>
<li><p>/w2h/custom-css</p></li>
<li><p>/w2h/custom-w2hparm</p></li>
</ul>
<p>This meant that for every transaction customization features were
accessed regardless of whether they were required.</p>
<p>With this new feature additional customization granularity has been
added by allowing customization at the transaction level through the use
of the “option customization file”. An “option stub file” identifies
customization data pertaining to a specific transaction. To support this
feature a new option field has been added to the transaction definition
along with a new /option directory. An “option stub file” contains
defines the files which will be used to customize a particular
transaction. The statements within the “option stub file” identify the
custom.css, help, custom.js and w2hparm.js files related to the
transaction. See Technical Newsletter “<em>2016-11 Customizing Virtel
4.56</em>” for more information.</p>
<p><strong>Template enhancements</strong></p>
<p>The VALUE-OF parameter has been updated to support the retrieval of the
application-options in a template: For example:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{{</span> <span class="n">VALUE</span><span class="o">-</span><span class="n">OF</span> <span class="p">(</span><span class="n">APPLICATION</span><span class="o">-</span><span class="n">OPTION</span><span class="p">)</span> <span class="p">}}}</span>
</pre></div>
</div>
<p><strong>Scenario enhancements</strong></p>
<p>The VALUE-OF in the scenario FIELD keyword has been updated to support
the application options. Here is an example of using the COPY$
statement:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>COPY$ SYSTEM-TO-VARIABLE,VAR=&#39;VAR1&#39;,                x
        FIELD=(VALUE-OF,APPLICATION-OPTION)
</pre></div>
</div>
<p><strong>SET| UNSET compatibility option</strong></p>
<p>To maintain compatibility with the previous customized
application-option support a new parameter has been introduced. This is
referred to as the OPTION-DEFAULT-COMPATIBILITY. See the following
examples. It sets the default option processing:-</p>
<p>Setting a page’s local default to compatibility:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{{</span> <span class="n">SET</span><span class="o">-</span><span class="n">LOCAL</span><span class="o">-</span><span class="n">OPTIONS</span> <span class="p">(</span><span class="n">OPTION</span><span class="o">-</span><span class="n">DEFAULT</span><span class="o">-</span><span class="n">COMPATIBILITY</span><span class="p">)</span> <span class="p">}}}</span>
</pre></div>
</div>
<p>Un-setting the default compatibility default:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{{{</span> <span class="n">UNSET</span><span class="o">-</span><span class="n">LOCAL</span><span class="o">-</span><span class="n">OPTIONS</span> <span class="p">(</span><span class="n">OPTION</span><span class="o">-</span><span class="n">DEFAULT</span><span class="o">-</span><span class="n">COMPATIBILITY</span><span class="p">)</span> <span class="p">}}}</span>
</pre></div>
</div>
<p>When this option is set then tag parameter {{{ VALUE-OF(APPLICATION-OPTION) }}} will return ‘compatibility’ (without quotes).</p>
<p><em>3270 Administration enhancements</em></p>
<p>The value of this ‘application option’ is taken from the transaction definition. A new option field has been added to the transaction screen, next to the Application field. The maximum length is 32 bytes. The value will be right trimmed, removing any blanks or binary zeroes:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>TRANSACTION DETAIL DEFINITION ---------------------- Applid: SPVIRPX1 18:40:05
Internal name ===&gt; ZLI-10 To associate with an entry point name
External name ===&gt; Cics Name displayed on user menu
Description ===&gt; Logon to CICS
Application ===&gt; DBDCCICS Option ===&gt;                     &lt;&lt;&lt;- New Option field
PassTicket ===&gt; Name ===&gt; 0=no 1=yes 2=unsigned
Application type ===&gt; 1 1=VTAM 2=VIRTEL 3=SERV 4=PAGE 5=LINE
Pseudo-terminals ===&gt; ZLVTA Prefix of name of partner terminals
Logmode ===&gt; Specify when LOGMODE must be changed
How started ===&gt; 1 1=menu 2=sub-menu 3=auto
Security ===&gt; 1 0=none 1=basic 2=NTLM 3=TLS 4=HTML
H4W commands ? ===&gt; 0=no 1=yes 2=if2VIRTEL 4=auto
Logon message ===&gt;
TIOA at logon ===&gt;
TIOA at logoff ===&gt;
Initial Scenario ===&gt; Final Scenario ===&gt;
Input Scenario ===&gt; Output Scenario ===&gt;
</pre></div>
</div>
<p><strong>MQ Enhancement. TCT M3 and M4 keywords</strong></p>
<p>The TCT now supports the MQ keywords M3 and M4 in addition to M1 and M2. See the Virtel Installation guide for further information.</p>
<p><strong>Enhancement to the SCENARIO statement</strong></p>
<p>The SCENARIO statement has be enhanced to support the following options:-</p>
<ul class="simple">
<li><p>SCENARIO FAIL</p></li>
</ul>
<p>Scenario processing stops. On the next POST the scenario will be restarted at its entry point.</p>
<ul class="simple">
<li><p>SUCCESS SCENARIO</p></li>
</ul>
<p>Scenario continues normal purposing of the current message.</p>
<p><strong>New TRSF directory entry - DOC</strong></p>
<p>This directory has been added to the distributed SAMP TRSF files. It will contain administration and other pertinent documentation files.</p>
<p><strong>New FOREACH$/ENDFOR$ Scenario statements</strong></p>
<p>Allows a FOR EACH loop in scenarios thru two new instructions: FOREACH$ and ENDFOR$.</p>
<p>Example:-</p>
<p>Loop on a variable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>LOOP1 FOREACH$ VALUE-IN-VARIABLE,VAR=&#39;TOTO&#39;
        CASE$ CURRENT-FOREACH-VARIABLE-OF,LOOP1,(EQ,&#39;XXXX&#39;,ET1)
        COPY$ SYSTEM-TO-VARIABLE,VAR=&#39;I1&#39;,LENGTH=2,             *
                FIELD=(VALUE-OF,CURRENT-FOREACH-INDEX),TYPE=REPLACE
        COPY$ SYSTEM-TO-VARIABLE,VAR=&#39;V1&#39;,                      *
                FIELD=(VALUE-OF,CURRENT-FOREACH-VARIABLE),TYPE=REPLACE
        ERROR$ 0,&#39;TOTO: &#39;,&#39;*I1&#39;,&#39;==&#39;,&#39;*V1&#39;
        ENDFOR$ LOOP1
</pre></div>
</div>
<p>Loop to print all values of a variable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>LOOP2 FOREACH$ VALUE-IN-SCREEN,SCREEN=(1,1,80,24)
        COPY$ SCREEN-TO-VARIABLE,SCREEN=(=,01,80),VAR=&#39;screenL&#39;,    X
                TYPE=REPLACE
        COPY$ SYSTEM-TO-VARIABLE,VAR=&#39;L1&#39;,LENGTH=2,
                FIELD=(VALUE-OF,CURRENT-LINE),TYPE=REPLACE
        ERROR$ 0,&#39;line &#39;,&#39;\*L1&#39;,&#39;==&#39;,&#39;\*screenL&#39;
        ENDFOR$ LOOP2
</pre></div>
</div>
<p>Variables of a FOREACH loop may be referenced by the COPY$ statement. In the example below, the value of VAR1 which is copied is the current value in the FOREACH$ loop.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>LOOP1   FOREACH$ VALUE-IN-VARIABLE,VAR=&#39;VAR1&#39;
        COPY$ VARIABLE-TO-SCREEN,VAR=&#39;VAR1&#39;,FOREACH=LOOP1,            *
                SCREEN=(=,=,=)
        COPY$ VARIABLE-TO-VARIABLE,VAR=(&#39;VAR1&#39;,&#39;VAR2&#39;),FOREACH=LOOP1, *
                OFFSET=8,LENGTH=5,PAD=&#39; &#39;
        ENDFOR$ LOOP1
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FOREACH$ must have a label, and this label must match the ENDFOR$ parameter.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>FOREACH$ VALUE-IN-SCREEN updates CURRENT-SCREEN-POSITION (‘ = &#39; sign in COPY$ and CASE$).
</pre></div>
</div>
<p><strong>New settings parameter to inhibit CTRL-R key sequence.</strong></p>
<p>A new settings parameter has been added to inhibit CTRL-R being pass through to the browser and refreshing the screen.</p>
<p><strong>Macro keyboard mapping feature</strong></p>
<p>Macros can now be associated with a “ALT” or “CTRL” key sequence.</p>
<p><strong>Key definition enhancement for scripts</strong></p>
<p>Allows more ‘user friendly’ codings for PA/PF keys in a transaction
script. Function keys may now be specified as &amp;*key. For example :-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&amp;</span>\<span class="o">*</span><span class="n">CLEAR</span>
<span class="o">&amp;</span>\<span class="o">*</span><span class="n">clear</span>
<span class="o">&amp;</span>\<span class="o">*</span><span class="n">ENTER</span>
<span class="o">&amp;</span>\<span class="o">*</span><span class="n">enter</span>
<span class="o">&amp;</span>\<span class="o">*</span><span class="n">PA1</span>
<span class="o">&amp;</span>\<span class="o">*</span><span class="n">pa1</span>
<span class="o">&amp;</span>\<span class="o">*</span><span class="n">PF24</span>
<span class="o">&amp;</span>\<span class="o">*</span><span class="n">Pf24</span>
</pre></div>
</div>
<p><strong>FAQ</strong></p>
<p>The following questions address some of the more common issues when implementing this release of Virtel.</p>
<p><strong>Q1</strong></p>
<p>My cursor disappears in a reverse video field.</p>
<p><em>Solution</em></p>
<p>This is probably due to the font and cursor selection. In the settings panel select BAR as the cursor and a font setting like Droid Sans Mono or DejaVu Sans Mono</p>
<p><strong>Q2</strong></p>
<p>I’ve just installed Virtel but when I try to execute the Admin (HTML) from the W2H Administration Portal I get the message <em>“The version of scenario of your scenario ‘ADMINVWM’ is “.” ‘20151215 is
required</em>.” My W2H session is then terminated.</p>
<p><a class="reference internal" href="../../_images/image1253.png"><img alt="image0" src="../../_images/image1253.png" style="width: 6.55251in; height: 3.13542in;" /></a></p>
<p>Figure 1 Error message when accessing Admin (HTML)</p>
<p><em>Solution</em></p>
<p>You will need to change the W2H entry point, WEB2HOST, to specify a directory to search when loading scenarios. By default, scenarios are loaded from the VIRTEL LOADLIB. For W2H they need to come from the scenario SCE-DIR. Load up the Admin portal and select Admin (3270). Navigate to the WEB2HOST entry and display the entry using PF12. Modify the “Directory for scenarios” field to SCE-DIR. The display should look
like:-</p>
<p><a class="reference internal" href="../../_images/image2138.png"><img alt="image1" src="../../_images/image2138.png" style="width: 6.26806in; height: 3.79444in;" /></a></p>
<p>Figure 2 Entry Point display for WEB2HOST</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The scenario directory has to be SCE-DIR. Before the field was blank indicating that scenarios should be loaded from LOADLIB. Press PF1 to confirm they update and then Press PF3 and the CLEAR to return back to the portal screen. Press “CTRL-R” in your browser’s to refresh the browser cache. Now select Admin (HTML) from the Administration options and you should see the Administration panel.</p>
</div>
<p><a class="reference internal" href="../../_images/image3129.png"><img alt="image2" src="../../_images/image3129.png" style="width: 6.26806in; height: 2.43611in;" /></a></p>
<p>Figure 3 Administration Portal</p>
<p><strong>Q3</strong></p>
<p>My customised custom.js no longer works.</p>
<p><em>Solution</em></p>
<p>Recompile your TCT with the option:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HTSETn</span> <span class="o">=</span> <span class="p">(</span><span class="n">OPTION</span><span class="o">-</span><span class="n">DEFAULT</span><span class="o">-</span><span class="n">COMPATIBILITY</span><span class="p">)</span>                  <span class="o">/*</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">1</span><span class="o">-</span><span class="mi">4</span> <span class="o">*/</span>
</pre></div>
</div>
<p>Virtel 4.56’s default option behaviour is “Option Transaction” and not “Option Entry Point”. To maintain compatibility with previous versions the TCT needs to be recompiled with the “Compatibility” option
parameter.</p>
<p><strong>Q4</strong></p>
<p>How do I migrate to Virtel 4.56</p>
<p><em>Solution</em></p>
<p>See the Virtel manual Virtel456 Migration User Guide.</p>
<p><strong>Q5</strong></p>
<p>I have installed Virtel V4.56 but my Virtel Studio scenarios are no longer in the SCE-DIR.</p>
<p><em>Solution</em></p>
<p>If your user scenarios were kept in the SCE-DIR directory than these would have been replaced by the new SCE-DIR within the SAMPTRSF VSAM file. Rebuild and upload you user scenarios to the new SCE-DIR.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is recommended that user scenarios are maintained in a separate directory associated with the HTMLTRSF VSAM file. In this way they will not be replaced with a new release of Virtel.</p>
</div>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017, Syspertec. All rights reserved.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
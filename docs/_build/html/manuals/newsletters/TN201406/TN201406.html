<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Taking a VIRTEL terminal trace &mdash; Virtel 1 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Pass tickets and supporting Proxy Servers" href="../TN201407/TN201407.html" />
    <link rel="prev" title="Technical Newsletters" href="../../../newsletters.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Virtel
              <img src="../../../_static/logo_virtel_web.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                4.62
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../virtel.html">Virtel Manuals</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../newsletters.html">Technical Newsletters</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../../newsletters.html#id1">2014</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Taking a VIRTEL terminal trace</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201407/TN201407.html">Pass tickets and supporting Proxy Servers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201409/TN201409.html">Mainframe printing with Virtel 4.56</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201410/TN201410.html">Taking a VTAM trace</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201411/TN201411.html">Building a customized USSTAB using Virtel’s Web Access facility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201412/TN201412.html">Sharing user macros across multiple instances of Virtel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201413/TN201413.html">Overview of a Virtel Session</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201414/TN201414.html">CICS Printing problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201415/TN201415.html">Virtel JES Writer program</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201416/TN201416.html">Virtel Security. Using server and client certificates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201417/TN201417.html">RACF Grouping Class and Virtel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201419/TN201419.html">Maintaining TRSF file sets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id2">2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id3">2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id4">2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id5">2018</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id6">2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id7">2020</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id8">2023</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id9">2024</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../howto.html">How To Manuals</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Virtel</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../newsletters.html">Technical Newsletters</a></li>
      <li class="breadcrumb-item active">Taking a VIRTEL terminal trace</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/manuals/newsletters/TN201406/TN201406.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="taking-a-virtel-terminal-trace">
<span id="tn201406"></span><h1>Taking a VIRTEL terminal trace<a class="headerlink" href="#taking-a-virtel-terminal-trace" title="Permalink to this heading"></a></h1>
<p>Taking a VIRTEL terminal trace enables the capture of 3270 data streams between the VIRTEL 3270 relay terminal and the customers VTAM application. The following demonstrates how to run such a trace using VIRTEL running in batch. Please note that VIRTEL does not need to be authorized, does not need to run as a started task or need any special security setup. The only requirement from a customer’s perspective is that VIRTEL does need a VTAM ACB so an entry in SYS1.VTAMLST will be required. This is the only setup that your customer will have to do outside of installing the base product.</p>
<p>Procedure</p>
<ol class="arabic">
<li><p>Install the VIRTEL product by running the $ALOCDSU and $RESTDSU jobs. See the <cite>Virtel Installation Guide</cite> for details on how to download and install VIRTEL from the <a class="reference external" href="https://ftp-group.syspertec.com">SYSPERTEC ftp site</a>. Note that you can bypass “Step 5” in section 2.3 of the MVS Installation Checklist because at this stage we are not running VIRTEL authorized. When running the ARBOLOAD job point the “SET VTAMLST” to your CNTL library. ARBOLOAD will create the VTAMLST application definition member called VIRTAPPL. This can be copied to SYS1.VTAMLST and activated in the next step.</p>
<blockquote>
<div><p>“Step 6” Edit member VIRTCT01 can be bypassed if the default TCT options are acceptable. For the purposes of just running a 3270 terminal trace this should be the case.</p>
<p>“Steps 9 through to Steps 15” of the MVS installation guide can be ignored.</p>
</div></blockquote>
</li>
<li><p>Copy the VTAM application definition created by ARBOLOAD to SYS1.VTAMLST. The example I use is listed below. This member can be found in the CNTL library after running the ARBOLOAD job. By default the member name is VIRTAPPL. The member should activated by issuing the following z/OS command:-</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">V</span> <span class="n">NET</span><span class="p">,</span><span class="n">ACT</span><span class="p">,</span><span class="n">ID</span><span class="o">=</span><span class="n">VIRTAPPL</span>
</pre></div>
</div>
<p>This VTAM definition should look like:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>VIRTAPPL VBUILD TYPE=APPL
*------------------------------------------------------------------*
* Product : VIRTEL                                                 *
* Description : Main ACB for VIRTEL application                    *
*                                                                  *
*------------------------------------------------------------------*
VIRTEL APPL EAS=160,AUTH=(ACQ,BLOCK,PASS,SPO),ACBNAME=VIRTEL
*------------------------------------------------------------------*
* RHTVTxxx : VTAM application relays for VIRTEL Web Access         *
*------------------------------------------------------------------*
RHTVT??? APPL AUTH=(ACQ,PASS),MODETAB=ISTINCLM,DLOGMOD=SNX32702,EAS=1
*------------------------------------------------------------------*
* RHTIMxxx : Printer relays for VIRTEL Web Access terminals        *
*------------------------------------------------------------------*
RHTIM??? APPL AUTH=(ACQ,PASS),MODETAB=ISTINCLM,DLOGMOD=SCS,EAS=1
RHTIP??? APPL AUTH=(ACQ,PASS),MODETAB=ISTINCLM,DLOGMOD=DSILGMOD,EAS=1
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Before running VIRTEL as a batch job modify the program name to VIR0000 from VIR60000. Here is an example of the batch procedure I use. VIR6000 requires an authorized library whereas VIR0000 doesn’t.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="n">SPTHOLTA</span> <span class="n">JOB</span> <span class="mi">1</span><span class="p">,</span><span class="n">EDHOLT</span><span class="p">,</span><span class="n">CLASS</span><span class="o">=</span><span class="n">A</span><span class="p">,</span><span class="n">MSGCLASS</span><span class="o">=</span><span class="n">X</span><span class="p">,</span><span class="n">NOTIFY</span><span class="o">=&amp;</span><span class="n">SYSUID</span>
<span class="o">//</span><span class="n">VIRTEL</span> <span class="n">PROC</span> <span class="n">QUAL</span><span class="o">=</span><span class="n">SP000</span><span class="o">.</span><span class="n">SPVIREH</span><span class="p">,</span>
<span class="o">//</span> <span class="n">TCT</span><span class="o">=</span><span class="n">US</span>
<span class="o">//*-------------------------------------------------------------------*</span>
<span class="o">//*</span> <span class="n">PROCEDURE</span> <span class="n">FOR</span> <span class="n">VIRTEL</span> <span class="n">STARTER</span> <span class="n">EDITION</span>                              <span class="o">*</span>
<span class="o">//*-------------------------------------------------------------------*</span>
<span class="o">//</span><span class="n">VIRTEL</span> <span class="n">EXEC</span> <span class="n">PGM</span><span class="o">=</span><span class="n">VIR0000</span><span class="p">,</span><span class="n">TIME</span><span class="o">=</span><span class="mi">1440</span><span class="p">,</span><span class="n">REGION</span><span class="o">=</span><span class="mi">32</span><span class="n">M</span><span class="p">,</span><span class="n">PARM</span><span class="o">=&amp;</span><span class="n">TCT</span>
<span class="o">//</span><span class="n">STEPLIB</span> <span class="n">DD</span> <span class="n">DSN</span><span class="o">=</span><span class="n">SP000</span><span class="o">.</span><span class="n">VIRT452</span><span class="o">.</span><span class="n">LOADLIB</span><span class="p">,</span><span class="n">DISP</span><span class="o">=</span><span class="n">SHR</span>
<span class="o">//</span><span class="n">DFHRPL</span> <span class="n">DD</span> <span class="n">DSN</span><span class="o">=</span><span class="n">SP000</span><span class="o">.</span><span class="n">VIRT452</span><span class="o">.</span><span class="n">LOADLIB</span><span class="p">,</span><span class="n">DISP</span><span class="o">=</span><span class="n">SHR</span>
<span class="o">//</span><span class="n">SERVLIB</span> <span class="n">DD</span> <span class="n">DSN</span><span class="o">=</span><span class="n">SP000</span><span class="o">.</span><span class="n">VIRT452</span><span class="o">.</span><span class="n">SERVLIB</span><span class="p">,</span><span class="n">DISP</span><span class="o">=</span><span class="n">SHR</span>
<span class="o">//</span><span class="n">VIRARBO</span> <span class="n">DD</span> <span class="n">DSN</span><span class="o">=&amp;</span><span class="n">QUAL</span><span class="o">..</span><span class="n">ARBO</span><span class="p">,</span><span class="n">DISP</span><span class="o">=</span><span class="n">SHR</span>
<span class="o">//</span><span class="n">VIRSWAP</span> <span class="n">DD</span> <span class="n">DSN</span><span class="o">=&amp;</span><span class="n">QUAL</span><span class="o">..</span><span class="n">SWAP</span><span class="p">,</span><span class="n">DISP</span><span class="o">=</span><span class="n">SHR</span>
<span class="o">//</span><span class="n">VIRHTML</span> <span class="n">DD</span> <span class="n">DSN</span><span class="o">=&amp;</span><span class="n">QUAL</span><span class="o">..</span><span class="n">HTML</span><span class="p">,</span><span class="n">DISP</span><span class="o">=</span><span class="n">SHR</span>
<span class="o">//</span><span class="n">SAMPTRSF</span> <span class="n">DD</span> <span class="n">DSN</span><span class="o">=&amp;</span><span class="n">QUAL</span><span class="o">..</span><span class="n">SAMP</span><span class="o">.</span><span class="n">TRSF</span><span class="p">,</span><span class="n">DISP</span><span class="o">=</span><span class="n">SHR</span>
<span class="o">//</span><span class="n">HTMLTRSF</span> <span class="n">DD</span> <span class="n">DSN</span><span class="o">=&amp;</span><span class="n">QUAL</span><span class="o">..</span><span class="n">HTML</span><span class="o">.</span><span class="n">TRSF</span><span class="p">,</span><span class="n">DISP</span><span class="o">=</span><span class="n">SHR</span>
<span class="o">//</span><span class="n">SYSOUT</span> <span class="n">DD</span> <span class="n">SYSOUT</span><span class="o">=*</span>
<span class="o">//</span><span class="n">VIRLOG</span> <span class="n">DD</span> <span class="n">SYSOUT</span><span class="o">=*</span>
<span class="o">//</span><span class="n">VIRTRACE</span> <span class="n">DD</span> <span class="n">SYSOUT</span><span class="o">=*</span>
<span class="o">//</span><span class="n">SYSPRINT</span> <span class="n">DD</span> <span class="n">SYSOUT</span><span class="o">=*</span>
<span class="o">//</span><span class="n">SYSUDUMP</span> <span class="n">DD</span> <span class="n">SYSOUT</span><span class="o">=*</span>
<span class="o">//</span> <span class="n">PEND</span>
<span class="o">//</span><span class="n">S01</span> <span class="n">EXEC</span> <span class="n">VIRTEL</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Tracing an application. The ARBOLOAD sets up defaults for VIRTEL. One of these defaults is the installation of standard VTAM applications like CICS, IMS, NVAS and TSO. What follows is an example of tracing a VIRTEL web to host (W2H) session between a browser and TSO. To begin with we need to identify the related W2H line that will support the session. The command “F jobname,lines” will display the active lines. I’m interested in default web to host (W2H) line so I’m looking for the W2H line. Here is the results of my display:-</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>F SPTHOLTA,LINES
+VIR0200I LINES
+VIR0201I VIRTEL 4.52 APPLID=VIRTEL LINES
+VIR0202I INT.NAME EXT.NAME TYPE ACB OR IP
+VIR0202I -------- -------- ----- ---------
+VIR0202I C-HTTP HTTP-CLI TCP1 192.168.170.30:41002
+VIR0202I E-HTTP HTTP-EDS TCP1 192.168.170.30:41003
+VIR0202I P-PCLPDF PCL2PDF TCP1 $NONE$
+VIR0202I V-HTTP HTTP-VSR TCP1 192.168.170.30:41004
+VIR0202I W-HTTP HTTP-W2H TCP1 192.168.170.30:41001
+VIR0202I ---END OF LIST---
</pre></div>
</div>
<p>I can see that HTTP-W2H is the external name of a line and has opened port 41001 on TCPIP address 192.168.170.30. The IP address is set in the ARBO control file as a parameter of the line definition. Next I’ll open a session to TSO using those details in a web browser. The following url is entered into my web browser :-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">192.168.170.30</span><span class="p">:</span><span class="mi">41001</span><span class="o">/</span><span class="n">w2h</span><span class="o">/</span><span class="n">WEB2AJAX</span><span class="o">.</span><span class="n">htm</span><span class="o">+</span><span class="n">TSO</span>
</pre></div>
</div>
<p>This will display a TSO session on the web browser. The “+TSO” parameter in the URL indicates that VIRTEL should establish a session with the application TSO. Of course this could be any VTAM application that has been defined to VIRTEL through the ARBLOAD process. Before continuing with our TSO session we need to start the trace on the correct terminal/relay. The VTAM LU relay name that Virtel uses is displayed in the bottom right corner of the TSO screen.</p>
<p>Displaying the VITREL relays indicates which session have been establish.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="n">SPTHOLTA</span><span class="p">,</span><span class="n">RELAYS</span>
<span class="o">+</span><span class="n">VIR0200I</span> <span class="n">RELAYS</span>
<span class="o">+</span><span class="n">VIR0214I</span> <span class="n">ACTIVE</span> <span class="n">RELAY</span> <span class="n">ACBS</span> <span class="n">FOR</span> <span class="n">VIRTEL</span> <span class="mf">4.52</span> <span class="n">APPLID</span><span class="o">=</span><span class="n">VIRTEL</span>
<span class="o">+</span><span class="n">VIR0214I</span> <span class="n">TERMINAL</span> <span class="n">RELAY</span> <span class="n">APPLID</span> <span class="n">CLIENT</span>
<span class="o">+</span><span class="n">VIR0214I</span> <span class="o">--------</span> <span class="o">--------</span> <span class="o">--------</span> <span class="o">---------------</span>
<span class="o">+</span><span class="n">VIR0214I</span> <span class="n">DEVTA015</span> <span class="n">REHVT001</span> <span class="n">TSO1A006</span> <span class="mf">192.168.92.82</span>
<span class="o">+</span><span class="n">VIR0214I</span> <span class="n">W2HIM001</span> <span class="n">REHIM001</span>
<span class="o">+</span><span class="n">VIR0214I</span> <span class="o">---</span><span class="n">END</span> <span class="n">OF</span> <span class="n">LIST</span><span class="o">---</span>
</pre></div>
</div>
<p>This shows a TSO session on Terminal/Relay DEVTA015/REHVT001. Using this information, I can start a trace on that terminal/relay.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="n">SPTHOLTA</span><span class="p">,</span><span class="n">TRACE</span><span class="p">,</span><span class="n">R</span><span class="o">=</span><span class="n">REHVT001</span>
<span class="o">+</span><span class="n">VIR0200I</span> <span class="n">TRACE</span><span class="p">,</span><span class="n">R</span><span class="o">=</span><span class="n">REHVT001</span>
<span class="o">+</span><span class="n">VIR0062I</span> <span class="n">DEVTA015</span> <span class="n">TRACE</span> <span class="n">ACTIVE</span>
</pre></div>
</div>
<p>Now the TSO session can continue with and any 3270 data stream data will be written to the VIRTRACE dataset. To stop the trace, issue the following command:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="n">SPTHOLTA</span><span class="p">,</span><span class="n">NOTRACE</span><span class="p">,</span><span class="n">ALL</span>
</pre></div>
</div>
<p>To stop the VIRTEL batch job issue the STOP command:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">P</span> <span class="n">jobname</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can modify the ARBOLOAD to reflect your customer’s applications. For example, if you are using a different session manager to the default session manager APPLID NVAS, modify APPL= keyword in the W2H-15X TRANSACT entry in the ARBOLOAD control file. Change it to the VTAM APPLID of your session manager. Rerun the ARBLOAD job to rebuild the ARBO file. Virtel must be down when updating the ARBO file.</p>
</div>
<p>Resubmit the VIRTEL batch job and open a webpage with the following url:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">192.168.170.30</span><span class="p">:</span><span class="mi">41001</span><span class="o">/</span><span class="n">w2h</span><span class="o">/</span><span class="n">WEB2AJAX</span><span class="o">.</span><span class="n">htm</span><span class="o">+</span><span class="n">mySessmgr</span>
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../../newsletters.html" class="btn btn-neutral float-left" title="Technical Newsletters" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../TN201407/TN201407.html" class="btn btn-neutral float-right" title="Pass tickets and supporting Proxy Servers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017, Syspertec. All rights reserved.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
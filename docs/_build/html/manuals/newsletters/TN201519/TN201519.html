

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Processing the VTAM USS MSG10 buffer &mdash; Virtel 1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="Virtel 1 documentation" href="../../../index.html"/>
        <link rel="up" title="Technical Newsletters" href="../../../newsletters.html"/>
        <link rel="next" title="Using the IBM System Logger with Virtel" href="../TN201520/TN201520.html"/>
        <link rel="prev" title="Virtel Chinese Character Language Support" href="../TN201517/TN201517.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Virtel
          

          
            
            <img src="../../../_static/logo_virtel_web.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../virtel.html">Virtel Manuals</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../newsletters.html">Technical Newsletters</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id1">2014</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../newsletters.html#id2">2015</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../TN201501/TN201501.html">Dynamic Directory Interface (DDI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201504/TN201504.html">Running multiple instances of Virtel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201505/TN201505.html">Virtel Macros in Virtel 4.53</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201506/TN201506.html">An example of using web services with Virtel Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201507/TN201507.html">Customising Virtel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201515/TN201515.html">Using Virtel as a Secure Single Access Control Point</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201517/TN201517.html">Virtel Chinese Character Language Support</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Processing the VTAM USS MSG10 buffer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201520/TN201520.html">Using the IBM System Logger with Virtel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201522/TN201522.html">What’s new in Virtel 4.55</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id3">2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id4">2017</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../howto.html">Miscellaneous</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">Virtel</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../../newsletters.html">Technical Newsletters</a> &raquo;</li>
      
    <li>Processing the VTAM USS MSG10 buffer</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/manuals/newsletters/TN201519/TN201519.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="processing-the-vtam-uss-msg10-buffer">
<span id="tn201519"></span><h1>Processing the VTAM USS MSG10 buffer<a class="headerlink" href="#processing-the-vtam-uss-msg10-buffer" title="Permalink to this headline">¶</a></h1>
<p>This newsletter discusses how to implement the VIRTEL VIR0021W USSTAB
menu program. This program will interrogate the customers USSTAB module
and create an equivalent 3270 MAP. The MAP will be passed to the VIR0010
routine where it will subsequently be converted into a HTML template and
served to the browser. The generated template will provide similar
functionality to that of the VTAM USSMSG10, that being a presentation
screen and support for USSCMD and USSPARM entries. This allows customers
to maintain their USSTAB MSG10 presentation for both VTAM and VIRTEL
users without modification. The customers assembled USSTAB module,
normally found in USER.VTAMLIB or an equivalent library, must be made
available to VIRTEL. This can be done by either copying the module to a
VIRTEL steplib library or concatenating the USER.VTAMLIB library into
the VIRTEL started procedure.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Replace SPTHOLT with your HLQ.</p>
</div>
<p><strong>Installation instructions</strong></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The following outlines the installation procedure for Virtel 4.53 onwards. For installation with Virtel 4.55 and subsequent later relaease, steps 1 through to 5 are not required as the modules will be delivered as part of the Virtel 4.55 installation.</p>
</div>
<ol class="arabic simple">
<li>Allocate a TRS file on the mainframe with the following JCL:</li>
</ol>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">//</span><span class="n">SPTHOLTT</span> <span class="n">JOB</span> <span class="p">(</span><span class="mi">9000</span><span class="p">),</span><span class="s1">&#39;ED...HOLT...&#39;</span><span class="p">,</span>
<span class="o">//</span> <span class="n">NOTIFY</span><span class="o">=&amp;</span><span class="n">SYSUID</span><span class="p">,</span><span class="n">RESTART</span><span class="o">=*</span><span class="p">,</span>
<span class="o">//</span> <span class="n">CLASS</span><span class="o">=</span><span class="n">A</span><span class="p">,</span>
<span class="o">//</span> <span class="n">MSGCLASS</span><span class="o">=</span><span class="n">X</span><span class="p">,</span>
<span class="o">//</span> <span class="n">MSGLEVEL</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
<span class="o">//</span> <span class="n">COND</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="n">LT</span><span class="p">)</span>
<span class="o">//*-------------------------------------------------------------------+</span>
<span class="o">//*</span>                                                                   <span class="o">|</span>
<span class="o">//*</span> <span class="n">CREATE</span> <span class="n">A</span> <span class="n">TERSE</span> <span class="n">FILE</span> <span class="n">READY</span> <span class="n">TO</span> <span class="n">RECEIVE</span> <span class="n">BINARY</span> <span class="n">UPLOAD</span>                <span class="o">|</span>
<span class="o">//*</span>                                                                   <span class="o">|</span>
<span class="o">//*-------------------------------------------------------------------+</span>
<span class="o">//</span><span class="n">DEL</span> <span class="n">EXEC</span> <span class="n">PGM</span><span class="o">=</span><span class="n">IEFBR14</span>
<span class="o">//</span><span class="n">DDA</span> <span class="n">DD</span> <span class="n">DISP</span><span class="o">=</span><span class="p">(</span><span class="n">MOD</span><span class="p">,</span><span class="n">DELETE</span><span class="p">),</span><span class="n">UNIT</span><span class="o">=</span><span class="n">SYSDA</span><span class="p">,</span><span class="n">SPACE</span><span class="o">=</span><span class="p">(</span><span class="n">TRK</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
<span class="o">//</span> <span class="n">DSN</span><span class="o">=</span><span class="n">SPTHOLT</span><span class="o">.</span><span class="n">XMIT</span><span class="o">.</span><span class="n">LOADLIB</span><span class="o">.</span><span class="n">TRS</span>
<span class="o">//</span><span class="n">S00</span> <span class="n">EXEC</span> <span class="n">PGM</span><span class="o">=</span><span class="n">IEFBR14</span>
<span class="o">//</span><span class="n">DDA</span> <span class="n">DD</span> <span class="n">DSN</span><span class="o">=</span><span class="n">SPTHOLT</span><span class="o">.</span><span class="n">XMIT</span><span class="o">.</span><span class="n">LOADLIB</span><span class="o">.</span><span class="n">TRS</span><span class="p">,</span><span class="n">DISP</span><span class="o">=</span><span class="p">(,</span><span class="n">CATLG</span><span class="p">),</span><span class="n">UNIT</span><span class="o">=</span><span class="n">SYSDA</span><span class="p">,</span>
<span class="o">//</span> <span class="n">SPACE</span><span class="o">=</span><span class="p">(</span><span class="n">CYL</span><span class="p">,(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)),</span><span class="n">DCB</span><span class="o">=</span><span class="p">(</span><span class="n">LRECL</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span><span class="n">BLKSIZE</span><span class="o">=</span><span class="mi">6144</span><span class="p">,</span><span class="n">RECFM</span><span class="o">=</span><span class="n">FB</span><span class="p">)</span>
<span class="o">//</span><span class="n">DDB</span> <span class="n">DD</span> <span class="n">DSN</span><span class="o">=</span><span class="n">SPTHOLT</span><span class="o">.</span><span class="n">XMIT</span><span class="o">.</span><span class="n">LOADLIB</span><span class="o">.</span><span class="n">BIN</span><span class="p">,</span><span class="n">DISP</span><span class="o">=</span><span class="p">(,</span><span class="n">CATLG</span><span class="p">),</span><span class="n">UNIT</span><span class="o">=</span><span class="n">SYSDA</span><span class="p">,</span>
<span class="o">//</span> <span class="n">SPACE</span><span class="o">=</span><span class="p">(</span><span class="n">CYL</span><span class="p">,(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)),</span><span class="n">DCB</span><span class="o">=</span><span class="p">(</span><span class="n">LRECL</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span><span class="n">BLKSIZE</span><span class="o">=</span><span class="mi">3120</span><span class="p">,</span><span class="n">RECFM</span><span class="o">=</span><span class="n">FB</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Upload the binary TRS file ptf5325-mvs453.trs to the mainframe and unterse the TRS file. The file can be found on the FTP website in the PUBLIC directory under /VIRTEL 4.53/PTFS. The following is an example
of the JCL required to unterse the file.</li>
</ol>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">//</span><span class="n">SPTHOLTD</span> <span class="n">JOB</span> <span class="n">DSSDUMP</span><span class="p">,</span><span class="n">CLASS</span><span class="o">=</span><span class="n">A</span><span class="p">,</span><span class="n">MSGCLASS</span><span class="o">=</span><span class="n">X</span><span class="p">,</span><span class="n">NOTIFY</span><span class="o">=&amp;</span><span class="n">SYSUID</span>
<span class="o">//</span><span class="n">S01</span> <span class="n">EXEC</span> <span class="n">PGM</span><span class="o">=</span><span class="n">TRSMAIN</span><span class="p">,</span><span class="n">PARM</span><span class="o">=</span><span class="n">UNPACK</span>
<span class="o">//</span><span class="n">SYSPRINT</span> <span class="n">DD</span> <span class="n">SYSOUT</span><span class="o">=*</span>
<span class="o">//</span><span class="n">INFILE</span> <span class="n">DD</span> <span class="n">DSN</span><span class="o">=</span><span class="n">SPTHOLT</span><span class="o">.</span><span class="n">XMIT</span><span class="o">.</span><span class="n">LOADLIB</span><span class="o">.</span><span class="n">TRS</span><span class="p">,</span><span class="n">DISP</span><span class="o">=</span><span class="n">SHR</span>
<span class="o">//</span><span class="n">OUTFILE</span> <span class="n">DD</span> <span class="n">DSN</span><span class="o">=</span><span class="n">SPTHOLT</span><span class="o">.</span><span class="n">XMIT</span><span class="o">.</span><span class="n">LOADLIB</span><span class="o">.</span><span class="n">BIN</span><span class="p">,</span><span class="n">DISP</span><span class="o">=</span><span class="n">SHR</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Receive the untersed file using the TSO RECEIVE command.</li>
</ol>
<dl class="docutils">
<dt>::</dt>
<dd>receive indsn(XMIT.LOADLIB.BIN)</dd>
</dl>
<p>This will create the LOAD library SPTHOLT.XMIT.LOADLIB which should contain the following members:-</p>
<dl class="docutils">
<dt>::</dt>
<dd>USSVIRT Default VIRTEL USSTAB
VIR0021W Virtel USSTAB program
EIRM00W Dummy MAP module required by VIR0021W</dd>
</dl>
<ol class="arabic simple" start="4">
<li>Copy these load members into your VIRTEL load library. They are all new members.</li>
<li>Apply the following zaps to the VIRTEL module VIR0010. This fix can also be found on the FTP website in the allpts-mvs453 member in the PUBLIC directory under /VIRTEL 4.53/PTFS.</li>
</ol>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">*********************************************************************</span>
<span class="o">*</span> <span class="o">*</span> <span class="n">PTF5325</span> <span class="n">MVS453</span> <span class="o">*</span>
<span class="o">*</span>
<span class="o">*********************************************************************</span>
<span class="o">*</span> <span class="n">PTF5325</span> <span class="n">MVS453</span>
<span class="o">*</span> <span class="mi">5325</span> <span class="n">TEST</span> <span class="c1">#PARM6 FOR MAP BEFORE LOADING THROUGH XLOAD</span>
<span class="o">*</span> <span class="n">PTF</span> <span class="n">FOR</span> <span class="n">VIRTEL</span> <span class="n">VERSION</span> <span class="o">&gt;&gt;&gt;&gt;</span> <span class="mf">4.53</span> <span class="o">&lt;&lt;&lt;&lt;</span>
<span class="n">CHECKSUM</span>
<span class="n">NAME</span> <span class="n">VIR0010</span>
<span class="n">VER</span> <span class="mi">1</span><span class="n">A4C</span> <span class="mi">58</span><span class="n">F0</span><span class="p">,</span><span class="n">CA78</span> <span class="n">L</span> <span class="n">R15</span><span class="p">,</span><span class="n">A</span><span class="p">(</span><span class="n">XLOAD</span><span class="p">)</span>
<span class="n">VER</span> <span class="mi">1</span><span class="n">FB2</span> <span class="mi">58</span><span class="n">F0</span><span class="p">,</span><span class="n">C508</span> <span class="n">L</span> <span class="n">R15</span><span class="p">,</span><span class="n">A</span><span class="p">(</span><span class="n">XLOAD</span><span class="p">)</span>
<span class="n">REP</span> <span class="mi">1</span><span class="n">A4C</span> <span class="mi">4</span><span class="n">DE0</span><span class="p">,</span><span class="n">A920</span> <span class="n">B</span> <span class="n">PATCH1</span>
<span class="n">REP</span> <span class="mi">1</span><span class="n">FB2</span> <span class="mi">4</span><span class="n">DE0</span><span class="p">,</span><span class="n">A92E</span> <span class="n">B</span> <span class="n">PATCH2</span>
<span class="n">IDRDATA</span> <span class="n">PTF5325</span>
<span class="n">NAME</span> <span class="n">VIR0099</span>
<span class="n">VER</span> <span class="mi">0920</span> <span class="n">A920</span><span class="p">,</span><span class="n">A922</span><span class="p">,</span><span class="n">A924</span><span class="p">,</span><span class="n">A926</span><span class="p">,</span><span class="n">A928</span><span class="p">,</span><span class="n">A92A</span><span class="p">,</span><span class="n">A92C</span><span class="p">,</span><span class="n">A92E</span>
<span class="n">VER</span> <span class="mi">0930</span> <span class="n">A930</span><span class="p">,</span><span class="n">A932</span><span class="p">,</span><span class="n">A934</span><span class="p">,</span><span class="n">A936</span><span class="p">,</span><span class="n">A938</span><span class="p">,</span><span class="n">A93A</span>
<span class="n">REP</span> <span class="mi">0920</span> <span class="n">BF8F</span><span class="p">,</span><span class="mi">9038</span> <span class="n">ICM</span> <span class="n">R8</span><span class="p">,</span><span class="c1">#PARM6 GET MAP?</span>
<span class="n">REP</span> <span class="mi">0924</span> <span class="mi">4770</span><span class="p">,</span><span class="n">C05C</span> <span class="n">BNZ</span> <span class="o">+</span> <span class="mi">8</span> <span class="n">PASS</span> <span class="n">LOAD</span>
<span class="n">REP</span> <span class="mi">0928</span> <span class="mi">58</span><span class="n">F0</span><span class="p">,</span><span class="n">CA78</span> <span class="n">L</span> <span class="n">R15</span><span class="p">,</span><span class="n">A</span><span class="p">(</span><span class="n">XLOAD</span><span class="p">)</span> <span class="n">SET</span> <span class="n">LOAD</span> <span class="n">IN</span> <span class="n">R15</span>
<span class="n">REP</span> <span class="mi">092</span><span class="n">C</span> <span class="mi">07</span><span class="n">FE</span> <span class="n">RETRUN</span>
<span class="n">REP</span> <span class="mi">092</span><span class="n">E</span> <span class="n">BF8F</span><span class="p">,</span><span class="mi">9038</span> <span class="n">ICM</span> <span class="n">R8</span><span class="p">,</span><span class="c1">#PARM6 GET MAP?</span>
<span class="n">REP</span> <span class="mi">0932</span> <span class="mi">4770</span><span class="p">,</span><span class="n">C052</span> <span class="n">BNZ</span> <span class="o">+</span> <span class="mi">8</span> <span class="n">PASS</span> <span class="n">LOAD</span>
<span class="n">REP</span> <span class="mi">0936</span> <span class="mi">58</span><span class="n">F0</span><span class="p">,</span><span class="n">C508</span> <span class="n">L</span> <span class="n">R15</span><span class="p">,</span><span class="n">A</span><span class="p">(</span><span class="n">XLOAD</span><span class="p">)</span> <span class="n">SET</span> <span class="n">LOAD</span> <span class="n">IN</span> <span class="n">R15</span>
<span class="n">REP</span> <span class="mi">093</span><span class="n">A</span> <span class="mi">07</span><span class="n">FE</span> <span class="n">RETRUN</span>
<span class="n">IDRDATA</span> <span class="n">PTF5325</span>
<span class="n">NAME</span> <span class="n">VIR0PTF</span>
<span class="n">VER</span> <span class="mi">0108</span> <span class="mi">00000000</span>
<span class="n">REP</span> <span class="mi">0108</span> <span class="mi">00532500</span>
<span class="n">IDRDATA</span> <span class="n">PTF5325</span>
<span class="n">CHECKSUM</span> <span class="n">A164C619</span>
<span class="o">********************************************************************</span>
<span class="o">*</span> <span class="o">*</span> <span class="n">PTF5369</span> <span class="n">MVS453</span>                                                 <span class="o">*</span>
<span class="o">*</span>                                                                  <span class="o">*</span>
<span class="o">********************************************************************</span>
<span class="o">*</span> <span class="n">PTF5369</span> <span class="n">MVS453</span>
<span class="o">*</span> <span class="mi">5369</span> <span class="n">LOOP</span> <span class="n">COPYING</span> <span class="n">FILES</span> <span class="n">DUE</span> <span class="n">TO</span> <span class="n">AN</span> <span class="n">ERROR</span> <span class="n">IN</span> <span class="n">PTF5325</span>
<span class="o">*</span> <span class="n">PTF5325</span> <span class="n">IS</span> <span class="n">PRE</span><span class="o">-</span><span class="n">REQUISITE</span>
<span class="o">*</span> <span class="n">PTF</span> <span class="n">FOR</span> <span class="n">VIRTEL</span> <span class="n">VERSION</span> <span class="o">&gt;&gt;&gt;&gt;</span> <span class="mf">4.53</span> <span class="o">&lt;&lt;&lt;&lt;</span>
<span class="n">CHECKSUM</span>
<span class="n">NAME</span> <span class="n">VIR0010</span>
<span class="n">VER</span> <span class="mi">1</span><span class="n">A4C</span> <span class="mi">4</span><span class="n">DE0</span><span class="p">,</span><span class="n">A920</span> <span class="n">PTF5325</span>
<span class="n">REP</span> <span class="mi">1</span><span class="n">A4C</span> <span class="mi">4</span><span class="n">DE0</span><span class="p">,</span><span class="n">A940</span> <span class="n">B</span> <span class="n">PATCH3</span>
<span class="n">VER</span> <span class="mi">1</span><span class="n">FB2</span> <span class="mi">4</span><span class="n">DE0</span><span class="p">,</span><span class="n">A92E</span> <span class="n">PTF5325</span>
<span class="n">REP</span> <span class="mi">1</span><span class="n">FB2</span> <span class="mi">4</span><span class="n">DE0</span><span class="p">,</span><span class="n">A94C</span> <span class="n">B</span> <span class="n">PATCH4</span>
<span class="n">IDRDATA</span> <span class="n">PTF5369</span>
<span class="n">NAME</span> <span class="n">VIR0099</span>
<span class="n">VER</span> <span class="mi">0940</span> <span class="n">A940</span><span class="p">,</span><span class="n">A942</span><span class="p">,</span><span class="n">A944</span><span class="p">,</span><span class="n">A946</span><span class="p">,</span><span class="n">A948</span><span class="p">,</span><span class="n">A94A</span><span class="p">,</span><span class="n">A94C</span><span class="p">,</span><span class="n">A94E</span>
<span class="n">REP</span> <span class="mi">0940</span> <span class="mi">9180</span><span class="p">,</span><span class="mi">5000</span><span class="p">,</span><span class="mi">4780</span><span class="p">,</span><span class="n">A928</span><span class="p">,</span><span class="mi">47</span><span class="n">F0</span><span class="p">,</span><span class="n">A920</span><span class="p">,</span><span class="mi">9104</span><span class="p">,</span><span class="mi">5000</span>
<span class="n">VER</span> <span class="mi">0950</span> <span class="n">A950</span><span class="p">,</span><span class="n">A952</span><span class="p">,</span><span class="n">A954</span><span class="p">,</span><span class="n">A956</span>
<span class="n">REP</span> <span class="mi">0950</span> <span class="mi">4780</span><span class="p">,</span><span class="n">A936</span><span class="p">,</span><span class="mi">47</span><span class="n">F0</span><span class="p">,</span><span class="n">A92E</span>
<span class="n">IDRDATA</span> <span class="n">PTF5369</span>
<span class="n">NAME</span> <span class="n">VIR0PTF</span>
<span class="n">VER</span> <span class="mi">0138</span> <span class="mi">00000000</span>
<span class="n">REP</span> <span class="mi">0138</span> <span class="mi">00536900</span>
<span class="n">IDRDATA</span> <span class="n">PTF5369</span>
<span class="n">CHECKSUM</span> <span class="mi">755</span><span class="n">CE17A</span>
<span class="o">********************************************************************</span>
<span class="o">*</span> <span class="o">*</span> <span class="n">PTF4369A</span> <span class="n">MVS453</span>                                                <span class="o">*</span>
<span class="o">*</span>                                                                  <span class="o">*</span>
<span class="o">********************************************************************</span>
<span class="o">*</span>
<span class="o">********************************************************************</span>
<span class="o">*</span> <span class="o">*</span> <span class="n">PTF5369A</span> <span class="n">MVS453</span>                                                <span class="o">*</span>
<span class="o">*</span>                                                                  <span class="o">*</span>
<span class="o">********************************************************************</span>
<span class="o">*</span> <span class="o">*</span> <span class="n">USER</span> <span class="n">SPECIFIC</span> <span class="o">-</span> <span class="n">ONLY</span> <span class="n">FOR</span> <span class="n">SITE</span> <span class="n">HAVING</span> <span class="n">A</span> <span class="n">VIR0021W</span> <span class="n">MODULE</span>
<span class="o">*</span> <span class="o">*</span> <span class="n">USER</span> <span class="n">SPECIFIC</span> <span class="o">-</span> <span class="n">IF</span> <span class="n">YOU</span> <span class="n">HAVE</span> <span class="n">VIR0021W</span><span class="p">,</span> <span class="n">YOU</span> <span class="n">SHOULD</span> <span class="n">UNCOMMENT</span> <span class="n">BELOW</span>
<span class="o">*</span>
<span class="o">********************************************************************</span>
<span class="o">*</span> <span class="n">PTF5369A</span> <span class="n">MVS453</span>
<span class="o">*</span> <span class="mi">5369</span><span class="n">A</span> <span class="n">COMPLEMENT</span> <span class="n">OF</span> <span class="n">PTF5369</span> <span class="o">-</span> <span class="n">USER</span> <span class="n">SPECIFIC</span>
<span class="o">*</span> <span class="n">PTF5369</span> <span class="n">IS</span> <span class="n">PRE</span><span class="o">-</span><span class="n">REQUISITE</span>
<span class="o">*</span> <span class="n">PTF</span> <span class="n">FOR</span> <span class="n">VIRTEL</span> <span class="n">VERSION</span> <span class="o">&gt;&gt;&gt;&gt;</span> <span class="mf">4.53</span> <span class="o">&lt;&lt;&lt;&lt;</span>
<span class="n">CHECKSUM</span>
<span class="n">NAME</span> <span class="n">VIR0021W</span>
<span class="n">VER</span> <span class="mi">0633</span> <span class="mi">1112</span><span class="p">,</span><span class="mi">00</span>
<span class="n">REP</span> <span class="mi">0633</span> <span class="mi">9192</span><span class="p">,</span><span class="mi">04</span>
<span class="n">IDRDATA</span> <span class="n">PTF5369A</span>
<span class="n">NAME</span> <span class="n">VIR0PTF</span>
<span class="n">VER</span> <span class="mi">0138</span> <span class="mi">00536900</span>
<span class="n">REP</span> <span class="mi">0138</span> <span class="mi">00536980</span>
<span class="n">IDRDATA</span> <span class="n">PTF5369A</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li>Run the following ARBO update job to add some definitions to support USSMSG10. Here we are adding new line/entry point/terminals/transaction definitions. <em>Change LOCADDR IP address!</em></li>
</ol>
<div class="highlight-default"><div class="highlight"><pre><span></span>//SPTHOLTA JOB 9000,&#39;UPGRADE&#39;,CLASS=A,MSGCLASS=X,NOTIFY=&amp;SYSUID,
// REGION=0M,RESTART=*
// SET LOAD=SPTHOLT.VIRT453.LOADLIB &lt;&lt; Change
// SET ARBO=SPTHOLT.VIRT453.ARBO &lt;&lt; Change
//*
//* SAMPLE JOB TO ENTRIES TO ARBO TO SUPPORT USSMSG10
//* PROCESSING
//*
//CONFIG EXEC PGM=VIRCONF,PARM=&#39;LOAD,REPL&#39;,COND=(4,LT)
//STEPLIB DD DSN=&amp;LOAD,DISP=SHR
//SYSPRINT DD SYSOUT=*
//SYSUDUMP DD SYSOUT=*
//VIRARBO DD DSN=&amp;ARBO,DISP=SHR
TERMINAL ID=EHLOC000, -
DESC=&#39;EH Psuedo Terminals&#39;, -
TYPE=3, -
COMPRESS=2, -
INOUT=3, -
REPEAT=0016
TERMINAL ID=EHVTA000, -
RELAY=*W2HPOOL, -
DESC=&#39;HTTP terminals (with relay)&#39;, -
TYPE=3, -
COMPRESS=2, -
INOUT=3, -
STATS=26, -
REPEAT=0016
LINE ID=E-HTTP, -
NAME=HTTP-EDS, -
LOCADDR=192.168.170.30:41003, -                                          &lt; Change this address!
DESC=&#39;HTTP line (entry point EDSHOST)&#39;, -
TERMINAL=EH, -
ENTRY=EDSHOST, -
TYPE=TCP1, -
INOUT=1, -
PROTOCOL=VIRHTTP, -
TIMEOUT=0000, -
ACTION=0, -
WINSZ=0000, -
PKTSZ=0000, -
RETRY=0010
ENTRY ID=EDSHOST, -
DESC=&#39;HTTP entry point (EDS application)&#39;, -
TRANSACT=EDS, -
TIMEOUT=0720, -
ACTION=0, -
EMUL=HTML, -
SIGNON=VIR0020H, -
MENU=VIR0021A, -
IDENT=SCENLOGM, -
EXTCOLOR=E
TRANSACT ID=EDS-00, -
NAME=EDSHOST, -
DESC=&#39;Default Directory&#39;, -
APPL=EDS-DIR, -
TYPE=4, -
TERMINAL=EHLOC, -
STARTUP=2, -
SECURITY=0, -
TIOASTA=&#39;w2h/WEB2AJAX.htm+VTAMUSS&#39;
TRANSACT ID=EDS-03W, -
NAME=&#39;w2h&#39;, -
DESC=&#39;W2H toolkit directory (/w2h)&#39;, -
APPL=W2H-DIR, -
TYPE=4, -
STARTUP=2, -
SECURITY=0
TRANSACT ID=EDS-16A, -
NAME=VTAMUSS, -
DESC=&#39;Logon through USSTAB&#39;, -
APPL=VIR0021W, -
TYPE=2, -
TERMINAL=EHVTA, -
STARTUP=1, -
SECURITY=1, -
LOGMSG=&#39;usstab=usloc00&#39;
</pre></div>
</div>
<ol class="arabic" start="7">
<li><p class="first">After the ARBO update, start VIRTEL and check out the new definitions. In the following example a new Line using port 41003 and entry point EDSHOST is created in order to separate general Virtel users from those who will be restricted to only applications supported by the USSTAB. The new Entry Points “TIOA at Logon” to redisplay the VTAM USS tab after a user exits an application. The Entry point is restricted to only three transactions.</p>
<p><a class="reference internal" href="../../../_images/image120.png"><img alt="image0" src="../../../_images/image120.png" style="width: 5.31250in; height: 3.06060in;" /></a></p>
</li>
</ol>
<p><em>Fig 1. - Line Entry</em></p>
<p>The related terminal pool should be defined with a definitions to support the LUs that will maintain sessions with the VTAM applications. The terminal pool definitions look like:-</p>
<blockquote>
<div><a class="reference internal" href="../../../_images/image219.png"><img alt="image1" src="../../../_images/image219.png" style="width: 5.33850in; height: 3.16667in;" /></a></div></blockquote>
<p><em>Fig 2. - Terminql definitions</em></p>
<p>The Entry Point definition looks like the following:-</p>
<blockquote>
<div><a class="reference internal" href="../../../_images/image317.png"><img alt="image2" src="../../../_images/image317.png" style="width: 5.29167in; height: 3.03219in;" /></a></div></blockquote>
<p><em>Fig 3. - Entry point definitions</em></p>
<p>The transactions that are supported by this entry point are listed below:-</p>
<blockquote>
<div><a class="reference internal" href="../../../_images/image411.png"><img alt="image3" src="../../../_images/image411.png" style="width: 5.33333in; height: 3.68063in;" /></a></div></blockquote>
<p><em>Fig 4. - Transaction list for the entry point</em></p>
<p>The first is the default transaction for the entry point – the same name as the entry point. Virtel, by default, will return here whenever we exit an application. To re-display the USSTAB we set the “TIOA at logon” field to point to the VTAMUSS transaction EDS-16A.</p>
<blockquote>
<div><a class="reference internal" href="../../../_images/image513.png"><img alt="image4" src="../../../_images/image513.png" style="width: 5.76517in; height: 3.34375in;" /></a></div></blockquote>
<p><em>Fig 5. - Entry Point Transaction</em></p>
<p>The second transaction, EDS-03W, is a transaction the enables VIRTEL to access the W2H directory from this entry point. This is required so that web elements can be served from the W2H directory. For example the HTML page “w2h/WEB2AJAX.htm”</p>
<blockquote>
<div><a class="reference internal" href="../../../_images/image619.png"><img alt="image5" src="../../../_images/image619.png" style="width: 5.75000in; height: 3.92804in;" /></a></div></blockquote>
<p><em>Fig 6. - Directory Transaction for w2h</em></p>
<blockquote>
<div><p>The third and final transaction in our entry point list is the
VTAMUSS transaction. It is this transaction that calls the VIR0021W
utility which interrogates the VTAM USSTAB load module and display a
similar page in HTML. The transaction definition looks like:-</p>
<p><a class="reference internal" href="../../../_images/image77.png"><img alt="image6" src="../../../_images/image77.png" style="width: 5.45833in; height: 3.72093in;" /></a></p>
</div></blockquote>
<p><em>Fig 7. - VTAMUSS transaction</em></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">“Security=1” is set which will force users to logon before the USSTAB is displayed. Change this to 0 if you wish to bypass this security check.</p>
</div>
<ol class="arabic" start="8">
<li><p class="first">From a browser access the VTAMUSS transaction. This can be from the VIRTEL Menu Screen or with a direct URL such as <a class="reference external" href="http://192.168.170.30:41003">http://192.168.170.30:41003</a>. By default the TIOA logon script associated with this entry point will call the VTAMUSS transaction which will then display the default USSTAB. This is just a sanity check to make sure that the VIR0021W module has been installed and is working correctly. See below for an example of the Virtel default USSTAB.</p>
<blockquote>
<div><p><a class="reference internal" href="../../../_images/image87.png"><img alt="image7" src="../../../_images/image87.png" style="width: 5.67708in; height: 3.77382in;" /></a></p>
</div></blockquote>
</li>
</ol>
<p><em>Fig 8. - Default USSTAB</em></p>
<ol class="arabic" start="9">
<li><p class="first">Access an application through the following command LOGON APPLID=application. For example LOGON APPLID=MYTSO. This should take you the application specified. On exiting the application you will be
returned to the VIRTEL menu and not the VTAM screen. This can be changed. See note 12.</p>
</li>
<li><p class="first">Update the VTAMUSS transaction in the Entry Point to pass the name of your USSTAB to VIR0021W. This is done by coding the following string in the logon field. See screen shot below:-</p>
<p><a class="reference internal" href="../../../_images/image95.png"><img alt="image8" src="../../../_images/image95.png" style="width: 5.59010in; height: 3.80208in;" /></a></p>
</li>
</ol>
<p><em>Fig 9. - Defining the USSTAB name in the transaction</em></p>
<p>Press PF1, PF3, PF3, PF1 to save the changes. The “usstab=ussn” string will be passed through to the VIRTEL application VIR0021W. This application will load the VTAM USSTAB, interrogate it and build the necessary template to display the USSMSG10 buffer in the browser.</p>
<ol class="arabic" start="11">
<li><p class="first">By reloading the <a class="reference external" href="http://192.168.170.30:41003">http://192.168.170.30:41003</a> URL again the USSVTAM transaction will display the VTAM USS table identified in the “usstab=” keyword. Here is an example of the USSTAB USSN that was specified in the Logon message field.</p>
<p><a class="reference internal" href="../../../_images/image105.png"><img alt="image9" src="../../../_images/image105.png" style="width: 5.46875in; height: 3.62927in;" /></a></p>
</li>
</ol>
<p><em>Fig 10. - USSN Example</em></p>
<ol class="arabic simple" start="12">
<li>If the default Virtel USSTAB appears than VIRTEL hasn’t be able to locate your USSTAB load module. Check that it is either concatenated into the VIRTEL steplib or copied into the VIRTEL load library. Check the Virtel log for any error messages.</li>
</ol>
<p><strong>Constraints</strong></p>
<p>VIR0021W attempts to simulate the functionality of USSMSG10 processing. It doesn’t distinguished between PL1 and BAL code strings. So, for example on the above USSTAB, you could enter LOGON APPLID(TSO) or LOGON
APPLID=TSO. Both would be accepted.</p>
<p>VIR0021W only supports USSMSG10 and has no error feedback provided by other USSMSG entries. Any error messages are written to the VIRTEL log.</p>
<p>Only buffer displacement coding is supported, not buffer addresse. For example to position to col. 1, row 1 the following should be coded:-</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">DC</span>    <span class="n">X</span><span class="s1">&#39;11&#39;</span><span class="p">,</span><span class="n">AL2</span><span class="p">(((</span><span class="mi">01</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">80</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="mi">01</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span> <span class="n">R</span><span class="o">=</span><span class="mi">01</span><span class="p">,</span><span class="n">C</span><span class="o">=</span><span class="mi">01</span> <span class="o">&lt;</span> <span class="n">Assembles</span> <span class="k">as</span> <span class="n">displacement</span>
<span class="n">DC</span>    <span class="n">C</span><span class="s1">&#39;z/OS Z110 Level 0809                    &#39;</span>
</pre></div>
</div>
<p>And not:-</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">DC</span>    <span class="n">X</span><span class="s1">&#39;114040’ R=01, C=01 &lt; Assembles as a row:col. Position</span>
<span class="n">DC</span>    <span class="n">C</span><span class="s1">&#39;z/OS Z110 Level 0809                    &#39;</span>
</pre></div>
</div>
<p>The SCAN parameter must be included on the BUFFER statement:-</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">MSG10</span>    <span class="n">USSMSG</span>  <span class="n">MSG</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">BUFFER</span><span class="o">=</span><span class="p">(</span><span class="n">MSG10BUF</span><span class="p">,</span><span class="n">SCAN</span><span class="p">)</span>
</pre></div>
</div>
<p>The cursor position must be preceded by a SBA:-</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">DC</span>    <span class="n">X</span><span class="s1">&#39;11&#39;</span><span class="p">,</span><span class="n">AL2</span><span class="p">(((</span><span class="mi">24</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">80</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="mi">10</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>                 <span class="n">R</span><span class="o">=</span><span class="mi">23</span><span class="p">,</span><span class="n">C</span><span class="o">=</span><span class="mi">80</span>
<span class="n">DC</span>    <span class="n">X</span><span class="s1">&#39;1D40&#39;</span>                                     <span class="n">UNPROTECTED</span>
<span class="n">DC</span>    <span class="n">X</span><span class="s1">&#39;13&#39;</span>                                      <span class="n">INSERTCURSOR</span>
</pre></div>
</div>
<p><strong>Messages</strong></p>
<p><strong>VIR2101E</strong> UNABLE TO LOAD A USSTAB</p>
<p>Module  : VIR0021W</p>
<p>Meaning : Virtel was unable to build a MAP from the supplied USS load module.</p>
<p>Action  : Check the VTAM USS module has been assembled correctly and is available in the VIRTEL STEPLIB concatenation. See the topic on constraints for further information.</p>
<p><strong>VIR2102W</strong> UNABLE TO LOAD THE [TCT | TRANSACTION] USSTAB usstab. DEFAULT USSTAB USSVIRT WILL BE USED.</p>
<p>Module  : VIR0021W</p>
<p>Meaning : Virtel was unable to load the USS table as defined either in the transaction or TCT.</p>
<p>Action  : Check that the correct USSTAB has be defined and that the relevant load module is accessible through the VIRTEL STEPLIB concatenation.</p>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../TN201520/TN201520.html" class="btn btn-neutral float-right" title="Using the IBM System Logger with Virtel" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../TN201517/TN201517.html" class="btn btn-neutral" title="Virtel Chinese Character Language Support" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Syspertec. All rights reserved.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>
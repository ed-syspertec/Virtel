

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Controlling LU Names &mdash; Virtel 7 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="CICS Printing" href="../TN201605/TN201605.html" />
    <link rel="prev" title="Field Level Encryption" href="../TN201603/TN201603.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> Virtel
          

          
            
            <img src="../../../_static/logo_virtel_web.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                4.57
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../virtel.html">Virtel Manuals</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../newsletters.html">Technical Newsletters</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id1">2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id2">2015</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../newsletters.html#id3">2016</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../TN201601/TN201601.html">Customizing colours with CSS in Virtel 4.53</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201602/TN201602.html">Installing Virtel V4.53 from scratch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201603/TN201603.html">Field Level Encryption</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Controlling LU Names</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201605/TN201605.html">CICS Printing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201606/TN201606.html">Virtel Screen Redesigner in action</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201607/TN201607.html">What’s new in Virtel 4.56 (September 2016)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201608/TN201608.html">Installing Virtel V4.56 from scratch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201609/TN201609.html">Nailing LUS with an Identification scenario</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201611/TN201611.html">Customizing Virtel in V4.56</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id4">2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id5">2018</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id6">2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id7">2020</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Virtel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../newsletters.html">Technical Newsletters</a> &raquo;</li>
        
      <li>Controlling LU Names</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/manuals/newsletters/TN201604/TN201604.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="controlling-lu-names">
<span id="tn201604"></span><h1>Controlling LU Names<a class="headerlink" href="#controlling-lu-names" title="Permalink to this headline">¶</a></h1>
<p>When a user connects to a 3270 application through VIRTEL Web Access,
VIRTEL makes it appear to the application as if the user is connecting
from a virtual 3270 terminal. In VTAM terms a virtual 3270 terminal is
called a <em>Logical Unit</em> or <em>LU</em>, and each LU has a unique eight
character name (<em>LU name)</em>. VIRTEL has at its disposal a pool of LUs
known to VTAM, whose names are specified in the VIRTEL configuration
file (the VIRARBO file). Normally when a user connects to a 3270
application, VIRTEL chooses any available LU from the pool.</p>
<p>While most mainframe applications will accept a connection from any LU
name, certain applications (particularly applications which run under
IMS) are sensitive to the LU name because they assign permissions to the
user based upon the LU name of the user’s terminal. LU nailing allows
VIRTEL to assign a particular LU name to a user based upon the user’s IP
address or upon a cookie presented by the user’s browser.</p>
<p>This document describes the following types of LU nailing:</p>
<ul class="simple">
<li>LU nailing by work station name</li>
<li>LU nailing by LU (Pre-defined terminal)</li>
<li>LU nailing by LU (Non-predefined terminal)</li>
<li>LU nailing by IP address</li>
<li>LU nailing by cookie</li>
<li>LU nailing by URL</li>
</ul>
<p><strong>1. LU nailing using a work station name (Predefined terminals)</strong></p>
<p>In this example we use a batch job on the user’s PC to initiate a
session with Virtel. The batch job obtains the terminal name of the work
station, opens a browser window and passes the work station name through
to Virtel. With a Virtel RULE we can test the name of the workstation
and assign a particular relay LUNAME from a Virtel terminal POOL.</p>
<p>Here is an example of a Virtel RULE.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">RULE</span> <span class="n">ID</span><span class="o">=</span><span class="n">ESH0000</span><span class="p">,</span>
<span class="n">RULESET</span><span class="o">=</span><span class="n">E</span><span class="o">-</span><span class="n">HTTP</span><span class="p">,</span>
<span class="n">STATUS</span><span class="o">=</span><span class="n">ACTIVE</span><span class="p">,</span>
<span class="n">DESC</span><span class="o">=</span><span class="s1">&#39;Rule for terminal EHPMA00&#39;</span><span class="p">,</span>
<span class="n">ENTRY</span><span class="o">=</span><span class="n">EDSWHOST</span><span class="p">,</span>
<span class="n">PARAM</span><span class="o">=</span><span class="n">EHPMA000</span><span class="p">,</span> <span class="o">/*</span> <span class="n">Or</span> <span class="n">EHPMA00</span><span class="o">*</span> <span class="o">*/</span>
<span class="n">NETMASK</span><span class="o">=</span><span class="mf">255.255</span><span class="o">.</span><span class="mf">255.255</span><span class="p">,</span>
<span class="n">USERDATA</span><span class="o">=</span><span class="p">(</span><span class="n">EQUAL</span><span class="p">,</span><span class="n">HOLT</span><span class="o">-</span><span class="n">W</span><span class="p">)</span>
</pre></div>
</div>
<p>The rule instructs Virtel to test the user data field passed in a URL
and if it matches the string HOLT-W than to assign an LU name prefix of
EHPMA00 and direct the terminal call to use an entry point of EDSWHOST.
A static rule would have to be built for each unique work station name.</p>
<p>Our EDSWHOST entry point looks like:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ENTRY</span> <span class="n">ID</span><span class="o">=</span><span class="n">EDSWHOST</span><span class="p">,</span> <span class="o">-</span>
<span class="n">DESC</span><span class="o">=</span><span class="s1">&#39;EDS WEB ENTRY POINT (USERS WITH USERDATA)&#39;</span><span class="p">,</span> <span class="o">-</span>
<span class="n">TRANSACT</span><span class="o">=</span><span class="n">EDSW</span><span class="p">,</span> <span class="o">-</span>
<span class="n">TIMEOUT</span><span class="o">=</span><span class="mi">0720</span><span class="p">,</span> <span class="o">-</span>
<span class="n">ACTION</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span>
<span class="n">EMUL</span><span class="o">=</span><span class="n">HTML</span><span class="p">,</span> <span class="o">-</span>
<span class="n">SIGNON</span><span class="o">=</span><span class="n">VIR0020H</span><span class="p">,</span> <span class="o">-</span>
<span class="n">MENU</span><span class="o">=</span><span class="n">VIR0021A</span><span class="p">,</span> <span class="o">-</span>
<span class="n">EXTCOLOR</span><span class="o">=</span><span class="n">X</span><span class="p">,</span> <span class="o">-</span>
<span class="n">ENDPAGE</span><span class="o">=</span><span class="n">CLOSE</span><span class="o">.</span><span class="n">HTM</span>
</pre></div>
</div>
<p>In this entry point you would define the relevant transactions. In our
case we have defined the following:-</p>
<ul class="simple">
<li>Entry point transaction</li>
<li>Transaction to access the /w2h directory</li>
<li>A VTAM transaction for IMS</li>
<li>A VTAM transaction for TSO</li>
<li>A Virtel application transaction to support an application menu list.</li>
</ul>
<p>We reuse the EHLOC terminals that already exist for this line, but we
will need to define a unique pool for our VTAM applications. This is
prefixed with the EHVTS id:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TRANSACT</span> <span class="n">ID</span><span class="o">=</span><span class="n">EDSW</span><span class="o">-</span><span class="mi">00</span><span class="p">,</span> <span class="o">-</span>
<span class="n">NAME</span><span class="o">=</span><span class="n">EDSWHOST</span><span class="p">,</span> <span class="o">-</span>
<span class="n">DESC</span><span class="o">=</span><span class="s1">&#39;HTML page directory (default access)&#39;</span><span class="p">,</span> <span class="o">-</span>
<span class="n">APPL</span><span class="o">=</span><span class="n">W2H</span><span class="o">-</span><span class="n">DIR</span><span class="p">,</span> <span class="o">-</span>
<span class="n">TYPE</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span>
<span class="n">TERMINAL</span><span class="o">=</span><span class="n">EHLOC</span><span class="p">,</span> <span class="o">-</span>
<span class="n">STARTUP</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span>
<span class="n">SECURITY</span><span class="o">=</span><span class="mi">0</span>
<span class="n">TRANSACT</span> <span class="n">ID</span><span class="o">=</span><span class="n">EDSW</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="o">-</span>
<span class="n">NAME</span><span class="o">=</span><span class="s1">&#39;w2h&#39;</span><span class="p">,</span> <span class="o">-</span>
<span class="n">DESC</span><span class="o">=</span><span class="s1">&#39;W2H toolkit directory (/w2h)&#39;</span><span class="p">,</span> <span class="o">-</span>
<span class="n">APPL</span><span class="o">=</span><span class="n">W2H</span><span class="o">-</span><span class="n">DIR</span><span class="p">,</span> <span class="o">-</span>
<span class="n">TYPE</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span>
<span class="n">TERMINAL</span><span class="o">=</span><span class="n">EHLOC</span><span class="p">,</span> <span class="o">-</span>
<span class="n">STARTUP</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span>
<span class="n">SECURITY</span><span class="o">=</span><span class="mi">0</span>
<span class="n">TRANSACT</span> <span class="n">ID</span><span class="o">=</span><span class="n">EDSW</span><span class="o">-</span><span class="mi">41</span><span class="p">,</span> <span class="o">-</span>
<span class="n">NAME</span><span class="o">=</span><span class="n">IMS</span><span class="p">,</span> <span class="o">-</span>
<span class="n">DESC</span><span class="o">=</span><span class="s1">&#39;IMS access with userdata&#39;</span><span class="p">,</span> <span class="o">-</span>
<span class="n">APPL</span><span class="o">=</span><span class="n">IMS3270</span><span class="p">,</span> <span class="o">-</span>
<span class="n">PASSTCKT</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span>
<span class="n">TYPE</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span>
<span class="n">TERMINAL</span><span class="o">=</span><span class="n">EHVTS</span><span class="p">,</span> <span class="o">-</span>
<span class="n">STARTUP</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span>
<span class="n">SECURITY</span><span class="o">=</span><span class="mi">0</span>
<span class="n">TRANSACT</span> <span class="n">ID</span><span class="o">=</span><span class="n">EDSW</span><span class="o">-</span><span class="mi">42</span><span class="p">,</span> <span class="o">-</span>
<span class="n">NAME</span><span class="o">=</span><span class="n">TSO</span><span class="p">,</span> <span class="o">-</span>
<span class="n">DESC</span><span class="o">=</span><span class="s1">&#39;TSO access with userdata&#39;</span><span class="p">,</span> <span class="o">-</span>
<span class="n">APPL</span><span class="o">=</span><span class="n">TSO</span><span class="p">,</span> <span class="o">-</span>
<span class="n">PASSTCKT</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span>
<span class="n">TYPE</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span>
<span class="n">TERMINAL</span><span class="o">=</span><span class="n">EHVTS</span><span class="p">,</span> <span class="o">-</span>
<span class="n">STARTUP</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span>
<span class="n">SECURITY</span><span class="o">=</span><span class="mi">0</span>
<span class="n">TRANSACT</span> <span class="n">ID</span><span class="o">=</span><span class="n">EDSW</span><span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="o">-</span>
<span class="n">NAME</span><span class="o">=</span><span class="s1">&#39;applist&#39;</span><span class="p">,</span> <span class="o">-</span>
<span class="n">DESC</span><span class="o">=</span><span class="s1">&#39;List of applications for appmenu.htm&#39;</span><span class="p">,</span> <span class="o">-</span>
<span class="n">APPL</span><span class="o">=</span><span class="n">VIR0021S</span><span class="p">,</span> <span class="o">-</span>
<span class="n">TYPE</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span>
<span class="n">TERMINAL</span><span class="o">=</span><span class="n">EHLOC</span><span class="p">,</span> <span class="o">-</span>
<span class="n">STARTUP</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span>
<span class="n">SECURITY</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<p>In VTAM we would have the following definition:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">*</span> <span class="o">------------------------------------------------------------------</span> <span class="o">*</span>
<span class="o">*</span> <span class="n">LU</span> <span class="n">Test</span> <span class="p">:</span> <span class="n">VTAM</span> <span class="n">application</span> <span class="n">relays</span> <span class="k">with</span> <span class="n">user</span> <span class="n">data</span><span class="o">.</span>                  <span class="o">*</span>
<span class="o">*</span> <span class="o">------------------------------------------------------------------</span> <span class="o">*</span>
<span class="n">EHPMA000</span> <span class="n">APPL</span> <span class="n">AUTH</span><span class="o">=</span><span class="p">(</span><span class="n">ACQ</span><span class="p">,</span><span class="n">PASS</span><span class="p">),</span><span class="n">MODETAB</span><span class="o">=</span><span class="n">ISTINCLM</span><span class="p">,</span><span class="n">DLOGMOD</span><span class="o">=</span><span class="n">SNX32702</span><span class="p">,</span><span class="n">EAS</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<p>Or for the model EHPMA00?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>* ------------------------------------------------------------------ *
* LU Test : VTAM application relays with user data.                  *
* ------------------------------------------------------------------ *
EHPMA00? APPL AUTH=(ACQ,PASS),MODETAB=ISTINCLM,DLOGMOD=SNX32702,EAS=1
</pre></div>
</div>
<p>We also need a terminal and pool definition. Here is the pool definition:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>TERMINAL ID=EHPMA000, -
RELAY=EHPMA000, /* Or EHPMA00* */ -
POOL=*STAPOOL, -
DESC=&#39;Terminal definition for EHPMA000&#39;, -
TYPE=3, -
COMPRESS=2, -
INOUT=3, -
STATS=26, -
REPEAT=\ **0001 **
…and a pool definition for out static pool:-
TERMINAL ID=EHVTS000, -
RELAY=*STAPOOL, -
DESC=&#39;Static definition pool&#39;, -
TYPE=3, -
COMPRESS=2, -
INOUT=3, -
STATS=26, -
REPEAT=0010
</pre></div>
</div>
<p>This setup will support up to 10 predefined terminal definitions. For
each terminal we have to provide a static definition. Of course we could
have used a generic terminal definition of EHPMA00* but this would only
work for numerically sequenced terminal names – EHPMA000 – EHPMA009.</p>
<p>Getting the PC workstation name to Virtel is through a batch job which
fires up the default browser and passes the work station name as a user
data parameter. Here is an example:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">title</span> <span class="n">Test</span> <span class="n">Propagation</span> <span class="n">of</span> <span class="n">Userdata</span> <span class="n">Parameter</span>
<span class="nd">@echo</span> <span class="n">on</span>
<span class="n">color</span> <span class="mi">1</span><span class="n">f</span>
<span class="bp">cls</span>
<span class="n">SET</span> <span class="n">P1</span><span class="o">=%</span><span class="n">COMPUTERNAME</span><span class="p">:</span><span class="o">~</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="o">%</span>
<span class="n">start</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">170.33</span><span class="p">:</span><span class="mi">41003</span><span class="o">/</span><span class="n">w2h</span><span class="o">/</span><span class="n">appmenu</span><span class="o">.</span><span class="n">htm</span><span class="o">+</span><span class="n">applist</span><span class="o">+%</span><span class="n">P1</span><span class="o">%</span> <span class="o">&amp;</span><span class="n">goto</span><span class="p">:</span><span class="n">eof</span>
<span class="p">:</span><span class="n">exit</span>
</pre></div>
</div>
<p>The SET command takes the first six characters of the work station name
and passes it into the start command. Following the Virtel transaction I
wish to execute which in this case is an APPLIST menu list.</p>
<p>The start command will open a default browser window and connect to
Virtel:-</p>
<p><a class="reference internal" href="../../../_images/image128.png"><img alt="image0" src="../../../_images/image128.png" style="width: 5.16667in; height: 3.98405in;" /></a></p>
<p>Figure 1 Passing User Data toVirtel</p>
<p>When a transaction is selected from the menu list the RULE will be
invoked to allocate the correct LUNAME.</p>
<p><a class="reference internal" href="../../../_images/image216.png"><img alt="image1" src="../../../_images/image216.png" style="width: 5.16667in; height: 3.93654in;" /></a></p>
<p>Figure 2 Selecting a LU name through a rule and work station id in the
URL</p>
<p>The Virtel RULE has forced an LU name prefixed EHPMA000 to be used from
the VIRTEL terminal pool associated with the Virtel line. In this case
relay LUNAME EHPMA000 has been allocated.</p>
<p>In the VTAM display we can see that a session has been set up using that
LU name:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>D NET,ID=EHPMA000,E
IST097I DISPLAY ACCEPTED
IST075I NAME = SPNET.\ **EHPMA000**, TYPE = DYNAMIC APPL 073
IST486I STATUS= ACT/S, DESIRED STATE= ACTIV
IST1447I REGISTRATION TYPE = CDSERVR
IST1629I MODSRCH = NEVER
IST977I MDLTAB=***NA*** ASLTAB=***NA***
IST861I MODETAB=ISTINCLM USSTAB=***NA*** LOGTAB=***NA***
IST934I DLOGMOD=SNX32702 USS LANGTAB=***NA***
IST1632I VPACING = 7
IST1938I APPC = NO
IST597I CAPABILITY-PLU ENABLED ,SLU ENABLED ,SESSION LIMIT NONE
IST231I APPL MAJOR NODE = APPLSPEH
IST1425I DEFINED USING MODEL EHPMA???
IST654I I/O TRACE = OFF, BUFFER TRACE = OFF
IST1500I STATE TRACE = OFF
IST271I JOBNAME = SPVIREH, STEPNAME = SPVIREH, DSPNAME = IST217EE
IST228I ENCRYPTION = OPTIONAL , TYPE = DES
IST1563I CKEYNAME = EHPMA000 CKEY = PRIMARY CERTIFY = NO
IST1552I MAC = NONE MACTYPE = NONE
IST1050I MAXIMUM COMPRESSION LEVEL - INPUT = 0, OUTPUT = 0
IST1633I ASRCVLM = 1000000
IST1634I DATA SPACE USAGE: CURRENT = 0 MAXIMUM = 0
IST1669I IPADDR..PORT 192.168.92.65..50027
IST171I ACTIVE SESSIONS = 0000000001, SESSION REQUESTS = 0000000000
IST206I SESSIONS:
IST634I NAME STATUS SID SEND RECV VR TP NETID
IST635I **TSO1A005** ACTIV-P CA7B8B52114E7A85 0000 0002 SPNET
IST314I END
</pre></div>
</div>
<p><strong>2. Lu nailing using an LUNAME (Predefined terminal).</strong></p>
<p>Instead of passing a work station name in the user data field of the URL
in this example we are passing an LU name. Again with a Virtel RULE we
can extract the user data parameter from the URL and use that as the
Virtel relay LUNAME name. For this example the rule looks like:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>RULE ID=ESH0001,

RULESET=E-HTTP,

STATUS=ACTIVE,

DESC=&#39;Rule for terminal EHPMA00&#39;,

ENTRY=EDSWHOST,

PARAM=$URL$,

NETMASK=255.255.255.255
</pre></div>
</div>
<p>We use the special PARAM=$URL$ which indicates that the VTAM LU Name to be used is the user data passed in the URL.</p>
<p><a class="reference internal" href="../../../_images/image317.png"><img alt="image2" src="../../../_images/image317.png" style="width: 6.26806in; height: 4.76736in;" /></a></p>
<p>Figure 3Using $URL$ to pass a LU name in the URL.</p>
<p>The user data in the URL, in this case EHPMA00*, will be added to each
transaction in the APPLIST menu and used as the Virtel relay LUNAME.
When connecting to an application VIRTEL will use the LU name defined in
the URL. In this example we are using a generic LUNAME (This could
support a range from EHPMA000 through to EHPMA009.</p>
<p><strong>3. Lu Nailing using an LU Name (No predefined terminal).</strong></p>
<p>Both of the above techniques require that a relay terminal be predefined
for each terminal. For some installations this could be a maintenance
headache and doesn’t scale up very well. Virtel provides a feature
whereby predefined names are not necessary. In this next example we look
at a technique that doesn’t require terminal predefinition. Virtel will
grab a terminal entry from a pool and use the LU name passed in the URL
as the relay LU name. To use this setup certain conditions must be in
place. Also note that no rules are required. The definitions required
are:-</p>
<ul class="simple">
<li>The HTTP Line that must specify a pool name.</li>
<li>A pool name needs to be defined.</li>
<li>Transactions must specify $LINE$ in the “Pseudo-terminals” field.</li>
</ul>
<p>Here is the line definition:-</p>
<p><a class="reference internal" href="../../../_images/image414.png"><img alt="image3" src="../../../_images/image414.png" style="width: 4.66650in; height: 3.16667in;" /></a></p>
<p>Figure 4 Line definition for non-predefined LU names.</p>
<p>And the Pool definition:-</p>
<p><a class="reference internal" href="../../../_images/image512.png"><img alt="image4" src="../../../_images/image512.png" style="width: 4.68750in; height: 3.15287in;" /></a></p>
<p>Figure 5 Pool definition for non-predefined LU Names</p>
<p>And an example of a transaction definition. Note that the
Psuedo-Terminal is defined as $LINE$. We have also assign a printer
definition to this setup. So if our LU relay name was HOLTWIN7 then our
associated printer LU would be HOLTWINP.</p>
<p><a class="reference internal" href="../../../_images/image611.png"><img alt="image5" src="../../../_images/image611.png" style="width: 4.82292in; height: 3.24663in;" /></a></p>
<p>Figure 6 Transaction definition for non-predefined LU Names</p>
<p>Accessing the transaction TSOF would be through the following URL
forcing the relay LU NAME to HOLTWIN7. We would still have to define a
terminal pool for *DYNPOOL, but we avoid having to define individual
terminal definitions, or ranges of, for every static terminals.</p>
<p><a class="reference internal" href="../../../_images/image79.png"><img alt="image6" src="../../../_images/image79.png" style="width: 6.06250in; height: 4.59154in;" /></a></p>
<p>Figure 7 Access a Transaction with the ForceLUNAME parameter.</p>
<p><strong>4. LU Nailing using a cookie (Correspondent Sub Application)</strong></p>
<p>Virtel also can use cookies to select a relay LU name. Virtel uses a
cookie as a part of the “Correspondence Sub Application’. Within the
cookie sent to Virtel is a security token. This token is used to
identify a user and their associated VTAM LU relay name. A Correspondent
file is used to maintain the user details. The cookie can be sent to the
use as part of an Email from which the User selects a link to access
Virtel or it can be part of the ‘self-registration’ process. For further
information see <em>Virtel – How to Activate LU Nailing.</em></p>
<p><strong>5. LU Nailing by IP</strong></p>
<p>This technique uses a rule to associate an IP address with an LU Name.
The rule is associated with a line. In the example below we define a
rule on line W-HTTP which will force a terminal connecting with IP
address 192.168.000.039 to use LU name RHTVT001. The LU name must be
pre-defined in a Virtel terminal pool.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DETAIL</span> <span class="n">of</span> <span class="n">RULE</span> <span class="kn">from</span> <span class="nn">RULE</span> <span class="n">SET</span><span class="p">:</span> <span class="n">W</span><span class="o">-</span><span class="n">HTTP</span> <span class="o">-------------</span> <span class="n">Applid</span><span class="p">:</span> <span class="n">SPVIRBW</span>     <span class="mi">14</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">38</span>
<span class="n">Name</span> <span class="o">===&gt;</span> <span class="n">WHT00110</span> <span class="n">Rule</span> <span class="n">priority</span> <span class="ow">is</span> <span class="n">per</span> <span class="n">name</span>
<span class="n">Status</span> <span class="o">===&gt;</span> <span class="n">ACTIVE</span> <span class="mi">15</span> <span class="n">Feb</span> <span class="mi">2010</span> <span class="mi">14</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">35</span> <span class="n">SPTBOWL</span>
<span class="n">Description</span> <span class="o">===&gt;</span> <span class="n">HTTP</span> <span class="n">access</span> <span class="kn">from</span> <span class="nn">IP</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">0.39</span>
<span class="n">Entry</span> <span class="n">point</span> <span class="o">===&gt;</span> <span class="n">WEB2HOST</span> <span class="n">Target</span> <span class="n">Entry</span> <span class="n">Point</span>
<span class="n">Parameter</span> <span class="o">===&gt;</span> <span class="n">RHTVT001</span> <span class="o">&amp;</span><span class="mi">1</span> <span class="n">value</span> <span class="ow">or</span> <span class="n">LUNAME</span>
<span class="n">Trace</span> <span class="o">===&gt;</span> <span class="mi">1</span><span class="o">=</span><span class="n">commands</span> <span class="mi">2</span><span class="o">=</span><span class="n">data</span> <span class="mi">3</span><span class="o">=</span><span class="n">partner</span>
<span class="n">C</span> <span class="p">:</span> <span class="mi">0</span><span class="o">=</span><span class="n">IGNORE</span> <span class="mi">1</span><span class="o">=</span><span class="n">IS</span> <span class="mi">2</span><span class="o">=</span><span class="n">IS</span> <span class="n">NOT</span> <span class="mi">3</span><span class="o">=</span><span class="n">STARTS</span> <span class="n">WITH</span> <span class="mi">4</span><span class="o">=</span><span class="n">DOES</span> <span class="n">NOT</span> <span class="mi">5</span><span class="o">=</span><span class="n">ENDS</span> <span class="n">WITH</span> <span class="mi">6</span><span class="o">=</span><span class="n">DOES</span> <span class="n">NOT</span>
<span class="mi">1</span> <span class="n">IP</span> <span class="n">Subnet</span> <span class="o">===&gt;</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">000.039</span> <span class="n">Mask</span> <span class="o">===&gt;</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.255</span>
<span class="mi">0</span> <span class="n">Host</span> <span class="o">===&gt;</span>
<span class="mi">0</span> <span class="n">eMail</span> <span class="o">===&gt;</span>
<span class="mi">0</span> <span class="n">Calling</span> <span class="n">DTE</span> <span class="o">===&gt;</span> <span class="n">Calling</span> <span class="n">DTE</span> <span class="n">address</span> <span class="ow">or</span> <span class="n">proxy</span>
<span class="mi">0</span> <span class="n">Called</span> <span class="o">===&gt;</span> <span class="n">Called</span> <span class="n">DTE</span> <span class="n">address</span>
<span class="mi">0</span> <span class="n">CUD0</span> <span class="p">(</span><span class="n">Hex</span><span class="p">)</span> <span class="o">===&gt;</span> <span class="n">First</span> <span class="mi">4</span> <span class="nb">bytes</span> <span class="n">of</span> <span class="n">CUD</span> <span class="p">(</span><span class="n">X25</span> <span class="n">protocol</span><span class="p">)</span>
<span class="mi">0</span> <span class="n">User</span> <span class="n">Data</span> <span class="o">===&gt;</span>
<span class="mi">0</span> <span class="n">Days</span> <span class="o">===&gt;</span> <span class="n">M</span><span class="p">:</span> <span class="n">T</span><span class="p">:</span> <span class="n">W</span><span class="p">:</span> <span class="n">T</span><span class="p">:</span> <span class="n">F</span><span class="p">:</span> <span class="n">S</span><span class="p">:</span> <span class="n">S</span><span class="p">:</span>
<span class="mi">0</span> <span class="n">Start</span> <span class="n">time</span> <span class="o">===&gt;</span> <span class="n">H</span><span class="p">:</span> <span class="n">M</span><span class="p">:</span> <span class="n">S</span><span class="p">:</span> <span class="n">End</span> <span class="n">time</span> <span class="o">===&gt;</span> <span class="n">H</span><span class="p">:</span> <span class="n">M</span><span class="p">:</span> <span class="n">S</span><span class="p">:</span>
<span class="n">P1</span><span class="o">=</span><span class="n">Update</span> <span class="n">P3</span><span class="o">=</span><span class="n">Return</span> <span class="n">Enter</span><span class="o">=</span><span class="n">Add</span>
<span class="n">P4</span><span class="o">=</span><span class="n">Activate</span> <span class="n">P5</span><span class="o">=</span><span class="n">Inactivate</span> <span class="n">P12</span><span class="o">=</span><span class="n">Entry</span> <span class="n">P</span><span class="o">.</span>
</pre></div>
</div>
<p><em>Figure 7 Rule to map IP address 192.168.100.nnn to LU pool RHTVT1xx</em></p>
<p>Multiple terminals can be defined with a rule by using the * suffix. In
the following example a range of IP address is mapped to a pool of LU
names. Address range 192.168.100.0 through to 192.168.100.255 will be
assigned the next unused LU name in the range RHTVT1xx.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DETAIL</span> <span class="n">of</span> <span class="n">RULE</span> <span class="kn">from</span> <span class="nn">RULE</span> <span class="n">SET</span><span class="p">:</span> <span class="n">W</span><span class="o">-</span><span class="n">HTTP</span> <span class="o">-------------</span> <span class="n">Applid</span><span class="p">:</span> <span class="n">SPVIRBW</span>     <span class="mi">17</span><span class="p">:</span><span class="mi">53</span><span class="p">:</span><span class="mi">56</span>
<span class="n">Name</span> <span class="o">===&gt;</span> <span class="n">WHT00140</span> <span class="n">Rule</span> <span class="n">priority</span> <span class="ow">is</span> <span class="n">per</span> <span class="n">name</span>
<span class="n">Status</span> <span class="o">===&gt;</span> <span class="n">ACTIVE</span> <span class="mi">15</span> <span class="n">Feb</span> <span class="mi">2010</span> <span class="mi">17</span><span class="p">:</span><span class="mi">53</span><span class="p">:</span><span class="mi">49</span> <span class="n">SPTBOWL</span>
<span class="n">Description</span> <span class="o">===&gt;</span> <span class="n">HTTP</span> <span class="n">access</span> <span class="kn">from</span> <span class="nn">IP</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">100.</span><span class="n">nnn</span>
<span class="n">Entry</span> <span class="n">point</span> <span class="o">===&gt;</span> <span class="n">WEB2HOST</span> <span class="n">Target</span> <span class="n">Entry</span> <span class="n">Point</span>
<span class="n">Parameter</span> <span class="o">===&gt;</span> <span class="n">RHTVT1</span><span class="o">*</span> <span class="o">&amp;</span><span class="mi">1</span> <span class="n">value</span> <span class="ow">or</span> <span class="n">LUNAME</span>
<span class="n">Trace</span> <span class="o">===&gt;</span> <span class="mi">1</span><span class="o">=</span><span class="n">commands</span> <span class="mi">2</span><span class="o">=</span><span class="n">data</span> <span class="mi">3</span><span class="o">=</span><span class="n">partner</span>
<span class="n">C</span> <span class="p">:</span> <span class="mi">0</span><span class="o">=</span><span class="n">IGNORE</span> <span class="mi">1</span><span class="o">=</span><span class="n">IS</span> <span class="mi">2</span><span class="o">=</span><span class="n">IS</span> <span class="n">NOT</span> <span class="mi">3</span><span class="o">=</span><span class="n">STARTS</span> <span class="n">WITH</span> <span class="mi">4</span><span class="o">=</span><span class="n">DOES</span> <span class="n">NOT</span> <span class="mi">5</span><span class="o">=</span><span class="n">ENDS</span> <span class="n">WITH</span> <span class="mi">6</span><span class="o">=</span><span class="n">DOES</span> <span class="n">NOT</span>
<span class="mi">1</span> <span class="n">IP</span> <span class="n">Subnet</span> <span class="o">===&gt;</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">100.000</span> <span class="n">Mask</span> <span class="o">===&gt;</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.000</span>
<span class="mi">0</span> <span class="n">Host</span> <span class="o">===&gt;</span>
<span class="mi">0</span> <span class="n">eMail</span> <span class="o">===&gt;</span>
<span class="mi">0</span> <span class="n">Calling</span> <span class="n">DTE</span> <span class="o">===&gt;</span> <span class="n">Calling</span> <span class="n">DTE</span> <span class="n">address</span> <span class="ow">or</span> <span class="n">proxy</span>
<span class="mi">0</span> <span class="n">Called</span> <span class="o">===&gt;</span> <span class="n">Called</span> <span class="n">DTE</span> <span class="n">address</span>
<span class="mi">0</span> <span class="n">CUD0</span> <span class="p">(</span><span class="n">Hex</span><span class="p">)</span> <span class="o">===&gt;</span> <span class="n">First</span> <span class="mi">4</span> <span class="nb">bytes</span> <span class="n">of</span> <span class="n">CUD</span> <span class="p">(</span><span class="n">X25</span> <span class="n">protocol</span><span class="p">)</span>
<span class="mi">0</span> <span class="n">User</span> <span class="n">Data</span> <span class="o">===&gt;</span>
<span class="mi">0</span> <span class="n">Days</span> <span class="o">===&gt;</span> <span class="n">M</span><span class="p">:</span> <span class="n">T</span><span class="p">:</span> <span class="n">W</span><span class="p">:</span> <span class="n">T</span><span class="p">:</span> <span class="n">F</span><span class="p">:</span> <span class="n">S</span><span class="p">:</span> <span class="n">S</span><span class="p">:</span>
<span class="mi">0</span> <span class="n">Start</span> <span class="n">time</span> <span class="o">===&gt;</span> <span class="n">H</span><span class="p">:</span> <span class="n">M</span><span class="p">:</span> <span class="n">S</span><span class="p">:</span> <span class="n">End</span> <span class="n">time</span> <span class="o">===&gt;</span> <span class="n">H</span><span class="p">:</span> <span class="n">M</span><span class="p">:</span> <span class="n">S</span><span class="p">:</span>
<span class="n">P1</span><span class="o">=</span><span class="n">Update</span> <span class="n">P3</span><span class="o">=</span><span class="n">Return</span> <span class="n">Enter</span><span class="o">=</span><span class="n">Add</span>  <span class="n">P4</span><span class="o">=</span><span class="n">Activate</span> <span class="n">P5</span><span class="o">=</span><span class="n">Inactivate</span> <span class="n">P12</span><span class="o">=</span><span class="n">Entry</span> <span class="n">P</span><span class="o">.</span>
</pre></div>
</div>
<p><em>Figure 8 Rule to map IP address 192.168.100.nnn to LU pool RHTVT1xx</em></p>
<p>The new rule is named WHT00140, the “IP Subnet” field specifies the IP
address 192.168.100.000, and the “Mask” is set to 255.255.255.000 to
indicate that only the first three octets of the IP address are tested
to determine whether the rule matches the IP address of the client
browser. The “parameter” field specifies a generic LU name RHTVT1*
which signifies that any LU whose name begins with RHTVT1 may be
assigned to clients whose IP address matches this rule.</p>
<p><strong>Comparison Table</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="20%" />
<col width="21%" />
<col width="8%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">RULE DEFN</th>
<th class="head">TERMINAL DEFN.</th>
<th class="head"><p class="first">COOKIES</p>
<p class="last">USED</p>
</th>
<th class="head">Terminal POOL definitions required</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>By Work Station Name in URL</td>
<td>Yes. 1 per work station</td>
<td>Yes. Individual or group</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>By LUNAME in URL</td>
<td>Yes. 1 generic Rule.</td>
<td>Yes. Individual or group</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>By using Forced LU</td>
<td>No</td>
<td>Pool Only</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>Correspondent</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>By IP</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p><em>References</em></p>
<p>ForcedLUNAME <a class="reference internal" href="../../virtel/Virtel457CN/connectivity_guide.html#v457cn-forceluname"><span class="std std-ref">“ForcedLUNAME in the Virtel Connectivity guide.”</span></a></p>
<p>Correspondent Management <em>Virtel - How to Activate LU Nailing.</em></p>
<p><em>Virtel - Web Access User Guide</em></p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../TN201605/TN201605.html" class="btn btn-neutral float-right" title="CICS Printing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../TN201603/TN201603.html" class="btn btn-neutral float-left" title="Field Level Encryption" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2017, Syspertec. All rights reserved

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>What’s new in Virtel 4.55 &mdash; Virtel 1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="Virtel 1 documentation" href="../../../index.html"/>
        <link rel="up" title="Technical Newsletters" href="../../../newsletters.html"/>
        <link rel="next" title="Customizing colours with CSS in Virtel 4.53" href="../TN201601/TN201601.html"/>
        <link rel="prev" title="Using the IBM System Logger with Virtel" href="../TN201520/TN201520.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Virtel
          

          
            
            <img src="../../../_static/logo_virtel_web.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../newsletters.html">Technical Newsletters</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id1">2014</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../newsletters.html#id2">2015</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../TN201501/TN201501.html">Dynamic Directory Interface (DDI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201504/TN201504.html">Running multiple instances of Virtel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201505/TN201505.html">Virtel Macros</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201506/TN201506.html">An example of using web services with Virtel Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201507/TN201507.html">Customising Virtel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201515/TN201515.html">Using Virtel as a Secure Single Access Control Point</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201517/TN201517.html">Virtel Chinese Character Language Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201519/TN201519.html">Processing the VTAM USS MSG10 buffer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201520/TN201520.html">Using the IBM System Logger with Virtel</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">What’s new in Virtel 4.55</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id3">2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id4">2017</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../howto.html">Miscellaneous</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">Virtel</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../../newsletters.html">Technical Newsletters</a> &raquo;</li>
      
    <li>What’s new in Virtel 4.55</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/manuals/newsletters/TN201522/TN201522.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="whats-new-in-virtel-4-55">
<h1>What’s new in Virtel 4.55<a class="headerlink" href="#whats-new-in-virtel-4-55" title="Permalink to this headline">¶</a></h1>
<p>The following newsletter discusses some of the new features that are
available in Virtel Release 4.55.</p>
<p><a href="#id1"><span class="problematic" id="id2">**</span></a>CICS QUICKLNK support for multiple CHANNEL and CONTAINER names **</p>
<p>Quicklink support has been enhanced to allow multiple channels and
contains. QuickLink is a protocol used in support of Syspertec’s Virtel
Transaction Gateway (VTG) product which is an alternative to IBM’s CTG
solution.</p>
<p>OPTION$ FOR-QUICKLNK,</p>
<p>(METHOD,&#8217;CALL-CONTAINER-LIST&#8217;),</p>
<p>(PROGRAM,&#8217;*TARGET&#8217;),</p>
<p>(CONTAINERS-FOR-QUESTION,&#8217;DATAIN&#8217;),</p>
<p>(CONTAINERS-FOR-RESPONSE,&#8217;DATAOUT&#8217;),</p>
<p>(CHANNEL,&#8217;*MYCHANNEL&#8217;),</p>
<p>(TERMINAL,&#8217;CICS-TERMINAL&#8217;),</p>
<p>(RET-CODE,&#8217;RETURN-CODE&#8217;),</p>
<p>(RET-CICS1,&#8217;EIBRESP&#8217;),</p>
<p>(RET-CICS2,&#8217;EIBRESP2&#8217;),</p>
<p>TOVAR=&#8217;MYPARMS&#8217;</p>
<p><strong>Improved SCREEN-PROCESSING facility</strong></p>
<p>This modification introduces a new screen processing facility by
allowing you to SET$ a SCREEN-POSITION, advancing the SCREEN-POSITION,
CASE$ for a SCREEN-POSITION and COPY$ to/from a SCREEN-POSITION.</p>
<p>Example:</p>
<p>Setting a screen position. (hh equals the number of lines in the column</p>
<p>SET$ SCREEN-POSITION,(lig,col,len,hh)</p>
<p>Advancing the position to next line:</p>
<p>SET$ SCREEN-POSITION,TO-NEXT-LINE</p>
<p>If the next line is after the end of the current screen rectangle, it
wraps to back to the beginning. This condition may be tested with:</p>
<p>IF$ NOT-FOUND,THEN=...</p>
<p>CASE$ which works with the current screen position:</p>
<p>CASE$ CURRENT-SCREEN-POSITION,(EQ,&#8217;XXXX&#8217;,ET1),...</p>
<p>CASE$ which works with current screen line, column, length, equal sign
and hard coded column and length:</p>
<p>CASE$ (=,COL,LEN),(EQ,&#8217;XXXX&#8217;,ET1),...</p>
<p>COPY$ which works with current screen line, column, length, equal sign:</p>
<p>COPY$ VARIABLE-TO-SCREEN,VAR=&#8217;VAR1&#8217;,SCREEN=(=,col,len)</p>
<p><strong>Support for MAP$ JSON input.</strong></p>
<p>Support is added to JSON format to be copied into a commarea. This
complements the existing XML and QUERY data currently supported by the
MAP$ statement.</p>
<p>COMMAREA MAP$ FROM-VARIABLE,XML,VAR=&#8217;MYINPUT&#8217; default</p>
<p>COMMAREA MAP$ FROM-VARIABLE,QUERY,VAR=&#8217;MYINPUT&#8217;</p>
<p>COMMAREA MAP$ FROM-VARIABLE,JSON,VAR=&#8217;MYINPUT&#8217;</p>
<p>Other supported MAP$ structures:-</p>
<p>COMMAREA MAP$ FROM-INPUT,JSON (Input is in json format)</p>
<p>COMMAREA MAP$ FROM-INPUT,JSON,FIELD=&#8217;MYINPUT&#8217;</p>
<p><strong>New toolbar button to toggle the 3278T mode on/off.</strong></p>
<p>The 3278T button is hidden by default but can now be shown by selecting
options in the user settings dialog.</p>
<p><strong>New UNLOAD command to unload ARBO.</strong></p>
<p>Following the performance improvements through the introduction of VSAM
LSR the VIRCONF program was no longer able to access the ARBO VSAM file
when VIRTEL was running. To compensate for this a new UNLOAD command has
been added to VIRTEL which performs an ARBO UNLOAD.</p>
<p>Example:</p>
<p>F virtel,unload</p>
<p>This command invokes the VIRCONF program which unloads the ARBO file.
The following DD statement must be added to the Virtel procedure:-</p>
<p>//SYSPUNCH DD DSN=SP000.VIRTELxx.VIRCONF.SYSIN,DISP=(,CATLG),</p>
<p>// UNIT=SYSDA,VOL=SER=VVVVVV,SPACE=(TRK,(5,1)),</p>
<p>// DCB=(RECFM=FB,LRECL=80,BLKSIZE=6080)</p>
<p>Or alternatively</p>
<p>//SYSPUNCH DD SYSOUT=B</p>
<p>**
Customization of the Virtel toolbar**</p>
<p>The toolbar elements can now be controlled through a user custom.js
Javascript element. An example is provided below.</p>
<p>Sample customization code[in custom.js]:</p>
<p>/*</p>
<p>* Customize the location of dynamic toolbar buttons.</p>
<p>* The calls to this function are ignored when they</p>
<p>* return nothing, or an integer not greater than 0.</p>
<p>*</p>
<p>* Customizable buttons IDs :</p>
<p>* &gt; &#8216;3278T&#8217;</p>
<p>* &gt; &#8216;document-print-preview&#8217;</p>
<p>* &gt; &#8216;file-send&#8217;</p>
<p>* &gt; &#8216;file-recv&#8217;</p>
<p>* &gt; &#8216;printer&#8217;</p>
<p>*/</p>
<p>function customize_toolbarButtonIndex(id) {</p>
<p>if (id===&#8217;printer&#8217; || id===&#8217;document-print-preview&#8217;) {</p>
<p>return getToolbarButtonIndex(&#8216;disconnect&#8217;) + 1;</p>
<p>}</p>
<p>}</p>
<p><strong>NEW MAP$ FROM-INPUT TO-VARIABLES parameter</strong></p>
<p>The MAP$ FROM-INPUT statement now has a new TO-VARIABLES parameter. This
enables conversion of input directly to output variables without the
need to go through an intermediate commarea.</p>
<p>Before you had to use three statements:</p>
<p>JSONAF1 <strong>MAP$</strong> <strong>FROM-INPUT</strong>,<strong>JSON</strong>,<strong>FIELD</strong>=&#8217;MYINPUT&#8217;
generate commarea</p>
<p>JSONAF1 <strong>MAP$</strong> <strong>TO-VARIABLE</strong>,<strong>VAR</strong>=&#8217;MYCRBO00&#8217; copy commarea to
variable</p>
<p>JSONAF1 <strong>TOVAR$</strong> <strong>FROM-VARIABLE</strong>,<strong>VAR</strong>=&#8217;MYCRBO00&#8217; generate
variables</p>
<p>This would convert the JSON input to variables with the names specified
in the JSONAF1 MAP$. Now, the similar conversion can be achieved with
just one statement:-</p>
<p>JSONAF1 <strong>MAP$</strong>
<strong>FROM-INPUT</strong>,<strong>JSON</strong><em>,</em>TO-VARIABLES,<strong>FIELD</strong>=&#8217;MYINPUT&#8217;
generate variables</p>
<p>NOTE: This new form of the instruction alleviates the need for an
OCCURS=UNLIMITED at the end of a description.</p>
<p>**
Allow re-execution of a MAP$ FROM-INPUT**</p>
<p>In the following scenario, the two &#8216;MAP$ FROM-INPUT&#8217; will produce the
same output.</p>
<p>Example</p>
<p>JSON1 SCREENS APPL=JSON1</p>
<p>*</p>
<p>SCENARIO INITIAL</p>
<p>*</p>
<p>SET$ ENCODING,UTF-8,&#8217;IBM1147&#8217;</p>
<p>JSONAF1 MAP$ BEGIN</p>
<p>MAP$ AREA,WITH=&#8217;inAFR&#8217;,LENGTH=30</p>
<p>MAP$ AREA,WITH=&#8217;inICT&#8217;,LENGTH=30</p>
<p>*</p>
<p>INSUBFS MAP$ BEGIN,WITH=&#8217;friends&#8217;</p>
<p>INSUBF MAP$ BEGIN,WITH=NEXT-ELEMENT,OCCURS=UNLIMITED</p>
<p>MAP$ AREA,WITH=&#8217;inRRN&#8217;,LENGTH=17</p>
<p>MAP$ AREA,WITH=&#8217;inQtyT10&#8217;,LENGTH=10,TYPE=9</p>
<p>INSUBF MAP$ END</p>
<p>INSUBFS MAP$ END</p>
<p>JSONAF1 MAP$ END</p>
<p>*</p>
<p>JSONAF1 MAP$ FROM-INPUT,JSON,TO-VARIABLES,FIELD=&#8217;MYINPUT&#8217;</p>
<p>ERROR$ 0,&#8217;COUNT=&#8217;,&#8217;*INSUBF&#8217;</p>
<p>DEBUG$ SNAP,TERMINAL</p>
<p>PERFORM$ DECODE</p>
<p>*</p>
<p>JSONAF1 MAP$ FROM-INPUT,JSON,TO-VARIABLES,FIELD=&#8217;MYINPUT&#8217;</p>
<p>ERROR$ 0,&#8217;COUNT=&#8217;,&#8217;*INSUBF&#8217;</p>
<p>DEBUG$ SNAP,TERMINAL</p>
<p>PERFORM$ DECODE</p>
<p>*</p>
<p>SCENARIO END</p>
<p>*</p>
<p>DECODE SCENARIO SUBROUTINE</p>
<p>DECODELOOP LABEL$</p>
<p>IF$ NOT-EXISTS-VARIABLE,&#8217;inRRN&#8217;,THEN=THEEND</p>
<p>ERROR$ 0,&#8217;inRRN=&#8217;,&#8217;*inRRN&#8217;</p>
<p>ERROR$ 0,&#8217;inQtyT10=&#8217;,&#8217;*inQtyT10&#8217;</p>
<p>POP$ FIRST-VALUE-OF,VAR=&#8217;inRRN&#8217;</p>
<p>POP$ FIRST-VALUE-OF,VAR=&#8217;inQtyT10&#8217;</p>
<p>GOTO$ DECODELOOP</p>
<p>THEEND LABEL$</p>
<p>SCENARIO END</p>
<p>*</p>
<p>SCRNEND</p>
<p>END ,</p>
<p>**
New trimming functions. CASE$ RTRIM and LTRIM / EMPTY**</p>
<p>Two new optional parameters for the CASE$ instruction, RTRIM= and
LTRIM=, allow the removal of one or more characters from the various
operands of the CASE$ instruction before the comparisons are done.</p>
<p>Also, a new CASE$ condition EMPTY is added to allow testing whether a
variable or a part of the screen buffer is empty. The empty condition
can be tested after the variable or screen has been trimmed.</p>
<p>Examples:</p>
<p>CASE$ &#8216;MYVAR&#8217;, *</p>
<p>(EMPTY,L2), *</p>
<p>(CONTAINS,&#8217;*Val&#8217;,L1) *</p>
<p>RTRIM=(&#8216;_&#8217;,&#8217; &#8216;), *</p>
<p>LTRIM=(&#8216;_&#8217;,&#8217; &#8216;), *</p>
<p>ELSE=other</p>
<p>*</p>
<p>CASE$ (1,1,80), *</p>
<p>(CONTAINS,&#8217;Val&#8217;,L1),RTRIM=(&#8216;_&#8217;,&#8217; &#8216;)</p>
<p>NOTE 1: CASE$ do not change the contents of the variables or parts of
the screen being compared.</p>
<p>NOTE 2: If the variable being tested does not exist, (eg &#8216;MYVAR&#8217; does
not exist), it is not considered empty. Rather, the CASE$ branches at
the ELSE= label.</p>
<p>LTRIM and RTRIM will trim both the value being tested (variable or part
of the screen buffer) and the variable arguments, but not the static
arguments.</p>
<p>For example:</p>
<blockquote>
<div><p>(EQ,&#8217;*VAR1&#8217;,label1) The value of the VAR1 variable will be trimmed
prior to comparison.</p>
<p>(EQ,&#8217;zagreb &#8216;,label2) The value of the string &#8216;zagreb &#8216; will NOT be
trimmed – it is a static argument.</p>
</div></blockquote>
<p><strong>New trimming functions. COPY$ RTRIM and LTRIM</strong></p>
<p>Two new optional parameters for the COPY$ LIST-TO-VARIABLE instruction,
RTRIM= and LTRIM=, will trim one or more characters from the various
variable operands of the COPY$ instruction prior to performing the copy.</p>
<p>Example:</p>
<p>COPY$ LIST-TO-VARIABLE,VAR=&#8217;VAR1&#8217;,</p>
<p>RTRIM=(&#8216;_&#8217;,&#8217; &#8216;),LTRIM=(&#8216;_&#8217;,&#8217; &#8216;),</p>
<p>LIST=(&#8216;string1&#8217;,&#8217;*var1&#8217;,VARIABLE,&#8217;var2&#8217;)</p>
<p>The variable VAR1 is created/modified, with &#8216;string1&#8217; copied as is, var1
and var2 left and right trimmed.</p>
<p>**
Indirection on OUTPUT-FILE-TO-VARIABLE FILE=**</p>
<p>This feature allows indirection of a file name. The filename is pointed
to by the variable *variable_name.</p>
<p>Example:</p>
<p>COPY$ OUTPUT-FILE-TO-VARIABLE,FILE=&#8217;*MYFILE&#8217;,VAR=&#8217;MYRESULT&#8217;</p>
<p><strong>COPY$ VARIABLE-TO-VARIABLE</strong></p>
<p>Copies a source variable to a target variable. VAR= must specifies two
variable names, the first being the source, the second the target.</p>
<p>TYPE=REP may be specified to mean the target variable should be
replaced. Otherwise the new value is appended the target variable.</p>
<p>OFFSET= is the number of characters to skip in the string, defaulting to
0.</p>
<p>LENGTH= is how many characters to copy, defaulting to the remainder of
the string from start. If length is longer than the string, padding
occurs with the PAD= character. This defaults to the blank.</p>
<p>Example</p>
<p>COPY$ VARIABLE-TO-VARIABLE,</p>
<blockquote>
<div><p>VAR=(&#8216;VAR1&#8217;,&#8217;VAR2&#8217;),</p>
<p>OFFSET=8,LENGTH=5,PAD=&#8217; &#8216;</p>
</div></blockquote>
<p><strong>COPY$ CURRENT-LINE enhancement</strong></p>
<p>This update complements the CASES$ CURRENT-SCREEN POSITION feature. It
allows copying of current values of the field in the SCREEN-POSITION to
a variable. The length of the returned value may be specified with the
LENGTH= parameter.</p>
<p>Examples:</p>
<p>SET$ SCREEN-POSITION,(10,20,5,15)</p>
<p>SET$ SCREEN-POSITION,TO-NEXT-LINE</p>
<p>COPY$ SYSTEM-TO-VARIABLE,VAR=&#8217;L1&#8217;,LENGTH=2, *</p>
<p>FIELD=(VALUE-OF,CURRENT-LINE)</p>
<p>COPY$ SYSTEM-TO-VARIABLE,VAR=&#8217;C1&#8217;,LENGTH=2, *</p>
<p>FIELD=(VALUE-OF,CURRENT-COLUMN)</p>
<p>COPY$ SYSTEM-TO-VARIABLE,VAR=&#8217;L2&#8217;, *</p>
<p>FIELD=(VALUE-OF,CURRENT-LENGTH)</p>
<p>COPY$ SYSTEM-TO-VARIABLE,VAR=&#8217;H1&#8217;, *</p>
<p>FIELD=(VALUE-OF,CURRENT-HEIGHT)</p>
<p><strong>Virtel Memory Display</strong></p>
<p>The Memory display feature is a memory diagnostic tool created to trap
possible invalid Virtel memory free requests. Such request can lead to
ABEND0C4s and other unwanted behaviour. Virtel memory requests (PRENDRE
and RENDRE) are tracked in a diagnostic storage area located above the
bar.</p>
<p>The area is 1MB in size and can contain 65536 active storage requests.
An active storage request is a storage area that has been gotten
(PRENDRE) and is pending a Virtel storage release (RENDRE).</p>
<p>This diagnostic tool should only be used when recommended by Technical
Support.</p>
<p>The feature is supported by the following command:-</p>
<p>F VIRTEL,MEMDISPLAY</p>
<p>This produces a breakdown of the internal VIRTEL subpools. See the
following command response:-</p>
<p>F SPTHOLTV,MEMDISPLAY</p>
<p>VIR0200I MEMDISPLAY</p>
<p>VIR0271I DISPLAY 763</p>
<p>SP1=00024478 SP2=00000CCC SP3=00090DE0 SP4=000027E4</p>
<p>00910091 00030009 02430294 00090011</p>
<p>SP5=00029293 SP6=0004DCF4 SP7=00000000 SP8=00000000</p>
<p>00A404C7 01370137 00000000 00000002</p>
<p>POOL CONTROL BLOCK. SUBPOOL=1</p>
<p>PAG=00108000 NFQ=00108008 #FQ=00000001 FRE=0000B2A0</p>
<p>PAG=000F8000 NFQ=000F8008 #FQ=00000001 FRE=00000080</p>
<p>PAG=000E8000 NFQ=000E8008 #FQ=00000001 FRE=00000078</p>
<p>POOL CONTROL BLOCK. SUBPOOL=2</p>
<p>PAG=1EC14000 NFQ=1EC14008 #FQ=00000004 FRE=0000F2F0</p>
<p>POOL CONTROL BLOCK. SUBPOOL=3</p>
<p>PAG=1ECC4000 NFQ=1ECC4008 #FQ=00000002 FRE=00006408</p>
<p>PAG=1ED54000 NFQ=1ED54008 #FQ=00000002 FRE=00001750</p>
<p>PAG=1EC74000 NFQ=1EC74008 #FQ=00000001 FRE=00000878</p>
<p>PAG=1ED04000 NFQ=1ED04008 #FQ=00000001 FRE=00000878</p>
<p>PAG=1ED94000 NFQ=1ED94008 #FQ=00000002 FRE=00002768</p>
<p>PAG=1ECF4000 NFQ=1ECF4008 #FQ=00000002 FRE=000017F0</p>
<p>PAG=1EE04000 NFQ=1EE04008 #FQ=00000001 FRE=00000878</p>
<p>PAG=1ED74000 NFQ=1ED74008 #FQ=00000001 FRE=00000878</p>
<p>PAG=1ECE4000 NFQ=1ECE4008 #FQ=00000001 FRE=00000878</p>
<p>PAG=1EC64000 NFQ=1EC64008 #FQ=00000001 FRE=00000878</p>
<p>POOL CONTROL BLOCK. SUBPOOL=4</p>
<p>PAG=1EC04000 NFQ=1EC04008 #FQ=00000003 FRE=0000D750</p>
<p>POOL CONTROL BLOCK. SUBPOOL=5</p>
<p>PAG=1ED24000 NFQ=1ED24008 #FQ=00000001 FRE=0000A1D8</p>
<p>PAG=1ED14000 NFQ=1ED14008 #FQ=00000001 FRE=000043B8</p>
<p>PAG=1EC54000 NFQ=1EC54008 #FQ=00000001 FRE=000043B8</p>
<p>PAG=1EBB4000 NFQ=1EBB4008 #FQ=00000001 FRE=000043B8</p>
<p>POOL CONTROL BLOCK. SUBPOOL=6</p>
<p>PAG=1EBF4000 NFQ=1EBF4008 #FQ=00000003 FRE=00000D40</p>
<p>PAG=1EBE4000 NFQ=1EBE4008 #FQ=00000001 FRE=00000088</p>
<p>PAG=1EBD4000 NFQ=1EBD4008 #FQ=00000001 FRE=000000B8</p>
<p>PAG=1EBC4000 NFQ=1EBC4008 #FQ=00000001 FRE=000000D0</p>
<p>PAG=1EBA4000 NFQ=1EBA4008 #FQ=00000001 FRE=00000108</p>
<p>POOL CONTROL BLOCK. SUBPOOL=7</p>
<p>PAG=00000000 NFQ=00000000 #FQ=00000000 FRE=00000000</p>
<p>POOL CONTROL BLOCK. SUBPOOL=8</p>
<p>PAG=00000000 NFQ=00000000 #FQ=00000000 FRE=00000000</p>
<p>ALLOC=0001213K, FREE=0000314K, TOTAL=0001536K</p>
<p>VIR0272I END</p>
<p>**
<a href="#id3"><span class="problematic" id="id4">**</span></a>Enablement/Dis-enablement</p>
<p>The memory diagnostic tool is only activated through the following TCT
parameter</p>
<p>MEMORY=(ABOVE,MEMHST),</p>
<p>The memory diagnostic tool can be deactivated by the following command:-</p>
<p>F VIRTEL,MEMDISPLAY,DISABLE</p>
<p>Operation</p>
<p>With the memory diagnostic tool active the following command be used to
summarize the VIRTEL subpool active allocated memory:-</p>
<p>F VIRTEL,MEMDISPLAY</p>
<p>The following will be displayed:-</p>
<p>F SPTHOLTV,MEMDISPLAY</p>
<p>VIR0200I MEMDISPLAY</p>
<p>VIR0271I DISPLAY 978</p>
<p>SP1=00024478 SP2=00001044 SP3=0008E35F SP4=00002F61</p>
<p>00910091 00040009 02380294 000B0011</p>
<p>SP5=<strong>000317DC</strong> SP6=0004DF73 SP7=00000000 SP8=00000220</p>
<p><strong>00C504C7</strong> 01370137 00000000 00000002</p>
<p>POOL CONTROL BLOCK. SUBPOOL=1</p>
<p>PAG=00109000 NFQ=00109008 #FQ=00000001 FRE=0000B2A0</p>
<p>PAG=000F9000 NFQ=000F9008 #FQ=00000001 FRE=00000080</p>
<p>PAG=000E9000 NFQ=000E9008 #FQ=00000001 FRE=00000078</p>
<p>POOL CONTROL BLOCK. SUBPOOL=2</p>
<p>PAG=1EC14000 NFQ=1EC14008 #FQ=00000005 FRE=0000EF68</p>
<p>POOL CONTROL BLOCK. SUBPOOL=3</p>
<p>PAG=1ECD4000 NFQ=1ECD4008 #FQ=00000002 FRE=00009DF8</p>
<p>PAG=1ED54000 NFQ=1ED54008 #FQ=00000002 FRE=00001750</p>
<p>PAG=1EC84000 NFQ=1EC84008 #FQ=00000001 FRE=00000878</p>
<p>PAG=1ED04000 NFQ=1ED04008 #FQ=00000001 FRE=00000878</p>
<p>PAG=1ED94000 NFQ=1ED94008 #FQ=00000002 FRE=00002768</p>
<p>PAG=1ECF4000 NFQ=1ECF4008 #FQ=00000001 FRE=00000878</p>
<p>PAG=1EE04000 NFQ=1EE04008 #FQ=00000001 FRE=00000878</p>
<p>PAG=1ED74000 NFQ=1ED74008 #FQ=00000001 FRE=00000878</p>
<p>PAG=1ECE4000 NFQ=1ECE4008 #FQ=00000001 FRE=00000878</p>
<p>PAG=1EC64000 NFQ=1EC64008 #FQ=00000001 FRE=00000878</p>
<p>POOL CONTROL BLOCK. SUBPOOL=4</p>
<p>PAG=1EC04000 NFQ=1EC04008 #FQ=00000004 FRE=0000CFA0</p>
<p>POOL CONTROL BLOCK. SUBPOOL=5</p>
<p>PAG=1ECA4000 NFQ=1ECA4008 #FQ=00000002 FRE=0000D870</p>
<p>PAG=1ED14000 NFQ=1ED14008 #FQ=00000001 FRE=000043B8</p>
<p>PAG=1ED24000 NFQ=1ED24008 #FQ=00000001 FRE=000043B8</p>
<p>PAG=1EC74000 NFQ=1EC74008 #FQ=00000001 FRE=0000A1D8</p>
<p>PAG=1EC54000 NFQ=1EC54008 #FQ=00000001 FRE=0000A1D8</p>
<p>PAG=1EBB4000 NFQ=1EBB4008 #FQ=00000001 FRE=000043B8</p>
<p>POOL CONTROL BLOCK. SUBPOOL=6</p>
<p>PAG=1EBF4000 NFQ=1EBF4008 #FQ=00000002 FRE=00000A50</p>
<p>PAG=1EBE4000 NFQ=1EBE4008 #FQ=00000001 FRE=00000088</p>
<p>PAG=1EBD4000 NFQ=1EBD4008 #FQ=00000001 FRE=000000B8</p>
<p>PAG=1EBC4000 NFQ=1EBC4008 #FQ=00000001 FRE=000000D0</p>
<p>PAG=1EBA4000 NFQ=1EBA4008 #FQ=00000001 FRE=00000108</p>
<p>POOL CONTROL BLOCK. SUBPOOL=7</p>
<p>PAG=00000000 NFQ=00000000 #FQ=00000000 FRE=00000000</p>
<p>POOL CONTROL BLOCK. SUBPOOL=8</p>
<p>PAG=1ECB4000 NFQ=1ECB4008 #FQ=00000001 FRE=0000FDB0</p>
<p>ALLOC=0001240K, FREE=0000479K, TOTAL=0001728K</p>
<p>VIR0272I END</p>
<p>The display response is split into a summary section for each subpool
and a detailed allocated page block and free queue element display for
each subpool.</p>
<p>In the summary display, each subpool has two displayed values. The top
value is the amount of storage currently allocated and the value below
represents the current allocation in 1K chunks and a peak allocation in
1K chunks.</p>
<p>For example in the above display in SP5 we can see that there is an
allocated value of</p>
<p>317DC bytes, represented by 00C5 in 1K chunks, and a peak value of 04C7
in 1K chunks.</p>
<p>At the bottom of the display is a line which provide allocated, free and
total values.</p>
<p><strong>Messages</strong></p>
<p><strong>VIRT0085I INVALID MEMORY FREE REQUEST. ADDR=aaaaaaaa, SUBPOOL=ss,
CALLER=aaaaaaaa&#8217;</strong></p>
<p>Module : VIR0000</p>
<p>Meaning :</p>
<p>The Virtel memory request is invalid because:-</p>
<p>The subpool is invalid.</p>
<p>The address to be freed is outside the associated subpool pages.</p>
<p>The address to be freed is not found in the DSA table.</p>
<p>Action : Virtel continues. If you get a significant number of these
messages you consider a schedule a restart of Virtel.</p>
<p><strong>VIRT0086E GETMAIN FAILED. MEMORY DSA DISABLED.</strong></p>
<p>Module :VIR0000</p>
<p>Meaning:</p>
<p>Virtel was ubale to GETMAIN storage &#8220;above the bar&#8221; for the DSA table.</p>
<p>Action: Increase MEMLIMIT= in the JCL to provide more &#8220;above the bar&#8221;
storage. Virtel continues but you should contact support if the problem
continues. Suggest a default of MEMLIMIT=2G.</p>
<p><strong>VIRT0087E FATAL DSA TABEL ERROR</strong></p>
<p>Module :VIR0000</p>
<p>Meaning: The DSA memory table has been corrupted or has been
invalidated. Memory diagnostics has been disabled.</p>
<p>Action: Virtel continues but you should consider a scheduled restart of
Virtel.</p>
<p><strong>VIRT0088E DSA TABLE FULL. MEMORY DIAGS. DISABLED</strong></p>
<p>Module :VIR0000</p>
<p>Meaning: The DSA memory table is full and cannot store further entries.
Memory diagnostics disabled.</p>
<p>Action: Virtel contines but you should contact support support. Schedule
a restart of Virtel.</p>
<p>**
<a href="#id5"><span class="problematic" id="id6">**</span></a>TCT Parameters:</p>
<p>New MEMORY parameter - MEMHST</p>
<p>MEMORY=(BELOW/ABOVE(DEBUG | MEMHST | ALLOW64BITS)</p>
<p>MEMORY=(ABOVE,MEMHST) turns on the Virtel memory diagnostic tool. This
should only be implemented when advised to do so by Technical Support.
Performance degradation might occur due to the additional monitoring
services. This will depend on VIRTEL demand.</p>
<p>Example:-</p>
<p>Use Virtel memory management with memory diagnostic tool and above the
bar storage.</p>
<p>MEMORY=(ABOVE,MEMHST,ALLOW64BITS)</p>
<p><strong>New diagnostic option - SNAPMSG</strong></p>
<p>The SNAPMSG enhancement allows a SNAP or DUMP to be taken whenever a
particular</p>
<p>message number is issued by VIRTEL. The command has an additional search
field which can be used to identify a message with a particular
character string. For example a specific return code.</p>
<p>The enhancement is defined within the TCT using the SNAPMSG= keyword or
as a command.</p>
<p>Command format:</p>
<p>F VIRTEL,SNAPMSG=msgno[,search],[S|A]</p>
<p>TCT keyword:</p>
<p>SNAPMSG=(msgno,search,action)</p>
<p>Default search is none.</p>
<p>Default action is SNAP</p>
<p>Constraints:</p>
<p>All msgno are 8 characters.</p>
<p>The search field has is restricted to a maximum of 10 Characters.
Anything beyond this will be ignored.</p>
<p>Actions: S = SNAP or A = ABEND.</p>
<p>Virtel will abend with a U0999 abend code, reason code 15 if the ABEND
action is used.</p>
<p><strong>Messages</strong></p>
<p><strong>&#8216;VIR0262W SNAPMSG TRIGGERED - VIRTEL ABENDED | SNAP TAKEN&#8217;,</strong></p>
<p>Module :VIR0002</p>
<p>Meaning A message has been trapped by the SNAPMSG function. Action taken
will be either a SNAP dump or an ABEND of VirteL.</p>
<p>Action :Determined by TCT parameters or the action set in the SNAPMSG=
command.</p>
<p>Examples:-</p>
<p>TCT:</p>
<p>Snap message VIR2102W with search field USSTAB:</p>
<p>SNAPMSG=(VIR2102W,USSTAB,S),</p>
<p>Command:</p>
<p>Abend VIRTEL fi message VIR2102W is caught with search field USSX:</p>
<p>F VIRTEL,SNAPMSG=VIR2102W,USSX,A</p>
<p>Response:</p>
<p><strong>15.35.51 JOB05133 VIR0200I SNAPMSG=VIR2102W,USSX,A</strong></p>
<p>15.35.58 JOB05133 VIRHT51I HTTP-CLI CONNECTING CLVTA078 TO
192.168.092.061:49878</p>
<p>15.35.58 JOB05133 VIR2102W UNABLE TO LOAD THE TRANSACTION USSTAB USSX .
DEFAULT USSTAB USSVIRT WILL BE USED.</p>
<p><strong>15.35.58 JOB05133 VIR0055W SNAPMSG TRIGGERED - VIRTEL ABENDED</strong></p>
<p>15.35.58 JOB05133 VIR0700W ERROR IN TASK MAIN PSW= 078C1000 800E54FE</p>
<p>15.35.58 JOB05133 VIR0400 DATE=14 Dec 2015 TIME= 15:35:58 TASK=MAIN
ABEND=ASRA TERM=CLVTA078 APPLICATION=APPLHOLT</p>
<p>VERSION=4.55 MVS</p>
<p>15.35.58 JOB05133 VIR0016W ABEND ASRA TERM=CLVTA078 PROG= OFFSET=+0000</p>
<p>15.35.58 JOB05133 VIR0016W PSW = 078C1000 800E54FE 0002000D 00000000</p>
<p>15.35.58 JOB05133 VIR0016W R7 = VIR0010 +39C2</p>
<p>15.35.58 JOB05133 VIR0016W R8 = VIR0021W +1000</p>
<p>15.35.58 JOB05133 VIR0016W R10 = VIR0099 +0000</p>
<p>15.35.58 JOB05133 $HASP375 SPTHOLTV ESTIMATE EXCEEDED BY 78,000 LINES</p>
<p>15.36.02 JOB05133 VIR0038I SNAP COMPLETE</p>
<p>15.36.03 JOB05133 $HASP375 SPTHOLTV ESTIMATE EXCEEDED BY 138,000 LINES</p>
<p>15.36.04 JOB05133 IEA995I SYMPTOM DUMP OUTPUT 953</p>
<p>953 USER COMPLETION CODE=0999 REASON CODE=0000000F</p>
<p>953 TIME=15.35.58 SEQ=04869 CPU=0000 ASID=001C</p>
<p>953 PSW AT TIME OF ERROR 078C1000 800E54FE ILC 2 INTC 0D</p>
<p>953 ACTIVE LOAD MODULE ADDRESS=000E5178 OFFSET=00000386</p>
<p>953 NAME=VIR0002A</p>
<p>953 DATA AT PSW 000E54F8 - 00181610 0A0D9240 A7A7D208</p>
<p>953 GR 0: C4000000 1: C40003E7</p>
<p>953 2: 220B987C 3: 1EBF8278</p>
<p>953 4: 00035A4B 5: 00035A79</p>
<p>953 6: 00000000 7: 1EA8972A</p>
<p>953 8: 1EC6DDF0 9: 1EC0B778</p>
<p>953 A: 00036100 B: 1EBC4668</p>
<p>953 C: 000E5178 D: 0011CCE8</p>
<p>953 E: 0000002E F: 0000000F</p>
<p>953 END OF SYMPTOM DUMP</p>
<p>**
Virtel Logger extract and format program.**</p>
<p>VIR0002B is a program that can be run to extract the VIRTEL records from
the System Logger. The VIRTEL log is written to the system logger when
LOG=LOGGER is specified in the TCT.</p>
<p>Messages</p>
<p><strong>VIR0280I Parameter Error</strong></p>
<p>Module : VIR0002B</p>
<p>Meaning :Invalid parameters in PARM field.</p>
<p>Action :Correct PARM field and provide valid parameters.</p>
<p><strong>VIR0281E System Logger Error. xxxxxxxx. Return Code xx, Reason code
nnnn</strong></p>
<p>Module : VIR0002B</p>
<p>Meaning :Logger service has failed in routine <em>xxxxxxxx</em></p>
<p>Action :Contact technical support.</p>
<p><strong>VIR0282W No records in range specified</strong></p>
<p>Module : VIR0002B</p>
<p>Meaning :The parameters provided in the PARM field did not select any
records from the log.</p>
<p>Action :Check that valid parameters have been provided.</p>
<p><strong>VIR0283W The log stream is empty</strong></p>
<p>Module : VIR0002B</p>
<p>Meaning :The log stream has no Virtel records.</p>
<p>Action :None.</p>
<p><strong>VIR0284W Records are not available. xxxxxxxx. Return code xx, Reason
code xxxx</strong></p>
<p>Module : VIR0002B</p>
<p>Meaning :Logger service failed to extract any records due to an error in
routine xxxxxxxx.</p>
<p>Action :Correct technical support.</p>
<p><strong>VIR0285E Unable to open DDNAME VIRLOG</strong></p>
<p>Module : VIR0002B</p>
<p>Meaning :The VIRLOG output DDNAME failed to open.</p>
<p>Action :Correct the JCL and rerun the job.</p>
<p>**
Program Details**</p>
<p>JCL Parameters:</p>
<p>(&gt;nnn)</p>
<p>COPY [&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-]</p>
<p>(fromdate[,todate])</p>
<p>(&gt;nnn)</p>
<p>DELETE [&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-]</p>
<p>(date)</p>
<p>Date format = yyyyddd</p>
<p>Examples:</p>
<p>COPY Copy all records</p>
<p>COPY(&gt;2) Copy records older than 2 days</p>
<p>COPY(&gt;0) Copy up to yesterday</p>
<p>DELETE(&gt;2) Delete records older than 2 days</p>
<p>COPY(2015047) Copy records from 2015.047</p>
<p>COPY(2015047,2015048) Copy records from 2015.047</p>
<p>thru to 2015.048</p>
<p>DELETE(2015047) Delete records prior to 2015.047</p>
<p>COPY(&gt;0),DELETE(&gt;1) Will copy records from the previous</p>
<p>and earlier, and will then delete</p>
<p>from 2 days ago leaving about 24</p>
<p>hours of data in the log stream.</p>
<p>SAMPLE JCL:</p>
<p>//*</p>
<p>//* DESCRIPTION</p>
<p>//*</p>
<p>//LOGGER PROC P=</p>
<p>//S01 EXEC PGM=VIR0002B,PARM=&#8217;&amp;P&#8217;</p>
<p>//STEPLIB DD DSN=VIRTEL.LOADLIB,DISP=SHR</p>
<p>//VIRLOG DD SYSOUT=*,DCB=BLKSIZE=25500</p>
<p>// PEND</p>
<p>//S01 EXEC LOGGER,P=&#8217;DELETE(&gt;2)&#8217;</p>
<p>VIRLOG DCB LRECL=255,BLKSIZE=25500,RECFM=VB</p>
<p><strong>New JCL Parameters. IP= and CLONE=</strong></p>
<p>The purpose of this feature is to lower the coupling between the TCT,
ARBO and instances of VIRTEL so that there is less dependency on the
parameters defined in the ARBO and TCT for any one VIRTEL instance. This
feature enables JCL parameters to override parameters found in the TCT
and ARBO.</p>
<p><strong>IP=nnn.nnn.nnn.nnn keyword:-</strong></p>
<p>Currently the IP address used by VIRTEL for a particular line can be
derived from being:</p>
<ol class="loweralpha simple">
<li>Explicitly defined in the LINE definition in the ARBO statements</li>
</ol>
<p>b) Defaults to the IP stack HOME address. The TCP/IP GETHOSTID function
is used to obtain this address.</p>
<p>This change implements the possibility to override option (b) with the
ability to specify the IP address as a keyword in the JCL PARM field. As
an example;-</p>
<p>//S01 EXEC PGM=VIR0000,PARM=&#8221;01,MYAPPL,,192.168.0.123&#8221;</p>
<p>This reduces the need to specify the HOME address in the ARBO for
inbound lines thereby reducing the coupling between the various VIRTEL
instances that could be running within a complex and the ARBO
structures. Inbound address can just define the port via the :port
structure only rather than the full nnn.nnn.nnn.nnn:port specification.
The IP= keyword will provide the nnn.nnn.nnn.nnn address structure for a
particular instance of Virtel. So one ARBO file could provide common
port addresses and the VIRTEL instance complements this with a specific
IP address using the JCL IP= parameter.</p>
<p>This also allows VIRTEL to utilize a multi TCP/IP stack environment
without the need for duplicated ARBO files.</p>
<p><strong>CLONE=NN keyword:-</strong></p>
<p>Currently, VIRTEL makes use of the System Symbolic &amp;SYSCLONE to enable
substitution of the &#8220;+&#8221; character with the two character symbolic value
of the System Symbolic. This can be used the TCT APPLID field and
terminal relay names defined in the ARBO. The purpose is to facilitate
the common use of an ARBO file across multiple instances of VIRTEL,
however, this feature is restricted to supporting only one instance of
VIRTEL per LPAR.</p>
<p>When multiple instances are required on any one LPAR the System Symbolic
&amp;SYSCLONE and SYSPLUS=YES feature do not provide sufficient uniqueness,
consequently multiple ARBO files are required. This feature endeavours
to remove the restriction by providing an override through the use of
the CLONE=nn in the JCL parameter.</p>
<p>When specified, the CLONE value will override the IBM system symbolic
value and will be used to replace the &#8220;plus&#8221; character as defined in the
APPLID or terminal relay names.</p>
<p>JCL example:</p>
<p>//S01 EXEC PGM=VIR0000,PARM=&#8217;EH,,,192.168.170.30,00&#8217;</p>
<p>This will start Virtel with the TCT called VIRTCTEH, use a default home
address of 192.168.170.30 and override and &#8220;+&#8221; character with the value
&#8220;00&#8221;.</p>
<p>The APPLID=APPLEH+ keyword, as defined in the TCT, will become
APPLID=APPLEH00</p>
<p>The CLONE= value replaces the IBM symbolic value, consequently the
SYSCLONE-SYMBOL within scenario statements will now represent the JCL
CLONE= value in scenario statements such as:</p>
<p>VALUE-OF (SYSCLONE-SYMBOL)</p>
<p>or</p>
<p>COPY$ SYSTEM-TO-VARIABLE,VAR=&#8217;VAR1&#8217;, *</p>
<p>FIELD=(VALUE-OF,SYSCLONE-SYMBOL)</p>
<p>The CLONE= value will also override any &amp;SYSCLONE symbolic that may be
specified in dataset names within the TCT. For example:</p>
<p>STATDSN=(SP000.SPVIREH.SYS&amp;&amp;SYSCLONE..STATA, STATS=MULTI*</p>
<p>SP000.SPVIREH.SYS&amp;&amp;SYSCLONE..STATB), STATS=MULTI*</p>
<p>The STATDSN keyword as defined in the TCT will allocate and use
datasets:-</p>
<p>SP000.SPVIREH.SYS00.STATA and SP00.SPVIREH.SYS00.STATB.</p>
<p><strong>New Messages</strong></p>
<p><strong>VIR0098E INVALID JCL PARM. JOB TERMINATING.</strong></p>
<p>Module :VIR0000</p>
<p>Meaning :The JCL PARM field is incorrect. Virtel cannot continue.</p>
<p>Action : Correct the VIRTEL JCL PARM field.</p>
<p><strong>VIR0089W HOST IPADDR. OVERRIDDEN FROM PARM WITH IP=nnn.nnn.nnn.nnn</strong></p>
<p>Module :VIR0000</p>
<p>Meaning :The ARBO didn&#8217;t specify an IP address for this line. GETHOSTID
would have been used but this been overidden by the IP=address specified
in the JCL PARM.</p>
<p>Action : Virtel will use the IP address in the JCL PARM rather than
default to the IP address returned by GETHOSTID.</p>
<p><strong>D VIRTEL,LINES command response updated</strong></p>
<p><a href="#id7"><span class="problematic" id="id8">**</span></a>VIR0202I ALLOCATED IP ADDRESS =nnn.nnn.nnn.nnn **</p>
<p>Module :VIR0002</p>
<p>Meaning :An additional message has been added to the F VIRTEL,LINES
command to indicate the IP address for lines that default to GETHOSTID
will be overridden with the IP= address specified in the JCL PARM of the
Virtel started task.</p>
<p>Action : Virtel will use the IP address in the JCL PARM rather than
default to the IP address returned by GETHOSTID.</p>
<p>**
Trace buffer enhancement and offload.**</p>
<p>This feature implements the following diagnostic enhancements:-</p>
<p><strong>External Trace buffers.</strong></p>
<p>This enhancement provides additional trace and diagnostic material
covering a longer time span. The current VIT trace buffer is 200K which
is insufficient to capture time related problems. 200K holds a couple of
second’s worth of trace data at the most. This change implements logic
which moves the trace buffer to external storage and chains the buffers
together. When a trace buffer fills it is automatically moved to
external storage above the 2GB storage bar. When taking a snap all trace
buffers are printed, first those above the bar and finally the current
trace buffer.</p>
<p>The external or historical trace facility is controlled by the TCT
TRACEON= parameter or the VIRTEL TRACE command. The Virtel Internal
Tracing (VIT) has several categories which control the amount of trace
data. The categories are:-</p>
<p>No tracing</p>
<p>Minimal tracing. No data elements</p>
<p>Tracing with data elements</p>
<p>Tracing with data elements and external archive</p>
<p>The active tracing category is displayed in the TRACE display message:-</p>
<p>F VIRTEL,TRACE,DISPLAY</p>
<p>F SPVIREH,TRACE,D</p>
<p>VIR0200I TRACE,D</p>
<p>VIR0208I VIRTEL INTERNAL TRACE = YYY. EXT. BUFFERS = 0001/00FF.</p>
<p>VIR0213I NO ACTIVE TRACES</p>
<p>Message VIR0208I indicates the VIT status through a three character Y |
N display and also provides information about the current number of
external buffers used and the maximum available. The VIT display
indicators are as follows.</p>
<p>Y|N No tracing or minimal tracing</p>
<p>Y|N Data elements traced</p>
<p>Y|N External Archive active</p>
<p>In the above example, YYY indicates full tracing (Data Elements) with
trace archive active. The default setting is YYN which is the equivalent
of TRACE=ON. By default external archive tracing is not turned on.</p>
<p>TCT option:</p>
<p>TRACEON= ON | OFF | (Y|N,Y|N,Y|N)</p>
<p>Default = ON Equivalent VIT = YYN Tracing ON</p>
<p>OFF Equivalent VIT = NNN Tracing OFF</p>
<p>TRACEON=(n,n,n) n = Y|N Set Tracing options</p>
<p>TRACEON=(N,N,N) Tracing OFF</p>
<p>TRACEON=(Y,N,N) Minimal tracing, no data elements</p>
<p>TRACEON=(Y,Y,N) Default Full tracing, no archive .</p>
<p>TRACEON=(Y,Y,Y) Full tracing with archive</p>
<p>Command Option:</p>
<p>The VIT tracing categories can be set through the F VIRTEL,TRACE command</p>
<p>F VIRTEL,TRACE,VIT=nnn nnn correspond to the three Y|N indicators.</p>
<p>Example:</p>
<p>F VIRTEL,TRACE,VIT=YYY Turn on full VIT tracing plus external buffer
archive.</p>
<p><strong>Ability to offload trace buffers to a dataset.</strong></p>
<p>With the external VIT trace facility comes the ability to offload the
trace buffers to a dataset. This offload capability can be triggered
when the maximum number of external trace buffers have been reached, as
identified in message VIR0208I, or through an operator command:</p>
<p>F VIRTEL,TRACE,VIT=OFFLOAD.</p>
<p>Setting up for trace &#8220;OFFLOAD&#8221;.</p>
<p>The trace buffers are offloaded to a GDG dataset which means historical
trace data can be kept. To set up the GDG see the below. This job can
also be found in the SAMPLIB dataset as member DEFTRGDG.</p>
<p>//*</p>
<p>//* DEFINE THE TRACE GDG DATASET</p>
<p>//*</p>
<p>//DELETE EXEC PGM=IDCAMS</p>
<p>//SYSPRINT DD SYSOUT=*</p>
<p>DELETE VIRTEL.TRACE.GDG GDG</p>
<p>DELETE VIRTEL.TRACE.GDG.DSCB NVSAM</p>
<p>SET MAXCC=0</p>
<p>//ALLOC1 EXEC PGM=IEFBR14</p>
<p>//FILE DD DSN=VIRTEL.TRACE.GDG.DSCB,</p>
<p>// UNIT=3390,DISP=(NEW,CATLG),</p>
<p>// SPACE=(TRK,(0,0)),VOL=SER=VVVVVV,</p>
<p>// DCB=BLKSIZE=13300</p>
<p>//*</p>
<p>//ALLOC2 EXEC PGM=IDCAMS</p>
<p>//SYSPRINT DD SYSOUT=*</p>
<p>//SYSIN DD *</p>
<p>DEF GDG(NAME(VIRTEL.TRACE.GDG) LIMIT(5) SCRATCH NOEMPTY)</p>
<p>/*</p>
<p>TCT option:-</p>
<p>The following TCT options have been added to support the OFFLOAD
facility. They are described below. Define the GDG dataset name to be
used for the OFFLOAD datasets. The default is VIRTEL.TRACE.GDG:-</p>
<p>TRCXDSN=gdgdsn</p>
<p>Define the number of external trace buffers and action to be taken when
that number is reached. Maximum is 999, minimum=1. Default = 255. Action
is either CLEAR (Default) or OFFLOAD:-</p>
<p>TRCXBUF=(nnn[,<em>CLEAR</em>|OFFLOAD])</p>
<p>Example:</p>
<p>TRCXBUF=(10,OFFLOAD), EXT. TRACE BUFFERS</p>
<p>TRCXDSN=SP000.SPVIREH.TRACE.GDG, OFFLOAD DSN</p>
<p>TRACEON=(Y,Y,Y), TRACE WITH EXT.HISTORY</p>
<p>Note. If external buffering is not active any offload command will be
rejected.as invalid.</p>
<p><strong>New or altered Messages</strong></p>
<p><strong>VIR0208I VIRTEL INTERNAL TRACE = xxx. EXT. BUFFERS = yyyy/zzzz.</strong></p>
<p>Module :VIR0002</p>
<p>Meaning :Provides information about the Virtel Internal Trace status.</p>
<p>xxx = VIT status where x is either a Y or N.</p>
<p>x.. No tracing or minimal tracing.</p>
<p>.x. Full tracing but no archiving</p>
<p>..x Full tracing with external archiving</p>
<p>Action : None.</p>
<p><strong>VIR0072E TRACE TABLE ARCHIVE ERROR. ARCHIVE DISABLED. RC=xx, RE=xx</strong></p>
<p>Module :VIR0000</p>
<p>Meaning :Virtel was unable to archive the VIT current buffer. The return
and reason codes are displayed. Archive will be disabled.</p>
<p>Action : Contact Technical Support.</p>
<p><strong>VIR0073I TRACE TABLE ARCHIVE OFFLOADED</strong></p>
<p>Module :VIR0004</p>
<p>Meaning :The maximum number of external VIT buffers has been reached and
a VIT offload has been triggered.</p>
<p>Action : None.</p>
<p><strong>VIR0079E UNABLE TO ALLOCATE OFFLOAD DATASET. R15=RC,
R0=RE,DSN=gdgdsname</strong></p>
<p>Module :VIR0004</p>
<p>Meaning :Virtel was unable to allocate the offload GDG. The dynamic
allocation return and reason codes are displayed.</p>
<p>Action : Check the SVC99 codes to determine why the GDG could not be
allocated. Check that the correct GDG base name is being. For additional
support contact Technical Support.</p>
<p>**
USSTAB MSG10 Support**</p>
<p>VIRTEL 4.55 now implements the VIR0021W USSTAB menu program. This
program will interrogate the customers USSTAB module and create an
equivalent 3270 MAP. The MAP will be passed to the VIR0010 routine where
it will subsequently be converted into a HTML template and served to the
browser. The generated template will provide similar functionality to
that of the VTAM USSMSG10, that being a presentation screen and support
for USSCMD and USSPARM entries. This allows customers to maintain their
USSTAB MSG10 presentation for both VTAM and VIRTEL users without
modification. The customers assembled USSTAB module, normally found in
USER.VTAMLIB or an equivalent library, must be made available to VIRTEL.
This can be done by either copying the module to a VIRTEL steplib
library or concatenating the USER.VTAMLIB library into the VIRTEL
started procedure. SAMPLIB member USSVIRT can be used to generate the
default Virtel USSTAB USSVIRT.</p>
<p><strong>Note: This is a chargeable feature and you should contact your sales
representative for further details.</strong></p>
<p>**
Virtel Administration Enhancements**</p>
<p>idnode://7840</p>
<p>**
FAQ**</p>
<p><strong>Q</strong>. I’ve just installed Virtel but when I try to execute the Admin
(HTML) from the W2H Administration Portal I get the message <em>“The
version of scenario of your scenario ‘ADMINVWM’ is “.” ‘20151215 is
required</em>.” My W2H session is then terminated.</p>
<p><a class="reference internal" href="../../../_images/image126.png"><img alt="image0" src="../../../_images/image126.png" style="width: 6.55251in; height: 3.13542in;" /></a></p>
<p>Figure 1 Error message when accessing Admin (HTML)</p>
<p><strong>Solution</strong></p>
<p>You will need to change the W2H entry point, WEB2HOST, to specify a
directory to search when loading scenarios. By default, scenarios are
loaded from the VIRTEL LOADLIB. For W2H they need to come from the
scenario SCE-DIR. Load up the Admin portal and select Admin (3270).
Navigate to the WEB2HOST entry and display the entry using PF12. Modify
the “Directory for scenarios” field to SCE-DIR. The display should look
like:-</p>
<p><a class="reference internal" href="../../../_images/image213.png"><img alt="image1" src="../../../_images/image213.png" style="width: 6.26806in; height: 3.79444in;" /></a></p>
<p>Figure 2 Entry Point display for WEB2HOST</p>
<p>Note that the scenario directory has to be SCE-DIR. Before the field was
blank indicating that scenarios should be loaded from LOADLIB. Press PF1
to confirm they update and then Press PF3 and the CLEAR to return back
to the portal screen. Press “CTRL-R” in your browser’s to refresh the
browser cache. Now select Admin (HTML) from the Administration options
and you should see the Administration panel.</p>
<p><a class="reference internal" href="../../../_images/image314.png"><img alt="image2" src="../../../_images/image314.png" style="width: 6.26806in; height: 2.43611in;" /></a></p>
<p>Figure 3 Administration Portal</p>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../TN201601/TN201601.html" class="btn btn-neutral float-right" title="Customizing colours with CSS in Virtel 4.53" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../TN201520/TN201520.html" class="btn btn-neutral" title="Using the IBM System Logger with Virtel" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Syspertec. All rights reserved.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>
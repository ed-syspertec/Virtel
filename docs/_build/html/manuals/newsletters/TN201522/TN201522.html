<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>What’s new in Virtel 4.55 &mdash; Virtel 9 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Customizing colours with CSS in Virtel 4.53" href="../TN201601/TN201601.html" />
    <link rel="prev" title="Using the IBM System Logger with Virtel" href="../TN201520/TN201520.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Virtel
              <img src="../../../_static/logo_virtel_web.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                4.61
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../virtel.html">Virtel Manuals</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../newsletters.html">Technical Newsletters</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id1">2014</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../newsletters.html#id2">2015</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../TN201501/TN201501.html">Dynamic Directory Interface (DDI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201504/TN201504.html">Running multiple instances of Virtel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201505/TN201505.html">Virtel Macros in Virtel 4.53</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201506/TN201506.html">An example of using web services with Virtel Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201507/TN201507.html">Customising Virtel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201515/TN201515.html">Using Virtel as a Secure Single Access Control Point</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201517/TN201517.html">Virtel Chinese Character Language Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201519/TN201519.html">Processing the VTAM USS MSG10 buffer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201520/TN201520.html">Using the IBM System Logger with Virtel</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">What’s new in Virtel 4.55</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id3">2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id4">2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id5">2018</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id6">2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id7">2020</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id8">2023</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../howto.html">How To Manuals</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Virtel</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../newsletters.html">Technical Newsletters</a></li>
      <li class="breadcrumb-item active">What’s new in Virtel 4.55</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/manuals/newsletters/TN201522/TN201522.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="whats-new-in-virtel-4-55">
<span id="tn201522"></span><h1>What’s new in Virtel 4.55<a class="headerlink" href="#whats-new-in-virtel-4-55" title="Permalink to this heading"></a></h1>
<p>The following newsletter discusses some of the new features that are available in Virtel Release 4.55.</p>
<p><strong>CICS QUICKLNK support for multiple CHANNEL and CONTAINER names</strong></p>
<p>Quicklink support has been enhanced to allow multiple channels and
contains. QuickLink is a protocol used in support of Syspertec’s Virtel
Transaction Gateway (VTG) product which is an alternative to IBM’s CTG
solution.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>OPTION$ FOR-QUICKLNK,
(METHOD,&#39;CALL-CONTAINER-LIST&#39;),
(PROGRAM,&#39;*TARGET&#39;),
(CONTAINERS-FOR-QUESTION,&#39;DATAIN&#39;),
(CONTAINERS-FOR-RESPONSE,&#39;DATAOUT&#39;),
(CHANNEL,&#39;*MYCHANNEL&#39;),
(TERMINAL,&#39;CICS-TERMINAL&#39;),
(RET-CODE,&#39;RETURN-CODE&#39;),
(RET-CICS1,&#39;EIBRESP&#39;),
(RET-CICS2,&#39;EIBRESP2&#39;),
TOVAR=&#39;MYPARMS&#39;
</pre></div>
</div>
<p><strong>Improved SCREEN-PROCESSING facility</strong></p>
<p>This modification introduces a new screen processing facility by
allowing you to SET$ a SCREEN-POSITION, advancing the SCREEN-POSITION,
CASE$ for a SCREEN-POSITION and COPY$ to/from a SCREEN-POSITION.</p>
<p>Example:</p>
<p>Setting a screen position. (hh equals the number of lines in the column)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SET$ SCREEN-POSITION,(lig,col,len,hh)
</pre></div>
</div>
<p>Advancing the position to next line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SET$ SCREEN-POSITION,TO-NEXT-LINE
</pre></div>
</div>
<p>If the next line is after the end of the current screen rectangle, it wraps to back to the beginning. This condition may be tested with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>IF$ NOT-FOUND,THEN=...
CASE$ which works with the current screen position:
CASE$ CURRENT-SCREEN-POSITION,(EQ,&#39;XXXX&#39;,ET1),...
</pre></div>
</div>
<p>CASE$ which works with current screen line, column, length, equal sign and hard coded column and length:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>CASE$ (=,COL,LEN),(EQ,&#39;XXXX&#39;,ET1),...
COPY$ which works with current screen line, column, length, equal sign:
COPY$ VARIABLE-TO-SCREEN,VAR=&#39;VAR1&#39;,SCREEN=(=,col,len)
</pre></div>
</div>
<p><strong>Support for MAP$ JSON input.</strong></p>
<p>Support is added to JSON format to be copied into a commarea. This complements the existing XML and QUERY data currently supported by the MAP$ statement.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>COMMAREA MAP$ FROM-VARIABLE,XML,VAR=&#39;MYINPUT&#39; default
COMMAREA MAP$ FROM-VARIABLE,QUERY,VAR=&#39;MYINPUT&#39;
COMMAREA MAP$ FROM-VARIABLE,JSON,VAR=&#39;MYINPUT&#39;
</pre></div>
</div>
<p>Other supported MAP$ structures:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>COMMAREA MAP$ FROM-INPUT,JSON (Input is in json format)
COMMAREA MAP$ FROM-INPUT,JSON,FIELD=&#39;MYINPUT&#39;
</pre></div>
</div>
<p><strong>New toolbar button to toggle the 3278T mode on/off.</strong></p>
<p>The 3278T button is hidden by default but can now be shown by selecting options in the user settings dialog.</p>
<p><strong>New UNLOAD command to unload ARBO.</strong></p>
<p>Following the performance improvements through the introduction of VSAM LSR the VIRCONF program was no longer able to access the ARBO VSAM file when VIRTEL was running. To compensate for this a new UNLOAD command has been added to VIRTEL which performs an ARBO UNLOAD.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="n">virtel</span><span class="p">,</span><span class="n">unload</span>
</pre></div>
</div>
<p>This command invokes the VIRCONF program which unloads the ARBO file. The following DD statement must be added to the Virtel procedure:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="n">SYSPUNCH</span> <span class="n">DD</span> <span class="n">DSN</span><span class="o">=</span><span class="n">SP000</span><span class="o">.</span><span class="n">VIRTELxx</span><span class="o">.</span><span class="n">VIRCONF</span><span class="o">.</span><span class="n">SYSIN</span><span class="p">,</span><span class="n">DISP</span><span class="o">=</span><span class="p">(,</span><span class="n">CATLG</span><span class="p">),</span>
<span class="o">//</span> <span class="n">UNIT</span><span class="o">=</span><span class="n">SYSDA</span><span class="p">,</span><span class="n">VOL</span><span class="o">=</span><span class="n">SER</span><span class="o">=</span><span class="n">VVVVVV</span><span class="p">,</span><span class="n">SPACE</span><span class="o">=</span><span class="p">(</span><span class="n">TRK</span><span class="p">,(</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">)),</span>
<span class="o">//</span> <span class="n">DCB</span><span class="o">=</span><span class="p">(</span><span class="n">RECFM</span><span class="o">=</span><span class="n">FB</span><span class="p">,</span><span class="n">LRECL</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span><span class="n">BLKSIZE</span><span class="o">=</span><span class="mi">6080</span><span class="p">)</span>
</pre></div>
</div>
<p>Or alternatively:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="n">SYSPUNCH</span> <span class="n">DD</span> <span class="n">SYSOUT</span><span class="o">=</span><span class="n">B</span>
</pre></div>
</div>
<p><strong>Customization of the Virtel toolbar</strong></p>
<p>The toolbar elements can now be controlled through a user custom.js Javascript element. An example is provided below.</p>
<p>Sample customization code[in custom.js]:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/*</span>
<span class="o">*</span> <span class="n">Customize</span> <span class="n">the</span> <span class="n">location</span> <span class="n">of</span> <span class="n">dynamic</span> <span class="n">toolbar</span> <span class="n">buttons</span><span class="o">.</span>
<span class="o">*</span> <span class="n">The</span> <span class="n">calls</span> <span class="n">to</span> <span class="n">this</span> <span class="n">function</span> <span class="n">are</span> <span class="n">ignored</span> <span class="n">when</span> <span class="n">they</span>
<span class="o">*</span> <span class="k">return</span> <span class="n">nothing</span><span class="p">,</span> <span class="ow">or</span> <span class="n">an</span> <span class="n">integer</span> <span class="ow">not</span> <span class="n">greater</span> <span class="n">than</span> <span class="mf">0.</span>
<span class="o">*</span>
<span class="o">*</span> <span class="n">Customizable</span> <span class="n">buttons</span> <span class="n">IDs</span> <span class="p">:</span>
<span class="o">*</span> <span class="o">&gt;</span> <span class="s1">&#39;3278T&#39;</span>
<span class="o">*</span> <span class="o">&gt;</span> <span class="s1">&#39;document-print-preview&#39;</span>
<span class="o">*</span> <span class="o">&gt;</span> <span class="s1">&#39;file-send&#39;</span>
<span class="o">*</span> <span class="o">&gt;</span> <span class="s1">&#39;file-recv&#39;</span>
<span class="o">*</span> <span class="o">&gt;</span> <span class="s1">&#39;printer&#39;</span>
<span class="o">*/</span>
<span class="n">function</span> <span class="n">customize_toolbarButtonIndex</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">id</span><span class="o">===</span><span class="s1">&#39;printer&#39;</span> <span class="o">||</span> <span class="nb">id</span><span class="o">===</span><span class="s1">&#39;document-print-preview&#39;</span><span class="p">)</span> <span class="p">{</span>
<span class="k">return</span> <span class="n">getToolbarButtonIndex</span><span class="p">(</span><span class="s1">&#39;disconnect&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>NEW MAP$ FROM-INPUT TO-VARIABLES parameter</strong></p>
<p>The MAP$ FROM-INPUT statement now has a new TO-VARIABLES parameter. This enables conversion of input directly to output variables without the need to go through an intermediate commarea.</p>
<p>Before you had to use three statements:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>JSONAF1 MAP$ FROM-INPUT,JSON,FIELD=&#39;MYINPUT&#39;    generate commarea
JSONAF1 MAP$ TO-VARIABLE,VAR=&#39;MYCRBO00&#39;         copy commarea to variable
JSONAF1 TOVAR$ FROM-VARIABLE,VAR=&#39;MYCRBO00&#39;     generate variables

This would convert the JSON input to variables with the names specified in the JSONAF1 MAP$. Now, the similar conversion can be achieved with   just one statement:-
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>JSONAF1 MAP$ FROM-INPUT,JSON,TO-VARIABLES,FIELD=&#39;MYINPUT&#39;    generate variables
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This new form of the instruction alleviates the need for an OCCURS=UNLIMITED at the end of a description.</p>
</div>
<p><strong>Allow re-execution of a MAP$ FROM-INPUT</strong></p>
<p>In the following scenario, the two ‘MAP$ FROM-INPUT’ will produce the same output.</p>
<p>Example:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>JSON1 SCREENS APPL=JSON1
*
SCENARIO INITIAL
*
                SET$ ENCODING,UTF-8,&#39;IBM1147&#39;
JSONAF1 MAP$ BEGIN
                MAP$ AREA,WITH=&#39;inAFR&#39;,LENGTH=30
                MAP$ AREA,WITH=&#39;inICT&#39;,LENGTH=30
*
INSUBFS MAP$ BEGIN,WITH=&#39;friends&#39;
INSUBF  MAP$ BEGIN,WITH=NEXT-ELEMENT,OCCURS=UNLIMITED
                MAP$ AREA,WITH=&#39;inRRN&#39;,LENGTH=17
                MAP$ AREA,WITH=&#39;inQtyT10&#39;,LENGTH=10,TYPE=9
INSUBF  MAP$ END
INSUBFS MAP$ END
JSONAF1 MAP$ END
*
JSONAF1 MAP$ FROM-INPUT,JSON,TO-VARIABLES,FIELD=&#39;MYINPUT&#39;
                ERROR$ 0,&#39;COUNT=&#39;,&#39;*INSUBF&#39;
                DEBUG$ SNAP,TERMINAL
                PERFORM$ DECODE
*
JSONAF1 MAP$ FROM-INPUT,JSON,TO-VARIABLES,FIELD=&#39;MYINPUT&#39;
                ERROR$ 0,&#39;COUNT=&#39;,&#39;*INSUBF&#39;
                DEBUG$ SNAP,TERMINAL
                PERFORM$ DECODE
*
SCENARIO END
*
DECODE  SCENARIO SUBROUTINE
DECODELOOP LABEL$
                IF$ NOT-EXISTS-VARIABLE,&#39;inRRN&#39;,THEN=THEEND
                ERROR$ 0,&#39;inRRN=&#39;,&#39;*inRRN&#39;
                ERROR$ 0,&#39;inQtyT10=&#39;,&#39;*inQtyT10&#39;
                POP$ FIRST-VALUE-OF,VAR=&#39;inRRN&#39;
                POP$ FIRST-VALUE-OF,VAR=&#39;inQtyT10&#39;
                GOTO$ DECODELOOP
THEEND  LABEL$
SCENARIO END
*
                SCRNEND
                END ,
</pre></div>
</div>
<p><strong>New trimming functions. CASE$ RTRIM and LTRIM / EMPTY</strong></p>
<p>Two new optional parameters for the CASE$ instruction, RTRIM= and LTRIM=, allow the removal of one or more characters from the various operands of the CASE$ instruction before the comparisons are done. Also, a new CASE$ condition EMPTY is added to allow testing whether a variable or a part of the screen buffer is empty. The empty condition can be tested after the variable or screen has been trimmed.</p>
<p>Examples:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  CASE$ &#39;MYVAR&#39;,                                *
   (EMPTY,L2),                                  *
   (CONTAINS,&#39;*Val&#39;,L1)                         *
   RTRIM=(&#39;_&#39;,&#39; &#39;),                             *
   LTRIM=(&#39;_&#39;,&#39; &#39;),                             *
   ELSE=other
*
  CASE$ (1,1,80),                               *
   (CONTAINS,&#39;Val&#39;,L1),RTRIM=(&#39;_&#39;,&#39; &#39;)
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>1: CASE$ do not change the contents of the variables or parts of the screen being compared.</p>
<p>2: If the variable being tested does not exist, (eg ‘MYVAR’ does not exist), it is not considered empty. Rather, the CASE$ branches at the ELSE= label.</p>
</div>
<p>LTRIM and RTRIM will trim both the value being tested (variable or part of the screen buffer) and the variable arguments, but not the static arguments.</p>
<p>For example:-</p>
<blockquote>
<div><p>(EQ,’*VAR1’,label1) The value of the VAR1 variable will be trimmed prior to comparison.</p>
<p>(EQ,’zagreb ‘,label2) The value of the string ‘zagreb ‘ will NOT be trimmed – it is a static argument.</p>
</div></blockquote>
<p><strong>New trimming functions. COPY$ RTRIM and LTRIM</strong></p>
<p>Two new optional parameters for the COPY$ LIST-TO-VARIABLE instruction, RTRIM= and LTRIM=, will trim one or more characters from the various variable operands of the COPY$ instruction prior to performing the copy.</p>
<p>Example:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>COPY$ LIST-TO-VARIABLE,VAR=&#39;VAR1&#39;,                          *
        RTRIM=(&#39;_&#39;,&#39; &#39;),LTRIM=(&#39;_&#39;,&#39; &#39;),                      *
    LIST=(&#39;string1&#39;,&#39;*var1&#39;,VARIABLE,&#39;var2&#39;)
</pre></div>
</div>
<p>The variable VAR1 is created/modified, with ‘string1’ copied as is, var1 and var2 left and right trimmed.</p>
<p><strong>Indirection on OUTPUT-FILE-TO-VARIABLE FILE=</strong></p>
<p>This feature allows indirection of a file name. The filename is pointed to by the variable *variable_name.</p>
<p>Example:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>COPY$ OUTPUT-FILE-TO-VARIABLE,FILE=&#39;*MYFILE&#39;,VAR=&#39;MYRESULT&#39;
</pre></div>
</div>
<p><strong>COPY$ VARIABLE-TO-VARIABLE</strong></p>
<p>Copies a source variable to a target variable. VAR= must specifies two variable names, the first being the source, the second the target.</p>
<p>TYPE=REP may be specified to mean the target variable should be replaced. Otherwise the new value is appended the target variable.</p>
<p>OFFSET= is the number of characters to skip in the string, defaulting to 0.</p>
<p>LENGTH= is how many characters to copy, defaulting to the remainder of the string from start. If length is longer than the string, padding occurs with the PAD= character. This defaults to the blank.</p>
<p>Example:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>COPY$ VARIABLE-TO-VARIABLE,                     *
    VAR=(&#39;VAR1&#39;,&#39;VAR2&#39;),                        *
    OFFSET=8,LENGTH=5,PAD=&#39; &#39;
</pre></div>
</div>
<p><strong>COPY$ CURRENT-LINE enhancement</strong></p>
<p>This update complements the CASES$ CURRENT-SCREEN POSITION feature. It allows copying of current values of the field in the SCREEN-POSITION to a variable. The length of the returned value may be specified with the LENGTH= parameter.</p>
<p>Examples:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SET$ SCREEN-POSITION,(10,20,5,15)
SET$ SCREEN-POSITION,TO-NEXT-LINE
COPY$ SYSTEM-TO-VARIABLE,VAR=&#39;L1&#39;,LENGTH=2,                       *
        FIELD=(VALUE-OF,CURRENT-LINE)
COPY$ SYSTEM-TO-VARIABLE,VAR=&#39;C1&#39;,LENGTH=2,                       *
        FIELD=(VALUE-OF,CURRENT-COLUMN)
COPY$ SYSTEM-TO-VARIABLE,VAR=&#39;L2&#39;,                                *
        FIELD=(VALUE-OF,CURRENT-LENGTH)
COPY$ SYSTEM-TO-VARIABLE,VAR=&#39;H1&#39;,                                *
        FIELD=(VALUE-OF,CURRENT-HEIGHT)
</pre></div>
</div>
<p><strong>Virtel Memory Display</strong></p>
<p>The Memory display feature is a memory diagnostic tool created to trap possible invalid Virtel memory free requests. Such request can lead to ABEND0C4s and other unwanted behaviour. Virtel memory requests (PRENDRE and RENDRE) are tracked in a diagnostic storage area located above the bar. The area is 1MB in size and can contain 65536 active storage requests. An active storage request is a storage area that has been gotten (PRENDRE) and is pending a Virtel storage release (RENDRE). This diagnostic tool should only be used when recommended by Technical Support.</p>
<p>The feature is supported by the following command:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="n">VIRTEL</span><span class="p">,</span><span class="n">MEMDISPLAY</span>
</pre></div>
</div>
<p>This produces a breakdown of the internal VIRTEL subpools. See the following command response:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="n">SPTHOLTV</span><span class="p">,</span><span class="n">MEMDISPLAY</span>
<span class="n">VIR0200I</span> <span class="n">MEMDISPLAY</span>
<span class="n">VIR0271I</span> <span class="n">DISPLAY</span> <span class="mi">763</span>
<span class="n">SP1</span><span class="o">=</span><span class="mi">00024478</span> <span class="n">SP2</span><span class="o">=</span><span class="mi">00000</span><span class="n">CCC</span> <span class="n">SP3</span><span class="o">=</span><span class="mi">00090</span><span class="n">DE0</span> <span class="n">SP4</span><span class="o">=</span><span class="mf">000027E4</span> <span class="mi">00910091</span> <span class="mi">00030009</span> <span class="mi">02430294</span> <span class="mi">00090011</span>
<span class="n">SP5</span><span class="o">=</span><span class="mi">00029293</span> <span class="n">SP6</span><span class="o">=</span><span class="mi">0004</span><span class="n">DCF4</span> <span class="n">SP7</span><span class="o">=</span><span class="mi">00000000</span> <span class="n">SP8</span><span class="o">=</span><span class="mi">00000000</span> <span class="mi">00</span><span class="n">A404C7</span> <span class="mi">01370137</span> <span class="mi">00000000</span> <span class="mi">00000002</span>
<span class="n">POOL</span> <span class="n">CONTROL</span> <span class="n">BLOCK</span><span class="o">.</span> <span class="n">SUBPOOL</span><span class="o">=</span><span class="mi">1</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">00108000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">00108008</span> <span class="c1">#FQ=00000001 FRE=0000B2A0</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">000</span><span class="n">F8000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">000</span><span class="n">F8008</span> <span class="c1">#FQ=00000001 FRE=00000080</span>
<span class="n">PAG</span><span class="o">=</span><span class="mf">000E8000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mf">000E8008</span> <span class="c1">#FQ=00000001 FRE=00000078</span>
<span class="n">POOL</span> <span class="n">CONTROL</span> <span class="n">BLOCK</span><span class="o">.</span> <span class="n">SUBPOOL</span><span class="o">=</span><span class="mi">2</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">EC14000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EC14008</span> <span class="c1">#FQ=00000004 FRE=0000F2F0</span>
<span class="n">POOL</span> <span class="n">CONTROL</span> <span class="n">BLOCK</span><span class="o">.</span> <span class="n">SUBPOOL</span><span class="o">=</span><span class="mi">3</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">ECC4000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">ECC4008</span> <span class="c1">#FQ=00000002 FRE=00006408</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">ED54000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">ED54008</span> <span class="c1">#FQ=00000002 FRE=00001750</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">EC74000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EC74008</span> <span class="c1">#FQ=00000001 FRE=00000878</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">ED04000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">ED04008</span> <span class="c1">#FQ=00000001 FRE=00000878</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">ED94000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">ED94008</span> <span class="c1">#FQ=00000002 FRE=00002768</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">ECF4000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">ECF4008</span> <span class="c1">#FQ=00000002 FRE=000017F0</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">EE04000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EE04008</span> <span class="c1">#FQ=00000001 FRE=00000878</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">ED74000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">ED74008</span> <span class="c1">#FQ=00000001 FRE=00000878</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">ECE4000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">ECE4008</span> <span class="c1">#FQ=00000001 FRE=00000878</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">EC64000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EC64008</span> <span class="c1">#FQ=00000001 FRE=00000878</span>
<span class="n">POOL</span> <span class="n">CONTROL</span> <span class="n">BLOCK</span><span class="o">.</span> <span class="n">SUBPOOL</span><span class="o">=</span><span class="mi">4</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">EC04000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EC04008</span> <span class="c1">#FQ=00000003 FRE=0000D750</span>
<span class="n">POOL</span> <span class="n">CONTROL</span> <span class="n">BLOCK</span><span class="o">.</span> <span class="n">SUBPOOL</span><span class="o">=</span><span class="mi">5</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">ED24000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">ED24008</span> <span class="c1">#FQ=00000001 FRE=0000A1D8</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">ED14000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">ED14008</span> <span class="c1">#FQ=00000001 FRE=000043B8</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">EC54000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EC54008</span> <span class="c1">#FQ=00000001 FRE=000043B8</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">EBB4000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EBB4008</span> <span class="c1">#FQ=00000001 FRE=000043B8</span>
<span class="n">POOL</span> <span class="n">CONTROL</span> <span class="n">BLOCK</span><span class="o">.</span> <span class="n">SUBPOOL</span><span class="o">=</span><span class="mi">6</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">EBF4000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EBF4008</span> <span class="c1">#FQ=00000003 FRE=00000D40</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">EBE4000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EBE4008</span> <span class="c1">#FQ=00000001 FRE=00000088</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">EBD4000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EBD4008</span> <span class="c1">#FQ=00000001 FRE=000000B8</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">EBC4000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EBC4008</span> <span class="c1">#FQ=00000001 FRE=000000D0</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">EBA4000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EBA4008</span> <span class="c1">#FQ=00000001 FRE=00000108</span>
<span class="n">POOL</span> <span class="n">CONTROL</span> <span class="n">BLOCK</span><span class="o">.</span> <span class="n">SUBPOOL</span><span class="o">=</span><span class="mi">7</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">00000000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">00000000</span> <span class="c1">#FQ=00000000 FRE=00000000</span>
<span class="n">POOL</span> <span class="n">CONTROL</span> <span class="n">BLOCK</span><span class="o">.</span> <span class="n">SUBPOOL</span><span class="o">=</span><span class="mi">8</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">00000000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">00000000</span> <span class="c1">#FQ=00000000 FRE=00000000</span>
<span class="n">ALLOC</span><span class="o">=</span><span class="mi">0001213</span><span class="n">K</span><span class="p">,</span> <span class="n">FREE</span><span class="o">=</span><span class="mi">0000314</span><span class="n">K</span><span class="p">,</span> <span class="n">TOTAL</span><span class="o">=</span><span class="mi">0001536</span><span class="n">K</span>
<span class="n">VIR0272I</span> <span class="n">END</span>
</pre></div>
</div>
<p><strong>Enablement/Dis-enablement</strong></p>
<p>The memory diagnostic tool is only activated through the following TCT parameter</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MEMORY</span><span class="o">=</span><span class="p">(</span><span class="n">ABOVE</span><span class="p">,</span><span class="n">MEMHST</span><span class="p">),</span>
</pre></div>
</div>
<p>The memory diagnostic tool can be deactivated by the following command:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="n">VIRTEL</span><span class="p">,</span><span class="n">MEMDISPLAY</span><span class="p">,</span><span class="n">DISABLE</span>
</pre></div>
</div>
<p><em>Operation</em></p>
<p>With the memory diagnostic tool active the following command be used to summarize the VIRTEL subpool active allocated memory:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="n">VIRTEL</span><span class="p">,</span><span class="n">MEMDISPLAY</span>
</pre></div>
</div>
<p>The following will be displayed:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="n">SPTHOLTV</span><span class="p">,</span><span class="n">MEMDISPLAY</span>
<span class="n">VIR0200I</span> <span class="n">MEMDISPLAY</span>
<span class="n">VIR0271I</span> <span class="n">DISPLAY</span> <span class="mi">978</span>
<span class="n">SP1</span><span class="o">=</span><span class="mi">00024478</span> <span class="n">SP2</span><span class="o">=</span><span class="mi">00001044</span> <span class="n">SP3</span><span class="o">=</span><span class="mf">0008E35</span><span class="n">F</span> <span class="n">SP4</span><span class="o">=</span><span class="mi">00002</span><span class="n">F61</span>
<span class="mi">00910091</span> <span class="mi">00040009</span> <span class="mi">02380294</span> <span class="mi">000</span><span class="n">B0011</span>
<span class="n">SP5</span><span class="o">=</span><span class="mi">000317</span><span class="n">DC</span> <span class="n">SP6</span><span class="o">=</span><span class="mi">0004</span><span class="n">DF73</span> <span class="n">SP7</span><span class="o">=</span><span class="mi">00000000</span> <span class="n">SP8</span><span class="o">=</span><span class="mi">00000220</span> <span class="mi">00</span><span class="n">C504C7</span> <span class="mi">01370137</span> <span class="mi">00000000</span> <span class="mi">00000002</span>
<span class="n">POOL</span> <span class="n">CONTROL</span> <span class="n">BLOCK</span><span class="o">.</span> <span class="n">SUBPOOL</span><span class="o">=</span><span class="mi">1</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">00109000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">00109008</span> <span class="c1">#FQ=00000001 FRE=0000B2A0</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">000</span><span class="n">F9000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">000</span><span class="n">F9008</span> <span class="c1">#FQ=00000001 FRE=00000080</span>
<span class="n">PAG</span><span class="o">=</span><span class="mf">000E9000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mf">000E9008</span> <span class="c1">#FQ=00000001 FRE=00000078</span>
<span class="n">POOL</span> <span class="n">CONTROL</span> <span class="n">BLOCK</span><span class="o">.</span> <span class="n">SUBPOOL</span><span class="o">=</span><span class="mi">2</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">EC14000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EC14008</span> <span class="c1">#FQ=00000005 FRE=0000EF68</span>
<span class="n">POOL</span> <span class="n">CONTROL</span> <span class="n">BLOCK</span><span class="o">.</span> <span class="n">SUBPOOL</span><span class="o">=</span><span class="mi">3</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">ECD4000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">ECD4008</span> <span class="c1">#FQ=00000002 FRE=00009DF8</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">ED54000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">ED54008</span> <span class="c1">#FQ=00000002 FRE=00001750</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">EC84000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EC84008</span> <span class="c1">#FQ=00000001 FRE=00000878</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">ED04000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">ED04008</span> <span class="c1">#FQ=00000001 FRE=00000878</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">ED94000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">ED94008</span> <span class="c1">#FQ=00000002 FRE=00002768</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">ECF4000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">ECF4008</span> <span class="c1">#FQ=00000001 FRE=00000878</span>
<span class="n">AG</span><span class="o">=</span><span class="mi">1</span><span class="n">EE04000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EE04008</span> <span class="c1">#FQ=00000001 FRE=00000878</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">ED74000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">ED74008</span> <span class="c1">#FQ=00000001 FRE=00000878</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">ECE4000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">ECE4008</span> <span class="c1">#FQ=00000001 FRE=00000878</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">EC64000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EC64008</span> <span class="c1">#FQ=00000001 FRE=00000878</span>
<span class="n">POOL</span> <span class="n">CONTROL</span> <span class="n">BLOCK</span><span class="o">.</span> <span class="n">SUBPOOL</span><span class="o">=</span><span class="mi">4</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">EC04000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EC04008</span> <span class="c1">#FQ=00000004 FRE=0000CFA0</span>
<span class="n">POOL</span> <span class="n">CONTROL</span> <span class="n">BLOCK</span><span class="o">.</span> <span class="n">SUBPOOL</span><span class="o">=</span><span class="mi">5</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">ECA4000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">ECA4008</span> <span class="c1">#FQ=00000002 FRE=0000D870</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">ED14000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">ED14008</span> <span class="c1">#FQ=00000001 FRE=000043B8</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">ED24000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">ED24008</span> <span class="c1">#FQ=00000001 FRE=000043B8</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">EC74000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EC74008</span> <span class="c1">#FQ=00000001 FRE=0000A1D8</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">EC54000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EC54008</span> <span class="c1">#FQ=00000001 FRE=0000A1D8</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">EBB4000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EBB4008</span> <span class="c1">#FQ=00000001 FRE=000043B8</span>
<span class="n">POOL</span> <span class="n">CONTROL</span> <span class="n">BLOCK</span><span class="o">.</span> <span class="n">SUBPOOL</span><span class="o">=</span><span class="mi">6</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">EBF4000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EBF4008</span> <span class="c1">#FQ=00000002 FRE=00000A50</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">EBE4000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EBE4008</span> <span class="c1">#FQ=00000001 FRE=00000088</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">EBD4000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EBD4008</span> <span class="c1">#FQ=00000001 FRE=000000B8</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">EBC4000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EBC4008</span> <span class="c1">#FQ=00000001 FRE=000000D0</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">EBA4000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">EBA4008</span> <span class="c1">#FQ=00000001 FRE=00000108</span>
<span class="n">POOL</span> <span class="n">CONTROL</span> <span class="n">BLOCK</span><span class="o">.</span> <span class="n">SUBPOOL</span><span class="o">=</span><span class="mi">7</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">00000000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">00000000</span> <span class="c1">#FQ=00000000 FRE=00000000</span>
<span class="n">POOL</span> <span class="n">CONTROL</span> <span class="n">BLOCK</span><span class="o">.</span> <span class="n">SUBPOOL</span><span class="o">=</span><span class="mi">8</span>
<span class="n">PAG</span><span class="o">=</span><span class="mi">1</span><span class="n">ECB4000</span> <span class="n">NFQ</span><span class="o">=</span><span class="mi">1</span><span class="n">ECB4008</span> <span class="c1">#FQ=00000001 FRE=0000FDB0</span>
<span class="n">ALLOC</span><span class="o">=</span><span class="mi">0001240</span><span class="n">K</span><span class="p">,</span> <span class="n">FREE</span><span class="o">=</span><span class="mi">0000479</span><span class="n">K</span><span class="p">,</span> <span class="n">TOTAL</span><span class="o">=</span><span class="mi">0001728</span><span class="n">K</span>
<span class="n">VIR0272I</span> <span class="n">END</span>
</pre></div>
</div>
<p>The display response is split into a summary section for each subpool and a detailed allocated page block and free queue element display for each subpool.</p>
<p>In the summary display, each subpool has two displayed values. The top value is the amount of storage currently allocated and the value below represents the current allocation in 1K chunks and a peak allocation in 1K chunks.</p>
<p>For example in the above display in SP5 we can see that there is an allocated value of 317DC bytes, represented by 00C5 in 1K chunks, and a peak value of 04C7 in 1K chunks.</p>
<p>At the bottom of the display is a line which provide allocated, free and total values.</p>
<p><em>Messages</em></p>
<p><strong>VIRT0085I</strong> INVALID MEMORY FREE REQUEST. ADDR=aaaaaaaa, SUBPOOL=ss, CALLER=aaaaaaaa’</p>
<p>Module : VIR0000
Meaning : The Virtel memory request is invalid because:-</p>
<ul class="simple">
<li><p>The subpool is invalid.</p></li>
<li><p>The address to be freed is outside the associated subpool pages.</p></li>
<li><p>The address to be freed is not found in the DSA table.</p></li>
</ul>
<p>Action : Virtel continues. If you get a significant number of these messages you consider a schedule a restart of Virtel.</p>
<p><strong>VIRT0086E</strong> GETMAIN FAILED. MEMORY DSA DISABLED.</p>
<p>Module :VIR0000</p>
<p>Meaning: Virtel was ubale to GETMAIN storage “above the bar” for the DSA table.</p>
<p>Action: Increase MEMLIMIT= in the JCL to provide more “above the bar” storage. Virtel continues but you should contact support if the problem continues. Suggest a default of MEMLIMIT=2G.</p>
<p><strong>VIRT0087E</strong> FATAL DSA TABEL ERROR</p>
<p>Module :VIR0000</p>
<p>Meaning: The DSA memory table has been corrupted or has been invalidated. Memory diagnostics has been disabled.</p>
<p>Action: Virtel continues but you should consider a scheduled restart of Virtel.</p>
<p><strong>VIRT0088E</strong> DSA TABLE FULL. MEMORY DIAGS. DISABLED</p>
<p>Module :VIR0000</p>
<p>Meaning: The DSA memory table is full and cannot store further entries. Memory diagnostics disabled.</p>
<p>Action: Virtel contines but you should contact support support. Schedule a restart of Virtel.</p>
<p><strong>New TCT Parameters:</strong></p>
<p>New MEMORY parameter - MEMHST</p>
<p>MEMORY=(BELOW/ABOVE(DEBUG | MEMHST | ALLOW64BITS)</p>
<p>MEMORY=(ABOVE,MEMHST) turns on the Virtel memory diagnostic tool. This should only be implemented when advised to do so by Technical Support. Performance degradation might occur due to the additional monitoring
services. This will depend on VIRTEL demand.</p>
<p>Example:-</p>
<p>Use Virtel memory management with memory diagnostic tool and above the bar storage.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MEMORY</span><span class="o">=</span><span class="p">(</span><span class="n">ABOVE</span><span class="p">,</span><span class="n">MEMHST</span><span class="p">,</span><span class="n">ALLOW64BITS</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>New diagnostic command option - SNAPMSG</strong></p>
<p>The SNAPMSG enhancement allows a SNAP or DUMP to be taken whenever a particular message number is issued by VIRTEL. The command has an additional search field which can be used to identify a message with a particular character string. For example a specific return code. The enhancement is defined within the TCT using the SNAPMSG= keyword or as a command.</p>
<p>Command format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="n">VIRTEL</span><span class="p">,</span><span class="n">SNAPMSG</span><span class="o">=</span><span class="n">msgno</span><span class="p">[,</span><span class="n">search</span><span class="p">],[</span><span class="n">S</span><span class="o">|</span><span class="n">A</span><span class="p">]</span>
</pre></div>
</div>
<p>TCT keyword:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SNAPMSG</span><span class="o">=</span><span class="p">(</span><span class="n">msgno</span><span class="p">,</span><span class="n">search</span><span class="p">,</span><span class="n">action</span><span class="p">)</span>
</pre></div>
</div>
<p>Default search is none.</p>
<p>Default action is SNAP</p>
<p>Constraints:</p>
<ul class="simple">
<li><p>All msgno are 8 characters.</p></li>
<li><p>The search field has is restricted to a maximum of 10 Characters. Anything beyond this will be ignored.</p></li>
<li><p>Actions: S = SNAP or A = ABEND.</p></li>
<li><p>Virtel will abend with a U0999 abend code, reason code 15 if the ABEND action is used.</p></li>
</ul>
<p><em>Messages</em></p>
<p><strong>‘VIR0262W</strong> SNAPMSG TRIGGERED - VIRTEL ABENDED | SNAP TAKEN’,</p>
<p>Module :VIR0002</p>
<p>Meaning A message has been trapped by the SNAPMSG function. Action taken will be either a SNAP dump or an ABEND of VirteL.</p>
<p>Action :Determined by TCT parameters or the action set in the SNAPMSG=command.</p>
<p><em>Examples</em></p>
<p>TCT:</p>
<p>Snap message VIR2102W with search field USSTAB:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SNAPMSG</span><span class="o">=</span><span class="p">(</span><span class="n">VIR2102W</span><span class="p">,</span><span class="n">USSTAB</span><span class="p">,</span><span class="n">S</span><span class="p">),</span>
</pre></div>
</div>
<p>Command:</p>
<p>Abend VIRTEL fi message VIR2102W is caught with search field USSX:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>F VIRTEL,SNAPMSG=VIR2102W,USSX,A

Response:-

15.35.51 JOB05133 VIR0200I SNAPMSG=VIR2102W,USSX,A
15.35.58 JOB05133 VIRHT51I HTTP-CLI CONNECTING CLVTA078 TO 192.168.092.061:49878
15.35.58 JOB05133 VIR2102W UNABLE TO LOAD THE TRANSACTION USSTAB USSX . DEFAULT USSTAB USSVIRT WILL BE USED.
15.35.58 JOB05133 VIR0055W SNAPMSG TRIGGERED - VIRTEL ABENDED**
15.35.58 JOB05133 VIR0700W ERROR IN TASK MAIN PSW= 078C1000 800E54FE
15.35.58 JOB05133 VIR0400 DATE=14 Dec 2015 TIME= 15:35:58 TASK=MAIN ABEND=ASRA TERM=CLVTA078 APPLICATION=APPLHOLT VERSION=4.55 MVS
15.35.58 JOB05133 VIR0016W ABEND ASRA TERM=CLVTA078 PROG= OFFSET=+0000
15.35.58 JOB05133 VIR0016W PSW = 078C1000 800E54FE 0002000D 00000000
15.35.58 JOB05133 VIR0016W R7 = VIR0010 +39C2
15.35.58 JOB05133 VIR0016W R8 = VIR0021W +1000
15.35.58 JOB05133 VIR0016W R10 = VIR0099 +0000
15.35.58 JOB05133 $HASP375 SPTHOLTV ESTIMATE EXCEEDED BY 78,000 LINES
15.36.02 JOB05133 VIR0038I SNAP COMPLETE
15.36.03 JOB05133 $HASP375 SPTHOLTV ESTIMATE EXCEEDED BY 138,000 LINES
15.36.04 JOB05133 IEA995I SYMPTOM DUMP OUTPUT 953
                953 USER COMPLETION CODE=0999 REASON CODE=0000000F
                953 TIME=15.35.58 SEQ=04869 CPU=0000 ASID=001C
                953 PSW AT TIME OF ERROR 078C1000 800E54FE ILC 2 INTC 0D
                953 ACTIVE LOAD MODULE ADDRESS=000E5178 OFFSET=00000386 953 NAME=VIR0002A
                953 DATA AT PSW 000E54F8 - 00181610 0A0D9240 A7A7D208
                953 GR 0: C4000000 1: C40003E7
                953 2: 220B987C 3: 1EBF8278
                953 4: 00035A4B 5: 00035A79
                953 6: 00000000 7: 1EA8972A
                953 8: 1EC6DDF0 9: 1EC0B778
                953 A: 00036100 B: 1EBC4668
                953 C: 000E5178 D: 0011CCE8
                953 E: 0000002E F: 0000000F
                953 END OF SYMPTOM DUMP
</pre></div>
</div>
<p><strong>Virtel Logger extract and format program.</strong></p>
<p>VIR0002B is a program that can be run to extract the VIRTEL records from the System Logger. The VIRTEL log is written to the system logger when LOG=LOGGER is specified in the TCT.</p>
<p><em>Program Details</em></p>
<p>SAMPLE JCL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//*</span>
<span class="o">//*</span> <span class="n">DESCRIPTION</span>
<span class="o">//*</span>
<span class="o">//</span><span class="n">LOGGER</span> <span class="n">PROC</span> <span class="n">P</span><span class="o">=</span>
<span class="o">//</span><span class="n">S01</span> <span class="n">EXEC</span> <span class="n">PGM</span><span class="o">=</span><span class="n">VIR0002B</span><span class="p">,</span><span class="n">PARM</span><span class="o">=</span><span class="s1">&#39;&amp;P&#39;</span>
<span class="o">//</span><span class="n">STEPLIB</span> <span class="n">DD</span> <span class="n">DSN</span><span class="o">=</span><span class="n">VIRTEL</span><span class="o">.</span><span class="n">LOADLIB</span><span class="p">,</span><span class="n">DISP</span><span class="o">=</span><span class="n">SHR</span>
<span class="o">//</span><span class="n">VIRLOG</span>  <span class="n">DD</span> <span class="n">SYSOUT</span><span class="o">=*</span><span class="p">,</span><span class="n">DCB</span><span class="o">=</span><span class="p">(</span><span class="n">LRECL</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span><span class="n">BLKSIZE</span><span class="o">=</span><span class="mi">25500</span><span class="p">,</span><span class="n">RECFM</span><span class="o">=</span><span class="n">VB</span><span class="p">)</span>
<span class="o">//</span> <span class="n">PEND</span>
<span class="o">//</span><span class="n">S01</span> <span class="n">EXEC</span> <span class="n">LOGGER</span><span class="p">,</span><span class="n">P</span><span class="o">=</span><span class="s1">&#39;DELETE(&gt;2)&#39;</span>
</pre></div>
</div>
<p><em>Parameters</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>         <span class="p">(</span><span class="o">&gt;</span><span class="n">nnn</span><span class="p">)</span>
<span class="n">COPY</span> <span class="p">[</span><span class="o">-------------------</span><span class="p">]</span>
      <span class="p">(</span><span class="n">fromdate</span><span class="p">[,</span><span class="n">todate</span><span class="p">])</span>

          <span class="p">(</span><span class="o">&gt;</span><span class="n">nnn</span><span class="p">)</span>
<span class="n">DELETE</span> <span class="p">[</span><span class="o">-------------------</span><span class="p">]</span>
              <span class="p">(</span><span class="n">date</span><span class="p">)</span>

<span class="n">Date</span> <span class="nb">format</span> <span class="o">=</span> <span class="n">yyyyddd</span>

<span class="n">Examples</span><span class="p">:</span>
<span class="n">COPY</span>                     <span class="n">Copy</span> <span class="nb">all</span> <span class="n">records</span>
<span class="n">COPY</span><span class="p">(</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">)</span>                 <span class="n">Copy</span> <span class="n">records</span> <span class="n">older</span> <span class="n">than</span> <span class="mi">2</span> <span class="n">days</span>
<span class="n">COPY</span><span class="p">(</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span>                 <span class="n">Copy</span> <span class="n">up</span> <span class="n">to</span> <span class="n">yesterday</span>
<span class="n">DELETE</span><span class="p">(</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">)</span>               <span class="n">Delete</span> <span class="n">records</span> <span class="n">older</span> <span class="n">than</span> <span class="mi">2</span> <span class="n">days</span>
<span class="n">COPY</span><span class="p">(</span><span class="mi">2015047</span><span class="p">)</span>            <span class="n">Copy</span> <span class="n">records</span> <span class="kn">from</span> <span class="mf">2015.047</span>
<span class="n">COPY</span><span class="p">(</span><span class="mi">2015047</span><span class="p">,</span><span class="mi">2015048</span><span class="p">)</span>    <span class="n">Copy</span> <span class="n">records</span> <span class="kn">from</span> <span class="mf">2015.047</span> <span class="n">thru</span> <span class="n">to</span> <span class="mf">2015.048</span>
<span class="n">DELETE</span><span class="p">(</span><span class="mi">2015047</span><span class="p">)</span>          <span class="n">Delete</span> <span class="n">records</span> <span class="n">prior</span> <span class="n">to</span> <span class="mf">2015.047</span>

<span class="n">COPY</span><span class="p">(</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">),</span><span class="n">DELETE</span><span class="p">(</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">)</span>      <span class="n">Will</span> <span class="n">copy</span> <span class="n">records</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">previous</span>
                         <span class="ow">and</span> <span class="n">earlier</span><span class="p">,</span> <span class="ow">and</span> <span class="n">will</span> <span class="n">then</span> <span class="n">delete</span>      <span class="kn">from</span> <span class="mi">2</span>
                         <span class="n">days</span> <span class="n">ago</span> <span class="n">leaving</span> <span class="n">about</span> <span class="mi">24</span>      <span class="n">hours</span>
                         <span class="n">of</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">log</span> <span class="n">stream</span><span class="o">.</span>
</pre></div>
</div>
<p><em>Messages</em></p>
<p><strong>VIR0280I</strong> Parameter Error</p>
<p>Module : VIR0002B</p>
<p>Meaning :Invalid parameters in PARM field.</p>
<p>Action :Correct PARM field and provide valid parameters.</p>
<p><strong>VIR0281E</strong> System Logger Error. xxxxxxxx. Return Code xx, Reason code nnnn</p>
<p>Module : VIR0002B</p>
<p>Meaning :Logger service has failed in routine <em>xxxxxxxx</em></p>
<p>Action :Contact technical support.</p>
<p><strong>VIR0282W</strong> No records in range specified</p>
<p>Module : VIR0002B</p>
<p>Meaning :The parameters provided in the PARM field did not select any records from the log.</p>
<p>Action :Check that valid parameters have been provided.</p>
<p><strong>VIR0283W</strong> The log stream is empty</p>
<p>Module : VIR0002B</p>
<p>Meaning :The log stream has no Virtel records.</p>
<p>Action :None.</p>
<p><strong>VIR0284W</strong> Records are not available. xxxxxxxx. Return code xx, Reason code xxxx</p>
<p>Module : VIR0002B</p>
<p>Meaning :Logger service failed to extract any records due to an error in routine xxxxxxxx.</p>
<p>Action :Correct technical support.</p>
<p><strong>VIR0285E</strong> Unable to open DDNAME VIRLOG</p>
<p>Module : VIR0002B</p>
<p>Meaning :The VIRLOG output DDNAME failed to open.</p>
<p>Action :Correct the JCL and rerun the job.</p>
<p><strong>New JCL Parameters. IP= and CLONE=</strong></p>
<p>The purpose of this feature is to lower the coupling between the TCT, ARBO and instances of VIRTEL so that there is less dependency on the parameters defined in the ARBO and TCT for any one VIRTEL instance. This feature enables JCL parameters to override parameters found in the TCT and ARBO.</p>
<p><em>IP=nnn.nnn.nnn.nnn keyword</em></p>
<p>Currently the IP address used by VIRTEL for a particular line can be derived from being:-</p>
<ul class="simple">
<li><p>Explicitly defined in the LINE definition in the ARBO statements</p></li>
<li><p>Defaults to the IP stack HOME address. The TCP/IP GETHOSTID function is used to obtain this address.</p></li>
</ul>
<p>This change implements the possibility to override option (b) with the ability to specify the IP address as a keyword in the JCL PARM field. As an example:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="n">S01</span> <span class="n">EXEC</span> <span class="n">PGM</span><span class="o">=</span><span class="n">VIR0000</span><span class="p">,</span><span class="n">PARM</span><span class="o">=</span><span class="s2">&quot;01,MYAPPL,,192.168.0.123&quot;</span>
</pre></div>
</div>
<p>This reduces the need to specify the HOME address in the ARBO for inbound lines thereby reducing the coupling between the various VIRTEL instances that could be running within a complex and the ARBO structures. Inbound address can just define the port via the :port structure only rather than the full nnn.nnn.nnn.nnn:port specification. The IP= keyword will provide the nnn.nnn.nnn.nnn address structure for a particular instance of Virtel. So one ARBO file could provide common port addresses and the VIRTEL instance complements this with a specific IP address using the JCL IP= parameter.</p>
<p>This also allows VIRTEL to utilize a multi TCP/IP stack environment without the need for duplicated ARBO files.</p>
<p><em>CLONE=NN keyword</em></p>
<p>Currently, VIRTEL makes use of the System Symbolic &amp;SYSCLONE to enable substitution of the “+” character with the two character symbolic value of the System Symbolic. This can be used the TCT APPLID field and
terminal relay names defined in the ARBO. The purpose is to facilitate the common use of an ARBO file across multiple instances of VIRTEL, however, this feature is restricted to supporting only one instance of
VIRTEL per LPAR.</p>
<p>When multiple instances are required on any one LPAR the System Symbolic &amp;SYSCLONE and SYSPLUS=YES feature do not provide sufficient uniqueness, consequently multiple ARBO files are required. This feature endeavours to remove the restriction by providing an override through the use of the CLONE=nn keyword in the JCL parameter.</p>
<p>When specified, the CLONE value will override the IBM system symbolic value and will be used to replace the “plus” character as defined in the APPLID or terminal relay names.</p>
<p>JCL example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="n">S01</span> <span class="n">EXEC</span> <span class="n">PGM</span><span class="o">=</span><span class="n">VIR0000</span><span class="p">,</span><span class="n">PARM</span><span class="o">=</span><span class="s1">&#39;EH,,,192.168.170.30,00&#39;</span>
</pre></div>
</div>
<p>This will start Virtel with the TCT called VIRTCTEH, use a default home address of 192.168.170.30 and override and “+” character with the value “00”.</p>
<p>The APPLID=APPLEH+ keyword, as defined in the TCT, will become APPLID=APPLEH00</p>
<p>The CLONE= value replaces the IBM symbolic value, consequently the SYSCLONE-SYMBOL within scenario statements will now represent the JCL CLONE= value in scenario statements such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">VALUE</span><span class="o">-</span><span class="n">OF</span> <span class="p">(</span><span class="n">SYSCLONE</span><span class="o">-</span><span class="n">SYMBOL</span><span class="p">)</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>COPY$ SYSTEM-TO-VARIABLE,VAR=&#39;VAR1&#39;,            *
        FIELD=(VALUE-OF,SYSCLONE-SYMBOL)
</pre></div>
</div>
<p>The CLONE= value will also override any &amp;SYSCLONE symbolic that may be specified in dataset names within the TCT. For example:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">STATDSN</span><span class="o">=</span><span class="p">(</span><span class="n">SP000</span><span class="o">.</span><span class="n">SPVIREH</span><span class="o">.</span><span class="n">SYS</span><span class="o">&amp;&amp;</span><span class="n">SYSCLONE</span><span class="o">..</span><span class="n">STATA</span><span class="p">,</span>         <span class="n">STATS</span><span class="o">=</span><span class="n">MULTI</span>          <span class="o">*</span>
<span class="n">SP000</span><span class="o">.</span><span class="n">SPVIREH</span><span class="o">.</span><span class="n">SYS</span><span class="o">&amp;&amp;</span><span class="n">SYSCLONE</span><span class="o">..</span><span class="n">STATB</span><span class="p">),</span>                 <span class="n">STATS</span><span class="o">=</span><span class="n">MULTI</span>          <span class="o">*</span>
</pre></div>
</div>
<p>The STATDSN keyword as defined in the TCT will allocate and use datasets:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SP000</span><span class="o">.</span><span class="n">SPVIREH</span><span class="o">.</span><span class="n">SYS00</span><span class="o">.</span><span class="n">STATA</span> <span class="ow">and</span> <span class="n">SP00</span><span class="o">.</span><span class="n">SPVIREH</span><span class="o">.</span><span class="n">SYS00</span><span class="o">.</span><span class="n">STATB</span><span class="o">.</span>
</pre></div>
</div>
<p><em>Messages</em></p>
<p><strong>VIR0098E</strong> INVALID JCL PARM. JOB TERMINATING.</p>
<p>Module :VIR0000</p>
<p>Meaning :The JCL PARM field is incorrect. Virtel cannot continue.</p>
<p>Action : Correct the VIRTEL JCL PARM field.</p>
<p><strong>VIR0089W</strong> HOST IPADDR. OVERRIDDEN FROM PARM WITH IP=nnn.nnn.nnn.nnn</p>
<p>Module :VIR0000</p>
<p>Meaning :The ARBO didn’t specify an IP address for this line. GETHOSTID
would have been used but this been overidden by the IP=address specified
in the JCL PARM.</p>
<p>Action : Virtel will use the IP address in the JCL PARM rather than default to the IP address returned by GETHOSTID.</p>
<p><strong>D VIRTEL,LINES command response updated</strong></p>
<p><strong>VIR0202I</strong> ALLOCATED IP ADDRESS =nnn.nnn.nnn.nnn</p>
<p>Module :VIR0002</p>
<p>Meaning :An additional message has been added to the F VIRTEL,LINES
command to indicate the IP address for lines that default to GETHOSTID
will be overridden with the IP= address specified in the JCL PARM of the
Virtel started task.</p>
<p>Action : Virtel will use the IP address in the JCL PARM rather than
default to the IP address returned by GETHOSTID.</p>
<p><strong>Trace buffer enhancement and offload.</strong></p>
<p>This enhancement provides additional trace and diagnostic material covering a longer time span. The current VIT trace buffer is 200K which is insufficient to capture time related problems. 200K holds a couple of second’s worth of trace data at the most. This change implements logic which moves the trace buffer to external storage and chains the buffers together. When a trace buffer fills it is automatically moved to
external storage above the 2GB storage bar. When taking a snap all trace buffers are printed, first those above the bar and finally the current trace buffer.</p>
<p>The external or historical trace facility is controlled by the TCT TRACEON= parameter or the VIRTEL TRACE command. The Virtel Internal Tracing (VIT) has several categories which control the amount of trace
data. The categories are:-</p>
<ul class="simple">
<li><p>No tracing</p></li>
<li><p>Minimal tracing. No data elements</p></li>
<li><p>Tracing with data elements</p></li>
<li><p>Tracing with data elements and external archive</p></li>
</ul>
<p>The active tracing category is displayed in the TRACE display message:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="n">VIRTEL</span><span class="p">,</span><span class="n">TRACE</span><span class="p">,</span><span class="n">DISPLAY</span> <span class="ow">or</span> <span class="n">F</span> <span class="n">SPVIREH</span><span class="p">,</span><span class="n">TRACE</span><span class="p">,</span><span class="n">D</span>

<span class="n">VIR0200I</span> <span class="n">TRACE</span><span class="p">,</span><span class="n">D</span>
<span class="n">VIR0208I</span> <span class="n">VIRTEL</span> <span class="n">INTERNAL</span> <span class="n">TRACE</span> <span class="o">=</span> <span class="n">YYY</span><span class="o">.</span> <span class="n">EXT</span><span class="o">.</span> <span class="n">BUFFERS</span> <span class="o">=</span> <span class="mi">0001</span><span class="o">/</span><span class="mi">00</span><span class="n">FF</span><span class="o">.</span>
<span class="n">VIR0213I</span> <span class="n">NO</span> <span class="n">ACTIVE</span> <span class="n">TRACES</span>
</pre></div>
</div>
<p>Message VIR0208I indicates the VIT status through a three character Y | N display and also provides information about the current number of external buffers used and the maximum available. The three VIT display
indicators are as follows:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">Y</span><span class="o">|</span><span class="n">N</span>           <span class="n">No</span> <span class="n">tracing</span> <span class="ow">or</span> <span class="n">minimal</span> <span class="n">tracing</span>

<span class="o">-</span> <span class="n">Y</span><span class="o">|</span><span class="n">N</span>           <span class="n">Data</span> <span class="n">elements</span> <span class="n">traced</span>

<span class="o">-</span> <span class="n">Y</span><span class="o">|</span><span class="n">N</span>           <span class="n">External</span> <span class="n">Archive</span> <span class="n">active</span>
</pre></div>
</div>
<p>In the above example, YYY indicates full tracing (Data Elements) with trace archive active. The default setting is YYN which is the equivalent of TRACE=ON. By default external archive tracing is not turned on.</p>
<p>TCT option:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TRACEON</span><span class="o">=</span><span class="n">ON</span> <span class="o">|</span> <span class="n">OFF</span> <span class="o">|</span> <span class="p">(</span><span class="n">Y</span> <span class="o">|</span> <span class="n">N</span><span class="p">,</span><span class="n">Y</span> <span class="o">|</span> <span class="n">N</span><span class="p">,</span><span class="n">Y</span> <span class="o">|</span> <span class="n">N</span><span class="p">)</span>

<span class="n">Default</span> <span class="o">=</span> <span class="n">ON</span>  <span class="n">Equivalent</span> <span class="n">VIT</span> <span class="o">=</span> <span class="n">YYN</span>      <span class="n">Tracing</span> <span class="n">ON</span>
          <span class="n">OFF</span> <span class="n">Equivalent</span> <span class="n">VIT</span> <span class="o">=</span> <span class="n">NNN</span>      <span class="n">Tracing</span> <span class="n">OFF</span>


<span class="n">TRACEON</span><span class="o">=</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="n">n</span><span class="p">)</span>    <span class="n">n</span> <span class="o">=</span> <span class="n">Y</span><span class="o">|</span> <span class="n">N</span>     <span class="n">Set</span> <span class="n">Tracing</span> <span class="n">options</span>

<span class="n">Examples</span><span class="p">:</span><span class="o">-</span>

<span class="n">TRACEON</span><span class="o">=</span><span class="p">(</span><span class="n">N</span><span class="p">,</span><span class="n">N</span><span class="p">,</span><span class="n">N</span><span class="p">)</span>                                 <span class="n">Tracing</span> <span class="n">OFF</span>
<span class="n">TRACEON</span><span class="o">=</span><span class="p">(</span><span class="n">Y</span><span class="p">,</span><span class="n">N</span><span class="p">,</span><span class="n">N</span><span class="p">)</span>                                 <span class="n">Minimal</span> <span class="n">tracing</span><span class="p">,</span> <span class="n">no</span> <span class="n">data</span> <span class="n">elements</span>
<span class="n">TRACEON</span><span class="o">=</span><span class="p">(</span><span class="n">Y</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span><span class="n">N</span><span class="p">)</span>                                 <span class="n">Default</span> <span class="n">Full</span> <span class="n">tracing</span><span class="p">,</span> <span class="n">no</span> <span class="n">archive</span> <span class="o">.</span>
<span class="n">TRACEON</span><span class="o">=</span><span class="p">(</span><span class="n">Y</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span><span class="n">Y</span><span class="p">)</span>                                 <span class="n">Full</span> <span class="n">tracing</span> <span class="k">with</span> <span class="n">archive</span>
</pre></div>
</div>
<p>Command Option:</p>
<p>The VIT tracing categories can be set through the F VIRTEL,TRACE command:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="n">VIRTEL</span><span class="p">,</span><span class="n">TRACE</span><span class="p">,</span><span class="n">VIT</span><span class="o">=</span><span class="n">nnn</span> <span class="n">nnn</span> <span class="n">correspond</span> <span class="n">to</span> <span class="n">the</span> <span class="n">three</span> <span class="n">Y</span><span class="o">|</span><span class="n">N</span> <span class="n">indicators</span><span class="o">.</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="n">VIRTEL</span><span class="p">,</span><span class="n">TRACE</span><span class="p">,</span><span class="n">VIT</span><span class="o">=</span><span class="n">YYY</span>  <span class="n">Turn</span> <span class="n">on</span> <span class="n">full</span> <span class="n">VIT</span> <span class="n">tracing</span> <span class="n">plus</span> <span class="n">external</span> <span class="n">buffer</span> <span class="n">archive</span><span class="o">.</span>
</pre></div>
</div>
<p><em>Ability to offload trace buffers to a dataset</em></p>
<p>With the external VIT trace facility comes the ability to offload the trace buffers to a dataset. This offload capability can be triggered when the maximum number of external trace buffers have been reached, as
identified in message VIR0208I, or through an operator command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="n">VIRTEL</span><span class="p">,</span><span class="n">TRACE</span><span class="p">,</span><span class="n">VIT</span><span class="o">=</span><span class="n">OFFLOAD</span><span class="o">.</span>
</pre></div>
</div>
<p><em>Setting up for trace “OFFLOAD”</em></p>
<p>The trace buffers are offloaded to a GDG dataset which means historical trace data can be kept. To set up the GDG see the below. This job can also be found in the SAMPLIB dataset as member DEFTRGDG:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//*</span>
<span class="o">//*</span> <span class="n">DEFINE</span> <span class="n">THE</span> <span class="n">TRACE</span> <span class="n">GDG</span> <span class="n">DATASET</span>
<span class="o">//*</span>
<span class="o">//</span><span class="n">DELETE</span> <span class="n">EXEC</span> <span class="n">PGM</span><span class="o">=</span><span class="n">IDCAMS</span>
<span class="o">//</span><span class="n">SYSPRINT</span> <span class="n">DD</span> <span class="n">SYSOUT</span><span class="o">=*</span>
        <span class="n">DELETE</span> <span class="n">VIRTEL</span><span class="o">.</span><span class="n">TRACE</span><span class="o">.</span><span class="n">GDG</span> <span class="n">GDG</span>
        <span class="n">DELETE</span> <span class="n">VIRTEL</span><span class="o">.</span><span class="n">TRACE</span><span class="o">.</span><span class="n">GDG</span><span class="o">.</span><span class="n">DSCB</span> <span class="n">NVSAM</span>
        <span class="n">SET</span> <span class="n">MAXCC</span><span class="o">=</span><span class="mi">0</span>
<span class="o">//</span><span class="n">ALLOC1</span> <span class="n">EXEC</span> <span class="n">PGM</span><span class="o">=</span><span class="n">IEFBR14</span>
<span class="o">//</span><span class="n">FILE</span> <span class="n">DD</span> <span class="n">DSN</span><span class="o">=</span><span class="n">VIRTEL</span><span class="o">.</span><span class="n">TRACE</span><span class="o">.</span><span class="n">GDG</span><span class="o">.</span><span class="n">DSCB</span><span class="p">,</span>
<span class="o">//</span> <span class="n">UNIT</span><span class="o">=</span><span class="mi">3390</span><span class="p">,</span><span class="n">DISP</span><span class="o">=</span><span class="p">(</span><span class="n">NEW</span><span class="p">,</span><span class="n">CATLG</span><span class="p">),</span>
<span class="o">//</span> <span class="n">SPACE</span><span class="o">=</span><span class="p">(</span><span class="n">TRK</span><span class="p">,(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span><span class="n">VOL</span><span class="o">=</span><span class="n">SER</span><span class="o">=</span><span class="n">VVVVVV</span><span class="p">,</span>
<span class="o">//</span> <span class="n">DCB</span><span class="o">=</span><span class="n">BLKSIZE</span><span class="o">=</span><span class="mi">13300</span>
<span class="o">//*</span>
<span class="o">//</span><span class="n">ALLOC2</span> <span class="n">EXEC</span> <span class="n">PGM</span><span class="o">=</span><span class="n">IDCAMS</span>
<span class="o">//</span><span class="n">SYSPRINT</span> <span class="n">DD</span> <span class="n">SYSOUT</span><span class="o">=*</span>
<span class="o">//</span><span class="n">SYSIN</span> <span class="n">DD</span> <span class="o">*</span>
        <span class="n">DEF</span> <span class="n">GDG</span><span class="p">(</span><span class="n">NAME</span><span class="p">(</span><span class="n">VIRTEL</span><span class="o">.</span><span class="n">TRACE</span><span class="o">.</span><span class="n">GDG</span><span class="p">)</span> <span class="n">LIMIT</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="n">SCRATCH</span> <span class="n">NOEMPTY</span><span class="p">)</span>
<span class="o">/*</span>
</pre></div>
</div>
<p>TCT option:-</p>
<p>The following TCT options have been added to support the OFFLOAD facility. They are described below. Define the GDG dataset name to be used for the OFFLOAD datasets. The default is VIRTEL.TRACE.GDG:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TRCXDSN</span><span class="o">=</span><span class="n">gdgdsn</span>
</pre></div>
</div>
<p>Define the number of external trace buffers and action to be taken when that number is reached. Maximum is 999, minimum=1. Default = 255. Action is either CLEAR (Default) or OFFLOAD:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TRCXBUF</span><span class="o">=</span><span class="p">(</span><span class="n">nnn</span><span class="p">[,</span><span class="n">CLEAR</span><span class="o">|</span> <span class="n">OFFLOAD</span><span class="p">])</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TRCXBUF</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="n">OFFLOAD</span><span class="p">),</span>            <span class="n">EXT</span><span class="o">.</span> <span class="n">TRACE</span> <span class="n">BUFFERS</span>
<span class="n">TRCXDSN</span><span class="o">=</span><span class="n">SP000</span><span class="o">.</span><span class="n">SPVIREH</span><span class="o">.</span><span class="n">TRACE</span><span class="o">.</span><span class="n">GDG</span><span class="p">,</span> <span class="n">OFFLOAD</span> <span class="n">DSN</span>
<span class="n">TRACEON</span><span class="o">=</span><span class="p">(</span><span class="n">Y</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span><span class="n">Y</span><span class="p">),</span>                 <span class="n">TRACE</span> <span class="n">WITH</span> <span class="n">EXT</span><span class="o">.</span><span class="n">HISTORY</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If external buffering is not active any offload command will be rejected as invalid.</p>
</div>
<p><em>Messages</em></p>
<p><strong>VIR0208I</strong> VIRTEL INTERNAL TRACE = xxx. EXT. BUFFERS = yyyy/zzzz.</p>
<p>Module :VIR0002</p>
<p>Meaning :Provides information about the Virtel Internal Trace status.</p>
<blockquote>
<div><p>xxx =   VIT status where x is either a Y or N.</p>
<p>x..     No tracing or minimal tracing.</p>
<p>.x.     Full tracing but no archiving</p>
<p>..x     Full tracing with external archiving</p>
</div></blockquote>
<p>Action : None.</p>
<p><strong>VIR0072E</strong> TRACE TABLE ARCHIVE ERROR. ARCHIVE DISABLED. RC=xx, RE=xx</p>
<p>Module :VIR0000</p>
<p>Meaning :Virtel was unable to archive the VIT current buffer. The return and reason codes are displayed. Archive will be disabled.</p>
<p>Action : Contact Technical Support.</p>
<p><strong>VIR0073I</strong> TRACE TABLE ARCHIVE OFFLOADED</p>
<p>Module :VIR0004</p>
<p>Meaning :The maximum number of external VIT buffers has been reached and a VIT offload has been triggered.</p>
<p>Action : None.</p>
<p><strong>VIR0079E</strong> UNABLE TO ALLOCATE OFFLOAD DATASET. R15=RC, R0=RE ,DSN=gdgdsname</p>
<p>Module :VIR0004</p>
<p>Meaning :Virtel was unable to allocate the offload GDG. The dynamic allocation return and reason codes are displayed.</p>
<p>Action : Check the SVC99 codes to determine why the GDG could not be allocated. Check that the correct GDG base name is being. For additional support contact Technical Support.</p>
<p><strong>USSTAB MSG10 Support</strong></p>
<p>VIRTEL 4.55 now implements the VIR0021W USSTAB menu program. This program will interrogate the customers USSTAB module and create an equivalent 3270 MAP. The MAP will be passed to the VIR0010 routine where
it will subsequently be converted into a HTML template and served to the browser. The generated template will provide similar functionality to that of the VTAM USSMSG10, that being a presentation screen and support for USSCMD and USSPARM entries. This allows customers to maintain their USSTAB MSG10 presentation for both VTAM and VIRTEL users without modification. The customers assembled USSTAB module, normally found in USER.VTAMLIB or an equivalent library, must be made available to VIRTEL. This can be done by either copying the module to a VIRTEL steplib library or concatenating the USER.VTAMLIB library into the VIRTEL started procedure. SAMPLIB member USSVIRT can be used to generate the default Virtel USSTAB USSVIRT.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a chargeable feature and you should contact your sales representative for further details.</p>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../TN201520/TN201520.html" class="btn btn-neutral float-left" title="Using the IBM System Logger with Virtel" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../TN201601/TN201601.html" class="btn btn-neutral float-right" title="Customizing colours with CSS in Virtel 4.53" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017, Syspertec. All rights reserved.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Multi Line WTO Support in VIRTEL &mdash; Virtel 1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="Virtel 1 documentation" href="../../../index.html"/>
        <link rel="up" title="Technical Newsletters" href="../../../newsletters.html"/>
        <link rel="next" title="Taking a VIRTEL terminal trace" href="../TN201406/TN201406.html"/>
        <link rel="prev" title="VIRTEL SMF Support" href="../TN201404/TN201404.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Virtel
          

          
            
            <img src="../../../_static/logo_virtel_web.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../newsletters.html">Technical Newsletters</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../../newsletters.html#id1">2014</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../TN201402/TN201402.html">Formatting VIRTEL Line Trace</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201403/TN201403.html">How to use TESTVTAM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201404/TN201404.html">VIRTEL SMF Support</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Multi Line WTO Support in VIRTEL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201406/TN201406.html">Taking a VIRTEL terminal trace</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201407/TN201407.html">Pass tickets and supporting Proxy Servers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201409/TN201409.html">Mainframe printing with Virtel 4.56</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201410/TN201410.html">Taking a VTAM trace</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201411/TN201411.html">Building a customized USSTAB using Virtel’s Web Access facility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201412/TN201412.html">Sharing user macros across multiple instances of Virtel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201414/TN201414.html">CICS Printing problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201415/TN201415.html">Virtel JES Writer program</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201416/TN201416.html">Virtel Security. Using server and client certificates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201417/TN201417.html">RACF Grouping Class and Virtel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201419/TN201419.html">Maintaining TRSF file sets</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">Virtel</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../../newsletters.html">Technical Newsletters</a> &raquo;</li>
      
    <li>Multi Line WTO Support in VIRTEL</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/manuals/newsletters/TN201405/TN201405.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="multi-line-wto-support-in-virtel">
<h1>Multi Line WTO Support in VIRTEL<a class="headerlink" href="#multi-line-wto-support-in-virtel" title="Permalink to this headline">¶</a></h1>
<p>The Virtel XWTO macro has been modified to support Multi Line WTO. The
CONNID= parameter is used to connect related messages together. This
will ensure that clients, who trap VIRTEL messages in Automation, obtain
all the detail.</p>
<p>Before multiline WTO:-</p>
<p>N FFFFFFF ZAMVS1 14044 10:46:11.36 STC02146 00000090 VIRC121E PAGE NOT
FOUND FOR CLLOC009 ENTRY POINT &#8216;CLIWHOST&#8217; DIRECTORY</p>
<p>S &#8216;W2H &#8216;(W2H-DIR W2H-KEY )</p>
<p>N FFFFFFF ZAMVS1 14044 10:46:11.36 STC02146 00000090 PAGE :
&#8216;LASTPAGE.HTML&#8217; URL : &#8216;/w2h/LASTPAGE.HTML&#8217;</p>
<p>In the above example two separate messages area issued via the SVC 35
WTO macro - the ‘N’ flag in column 1 indicates a separate WTO. Both
messages are related in describing a VIRTEL error - that being a missing
page. They would, however, be treated as separate messages by any
automation product. The first message would be trapped by automation
because it has standard message id; the second message, however, would
be lost to automation as there is no message id.</p>
<p>With the XWTO multi_line modification the problem illustrated above is
reported as 1 message even though there are two calls are produced via
the SVC 35 WTO. This time the messages are related and reported to
automation as one message through new keywords in the Virtel XWTO macro.</p>
<p>M FFFFFFF ZAMVS1 14055 16:50:54.66 STC02980 00000090 VIRC121E PAGE NOT
FOUND FOR CLLOC009 ENTRY POINT &#8216;CLIWHOST&#8217; DIRECTORY &#8216;</p>
<p>S 608</p>
<p>D 608 00000090 &#8216;W2H &#8216;(W2H-DIR W2H-KEY )</p>
<p>E 608 00000090 PAGE : &#8216;LASTPAGE.HTML&#8217; URL : &#8216;/w2h/LASTPAGE.HTML&#8217;</p>
<p>Note the change in flags in column 1. WTO reports the message as a
multiline message. The character “M” in column 1 indicates to automation
that this is a multi-line message and the character ‘E’ indicates the
last message in the multi_line display.</p>
<p>**
Logic changes**</p>
<p>XWTO New keywords specified on macro.</p>
<p><strong>Messages</strong></p>
<p>None</p>
<p><strong>Macro definition</strong></p>
<p>&amp;LABEL XWTO &amp;V1,&amp;V2,&amp;V3,&amp;V4,&amp;V5,&amp;V6,&amp;V7,&amp;V8,&amp;V9,&amp;V10,&amp;V11,&amp;V12,&amp;V13,*</p>
<p><a class="reference external" href="mailto:&amp;WORK=&#37;&#52;&#48;WTOPARM">&amp;WORK=<span>&#64;</span>WTOPARM</a><a href="#id1"><span class="problematic" id="id2">**</span></a>,&amp;ML=N,&amp;CONNID=,&amp;MLTYPE=S,&amp;MSG=N **</p>
<p><strong>New macro keywords</strong></p>
<p><strong>ML = Y | N</strong> Multiline = Yes or No. Default = N</p>
<p><strong>CONNID =</strong> Address of 4 byte area to store connection id.</p>
<p>Applies only when ML=Y is specified.</p>
<p><strong>MLTYPE = S</strong> = Start</p>
<p><strong>C</strong> = Continue</p>
<p><strong>E</strong> = End</p>
<p>Applies only when ML=Y is specified.</p>
<p><strong>MSG=</strong> Address of prebuilt message. Default = N for No prebuilt
message area.</p>
<p>Applies only when ML=Y is specified.</p>
<p>**
Example:-**</p>
<p>Module VIRC012</p>
<p>M404 PROC , UPDT2426</p>
<p>XWTO &#8216;&amp;PRF.C121E PAGE NOT FOUND FOR &#8216;,LUNAME, 21142699*</p>
<p>&#8216; ENTRY POINT &#8216;&#8217;&#8216;,WLOGAPPL,&#8217;&#8216;&#8217;&#8216;, 21142699*</p>
<p>&#8216; DIRECTORY &#8216;&#8217;&#8216;,WREPERT,&#8217;&#8216;&#8217;(&#8216;,WTPCDIR, 31264359*</p>
<p>&#8216; &#8216;,CLEUSER, 48323148*</p>
<p>&#8216;)&#8217;,ML=Y,MLTYPE=S,CONNID=WTOCONID ESH</p>
<p>PERFORM MFILE</p>
<p>XWTO ML=Y,MLTYPE=C,MSG=&#64;WTOPARM,CONNID=WTOCONID ESH</p>
<p>XWTO &#8216; &#8216;,ML=Y,MLTYPE=E,CONNID=WTOCONID ESH</p>
<p>The MFILE subroutine builds a SVC 35 parameter list pointed to by
&#64;WTOPARM. The standard SVC 35 parameter list header format is a 2 byte
length +2 bytes flags then the messages to be issued. In the example
above, a multiline WTO is built using three XWTO multi-line calls. The
first line of the message is indicated by the keywords ML=Y, MLTYPE=S.
The second part, indicated by ML=Y, MLTYPE=C, is a continuation message
and finally, the last message, ML=Y,MLTYPE=E is a end message which
indicates the end of a series of message parts. There is no text with
MLTYPE=E.</p>
<p>Here is another example. This time two continuation lines have been
added. One which refers to a pre_built WTO area as defined by &#64;WTOPARM
and another where the text is within the ZWTO and extends beyond 71
characters.</p>
<p>M FFFFFFF ZAMVS1 14056 12:59:07.78 STC03041 00000090 VIRC121E PAGE NOT
FOUND FOR CLLOC009 ENTRY POINT &#8216;CLIWHOST&#8217; DIRECTORY &#8216;</p>
<p>S 406</p>
<p>D 406 00000090 &#8216;W2H &#8216;(W2H-DIR W2H-KEY )</p>
<p>D 406 00000090 PAGE : &#8216;LASTPAGE.HTML&#8217; URL : &#8216;/w2h/LASTPAGE.HTML&#8217;</p>
<p>D 406 00000090 ANOTHER LINE. THIS LINE HAS MORE THAN 71 CHARACTERS AND
THEREFORE WILL</p>
<p>E 406 00000090 BE SPLIT ACROSS TWO LINES. HOPEFULLY!</p>
<p>The code for the above example is shown below:-</p>
<p>XWTO &#8216;&amp;PRF.C121E PAGE NOT FOUND FOR &#8216;,LUNAME, 21142699*</p>
<p>&#8216; ENTRY POINT &#8216;&#8217;&#8216;,WLOGAPPL,&#8217;&#8216;&#8217;&#8216;, 21142699*</p>
<p>&#8216; DIRECTORY &#8216;&#8217;&#8216;,WREPERT,&#8217;&#8216;&#8217;(&#8216;,WTPCDIR, 31264359*</p>
<p>&#8216; &#8216;,CLEUSER, 48323148*</p>
<p>&#8216;)&#8217;,ML=Y,MLTYPE=S,CONNID=WTOCONID</p>
<p>PERFORM MFILE * PREBUILD AREA IN &#64;WTOPARM</p>
<p>XWTO ML=Y,MLTYPE=C,MSG=&#64;WTOPARM,CONNID=WTOCONID</p>
<p>XWTO &#8216;ANOTHER LINE. THIS LINE HAS MORE THAN 71 CHARACTERS ANDX</p>
<p>THEREFORE WILL BE SPLIT ACROSS TWO LINES. HOPEFULLY!&#8217;, X</p>
<p>ML=Y,MLTYPE=C,CONNID=WTOCONID</p>
<p>XWTO ML=Y,MLTYPE=E,CONNID=WTOCONID</p>
<p>We see the message below has 6 parts as defined by the message code:-</p>
<p>M - Multiline message start. First part of 71 bytes.</p>
<p>S - Connect ID</p>
<p>D - Second part of 1<sup>st</sup> message part, bytes 72 onwards.</p>
<p>D - 2<sup>nd</sup> message part. Less then 71 bytes and from a predefined
XTO parameter list.</p>
<p>D - 3<sup>rd</sup> message part. 1<sup>st</sup> part of 71 bytes.</p>
<p>D - 3<sup>rd</sup> message part. 2<sup>nd</sup> part of bytes 72 onwards</p>
<p>E - End of message.</p>
<p>**
Notes**</p>
<p>The change should be downward compatible so should not affect existing
code.</p>
<p>The following DSECT is required to map the extended WTO workarea. The
extended workarea is defined in the 255 byte WTOPARM work area.</p>
<p>WTOWPX DSECT ESH</p>
<p>DS 0F</p>
<p>WPXTXTLN DS XL2</p>
<p>WPXTXTFG DS XL2</p>
<p>WPXTADDR DS XL4</p>
<p>WPXVER DS XL1</p>
<p>DS XL2</p>
<p>WPXLEN DS XL1</p>
<p>WPXFLG DS XL2</p>
<p>ORG WTOWPX+112</p>
<p>WPXTYP DS XL2</p>
<p>DS XL1</p>
<p>WPXCNT DS XL1</p>
<p>WPXEND EQU *-WTOWPX</p>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../TN201406/TN201406.html" class="btn btn-neutral float-right" title="Taking a VIRTEL terminal trace" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../TN201404/TN201404.html" class="btn btn-neutral" title="VIRTEL SMF Support" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Syspertec. All rights reserved.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>
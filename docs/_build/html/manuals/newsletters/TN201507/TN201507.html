

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Customising Virtel &mdash; Virtel 9 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Using Virtel as a Secure Single Access Control Point" href="../TN201515/TN201515.html" />
    <link rel="prev" title="An example of using web services with Virtel Integration" href="../TN201506/TN201506.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Virtel
          

          
            
            <img src="../../../_static/logo_virtel_web.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                4.61
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../virtel.html">Virtel Manuals</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../newsletters.html">Technical Newsletters</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id1">2014</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../newsletters.html#id2">2015</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../TN201501/TN201501.html">Dynamic Directory Interface (DDI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201504/TN201504.html">Running multiple instances of Virtel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201505/TN201505.html">Virtel Macros in Virtel 4.53</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201506/TN201506.html">An example of using web services with Virtel Integration</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Customising Virtel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201515/TN201515.html">Using Virtel as a Secure Single Access Control Point</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201517/TN201517.html">Virtel Chinese Character Language Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201519/TN201519.html">Processing the VTAM USS MSG10 buffer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201520/TN201520.html">Using the IBM System Logger with Virtel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201522/TN201522.html">What’s new in Virtel 4.55</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id3">2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id4">2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id5">2018</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id6">2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id7">2020</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id8">2021</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Virtel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../newsletters.html">Technical Newsletters</a> &raquo;</li>
        
      <li>Customising Virtel</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/manuals/newsletters/TN201507/TN201507.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="customising-virtel">
<span id="tn201507"></span><h1>Customising Virtel<a class="headerlink" href="#customising-virtel" title="Permalink to this headline">¶</a></h1>
<p>As delivered, Virtel contains several web elements which can be
customised to turn on/off features and customise presentation. This
newsletter discusses how to implement a customised Virtel and how to
maintain those customisations across Virtel upgrades. The three main
elements which a customer might wish to customize are:-</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 17%" />
<col style="width: 22%" />
<col style="width: 29%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Element</strong></p></th>
<th class="head"><p><strong>File Type</strong></p></th>
<th class="head"><p><strong>Default Directory</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>custom.css</p></td>
<td><p>CSS</p></td>
<td><p>W2H-DIR</p></td>
<td><p>CSS Presentation module</p></td>
</tr>
<tr class="row-odd"><td><p>custom.js</p></td>
<td><p>Javascript File</p></td>
<td><p>W2H-DIR</p></td>
<td><p>Customised user options</p></td>
</tr>
<tr class="row-even"><td><p>w2hparm.js</p></td>
<td><p>Javascript File</p></td>
<td><p>W2H-DIR</p></td>
<td><p>Controls Virtel features</p></td>
</tr>
</tbody>
</table>
<p><em>Table 1 – Virtel customise elements</em></p>
<p>By default, these elements are shipped in the SAMPTRSF VSAM files and
are associated with transactions in the WEB2HOST and CLIHOST entry
points. In both case the default directory is the W2H-DIR directory
which is associated with the SAMPTRSF VSAM file. If you look at the
SAMPLIB(ARBOLOAD) file you will see that the CLI and W2H transactions
refer to the W2H-DIR.</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 19%" />
<col style="width: 19%" />
<col style="width: 19%" />
<col style="width: 25%" />
<col style="width: 17%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Entry Point</strong></p></th>
<th class="head"><p><strong>Transaction</strong></p></th>
<th class="head"><p><strong>Prefix</strong></p></th>
<th class="head"><p><strong>Default Directory</strong></p></th>
<th class="head"><p><strong>VSAM File</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CLIHOST</p></td>
<td><p>CLI-03CC</p></td>
<td><p>/w2h/custom-css</p></td>
<td><p>W2H-DIR</p></td>
<td><p>SAMPTRSF</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>CLI-03CJ</p></td>
<td><p>/w2h/custom-js</p></td>
<td><p>W2H-DIR</p></td>
<td><p>SAMPTRSF</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>CLI-03P</p></td>
<td><p>/w2h/w2hparm-js</p></td>
<td><p>W2H-DIR</p></td>
<td><p>SAMPTRSF</p></td>
</tr>
<tr class="row-odd"><td><p>WEB2HOST</p></td>
<td><p>W2H-03CC</p></td>
<td><p>/w2h/custom-css</p></td>
<td><p>W2H-DIR</p></td>
<td><p>SAMPTRSF</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>W2H-03CJ</p></td>
<td><p>/w2h/custom-js</p></td>
<td><p>W2H-DIR</p></td>
<td><p>SAMPTRSF</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>W2H-03P</p></td>
<td><p>/w2h/w2hparm-js</p></td>
<td><p>W2H-DIR</p></td>
<td><p>SAMPTRSF</p></td>
</tr>
</tbody>
</table>
<p><em>Table 2 – Virtel default directories</em></p>
<p>During an upgrade the SAMPTRSF is replaced so it is important that any
changes made to these elements are stored in the CLI-DIR and not the
W2H-DIR. The CLI-DIR is associated with the HTMLTRSF VSAM file which is
not replaced as part of an upgrade or migration processes. This TRSF
contains user or customisable Virtel WEB elements.</p>
<p><strong>How to customise.</strong></p>
<p>A copy of the default source can be viewed by using a browser to display
the file. For example, to display the shipped custom.css file enter the
following URL:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">192.168</span><span class="o">.</span><span class="mf">170.30</span><span class="p">:</span><span class="mi">41001</span><span class="o">/</span><span class="n">w2h</span><span class="o">/</span><span class="n">custom</span><span class="o">-</span><span class="n">css</span><span class="o">/</span><span class="n">custom</span><span class="o">.</span><span class="n">css</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The file is also included with the sources.zip file which can be downloaded from the administration portal.</p>
</div>
<p>This is the default custom.css file. The ipaddress:port could well be different, but the port 41001 in the URL is the default for the W-HTTP
line which points to the distributed files. The resulting display in the browser should look like this:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/*
* VIRTEL Web Access style sheet for site customisation
* (c)Copyright SysperTec Communication 2007,2010 All Rights Reserved
* $Id$
*/
.myCICSname #toolbar {
background-color:yellow;
}
</pre></div>
</div>
<p>Using the C-HTTP LINE ipaddress:41002 URL instead of ipaddress:41001
will present the same details as the W-HTTP line because both line
/entry point/transaction refer to the same web element located on the
SAMPTRSF file.</p>
<p>The css file can be saved from the browser display and then customised.
It can then be uploaded to the CLI-DIR directory using the
administration portal. Following the upload the relevant transaction(s)
must be updated to point to the customise web element which is now in
the CLI-DIR directory associated with the HTMLTRSF file. In most case
you would only update the CLI transactions, leaving the W2H transactions
to default to the WEB-DIR.</p>
<p>Updating the transaction can be done online using the Virtel 3270
Administration panels or through an ARBO upload. To use the ARBO
uploaded process, unload the current ARBO, update the relevant
transaction and reload the ARBO. Reloading the ARBO can be a “full
reload” to an empty ARBO file, maintaining the previous ARBO files as a
backup, or by using the ARBO “REPLACE” option and just submitting the
TRANSACTION statements that need to be replace, i.e. a partial ARBO
upload.</p>
<p>Once you have updated the transactions any references to custom.css via
the C-HTTP entry point will be resolved by locating the updated element
on the HTMLSAMP VSAM file and not the default SAMPTRSF VSAM file.</p>
<p>The following display shows that the custom.js file has been customised
as transaction CLI-03CJ now refers to the CLI-DIR:-</p>
<p><a class="reference internal" href="../../../_images/image118.png"><img alt="image0" src="../../../_images/image118.png" style="width: 6.26806in; height: 4.27014in;" /></a></p>
<p>When we view the custom.js element associated with the transaction in
the CLIHOST (41002) entry point we get the following display in the
browser:-</p>
<p><a class="reference internal" href="../../../_images/image210.png"><img alt="image1" src="../../../_images/image210.png" style="width: 6.26806in; height: 3.18333in;" /></a></p>
<p>If we display the default custom.js element associated with the
transaction in the WEB2HOST toolkit (41001) entry point we get the
following display:-</p>
<p><a class="reference internal" href="../../../_images/image311.png"><img alt="image2" src="../../../_images/image311.png" style="width: 6.26806in; height: 3.57153in;" /></a></p>
<p>We can see that the custom.js element is different between the default
in W2H-DIR and the modified version in the CLI-DIR directory. It is
important to note that you shouldn’t need to update any web element in
the W2H-DIR SAMPTRSF directory. This is a distributed target file and
shouldn’t hold any customised elements unless instructed by SysperTec
Suport. If you have modified elements in W2H-DIR it is probably a good
idea to move them to another directory, it doesn’t have to be CLI-DIR,
and update the transactions accordingly to point to the new directory.</p>
<p><strong>Customising elements.</strong></p>
<p><strong>File custom.css</strong></p>
<p>This module effects the presentation of web pages. The VIRTEL
administrator can customize the color settings for all applications or
for specific applications. The custom settings are defined in a style
sheet called custom.css which the administrator uploads to a VIRTEL
directory designated for storage of customer files (usually CLI-DIR).
For more information see <em>Virtel Web Access User Guide, Chapter 1.12,
Site Customization of Colors and Logo.</em></p>
<p><strong>File custom.js</strong></p>
<p>To take into account site-specific JavaScript extensions for Web Access,
the WEB2AJAX.htm page template loads the /w2h/custom-js/custom.js file
when a session is started. An empty custom.js file is delivered as
standard in the W2HDIR directory. The CLI-03CJ (/w2h/custom-js)
transaction delivered as standard under the CLIWHOST entry point
references the W2H-DIR directory, but the administrator can modify this
transaction to reference a different directory containing a
site-specific version of custom.js. The CLI-DIR directory, which is
intended for client-specific files, may be used for this purpose. See <em>Virtel Web Access User Guide, Chapter 1.13,
Site Customization of Javascript functions.</em></p>
<p><strong>File w2hparm.js</strong></p>
<p>The VIRTEL Web Access user can use the Settings menu to modify certain
options such as font size, 3270 key mappings, and color schemes. The
user’s settings are stored in a browser local storage which remains
valid so long as cookies are not deleted from the workstation. The
settings stored in the user’s local storage override the default
settings for VIRTEL Web Access which are stored in the w2hparm.js file.
See “<em>Global modification of Web Access settings</em>”, in the <em>Virtel
Web Access User Guide, chapter 1.7</em> for further details. The Web Access
Settings menu can be displayed with two different patterns, presented as
“Version 1” or “Version 2”. This is controlled through the settings in
w2hparm.js See “<em>Choosing Web Access settings pattern</em>”, in the
<em>Virtel Web Access User Guide, chapter 1.7</em> for further details.</p>
<p><strong>Alternatives forms of customization.</strong></p>
<p>If it is the case that only the W-LINE port (41001) is utilized in
Virtel, and not the C-LINE port (41002), then customization only applies
to the W2H transactions; pointing them to the modified elements saved in
the CLI-DIR directory. Alternatively, if you are maintaining only the
elements in the W2H-DIR then any Virtel upgrade will over write your
customized elements because an upgrade will replace the SAMPTRSF file.
To avoid losing modifications it would be necessary to save the elements
before updating the SAMPTRSF and then upload then saved elements to the
W2H-DIR after the upgrade.</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../TN201515/TN201515.html" class="btn btn-neutral float-right" title="Using Virtel as a Secure Single Access Control Point" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../TN201506/TN201506.html" class="btn btn-neutral float-left" title="An example of using web services with Virtel Integration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Syspertec. All rights reserved

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>
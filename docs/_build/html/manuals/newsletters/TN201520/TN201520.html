

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using the IBM System Logger with Virtel &mdash; Virtel 7 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="Virtel 7 documentation" href="../../../index.html"/>
        <link rel="up" title="Technical Newsletters" href="../../../newsletters.html"/>
        <link rel="next" title="What’s new in Virtel 4.55" href="../TN201522/TN201522.html"/>
        <link rel="prev" title="Processing the VTAM USS MSG10 buffer" href="../TN201519/TN201519.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Virtel
          

          
            
            <img src="../../../_static/logo_virtel_web.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                4.57
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../virtel.html">Virtel Manuals</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../newsletters.html">Technical Newsletters</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id1">2014</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../newsletters.html#id2">2015</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../TN201501/TN201501.html">Dynamic Directory Interface (DDI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201504/TN201504.html">Running multiple instances of Virtel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201505/TN201505.html">Virtel Macros in Virtel 4.53</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201506/TN201506.html">An example of using web services with Virtel Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201507/TN201507.html">Customising Virtel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201515/TN201515.html">Using Virtel as a Secure Single Access Control Point</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201517/TN201517.html">Virtel Chinese Character Language Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201519/TN201519.html">Processing the VTAM USS MSG10 buffer</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Using the IBM System Logger with Virtel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201522/TN201522.html">What’s new in Virtel 4.55</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id3">2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id4">2017</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../newsletters.html#id5">2018</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../TN201406/TN201406.html">Taking a VIRTEL terminal trace</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201407/TN201407.html">Pass tickets and supporting Proxy Servers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201409/TN201409.html">Mainframe printing with Virtel 4.56</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201410/TN201410.html">Taking a VTAM trace</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201411/TN201411.html">Building a customized USSTAB using Virtel’s Web Access facility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201412/TN201412.html">Sharing user macros across multiple instances of Virtel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201413/TN201413.html">Overview of a Virtel Session</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201414/TN201414.html">CICS Printing problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201415/TN201415.html">Virtel JES Writer program</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201416/TN201416.html">Virtel Security. Using server and client certificates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201417/TN201417.html">RACF Grouping Class and Virtel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201419/TN201419.html">Maintaining TRSF file sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201501/TN201501.html">Dynamic Directory Interface (DDI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201504/TN201504.html">Running multiple instances of Virtel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201505/TN201505.html">Virtel Macros in Virtel 4.53</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201506/TN201506.html">An example of using web services with Virtel Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201507/TN201507.html">Customising Virtel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201515/TN201515.html">Using Virtel as a Secure Single Access Control Point</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201517/TN201517.html">Virtel Chinese Character Language Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201519/TN201519.html">Processing the VTAM USS MSG10 buffer</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Using the IBM System Logger with Virtel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201522/TN201522.html">What’s new in Virtel 4.55</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201601/TN201601.html">Customizing colours with CSS in Virtel 4.53</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201602/TN201602.html">Installing Virtel V4.53 from scratch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201603/TN201603.html">Field Level Encryption</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201604/TN201604.html">Controlling LU Names</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201605/TN201605.html">CICS Printing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201606/TN201606.html">Virtel Screen Redesigner in action</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201607/TN201607.html">What’s new in Virtel 4.56 (September 2016)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201608/TN201608.html">Installing Virtel V4.56 from scratch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201609/TN201609.html">Nailing LUS with an Identification scenario</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201611/TN201611.html">Customizing Virtel in V4.56</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201701/TN201701.html">Protecting business assets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201702/TN201702.html">Protecting Virtel Applications with Shibboleth</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201703/TN201703.html">Passticket support with CA Top Secret</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201704/TN201704.html">Virtel Macros</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201705/TN201705     .html">Printing PCL files with NodeJS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201706/TN201706     .html">What’s new in Virtel 4.57 (July 2017)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201709/TN201709.html">Virtel Batch Maintenance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201801/TN201801.html">What’s new in Virtel 4.58 (Sept. 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201802/TN201802.html">What’s new in Virtel 4.58 (Sept. 2018)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../howto.html">Miscellaneous</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Virtel</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../newsletters.html">Technical Newsletters</a> &raquo;</li>
        
      <li>Using the IBM System Logger with Virtel</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/manuals/newsletters/TN201520/TN201520.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-the-ibm-system-logger-with-virtel">
<span id="tn201520"></span><h1>Using the IBM System Logger with Virtel<a class="headerlink" href="#using-the-ibm-system-logger-with-virtel" title="Permalink to this headline">¶</a></h1>
<p>With the latest release of Virtel, currently Release 4.55, Virtel has
the ability to write all of its log records to IBM’s System Logger.</p>
<p>To use this feature code LOG=LOGGER in the TCT and compile using a
supporting maclib. This should be the distributed Virtel MACLIB HLQ.VIRTEL.MACLIB.
A compatible VIR0000 in the VIRTEL load library must be used to avoid TCT mismatch message. The version in
HLQ.VIRTEL.LOADLIB is compatible with the VIRTEM MACLIB in HLQ.VIRTEL.MACLIB(VIRTERM) member.</p>
<p>When you start Virtel it will attempt to connect to the predefined
Virtel logstream. If the logstream doesn’t exists one will be created
automatically. The following messages will appear in the log:-</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">VIR0024I</span> <span class="n">ATTACHING</span> <span class="n">SUBTASKS</span>
<span class="n">IXC582I</span> <span class="n">STRUCTURE</span> <span class="n">VIRTEL</span>\<span class="n">_LOG</span>\<span class="n">_1</span> <span class="n">ALLOCATED</span> <span class="n">BY</span> <span class="n">SIZE</span><span class="o">/</span><span class="n">RATIOS</span><span class="o">.</span> <span class="mi">596</span>
<span class="n">PHYSICAL</span> <span class="n">STRUCTURE</span> <span class="n">VERSION</span><span class="p">:</span> <span class="n">CFF8ABE4</span> <span class="mi">1865</span><span class="n">AA81</span>
<span class="n">STRUCTURE</span> <span class="n">TYPE</span><span class="p">:</span> <span class="n">LIST</span>
<span class="n">CFNAME</span><span class="p">:</span> <span class="n">ZACF1</span>
<span class="n">ALLOCATION</span> <span class="n">SIZE</span><span class="p">:</span> <span class="mi">9</span> <span class="n">M</span>
<span class="n">POLICY</span> <span class="n">SIZE</span><span class="p">:</span> <span class="mi">9</span> <span class="n">M</span>
<span class="n">POLICY</span> <span class="n">INITSIZE</span><span class="p">:</span> <span class="mi">9</span> <span class="n">M</span>
<span class="n">POLICY</span> <span class="n">MINSIZE</span><span class="p">:</span> <span class="mi">0</span> <span class="n">K</span>
<span class="n">IXLCONN</span> <span class="n">STRSIZE</span><span class="p">:</span> <span class="mi">0</span> <span class="n">K</span>
<span class="n">ENTRY</span> <span class="n">COUNT</span><span class="p">:</span> <span class="mi">1274</span>
<span class="n">ELEMENT</span> <span class="n">COUNT</span><span class="p">:</span> <span class="mi">1179</span>
<span class="n">ENTRY</span><span class="p">:</span><span class="n">ELEMENT</span> <span class="n">RATIO</span><span class="p">:</span> <span class="mi">1</span> <span class="p">:</span> <span class="mi">1</span>
<span class="n">ALLOCATION</span> <span class="n">SIZE</span> <span class="n">IS</span> <span class="n">WITHIN</span> <span class="n">CFRM</span> <span class="n">POLICY</span> <span class="n">DEFINITIONS</span>
<span class="n">IXL014I</span> <span class="n">IXLCONN</span> <span class="n">REQUEST</span> <span class="n">FOR</span> <span class="n">STRUCTURE</span> <span class="n">VIRTEL</span>\<span class="n">_LOG</span>\<span class="n">_1</span> <span class="mi">597</span>
<span class="n">WAS</span> <span class="n">SUCCESSFUL</span><span class="o">.</span> <span class="n">JOBNAME</span><span class="p">:</span> <span class="n">IXGLOGR</span> <span class="n">ASID</span><span class="p">:</span> <span class="mi">0016</span>
<span class="n">CONNECTOR</span> <span class="n">NAME</span><span class="p">:</span> <span class="n">IXGLOGR</span>\<span class="n">_ZAMVS1</span> <span class="n">CFNAME</span><span class="p">:</span> <span class="n">ZACF1</span>
<span class="n">IXL015I</span> <span class="n">STRUCTURE</span> <span class="n">ALLOCATION</span> <span class="n">INFORMATION</span> <span class="n">FOR</span> <span class="mi">598</span>
<span class="n">STRUCTURE</span> <span class="n">VIRTEL</span>\<span class="n">_LOG</span>\<span class="n">_1</span><span class="p">,</span> <span class="n">CONNECTOR</span> <span class="n">NAME</span> <span class="n">IXGLOGR</span>\<span class="n">_ZAMVS1</span><span class="p">,</span>
<span class="n">CONNECTIVITY</span><span class="o">=</span><span class="n">DEFAULT</span>
<span class="n">CFNAME</span> <span class="n">ALLOCATION</span> <span class="n">STATUS</span><span class="o">/</span><span class="n">FAILURE</span> <span class="n">REASON</span>
<span class="o">--------</span> <span class="o">----------------------------------------</span>
<span class="n">ZACF1</span> <span class="n">STRUCTURE</span> <span class="n">ALLOCATED</span> <span class="n">AC001800</span>
<span class="n">ZACF2</span> <span class="n">PREFERRED</span> <span class="n">CF</span> <span class="n">ALREADY</span> <span class="n">SELECTED</span> <span class="n">AC001800</span>
<span class="n">PREFERRED</span> <span class="n">CF</span> <span class="n">HIGHER</span> <span class="n">IN</span> <span class="n">PREFLIST</span>
<span class="n">LOGGER</span> <span class="n">CONNECTED</span>
</pre></div>
</div>
<p>After this point all messages will be written to the logger, even
responses to commands. Each Virtel that has LOG=LOGGER will connect to
the structure. The last message you will see is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">VIR0000I</span> <span class="n">SMTP</span> <span class="n">Date</span><span class="p">:</span> <span class="n">Wed</span><span class="p">,</span> <span class="mi">09</span> <span class="n">Dec</span> <span class="mi">2015</span> <span class="mi">22</span><span class="p">:</span><span class="mi">34</span><span class="p">:</span><span class="mi">57</span> <span class="o">+</span><span class="mi">0100</span>
</pre></div>
</div>
<p>Fortunately there is a print program that can be used to format and
print off the log records. This is VIR00002B. When the logstream reaches
a particular threshold is spools off a dataset. The following messages
will appear in the log:-</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">IEF196I</span> <span class="n">IGD100I</span> <span class="mi">0</span><span class="n">AA8</span> <span class="n">ALLOCATED</span> <span class="n">TO</span> <span class="n">DDNAME</span> <span class="n">SYS00008</span> <span class="n">DATACLAS</span> <span class="p">(</span> <span class="p">)</span>
<span class="n">IXG283I</span> <span class="n">OFFLOAD</span> <span class="n">DATASET</span> <span class="n">IXGLOGR</span><span class="o">.</span><span class="n">LOGGER</span><span class="o">.</span><span class="n">VIRTEL</span><span class="o">.</span><span class="n">A0000005</span> <span class="mi">897</span>
<span class="n">ALLOCATED</span> <span class="n">NEW</span> <span class="n">FOR</span> <span class="n">LOGSTREAM</span> <span class="n">LOGGER</span><span class="o">.</span><span class="n">VIRTEL</span>
<span class="n">CISIZE</span><span class="o">=</span><span class="mi">4</span><span class="n">K</span><span class="p">,</span> <span class="n">SIZE</span><span class="o">=</span><span class="mi">147456</span>
<span class="n">IXG251I</span> <span class="n">IDCAMS</span> <span class="n">SYSTEM</span> <span class="n">SERVICES</span>
<span class="n">TIME</span><span class="p">:</span> <span class="mi">22</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="mi">21</span> <span class="mi">12</span><span class="o">/</span><span class="mi">09</span><span class="o">/</span><span class="mi">15</span> <span class="n">PAGE</span> <span class="mi">1</span>
<span class="n">IXG251I</span> <span class="n">ALTER</span> <span class="n">IXGLOGR</span><span class="o">.</span><span class="n">LOGGER</span><span class="o">.</span><span class="n">VIRTEL</span><span class="o">.</span><span class="n">A0000005</span><span class="o">.</span><span class="n">DATA</span> <span class="o">-</span>
<span class="n">IXG251I</span> <span class="n">SHR</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="n">IXG251I</span> <span class="n">IDC0531I</span> <span class="n">ENTRY</span> <span class="n">IXGLOGR</span><span class="o">.</span><span class="n">LOGGER</span><span class="o">.</span><span class="n">VIRTEL</span><span class="o">.</span><span class="n">A0000005</span><span class="o">.</span><span class="n">DATA</span> <span class="n">ALTERED</span>
<span class="n">IXG251I</span> <span class="n">IDC0001I</span> <span class="n">FUNCTION</span> <span class="n">COMPLETED</span><span class="p">,</span> <span class="n">HIGHEST</span> <span class="n">CONDITION</span> <span class="n">CODE</span> <span class="n">WAS</span> <span class="mi">0</span>
<span class="n">IXG251I</span> <span class="n">IDC0002I</span> <span class="n">IDCAMS</span> <span class="n">PROCESSING</span> <span class="n">COMPLETE</span><span class="o">.</span> <span class="n">MAXIMUM</span> <span class="n">CONDITION</span> <span class="n">CODE</span> <span class="n">WAS</span> <span class="mi">0</span>
<span class="n">IXG282I</span> <span class="n">OFFLOAD</span> <span class="n">DATASET</span> <span class="n">IXGLOGR</span><span class="o">.</span><span class="n">LOGGER</span><span class="o">.</span><span class="n">VIRTEL</span><span class="o">.</span><span class="n">A0000005</span> <span class="mi">904</span>
<span class="n">WAS</span> <span class="n">ALTERED</span> <span class="n">FOR</span> <span class="n">LOGSTREAM</span> <span class="n">LOGGER</span><span class="o">.</span><span class="n">VIRTEL</span>
<span class="n">UPDATED</span> <span class="n">ATTRIBUTE</span> <span class="n">VSAM</span> <span class="n">SHAREOPTIONS</span>
</pre></div>
</div>
<p>To list the logstream, structure and its associated offload datasets,
use the following JCL:-</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">//</span><span class="n">SPTHOLTL</span> <span class="n">JOB</span> <span class="n">CLASS</span><span class="o">=</span><span class="n">A</span><span class="p">,</span><span class="n">MSGCLASS</span><span class="o">=</span><span class="n">X</span><span class="p">,</span><span class="n">MSGLEVEL</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">NOTIFY</span><span class="o">=&amp;</span><span class="n">SYSUID</span>
<span class="o">//</span><span class="n">STEP1</span> <span class="n">EXEC</span> <span class="n">PGM</span><span class="o">=</span><span class="n">IXCMIAPU</span><span class="p">,</span><span class="n">REGION</span><span class="o">=</span><span class="mi">4</span><span class="n">M</span>
<span class="o">//</span><span class="n">SYSPRINT</span> <span class="n">DD</span> <span class="n">SYSOUT</span><span class="o">=*</span>
<span class="n">DATA</span> <span class="n">TYPE</span><span class="p">(</span><span class="n">LOGR</span><span class="p">)</span> <span class="n">REPORT</span><span class="p">(</span><span class="n">NO</span><span class="p">)</span>
<span class="n">LIST</span> <span class="n">STRUCTURE</span> <span class="n">NAME</span><span class="p">(</span><span class="n">VIRTEL</span>\<span class="n">_LOG</span>\<span class="n">_1</span><span class="p">)</span> <span class="n">DETAIL</span><span class="p">(</span><span class="n">YES</span><span class="p">)</span>
<span class="n">LIST</span> <span class="n">LOGSTREAM</span> <span class="n">NAME</span><span class="p">(</span><span class="n">LOGGER</span><span class="o">.</span><span class="n">VIRTEL</span><span class="p">)</span> <span class="n">DETAIL</span><span class="p">(</span><span class="n">YES</span><span class="p">)</span>
</pre></div>
</div>
<p>The output will look something like this:-</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Ext</span><span class="o">.</span> <span class="o">&lt;</span><span class="n">SEQ</span><span class="c1">#&gt; Lowest Blockid / Highest GMT / Highest Local / Status Highest Blockid Highest RBA System Name</span>
<span class="o">-----</span> <span class="o">--------</span> <span class="o">----------------</span> <span class="o">-----------------</span> <span class="o">------------------------</span>

<span class="n">A0000001</span> <span class="mi">0000000000023</span><span class="n">F64</span> <span class="mi">12</span><span class="o">/</span><span class="mi">03</span><span class="o">/</span><span class="mi">14</span> <span class="mi">19</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">35</span> <span class="mi">12</span><span class="o">/</span><span class="mi">03</span><span class="o">/</span><span class="mi">14</span> <span class="mi">20</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">35</span> <span class="mf">0000000000047E76</span> <span class="mi">00023</span><span class="n">F98</span> <span class="n">ZAMVS1</span>
<span class="n">A0000002</span> <span class="mi">0000000000047</span><span class="n">EFC</span> <span class="mi">12</span><span class="o">/</span><span class="mi">03</span><span class="o">/</span><span class="mi">14</span> <span class="mi">21</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="mi">42</span> <span class="mi">12</span><span class="o">/</span><span class="mi">03</span><span class="o">/</span><span class="mi">14</span> <span class="mi">22</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="mi">42</span> <span class="mi">000000000006</span><span class="n">BE2C</span> <span class="mi">00023</span><span class="n">FA1</span> <span class="n">ZAMVS1</span>
<span class="n">A0000003</span> <span class="mi">000000000006</span><span class="n">BE9D</span> <span class="mi">12</span><span class="o">/</span><span class="mi">03</span><span class="o">/</span><span class="mi">14</span> <span class="mi">22</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">12</span> <span class="mi">12</span><span class="o">/</span><span class="mi">03</span><span class="o">/</span><span class="mi">14</span> <span class="mi">23</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">12</span> <span class="mi">000000000008</span><span class="n">FDEB</span> <span class="mi">00023</span><span class="n">FB4</span> <span class="n">ZAMVS1</span>
<span class="n">A0000004</span> <span class="mi">000000000008</span><span class="n">FE51</span> <span class="mi">12</span><span class="o">/</span><span class="mi">09</span><span class="o">/</span><span class="mi">15</span> <span class="mi">20</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">39</span> <span class="mi">12</span><span class="o">/</span><span class="mi">09</span><span class="o">/</span><span class="mi">15</span> <span class="mi">21</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">39</span> <span class="mi">00000000000</span><span class="n">B3D5B</span> <span class="mi">00023</span><span class="n">F90</span> <span class="n">ZAMVS2</span>
<span class="n">A0000005</span> <span class="mi">00000000000</span><span class="n">B3DE1</span> <span class="mi">12</span><span class="o">/</span><span class="mi">09</span><span class="o">/</span><span class="mi">15</span> <span class="mi">21</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="mi">20</span> <span class="mi">12</span><span class="o">/</span><span class="mi">09</span><span class="o">/</span><span class="mi">15</span> <span class="mi">22</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="mi">20</span> <span class="n">CURRENT</span> <span class="mi">00000000000</span><span class="n">CCBC7</span> <span class="mf">00018E5</span><span class="n">F</span> <span class="n">ZAMVS2</span>
<span class="n">NUMBER</span> <span class="n">OF</span> <span class="n">DATA</span> <span class="n">SETS</span> <span class="n">IN</span> <span class="n">LOG</span> <span class="n">STREAM</span><span class="p">:</span> <span class="mi">5</span>
</pre></div>
</div>
<p>To delete the structure, run the following job:-</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">//</span><span class="n">SPTHOLTC</span> <span class="n">JOB</span> <span class="n">CLASS</span><span class="o">=</span><span class="n">A</span><span class="p">,</span><span class="n">MSGCLASS</span><span class="o">=</span><span class="n">X</span><span class="p">,</span><span class="n">MSGLEVEL</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">NOTIFY</span><span class="o">=&amp;</span><span class="n">SYSUID</span>
<span class="o">//</span><span class="n">STEP1</span> <span class="n">EXEC</span> <span class="n">PGM</span><span class="o">=</span><span class="n">IXCMIAPU</span><span class="p">,</span><span class="n">REGION</span><span class="o">=</span><span class="mi">4</span><span class="n">M</span>
<span class="o">//</span><span class="n">SYSPRINT</span> <span class="n">DD</span> <span class="n">SYSOUT</span><span class="o">=*</span>
<span class="n">DATA</span> <span class="n">TYPE</span><span class="p">(</span><span class="n">LOGR</span><span class="p">)</span> <span class="n">REPORT</span><span class="p">(</span><span class="n">NO</span><span class="p">)</span>
<span class="n">DELETE</span> <span class="n">LOGSTREAM</span> <span class="n">NAME</span><span class="p">(</span><span class="n">LOGGER</span><span class="o">.</span><span class="n">VIRTEL</span><span class="p">)</span>
<span class="n">LIST</span> <span class="n">LOGSTREAM</span> <span class="n">NAME</span><span class="p">(</span><span class="n">LOGGER</span><span class="o">.</span><span class="n">VIRTEL</span><span class="p">)</span> <span class="n">DETAIL</span><span class="p">(</span><span class="n">YES</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Reverting back to the console</strong></p>
<p>To revert back to console logging, the normal logging behaviour for
Virtel, issue the following command:-</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="n">VIRTEL</span><span class="p">,</span><span class="n">LOG</span><span class="o">=</span><span class="n">CONSOLE</span>
</pre></div>
</div>
<p>After this all Virtel messages will be written to the console.</p>
<p>Example:-</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="n">SPVIR1A</span><span class="p">,</span><span class="n">LOG</span><span class="o">=</span><span class="n">CONSOLE</span>
<span class="n">VIR0238I</span> <span class="n">VIRTEL</span> <span class="n">LOG</span> <span class="n">RECORDING</span> <span class="n">TO</span> <span class="n">CONSOLE</span>
<span class="n">F</span> <span class="n">SPVIR1A</span><span class="p">,</span><span class="n">LINES</span>
<span class="n">VIR0200I</span> <span class="n">LINES</span>
<span class="n">VIR0201I</span> <span class="n">VIRTEL</span> <span class="mf">4.55</span> <span class="n">APPLID</span><span class="o">=</span><span class="n">VIRTEL1A</span> <span class="n">LINES</span>
<span class="n">VIR0202I</span> <span class="n">INT</span><span class="o">.</span><span class="n">NAME</span> <span class="n">EXT</span><span class="o">.</span><span class="n">NAME</span> <span class="n">TYPE</span> <span class="n">ACB</span> <span class="n">OR</span> <span class="n">IP</span>
<span class="n">VIR0202I</span> <span class="o">--------</span> <span class="o">--------</span> <span class="o">-----</span> <span class="o">---------</span>
<span class="n">VIR0202I</span> <span class="n">C</span><span class="o">-</span><span class="n">HTTP</span> <span class="n">HTTP</span><span class="o">-</span><span class="n">CLI</span> <span class="n">TCP1</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">170.15</span><span class="p">:</span><span class="mi">41002</span>
<span class="n">VIR0202I</span> <span class="n">W</span><span class="o">-</span><span class="n">HTTP</span> <span class="n">HTTP</span><span class="o">-</span><span class="n">W2H</span> <span class="n">TCP1</span> <span class="p">:</span><span class="mi">41015</span>
<span class="n">VIR0202I</span> <span class="o">---</span><span class="n">END</span> <span class="n">OF</span> <span class="n">LIST</span><span class="o">---</span>
</pre></div>
</div>
<p><strong>The VIR0002B Logger print program.</strong></p>
<p>This program currently resides in SPTHOLT.VIRTEL.DEV.LOADLIB</p>
<p>Example JCL:-</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">//*</span>
<span class="o">//*</span> <span class="n">DESCRIPTION</span>
<span class="o">//*</span>
<span class="o">//</span><span class="n">LOGGER</span> <span class="n">PROC</span> <span class="n">P</span><span class="o">=</span>
<span class="o">//</span><span class="n">S01</span> <span class="n">EXEC</span> <span class="n">PGM</span><span class="o">=</span><span class="n">VIR0002B</span><span class="p">,</span><span class="n">PARM</span><span class="o">=</span><span class="s1">&#39;&amp;P&#39;</span>
<span class="o">//</span><span class="n">STEPLIB</span> <span class="n">DD</span> <span class="n">DSN</span><span class="o">=</span><span class="n">SP000</span><span class="o">.</span><span class="n">SPTHOLT</span><span class="o">.</span><span class="n">DEV</span><span class="o">.</span><span class="n">LOADLIB</span><span class="p">,</span><span class="n">DISP</span><span class="o">=</span><span class="n">SHR</span>
<span class="o">//</span><span class="n">SYSUDUMP</span> <span class="n">DD</span> <span class="n">SYSOUT</span><span class="o">=*</span>
<span class="o">//</span><span class="n">SYSOUT</span> <span class="n">DD</span> <span class="n">SYSOUT</span><span class="o">=*</span>
<span class="o">//</span><span class="n">VIRLOG</span> <span class="n">DD</span> <span class="n">SYSOUT</span><span class="o">=*</span><span class="p">,</span><span class="n">DCB</span><span class="o">=</span><span class="n">BLKSIZE</span><span class="o">=</span><span class="mi">13200</span>
<span class="o">//</span> <span class="n">PEND</span>
<span class="o">//</span><span class="n">S01</span> <span class="n">EXEC</span> <span class="n">LOGGER</span><span class="p">,</span><span class="n">P</span><span class="o">=</span><span class="s1">&#39;COPY&#39;</span>
<span class="o">//*</span><span class="mi">02</span> <span class="n">EXEC</span> <span class="n">LOGGER</span><span class="p">,</span><span class="n">P</span><span class="o">=</span><span class="s1">&#39;COPY(&gt;000)&#39;</span>
<span class="o">//*</span><span class="mi">03</span> <span class="n">EXEC</span> <span class="n">LOGGER</span><span class="p">,</span><span class="n">P</span><span class="o">=</span><span class="s1">&#39;COPY(2014336,2014336)&#39;</span>
<span class="o">//*</span><span class="mi">04</span> <span class="n">EXEC</span> <span class="n">LOGGER</span><span class="p">,</span><span class="n">P</span><span class="o">=</span><span class="s1">&#39;DELETE(2014336)&#39;</span>
<span class="o">//*</span><span class="mi">05</span> <span class="n">EXEC</span> <span class="n">LOGGER</span><span class="p">,</span><span class="n">P</span><span class="o">=</span><span class="s1">&#39;DELETE(&gt;000)&#39;</span>
</pre></div>
</div>
<p>The parameters are as follows:-</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">COPY</span><span class="p">([</span><span class="n">start_date</span><span class="p">][,</span><span class="n">end_date</span><span class="p">]),</span> <span class="n">DELETE</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
         <span class="p">(</span><span class="o">&gt;</span><span class="n">nnn</span><span class="p">)</span>                  <span class="p">(</span><span class="o">&gt;</span><span class="n">nnn</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>COPY</strong></p>
<p>Records are to be copied to the SYSLOG-format file. If COPY is not
specified, no records are copied.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">start_date</span><span class="p">,</span><span class="n">end_date</span>
</pre></div>
</div>
<p>The starting and ending dates of the time span, both in the format
YYYYDDD. start_date must not be later than end_date. end_date must
not be later than today, the day the program runs. The default for
start_date is the date of the oldest record in the log stream, and for
end_date is yesterday, the day before the program runs. If both
start_date and end_date are allowed to default, the parentheses after
COPY may be omitted. If you specify a start date of today, you must also
specify the end date of today, otherwise the program will assume an end
date of yesterday and abend.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">nnn</span>
</pre></div>
</div>
<p>Indicates that records dated more than nnn days before today are to be
copied. The time span will</p>
<p>start with the date of the oldest record in the log stream and end nnn+1
days before today (that is,</p>
<p>records dated more than nnn days before today will be copied. nnn is a
number between zero and 999.</p>
<p>For example, if the program is run on May 25, specifying “COPY(&gt;3)” will
copy records dated up to and including May 21. Note that &gt;0 corresponds
to yesterday. To copy today’s records, you must use the
“[start_date][,end_date]” form and specify today as the end date.</p>
<p><strong>DELETE</strong></p>
<p>Records are to be deleted. If DELETE is not specified, no records are
deleted.</p>
<p><strong>date</strong></p>
<p>The date of the newest record to be deleted from the log stream. All
records dated on or before that date will be deleted. The date must not
be later than today. If the date specified is today, all records in the
log stream will be deleted.</p>
<p><strong>&gt;nnn</strong></p>
<p>Indicates that records dated more than nnn days before today are to be
deleted. nnn is a number between zero and 999. For example, if the program is run on July 15,
specifying “DELETE(&gt;5)” will delete records dated up to and including
July 9. Note that &gt;0 corresponds to yesterday. To delete today’s
records, you must use the “date” form and specify today as the date. If
DELETE is specified, either the date or “&gt;nnn” must be given.</p>
<p>You may specify either COPY or DELETE or both. If you specify both they
must be separated by a comma and may appear in either order. However,
regardless of the order in which the parameters are specified, the copy
operation will always occur before the delete.</p>
<p><strong>Notes:-</strong></p>
<p>When copying records, this program detects the end of a
day’s records when it either reads the first record for the next day or
attempts to read past the newest record in the log stream. This means
that, if end_date is today and the log stream is being written at the
time this program runs, the records that are copied may not be
predictable. In particular, if both COPY with an ending date of today
and DELETE with a date of today are specified, there may be more records
deleted than copied.</p>
<p>When the “&gt;nnn” form of the COPY or DELETE parameter is
specified, program converts it to a date by subtracting nnn days from
the date the program is run. The calculation is done once, at the
beginning of the program. If the program is run shortly before midnight,
so that the calculation occurs before midnight and the actual copying or
deletion of records occurs after midnight, the records copied or deleted
will not reflect the number of days specified. To prevent this, you
should avoid running the program close to midnight with the “&gt;nnn” form.</p>
<p>If the program is run regularly after midnight with the
parameter “COPY(&gt;0),DELETE(&gt;1)”, it will copy records from the previous
day and earlier, and will delete from the records from two days ago,
leaving something over 24 hours’ worth of records in the log each time.</p>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../TN201522/TN201522.html" class="btn btn-neutral float-right" title="What’s new in Virtel 4.55" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../TN201519/TN201519.html" class="btn btn-neutral" title="Processing the VTAM USS MSG10 buffer" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Syspertec. All rights reserved.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'7',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Protecting business assets &mdash; Virtel 1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="Virtel 1 documentation" href="../../../index.html"/>
        <link rel="up" title="Technical Newsletters" href="../../../newsletters.html"/>
        <link rel="next" title="Protecting Virtel Applications with Shibboleth" href="../TN201702/TN201702.html"/>
        <link rel="prev" title="Customising Virtel in V4.56" href="../TN201611/TN201611.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Virtel
          

          
            
            <img src="../../../_static/logo_virtel_web.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../virtel.html">Virtel Manuals</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../newsletters.html">Technical Newsletters</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id1">2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id2">2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../newsletters.html#id3">2016</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../newsletters.html#id4">2017</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Protecting business assets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201702/TN201702.html">Protecting Virtel Applications with Shibboleth</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201703/TN201703.html">Passticket support with CA Top Secret</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201704/TN201704.html">Virtel Macros</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../howto.html">Miscellaneous</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">Virtel</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../../newsletters.html">Technical Newsletters</a> &raquo;</li>
      
    <li>Protecting business assets</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/manuals/newsletters/TN201701/TN201701.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="protecting-business-assets">
<h1>Protecting business assets<a class="headerlink" href="#protecting-business-assets" title="Permalink to this headline">¶</a></h1>
<p>In this newsletter we discuss how to protect access to business assets
using Virtel rules. In this scenario with have two types of business
assets or applications. The first type is the production assets which
are protected by LDAP and use SSO to facilitate security and automatic
logon without the user having to specify a userid and password. The
other type of business asset is a standard application, like TSO or
CICS, which requires the user to enter a userid and password when the
application is accessed. LDAP and SSO are not discussed in this
newsletter. There may be alternatives to this SSO setup but for our
scenario we are assuming two types of asset – secure (requiring no
application logon) and insecure (application logon required). The
scenario utilizes a proxy server to load balance across the Virtel
instances.</p>
<p><a class="reference internal" href="../../../_images/image18.jpg"><img alt="image0" src="../../../_images/image18.jpg" style="width: 6.26806in; height: 5.52569in;" /></a></p>
<p>From a Virtel perspective it has been decided that secure assets are
associated with port 41002, and non-secure through port 41003. Access to
the assets should only be through the proxy server using a secure port,
in our case the standard SSL port 443. Our goal is to protect the assets
from being accessed internal, or external, using the assigned Virtel IP
and port addresses. For example, John in accounts should be able to
access PROD IMS, but Peter, who works offsite at home, but still has
access via a VPN to the company, shouldn’t. In this simplistic scenario
anyone could in theory, access any one of the Virtel instances through
their internal IP address – 192.168.07x.10x:4100x and attempt to logon.
What is required is means to guarantee that access to any of the assets
should only be through the proxy server and not any other IP address.</p>
<p>Using Virtel Rules we can compare the calling IP address and if it
doesn’t match with the rule then the user will be re-directed to another
Virtel entry point. To implement this protection we use the following
ARBO statements for each line, 41002 and 41003:-</p>
<p>RULE ID=R0000100,</p>
<p>RULESET=C-HTTP, <strong>&lt; Our Line</strong> 41002</p>
<p>STATUS=ACTIVE,</p>
<p>DESC=&#8217;HTTP access (Test calling address)&#8217;,</p>
<p>ENTRY=EPSEC, <strong>&lt; Associated Entry point</strong></p>
<p>IPADDR=(EQUAL,192.168.092.160), <strong>&lt; IP address of Proxy</strong></p>
<p>NETMASK=255.255.255.255</p>
<p>*</p>
<p>RULE ID=R0000199,</p>
<p>RULESET=C-HTTP, <strong>&lt; Our Line 41002</strong></p>
<p>STATUS=ACTIVE,</p>
<p>DESC=&#8217;HTTP access (Calling IP address not valid)&#8217;,</p>
<p>ENTRY=EPREJECT</p>
<p>*</p>
<p>RULE ID=R0000200,</p>
<p>RULESET=R-HTTP, <strong>&lt; Our Line 41003</strong></p>
<p>STATUS=ACTIVE,</p>
<p>DESC=&#8217;HTTP access (Test calling address)&#8217;,</p>
<p>ENTRY=EPSEC, <strong>&lt; Associated Entry point</strong></p>
<p>IPADDR=(EQUAL,192.168.092.160), <strong>&lt; IP address of Proxy</strong></p>
<p>NETMASK=255.255.255.255</p>
<p>*</p>
<p>RULE ID=R0000299,</p>
<p>RULESET=R-HTTP, <strong>&lt; Our Line 41003</strong></p>
<p>STATUS=ACTIVE,</p>
<p>DESC=&#8217;HTTP access (Calling IP address not valid)&#8217;,</p>
<p>ENTRY=EPREJECT</p>
<p>ENTRY ID=EPREJECT,</p>
<p>DESC=&#8217;Entry point for unauthorized HTTP users&#8217;,</p>
<p>TRANSACT=REJ,</p>
<p>TIMEOUT=0720,</p>
<p>ACTION=0,</p>
<p>EMUL=HTML,</p>
<p>SIGNON=VIR0020H,</p>
<p>MENU=VIR0021A,</p>
<p>EXTCOLOR=X</p>
<p>*</p>
<p>TRANSACT ID=REJ-00,</p>
<p>NAME=EPREJECT,</p>
<p>DESC=&#8221;Default directory = entry point name&#8221;,</p>
<p>APPL=CLI-DIR, <strong>&lt; User template directory</strong></p>
<p>TYPE=4,</p>
<p>TERMINAL=CLLOC,</p>
<p>STARTUP=2,</p>
<p>SECURITY=0</p>
<p>So what is happening here? When a user attempts to establish a session
Virtel will match the users calling IP address against the IPADDR in
rule R0000x00. If it matches then they will be able to access the entry
point defined in the rule – in this case EPSEC or EPNSEC. For line 41002
this Entry Point will contain a list of the W2H applications using SSO.
For line 41003, using Entry Point EPNSEC, this will contain a list of
W2H transactions which use standard RACF protection.</p>
<p>Now, if the calling IP addressed is not matched, the RULE fails and the
next rule in the ruleset is tested, in this case rule R0000x99. This is
a catch all rule. Any user falling into this rule will be directed to
entry point EPREJECT. The Entry Point EPREJECT only has one transaction,
its default transaction, and this will invoke the template page
EPREJECT.HTM.</p>
<p>To protect the business assets the calling IP address can only be that
of the proxy server - 192.168.092.160. Any other calling IP address will
be rejected by the Virtel ruleset. By default, the ruleset associated
with a line is normally the internal name of the line – C-HTTP for
example. How the rejected session is handled is up to the user. In the
following example, the default template EPREJECT.HTM, which is
associated with the entry point EPREJECT, looks like this:-</p>
<p>&lt;!DOCTYPE HTML PUBLIC &#8220;-//W3C//DTD HTML 4.01 Transitional//EN&#8221;
&#8220;<a class="reference external" href="http://www.w3.org/TR/html4/loose.dtd">http://www.w3.org/TR/html4/loose.dtd</a>&#8220;&gt;</p>
<p>&lt;!&#8211;VIRTEL start=&#8221;{{{&#8221; end=&#8221;}}}&#8221; &#8211;&gt;</p>
<p>&lt;html&gt;</p>
<p>&lt;script&gt;</p>
<p>// customization for reject</p>
<p>window.location.replace(&#8220;<a class="reference external" href="http://www.mycompany.com">http://www.mycompany.com</a>&#8221;);</p>
<p>&lt;/script&gt;</p>
<p>&lt;/html&gt;</p>
<p>This template must exist in the CLI-DIR directory as this is where the
Entry Point EPREJECT expects to find them. When the template is served
it will display the companies “public” web site.</p>
<p>To upload the ARBO statements to your ARBO use the following JCL:-</p>
<p>//*</p>
<p>// SET LOAD=SPTHOLT.VIRT456.LOADLIB</p>
<p>// SET ARBO=SP000.SPVIREH0.ARBO1A</p>
<p>//*</p>
<p>//DELETE EXEC PGM=VIRCONF,PARM=&#8217;LOAD,NOREPL&#8217;,REGION=2M</p>
<p>//STEPLIB DD DSN=&amp;LOAD,DISP=SHR</p>
<p>//SYSPRINT DD SYSOUT=*</p>
<p>//SYSUDUMP DD SYSOUT=*</p>
<p>//VIRARBO DD DSN=&amp;ARBO,DISP=SHR</p>
<p>//SYSIN DD *</p>
<p>DELETE TYPE=RULE,ID=R0000100 Delete rule</p>
<p>DELETE TYPE=RULE,ID=R0000199 Delete rule</p>
<p>DELETE TYPE=RULE,ID=R0000200 Delete rule</p>
<p>DELETE TYPE=RULE,ID=R0000299 Delete rule</p>
<p>DELETE TYPE=ENTRY,ID=EPREJECT Entry point</p>
<p>DELETE TYPE=TRANSACT,ID=REJ-00 Delete transaction</p>
<p>*</p>
<p>//CONFIG EXEC PGM=VIRCONF,PARM=&#8217;LOAD,NOREPL&#8217;,REGION=2M</p>
<p>//STEPLIB DD DSN=&amp;LOAD,DISP=SHR</p>
<p>//SYSPRINT DD SYSOUT=*</p>
<p>//SYSUDUMP DD SYSOUT=*</p>
<p>//VIRARBO DD DSN=&amp;ARBO,DISP=SHR</p>
<p>//SYSIN DD DSN=SPTHOLT.VIRTEL.CNTL(RULES),DISP=SHR</p>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../TN201702/TN201702.html" class="btn btn-neutral float-right" title="Protecting Virtel Applications with Shibboleth" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../TN201611/TN201611.html" class="btn btn-neutral" title="Customising Virtel in V4.56" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Syspertec. All rights reserved.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>
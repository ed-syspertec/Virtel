

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>How to use TESTVTAM &mdash; Virtel 1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="Virtel 1 documentation" href="../../../index.html"/>
        <link rel="up" title="Technical Newsletters" href="../../../newsletters.html"/>
        <link rel="next" title="VIRTEL SMF Support" href="../TN201404/TN201404.html"/>
        <link rel="prev" title="Formatting VIRTEL Line Trace" href="../TN201402/TN201402.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Virtel
          

          
            
            <img src="../../../_static/logo_virtel_web.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../newsletters.html">Technical Newsletters</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../../newsletters.html#id1">2014</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../TN201402/TN201402.html">Formatting VIRTEL Line Trace</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">How to use TESTVTAM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201404/TN201404.html">VIRTEL SMF Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201405/TN201405.html">Multi Line WTO Support in VIRTEL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201406/TN201406.html">Taking a VIRTEL terminal trace</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201407/TN201407.html">Pass tickets and supporting Proxy Servers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201409/TN201409.html">Mainframe printing with Virtel 4.56</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201410/TN201410.html">Taking a VTAM trace</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201411/TN201411.html">Building a customized USSTAB using Virtel’s Web Access facility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201412/TN201412.html">Sharing user macros across multiple instances of Virtel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201414/TN201414.html">CICS Printing problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201415/TN201415.html">Virtel JES Writer program</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201416/TN201416.html">Virtel Security. Using server and client certificates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201417/TN201417.html">RACF Grouping Class and Virtel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../TN201419/TN201419.html">Maintaining TRSF file sets</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">Virtel</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../../newsletters.html">Technical Newsletters</a> &raquo;</li>
      
    <li>How to use TESTVTAM</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/manuals/newsletters/TN201403/TN201403.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-to-use-testvtam">
<h1>How to use TESTVTAM<a class="headerlink" href="#how-to-use-testvtam" title="Permalink to this headline">¶</a></h1>
<p><strong>*Note:</strong> Replace SPTHOLT with your HLQ.*</p>
<p><strong>Installation instructions</strong></p>
<p>The following outlines the installation procedure of the TESTVTAM
package.</p>
<ol class="arabic">
<li><p class="first">Allocate a TRS file on the mainframe with the following JCL:</p>
<blockquote>
<div><p>//SPTHOLTT JOB (9000),&#8217;ED...HOLT...&#8217;,</p>
<p>// NOTIFY=&amp;SYSUID,RESTART=*,</p>
<p>// CLASS=A,</p>
<p>// MSGCLASS=X,</p>
<p>// MSGLEVEL=(0,0),</p>
<p>// COND=(4,LT)</p>
<p>//*&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-+</p>
<p>//* |</p>
<p>//* CREATE A TERSE FILE READY TO RECEIVE BINARY UPLOAD |</p>
<p>//* |</p>
<p>//*&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-+</p>
<p>//DEL EXEC PGM=IEFBR14</p>
<p>//DDA DD DISP=(MOD,DELETE),UNIT=SYSDA,SPACE=(TRK,0),</p>
<p>// DSN=SPTHOLT.XMIT.LOADLIB.TRS</p>
<p>//S00 EXEC PGM=IEFBR14</p>
<p>//DDA DD DSN=SPTHOLT.XMIT.LOADLIB.TRS,DISP=(,CATLG),UNIT=SYSDA,</p>
<p>// SPACE=(CYL,(1,1)),DCB=(LRECL=1024,BLKSIZE=6144,RECFM=FB)</p>
<p>//DDB DD DSN=SPTHOLT.XMIT.LOADLIB.BIN,DISP=(,CATLG),UNIT=SYSDA,</p>
<p>// SPACE=(CYL,(1,1)),DCB=(LRECL=80,BLKSIZE=3120,RECFM=FB)</p>
</div></blockquote>
</li>
</ol>
<ol class="arabic">
<li><p class="first">Upload the binary file TESTVTAM.trs to the mainframe and unterse the
TRS file. The following is an example of the JCL required to unterse
the file.</p>
<blockquote>
<div><p>//SPTHOLTD JOB DSSDUMP,CLASS=A,MSGCLASS=X,NOTIFY=&amp;SYSUID</p>
<p>//S01 EXEC PGM=TRSMAIN,PARM=UNPACK</p>
<p>//SYSPRINT DD SYSOUT=*</p>
<p>//INFILE DD DSN=SPTHOLT.XMIT.LOADLIB.TRS,DISP=SHR</p>
<p>//OUTFILE DD DSN=SPTHOLT.XMIT.LOADLIB.BIN,DISP=SHR</p>
</div></blockquote>
</li>
</ol>
<ol class="arabic">
<li><p class="first">Receive the untersed file using the TSO RECEIVE command.</p>
<blockquote>
<div><p>receive indsn(XMIT.LOADLIB.BIN)</p>
<p>This will create the LOAD library HLQ.XMIT.LOADLIB which should
contain the following members:-</p>
<p>TESTVTAM</p>
</div></blockquote>
</li>
</ol>
<ol class="arabic">
<li><p class="first">Upload example trace dataset</p>
<blockquote>
<div><p>The package includes a sample trace dataset VIRTRACE.TXT. This needs
to be uploaded to a mainframe dataset as a text file with the
following attributes:-</p>
<p><img alt="image0" src="../../../_images/image1.png" /></p>
</div></blockquote>
</li>
</ol>
<ol class="arabic">
<li><p class="first">Add TESTVTAM procedure to a PROCLIB library</p>
<blockquote>
<div><p>The following procedure is required in SYS1.PROCLIB:-</p>
<p>//TESTVTAM PROC APPLID=TESTVTAM</p>
<p>//IEFPROC EXEC PGM=TESTVTAM,TIME=1440,</p>
<p>// REGION=32M,PARM=&#8217;&amp;APPLID&#8217;</p>
<p>//STEPLIB DD DISP=SHR,DSN=USER.LINKLIB</p>
<p>//SNAPFILE DD SYSOUT=*</p>
<p>//SYSUDUMP DD SYSOUT=*</p>
<p>//IEFRDER DD DSN=NULLFILE,DISP=SHR &lt;== Trace input file</p>
</div></blockquote>
</li>
</ol>
<ol class="arabic">
<li><p class="first">Add a VTAM definition to SYS1.VTAMLST</p>
<blockquote>
<div><p>Add member TESTAPPL to SYS1.VTAMLST.</p>
<p>TESTAPPL VBUILD TYPE=APPL</p>
<p>TESTVTAM APPL AUTH=VPACE,ACBNAME=TESTVTAM</p>
<p><strong>Running TESTVTAM</strong></p>
<p><strong>Getting a 3270 trace from Virtel</strong></p>
<p>Request a Virtel Trace from the client using the following command:</p>
<p><em>F virtel, trace,r=name_of_relay</em></p>
<p>Transfer the trace file via ftp (ftp,ascii) to the Syspertec Support
Centre. Receive and upload the ftp file to a z/OS DSN. The format of
the DSN must be something like:</p>
<p><em>SPCLIENT.PMA.CICS3WIN3.VIRTRACE</em></p>
<p>NB. The DSN file must contain four elements:
SPCLIENT.XXX.YYY.VIRTRACE. If there is a RACF problem (See
SPTBOWL.CBT485.DISSEN.ASM(RACFDEF))</p>
</div></blockquote>
</li>
</ol>
<ol class="arabic">
<li><p class="first"><strong>Start a TESTVTAM trace</strong></p>
<blockquote>
<div><p>Issue the following z/OS commands:</p>
<p><em>v net,act,id=testappl</em></p>
<p><a href="#id1"><span class="problematic" id="id2">*</span></a>s testvtam,dsn=name of the trace file. *</p>
<p><em>For example:- s testvtam.testvtam,dsn=spclient.cicswin3.virtrace</em></p>
</div></blockquote>
</li>
</ol>
<ol class="arabic">
<li><p class="first"><strong>Connect to TESTVTAM with a VIRTEL W2H session</strong></p>
<blockquote>
<div><p>Connect to TESTVTAM from a VIRTEL session using the correct
transaction to support the screen type. Normally W2H LINE on port
41001 using the following parameters:-</p>
<p><a class="reference external" href="http://192.168.170.50:41001/w2h/WEB2AJAX.htm+testvtam%5b?logmode=x&amp;rows=r&amp;cols=c">http://192.168.170.50:41001/w2h/WEB2AJAX.htm+testvtam[?logmode=x&amp;rows=r&amp;cols=c</a>]</p>
<p>Default Model 2</p>
<p>Other screen types:</p>
<p>x = SNX32703 | D4A32XX3 Model3</p>
<p>SNX32704 | D4A32XX4 Model4</p>
<p>SNX32705 | D4A32XX5 Model5</p>
<p>r number of rows</p>
<p>c number of cols.</p>
<p>Example for a 3270 Model 3</p>
<p><a class="reference external" href="http://192.168.170.50:41001/w2h/WEB2AJAX.htm+testvtam?logmode=SNX32703">http://192.168.170.50:41001/w2h/WEB2AJAX.htm+testvtam?logmode=SNX32703</a></p>
<p>Rather than use the &amp;logmode parameter you can set up separate
transactions within the entry point and define a different logmode.
For example:-</p>
<p><a class="reference external" href="http://192.168.170.50:41001/w2h/WEB2AJAX.htm+testvta5">http://192.168.170.50:41001/w2h/WEB2AJAX.htm+testvta5</a></p>
<p>Will call the TESTVTA5 transaction in your WEB2HOST entry point. In
that transaction the logmode would have been defined as SNA32705.</p>
</div></blockquote>
</li>
</ol>
<ol class="arabic">
<li><p class="first">Connect to TESTVTAM with Vista or PC COMM</p>
<blockquote>
<div><p>Get a 3270 session to the z/OS host and from the initial VTAM logon
screen enter Logon TESTVTAM to establish a 3270 session with
TESTVTAM.</p>
</div></blockquote>
</li>
</ol>
<ol class="arabic simple">
<li><dl class="first docutils">
<dt>Compare the 3270 screen image to the Virtel screen image by playing</dt>
<dd>through the trace on the 3270 and VIRTEL screens you should be
able to scan through the VTAM buffers and debug the problem. To
stop the trace issue the following command on the z/OS host: P
TESTVTAM</dd>
</dl>
</li>
</ol>
<p><strong>Notes:</strong></p>
<p>Unless you know the screen type I would suggest using a standard 32*80
setup for a model 2</p>
<p>Vista|PCCOMM Configure for 32*80 lines</p>
<p>Virtel <a class="reference external" href="http://192.168.170.50:41001/w2h/WEB2AJAX.htm+testvtam">http://192.168.170.50:41001/w2h/WEB2AJAX.htm+testvtam</a></p>
<p>You must have the correct 3270 session setup for both the 3270 session
and VIRTEL. If you don’t then you will get buffer misalignment and error
messages when you try to play the TESTVTAM trace. It is probably best to
get the 3270 session working first before trying VIRTEL.</p>
<p>Check the trace for the correct WCC command. The trace required a 3270
model 4 screen (43*80). Make sure that the first write is not F1
(WRITE). If it is modify this to 7E (WRITE ERASE ALTERNATE). This will
ensure that the first screen is displayed in 43*80 mode _ RB
29/11/2013.</p>
<p>Example of a modified trace:-</p>
<p>&#8211;WWIV1049 VS1ET000 11D: to application TXTSY</p>
<p>00000 7DD3D911 D2F3A2</p>
<p>-WWIV1049 VS1ET000 11A: from application TXTSY</p>
<p>00000 <strong>7EC31100</strong> A6D48581 A2A49985 948595A3 40D79996</p>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../TN201404/TN201404.html" class="btn btn-neutral float-right" title="VIRTEL SMF Support" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../TN201402/TN201402.html" class="btn btn-neutral" title="Formatting VIRTEL Line Trace" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Syspertec. All rights reserved.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>
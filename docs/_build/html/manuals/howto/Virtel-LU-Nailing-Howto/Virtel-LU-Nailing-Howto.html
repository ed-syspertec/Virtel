<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Virtel LU Nailing &mdash; Virtel 9 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="prev" title="Virtel AT-TLS" href="../Virtel-AT-TLS-Howto/Virtel-AT-TLS-Howto.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Virtel
              <img src="../../../_static/logo_virtel_web.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                4.61
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../virtel.html">Virtel Manuals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../newsletters.html">Technical Newsletters</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../howto.html">How To Manuals</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../../howto.html#virtel">Virtel</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../Virtel-AT-TLS-Howto/Virtel-AT-TLS-Howto.html">Virtel AT-TLS</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Virtel LU Nailing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-activate-lu-nailing-by-ip-address">How to activate LU nailing by IP address</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-activate-lu-nailing-with-cookies-delivered-by-e-mail">How to activate LU nailing with cookies delivered by e-mail</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-activate-virtel-lu-nailing-with-cookies-obtained-by-self-registration">How to activate VIRTEL LU nailing with cookies obtained by self-registration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adding-lus-to-the-pool">Adding LUs to the pool</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lu-nailing-by-cookie-obtained-by-self-registration">LU nailing by cookie obtained by self-registration.</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Virtel</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../howto.html">How To Manuals</a></li>
      <li class="breadcrumb-item active">Virtel LU Nailing</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/manuals/howto/Virtel-LU-Nailing-Howto/Virtel-LU-Nailing-Howto.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="virtel-lu-nailing">
<span id="id1"></span><h1>Virtel LU Nailing<a class="headerlink" href="#virtel-lu-nailing" title="Permalink to this heading"></a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading"></a></h2>
<section id="description">
<h3>Description<a class="headerlink" href="#description" title="Permalink to this heading"></a></h3>
<p>This document describes procedures for assigning fixed LU names to specific users in VIRTEL Web Access. This is known as <em>LU nailing.</em>
Before you attempt the procedures described in this document, you should first install VIRTEL and get basic access to your 3270 application
working using the sample definitions provided with the product. Do not attempt to define LU nailing with cookies until you have got the basic
VIRTEL Web Access functions working and demonstrated to your satisfaction.</p>
</section>
<section id="what-is-virtel-web-access">
<h3>What is VIRTEL Web Access?<a class="headerlink" href="#what-is-virtel-web-access" title="Permalink to this heading"></a></h3>
<p>VIRTEL Web Access is a software product which enables users to access mainframe 3270 applications from a standard web browser, without
intermediate servers, without Java, and without installing any additional software on the workstation.</p>
</section>
<section id="what-is-lu-nailing">
<h3>What is LU nailing?<a class="headerlink" href="#what-is-lu-nailing" title="Permalink to this heading"></a></h3>
<p>When a user connects to a 3270 application through VIRTEL Web Access, VIRTEL makes it appear to the application as if the user is connecting
from a virtual 3270 terminal. In VTAM terms a virtual 3270 terminal is called a <em>Logical Unit</em> or <em>LU</em>, and each LU has a unique eight
character name (<em>LU name)</em>. VIRTEL has at its disposal a pool of LUs known to VTAM, whose names are specified in the VIRTEL configuration
file (the VIRARBO file). Normally when a user connects to a 3270 application, VIRTEL chooses any available LU from the pool.</p>
<p>While most mainframe applications will accept a connection from any LU name, certain applications (particularly applications which run under
IMS) are sensitive to the LU name because they assign permissions to the user based upon the LU name of the userâ€™s terminal. LU nailing allows
VIRTEL to assign a particular LU name to a user based upon the user’s IP address or upon a cookie presented by the userâ€™s browser.</p>
</section>
<section id="what-are-the-different-types-of-lu-nailing">
<h3>What are the different types of LU nailing?<a class="headerlink" href="#what-are-the-different-types-of-lu-nailing" title="Permalink to this heading"></a></h3>
<p>This document describes the following types of LU nailing:</p>
<ul class="simple">
<li><p>LU nailing by IP address</p></li>
<li><p>LU nailing by cookie delivered by e-mail</p></li>
<li><p>LU nailing by cookie obtained by self-registration</p></li>
<li><p>LU nailing by URL</p></li>
</ul>
</section>
</section>
<section id="how-to-activate-lu-nailing-by-ip-address">
<h2>How to activate LU nailing by IP address<a class="headerlink" href="#how-to-activate-lu-nailing-by-ip-address" title="Permalink to this heading"></a></h2>
<section id="id2">
<h3>Description<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h3>
<p>This chapter describes the procedure for setting up a VIRTEL configuration which will map specific IP addresses to predefined LU
names. This kind of mapping is suitable where users connect from fixed IP addresses. The mapping is done by VIRTEL â€œrulesâ€, and does not
require cookies.</p>
<p>The procedure is described by way of two examples. The first example shows how to map individual IP addresses to specified LU names. The
second example shows how to map a range of IP addresses to a pool of LU names.</p>
</section>
<section id="mapping-individual-ip-addresses-to-lu-names">
<h3>Mapping individual IP addresses to LU names<a class="headerlink" href="#mapping-individual-ip-addresses-to-lu-names" title="Permalink to this heading"></a></h3>
<p>In this example we will choose three IP addresses and map each one to a specific LU name, as shown in the table below:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><strong>IP address</strong></p></td>
<td><p><strong>LU name</strong></p></td>
</tr>
<tr class="row-even"><td><p>192.168.0.39</p></td>
<td><p>RHTVT001</p></td>
</tr>
<tr class="row-odd"><td><p>192.168.0.147</p></td>
<td><p>RHTVT002</p></td>
</tr>
<tr class="row-even"><td><p>192.168.0.45</p></td>
<td><p>RHTVT003</p></td>
</tr>
</tbody>
</table>
<p>To configure this mapping we will add three rules to the W-HTTP line. This is the line defined as port 41001 in the VIRTEL sample
configuration.</p>
<p>First logon to VIRTEL via (tn)3270 and press F1=Admin, or select <em>Admin</em> from the VIRTEL Web Access menu. Then select F1=Lines. Put the cursor on
W-HTTP and press F12 to see the LINE DETAIL DEFINITION panel, then F5 to see the rules associated with the line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>LIST of RULES in RULE SET: W-HTTP ---------------- Applid: SPVIRBW  14:18:20
Name     Status Description                              Entry Point
WHT00100 ACTIVE HTTP access (users authorised by cookie) $COOKIE$
WHT00200 ACTIVE HTTP access (other users)                WEB2HOST

P1=Update P2=Suppress P3=Return P6=1st page P7=Page-1 P8=Page+1 P12=Edit
</pre></div>
</div>
<p><em>Figure 1 List of rules for W-HTTP line</em></p>
<p>Place the cursor on WHT00200 and press F12 to add a new rule. We will add one new rule for each IP-LU mapping. Here is what you need to enter
to create the first rule:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DETAIL</span> <span class="n">of</span> <span class="n">RULE</span> <span class="kn">from</span> <span class="nn">RULE</span> <span class="n">SET</span><span class="p">:</span> <span class="n">W</span><span class="o">-</span><span class="n">HTTP</span> <span class="o">-------------</span> <span class="n">Applid</span><span class="p">:</span> <span class="n">SPVIRBW</span> <span class="mi">14</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">38</span>
<span class="n">Name</span>        <span class="o">===&gt;</span> <span class="n">WHT00110</span> <span class="n">Rule</span> <span class="n">priority</span> <span class="ow">is</span> <span class="n">per</span> <span class="n">name</span>
<span class="n">Status</span>      <span class="o">===&gt;</span> <span class="n">ACTIVE</span> <span class="mi">15</span> <span class="n">Feb</span> <span class="mi">2010</span> <span class="mi">14</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">35</span> <span class="n">SPTBOWL</span>
<span class="n">Description</span> <span class="o">===&gt;</span> <span class="n">HTTP</span> <span class="n">access</span> <span class="kn">from</span> <span class="nn">IP</span> <span class="mf">192.168.0.39</span>
<span class="n">Entry</span> <span class="n">point</span> <span class="o">===&gt;</span> <span class="n">WEB2HOST</span> <span class="n">Target</span> <span class="n">Entry</span> <span class="n">Point</span>
<span class="n">Parameter</span>   <span class="o">===&gt;</span> <span class="n">RHTVT001</span> <span class="o">&amp;</span><span class="mi">1</span> <span class="n">value</span> <span class="ow">or</span> <span class="n">LUNAME</span>
<span class="n">Trace</span>       <span class="o">===&gt;</span> <span class="mi">1</span><span class="o">=</span><span class="n">commands</span> <span class="mi">2</span><span class="o">=</span><span class="n">data</span> <span class="mi">3</span><span class="o">=</span><span class="n">partner</span>
<span class="n">C</span> <span class="p">:</span> <span class="mi">0</span><span class="o">=</span><span class="n">IGNORE</span> <span class="mi">1</span><span class="o">=</span><span class="n">IS</span> <span class="mi">2</span><span class="o">=</span><span class="n">IS</span> <span class="n">NOT</span> <span class="mi">3</span><span class="o">=</span><span class="n">STARTS</span> <span class="n">WITH</span> <span class="mi">4</span><span class="o">=</span><span class="n">DOES</span> <span class="n">NOT</span> <span class="mi">5</span><span class="o">=</span><span class="n">ENDS</span> <span class="n">WITH</span> <span class="mi">6</span><span class="o">=</span><span class="n">DOES</span> <span class="n">NOT</span>
<span class="mi">1</span> <span class="n">IP</span> <span class="n">Subnet</span>   <span class="o">===&gt;</span> <span class="mf">192.168.000.039</span> <span class="n">Mask</span> <span class="o">===&gt;</span> <span class="mf">255.255.255.255</span>
<span class="mi">0</span> <span class="n">Host</span>        <span class="o">===&gt;</span>
<span class="mi">0</span> <span class="n">eMail</span>       <span class="o">===&gt;</span>
<span class="mi">0</span> <span class="n">Calling</span> <span class="n">DTE</span> <span class="o">===&gt;</span> <span class="n">Calling</span> <span class="n">DTE</span> <span class="n">address</span> <span class="ow">or</span> <span class="n">proxy</span>
<span class="mi">0</span> <span class="n">Called</span>      <span class="o">===&gt;</span> <span class="n">Called</span> <span class="n">DTE</span> <span class="n">address</span>
<span class="mi">0</span> <span class="n">CUD0</span> <span class="p">(</span><span class="n">Hex</span><span class="p">)</span>  <span class="o">===&gt;</span> <span class="n">First</span> <span class="mi">4</span> <span class="nb">bytes</span> <span class="n">of</span> <span class="n">CUD</span> <span class="p">(</span><span class="n">X25</span> <span class="n">protocol</span><span class="p">)</span>
<span class="mi">0</span> <span class="n">User</span> <span class="n">Data</span>   <span class="o">===&gt;</span>
<span class="mi">0</span> <span class="n">Days</span>        <span class="o">===&gt;</span> <span class="n">M</span><span class="p">:</span> <span class="n">T</span><span class="p">:</span> <span class="n">W</span><span class="p">:</span> <span class="n">T</span><span class="p">:</span> <span class="n">F</span><span class="p">:</span> <span class="n">S</span><span class="p">:</span> <span class="n">S</span><span class="p">:</span>
<span class="mi">0</span> <span class="n">Start</span> <span class="n">time</span>  <span class="o">===&gt;</span> <span class="n">H</span><span class="p">:</span> <span class="n">M</span><span class="p">:</span> <span class="n">S</span><span class="p">:</span> <span class="n">End</span> <span class="n">time</span> <span class="o">===&gt;</span> <span class="n">H</span><span class="p">:</span> <span class="n">M</span><span class="p">:</span> <span class="n">S</span><span class="p">:</span>
<span class="n">P1</span><span class="o">=</span><span class="n">Update</span> <span class="n">P3</span><span class="o">=</span><span class="n">Return</span> <span class="n">Enter</span><span class="o">=</span><span class="n">Add</span> <span class="n">P4</span><span class="o">=</span><span class="n">Activate</span> <span class="n">P5</span><span class="o">=</span><span class="n">Inactivate</span> <span class="n">P12</span><span class="o">=</span><span class="n">Entry</span> <span class="n">P</span><span class="o">.</span>
</pre></div>
</div>
<p><em>Figure 2 Rule to map IP address 192.168.0.39 to LU RHTVT001</em></p>
<p>You must choose a unique name for the rule. Here we have chosen WHT00110, to fit in with the names delivered in the sample
configuration. Rules are processed in alphanumeric order of name, so it is important that the name you choose should precede the name of the
default rule, which is delivered as WHT00200. For a production configuration you could choose any naming scheme.</p>
<p>In the <em>IP Subnet</em> field, place a <em>1</em> in the column on the left (this activates the testing of the IP address for this rule), and then type
the IP address â€œ192.168.000.039â€ into the field as shown. The <em>Mask</em> field must contain <em>255.255.255.255</em> which means that the entire IP
address is tested.</p>
<p>For documentation purposes, you should also include the IP address in the <em>Description</em> field.</p>
<p>In the <em>Parameter</em> field, type the name of the LU to be nailed to this IP address.</p>
<p>Note: the LU name must be defined in a VIRTEL pool, see <em>Adding LUs to the pool’s.</em></p>
<p>The <em>Entry Point</em> field should contain WEB2HOST, which is the normal entry point associated with the W-HTTP line on port 41001.</p>
<p>Now press ENTER to add the rule, then F4 to activate it.</p>
<p>Next repeat the process to add the second rule:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DETAIL</span> <span class="n">of</span> <span class="n">RULE</span> <span class="kn">from</span> <span class="nn">RULE</span> <span class="n">SET</span><span class="p">:</span> <span class="n">W</span><span class="o">-</span><span class="n">HTTP</span> <span class="o">-------------</span> <span class="n">Applid</span><span class="p">:</span> <span class="n">SPVIRBW</span> <span class="mi">15</span><span class="p">:</span><span class="mi">58</span><span class="p">:</span><span class="mi">04</span>
<span class="n">Name</span>        <span class="o">===&gt;</span> <span class="n">WHT00120</span> <span class="n">Rule</span> <span class="n">priority</span> <span class="ow">is</span> <span class="n">per</span> <span class="n">name</span>
<span class="n">Status</span>      <span class="o">===&gt;</span> <span class="n">ACTIVE</span> <span class="mi">15</span> <span class="n">Feb</span> <span class="mi">2010</span> <span class="mi">15</span><span class="p">:</span><span class="mi">58</span><span class="p">:</span><span class="mi">03</span> <span class="n">SPTBOWL</span>
<span class="n">Description</span> <span class="o">===&gt;</span> <span class="n">HTTP</span> <span class="n">access</span> <span class="kn">from</span> <span class="nn">IP</span> <span class="mf">192.168.0.147</span>
<span class="n">Entry</span> <span class="n">point</span> <span class="o">===&gt;</span> <span class="n">WEB2HOST</span> <span class="n">Target</span> <span class="n">Entry</span> <span class="n">Point</span>
<span class="n">Parameter</span>   <span class="o">===&gt;</span> <span class="n">RHTVT002</span> <span class="o">&amp;</span><span class="mi">1</span> <span class="n">value</span> <span class="ow">or</span> <span class="n">LUNAME</span>
<span class="n">Trace</span>       <span class="o">===&gt;</span> <span class="mi">1</span><span class="o">=</span><span class="n">commands</span> <span class="mi">2</span><span class="o">=</span><span class="n">data</span> <span class="mi">3</span><span class="o">=</span><span class="n">partner</span>
<span class="n">C</span> <span class="p">:</span> <span class="mi">0</span><span class="o">=</span><span class="n">IGNORE</span> <span class="mi">1</span><span class="o">=</span><span class="n">IS</span> <span class="mi">2</span><span class="o">=</span><span class="n">IS</span> <span class="n">NOT</span> <span class="mi">3</span><span class="o">=</span><span class="n">STARTS</span> <span class="n">WITH</span> <span class="mi">4</span><span class="o">=</span><span class="n">DOES</span> <span class="n">NOT</span> <span class="mi">5</span><span class="o">=</span><span class="n">ENDS</span> <span class="n">WITH</span> <span class="mi">6</span><span class="o">=</span><span class="n">DOES</span> <span class="n">NOT</span>
<span class="mi">1</span> <span class="n">IP</span> <span class="n">Subnet</span>   <span class="o">===&gt;</span> <span class="mf">192.168.000.147</span> <span class="n">Mask</span> <span class="o">===&gt;</span> <span class="mf">255.255.255.255</span>
<span class="mi">0</span> <span class="n">Host</span>        <span class="o">===&gt;</span>
<span class="mi">0</span> <span class="n">eMail</span>       <span class="o">===&gt;</span>
<span class="mi">0</span> <span class="n">Calling</span> <span class="n">DTE</span> <span class="o">===&gt;</span> <span class="n">Calling</span> <span class="n">DTE</span> <span class="n">address</span> <span class="ow">or</span> <span class="n">proxy</span>
<span class="mi">0</span> <span class="n">Called</span>      <span class="o">===&gt;</span> <span class="n">Called</span> <span class="n">DTE</span> <span class="n">address</span>
<span class="mi">0</span> <span class="n">CUD0</span> <span class="p">(</span><span class="n">Hex</span><span class="p">)</span>  <span class="o">===&gt;</span> <span class="n">First</span> <span class="mi">4</span> <span class="nb">bytes</span> <span class="n">of</span> <span class="n">CUD</span> <span class="p">(</span><span class="n">X25</span> <span class="n">protocol</span><span class="p">)</span>
<span class="mi">0</span> <span class="n">User</span> <span class="n">Data</span>   <span class="o">===&gt;</span>
<span class="mi">0</span> <span class="n">Days</span>        <span class="o">===&gt;</span> <span class="n">M</span><span class="p">:</span> <span class="n">T</span><span class="p">:</span> <span class="n">W</span><span class="p">:</span> <span class="n">T</span><span class="p">:</span> <span class="n">F</span><span class="p">:</span> <span class="n">S</span><span class="p">:</span> <span class="n">S</span><span class="p">:</span>
<span class="mi">0</span> <span class="n">Start</span> <span class="n">time</span>  <span class="o">===&gt;</span> <span class="n">H</span><span class="p">:</span> <span class="n">M</span><span class="p">:</span> <span class="n">S</span><span class="p">:</span> <span class="n">End</span> <span class="n">time</span> <span class="o">===&gt;</span> <span class="n">H</span><span class="p">:</span> <span class="n">M</span><span class="p">:</span> <span class="n">S</span><span class="p">:</span>
<span class="n">P1</span><span class="o">=</span><span class="n">Update</span> <span class="n">P3</span><span class="o">=</span><span class="n">Return</span> <span class="n">Enter</span><span class="o">=</span><span class="n">Add</span> <span class="n">P4</span><span class="o">=</span><span class="n">Activate</span> <span class="n">P5</span><span class="o">=</span><span class="n">Inactivate</span> <span class="n">P12</span><span class="o">=</span><span class="n">Entry</span> <span class="n">P</span><span class="o">.</span>
</pre></div>
</div>
<p><em>Figure 3 Rule to map IP address 192.168.0.147 to LU RHTVT002</em></p>
<p>Press ENTER to add the rule and F4 to activate it.</p>
<p>Then the same for the third rule:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DETAIL</span> <span class="n">of</span> <span class="n">RULE</span> <span class="kn">from</span> <span class="nn">RULE</span> <span class="n">SET</span><span class="p">:</span> <span class="n">W</span><span class="o">-</span><span class="n">HTTP</span> <span class="o">-------------</span> <span class="n">Applid</span><span class="p">:</span> <span class="n">SPVIRBW</span> <span class="mi">16</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">45</span>
<span class="n">Name</span>        <span class="o">===&gt;</span> <span class="n">WHT00130</span> <span class="n">Rule</span> <span class="n">priority</span> <span class="ow">is</span> <span class="n">per</span> <span class="n">name</span>
<span class="n">Status</span>      <span class="o">===&gt;</span> <span class="n">ACTIVE</span> <span class="mi">15</span> <span class="n">Feb</span> <span class="mi">2010</span> <span class="mi">16</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">20</span> <span class="n">SPTBOWL</span>
<span class="n">Description</span> <span class="o">===&gt;</span> <span class="n">HTTP</span> <span class="n">access</span> <span class="kn">from</span> <span class="nn">IP</span> <span class="mf">192.168.0.45</span>
<span class="n">Entry</span> <span class="n">point</span> <span class="o">===&gt;</span> <span class="n">WEB2HOST</span> <span class="n">Target</span> <span class="n">Entry</span> <span class="n">Point</span>
<span class="n">Parameter</span>   <span class="o">===&gt;</span> <span class="n">RHTVT003</span> <span class="o">&amp;</span><span class="mi">1</span> <span class="n">value</span> <span class="ow">or</span> <span class="n">LUNAME</span>
<span class="n">Trace</span>       <span class="o">===&gt;</span> <span class="mi">1</span><span class="o">=</span><span class="n">commands</span> <span class="mi">2</span><span class="o">=</span><span class="n">data</span> <span class="mi">3</span><span class="o">=</span><span class="n">partner</span>
<span class="n">C</span> <span class="p">:</span> <span class="mi">0</span><span class="o">=</span><span class="n">IGNORE</span> <span class="mi">1</span><span class="o">=</span><span class="n">IS</span> <span class="mi">2</span><span class="o">=</span><span class="n">IS</span> <span class="n">NOT</span> <span class="mi">3</span><span class="o">=</span><span class="n">STARTS</span> <span class="n">WITH</span> <span class="mi">4</span><span class="o">=</span><span class="n">DOES</span> <span class="n">NOT</span> <span class="mi">5</span><span class="o">=</span><span class="n">ENDS</span> <span class="n">WITH</span> <span class="mi">6</span><span class="o">=</span><span class="n">DOES</span> <span class="n">NOT</span>
<span class="mi">1</span> <span class="n">IP</span> <span class="n">Subnet</span>   <span class="o">===&gt;</span> <span class="mf">192.168.000.045</span> <span class="n">Mask</span> <span class="o">===&gt;</span> <span class="mf">255.255.255.255</span>
<span class="mi">0</span> <span class="n">Host</span>        <span class="o">===&gt;</span>
<span class="mi">0</span> <span class="n">eMail</span>       <span class="o">===&gt;</span>
<span class="mi">0</span> <span class="n">Calling</span> <span class="n">DTE</span> <span class="o">===&gt;</span> <span class="n">Calling</span> <span class="n">DTE</span> <span class="n">address</span> <span class="ow">or</span> <span class="n">proxy</span>
<span class="mi">0</span> <span class="n">Called</span>      <span class="o">===&gt;</span> <span class="n">Called</span> <span class="n">DTE</span> <span class="n">address</span>
<span class="mi">0</span> <span class="n">CUD0</span> <span class="p">(</span><span class="n">Hex</span><span class="p">)</span>  <span class="o">===&gt;</span> <span class="n">First</span> <span class="mi">4</span> <span class="nb">bytes</span> <span class="n">of</span> <span class="n">CUD</span> <span class="p">(</span><span class="n">X25</span> <span class="n">protocol</span><span class="p">)</span>
<span class="mi">0</span> <span class="n">User</span> <span class="n">Data</span>   <span class="o">===&gt;</span>
<span class="mi">0</span> <span class="n">Days</span>        <span class="o">===&gt;</span> <span class="n">M</span><span class="p">:</span> <span class="n">T</span><span class="p">:</span> <span class="n">W</span><span class="p">:</span> <span class="n">T</span><span class="p">:</span> <span class="n">F</span><span class="p">:</span> <span class="n">S</span><span class="p">:</span> <span class="n">S</span><span class="p">:</span>
<span class="mi">0</span> <span class="n">Start</span> <span class="n">time</span>  <span class="o">===&gt;</span> <span class="n">H</span><span class="p">:</span> <span class="n">M</span><span class="p">:</span> <span class="n">S</span><span class="p">:</span> <span class="n">End</span> <span class="n">time</span> <span class="o">===&gt;</span> <span class="n">H</span><span class="p">:</span> <span class="n">M</span><span class="p">:</span> <span class="n">S</span><span class="p">:</span>
<span class="n">P1</span><span class="o">=</span><span class="n">Update</span> <span class="n">P3</span><span class="o">=</span><span class="n">Return</span> <span class="n">Enter</span><span class="o">=</span><span class="n">Add</span> <span class="n">P4</span><span class="o">=</span><span class="n">Activate</span> <span class="n">P5</span><span class="o">=</span><span class="n">Inactivate</span> <span class="n">P12</span><span class="o">=</span><span class="n">Entry</span> <span class="n">Point</span>
</pre></div>
</div>
<p><em>Figure 4 Rule to map IP address 192.168.0.45 to LU RHTVT003</em></p>
<p>Again press ENTER to add the rule and F4 to activate it.</p>
<p>Finally press F3 to go back to the list of rules for the W-HTTP line, which should now look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>LIST of RULES in RULE SET: W-HTTP ---------------- Applid: SPVIRBW    16:02:33
Name     Status Description                              Entry Point
WHT00100 ACTIVE HTTP access (users authorised by cookie) $COOKIE$
WHT00110 ACTIVE HTTP access from IP 192.168.0.39         WEB2HOST
WHT00120 ACTIVE HTTP access from IP 192.168.0.147        WEB2HOST
WHT00130 ACTIVE HTTP access from IP 192.168.0.45         WEB2HOST
WHT00200 ACTIVE HTTP access (other users)                WEB2HOST
P1=Update P2=Suppress P3=Return P6=1st page P7=Page-1 P8=Page+1 P12=Edit
</pre></div>
</div>
<p><em>Figure 5 Updated list of rules for W-HTTP line</em></p>
<p>Now, for example, when you connect to a host application via VIRTEL port 41001 from a browser at address 192.168.0.147, you will get LU name
RHTVT002.</p>
</section>
<section id="mapping-a-range-of-ip-addresses-to-a-pool-of-lu-names">
<h3>Mapping a range of IP addresses to a pool of LU names<a class="headerlink" href="#mapping-a-range-of-ip-addresses-to-a-pool-of-lu-names" title="Permalink to this heading"></a></h3>
<p>The second example shows how to map a range of IP addresses to a pool of LU names. We will add an additional rule which will ensure that all
connections in the network 192.168.100.0 through 192.168.100.255 will be assigned the next unused LU name in the range RHTVT1xx, as shown in the
table below:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><strong>IP address</strong></p></td>
<td><p><strong>LU name</strong></p></td>
</tr>
<tr class="row-even"><td><p>192.168.100.nnn</p></td>
<td><p>RHTVT1xx</p></td>
</tr>
</tbody>
</table>
<p>To set up this mapping we will add another rule, using the same procedure as described in the previous section. The rule is shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DETAIL</span> <span class="n">of</span> <span class="n">RULE</span> <span class="kn">from</span> <span class="nn">RULE</span> <span class="n">SET</span><span class="p">:</span> <span class="n">W</span><span class="o">-</span><span class="n">HTTP</span> <span class="o">-------------</span> <span class="n">Applid</span><span class="p">:</span> <span class="n">SPVIRBW</span>    <span class="mi">17</span><span class="p">:</span><span class="mi">53</span><span class="p">:</span><span class="mi">56</span>
<span class="n">Name</span>        <span class="o">===&gt;</span> <span class="n">WHT00140</span> <span class="n">Rule</span> <span class="n">priority</span> <span class="ow">is</span> <span class="n">per</span> <span class="n">name</span>
<span class="n">Status</span>      <span class="o">===&gt;</span> <span class="n">ACTIVE</span> <span class="mi">15</span> <span class="n">Feb</span> <span class="mi">2010</span> <span class="mi">17</span><span class="p">:</span><span class="mi">53</span><span class="p">:</span><span class="mi">49</span> <span class="n">SPTBOWL</span>
<span class="n">Description</span> <span class="o">===&gt;</span> <span class="n">HTTP</span> <span class="n">access</span> <span class="kn">from</span> <span class="nn">IP</span> <span class="mf">192.168.100</span><span class="o">.</span><span class="n">nnn</span>
<span class="n">Entry</span> <span class="n">point</span> <span class="o">===&gt;</span> <span class="n">WEB2HOST</span> <span class="n">Target</span> <span class="n">Entry</span> <span class="n">Point</span>
<span class="n">Parameter</span>   <span class="o">===&gt;</span> <span class="n">RHTVT1</span>\<span class="o">*</span> <span class="o">&amp;</span><span class="mi">1</span> <span class="n">value</span> <span class="ow">or</span> <span class="n">LUNAME</span>
<span class="n">Trace</span>       <span class="o">===&gt;</span> <span class="mi">1</span><span class="o">=</span><span class="n">commands</span> <span class="mi">2</span><span class="o">=</span><span class="n">data</span> <span class="mi">3</span><span class="o">=</span><span class="n">partner</span>
<span class="n">C</span> <span class="p">:</span> <span class="mi">0</span><span class="o">=</span><span class="n">IGNORE</span> <span class="mi">1</span><span class="o">=</span><span class="n">IS</span> <span class="mi">2</span><span class="o">=</span><span class="n">IS</span> <span class="n">NOT</span> <span class="mi">3</span><span class="o">=</span><span class="n">STARTS</span> <span class="n">WITH</span> <span class="mi">4</span><span class="o">=</span><span class="n">DOES</span> <span class="n">NOT</span> <span class="mi">5</span><span class="o">=</span><span class="n">ENDS</span> <span class="n">WITH</span> <span class="mi">6</span><span class="o">=</span><span class="n">DOES</span> <span class="n">NOT</span>
<span class="mi">1</span> <span class="n">IP</span> <span class="n">Subnet</span>   <span class="o">===&gt;</span> <span class="mf">192.168.100.000</span> <span class="n">Mask</span> <span class="o">===&gt;</span> <span class="mf">255.255.255.000</span>
<span class="mi">0</span> <span class="n">Host</span>        <span class="o">===&gt;</span>
<span class="mi">0</span> <span class="n">eMail</span>       <span class="o">===&gt;</span>
<span class="mi">0</span> <span class="n">Calling</span> <span class="n">DTE</span> <span class="o">===&gt;</span> <span class="n">Calling</span> <span class="n">DTE</span> <span class="n">address</span> <span class="ow">or</span> <span class="n">proxy</span>
<span class="mi">0</span> <span class="n">Called</span>      <span class="o">===&gt;</span> <span class="n">Called</span> <span class="n">DTE</span> <span class="n">address</span>
<span class="mi">0</span> <span class="n">CUD0</span> <span class="p">(</span><span class="n">Hex</span><span class="p">)</span>  <span class="o">===&gt;</span> <span class="n">First</span> <span class="mi">4</span> <span class="nb">bytes</span> <span class="n">of</span> <span class="n">CUD</span> <span class="p">(</span><span class="n">X25</span> <span class="n">protocol</span><span class="p">)</span>
<span class="mi">0</span> <span class="n">User</span> <span class="n">Data</span>   <span class="o">===&gt;</span>
<span class="mi">0</span> <span class="n">Days</span>        <span class="o">===&gt;</span> <span class="n">M</span><span class="p">:</span> <span class="n">T</span><span class="p">:</span> <span class="n">W</span><span class="p">:</span> <span class="n">T</span><span class="p">:</span> <span class="n">F</span><span class="p">:</span> <span class="n">S</span><span class="p">:</span> <span class="n">S</span><span class="p">:</span>
<span class="mi">0</span> <span class="n">Start</span> <span class="n">time</span>  <span class="o">===&gt;</span> <span class="n">H</span><span class="p">:</span> <span class="n">M</span><span class="p">:</span> <span class="n">S</span><span class="p">:</span> <span class="n">End</span> <span class="n">time</span> <span class="o">===&gt;</span> <span class="n">H</span><span class="p">:</span> <span class="n">M</span><span class="p">:</span> <span class="n">S</span><span class="p">:</span>
<span class="n">P1</span><span class="o">=</span><span class="n">Update</span> <span class="n">P3</span><span class="o">=</span><span class="n">Return</span> <span class="n">Enter</span><span class="o">=</span><span class="n">Add</span>    <span class="n">P4</span><span class="o">=</span><span class="n">Activate</span> <span class="n">P5</span><span class="o">=</span><span class="n">Inactivate</span> <span class="n">P12</span><span class="o">=</span><span class="n">Entry</span> <span class="n">P</span><span class="o">.</span>
</pre></div>
</div>
<p><em>Figure 6 Rule to map IP address 192.168.100.nnn to LU pool RHTVT1xx</em></p>
<p>The new rule is named WHT00140, the <em>IP Subnet</em> field specifies the IP address 192.168.100.000, and the <em>Mask</em> is set to 255.255.255.000 to
indicate that only the first three octets of the IP address are tested to determine whether the rule matches the IP address of the client
browser. The <em>parameter</em> field specifies a generic LU name RHTVT1* which signifies that any LU whose name begins with RHTVT1 may be
assigned to clients whose IP address matches this rule.</p>
<p>Note: the LU names must be defined in a VIRTEL pool, see <em>Adding LUs to the pool</em>.</p>
<p>Press ENTER to add the rule, then F4 to activate it.</p>
</section>
<section id="the-default-rule">
<h3>The default rule<a class="headerlink" href="#the-default-rule" title="Permalink to this heading"></a></h3>
<p>You will notice that there is a default <em>catch-all</em> rule WHT00200 (other users) which will be taken for any IP address which is not matched by
one of the earlier rules. If you do not want unmatched IP addresses to be able to access the system, change this rule so that it specifies a
non-existent LU name in the <em>parameter</em> field. This will cause VIRTEL to issue an error message and close the connection. Optionally, you could
change this rule so that it goes to an entry point which displays a panel with an appropriate message such as <em>Access not authorized</em>.</p>
</section>
</section>
<section id="how-to-activate-lu-nailing-with-cookies-delivered-by-e-mail">
<h2>How to activate LU nailing with cookies delivered by e-mail<a class="headerlink" href="#how-to-activate-lu-nailing-with-cookies-delivered-by-e-mail" title="Permalink to this heading"></a></h2>
<section id="id3">
<h3>Description<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h3>
<p>This chapter describes the procedure for setting up LU nailing with cookies delivered by e-mail. The procedure consists of defining a user,
associating an LU name with the user, and sending the user an e-mail containing a browser cookie. When the user’s browser subsequently
connects to a mainframe application such as IMS or CICS via VIRTEL Web Access, VIRTEL recognizes the security code contained in the cookie and
assigns the designated LU name to the user during communication with the application.</p>
</section>
<section id="setting-up-the-smtp-line">
<h3>Setting up the SMTP line<a class="headerlink" href="#setting-up-the-smtp-line" title="Permalink to this heading"></a></h3>
<p>In VIRTEL terms, a user identified by cookie is known as a correspondent. The cookie is initially delivered to the correspondent
by e-mail, so before you can activate a correspondent, you have to make sure that you have your VIRTEL SMTP line correctly configured. See
section <em>Examples of line definitions</em> subsection <em>Definition of an SMTP line</em> of the <strong>VIRTEL Connectivity Reference</strong> manual.</p>
<p>You can add an SMTP line to the VIRTEL configuration by running the ARBOLOAD job in the VIRTEL CNTL library. If you did not already do so at
VIRTEL installation time, specify SMTP=YES in the options at the start of the job, and rerun ARBOLOAD which will add an SMTP line named S-SMTP
to the VIRTEL configuration file. Now stop and restart the VIRTEL STC.</p>
<p>Next, logon to VIRTEL via (tn)3270 and choose F1=Admin then F1=Lines. Put the cursor on line S-SMTP and press F12. In <em>remote ident</em> you need
to put the IP address and port number of your SMTP server (this will normally be the same SMTP server as you have configured in your desktop
e-mail client). Leave <em>local ident</em> unchanged, we do not use it since VIRTEL will not be receiving any incoming e-mails for this application.
Fill in the <em>description</em> field as defined in the <strong>VIRTEL Connectivity Reference</strong> manual.</p>
<p>Press F1 to save the updated line definition. Then stop and start the</p>
<p>SMTP line using these MVS commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="n">VIRTEL</span><span class="p">,</span><span class="n">LINE</span><span class="o">=</span><span class="n">S</span><span class="o">-</span><span class="n">SMTP</span><span class="p">,</span><span class="n">P</span>
<span class="n">F</span> <span class="n">VIRTEL</span><span class="p">,</span><span class="n">LINE</span><span class="o">=</span><span class="n">S</span><span class="o">-</span><span class="n">SMTP</span><span class="p">,</span><span class="n">S</span>
</pre></div>
</div>
</section>
<section id="setting-up-the-rules-for-lu-nailing-with-cookies">
<h3>Setting up the rules for LU nailing with cookies<a class="headerlink" href="#setting-up-the-rules-for-lu-nailing-with-cookies" title="Permalink to this heading"></a></h3>
<p>A set of <em>rules</em> attached to the VIRTEL HTTP line determines how VIRTEL processes incoming requests. To see the rules attached to an HTTP line,
go to the VIRTEL Configuration Menu and press F1=Lines, then put the cursor on the name of the line and press F5=Rules. The list of rules
attached to the W-HTTP line (port 41001) is shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LIST</span> <span class="n">of</span> <span class="n">RULES</span> <span class="ow">in</span> <span class="n">RULE</span> <span class="n">SET</span><span class="p">:</span> <span class="n">W</span><span class="o">-</span><span class="n">HTTP</span> <span class="o">----------------</span> <span class="n">Applid</span><span class="p">:</span> <span class="n">SPVIRBW</span> <span class="mi">16</span><span class="p">:</span><span class="mi">09</span><span class="p">:</span><span class="mi">42</span>
<span class="n">Name</span>     <span class="n">Status</span> <span class="n">Description</span>                                   <span class="n">Entry</span> <span class="n">Point</span>
<span class="n">WHT00100</span> <span class="n">ACTIVE</span> <span class="n">HTTP</span> <span class="n">access</span> <span class="p">(</span><span class="n">users</span> <span class="k">with</span> <span class="n">LU</span> <span class="n">nailing</span> <span class="n">by</span> <span class="n">cookie</span><span class="p">)</span> <span class="n">WEB2HOST</span>
<span class="n">WHT00200</span> <span class="n">ACTIVE</span> <span class="n">HTTP</span> <span class="n">access</span> <span class="p">(</span><span class="n">other</span> <span class="n">users</span><span class="p">)</span>                     <span class="n">WEB2HOST</span>

<span class="n">P1</span><span class="o">=</span><span class="n">Update</span> <span class="n">P2</span><span class="o">=</span><span class="n">Suppress</span> <span class="n">P3</span><span class="o">=</span><span class="n">Return</span> <span class="n">P6</span><span class="o">=</span><span class="mi">1</span><span class="n">st</span> <span class="n">page</span> <span class="n">P7</span><span class="o">=</span><span class="n">Page</span><span class="o">-</span><span class="mi">1</span> <span class="n">P8</span><span class="o">=</span><span class="n">Page</span><span class="o">+</span><span class="mi">1</span> <span class="n">P12</span><span class="o">=</span><span class="n">Edit</span>
</pre></div>
</div>
<p><em>Figure 7 Rules for line W-HTTP</em></p>
<p>Normally all requests are processed by a default <em>catch-all</em> rule. For the W-HTTP line the default rule is named WHT00200. This default rule
assigns an entry point (in this case WEB2HOST) and selects the next available LU from the terminal pool *W2HPOOL. When LU nailing with
cookies is in effect, a different rule WHT00100 is selected for users who present a cookie containing a valid security code. This rule also
assigns entry point WEB2HOST, but the LU name is obtained from the user’s correspondent record.</p>
<p>The rule for LU nailing is shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>DETAIL of RULE from RULE SET: W-HTTP ------------- Applid: SPVIRBW 16:16:30
Name        ===&gt; WHT00100 Rule priority is per name
Status      ===&gt; ACTIVE 18 Feb 2010 16:09:40 SPTBOWL
Description ===&gt; HTTP access (users with LU nailing by cookie)
Entry point ===&gt; WEB2HOST Target Entry Point
Parameter   ===&gt; $COOKIE$ &amp;1 value or LUNAME
Trace       ===&gt; 1=commands 2=data 3=partner
C : 0=IGNORE 1=IS 2=IS NOT 3=STARTS WITH 4=DOES NOT 5=ENDS WITH 6=DOES NOT
0 IP Subnet   ===&gt; 000.000.000.000 Mask ===&gt; 000.000.000.000
0 Host        ===&gt;
0 eMail       ===&gt;
0 Calling DTE ===&gt; Calling DTE address or proxy
0 Called      ===&gt; Called DTE address
0 CUD0 (Hex)  ===&gt; First 4 bytes of CUD (X25 protocol)
0 User Data   ===&gt;
0 Days        ===&gt; M: T: W: T: F: S: S:
0 Start time  ===&gt; H: M: S: End time ===&gt; H: M: S:

P1=Update P3=Return Enter=Add P4=Activate P5=Inactivate P12=Entry P.
</pre></div>
</div>
<p><em>Figure 8 Rule for LU nailing by cookie</em></p>
<p>The rule for LU nailing has the special value $COOKIE$ in the <em>Parameter</em> field. This value has a two-fold meaning: firstly, it
ensures that the rule is matched only for users who present a cookie containing a valid security code, and secondly, it indicates to VIRTEL
that the LU name is taken from <em>VTAM name</em> field in the user’s correspondent record.</p>
<p>Users who do not present a cookie, or whose cookie contains an invalid or expired security code, will not match this rule and will drop through
to the next rule, which in this example is the <em>catch-all</em> rule WHT00200.</p>
</section>
<section id="defining-a-user">
<h3>Defining a user<a class="headerlink" href="#defining-a-user" title="Permalink to this heading"></a></h3>
<p>Now you can define your first user. From the VIRTEL Configuration Menu, press F5=Correspondents. At the <em>List of correspondent’s panel</em>, press
F12 then fill in these fields:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CORRESPONDENT</span> <span class="n">DETAIL</span> <span class="n">DEFINITION</span> <span class="o">--------------------</span> <span class="n">Applid</span><span class="p">:</span> <span class="n">SPVIRE2</span> <span class="mi">16</span><span class="p">:</span><span class="mi">37</span><span class="p">:</span><span class="mi">59</span>
<span class="n">Id</span>                 <span class="o">===&gt;</span> <span class="n">john</span><span class="o">.</span><span class="n">user</span><span class="nd">@whatever</span><span class="o">.</span><span class="n">com</span>    <span class="n">email</span> <span class="n">address</span> <span class="k">with</span> <span class="s1">&#39;@&#39;</span> <span class="n">sign</span>
<span class="n">Type</span> <span class="n">of</span> <span class="n">Id</span>         <span class="o">===&gt;</span> <span class="mi">1</span> <span class="mi">1</span><span class="p">:</span><span class="n">Email</span> <span class="mi">2</span><span class="p">:</span><span class="n">Local</span><span class="o">+</span><span class="n">fixed</span> <span class="mi">3</span><span class="p">:</span><span class="n">Local</span><span class="o">+</span><span class="n">changing</span>
<span class="n">Activation</span> <span class="n">message</span> <span class="o">===&gt;</span> <span class="n">To</span> <span class="n">activate</span> <span class="n">your</span> <span class="n">VIRTEL</span> <span class="n">connection</span><span class="p">,</span> <span class="n">click</span><span class="p">:</span><span class="o">&amp;</span><span class="n">Rhttp</span><span class="p">:</span><span class="o">//</span><span class="mf">192.168.5.30</span><span class="p">:</span><span class="mi">41001</span><span class="o">/</span><span class="n">web2host</span><span class="o">.</span><span class="n">htm</span><span class="o">++&amp;</span><span class="n">C</span>

<span class="n">Text</span> <span class="n">of</span> <span class="s1">&#39;OK&#39;</span> <span class="n">message</span> <span class="n">to</span> <span class="n">user</span><span class="o">.</span>

<span class="n">VTAM</span> <span class="n">name</span>      <span class="o">===&gt;</span> <span class="n">RHTVT003</span> <span class="o">&amp;</span><span class="mi">1</span> <span class="n">parameter</span> <span class="n">to</span> <span class="n">specify</span> <span class="n">VTAM</span> <span class="n">LU</span> <span class="n">name</span>
<span class="n">Rule</span> <span class="n">Set</span>       <span class="o">===&gt;</span> <span class="n">Rules</span> <span class="n">to</span> <span class="n">choose</span> <span class="n">an</span> <span class="n">entry</span> <span class="n">point</span>
<span class="n">Directory</span>      <span class="o">===&gt;</span> <span class="n">Where</span> <span class="n">data</span> <span class="ow">is</span> <span class="n">to</span> <span class="n">be</span> <span class="n">uploaded</span>
<span class="n">Last</span> <span class="n">contact</span>   <span class="o">===&gt;</span> <span class="n">QUEUE</span> <span class="n">ACTIVATION</span>
<span class="n">Contacts</span>       <span class="o">===&gt;</span> <span class="mi">00000000</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">times</span> <span class="n">cookie</span> <span class="n">was</span> <span class="n">updated</span>
<span class="n">Date</span> <span class="n">created</span>   <span class="o">===&gt;</span> <span class="mi">08</span> <span class="n">Jan</span> <span class="mi">2009</span> <span class="mi">17</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">12</span>
<span class="n">Created</span> <span class="n">by</span>     <span class="o">===&gt;</span> <span class="n">VIRDBA</span>
<span class="n">Date</span> <span class="n">activated</span> <span class="o">===&gt;</span> <span class="mi">20</span> <span class="n">Oct</span> <span class="mi">2009</span> <span class="mi">11</span><span class="p">:</span><span class="mi">07</span><span class="p">:</span><span class="mi">34</span>
<span class="n">Activated</span> <span class="n">by</span>   <span class="o">===&gt;</span> <span class="n">VIRDBA</span>
<span class="n">Date</span> <span class="n">disabled</span>  <span class="o">===&gt;</span> <span class="mi">16</span> <span class="n">Jan</span> <span class="mi">2009</span> <span class="mi">16</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">22</span>
<span class="n">Disabled</span> <span class="n">by</span>    <span class="o">===&gt;</span> <span class="n">SPTBOWL</span>

<span class="n">P1</span><span class="o">=</span><span class="n">Update</span> <span class="n">P3</span><span class="o">=</span><span class="n">Return</span> <span class="n">Enter</span><span class="o">=</span><span class="n">Add</span> <span class="n">P4</span><span class="o">=</span><span class="n">Activate</span> <span class="n">P5</span><span class="o">=</span><span class="n">Disable</span> <span class="n">P6</span><span class="o">=</span><span class="n">Rules</span>
</pre></div>
</div>
<p><em>Figure 9 Correspondent detail screen (e-mail correspondent)</em></p>
<ul class="simple">
<li><p>Replace <em>john.user&#64;whatever.com</em> by the user’s e-mail address.</p></li>
<li><p>Replace <em>192.168.5.30</em> by the host IP address where VIRTEL is running.</p></li>
<li><p>Replace RHTVT003 by the LU name to be assigned to this user</p></li>
</ul>
<p>Note: the LU name must be defined in a VIRTEL pool, see <em>Adding LUs to the pool’s</em>.</p>
<p>Leave the <em>Rule Set</em> and <em>Directory</em> fields blank Now press Enter. You should get the message <em>CREATION OK</em></p>
<p>See section <em>Correspondent management</em> in the <em>VIRTEL Web Access Guide</em> for a detailed description of how to define a correspondent.</p>
</section>
<section id="delivering-the-cookie-via-e-mail">
<h3>Delivering the cookie via e-mail<a class="headerlink" href="#delivering-the-cookie-via-e-mail" title="Permalink to this heading"></a></h3>
<p>Next we will send the cookie to the user.</p>
<p>In the <em>CORRESPONDENT DETAIL DEFINITION</em> panel, press F4=Activate. The message <em>ACTIVATION WAS REQUESTED</em> indicates that VIRTEL has sent the
cookie to the user via the SMTP server.</p>
<p>If this is the first time you have tried sending an e-mail from VIRTEL, then it is quite possible that it will fail if the configuration is not
yet correct. If the e-mail does not arrive at the user’s workstation, then enter the following MVS command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="n">VIRTEL</span><span class="p">,</span><span class="n">TRACE</span><span class="p">,</span><span class="n">L</span><span class="o">=</span><span class="n">S</span><span class="o">-</span><span class="n">SMTP</span>
</pre></div>
</div>
<p>then press F4=Activate again to generate a trace of VIRTEL’s dialog with the SMTP server. The dialog is traced in the SYSPRINT dataset of the
VIRTEL started task (use SDSF to see it). From this you should be able to see what the problem is. Common problems are:</p>
<ul class="simple">
<li><p>codepage problem (the e-mail address in the MAIL TO command should contain an &#64; sign. If it does not, then check that the COUNTRY parameter in the VIRTCT matches your host codepage)</p></li>
<li><p>the SMTP server does not accept VIRTEL’s HELO or MAIL FROM command, check that the userid and hostname specified in the <em>description</em> field of the S-SMTP line are values which are acceptable to your mailserver. You may need to liaise with the company’s e-mail administrator to agree on appropriate values.</p></li>
</ul>
</section>
<section id="installing-the-cookie-on-the-browser">
<h3>Installing the cookie on the browser<a class="headerlink" href="#installing-the-cookie-on-the-browser" title="Permalink to this heading"></a></h3>
<p>When the e-mail arrives at the user’s workstation, it will contain a hyperlink to a VIRTEL page. The user clicks on this hyperlink to install
the cookie in his browser.</p>
<p>One point to note here: the desktop administrator may have set the security settings to inhibit the browser from storing cookies on the user’s workstation. Often the simplest solution to this problem is make sure that the browser recognizes VIRTEL’s IP address as being in the <em>Local Intranet</em> zone, and not the <em>Internet</em> zone. You can verify the zone by looking at the icon in the bottom right hand corner of the Internet Explorer screen when the VIRTEL web page is displayed. If it says <em>Internet</em> then you need to click</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Tools</span> <span class="o">-</span> <span class="n">Internet</span> <span class="n">Options</span> <span class="o">-</span> <span class="n">Security</span> <span class="o">-</span> <span class="n">Local</span> <span class="n">Intranet</span> <span class="o">-</span> <span class="n">Sites</span> <span class="o">*</span><span class="n">Advanced</span><span class="o">*</span>
</pre></div>
</div>
<p>and add VIRTEL’s IP address to the list.</p>
</section>
<section id="using-the-cookie">
<h3>Using the cookie<a class="headerlink" href="#using-the-cookie" title="Permalink to this heading"></a></h3>
<p>Having installed the cookie on the workstation, now whenever this user calls up a VIRTEL web page, VIRTEL will recognize that the cookie
matches the one previously sent to john.user, and so it will assign the LU name RHTVT003 when connecting to a host application.</p>
</section>
</section>
<section id="how-to-activate-virtel-lu-nailing-with-cookies-obtained-by-self-registration">
<h2>How to activate VIRTEL LU nailing with cookies obtained by self-registration<a class="headerlink" href="#how-to-activate-virtel-lu-nailing-with-cookies-obtained-by-self-registration" title="Permalink to this heading"></a></h2>
<section id="id4">
<h3>Description<a class="headerlink" href="#id4" title="Permalink to this heading"></a></h3>
<p>This chapter describes the procedure for setting up LU nailing with cookies, where the users initially obtain the cookie by a procedure known as <em>self-registration</em>. This is similar to LU nailing described in the previous section, except that the cookie is delivered to the user by a web-page instead of by e-mail. The first time a user accesses VIRTEL, the user is directed to a special self-registration page which assigns an LU name, creates a record in the correspondent file, and delivers a cookie to the user’s browser. When the user subsequently connects to a
mainframe application such as IMS or CICS via VIRTEL Web Access, VIRTEL recognizes the security code contained in the cookie and assigns the designated LU name to the user for communication with the application.</p>
</section>
<section id="setting-up-the-rules-for-self-registration">
<h3>Setting up the rules for self-registration<a class="headerlink" href="#setting-up-the-rules-for-self-registration" title="Permalink to this heading"></a></h3>
<p>This section will be completed in a subsequent edition of the documentation.</p>
</section>
</section>
<section id="adding-lus-to-the-pool">
<h2>Adding LUs to the pool<a class="headerlink" href="#adding-lus-to-the-pool" title="Permalink to this heading"></a></h2>
<section id="displaying-the-terminal-pool">
<h3>Displaying the terminal pool<a class="headerlink" href="#displaying-the-terminal-pool" title="Permalink to this heading"></a></h3>
<p>All LUs which participate in LU nailing must be defined to VIRTEL in a terminal pool. To view the terminal pools, logon to VIRTEL via (tn)3270 and press F1=Admin, or select <em>Admin</em> from the VIRTEL Web Access menu. Then select F2=Terminals. You will see a panel similar to the one shown in the figure below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>LIST of TERMINALS ---------------------------------- Applid: SPVIRBW 18:03:43
Terminal Repeated Relay    Entry     Type I/O Pool     2nd Relay
?\*\*\*  0000     RVTAM=== PC        2
CLLOC000 0050                        3     3
CLVTA000 0080              \*W2HPOOL 3     3
DELOC000 0010                        3     3
DEVTA000 0016              \*W2HPOOL 3     3
SMLOC000 0016               SMTP     3     3
W2HIM000 0080     RHTIM000           2     1
W2HTP000 0080     RHTVT000           3     3 \*W2HPOOL RHTIM000

P1=Update P2=Delete P3=Return P6=1st Page P7=Page-1 P8=Page+1 P12=Details
</pre></div>
</div>
<p><em>Figure 10 List of terminals</em></p>
<p>In the above display we can see that there are 80 terminals in the pool named *W2HPOOL, and their internal names are W2HTP000 to W2HTP079. The corresponding LU names are RHTVT000 to RHTVT079, and these are the LU names available for LU nailing when the system is initially installed.</p>
<p>In the following sections we shall see how to add LU names to the pool.</p>
</section>
<section id="adding-a-terminal-to-the-pool">
<h3>Adding a terminal to the pool<a class="headerlink" href="#adding-a-terminal-to-the-pool" title="Permalink to this heading"></a></h3>
<p>In this section we will add a new LU named NYCTERM to the terminal pool used for Web Access. Position the cursor on W2HTP000 and press F12 to display the TERMINAL DEFINITION DETAIL screen, and fill in the fields as shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>TERMINAL DETAIL DEFINITION ------------------------- Applid: SPVIRBW 12:45:13
Terminal ===&gt; W2NYC000 ?wxyZZZZ for dynamic allocation
w : Sna or Non-sna or \* (category)
x : 1, 2, 3, 4, 5 or \* (model)
y : Colour, Monochrome or \*
Z : any characters
Relay    ===&gt; NYCTERM Name seen by VTAM applications
= : copied from the terminal name
\*Pool name    ===&gt; \*W2HPOOL Pool where to put this terminal
Description    ===&gt; Relay pool for HTTP
Entry Point    ===&gt; Enforced Entry Point
2nd relay      ===&gt; Possible 2nd relay (Printer)
Terminal type  ===&gt; 3 1 = LU1 2 = 3270 3 = FastConnect
Compression    ===&gt; 2 0, 1, 2 or 3 : compression type
Possible Calls ===&gt; 3 0=None 1=Inbound 2=Outbound 3=Both
Write Stats to ===&gt; 12 1,4=VIRSTAT 2=VIRLOG
Repeat         ===&gt; 0001 Number of generated terminals

P1=Update P3=Return Enter=Add P12=Server
KEY IN DATA AND PRESS ENTER
</pre></div>
</div>
<p><em>Figure 11 Adding a terminal to the pool</em></p>
<p>The <em>terminal name</em> is an internal name used only within VIRTEL. Any name may be chosen so long as it does not duplicate any other terminal name or any LU name.</p>
<p>The <em>relay name</em> is the LU name. This LU must also be defined in the VIRTAPPL node in USER.VTAMLST.</p>
<p>The <em>pool name</em> must be specified as *W2HPOOL to associate the terminal with Web Access.</p>
<p>Set the <em>repeat count</em> to 1 as we are defining only one terminal.</p>
<p>Now press Enter to add the terminal definition, and press F3 to return to the list of terminals.</p>
</section>
<section id="adding-a-range-of-terminals-to-the-pool">
<h3>Adding a range of terminals to the pool<a class="headerlink" href="#adding-a-range-of-terminals-to-the-pool" title="Permalink to this heading"></a></h3>
<p>In this section we will add a range of LU names SJC001 to SJC010 to the terminal pool for Web Access. Press F12 in the LIST of TERMINALS screen
and fill in the fields as shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>TERMINAL DETAIL DEFINITION ------------------------- Applid: SPVIRBW 12:45:13
Terminal ===&gt; W2SJC001 ?wxyZZZZ for dynamic allocation
w : Sna or Non-sna or \* (category)
x : 1, 2, 3, 4, 5 or \* (model)
y : Colour, Monochrome or \*
Z : any characters
Relay ===&gt; SJC001 Name seen by VTAM applications
= : copied from the terminal name
\*Pool name ===&gt; \*W2HPOOL Pool where to put this terminal
Description ===&gt; Relay pool for HTTP
Entry Point ===&gt; Enforced Entry Point
2nd relay ===&gt; Possible 2nd relay (Printer)
Terminal type ===&gt; 3 1 = LU1 2 = 3270 3 = FastConnect
Compression ===&gt; 2 0, 1, 2 or 3 : compression type
Possible Calls ===&gt; 3 0=None 1=Inbound 2=Outbound 3=Both
Write Stats to ===&gt; 12 1,4=VIRSTAT 2=VIRLOG
Repeat ===&gt; 0010 Number of generated terminals
P1=Update P3=Return Enter=Add
P12=Server
KEY IN DATA AND PRESS ENTER
</pre></div>
</div>
<p><em>Figure 12 Adding a range of terminals to the pool</em></p>
<p>The <em>terminal name</em> is the internal name of the first terminal in the range. The name should contain sufficient trailing numeric characters to accommodate the number of terminals in the range, without duplicating any other terminal name or LU name.</p>
<p>The <em>relay name</em> is the LU name of the first terminal in the range. This name must also contain sufficient trailing numeric characters. All the LUs in the range must be defined in the VIRTAPPL node in USER.VTAMLST.</p>
<p>The <em>pool name</em> must be specified as *W2HPOOL.</p>
<p>Set the <em>repeat count</em> to 10 to define ten terminals SJC001 to SJC010.</p>
</section>
<section id="displaying-the-updated-terminal-pool">
<h3>Displaying the updated terminal pool<a class="headerlink" href="#displaying-the-updated-terminal-pool" title="Permalink to this heading"></a></h3>
<p>Press Enter to add the terminal definition, then press F3 to return to the list of terminals, which should now look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>LIST of TERMINALS ---------------------------------- Applid: SPVIRBW 15:57:28
Terminal Repeated Relay        Entry Type I/O Pool     2nd Relay
?\*\*\*  0000     RVTAM===     PC       2   3
CLLOC000 0050                           3   3
CLVTA000 0080    \*W2HPOOL              3   3
DELOC000 0010                           3   3
DEVTA000 0016    \*W2HPOOL              3   3
SMLOC000 0016     SMTP                  3   3
W2HIM000 0080     RWTIM000              2   1
W2HTP000 0080     RWTVT000              3   3 \*W2HPOOL RWTIM000
W2NYC000 0001     NYCTERM               3   3 \*W2HPOOL
W2SJC001 0010     SJC001                3   3 \*W2HPOOL

P1=Update P2=Delete P3=Return P6=1st Page P7=Page-1 P8=Page+1 P12=Details

Figure 19 Updated list of terminals
</pre></div>
</div>
</section>
</section>
<section id="lu-nailing-by-cookie-obtained-by-self-registration">
<h2>LU nailing by cookie obtained by self-registration.<a class="headerlink" href="#lu-nailing-by-cookie-obtained-by-self-registration" title="Permalink to this heading"></a></h2>
<section id="id5">
<h3>Description<a class="headerlink" href="#id5" title="Permalink to this heading"></a></h3>
<p>In this section we explain how to set up self-registration. Self-registration is a process whereby a user can connect to Virtel and self-register their details. Upon self-registration Virtel will deliver a clickable link which will deliver the security code to the user’s browser via a cookie. Users or <em>correspondents</em> as they are called, who use this process are defined as local or changing users. A local correspondent will have a fixed security code, whereas a changing correspondent will have a new security code each time they connect.</p>
</section>
<section id="setup">
<h3>Setup<a class="headerlink" href="#setup" title="Permalink to this heading"></a></h3>
<p>For Virtel Self Registration to work a certain amount of customization is required. In the example that follows we will demonstrate setting up a self-registration process by using the VIRCONF ARBO configuration tool.</p>
<p>In our example, a new line will be created to support <em>self-registration</em> users. A new directory will be created to support the web elements. The relevant ARBO configuration statements and WEB artifacts will be installed in their respective repositories.</p>
<p>The following diagram gives an overview of the Virtel schematic to support self-registration.</p>
<p><a class="reference internal" href="../../../_images/image5.jpeg"><img alt="Virtel Element Overview" src="../../../_images/image5.jpeg" style="width: 6.59375in; height: 6.46875in;" /></a></p>
<p><em>Figure 12 - Overview of Self Registration</em></p>
<section id="the-line-definition">
<h4>The Line definition<a class="headerlink" href="#the-line-definition" title="Permalink to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LINE</span> <span class="n">ID</span><span class="o">=</span><span class="n">X</span><span class="o">-</span><span class="n">HTTP</span><span class="p">,</span>
<span class="n">NAME</span><span class="o">=</span><span class="n">HTTP</span><span class="o">-</span><span class="n">EXC</span><span class="p">,</span>
<span class="n">LOCADDR</span><span class="o">=</span><span class="mf">192.168.170.33</span><span class="p">:</span><span class="mi">41003</span><span class="p">,</span>
<span class="n">DESC</span><span class="o">=</span><span class="s1">&#39;HTTP line (EXC WEB application)&#39;</span>
<span class="n">TERMINAL</span><span class="o">=</span><span class="n">XL</span><span class="p">,</span>
<span class="n">TYPE</span><span class="o">=</span><span class="n">TCP1</span><span class="p">,</span>
<span class="n">INOUT</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="n">PROTOCOL</span><span class="o">=</span><span class="n">VIRHTTP</span><span class="p">,</span>
<span class="n">TIMEOUT</span><span class="o">=</span><span class="mi">0000</span><span class="p">,</span>
<span class="n">ACTION</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="n">WINSZ</span><span class="o">=</span><span class="mi">0000</span><span class="p">,</span>
<span class="n">PKTSZ</span><span class="o">=</span><span class="mi">0000</span><span class="p">,</span>
<span class="n">RETRY</span><span class="o">=</span><span class="mi">0010</span>
</pre></div>
</div>
<p>This line definition will accept calls on port 41003. Its associated terminal definitions are prefixed with the characters XL. The internal name for the line is X-HTTP and the external name HTTP-EXEC.</p>
</section>
<section id="the-terminal-definitions">
<h4>The terminal definitions<a class="headerlink" href="#the-terminal-definitions" title="Permalink to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TERMINAL</span> <span class="n">ID</span><span class="o">=</span><span class="n">XLPC0000</span><span class="p">,</span>
<span class="n">RELAY</span><span class="o">=</span><span class="n">HOLTWIN7</span><span class="p">,</span>
<span class="n">POOL</span><span class="o">=</span>\<span class="o">*</span><span class="n">XLCPOOL</span><span class="p">,</span>
<span class="n">DESC</span><span class="o">=</span><span class="s1">&#39;PC definition for Ed Holt&#39;</span><span class="p">,</span>
<span class="n">TYPE</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="n">COMPRESS</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="n">INOUT</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="n">STATS</span><span class="o">=</span><span class="mi">26</span><span class="p">,</span>
<span class="n">REPEAT</span><span class="o">=</span><span class="mi">0001</span>
<span class="o">*</span>
<span class="n">TERMINAL</span> <span class="n">ID</span><span class="o">=</span><span class="n">XLLOC000</span><span class="p">,</span>
<span class="n">DESC</span><span class="o">=</span><span class="s1">&#39;Terminals with no relay&#39;</span><span class="p">,</span>
<span class="n">TYPE</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="n">COMPRESS</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="n">INOUT</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="n">STATS</span><span class="o">=</span><span class="mi">26</span><span class="p">,</span>
<span class="n">REPEAT</span><span class="o">=</span><span class="mi">0010</span><span class="p">,</span>
<span class="n">TERMINAL</span> <span class="n">ID</span><span class="o">=</span><span class="n">XLPOOL0</span><span class="p">,</span>
<span class="n">RELAY</span><span class="o">=</span>\<span class="o">*</span><span class="n">XLCPOOL</span><span class="p">,</span>
<span class="n">DESC</span><span class="o">=</span><span class="s1">&#39;Pool for relay (users with cookie)&#39;</span><span class="p">,</span>
<span class="n">TYPE</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="n">COMPRESS</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="n">INOUT</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="n">STATS</span><span class="o">=</span><span class="mi">26</span><span class="p">,</span>
<span class="n">REPEAT</span><span class="o">=</span><span class="mi">0016</span>
</pre></div>
</div>
<p>Three different types of terminal statements are required. First, a terminal relay pool is defined by the XLPOOL0 statement. It represents 16 relay terminals in a pool. Any user terminal statement supporting an external user, i.e. a PC, must refer to this pool. The XLLOC000 statement defines a local terminal range of 16 terminals. These not relay related definitions and as such do not refer to the pool. They are used to support Virtel internal work tasks. The XLPC0000 statement represents a user’s dedicated PC connection and refers to the XLPOOL0 pool where it will obtain a relay LU when this user connects. For each PC there must be a separate terminal statement which defines the LU name to be used. In this case the LU name that would be used is HOLTWIN7.</p>
<p>The administration sub application <em>Correspondent</em> is the tool that manages the physical PC representation to a logical LU name. In following screen shot we can see how self-registration of a user collocates with a predefined LU name.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CORRESPONDENT</span> <span class="n">DETAIL</span> <span class="n">DEFINITION</span> <span class="o">--------------------</span> <span class="n">Applid</span><span class="p">:</span> <span class="n">APPLHOLT</span> <span class="mi">18</span><span class="p">:</span><span class="mi">16</span><span class="p">:</span><span class="mi">00</span>
<span class="n">Id</span>                 <span class="o">===&gt;</span> <span class="n">HOLT</span><span class="o">-</span><span class="n">WIN7</span><span class="o">/</span><span class="n">workstation</span><span class="o">/</span><span class="n">lan</span>
<span class="n">Type</span> <span class="n">of</span> <span class="n">Id</span>         <span class="o">===&gt;</span> <span class="mi">2</span> <span class="mi">1</span><span class="p">:</span><span class="n">Email</span> <span class="mi">2</span><span class="p">:</span><span class="n">Local</span><span class="o">+</span><span class="n">fixed</span> <span class="mi">3</span><span class="p">:</span><span class="n">Local</span><span class="o">+</span><span class="n">changing</span>
<span class="n">Activation</span> <span class="n">message</span> <span class="o">===&gt;</span>
<span class="n">Text</span> <span class="n">of</span> <span class="s1">&#39;OK&#39;</span> <span class="n">message</span> <span class="n">to</span> <span class="n">user</span><span class="o">.</span>
<span class="n">VTAM</span> <span class="n">name</span>      <span class="o">===&gt;</span> <span class="n">HOLTWIN7</span> <span class="o">&amp;</span><span class="mi">1</span> <span class="n">parameter</span> <span class="n">to</span> <span class="n">specify</span> <span class="n">VTAM</span> <span class="n">LU</span> <span class="n">name</span>
<span class="n">Rule</span> <span class="n">Set</span>       <span class="o">===&gt;</span> <span class="n">Rules</span> <span class="n">to</span> <span class="n">choose</span> <span class="n">an</span> <span class="n">entry</span> <span class="n">point</span>
<span class="n">Directory</span>      <span class="o">===&gt;</span> <span class="n">Where</span> <span class="n">data</span> <span class="ow">is</span> <span class="n">to</span> <span class="n">be</span> <span class="n">uploaded</span>
<span class="n">Last</span> <span class="n">contact</span>   <span class="o">===&gt;</span> <span class="mi">04</span> <span class="n">Apr</span> <span class="mi">2016</span> <span class="mi">18</span><span class="p">:</span><span class="mi">13</span><span class="p">:</span><span class="mi">10</span> <span class="mf">192.168.092.065</span>
<span class="n">Contacts</span>       <span class="o">===&gt;</span> <span class="mi">00000001</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">times</span> <span class="n">cookie</span> <span class="n">was</span> <span class="n">updated</span>
<span class="n">Date</span> <span class="n">created</span>   <span class="o">===&gt;</span> <span class="mi">04</span> <span class="n">Apr</span> <span class="mi">2016</span> <span class="mi">18</span><span class="p">:</span><span class="mi">13</span><span class="p">:</span><span class="mi">09</span>
<span class="n">Created</span> <span class="n">by</span>     <span class="o">===&gt;</span> <span class="n">sptholt</span>
<span class="n">Date</span> <span class="n">activated</span> <span class="o">===&gt;</span> <span class="mi">04</span> <span class="n">Apr</span> <span class="mi">2016</span> <span class="mi">18</span><span class="p">:</span><span class="mi">13</span><span class="p">:</span><span class="mi">09</span>
<span class="n">Activated</span> <span class="n">by</span>   <span class="o">===&gt;</span> <span class="n">sptholt</span>
<span class="n">Date</span> <span class="n">disabled</span>  <span class="o">===&gt;</span>
<span class="n">Disabled</span> <span class="n">by</span>    <span class="o">===&gt;</span>

<span class="n">P1</span><span class="o">=</span><span class="n">Update</span> <span class="n">P3</span><span class="o">=</span><span class="n">Return</span> <span class="n">Enter</span><span class="o">=</span><span class="n">Add</span> <span class="n">P4</span><span class="o">=</span><span class="n">Activate</span> <span class="n">P5</span><span class="o">=</span><span class="n">Disable</span> <span class="n">P6</span><span class="o">=</span><span class="n">Rules</span>

<span class="n">UPDATE</span> <span class="n">OK</span>
</pre></div>
</div>
<p><em>Figure 13 Correspondent Detail Definition</em></p>
<p>As you can see, the ID is the physical PC name submitted by the user during the Self-Registration process and the VTAM name is the LU name that will be associated with this PC. The <em>Correspondent</em> sub-application is where users and LU names defined. For <em>self-registration</em> the id type is ‘2’. An entry will be made into the <em>Correspondent</em> HTML VSAM file every time a user goes through the self-registration process. Self-registration users are controlled through rules attached to the line. The rules attached to the X-HTTP line are as follows.</p>
</section>
<section id="the-rule-definitions">
<h4>The Rule definitions<a class="headerlink" href="#the-rule-definitions" title="Permalink to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>RULE ID=R0000100,
LINE=X-HTTP,
STATUS=ACTIVE,
DESC=&#39;Local HTTP access (users authorised by cookie)&#39;,
ENTRY=EXCWHOST,
PARAM=$COOKIE$,
IPADDR=(EQUAL,192.168.000.000),
NETMASK=255.255.000.000
*
RULE ID=R0000200,
LINE=X-HTTP,
STATUS=ACTIVE,
DESC=&#39;Self-registration (local users without cookie)&#39;,
ENTRY=INITVTAM,
IPADDR=(EQUAL,192.168.000.000),
NETMASK=255.255.000.000
*
RULE ID=R0000300,
LINE=X-HTTP,
STATUS=ACTIVE,
DESC=&#39;HTTP access (IP address not valid)&#39;,
ENTRY=EPREJECT
</pre></div>
</div>
<p>For line X-HHTP, serving port 41003, only IP address beginning 192.168.*.* will be allowed to self-register. Any other IP address using this port will be passed to an ENTRY POINT called EPREJECT where a reject message will be served and displayed on the users screen.</p>
<p>The first time a user calls in on 41003 there will be no cookie passed. Rule R0000200 will pick up this call and call entry point INITVTAM. This will initiate the self-registration process. For users already self-registered the call in will contain a cookie in the HTTP request. This will be trapped by rule R0000100 and passed to entry point EXCWHOST.</p>
</section>
<section id="the-entry-points">
<h4>The Entry Points<a class="headerlink" href="#the-entry-points" title="Permalink to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ENTRY</span> <span class="n">ID</span><span class="o">=</span><span class="n">EPREJECT</span><span class="p">,</span>
<span class="n">DESC</span><span class="o">=</span><span class="s1">&#39;Entry point for unauthorized HTTP users&#39;</span><span class="p">,</span>
<span class="n">TRANSACT</span><span class="o">=</span><span class="n">REJ</span><span class="p">,</span>
<span class="n">TIMEOUT</span><span class="o">=</span><span class="mi">0720</span><span class="p">,</span>
<span class="n">ACTION</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="n">EMUL</span><span class="o">=</span><span class="n">HTML</span><span class="p">,</span>
<span class="n">SIGNON</span><span class="o">=</span><span class="n">VIR0020H</span><span class="p">,</span>
<span class="n">MENU</span><span class="o">=</span><span class="n">VIR0021A</span><span class="p">,</span>
<span class="n">EXTCOLOR</span><span class="o">=</span><span class="n">X</span>
<span class="n">ENTRY</span> <span class="n">ID</span><span class="o">=</span><span class="n">EXCWHOST</span><span class="p">,</span>
<span class="n">DESC</span><span class="o">=</span><span class="s1">&#39;EXC WEB entry point (users with cookie)&#39;</span><span class="p">,</span>
<span class="n">TRANSACT</span><span class="o">=</span><span class="n">EXCW</span><span class="p">,</span>
<span class="n">TIMEOUT</span><span class="o">=</span><span class="mi">0720</span><span class="p">,</span>
<span class="n">ACTION</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="n">EMUL</span><span class="o">=</span><span class="n">HTML</span><span class="p">,</span>
<span class="n">SIGNON</span><span class="o">=</span><span class="n">VIR0020H</span><span class="p">,</span>
<span class="n">MENU</span><span class="o">=</span><span class="n">VIR0021A</span><span class="p">,</span>
<span class="n">EXTCOLOR</span><span class="o">=</span><span class="n">X</span>
<span class="n">ENTRY</span> <span class="n">ID</span><span class="o">=</span><span class="n">INITVTAM</span><span class="p">,</span>
<span class="n">DESC</span><span class="o">=</span><span class="s1">&#39;Self-registration for line X-HTTP&#39;</span><span class="p">,</span>
<span class="n">TRANSACT</span><span class="o">=</span><span class="n">INITV</span><span class="p">,</span>
<span class="n">TIMEOUT</span><span class="o">=</span><span class="mi">0025</span><span class="p">,</span>
<span class="n">ACTION</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="n">EMUL</span><span class="o">=</span><span class="n">HTML</span><span class="p">,</span>
<span class="n">SIGNON</span><span class="o">=</span><span class="n">VIR0020V</span><span class="p">,</span>
<span class="n">MENU</span><span class="o">=</span><span class="n">VIR0021B</span><span class="p">,</span>
<span class="n">EXTCOLOR</span><span class="o">=</span><span class="n">X</span>
</pre></div>
</div>
<p>These three entry points perform the logic the <em>self-registration</em> process through there associated transactions. Each entry point is associated with a group of transactions identified by the TRANSACT= keyword. Depending on the entry point selected by the rule will determine what default transaction will get called. The name of the transaction will always equal the name of the entry point.</p>
</section>
<section id="the-transactions">
<h4>The Transactions<a class="headerlink" href="#the-transactions" title="Permalink to this heading"></a></h4>
<p>Transactions are associated with entry points by a common prefix identified in the Entry point through the TRANSACT= keyword.</p>
<p>The transactions for EPREJECT are:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TRANSACT</span> <span class="n">ID</span><span class="o">=</span><span class="n">REJ</span><span class="o">-</span><span class="mi">00</span><span class="p">,</span>
<span class="n">NAME</span><span class="o">=</span><span class="n">EPREJECT</span><span class="p">,</span>
<span class="n">DESC</span><span class="o">=</span><span class="s2">&quot;Default directory = entry point name&quot;</span><span class="p">,</span>
<span class="n">APPL</span><span class="o">=</span><span class="n">W2H</span><span class="o">-</span><span class="n">DIR</span><span class="p">,</span>
<span class="n">TYPE</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="n">TERMINAL</span><span class="o">=</span><span class="n">XLLOC</span><span class="p">,</span>
<span class="n">STARTUP</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="n">SECURITY</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
<p>This is the default transaction for entry point EPREJECT. If called it will search for a page called EPREJECT.HTM in the W2H-DIR directory and server it to the user.</p>
<p>The transactions for INITVTAM are:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TRANSACT</span> <span class="n">ID</span><span class="o">=</span><span class="n">INITV</span><span class="o">-</span><span class="mi">00</span><span class="p">,</span>
<span class="n">NAME</span><span class="o">=</span><span class="n">INITVTAM</span><span class="p">,</span>
<span class="p">(</span><span class="n">EN</span><span class="p">)</span> <span class="n">DESC</span><span class="o">=</span><span class="s1">&#39;Directory for LU NAILING&#39;</span><span class="p">,</span>
<span class="n">APPL</span><span class="o">=</span><span class="n">EXC</span><span class="o">-</span><span class="n">DIR</span><span class="p">,</span>
<span class="n">TYPE</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="n">TERMINAL</span><span class="o">=</span><span class="n">XLLOC</span><span class="p">,</span>
<span class="n">STARTUP</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="n">SECURITY</span><span class="o">=</span><span class="mi">0</span>
<span class="n">TRANSACT</span> <span class="n">ID</span><span class="o">=</span><span class="n">INITV</span><span class="o">-</span><span class="mi">03</span><span class="p">,</span>
<span class="n">NAME</span><span class="o">=</span><span class="s1">&#39;w2h&#39;</span><span class="p">,</span>
<span class="p">(</span><span class="n">EN</span><span class="p">)</span> <span class="n">DESC</span><span class="o">=</span><span class="s1">&#39;W2H toolkit directory (/w2h)&#39;</span><span class="p">,</span>
<span class="n">APPL</span><span class="o">=</span><span class="n">W2H</span><span class="o">-</span><span class="n">DIR</span><span class="p">,</span>
<span class="n">TYPE</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="n">TERMINAL</span><span class="o">=</span><span class="n">XLLOC</span><span class="p">,</span>
<span class="n">STARTUP</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="n">SECURITY</span><span class="o">=</span><span class="mi">0</span>
<span class="n">TRANSACT</span> <span class="n">ID</span><span class="o">=</span><span class="n">INITV</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span>
<span class="n">NAME</span><span class="o">=</span><span class="n">NAIL</span><span class="p">,</span>
<span class="n">DESC</span><span class="o">=</span><span class="s1">&#39;Auto-create correspondent record&#39;</span><span class="p">,</span>
<span class="n">APPL</span><span class="o">=</span><span class="n">VIR0041V</span><span class="p">,</span>
<span class="n">TYPE</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="n">TERMINAL</span><span class="o">=</span><span class="n">XLLOC</span><span class="p">,</span>
<span class="n">STARTUP</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="n">SECURITY</span><span class="o">=</span><span class="mi">2</span>
</pre></div>
</div>
<ul class="simple">
<li><p>INIT-00, the default page for entry point INITVTAM, will serve the HTML page INITVTAM.HTM from the EXEC-DIR directory.</p></li>
<li><p>INIT-03 provides a routing to the Virtel W2H-DIR directory.</p></li>
<li><p>INITV-10 is a transaction called within the INITVTAM.HTM page.</p></li>
</ul>
<p>It is associated with the web elements CONFIRMANDGO.HTM and CONFIRMANDWAIT.HTM. These two pages are URL links in INITVTAM.HTM and can be found in the EXC-DIR directory. During self-registration a user will click one of two options to complete the self-registration process from the INITVTAM.HTM page.</p>
<p>The transactions for EXCWHOST are:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TRANSACT</span> <span class="n">ID</span><span class="o">=</span><span class="n">EXCW</span><span class="o">-</span><span class="mi">00</span><span class="p">,</span>
<span class="n">NAME</span><span class="o">=</span><span class="n">EXCWHOST</span><span class="p">,</span>
<span class="n">DESC</span><span class="o">=</span><span class="s1">&#39;HTML page directory (default access)&#39;</span><span class="p">,</span>
<span class="n">APPL</span><span class="o">=</span><span class="n">EXC</span><span class="o">-</span><span class="n">DIR</span><span class="p">,</span>
<span class="n">TYPE</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="n">TERMINAL</span><span class="o">=</span><span class="n">XLLOC</span><span class="p">,</span>
<span class="n">STARTUP</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="n">SECURITY</span><span class="o">=</span><span class="mi">0</span>
<span class="n">TRANSACT</span> <span class="n">ID</span><span class="o">=</span><span class="n">EXCW</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span>
<span class="n">NAME</span><span class="o">=</span><span class="s1">&#39;w2h&#39;</span><span class="p">,</span>
<span class="n">DESC</span><span class="o">=</span><span class="s1">&#39;W2H toolkit directory (/w2h)&#39;</span><span class="p">,</span>
<span class="n">APPL</span><span class="o">=</span><span class="n">W2H</span><span class="o">-</span><span class="n">DIR</span><span class="p">,</span>
<span class="n">TYPE</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="n">TERMINAL</span><span class="o">=</span><span class="n">XLLOC</span><span class="p">,</span>
<span class="n">STARTUP</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="n">SECURITY</span><span class="o">=</span><span class="mi">0</span>
<span class="n">TRANSACT</span> <span class="n">ID</span><span class="o">=</span><span class="n">EXCW</span><span class="o">-</span><span class="mi">41</span><span class="p">,</span>
<span class="n">NAME</span><span class="o">=</span><span class="n">IMS</span><span class="p">,</span>
<span class="n">DESC</span><span class="o">=</span><span class="s1">&#39;IMS access with cookie&#39;</span><span class="p">,</span>
<span class="n">APPL</span><span class="o">=</span><span class="n">IMS3270</span><span class="p">,</span>
<span class="n">TYPE</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="n">TERMINAL</span><span class="o">=</span><span class="n">XLVTC</span><span class="p">,</span>
<span class="n">STARTUP</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="n">SECURITY</span><span class="o">=</span><span class="mi">0</span>
<span class="n">TRANSACT</span> <span class="n">ID</span><span class="o">=</span><span class="n">EXCW</span><span class="o">-</span><span class="mi">42</span><span class="p">,</span>
<span class="n">NAME</span><span class="o">=</span><span class="n">TSO</span><span class="p">,</span>
<span class="n">DESC</span><span class="o">=</span><span class="s1">&#39;TSO access with cookie&#39;</span><span class="p">,</span>
<span class="n">APPL</span><span class="o">=</span><span class="n">TSO</span><span class="p">,</span>
<span class="n">TYPE</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="n">TERMINAL</span><span class="o">=</span><span class="n">XLVTC</span><span class="p">,</span>
<span class="n">STARTUP</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="n">SECURITY</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
<p>The default transaction, EXCW-00, will serve page EXCWHOST.htm from the EXC-DIR directory. EXCW-01 is a routing transaction that provides a link to the web elements in W2H-DIR and EXCW-41 and EXCW-42 are VTAM application definitions that are available to self-registration users. These transaction are accessed via hard coded links in the EXCWHOST.HTM page but equally could be part of an APPLIST menu display.</p>
</section>
<section id="the-sub-directory-and-related-web-pages">
<h4>The Sub Directory and related web pages<a class="headerlink" href="#the-sub-directory-and-related-web-pages" title="Permalink to this heading"></a></h4>
<p>Self-Registration requires a group of web elements:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CommandandGo</span><span class="o">.</span><span class="n">htm</span>
<span class="n">CommandandWait</span><span class="o">.</span><span class="n">htm</span>
<span class="n">CustomFunctions</span><span class="o">.</span><span class="n">js</span>
<span class="n">EXCWHOST</span><span class="o">.</span><span class="n">htm</span>
<span class="n">INITVTAM</span><span class="o">.</span><span class="n">htm</span>
</pre></div>
</div>
<p>These elements are uploaded into the EXC-DIR sub directory. Within the ARBO configuration the sub-directory is defined as:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SUBDIR</span> <span class="n">ID</span><span class="o">=</span><span class="n">EXC</span><span class="o">-</span><span class="n">DIR</span><span class="p">,</span>
<span class="n">DESC</span><span class="o">=</span><span class="s1">&#39;Pages for EXCWHOST&#39;</span><span class="p">,</span>
<span class="n">DDNAME</span><span class="o">=</span><span class="n">HTMLTRSF</span><span class="p">,</span>
<span class="n">KEY</span><span class="o">=</span><span class="n">EXC</span><span class="o">-</span><span class="n">KEY</span><span class="p">,</span>
<span class="n">NAMELEN</span><span class="o">=</span><span class="mi">0064</span><span class="p">,</span>
<span class="n">AUTHUP</span><span class="o">=</span><span class="n">X</span><span class="p">,</span>
<span class="n">AUTHDOWN</span><span class="o">=</span><span class="n">X</span><span class="p">,</span>
<span class="n">AUTHDEL</span><span class="o">=</span><span class="n">X</span>
</pre></div>
</div>
<p>To be able to upload web elements to this sub-direction requires the services of an internal Virtel upload transaction. This is defined in
the W2H-DIR as:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TRANSACT</span> <span class="n">ID</span><span class="o">=</span><span class="n">W2H</span><span class="o">-</span><span class="mi">83</span><span class="p">,</span>
<span class="n">NAME</span><span class="o">=</span><span class="s1">&#39;uplexc&#39;</span><span class="p">,</span>
<span class="n">DESC</span><span class="o">=</span><span class="s1">&#39;Upload HTML pages (EXC-DIR directory)&#39;</span><span class="p">,</span>
<span class="n">APPL</span><span class="o">=</span><span class="n">VIR0041C</span><span class="p">,</span>
<span class="n">TYPE</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="n">TERMINAL</span><span class="o">=</span><span class="n">DELOC</span><span class="p">,</span>
<span class="n">STARTUP</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="n">SECURITY</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="n">LOGMSG</span><span class="o">=</span><span class="n">EXC</span><span class="o">-</span><span class="n">DIR</span>
</pre></div>
</div>
</section>
</section>
<section id="the-correspondent-sub-application">
<h3>The Correspondent Sub Application<a class="headerlink" href="#the-correspondent-sub-application" title="Permalink to this heading"></a></h3>
<p>Access to the Correspondent Sub Application is as follows. From the VIRTEL Configuration Menu, press F5=Correspondents.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Configuration</span> <span class="n">Menu</span> <span class="o">---------------------------------</span> <span class="n">Applid</span><span class="p">:</span> <span class="n">APPLHOLT</span>  <span class="mi">14</span><span class="p">:</span><span class="mi">11</span><span class="p">:</span><span class="mi">28</span>
<span class="n">F1</span> <span class="n">Lines</span>
<span class="n">F2</span> <span class="n">Terminals</span>
<span class="n">F3</span> <span class="n">Entry</span> <span class="n">Points</span>
<span class="n">F4</span> <span class="n">Security</span>
<span class="n">F5</span> <span class="n">Correspondents</span>
<span class="n">F6</span> <span class="n">Directories</span>
<span class="n">F7</span> <span class="n">External</span> <span class="n">servers</span>
<span class="n">F8</span> <span class="n">Lines</span> <span class="n">Overview</span>
<span class="n">F9</span> <span class="n">Lines</span> <span class="n">Status</span>
<span class="n">PA2</span> <span class="n">More</span> <span class="n">sub</span><span class="o">-</span><span class="n">applications</span>

<span class="n">CLEAR</span> <span class="n">Return</span>
</pre></div>
</div>
<p><em>Figure 14. Selecting the Correspondent Sub Application</em></p>
<p>A list of self-registered correspondents will appear. In our list there is one user who is recognized by the ID of HOLT-WIN7. This just so happens to be the PC Name belonging to user. Through the sub-application we can associate this user with a relay LUNAME HOLTWIN7.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LIST</span> <span class="n">of</span> <span class="n">CORRESPONDENTS</span> <span class="o">-----------------------------</span> <span class="n">Applid</span><span class="p">:</span> <span class="n">APPLHOLT</span> <span class="mi">14</span><span class="p">:</span><span class="mi">14</span><span class="p">:</span><span class="mi">33</span>
<span class="n">Id</span> <span class="n">Rules</span> <span class="n">VTAM</span> <span class="n">name</span> <span class="n">Last</span> <span class="n">connection</span> <span class="n">Contacts</span>
<span class="n">HOLT</span><span class="o">-</span><span class="n">WIN7</span><span class="o">/</span> <span class="n">HOLTWIN7</span> <span class="mi">04</span> <span class="n">Apr</span> <span class="mi">2016</span> <span class="mi">18</span><span class="p">:</span><span class="mi">13</span><span class="p">:</span><span class="mi">10</span> <span class="mi">00000001</span>
<span class="n">P1</span><span class="o">=</span><span class="n">Update</span> <span class="n">P2</span><span class="o">=</span><span class="n">Delete</span> <span class="n">P3</span><span class="o">=</span><span class="n">Return</span> <span class="n">P6</span><span class="o">=</span><span class="n">Rules</span>
<span class="n">P7</span><span class="o">=</span><span class="n">Previous</span> <span class="n">P8</span><span class="o">=</span><span class="n">Next</span> <span class="n">P12</span><span class="o">=</span><span class="n">Edit</span><span class="o">/</span><span class="n">View</span>
<span class="n">DELETE</span> <span class="n">OK</span>
</pre></div>
</div>
<p><em>Figure 15. Listing of Correspondent</em></p>
<section id="the-self-registration-process">
<h4>The Self-Registration Process<a class="headerlink" href="#the-self-registration-process" title="Permalink to this heading"></a></h4>
<p>The first phase of the self-registration process is that a user will access the designated port without a security cookie and be routed to the VTAMINIT Entry Point. This will drive the registration process by serving the INITVTAM.HTM page to the user. The user will be presented with the following screen:-</p>
<p><a class="reference internal" href="../../../_images/image6.png"><img alt="image3" src="../../../_images/image6.png" style="width: 5.88542in; height: 3.90625in;" /></a></p>
<p><em>Figure 16. Self-Registration page from VTAMINIT</em></p>
<p>Two options are provide on this page. Option one is to complete the self-registration proceed to the application menu page or option2 is to complete the self-registration process and wait to be given the URL to connect to the system. This URL can then be used to connect multiple browsers.</p>
<p>Selecting either option invokes the Virtel transaction INITV-10 (NAIL) which uses Security=2. This level of security uses the NTLM handshake protocol to extract additional workstation information. This information is presented in the second page of the self-registration process and can be changed by the user.</p>
<p>Once any option has been selected then the second page of the registration will be present. In this page you provide the LUNAME that you have been allocated (external process) and you collocated correspondent name, by default the work station name.</p>
<p><a class="reference internal" href="../../../_images/image7.png"><img alt="image4" src="../../../_images/image7.png" style="width: 6.50000in; height: 5.84375in;" /></a></p>
<p><em>Figure 17. Self-Registration page from VTAMINIT</em></p>
<p>By confirming the details of the VTAM luname and correspondent (ID) the browser will send the information back to Virtel. Virtel will then record the information in the Correspondent data base and then launch the EXCWHOST transaction which will display a menu page of applications than the user can access.</p>
<p><a class="reference internal" href="../../../_images/image8.png"><img alt="image5" src="../../../_images/image8.png" style="width: 6.28125in; height: 1.84375in;" /></a></p>
<p><em>Figure 18. Self-Registration application menu page</em></p>
<p>In the example for HOLT-WIN7 the entry in the database would look like the following:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LIST</span> <span class="n">of</span> <span class="n">CORRESPONDENTS</span> <span class="o">-----------------------------</span> <span class="n">Applid</span><span class="p">:</span> <span class="n">APPLHOLT</span> <span class="mi">10</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mi">34</span>
<span class="n">Id</span>         <span class="n">Rules</span>   <span class="n">VTAM</span> <span class="n">name</span>    <span class="n">Last</span> <span class="n">connection</span> <span class="n">Contacts</span>
<span class="n">HOLT</span><span class="o">-</span><span class="n">WIN7</span><span class="o">/</span>         <span class="n">HOLT</span><span class="o">-</span><span class="n">WIN</span>     <span class="mi">07</span> <span class="n">Apr</span> <span class="mi">2016</span> <span class="mi">10</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">11</span> <span class="mi">00000002</span>

<span class="n">P1</span><span class="o">=</span><span class="n">Update</span> <span class="n">P2</span><span class="o">=</span><span class="n">Delete</span> <span class="n">P3</span><span class="o">=</span><span class="n">Return</span> <span class="n">P6</span><span class="o">=</span><span class="n">Rules</span> <span class="n">P7</span><span class="o">=</span><span class="n">Previous</span> <span class="n">P8</span><span class="o">=</span><span class="n">Next</span> <span class="n">P12</span><span class="o">=</span><span class="n">Edit</span><span class="o">/</span><span class="n">View</span>
</pre></div>
</div>
<p><em>Figure 19. Correspondent Entry</em></p>
<p>It is clear that the LUNAME of HOLT-WIN is invalid so this must be corrected in the Edit panel. Pressing PF12 will take us into the Edit panel of the correspondent application where the LUNAME can be amended to the correct name allocated for HOLT-WIN. In this example the name is changed to HOLTWIN7.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CORRESPONDENT</span> <span class="n">DETAIL</span> <span class="n">DEFINITION</span> <span class="o">--------------------</span> <span class="n">Applid</span><span class="p">:</span> <span class="n">APPLHOLT</span> <span class="mi">10</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="mi">18</span>
<span class="n">Id</span>         <span class="o">===&gt;</span> <span class="n">HOLT</span><span class="o">-</span><span class="n">WIN7</span><span class="o">/</span><span class="n">workstation</span><span class="o">/</span><span class="n">lan</span>
<span class="n">Type</span> <span class="n">of</span> <span class="n">Id</span> <span class="o">===&gt;</span> <span class="mi">2</span> <span class="mi">1</span><span class="p">:</span><span class="n">Email</span> <span class="mi">2</span><span class="p">:</span><span class="n">Local</span><span class="o">+</span><span class="n">fixed</span> <span class="mi">3</span><span class="p">:</span><span class="n">Local</span><span class="o">+</span><span class="n">changing</span>
<span class="n">Activation</span> <span class="n">message</span> <span class="o">===&gt;</span>
<span class="n">Text</span> <span class="n">of</span> <span class="s1">&#39;OK&#39;</span> <span class="n">message</span> <span class="n">to</span> <span class="n">user</span><span class="o">.</span>
<span class="n">VTAM</span> <span class="n">name</span>      <span class="o">===&gt;</span> <span class="n">HOLTWIN7</span> <span class="o">&amp;</span><span class="mi">1</span> <span class="n">parameter</span> <span class="n">to</span> <span class="n">specify</span> <span class="n">VTAM</span> <span class="n">LU</span> <span class="n">name</span>
<span class="n">Rule</span> <span class="n">Set</span>       <span class="o">===&gt;</span> <span class="n">Rules</span> <span class="n">to</span> <span class="n">choose</span> <span class="n">an</span> <span class="n">entry</span> <span class="n">point</span>
<span class="n">Directory</span>      <span class="o">===&gt;</span> <span class="n">Where</span> <span class="n">data</span> <span class="ow">is</span> <span class="n">to</span> <span class="n">be</span> <span class="n">uploaded</span>
<span class="n">Last</span> <span class="n">contact</span>   <span class="o">===&gt;</span> <span class="mi">07</span> <span class="n">Apr</span> <span class="mi">2016</span> <span class="mi">10</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">11</span> <span class="mf">192.168.092.065</span>
<span class="n">Contacts</span>       <span class="o">===&gt;</span> <span class="mi">00000002</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">times</span> <span class="n">cookie</span> <span class="n">was</span> <span class="n">updated</span>
<span class="n">Date</span> <span class="n">created</span>   <span class="o">===&gt;</span> <span class="mi">07</span> <span class="n">Apr</span> <span class="mi">2016</span> <span class="mi">10</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">59</span>
<span class="n">Created</span> <span class="n">by</span>     <span class="o">===&gt;</span> <span class="n">sptholt</span>
<span class="n">Date</span> <span class="n">activated</span> <span class="o">===&gt;</span> <span class="mi">07</span> <span class="n">Apr</span> <span class="mi">2016</span> <span class="mi">10</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">59</span>
<span class="n">Activated</span> <span class="n">by</span>   <span class="o">===&gt;</span> <span class="n">sptholt</span>
<span class="n">Date</span> <span class="n">disabled</span>  <span class="o">===&gt;</span>
<span class="n">Disabled</span> <span class="n">by</span>    <span class="o">===&gt;</span>

<span class="n">P1</span><span class="o">=</span><span class="n">Update</span> <span class="n">P3</span><span class="o">=</span><span class="n">Return</span> <span class="n">Enter</span><span class="o">=</span><span class="n">Add</span> <span class="n">P4</span><span class="o">=</span><span class="n">Activate</span> <span class="n">P5</span><span class="o">=</span><span class="n">Disable</span> <span class="n">P6</span><span class="o">=</span><span class="n">Rules</span>

<span class="n">UPDATE</span> <span class="n">OK</span>
</pre></div>
</div>
<p><em>Figure 20. Updating the Correspondent Entry with the correct LUNAME</em></p>
<p>Once the LUNAME has been updated the user identified as HOLT-WIN7/ can access applications via the EXCWHOST application list. A VTAM definition must exist to support this user. The VTAM definition will look like this:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HOLTWIN7</span> <span class="n">APPL</span> <span class="n">AUTH</span><span class="o">=</span><span class="p">(</span><span class="n">ACQ</span><span class="p">,</span><span class="n">PASS</span><span class="p">),</span><span class="n">MODETAB</span><span class="o">=</span><span class="n">ISTINCLM</span><span class="p">,</span><span class="n">DLOGMOD</span><span class="o">=</span><span class="n">SNX32702</span><span class="p">,</span><span class="n">EAS</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<p>To support this VTAM LUNAME a Virtel Terminal definition must also exit in the ARBO configuration. The definitional must use a predefined pool. For HOLT-WIN7/ see the terminal definition XLPC0000.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LIST</span> <span class="n">of</span> <span class="n">TERMINALS</span> <span class="o">----------------------------------</span> <span class="n">Applid</span><span class="p">:</span> <span class="n">APPLHOLT</span> <span class="mi">10</span><span class="p">:</span><span class="mi">59</span><span class="p">:</span><span class="mi">10</span>
<span class="n">Terminal</span> <span class="n">Repeated</span> <span class="n">Relay</span> <span class="n">Entry</span> <span class="n">Type</span> <span class="n">I</span><span class="o">/</span><span class="n">O</span>  <span class="n">Pool</span>      <span class="mi">2</span><span class="n">nd</span> <span class="n">Relay</span>
<span class="n">XLPC0000</span> <span class="mi">0001</span>     <span class="n">HOLTWIN7</span>       <span class="mi">3</span>   <span class="mi">3</span>  <span class="o">*</span><span class="n">XLCPOOL</span>
<span class="n">XLPC0001</span> <span class="mi">0001</span>     <span class="n">ISRAEL</span>         <span class="mi">3</span>   <span class="mi">3</span>  <span class="o">*</span><span class="n">XLCPOOL</span>
<span class="n">XLVTC000</span> <span class="mi">0016</span>     <span class="o">*</span><span class="n">XLCPOOL</span>       <span class="mi">3</span>   <span class="mi">3</span>
<span class="n">P1</span><span class="o">=</span><span class="n">Update</span> <span class="n">P2</span><span class="o">=</span><span class="n">Delete</span> <span class="n">P3</span><span class="o">=</span><span class="n">Return</span> <span class="n">P6</span><span class="o">=</span><span class="mi">1</span><span class="n">st</span> <span class="n">Page</span> <span class="n">P7</span><span class="o">=</span><span class="n">Page</span><span class="o">-</span><span class="mi">1</span> <span class="n">P8</span><span class="o">=</span><span class="n">Page</span><span class="o">+</span><span class="mi">1</span> <span class="n">P12</span><span class="o">=</span><span class="n">Details</span>
</pre></div>
</div>
<p><em>Figure 21. Terminal list with the correct Relay(LUNAME) name</em></p>
</section>
<section id="the-correspondent-application-options">
<h4>The Correspondent Application Options<a class="headerlink" href="#the-correspondent-application-options" title="Permalink to this heading"></a></h4>
<p>From within the Correspondent Application self-registered users can be
managed. The following option are available:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PF</span><span class="o">=</span><span class="mi">1</span> <span class="n">Update</span> <span class="n">an</span> <span class="n">Entry</span>  <span class="n">Enter</span> <span class="n">Add</span> <span class="n">an</span> <span class="n">Entry</span>
<span class="n">PF</span><span class="o">=</span><span class="mi">4</span> <span class="n">Activate</span> <span class="n">a</span> <span class="n">disabled</span> <span class="n">entry</span>  <span class="n">PF</span><span class="o">=</span><span class="mi">5</span> <span class="n">Deactivate</span> <span class="n">an</span> <span class="n">Active</span> <span class="n">Entry</span>
<span class="n">PF</span><span class="o">=</span><span class="mi">6</span> <span class="n">Add</span> <span class="n">a</span> <span class="n">rule</span> <span class="n">using</span> <span class="n">the</span> <span class="n">IP</span> <span class="n">details</span><span class="o">.</span>
</pre></div>
</div>
<p>Using these functions provides a means of administering correspondents.
The following is an example of disabling a user:-</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CORRESPONDENT</span> <span class="n">DETAIL</span> <span class="n">DEFINITION</span> <span class="o">--------------------</span> <span class="n">Applid</span><span class="p">:</span> <span class="n">APPLHOLT</span> <span class="mi">11</span><span class="p">:</span><span class="mi">07</span><span class="p">:</span><span class="mi">40</span>
<span class="n">Id</span> <span class="o">===&gt;</span> <span class="n">HOLT</span><span class="o">-</span><span class="n">WIN7</span><span class="o">/</span><span class="n">workstation</span><span class="o">/</span><span class="n">lan</span>
<span class="n">Type</span> <span class="n">of</span> <span class="n">Id</span> <span class="o">===&gt;</span> <span class="mi">2</span> <span class="mi">1</span><span class="p">:</span><span class="n">Email</span> <span class="mi">2</span><span class="p">:</span><span class="n">Local</span><span class="o">+</span><span class="n">fixed</span> <span class="mi">3</span><span class="p">:</span><span class="n">Local</span><span class="o">+</span><span class="n">changing</span>
<span class="n">Activation</span> <span class="n">message</span> <span class="o">===&gt;</span>
<span class="n">Text</span> <span class="n">of</span> <span class="s1">&#39;OK&#39;</span> <span class="n">message</span> <span class="n">to</span> <span class="n">user</span><span class="o">.</span>
<span class="n">VTAM</span> <span class="n">name</span> <span class="o">===&gt;</span> <span class="n">HOLTWIN7</span> <span class="o">&amp;</span><span class="mi">1</span> <span class="n">parameter</span> <span class="n">to</span> <span class="n">specify</span> <span class="n">VTAM</span> <span class="n">LU</span> <span class="n">name</span>
<span class="n">Rule</span> <span class="n">Set</span> <span class="o">===&gt;</span> <span class="n">Rules</span> <span class="n">to</span> <span class="n">choose</span> <span class="n">an</span> <span class="n">entry</span> <span class="n">point</span>
<span class="n">Directory</span> <span class="o">===&gt;</span> <span class="n">Where</span> <span class="n">data</span> <span class="ow">is</span> <span class="n">to</span> <span class="n">be</span> <span class="n">uploaded</span>
<span class="n">Last</span> <span class="n">contact</span> <span class="o">===&gt;</span> <span class="n">INACTIVATION</span>
<span class="n">Contacts</span> <span class="o">===&gt;</span> <span class="mi">00000002</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">times</span> <span class="n">cookie</span> <span class="n">was</span> <span class="n">updated</span>
<span class="n">Date</span> <span class="n">created</span> <span class="o">===&gt;</span> <span class="mi">07</span> <span class="n">Apr</span> <span class="mi">2016</span> <span class="mi">10</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">59</span>
<span class="n">Created</span> <span class="n">by</span> <span class="o">===&gt;</span> <span class="n">sptholt</span>
<span class="n">Date</span> <span class="n">activated</span> <span class="o">===&gt;</span> <span class="mi">07</span> <span class="n">Apr</span> <span class="mi">2016</span> <span class="mi">10</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">59</span>
<span class="n">Activated</span> <span class="n">by</span> <span class="o">===&gt;</span> <span class="n">sptholt</span>
<span class="n">Date</span> <span class="n">disabled</span> <span class="o">===&gt;</span> <span class="mi">07</span> <span class="n">Apr</span> <span class="mi">2016</span> <span class="mi">11</span><span class="p">:</span><span class="mi">07</span><span class="p">:</span><span class="mi">40</span>
<span class="n">Disabled</span> <span class="n">by</span> <span class="o">===&gt;</span> <span class="n">SPTHOLT</span>

<span class="n">P1</span><span class="o">=</span><span class="n">Update</span> <span class="n">P3</span><span class="o">=</span><span class="n">Return</span> <span class="n">Enter</span><span class="o">=</span><span class="n">Add</span> <span class="n">P4</span><span class="o">=</span><span class="n">Activate</span> <span class="n">P5</span><span class="o">=</span><span class="n">Disable</span> <span class="n">P6</span><span class="o">=</span><span class="n">Rules</span>

<span class="n">DISABLE</span> <span class="n">WAS</span> <span class="n">DONE</span>
</pre></div>
</div>
<p><em>Figure 22. Disabling a Correspondent using PF5</em></p>
<p>If the user attempts to access the system Virtel will not permit access as the cookie will no longer be valid and the ID will block any further attempts to re-register.</p>
</section>
<section id="customization">
<h4>Customization<a class="headerlink" href="#customization" title="Permalink to this heading"></a></h4>
<p>The sample web elements can be customized. For example, by default, the Correspondent name field is an HTML input field. This allows the user to specify any id. For additional security it is recommended that this field be changed to a displayable field only thereby preventing the user from self-registering against a known LU name. The sample templates CONFIRMANDGO.HTM and CONFIRMANDWAIT.HTM should be amended and the &lt;INPUT&gt; tag removed for this field.</p>
<p>An Virtel APPLIST transaction may be used instead of the static EXCWHOST page.</p>
<p>Virtel scenarios may be used to check and validate the incoming call and introduce different behavior depending on the IP address and variables contained with the cookie.</p>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../Virtel-AT-TLS-Howto/Virtel-AT-TLS-Howto.html" class="btn btn-neutral float-left" title="Virtel AT-TLS" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017, Syspertec. All rights reserved.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
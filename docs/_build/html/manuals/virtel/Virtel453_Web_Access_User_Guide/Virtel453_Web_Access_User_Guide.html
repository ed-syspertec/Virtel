

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Virtel 4.53 User Guide &mdash; Virtel 1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="Virtel 1 documentation" href="../../../index.html"/>
        <link rel="up" title="Virtel Manuals" href="../../../virtel.html"/>
        <link rel="next" title="Technical Newsletters" href="../../../newsletters.html"/>
        <link rel="prev" title="Virtel 4.53 Installation Guide" href="../Virtel453_Installation_User_Guide/Virtel453_Installation_User_Guide.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Virtel
          

          
            
            <img src="../../../_static/logo_virtel_web.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../virtel.html">Virtel Manuals</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../../virtel.html#v4-53">V4.53</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../Virtel453_Connectivity_User_Guide/Virtel453_Connectivity_User_Guide.html">Virtel 4.53 Connectivity Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Virtel453_Installation_User_Guide/Virtel453_Installation_User_Guide.html">Virtel 4.53 Installation Guide</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Virtel 4.53 User Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">1.1.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">1.2.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">1.3.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">1.4.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#introduction-9">Introduction 9</a></li>
<li class="toctree-l4"><a class="reference internal" href="#virtel-url-formats-10">VIRTEL URL formats 10</a></li>
<li class="toctree-l4"><a class="reference internal" href="#directory-management-20">Directory management 20</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-html-and-xml-template-pages-24">Creating HTML and XML template pages 24</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">1.5.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">1.6.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id7">1.7.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">1.8.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id9">1.9.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10">1.10.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#correspondent-management-63">Correspondent management 63</a></li>
<li class="toctree-l4"><a class="reference internal" href="#uploading-html-pages-67">Uploading HTML pages 67</a></li>
<li class="toctree-l4"><a class="reference internal" href="#web-access-customization-84">Web Access customization 84</a></li>
<li class="toctree-l4"><a class="reference internal" href="#application-selection-menu-101">Application selection menu 101</a></li>
<li class="toctree-l4"><a class="reference internal" href="#printing-with-web-access-104">Printing with Web Access 104</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tso-file-transfer-109">TSO file transfer 109</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11">1.11.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id12">1.12.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#accessing-vtam-applications-116">Accessing VTAM applications 116</a></li>
<li class="toctree-l4"><a class="reference internal" href="#site-customization-of-colors-and-logo-118">Site customization of colors and logo 118</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id13">1.13.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id14">1.14.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id15">1.15.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id16">1.16.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id17">1.17.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#site-customization-of-javascript-functions-123">Site customization of Javascript functions 123</a></li>
<li class="toctree-l4"><a class="reference internal" href="#customizing-the-help-page-128">Customizing the help page 128</a></li>
<li class="toctree-l4"><a class="reference internal" href="#allow-copy-cut-and-paste-130">Allow copy, cut and paste 130</a></li>
<li class="toctree-l4"><a class="reference internal" href="#macros-138">Macros 138</a></li>
<li class="toctree-l4"><a class="reference internal" href="#virtel-web-modernisation-142">VIRTEL Web Modernisation 142</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id18">1.18.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id19">1.19.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id20">1.20.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id21">2.1.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id22">3.1.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#virtel-web-integration-203">VIRTEL Web Integration 203</a></li>
<li class="toctree-l4"><a class="reference internal" href="#incoming-e-mails-218">Incoming E-mails 218</a></li>
<li class="toctree-l4"><a class="reference internal" href="#virtel-batch-221">VIRTEL Batch 221</a></li>
<li class="toctree-l4"><a class="reference internal" href="#outgoing-e-mails-228">Outgoing E-mails 228</a></li>
<li class="toctree-l4"><a class="reference internal" href="#introduction-229">Introduction 229</a></li>
<li class="toctree-l4"><a class="reference internal" href="#structured-fields-229">Structured fields 229</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id23">3.3.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id24">3.4.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id25">3.5.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id26">4.1.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id27">5.1.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id28">5.2.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id29">5.4.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id30">5.5.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-determine-if-running-under-virtel-231">How to determine if running under VIRTEL 231</a></li>
<li class="toctree-l4"><a class="reference internal" href="#virtel-web-integration-233">VIRTEL Web Integration 233</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mail-247">mail 247</a></li>
<li class="toctree-l4"><a class="reference internal" href="#virtel-web-access-security-253">VIRTEL Web Access Security 253</a></li>
<li class="toctree-l4"><a class="reference internal" href="#technical-characteristics-253">Technical characteristics 253</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-use-different-screen-sizes-260">How to use different screen sizes 260</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-override-the-codepage-by-url-parameter-263">How to override the codepage by URL parameter 263</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-handle-host-session-termination-263">How to handle host session termination 263</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-access-a-host-application-directly-264">How to access a host application directly 264</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-change-the-font-for-web-access-266">How to change the font for Web Access 266</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-customize-the-enter-key-settings-266">How to customize the Enter key settings 266</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-change-the-default-user-settings-267">How to change the default user settings 267</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-change-the-user-settings-interface-267">How to change the user settings interface 267</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-define-a-reverse-proxy-267">How to define a reverse proxy 267</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-support-virtual-hosting-267">How to support virtual hosting 267</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ipaddr-port">ipaddr:port</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pathname">pathname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pagename">pagename</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id31">ipaddr:port</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id32">pathname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id33">ipaddr:port</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id34">pagename</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id35">ipaddr:port</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id36">ipaddr:port</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id37">pathname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id38">pagename</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tranname">tranname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id39">ipaddr:port</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id40">pathname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id41">pagename</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id42">tranname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#userdata">userdata</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id43">ipaddr:port</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id44">pathname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id45">pagename</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id46">tranname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#param1-param2">param1, param2, ...</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id47">ipaddr:port</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id48">pathname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id49">pagename</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sessionid">sessionid</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id50">ipaddr:port</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id51">pathname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id52">pagename</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id53">sessionid</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reset-content">205 (Reset Content)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#not-modified">304 (Not Modified)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#not-found">404 (Not Found)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id54">ipaddr:port</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id55">pathname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id56">pagename</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id57">sessionid</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id58">ipaddr:port</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id59">pathname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id60">pagename</a></li>
<li class="toctree-l4"><a class="reference internal" href="#usecookiesession">$UseCookieSession$</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id61">ipaddr:port</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id62">pathname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id63">pagename</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id64">tranname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#capability">capability</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id65">ipaddr:port</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id66">pathname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id67">pagename</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id68">tranname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#securitycode">securitycode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id69">ipaddr:port</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id70">pathname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id71">pagename</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id72">securitycode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id73">ipaddr:port</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id74">pathname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id75">pagename</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id76">tranname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#signoncode">signoncode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#name">Name</a></li>
<li class="toctree-l4"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#type">Type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dd-name">DD name</a></li>
<li class="toctree-l4"><a class="reference internal" href="#keyword">Keyword</a></li>
<li class="toctree-l4"><a class="reference internal" href="#size-of-names">Size of names</a></li>
<li class="toctree-l4"><a class="reference internal" href="#case">Case</a></li>
<li class="toctree-l4"><a class="reference internal" href="#copy-up">Copy up</a></li>
<li class="toctree-l4"><a class="reference internal" href="#copy-down">Copy down</a></li>
<li class="toctree-l4"><a class="reference internal" href="#delete">Delete</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id77">[1]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id78">[2]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id79">[3]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id80">[4]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id81">[5]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id82">[6]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id83">[7]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id84">name</a></li>
<li class="toctree-l4"><a class="reference internal" href="#action">action</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id85">pagename</a></li>
<li class="toctree-l4"><a class="reference internal" href="#session-code">{{{SESSION-CODE}}}</a></li>
<li class="toctree-l4"><a class="reference internal" href="#method">method</a></li>
<li class="toctree-l4"><a class="reference internal" href="#row-col">row,col</a></li>
<li class="toctree-l4"><a class="reference internal" href="#len">len</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id86">name</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id87">row,col</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id88">len</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id89">name</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id90">row,col</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id91">len</a></li>
<li class="toctree-l4"><a class="reference internal" href="#varname">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id92">row,col</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id93">len</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id94">row,col</a></li>
<li class="toctree-l4"><a class="reference internal" href="#width-height">width,height</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id95">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id96">row,col</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id97">len</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id98">name</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id99">row,col</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id100">len</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id101">name</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id102">row,col</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id103">len</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id104">name</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id105">row,col</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id106">len</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ht">ht</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id107">name</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id108">row,col</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id109">len</a></li>
<li class="toctree-l4"><a class="reference internal" href="#prefix">prefix</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id110">row,col</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id111">len</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fragvar">fragvar</a></li>
<li class="toctree-l4"><a class="reference internal" href="#p1">p1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#p2">p2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#p3">p3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#p1-p2">p1,p2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#script-for-focus-position-management">Script for focus position management</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cursor-position-initialisation">Cursor position initialisation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#script-for-saving-the-name-of-the-field-having-the-focus">Script for saving the name of the field having the focus</a></li>
<li class="toctree-l4"><a class="reference internal" href="#automatic-call-of-the-update-script">Automatic call of the update script</a></li>
<li class="toctree-l4"><a class="reference internal" href="#save-the-name-of-the-field-having-the-focus">Save the name of the field having the focus</a></li>
<li class="toctree-l4"><a class="reference internal" href="#automatic-call-of-the-update-script-from-a-field-of-type-button">Automatic call of the update script from a field of type BUTTON</a></li>
<li class="toctree-l4"><a class="reference internal" href="#automatic-call-of-the-script-from-a-hypertext-link">Automatic call of the SCRIPT from a hypertext link</a></li>
<li class="toctree-l4"><a class="reference internal" href="#disallow-attn-pf08-and-pf24">Disallow ATTN, PF08 and PF24</a></li>
<li class="toctree-l4"><a class="reference internal" href="#disallow-all-function-keys-except-enter-and-pf03">Disallow all function keys except ENTER and PF03</a></li>
<li class="toctree-l4"><a class="reference internal" href="#definition-of-the-button-field-in-the-page-template">Definition of the BUTTON field in the page template:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#retrieving-and-testing-the-pf-key-value-in-the-input-scenario">Retrieving and testing the PF key value in the INPUT scenario:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#maxlength">MAXLENGTH</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id">ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="#do-not-ignore-binary-zeroes">DO-NOT-IGNORE-BINARY-ZEROES</a></li>
<li class="toctree-l4"><a class="reference internal" href="#blank-binary-zeroes">BLANK-BINARY-ZEROES</a></li>
<li class="toctree-l4"><a class="reference internal" href="#html-escapes-javascript-escapes-json-escapes-no-escapes-xml-escapes">HTML-ESCAPES, JAVASCRIPT-ESCAPES, JSON-ESCAPES, NO-ESCAPES, XML-ESCAPES</a></li>
<li class="toctree-l4"><a class="reference internal" href="#auto-increment-variables">AUTO-INCREMENT-VARIABLES</a></li>
<li class="toctree-l4"><a class="reference internal" href="#no-add-to-checkbox">NO-ADD-TO-CHECKBOX</a></li>
<li class="toctree-l4"><a class="reference internal" href="#no-add-to-listbox">NO-ADD-TO-LISTBOX</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mdt-if-received">MDT-IF-RECEIVED</a></li>
<li class="toctree-l4"><a class="reference internal" href="#trace-line">TRACE-LINE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#trace-relay">TRACE-RELAY</a></li>
<li class="toctree-l4"><a class="reference internal" href="#option">option</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id112">option</a></li>
<li class="toctree-l4"><a class="reference internal" href="#init">init</a></li>
<li class="toctree-l4"><a class="reference internal" href="#incr">incr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#max">max</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id113">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#offset">offset</a></li>
<li class="toctree-l4"><a class="reference internal" href="#length">length</a></li>
<li class="toctree-l4"><a class="reference internal" href="#count">count</a></li>
<li class="toctree-l4"><a class="reference internal" href="#subname">subname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#xxxxxx">xxxxxx</a></li>
<li class="toctree-l4"><a class="reference internal" href="#virtel">VIRTEL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#relay">RELAY</a></li>
<li class="toctree-l4"><a class="reference internal" href="#print-relay">PRINT-RELAY</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pseudo-terminal">PSEUDO-TERMINAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#entry-point">ENTRY-POINT</a></li>
<li class="toctree-l4"><a class="reference internal" href="#line-internal">LINE-INTERNAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#line-external">LINE-EXTERNAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#user">USER</a></li>
<li class="toctree-l4"><a class="reference internal" href="#password">PASSWORD</a></li>
<li class="toctree-l4"><a class="reference internal" href="#user-ip-address">USER-IP-ADDRESS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sna-status">SNA-STATUS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#transaction-internal">TRANSACTION-INTERNAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#transaction-external">TRANSACTION-EXTERNAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#url">URL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#query">QUERY</a></li>
<li class="toctree-l4"><a class="reference internal" href="#page">PAGE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#page-internal">PAGE-INTERNAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#directory">DIRECTORY</a></li>
<li class="toctree-l4"><a class="reference internal" href="#character-set">CHARACTER-SET</a></li>
<li class="toctree-l4"><a class="reference internal" href="#date-time">DATE-TIME</a></li>
<li class="toctree-l4"><a class="reference internal" href="#virtel-version">VIRTEL-VERSION</a></li>
<li class="toctree-l4"><a class="reference internal" href="#xxx-symbol">xxx-SYMBOL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id114">len</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id115">xxxxxx</a></li>
<li class="toctree-l4"><a class="reference internal" href="#screen-columns">SCREEN-COLUMNS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#screen-lines">SCREEN-LINES</a></li>
<li class="toctree-l4"><a class="reference internal" href="#signon-is-needed">SIGNON-IS-NEEDED</a></li>
<li class="toctree-l4"><a class="reference internal" href="#signon-is-ok">SIGNON-IS-OK</a></li>
<li class="toctree-l4"><a class="reference internal" href="#application-is-connected">APPLICATION-IS-CONNECTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="#username">USERNAME</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id116">PASSWORD</a></li>
<li class="toctree-l4"><a class="reference internal" href="#new-password">NEW-PASSWORD</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hex">HEX</a></li>
<li class="toctree-l4"><a class="reference internal" href="#base64">BASE64</a></li>
<li class="toctree-l4"><a class="reference internal" href="#encrypted">ENCRYPTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id117">NAME</a></li>
<li class="toctree-l4"><a class="reference internal" href="#algorithm">ALGORITHM</a></li>
<li class="toctree-l4"><a class="reference internal" href="#initial-algorithm">INITIAL-ALGORITHM</a></li>
<li class="toctree-l4"><a class="reference internal" href="#driver">DRIVER</a></li>
<li class="toctree-l4"><a class="reference internal" href="#format">FORMAT</a></li>
<li class="toctree-l4"><a class="reference internal" href="#chaining">CHAINING</a></li>
<li class="toctree-l4"><a class="reference internal" href="#padding">PADDING</a></li>
<li class="toctree-l4"><a class="reference internal" href="#component">component</a></li>
<li class="toctree-l4"><a class="reference internal" href="#exponent">EXPONENT</a></li>
<li class="toctree-l4"><a class="reference internal" href="#modulus">MODULUS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#crypto-session-key">CRYPTO-SESSION-KEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id118">option</a></li>
<li class="toctree-l4"><a class="reference internal" href="#encrypt-password-fields">ENCRYPT-PASSWORD-FIELDS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#to-allow-read-of-scenario-trace">TO-ALLOW-READ-OF-SCENARIO-TRACE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#giving-access-to-user-directory-with-my-userid">GIVING-ACCESS-TO-%USER%-DIRECTORY-WITH-MY-USERID</a></li>
<li class="toctree-l4"><a class="reference internal" href="#giving-access-to-group-directory-with-my-userid">GIVING-ACCESS-TO-%GROUP%-DIRECTORY-WITH-MY-USERID</a></li>
<li class="toctree-l4"><a class="reference internal" href="#giving-access-to-user-directory-in-variable-user">GIVING-ACCESS-TO-%USER%-DIRECTORY-IN-VARIABLE-%USER%</a></li>
<li class="toctree-l4"><a class="reference internal" href="#giving-access-to-group-directory-in-variable-group">GIVING-ACCESS-TO-%GROUP%-DIRECTORY-IN-VARIABLE-%GROUP%</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id119">Id</a></li>
<li class="toctree-l4"><a class="reference internal" href="#type-of-id">Type of Id</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id120">2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id121">3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#activation-message">Activation message</a></li>
<li class="toctree-l4"><a class="reference internal" href="#r">&amp;R</a></li>
<li class="toctree-l4"><a class="reference internal" href="#c">&amp;C</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rule-set">Rule Set</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id122">Directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#last-contact">Last contact</a></li>
<li class="toctree-l4"><a class="reference internal" href="#contacts">Contacts</a></li>
<li class="toctree-l4"><a class="reference internal" href="#htm">*.htm</a></li>
<li class="toctree-l4"><a class="reference internal" href="#virdba-virdbapw">virdba:virdbapw</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id123">192.168.235.30:41001</a></li>
<li class="toctree-l4"><a class="reference internal" href="#virmsg-txt">virmsg.txt</a></li>
<li class="toctree-l4"><a class="reference internal" href="#uplbas">uplbas</a></li>
<li class="toctree-l4"><a class="reference internal" href="#userid-password">userid:password</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id124">directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#n-n-n-n">n.n.n.n</a></li>
<li class="toctree-l4"><a class="reference internal" href="#port">port</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ctlfile">ctlfile</a></li>
<li class="toctree-l4"><a class="reference internal" href="#file1-file2">file1 file2 ...</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id125">-r</a></li>
<li class="toctree-l4"><a class="reference internal" href="#k">-k</a></li>
<li class="toctree-l4"><a class="reference internal" href="#myuserid">MYUSERID</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cli-dir">CLI-DIR</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id126">10.1.12.101</a></li>
<li class="toctree-l4"><a class="reference internal" href="#font-size">Font Size</a></li>
<li class="toctree-l4"><a class="reference internal" href="#window">Window</a></li>
<li class="toctree-l4"><a class="reference internal" href="#screen">Screen</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nn">nn</a></li>
<li class="toctree-l4"><a class="reference internal" href="#font-family">Font family</a></li>
<li class="toctree-l4"><a class="reference internal" href="#auto-capture">Auto-capture</a></li>
<li class="toctree-l4"><a class="reference internal" href="#auto-print">Auto-print</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cursor">Cursor</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bar">Bar</a></li>
<li class="toctree-l4"><a class="reference internal" href="#block">Block</a></li>
<li class="toctree-l4"><a class="reference internal" href="#blink">Blink</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vertical-line-horiz-line">Vertical line, Horiz line</a></li>
<li class="toctree-l4"><a class="reference internal" href="#esc-key-to-alt-f3">Esc key to Alt+F3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#keypad">Keypad /*-+.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#double-click">Double click</a></li>
<li class="toctree-l4"><a class="reference internal" href="#word">Word</a></li>
<li class="toctree-l4"><a class="reference internal" href="#enter">ENTER</a></li>
<li class="toctree-l4"><a class="reference internal" href="#no">no</a></li>
<li class="toctree-l4"><a class="reference internal" href="#url-hotspots">URL hotspots</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pf-key-hotspots">PF key hotspots</a></li>
<li class="toctree-l4"><a class="reference internal" href="#paste-erase-eof">Paste erase EOF</a></li>
<li class="toctree-l4"><a class="reference internal" href="#move-cursor-on-activate">Move cursor on activate</a></li>
<li class="toctree-l4"><a class="reference internal" href="#style">Style</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id127">3270</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gray">Gray</a></li>
<li class="toctree-l4"><a class="reference internal" href="#white">White</a></li>
<li class="toctree-l4"><a class="reference internal" href="#print-style">Print style</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id128">3270</a></li>
<li class="toctree-l4"><a class="reference internal" href="#color">Color</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id129">White</a></li>
<li class="toctree-l4"><a class="reference internal" href="#response-time-monitor">Response time monitor</a></li>
<li class="toctree-l4"><a class="reference internal" href="#omit-nulls-from-input">Omit nulls from input</a></li>
<li class="toctree-l4"><a class="reference internal" href="#keep-macro-pad-open">Keep macro pad open</a></li>
<li class="toctree-l4"><a class="reference internal" href="#keep-keypad-open">Keep keypad open</a></li>
<li class="toctree-l4"><a class="reference internal" href="#highlight-input-fields">Highlight input fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="#remap-caret-to-logical-not">Remap caret to logical not</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adapt-font-size-ratio">Adapt font size ratio</a></li>
<li class="toctree-l4"><a class="reference internal" href="#character-spacing">Character spacing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#line-spacing">Line spacing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#save">Save</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cancel">Cancel</a></li>
<li class="toctree-l4"><a class="reference internal" href="#defaults">Defaults</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id130">Font Size</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id131">Window</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id132">Screen</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id133">nn</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id134">Font family</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id135">Cursor</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id136">Bar</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id137">Block</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id138">Blink</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id139">Vertical line, Horiz line</a></li>
<li class="toctree-l4"><a class="reference internal" href="#display-style">Display Style</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id140">3270</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id141">Gray</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id142">White</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id143">Print style</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id144">3270</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id145">Color</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id146">White</a></li>
<li class="toctree-l4"><a class="reference internal" href="#miscellaneous-highlight-input-fields">Miscellaneous Highlight input fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id147">Adapt font size ratio</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id148">Character spacing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id149">Line spacing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id150">Double click</a></li>
<li class="toctree-l4"><a class="reference internal" href="#off">off</a></li>
<li class="toctree-l4"><a class="reference internal" href="#word-selection">Word Selection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id151">ENTER</a></li>
<li class="toctree-l4"><a class="reference internal" href="#edition">Edition</a></li>
<li class="toctree-l4"><a class="reference internal" href="#map-ctrl-v-to-paste-by-typing">Map Ctrl+V to Paste by Typing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id152">Move cursor on activate</a></li>
<li class="toctree-l4"><a class="reference internal" href="#preserve-insertion-mode">Preserve insertion mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pads">Pads</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id153">Keep keypad open</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hotspots">Hotspots</a></li>
<li class="toctree-l4"><a class="reference internal" href="#display-pf-key-hotspots">Display PF key hotspots</a></li>
<li class="toctree-l4"><a class="reference internal" href="#capture">Capture</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bring-capture-to-the-foreground">Bring capture to the foreground</a></li>
<li class="toctree-l4"><a class="reference internal" href="#miscellaneous-auto-print">Miscellaneous Auto-print</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id154">Response time monitor</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id155">Omit nulls from input</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id156">Remap caret to logical not</a></li>
<li class="toctree-l4"><a class="reference internal" href="#version">version</a></li>
<li class="toctree-l4"><a class="reference internal" href="#v1-v2">V1+V2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#v2">V2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#no-value">no value</a></li>
<li class="toctree-l4"><a class="reference internal" href="#width">width</a></li>
<li class="toctree-l4"><a class="reference internal" href="#height">height</a></li>
<li class="toctree-l4"><a class="reference internal" href="#presentation">3270 presentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ajax-3270">Ajax 3270</a></li>
<li class="toctree-l4"><a class="reference internal" href="#html-presentation">HTML presentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ajax-html">Ajax HTML</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tablet">Tablet</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scenfpdf">SCENFPDF</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scenfpcl">SCENFPCL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scenppdf">SCENPPDF</a></li>
<li class="toctree-l4"><a class="reference internal" href="#windows-cp-1252">Windows (CP-1252)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ms-dos-cp-850">MS-DOS (CP-850)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pfkey">pfKey</a></li>
<li class="toctree-l4"><a class="reference internal" href="#oform">oForm</a></li>
<li class="toctree-l4"><a class="reference internal" href="#o">o</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id157">url</a></li>
<li class="toctree-l4"><a class="reference internal" href="#xtim">xtim</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id158">name</a></li>
<li class="toctree-l4"><a class="reference internal" href="#values">values</a></li>
<li class="toctree-l4"><a class="reference internal" href="#automatic-update">Automatic update</a></li>
<li class="toctree-l4"><a class="reference internal" href="#authorized-domains">Authorized domains:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#show-notifications">Show notifications:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#refresh-preferences">Refresh preferences:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#allow-copy-paste-operation">Allow copy / paste operation:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#for-all-domains">For all domains:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#for-these-domains-only">For these domains only:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#iframe-support">IFrame support:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#logging">Logging:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#admin">admin</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id159">n.n.n.n</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id160">41001</a></li>
<li class="toctree-l4"><a class="reference internal" href="#userid-and-groupid">userid and groupid</a></li>
<li class="toctree-l4"><a class="reference internal" href="#this-will-call-the-subroutine-and-the-calling-scenario-will-continue-in-sequence-when-the-subroutine-scenario-end-instruction-will-be-reached">This will call the subroutine and the calling scenario will continue in sequence when the subroutine SCENARIO END instruction will be reached.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#modname">modname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#appl">APPL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#exec">EXEC</a></li>
<li class="toctree-l4"><a class="reference internal" href="#yes">YES</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id161">NO</a></li>
<li class="toctree-l4"><a class="reference internal" href="#value">value</a></li>
<li class="toctree-l4"><a class="reference internal" href="#identification">IDENTIFICATION</a></li>
<li class="toctree-l4"><a class="reference internal" href="#initial">INITIAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#final">FINAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#input">INPUT</a></li>
<li class="toctree-l4"><a class="reference internal" href="#output">OUTPUT</a></li>
<li class="toctree-l4"><a class="reference internal" href="#end">END</a></li>
<li class="toctree-l4"><a class="reference internal" href="#discard">DISCARD</a></li>
<li class="toctree-l4"><a class="reference internal" href="#subroutine">SUBROUTINE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id162">pfkey</a></li>
<li class="toctree-l4"><a class="reference internal" href="#f1-f9">F1-F9</a></li>
<li class="toctree-l4"><a class="reference internal" href="#a-7c">7A-7C</a></li>
<li class="toctree-l4"><a class="reference internal" href="#c1-c9">C1-C9</a></li>
<li class="toctree-l4"><a class="reference internal" href="#a-4c">4A-4C</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id163">6C</a></li>
<li class="toctree-l4"><a class="reference internal" href="#e">6E</a></li>
<li class="toctree-l4"><a class="reference internal" href="#b">6B</a></li>
<li class="toctree-l4"><a class="reference internal" href="#d">6D</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id164">7D</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fd">FD</a></li>
<li class="toctree-l4"><a class="reference internal" href="#and-wait-string">AND=(WAIT,&#8217;string&#8217;)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#and-script-string">AND=(SCRIPT,&#8217;string&#8217;)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#and-process-response-string">AND=(PROCESS-RESPONSE,&#8217;string&#8217;)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#and-do-not-process-response">AND=(DO-NOT-PROCESS-RESPONSE)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#maxtime-nnn">MAXTIME=nnn</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lastmsg-yes">LASTMSG=YES</a></li>
<li class="toctree-l4"><a class="reference internal" href="#asynch-yes">ASYNCH=YES</a></li>
<li class="toctree-l4"><a class="reference internal" href="#row-col-len">(row,col,len)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id165">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#condition">condition</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id166">value</a></li>
<li class="toctree-l4"><a class="reference internal" href="#process1-2">process1,2,...</a></li>
<li class="toctree-l4"><a class="reference internal" href="#label">label</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fail">FAIL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#success">SUCCESS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#processx">processx</a></li>
<li class="toctree-l4"><a class="reference internal" href="#direction">direction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id167">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tabname">tabname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id168">row,col</a></li>
<li class="toctree-l4"><a class="reference internal" href="#name2">name2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id169">type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#type-replace">TYPE=REPLACE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id170">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#filename">filename</a></li>
<li class="toctree-l4"><a class="reference internal" href="#name1">name1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id171">row,col,len</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id172">type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#type-erase-field">TYPE=ERASE-FIELD</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id173">name1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id174">name2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id175">type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#type-offset-length">TYPE=OFFSET-LENGTH</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id176">TYPE=REPLACE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id177">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#string">string</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fromvar">fromvar</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id178">type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id179">TYPE=REPLACE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id180">filename</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id181">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id182">type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#type-ascii">TYPE=ASCII</a></li>
<li class="toctree-l4"><a class="reference internal" href="#type-ebcdic">TYPE=EBCDIC</a></li>
<li class="toctree-l4"><a class="reference internal" href="#type-linebuffer">TYPE=LINEBUFFER</a></li>
<li class="toctree-l4"><a class="reference internal" href="#row">row</a></li>
<li class="toctree-l4"><a class="reference internal" href="#col">col</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id183">len</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id184">ht</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id185">name2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id186">type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id187">TYPE=REPLACE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id188">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#class">class</a></li>
<li class="toctree-l4"><a class="reference internal" href="#http-header">HTTP-HEADER</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tct-http-header">TCT-HTTP-HEADER</a></li>
<li class="toctree-l4"><a class="reference internal" href="#name-of">NAME-OF</a></li>
<li class="toctree-l4"><a class="reference internal" href="#number-of">NUMBER-OF</a></li>
<li class="toctree-l4"><a class="reference internal" href="#value-of">VALUE-OF</a></li>
<li class="toctree-l4"><a class="reference internal" href="#user-security-profile">USER-SECURITY-PROFILE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#item">item</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id189">item</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id190">VIRTEL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id191">RELAY</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id192">PRINT-RELAY</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id193">PSEUDO-TERMINAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id194">ENTRY-POINT</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id195">LINE-INTERNAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id196">LINE-EXTERNAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id197">USER</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id198">PASSWORD</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id199">USER-IP-ADDRESS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id200">SNA-STATUS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#x">X</a></li>
<li class="toctree-l4"><a class="reference internal" href="#blank">blank</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id201">TRANSACTION-INTERNAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id202">TRANSACTION-EXTERNAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#routing-parameter">ROUTING-PARAMETER</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id203">URL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id204">QUERY</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id205">PAGE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id206">DIRECTORY</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id207">CHARACTER-SET</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id208">DATE-TIME</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id209">VIRTEL-VERSION</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id210">xxx-SYMBOL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id211">SCREEN-COLUMNS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id212">SCREEN-LINES</a></li>
<li class="toctree-l4"><a class="reference internal" href="#userid">USERID</a></li>
<li class="toctree-l4"><a class="reference internal" href="#group">GROUP</a></li>
<li class="toctree-l4"><a class="reference internal" href="#waname">WANAME</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wabldg">WABLDG</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wadept">WADEPT</a></li>
<li class="toctree-l4"><a class="reference internal" href="#waroom">WAROOM</a></li>
<li class="toctree-l4"><a class="reference internal" href="#waaddr1">WAADDR1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#waaddr2">WAADDR2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#waaddr3">WAADDR3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#waaddr4">WAADDR4</a></li>
<li class="toctree-l4"><a class="reference internal" href="#waaccnt">WAACCNT</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id213">len</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id214">offset</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id215">type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id216">TYPE=REPLACE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id217">string</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id218">name2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id219">type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id220">TYPE=REPLACE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id221">string</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id222">row,col,len</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id223">type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id224">TYPE=ERASE-FIELD</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id225">name2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id226">row,col,len</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id227">type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id228">TYPE=ERASE-FIELD</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id229">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id230">class</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id231">NAME-OF</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id232">NUMBER-OF</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id233">VALUE-OF</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id234">item</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id235">DIRECTORY</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id236">USER</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id237">PASSWORD</a></li>
<li class="toctree-l4"><a class="reference internal" href="#logmode">LOGMODE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id238">ROUTING-PARAMETER</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id239">SCREEN-COLUMNS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id240">SCREEN-LINES</a></li>
<li class="toctree-l4"><a class="reference internal" href="#trace-line-or-notrace-line">TRACE,LINE or NOTRACE,LINE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#trace-terminal-or-notrace-terminal">TRACE,TERMINAL or NOTRACE,TERMINAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#trace-scenario-or-notrace-scenario">TRACE,SCENARIO or NOTRACE,SCENARIO</a></li>
<li class="toctree-l4"><a class="reference internal" href="#snap">SNAP</a></li>
<li class="toctree-l4"><a class="reference internal" href="#snap-terminal">SNAP,TERMINAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#when-always">WHEN=ALWAYS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#when-transaction-name-starts-with-prefix">WHEN=(TRANSACTION-NAME-STARTS-WITH,&#8217;prefix&#8217;)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id241">row</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id242">col</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id243">len</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id244">value</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id245">Condition</a></li>
<li class="toctree-l4"><a class="reference internal" href="#eq">EQ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ne">NE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id246">P1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#as-pfkey">AS-PFKEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="#as-parameter">AS-PARAMETER</a></li>
<li class="toctree-l4"><a class="reference internal" href="#as-href">AS-HREF</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id247">P2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id248">P3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#p4">P4</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameter-1">Parameter 1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameter-2">Parameter 2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameter-3">Parameter 3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vclick">VClick</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vclick2">VClick2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vclick3">VClick3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id249">value</a></li>
<li class="toctree-l4"><a class="reference internal" href="#string1-string2">&#8216;string1&#8217; [,&#8217;string2&#8217;, …]</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id250">row</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id251">col</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id252">len</a></li>
<li class="toctree-l4"><a class="reference internal" href="#operation">operation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#define-choice">DEFINE-CHOICE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#define-variable-choice">DEFINE-VARIABLE-CHOICE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#is-binary-choice">IS-BINARY-CHOICE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hide">HIDE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#param-n">param-N</a></li>
<li class="toctree-l4"><a class="reference internal" href="#from-to">FROM,TO</a></li>
<li class="toctree-l4"><a class="reference internal" href="#when-then">WHEN,THEN</a></li>
<li class="toctree-l4"><a class="reference internal" href="#begin-then">BEGIN,THEN</a></li>
<li class="toctree-l4"><a class="reference internal" href="#contains-then-ignore">CONTAINS,THEN,IGNORE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#otherwise-keep">OTHERWISE,KEEP</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id253">label</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id254">label</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id255">label</a></li>
<li class="toctree-l4"><a class="reference internal" href="#counter">Counter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id256">row,col,len</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id257">value</a></li>
<li class="toctree-l4"><a class="reference internal" href="#variable">VARIABLE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#exists-variable">EXISTS-VARIABLE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#not-exists-variable">NOT-EXISTS-VARIABLE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id258">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#application-timeout">APPLICATION-TIMEOUT</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id259">CURSOR</a></li>
<li class="toctree-l4"><a class="reference internal" href="#first-pass">FIRST-PASS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ind-file-timeout">IND$FILE-TIMEOUT</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id260">NOT-FOUND</a></li>
<li class="toctree-l4"><a class="reference internal" href="#screen-is-blank">SCREEN-IS-BLANK</a></li>
<li class="toctree-l4"><a class="reference internal" href="#screen-is-unformatted">SCREEN-IS-UNFORMATTED</a></li>
<li class="toctree-l4"><a class="reference internal" href="#session-switch">SESSION-SWITCH</a></li>
<li class="toctree-l4"><a class="reference internal" href="#process1">process1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id261">label</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id262">FAIL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id263">SUCCESS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#process2">process2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id264">type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mylabel">mylabel</a></li>
<li class="toctree-l4"><a class="reference internal" href="#text">text</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id265">text</a></li>
<li class="toctree-l4"><a class="reference internal" href="#n">n</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id266">name</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nnn">nnn</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id267">type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id268">9</a></li>
<li class="toctree-l4"><a class="reference internal" href="#s9">S9</a></li>
<li class="toctree-l4"><a class="reference internal" href="#only9">ONLY9</a></li>
<li class="toctree-l4"><a class="reference internal" href="#only9-left-aligned">(ONLY9,LEFT-ALIGNED)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id269">BASE64</a></li>
<li class="toctree-l4"><a class="reference internal" href="#offset-length-offset-length-text">OFFSET-LENGTH OFFSET-LENGTH-TEXT</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pattern-char">pattern,char</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id270">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id271">value</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id272">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id273">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id274">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id275">nnn</a></li>
<li class="toctree-l4"><a class="reference internal" href="#xmlname">xmlname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#attrname">attrname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id276">nnn</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id277">type</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id278">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id279">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#groupname">groupname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id280">xmlname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id281">nnn</a></li>
<li class="toctree-l4"><a class="reference internal" href="#countvar">countvar</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id282">groupname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id283">subname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id284">groupname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fieldname">fieldname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id285">groupname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id286">format</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id287">groupname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id288">format</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id289">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id290">groupname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id291">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id292">method</a></li>
<li class="toctree-l4"><a class="reference internal" href="#site">site</a></li>
<li class="toctree-l4"><a class="reference internal" href="#topath">topath</a></li>
<li class="toctree-l4"><a class="reference internal" href="#querytext">querytext</a></li>
<li class="toctree-l4"><a class="reference internal" href="#header">header</a></li>
<li class="toctree-l4"><a class="reference internal" href="#varnameo">varnameo</a></li>
<li class="toctree-l4"><a class="reference internal" href="#varnamei">varnamei</a></li>
<li class="toctree-l4"><a class="reference internal" href="#varnamer">varnamer</a></li>
<li class="toctree-l4"><a class="reference internal" href="#varnamep">varnamep</a></li>
<li class="toctree-l4"><a class="reference internal" href="#options">options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dsname">dsname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#outvar">outvar</a></li>
<li class="toctree-l4"><a class="reference internal" href="#retvar">retvar</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cmdvar">cmdvar</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id293">options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id294">dsname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#invar">invar</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id295">retvar</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id296">cmdvar</a></li>
<li class="toctree-l4"><a class="reference internal" href="#varname1">varname1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id297">varnamep</a></li>
<li class="toctree-l4"><a class="reference internal" href="#toaddr">toaddr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fromaddr">fromaddr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ccaddr">ccaddr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bccaddr">bccaddr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bodytext">bodytext</a></li>
<li class="toctree-l4"><a class="reference internal" href="#subjtext">subjtext</a></li>
<li class="toctree-l4"><a class="reference internal" href="#charset">charset</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id298">header</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id299">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id300">filename</a></li>
<li class="toctree-l4"><a class="reference internal" href="#filetype">filetype</a></li>
<li class="toctree-l4"><a class="reference internal" href="#disp">disp</a></li>
<li class="toctree-l4"><a class="reference internal" href="#altvar">altvar</a></li>
<li class="toctree-l4"><a class="reference internal" href="#altfn">altfn</a></li>
<li class="toctree-l4"><a class="reference internal" href="#altft">altft</a></li>
<li class="toctree-l4"><a class="reference internal" href="#altdp">altdp</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id301">varnamep</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id302">mylabel</a></li>
<li class="toctree-l4"><a class="reference internal" href="#all-values-of">ALL-VALUES-OF</a></li>
<li class="toctree-l4"><a class="reference internal" href="#first-value-of">FIRST-VALUE-OF</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id303">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id304">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id305">filetype</a></li>
<li class="toctree-l4"><a class="reference internal" href="#exphdr">exphdr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#expires-endofday">EXPIRES=ENDOFDAY</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id306">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id307">filetype</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id308">filename</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id309">tranname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id310">varnamep</a></li>
<li class="toctree-l4"><a class="reference internal" href="#errlabel">errlabel</a></li>
<li class="toctree-l4"><a class="reference internal" href="#linename">linename</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id311">varnamep</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id312">errlabel</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id313">tranname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id314">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id315">errlabel</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id316">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id317">linename</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id318">errlabel</a></li>
<li class="toctree-l4"><a class="reference internal" href="#utf-8">UTF-8</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id319">charset</a></li>
<li class="toctree-l4"><a class="reference internal" href="#iso-for-country">ISO-FOR-COUNTRY</a></li>
<li class="toctree-l4"><a class="reference internal" href="#country">country</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id320">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#suffix">suffix</a></li>
<li class="toctree-l4"><a class="reference internal" href="#level">level</a></li>
<li class="toctree-l4"><a class="reference internal" href="#low">LOW</a></li>
<li class="toctree-l4"><a class="reference internal" href="#medium">MEDIUM</a></li>
<li class="toctree-l4"><a class="reference internal" href="#high">HIGH</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id321">userid</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id322">password</a></li>
<li class="toctree-l4"><a class="reference internal" href="#newpassword">newpassword</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id323">retvar</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id324">tranname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id325">groupname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id326">fieldname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id327">groupname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id328">groupname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id329">varname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#call">CALL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#call-reuse">CALL-REUSE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#transaction">TRANSACTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="#servname">servname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#progname">progname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id330">option</a></li>
<li class="toctree-l4"><a class="reference internal" href="#close">CLOSE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#traceopt">traceopt</a></li>
<li class="toctree-l4"><a class="reference internal" href="#application-trace-or-no-application-trace">APPLICATION-TRACE or NO-APPLICATION-TRACE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#calls-trace-or-no-calls-trace">CALLS-TRACE or NO-CALLS-TRACE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dispatch-trace-or-no-dispatch-trace">DISPATCH-TRACE or NO-DISPATCH-TRACE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#memory-trace-or-no-memory-trace">MEMORY-TRACE or NO-MEMORY-TRACE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id331">errlabel</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id332">count</a></li>
<li class="toctree-l4"><a class="reference internal" href="#number-n">(NUMBER,&#8217;n&#8217;)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pointer-to-number-n">(POINTER-TO-NUMBER,&#8217;n&#8217;)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stringz-cc-cc">(STRINGZ,&#8217;cc..cc&#8217;)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stringz-from-variable-varname">(STRINGZ-FROM-VARIABLE,&#8217;varname&#8217;)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#in-variable-varname-len">(IN-VARIABLE,&#8217;varname&#8217;,len)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#out-variable-varname-len">(OUT-VARIABLE,&#8217;varname&#8217;,len)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#y">%Y</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id333">%y</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id334">%d</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id335">%e</a></li>
<li class="toctree-l4"><a class="reference internal" href="#m">%m</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id336">%b</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tran-name">TRAN=&#8217;name&#8217;</a></li>
<li class="toctree-l4"><a class="reference internal" href="#suggestd">suggestD</a></li>
<li class="toctree-l4"><a class="reference internal" href="#suggestf">suggestF</a></li>
<li class="toctree-l4"><a class="reference internal" href="#suggestv">suggestV</a></li>
<li class="toctree-l4"><a class="reference internal" href="#table-name">TABLE=&#8217;name&#8217;</a></li>
<li class="toctree-l4"><a class="reference internal" href="#field-name">FIELD=&#8217;name&#8217;</a></li>
<li class="toctree-l4"><a class="reference internal" href="#screen-row-col">SCREEN=(row,col)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#qual-yourqual-virtnnn">QUAL=yourqual.VIRTnnn</a></li>
<li class="toctree-l4"><a class="reference internal" href="#copylib-your-cobol-srcelib">COPYLIB=your.cobol.srcelib</a></li>
<li class="toctree-l4"><a class="reference internal" href="#member-copybook">MEMBER=copybook</a></li>
<li class="toctree-l4"><a class="reference internal" href="#style-apost-quote">STYLE=APOST|QUOTE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#prefix-prefix">PREFIX=&#8217;prefix&#8217;</a></li>
<li class="toctree-l4"><a class="reference internal" href="#case-lower-upper">CASE=LOWER|UPPER</a></li>
<li class="toctree-l4"><a class="reference internal" href="#code-encoding">CODE=encoding</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id337">UTF-8</a></li>
<li class="toctree-l4"><a class="reference internal" href="#iso">ISO</a></li>
<li class="toctree-l4"><a class="reference internal" href="#enc-fieldname">&#8216;ENC=fieldname&#8217;</a></li>
<li class="toctree-l4"><a class="reference internal" href="#format-format">FORMAT=format</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id338">QUERY</a></li>
<li class="toctree-l4"><a class="reference internal" href="#xml">XML</a></li>
<li class="toctree-l4"><a class="reference internal" href="#xml-fieldname">&#8216;XML=fieldname&#8217;</a></li>
<li class="toctree-l4"><a class="reference internal" href="#com">COM</a></li>
<li class="toctree-l4"><a class="reference internal" href="#com-fieldname">&#8216;COM=fieldname&#8217;</a></li>
<li class="toctree-l4"><a class="reference internal" href="#var-commareaname">VAR=commareaname</a></li>
<li class="toctree-l4"><a class="reference internal" href="#for-format-com">For FORMAT=COM</a></li>
<li class="toctree-l4"><a class="reference internal" href="#xmlgen-yes-no">XMLGEN=YES|NO</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get">.GET</a></li>
<li class="toctree-l4"><a class="reference internal" href="#post">.POST</a></li>
<li class="toctree-l4"><a class="reference internal" href="#raw">.RAW</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id339">.END</a></li>
<li class="toctree-l4"><a class="reference internal" href="#eoj">.EOJ</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nnnn">nnnn</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cccc">cccc</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dd-dd">dd....dd</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsa1">VSA1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsa2">VSA2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsa3">VSA3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsa4">VSA4</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsv1">VSV1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vsv2">VSV2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id340">0</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id341">1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id342">2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id343">3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id344">0</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id345">1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id346">11</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id347">12</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id348">13</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id349">N</a></li>
<li class="toctree-l4"><a class="reference internal" href="#f">F</a></li>
<li class="toctree-l4"><a class="reference internal" href="#x-cd">X&#8217;CD&#8217;</a></li>
<li class="toctree-l4"><a class="reference internal" href="#s">S</a></li>
<li class="toctree-l4"><a class="reference internal" href="#t">T</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id350">C</a></li>
<li class="toctree-l4"><a class="reference internal" href="#h">H</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../newsletters.html">Technical Newsletters</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">Virtel</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../../virtel.html">Virtel Manuals</a> &raquo;</li>
      
    <li>Virtel 4.53 User Guide</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/manuals/virtel/Virtel453_Web_Access_User_Guide/Virtel453_Web_Access_User_Guide.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="virtel-4-53-user-guide">
<h1>Virtel 4.53 User Guide<a class="headerlink" href="#virtel-4-53-user-guide" title="Permalink to this headline">¶</a></h1>
<p><a class="reference internal" href="../../../_images/image18.jpeg"><img alt="image0" src="../../../_images/image18.jpeg" style="width: 8.26389in; height: 0.85000in;" /></a></p>
<p><a class="reference internal" href="../../../_images/image25.jpeg"><img alt="image1" src="../../../_images/image25.jpeg" style="width: 3.49562in; height: 1.01500in;" /></a></p>
<blockquote>
<div><p><strong>VIRTEL Web Access</strong></p>
<p>Version : 4.53</p>
<p>Release Date : 24 Sep 2014 Publication Date : 21/11/2014</p>
<p>Syspertec Communication</p>
<p>196, Bureaux de la Colline 92213 Saint-Cloud Cedex Tél. : +33 (0)1
46 02 60 42</p>
<p><a class="reference external" href="http://www.syspertec.com/">www.syspertec.com</a></p>
<p>NOTICE</p>
<p>Reproduction, transfer, distribution, or storage, in any form, of
all or any part of the contents of this document, except by prior
authorization of SysperTec Communication, is prohibited.</p>
<p>Every possible effort has been made by SysperTec Communication to
ensure that this document is complete and relevant. In no case can
SysperTec Communication be held responsible for any damages, direct
or indirect, caused by errors or omissions in this document.</p>
<p>As SysperTec Communication uses a continuous development
methodology; the information contained in this document may be
subject to change without notice. Nothing in this document should be
construed in any manner as conferring a right to use, in whole or in
part, the products or trademarks quoted herein.</p>
<p>&#8220;SysperTec Communication&#8221; and &#8220;VIRTEL&#8221; are registered trademarks.
Names of other products and companies mentioned in this document may
be trademarks or registered trademarks of their respective owners.</p>
<p><strong>Table of contents</strong></p>
<p><strong>1.</strong></p>
</div></blockquote>
<div class="section" id="id1">
<h2>1.1.<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>1.1.1.</em></p>
<p><em>1.1.2.</em></p>
<p><em>1.1.3.</em></p>
<p><em>1.1.4.</em></p>
</div></blockquote>
</div>
<div class="section" id="id2">
<h2>1.2.<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>1.2.1.</em></p>
<p><em>1.2.2.</em></p>
<p><em>1.2.3.</em></p>
<p><em>1.2.4.</em></p>
<p><em>1.2.5.</em></p>
<p><em>1.2.6.</em></p>
<p><em>1.2.7.</em></p>
<p><em>1.2.8.</em></p>
</div></blockquote>
</div>
<div class="section" id="id3">
<h2>1.3.<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>1.3.1.</em></p>
<p><em>1.3.2.</em></p>
<p><em>1.3.3.</em></p>
<p><em>1.3.4.</em></p>
<p><em>1.3.5.</em></p>
<p><em>1.3.6.</em></p>
<p><em>1.3.7.</em></p>
</div></blockquote>
</div>
<div class="section" id="id4">
<h2>1.4.<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>1.4.1.</em></p>
<p><em>1.4.2.</em></p>
<p><em>1.4.3.</em></p>
<p><em>1.4.4.</em></p>
<p><em>1.4.5.</em></p>
<p><em>1.4.6.</em></p>
<p><em>1.4.7.</em></p>
<p><em>1.4.8.</em></p>
<p><em>1.4.9.</em></p>
<p><em>1.4.10.</em></p>
<p><em>1.4.11.</em></p>
<p><em>1.4.12.</em></p>
<p><em>1.4.13.</em></p>
<p><em>1.4.14.</em></p>
<p><em>1.4.15.</em></p>
<p><em>1.4.16.</em></p>
<p><a class="reference external" href="#incoming-calls">**Incoming calls** **9**</a></p>
</div></blockquote>
</div>
<div class="section" id="introduction-9">
<h2><a class="reference external" href="#_bookmark2">Introduction 9</a><a class="headerlink" href="#introduction-9" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark3">*VIRTEL Web Access (VWA)* *9*</a></p>
<p><a class="reference external" href="#_bookmark4">*VIRTEL Web Modernisation (VWM)* *9*</a></p>
<p><a class="reference external" href="#_bookmark5">*VIRTEL Web Integration (VWI)* *10*</a></p>
<p><a class="reference external" href="#_bookmark6">*Service Transactions* *10*</a></p>
</div></blockquote>
</div>
<div class="section" id="virtel-url-formats-10">
<h2><a class="reference external" href="#_bookmark7">VIRTEL URL formats 10</a><a class="headerlink" href="#virtel-url-formats-10" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark8">*Static pages* *10*</a></p>
<p><a class="reference external" href="#_bookmark9">*How the path name corresponds to a VIRTEL directory*
*11*</a></p>
<p><a class="reference external" href="#_bookmark10">*Dynamic pages* *14*</a></p>
<p><a class="reference external" href="#_bookmark11">*3270 session management* *16*</a></p>
<p><a class="reference external" href="#_bookmark12">*Capability URLs* *18*</a></p>
<p><a class="reference external" href="#_bookmark13">*Transmission of upload cookie by URL* *19*</a></p>
<p><a class="reference external" href="#_bookmark14">*Propagation of signon by URL* *20*</a></p>
<p><a class="reference external" href="#_bookmark15">*The Universal Transaction* *20*</a></p>
</div></blockquote>
</div>
<div class="section" id="directory-management-20">
<h2><a class="reference external" href="#_bookmark16">Directory management 20</a><a class="headerlink" href="#directory-management-20" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark17">*Accessing the application* *20*</a></p>
<p><a class="reference external" href="#_bookmark18">*Security* *21*</a></p>
<p><a class="reference external" href="#_bookmark19">*Creating, modifying, and deleting directories*
*21*</a></p>
<p><a class="reference external" href="#_bookmark20">*Associated functions* *21*</a></p>
<p><a class="reference external" href="#_bookmark21">*Defining directory parameters* *22*</a></p>
<p><a class="reference external" href="#_bookmark22">*Directory contents management* *23*</a></p>
<p><a class="reference external" href="#_bookmark23">*Associated functions* *24*</a></p>
</div></blockquote>
</div>
<div class="section" id="creating-html-and-xml-template-pages-24">
<h2><a class="reference external" href="#_bookmark24">Creating HTML and XML template pages 24</a><a class="headerlink" href="#creating-html-and-xml-template-pages-24" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark25">*Introduction* *24*</a></p>
<p><a class="reference external" href="#_bookmark26">*Defining the tag delimiters* *25*</a></p>
<p><a class="reference external" href="#_bookmark27">*Session and context management* *25*</a></p>
<p><a class="reference external" href="#_bookmark29">*Transmitting data to the host* *26*</a></p>
<p><a class="reference external" href="#_bookmark30">*Where to position the elements of an HTML page*
*27*</a></p>
<p><a class="reference external" href="#_bookmark31">*Inserting host application data in a page* *28*</a></p>
<p><a class="reference external" href="#_bookmark36">*Colour and font management* *34*</a></p>
<p><a class="reference external" href="#_bookmark37">*Cursor management* *37*</a></p>
<p><a class="reference external" href="#_bookmark39">*Function key management* *39*</a></p>
<p><a class="reference external" href="#_bookmark41">*Setting and unsetting local options* *41*</a></p>
<p><a class="reference external" href="#_bookmark43">*Handling table variables* *43*</a></p>
<p><a class="reference external" href="#_bookmark45">*Inserting VIRTEL configuration values in a page*
*47*</a></p>
<p><a class="reference external" href="#_bookmark46">*Conditional generation* *49*</a></p>
<p><a class="reference external" href="#_bookmark47">*Debugging facilities* *51*</a></p>
<p><a class="reference external" href="#_bookmark49">*Signon and password management* *51*</a></p>
<p><a class="reference external" href="#_bookmark51">*Encryption management* *53*</a></p>
<p><em>1.4.17.</em></p>
<p><em>1.4.18.</em></p>
<p><em>1.4.19.</em></p>
<p><em>1.4.20.</em></p>
<p><em>1.4.21.</em></p>
<p><em>1.4.22.</em></p>
<p><em>1.4.23.</em></p>
<p><em>1.4.24.</em></p>
</div></blockquote>
</div>
<div class="section" id="id5">
<h2>1.5.<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>1.5.1.</em></p>
<p><em>1.5.2.</em></p>
<p><em>1.5.3.</em></p>
<p><em>1.5.4.</em></p>
<p><em>1.5.5.</em></p>
<p><em>1.5.6.</em></p>
<p><em>1.5.7.</em></p>
<p><em>1.5.8.</em></p>
</div></blockquote>
</div>
<div class="section" id="id6">
<h2>1.6.<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>1.6.1.</em></p>
<p><em>1.6.2.</em></p>
<p><em>1.6.3.</em></p>
<p><em>1.6.4.</em></p>
<p><em>1.6.5.</em></p>
<p><em>1.6.6.</em></p>
</div></blockquote>
</div>
<div class="section" id="id7">
<h2>1.7.<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>1.7.1.</em></p>
<p><em>1.7.2.</em></p>
<p><em>1.7.3.</em></p>
<p><em>1.7.4.</em></p>
<p><em>1.7.5.</em></p>
<p><em>1.7.6.</em></p>
<p><em>1.7.7.</em></p>
<p><em>1.7.8.</em></p>
</div></blockquote>
</div>
<div class="section" id="id8">
<h2>1.8.<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>1.8.1.</em></p>
<p><em>1.8.2.</em></p>
<p><em>1.8.3.</em></p>
<p><em>1.8.4.</em></p>
<p><em>1.8.5.</em></p>
</div></blockquote>
</div>
<div class="section" id="id9">
<h2>1.9.<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>1.9.1.</em></p>
<p><em>1.9.2.</em></p>
<p><em>1.9.3.</em></p>
<p><em>1.9.4.</em></p>
<p><em>1.9.5.</em></p>
<p><em>1.9.6.</em></p>
<p><em>1.9.7.</em></p>
<p><em>1.9.8.</em></p>
<p><em>1.9.9.</em></p>
</div></blockquote>
</div>
<div class="section" id="id10">
<h2>1.10.<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>1.10.1.</em></p>
<p><a class="reference external" href="#_bookmark53">*EBCDIC translation management* *55*</a></p>
<p><a class="reference external" href="#_bookmark56">*HTTP protocol management* *57*</a></p>
<p><a class="reference external" href="#_bookmark57">*Cache management* *57*</a></p>
<p><a class="reference external" href="#_bookmark58">*MIME type management* *58*</a></p>
<p><a class="reference external" href="#_bookmark59">*Capability tokens* *58*</a></p>
<p><a class="reference external" href="#_bookmark62">*Page upload* *60*</a></p>
<p><a class="reference external" href="#_bookmark63">*3287 printing* *60*</a></p>
<p><a class="reference external" href="#_bookmark65">*Generating PDF output* *61*</a></p>
</div></blockquote>
</div>
<div class="section" id="correspondent-management-63">
<h2><a class="reference external" href="#_bookmark67">Correspondent management 63</a><a class="headerlink" href="#correspondent-management-63" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark68">*Introduction* *63*</a></p>
<p><a class="reference external" href="#_bookmark69">*Access to the application* *64*</a></p>
<p><a class="reference external" href="#_bookmark70">*Security* *64*</a></p>
<p><a class="reference external" href="#_bookmark71">*Objectives* *64*</a></p>
<p><a class="reference external" href="#_bookmark72">*Contents of the fields* *65*</a></p>
<p><a class="reference external" href="#_bookmark73">*Account activation* *66*</a></p>
<p><a class="reference external" href="#_bookmark74">*Account deactivation* *66*</a></p>
<p><a class="reference external" href="#_bookmark75">*Access to associated rule set* *66*</a></p>
</div></blockquote>
</div>
<div class="section" id="uploading-html-pages-67">
<h2><a class="reference external" href="#_bookmark76">Uploading HTML pages 67</a><a class="headerlink" href="#uploading-html-pages-67" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark77">*Introduction* *67*</a></p>
<p><a class="reference external" href="#_bookmark78">*Uploading pages by SMTP* *67*</a></p>
<p><a class="reference external" href="#_bookmark79">*Uploading pages by HTTP (secured by cookie)*
*68*</a></p>
<p><a class="reference external" href="#_bookmark80">*Uploading pages by HTTP (secured by signon)*
*74*</a></p>
<p><a class="reference external" href="#_bookmark81">*Uploading pages by drag and drop* *79*</a></p>
<p><a class="reference external" href="#_bookmark82">*Uploading pages in batch* *81*</a></p>
</div></blockquote>
</div>
<div class="section" id="web-access-customization-84">
<h2><a class="reference external" href="#_bookmark83">Web Access customization 84</a><a class="headerlink" href="#web-access-customization-84" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark84">*Web Access Settings menu (Version 1)* *84*</a></p>
<p><a class="reference external" href="#_bookmark85">*Contents of the fields* *87*</a></p>
<p><a class="reference external" href="#_bookmark86">*Associated functions* *90*</a></p>
<p><a class="reference external" href="#_bookmark87">*Web Access Settings menu (Version 2)* *90*</a></p>
<p><a class="reference external" href="#_bookmark88">*Where user settings are stored* *97*</a></p>
<p><a class="reference external" href="#_bookmark89">*Global modification of Web Access settings* *98*</a></p>
<p><a class="reference external" href="#_bookmark90">*Choosing Web Access settings pattern* *100*</a></p>
<p><a class="reference external" href="#_bookmark91">*Hiding Web Access settings* *101*</a></p>
</div></blockquote>
</div>
<div class="section" id="application-selection-menu-101">
<h2><a class="reference external" href="#_bookmark92">Application selection menu 101</a><a class="headerlink" href="#application-selection-menu-101" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark93">*Contents of menu* *102*</a></p>
<p><a class="reference external" href="#_bookmark94">*Presentation modes* *102*</a></p>
<p><a class="reference external" href="#_bookmark95">*The appmenu.htm page* *103*</a></p>
<p><a class="reference external" href="#_bookmark96">*Definition of the applist transaction* *103*</a></p>
<p><a class="reference external" href="#_bookmark97">*Application menu as the default transaction for the entry point*
*104*</a></p>
</div></blockquote>
</div>
<div class="section" id="printing-with-web-access-104">
<h2><a class="reference external" href="#_bookmark98">Printing with Web Access 104</a><a class="headerlink" href="#printing-with-web-access-104" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark99">*VIRTEL definitions for virtual printers* *105*</a></p>
<p><a class="reference external" href="#_bookmark100">*Associating virtual printers with terminals*
*106*</a></p>
<p><a class="reference external" href="#_bookmark101">*Autoconnect for virtual printers* *106*</a></p>
<p><a class="reference external" href="#_bookmark102">*VTAM definitions for virtual printers* *107*</a></p>
<p><a class="reference external" href="#_bookmark103">*CICS definitions for virtual printers* *107*</a></p>
<p><a class="reference external" href="#_bookmark104">*Scenarios for SCS printing* *108*</a></p>
<p><a class="reference external" href="#_bookmark105">*SCS to PDF conversion* *108*</a></p>
<p><a class="reference external" href="#_bookmark106">*PCL printing* *108*</a></p>
<p><a class="reference external" href="#_bookmark107">*PCL-to-PDF conversion* *108*</a></p>
</div></blockquote>
</div>
<div class="section" id="tso-file-transfer-109">
<h2><a class="reference external" href="#_bookmark108">TSO file transfer 109</a><a class="headerlink" href="#tso-file-transfer-109" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark109">*Definitions required for file transfer* *109*</a></p>
<p><em>1.10.2.</em></p>
<p><em>1.10.3.</em></p>
<p><em>1.10.4.</em></p>
<p><em>1.10.5.</em></p>
<p><em>1.10.6.</em></p>
</div></blockquote>
</div>
<div class="section" id="id11">
<h2>1.11.<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>1.11.1.</em></p>
<p><em>1.11.2.</em></p>
</div></blockquote>
</div>
<div class="section" id="id12">
<h2>1.12.<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>1.12.1.</em></p>
<p><em>1.12.2.</em></p>
<p><em>1.12.3.</em></p>
<p><em>1.12.4.</em></p>
<p><em>1.12.5.</em></p>
<p><em>1.12.6.</em></p>
<p><em>1.12.7.</em></p>
<p><em>1.12.8.</em></p>
<p><em>1.12.9.</em></p>
<p><a class="reference external" href="#_bookmark110">*Toolbar icons for file transfer* *110*</a></p>
<p><a class="reference external" href="#_bookmark111">*Receiving a file* *110*</a></p>
<p><a class="reference external" href="#_bookmark112">*Sending a file* *112*</a></p>
<p><a class="reference external" href="#_bookmark113">*Selecting PC Codepage for file transfer* *115*</a></p>
<p><a class="reference external" href="#_bookmark114">*Saving and reusing file transfer parameters*
*115*</a></p>
</div></blockquote>
</div>
<div class="section" id="accessing-vtam-applications-116">
<h2><a class="reference external" href="#_bookmark115">Accessing VTAM applications 116</a><a class="headerlink" href="#accessing-vtam-applications-116" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark116">*VTAM logon screen* *117*</a></p>
<p><a class="reference external" href="#_bookmark117">*Installing the VTAM logon transaction* *117*</a></p>
</div></blockquote>
</div>
<div class="section" id="site-customization-of-colors-and-logo-118">
<h2><a class="reference external" href="#_bookmark118">Site customization of colors and logo 118</a><a class="headerlink" href="#site-customization-of-colors-and-logo-118" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark119">*VIRTEL definitions required* *118*</a></p>
<p><a class="reference external" href="#_bookmark120">*Example: Customizing the toolbar color by application*
*119*</a></p>
<p><a class="reference external" href="#_bookmark121">*Example: Adding custom text to the toolbar*
*119*</a></p>
<p><a class="reference external" href="#_bookmark122">*Example: Showing / Hiding server informations*
*120*</a></p>
<p><a class="reference external" href="#_bookmark123">*Example: Hiding the toolbar* *120*</a></p>
<p><a class="reference external" href="#_bookmark124">*Example: Modifying the 3270 colors* *121*</a></p>
<p><a class="reference external" href="#_bookmark125">*Example: Adding a company logo* *121*</a></p>
<p><a class="reference external" href="#_bookmark126">*Example: Removing 3D/hover effects on the toolbar buttons*
*122*</a></p>
<p><a class="reference external" href="#_bookmark127">*Example: Changing background color of the toolbar buttons*
*122*</a></p>
<p><em>1.12.10.</em> <a class="reference external" href="#_bookmark128">*Icon display troubleshooting* *123*</a></p>
</div></blockquote>
</div>
<div class="section" id="id13">
<h2>1.13.<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>1.13.1.</em></p>
<p><em>1.13.2.</em></p>
<p><em>1.13.3.</em></p>
<p><em>1.13.4.</em></p>
<p><em>1.13.5.</em></p>
<p><em>1.13.6.</em></p>
<p><em>1.13.7.</em></p>
</div></blockquote>
</div>
<div class="section" id="id14">
<h2>1.14.<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>1.14.1.</em></p>
<p><em>1.14.2.</em></p>
</div></blockquote>
</div>
<div class="section" id="id15">
<h2>1.15.<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>1.15.1.</em></p>
<p><em>1.15.2.</em></p>
<p><em>1.15.3.</em></p>
</div></blockquote>
</div>
<div class="section" id="id16">
<h2>1.16.<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>1.16.1.</em></p>
<p><em>1.16.2.</em></p>
</div></blockquote>
</div>
<div class="section" id="id17">
<h2>1.17.<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>1.17.1.</em></p>
<p><em>1.17.2.</em></p>
<p><em>1.17.3.</em></p>
<p><em>1.17.4.</em></p>
<p><em>1.17.5.</em></p>
<p><em>1.17.6.</em></p>
<p><em>1.17.7.</em></p>
<p><em>1.17.8.</em></p>
<p><em>1.17.9.</em></p>
</div></blockquote>
</div>
<div class="section" id="site-customization-of-javascript-functions-123">
<h2><a class="reference external" href="#_bookmark129">Site customization of Javascript functions 123</a><a class="headerlink" href="#site-customization-of-javascript-functions-123" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark130">*Exits which can be coded in custom.js* *123*</a></p>
<p><a class="reference external" href="#_bookmark131">*Example: Customizing the toolbar icons* *124*</a></p>
<p><a class="reference external" href="#_bookmark132">*Example: Removing unwanted toolbar icons* *126*</a></p>
<p><a class="reference external" href="#_bookmark133">*Example: Modifying the text of the status bar*
*126*</a></p>
<p><a class="reference external" href="#_bookmark134">*Example: Custom hotspot recognition* *126*</a></p>
<p><a class="reference external" href="#_bookmark135">*Example: Adding a watermark to the 3270 screen*
*127*</a></p>
<p><a class="reference external" href="#_bookmark136">*Example: Modifying Web Access Settings* *128*</a></p>
</div></blockquote>
</div>
<div class="section" id="customizing-the-help-page-128">
<h2><a class="reference external" href="#_bookmark137">Customizing the help page 128</a><a class="headerlink" href="#customizing-the-help-page-128" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark138">*Standard help page* *129*</a></p>
<p><a class="reference external" href="#_bookmark139">*Installing a custom help page* *129*</a></p>
</div></blockquote>
</div>
<div class="section" id="allow-copy-cut-and-paste-130">
<h2><a class="reference external" href="#_bookmark140">Allow copy, cut and paste 130</a><a class="headerlink" href="#allow-copy-cut-and-paste-130" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark141">*Additional module requirements* *130*</a></p>
<p><a class="reference external" href="#_bookmark142">*Additional module requirements* *131*</a></p>
<p><a class="reference external" href="#_bookmark143">*Operational audit* *137*</a></p>
</div></blockquote>
</div>
<div class="section" id="macros-138">
<h2><a class="reference external" href="#_bookmark144">Macros 138</a><a class="headerlink" href="#macros-138" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark145">*Macros in Local Storage* *138*</a></p>
<p><a class="reference external" href="#_bookmark146">*Macros in Virtel Storage* *139*</a></p>
</div></blockquote>
</div>
<div class="section" id="virtel-web-modernisation-142">
<h2><a class="reference external" href="#_bookmark147">VIRTEL Web Modernisation 142</a><a class="headerlink" href="#virtel-web-modernisation-142" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark148">*VIRTEL Scenarios* *142*</a></p>
<p><a class="reference external" href="#_bookmark149">*Scenarios stored in a load library* *143*</a></p>
<p><a class="reference external" href="#_bookmark150">*Scenarios stored in a VSAM directory* *143*</a></p>
<p><a class="reference external" href="#_bookmark151">*Using a presentation module* *143*</a></p>
<p><a class="reference external" href="#_bookmark152">*Types of scenario* *143*</a></p>
<p><a class="reference external" href="#_bookmark153">*VIRTEL Multi-Session scenarios* *145*</a></p>
<p><a class="reference external" href="#_bookmark154">*SCREENS instruction* *145*</a></p>
<p><a class="reference external" href="#_bookmark155">*SCRNEND instruction* *145*</a></p>
<p><a class="reference external" href="#_bookmark156">*SCENARIO instruction* *145*</a></p>
</div></blockquote>
<ol class="arabic simple" start="10">
<li><a class="reference external" href="#_bookmark157">*ACTION$ instruction* *146*</a></li>
<li><a class="reference external" href="#_bookmark158">*ACTION$ DISCONNECT* *146*</a></li>
<li><a class="reference external" href="#_bookmark159">*ACTION$ SERVE-ANOTHER-USER* *146*</a></li>
<li><a class="reference external" href="#_bookmark160">*ACTION$ TERMSESS* *146*</a></li>
<li><a class="reference external" href="#_bookmark161">*ACTION$ TO-APPLICATION* *147*</a></li>
<li><a class="reference external" href="#_bookmark162">*ACTION$ TO-TERMINAL* *149*</a></li>
<li><a class="reference external" href="#_bookmark163">*CASE$ instruction* *149*</a></li>
<li><a class="reference external" href="#_bookmark164">*CONVERT$ instruction* *150*</a></li>
<li><a class="reference external" href="#_bookmark165">*COPY$ instruction* *151*</a></li>
<li><a class="reference external" href="#_bookmark166">*COPY$ FIELD-NAME-TO-VARIABLE* *151*</a></li>
<li><a class="reference external" href="#_bookmark167">*COPY$ INPUT-FILE-TO-VARIABLE* *151*</a></li>
<li><a class="reference external" href="#_bookmark168">*COPY$ INPUT-TO-SCREEN* *152*</a></li>
<li><a class="reference external" href="#_bookmark169">*COPY$ INPUT-TO-VARIABLE* *152*</a></li>
<li><a class="reference external" href="#_bookmark170">*COPY$ LIST-TO-VARIABLE* *153*</a></li>
<li><a class="reference external" href="#_bookmark171">*COPY$ OUTPUT-FILE-TO-VARIABLE* *153*</a></li>
<li><a class="reference external" href="#_bookmark172">*COPY$ SCREEN-TO-VARIABLE* *154*</a></li>
<li><a class="reference external" href="#_bookmark173">*COPY$ SYSTEM-TO-VARIABLE* *154*</a></li>
<li><a class="reference external" href="#_bookmark174">*COPY$ VALUE-TO-VARIABLE* *159*</a></li>
<li><a class="reference external" href="#_bookmark175">*COPY$ VALUE-TO-SCREEN* *160*</a></li>
<li><a class="reference external" href="#_bookmark176">*COPY$ VARIABLE-TO-SCREEN* *160*</a></li>
<li><a class="reference external" href="#_bookmark177">*COPY$ VARIABLE-TO-SYSTEM* *161*</a></li>
<li><a class="reference external" href="#_bookmark178">*DEBUG$ instruction* *162*</a></li>
<li><a class="reference external" href="#_bookmark179">*DECLARE$ instruction* *163*</a></li>
<li><a class="reference external" href="#_bookmark181">*ERROR$ instruction* *165*</a></li>
<li><a class="reference external" href="#_bookmark182">*FIELD$ instruction* *165*</a></li>
<li><a class="reference external" href="#_bookmark183">*FIELD$ DEFINE-CHOICE* *166*</a></li>
<li><a class="reference external" href="#_bookmark184">*FIELD$ DEFINE-VARIABLE-CHOICE* *166*</a></li>
<li><a class="reference external" href="#_bookmark185">*FIELD$ IS-BINARY-CHOICE* *167*</a></li>
<li><a class="reference external" href="#_bookmark186">*FIELD$ HIDE* *167*</a></li>
<li><a class="reference external" href="#_bookmark187">*FILTER$ instruction* *167*</a></li>
<li><a class="reference external" href="#_bookmark188">*FILTER$ VARIABLE-TO-VARIABLE* *167*</a></li>
<li><a class="reference external" href="#_bookmark189">*GOTO$ instruction* *168*</a></li>
<li><a class="reference external" href="#_bookmark190">*HANDLE$ instruction* *168*</a></li>
<li><a class="reference external" href="#_bookmark191">*HANDLE$ ABEND instruction* *168*</a></li>
<li><a class="reference external" href="#_bookmark192">*HANDLE$ LOOP instruction* *168*</a></li>
<li><a class="reference external" href="#_bookmark193">*IF$ instruction* *169*</a></li>
<li><a class="reference external" href="#_bookmark194">*INDSCEN$ instruction* *170*</a></li>
<li><a class="reference external" href="#_bookmark195">*LABEL$ instruction* *170*</a></li>
<li><a class="reference external" href="#_bookmark196">*MAP$ instruction* *171*</a></li>
<li><a class="reference external" href="#_bookmark197">*MAP$ ABEND* *171*</a></li>
<li><a class="reference external" href="#_bookmark198">*MAP$ ABEND-AT* *172*</a></li>
<li><a class="reference external" href="#_bookmark199">*MAP$ AREA* *172*</a></li>
<li><a class="reference external" href="#_bookmark200">*MAP$ AREA-ATTRIBUTE* *174*</a></li>
<li><a class="reference external" href="#_bookmark201">*MAP$ BEGIN* *175*</a></li>
<li><a class="reference external" href="#_bookmark202">*MAP$ END* *176*</a></li>
<li><a class="reference external" href="#_bookmark203">*MAP$ EVENTUAL-AREA, MAP$ ELSETHEN-AREA* *176*</a></li>
<li><a class="reference external" href="#_bookmark204">*MAP$ EXECUTE* *177*</a></li>
<li><a class="reference external" href="#_bookmark205">*MAP$ FROM-FIELD* *178*</a></li>
<li><a class="reference external" href="#_bookmark206">*MAP$ FROM-INPUT* *179*</a></li>
<li><a class="reference external" href="#_bookmark207">*MAP$ FROM-VARIABLE* *179*</a></li>
<li><a class="reference external" href="#_bookmark208">*MAP$ TO-VARIABLE* *180*</a></li>
<li><a class="reference external" href="#_bookmark209">*OPTION$ instruction* *180*</a></li>
<li><a class="reference external" href="#_bookmark210">*OPTION$ FOR-HTTP* *180*</a></li>
<li><a class="reference external" href="#_bookmark211">*OPTION$ FOR-IND$FILE* *181*</a></li>
<li><a class="reference external" href="#_bookmark212">*OPTION$ FOR-MQ* *183*</a></li>
<li><a class="reference external" href="#_bookmark213">*OPTION$ FOR-SMTP* *183*</a></li>
<li><a class="reference external" href="#_bookmark214">*PERFORM$ instruction* *185*</a></li>
<li><a class="reference external" href="#_bookmark215">*POP$ instruction* *186*</a></li>
<li><a class="reference external" href="#_bookmark216">*RETURN$ instruction* *186*</a></li>
<li><a class="reference external" href="#_bookmark217">*SEND$ instruction* *186*</a></li>
<li><a class="reference external" href="#_bookmark218">*SEND$ AS-ANSWER* *186*</a></li>
<li><a class="reference external" href="#_bookmark219">*SEND$ AS-FILE* *187*</a></li>
<li><a class="reference external" href="#_bookmark220">*SEND$ TO* *187*</a></li>
<li><a class="reference external" href="#_bookmark221">*SEND$ TO-LINE* *188*</a></li>
<li><a class="reference external" href="#_bookmark222">*SEND$ VARIABLE-TO* *188*</a></li>
<li><a class="reference external" href="#_bookmark223">*SEND$ VARIABLE-TO-LINE* *188*</a></li>
<li><a class="reference external" href="#_bookmark224">*SET$ instruction* *189*</a></li>
<li><a class="reference external" href="#_bookmark225">*SET$ ENCODING* *189*</a></li>
<li><a class="reference external" href="#_bookmark226">*SET$ PAGE* *190*</a></li>
<li><a class="reference external" href="#_bookmark227">*SET$ PAGE-FROM-VARIABLE* *190*</a></li>
<li><a class="reference external" href="#_bookmark228">*SET$ PRIORITY* *190*</a></li>
<li><a class="reference external" href="#_bookmark229">*SET$ SIGNON* *191*</a></li>
<li><a class="reference external" href="#_bookmark230">*SET$ TEMPORARY-PAGE* *191*</a></li>
<li><a class="reference external" href="#_bookmark231">*SET$ TRANSACTION* *191*</a></li>
<li><a class="reference external" href="#_bookmark232">*SET$ URL-ENCODING* *191*</a></li>
<li><a class="reference external" href="#_bookmark233">*TOVAR$ instruction* *192*</a></li>
<li><a class="reference external" href="#_bookmark234">*TOVAR$ FROM-FIELD* *192*</a></li>
<li><a class="reference external" href="#_bookmark235">*TOVAR$ FROM-INPUT* *192*</a></li>
<li><a class="reference external" href="#_bookmark236">*TOVAR$ FROM-VARIABLE* *193*</a></li>
<li><a class="reference external" href="#_bookmark237">*VIRSV$ instruction* *193*</a></li>
<li><a class="reference external" href="#_bookmark238">*Examples of VIRTEL Web Modernisation Scenarios*
*195*</a></li>
</ol>
</div>
<div class="section" id="id18">
<h2>1.18.<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>1.18.1.</em></p>
<p><em>1.18.2.</em></p>
<p><em>1.18.3.</em></p>
<p><em>1.18.4.</em></p>
<p><em>1.18.5.</em></p>
<p><em>1.18.6.</em></p>
</div></blockquote>
</div>
<div class="section" id="id19">
<h2>1.19.<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>1.19.1.</em></p>
<p><em>1.19.2.</em></p>
<p><em>1.19.3.</em></p>
</div></blockquote>
</div>
<div class="section" id="id20">
<h2>1.20.<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>1.20.1.</em></p>
<p><em>1.20.2.</em></p>
<p><em>1.20.3.</em></p>
<p><strong>2.</strong></p>
</div></blockquote>
</div>
<div class="section" id="id21">
<h2>2.1.<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><strong>3.</strong></div></blockquote>
</div>
<div class="section" id="id22">
<h2>3.1.<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><strong>3.2.</strong></p>
<p><em>3.2.1.</em></p>
<p><em>3.2.2.</em></p>
<p><em>3.2.3.</em></p>
</div></blockquote>
</div>
<div class="section" id="virtel-web-integration-203">
<h2><a class="reference external" href="#_bookmark240">VIRTEL Web Integration 203</a><a class="headerlink" href="#virtel-web-integration-203" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark241">*Introduction* *203*</a></p>
<p><a class="reference external" href="#_bookmark242">*Parsing Query input* *203*</a></p>
<p><a class="reference external" href="#_bookmark243">*Parsing XML input* *205*</a></p>
<p><a class="reference external" href="#_bookmark246">*Presentation of XML output* *210*</a></p>
<p><a class="reference external" href="#_bookmark247">*VIRTEL as an XML parser/generator* *212*</a></p>
<p><a class="reference external" href="#_bookmark248">*Automatic scenario generation* *216*</a></p>
</div></blockquote>
</div>
<div class="section" id="incoming-e-mails-218">
<h2><a class="reference external" href="#_bookmark249">Incoming E-mails 218</a><a class="headerlink" href="#incoming-e-mails-218" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark250">*Rules of the SMTP line* *218*</a></p>
<p><a class="reference external" href="#_bookmark251">*File transfer by e-mail* *219*</a></p>
<p><a class="reference external" href="#_bookmark252">*Starting an application by e-mail* *220*</a></p>
</div></blockquote>
</div>
<div class="section" id="virtel-batch-221">
<h2><a class="reference external" href="#_bookmark253">VIRTEL Batch 221</a><a class="headerlink" href="#virtel-batch-221" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark254">*VIRTEL Batch* *221*</a></p>
<p><a class="reference external" href="#_bookmark255">*VIRTEL Batch commands* *225*</a></p>
<p><a class="reference external" href="#_bookmark256">*VIRTEL Batch return codes* *227*</a></p>
<p><a class="reference external" href="#outgoing-calls">**Outgoing Calls** **228**</a></p>
</div></blockquote>
</div>
<div class="section" id="outgoing-e-mails-228">
<h2><a class="reference external" href="#_bookmark258">Outgoing E-mails 228</a><a class="headerlink" href="#outgoing-e-mails-228" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><a class="reference external" href="#programming-interfaces">**Programming Interfaces** **229**</a></div></blockquote>
</div>
<div class="section" id="introduction-229">
<h2><a class="reference external" href="#_bookmark260">Introduction 229</a><a class="headerlink" href="#introduction-229" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="structured-fields-229">
<h2><a class="reference external" href="#_bookmark261">Structured fields 229</a><a class="headerlink" href="#structured-fields-229" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark262">*General format of a 3270 structured field*
*229*</a></p>
<p><a class="reference external" href="#_bookmark263">*Sending structured fields via the Write Structured Field command*
*230*</a></p>
<p><a class="reference external" href="#_bookmark264">*Sending structured fields using the SRTVIRTEL prefix*
*230*</a></p>
</div></blockquote>
</div>
<div class="section" id="id23">
<h2>3.3.<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>3.3.1.</em></p>
<p><em>3.3.2.</em></p>
<p><em>3.3.3.</em></p>
</div></blockquote>
</div>
<div class="section" id="id24">
<h2>3.4.<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>3.4.1.</em></p>
<p><em>3.4.2.</em></p>
<p><em>3.4.3.</em></p>
<p><em>3.4.4.</em></p>
<p><em>3.4.5.</em></p>
</div></blockquote>
</div>
<div class="section" id="id25">
<h2>3.5.<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>3.5.1.</em></p>
<p><em>3.5.2.</em></p>
<p><strong>4.</strong></p>
</div></blockquote>
</div>
<div class="section" id="id26">
<h2>4.1.<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><strong>4.2.</strong></p>
<p><em>4.2.1.</em></p>
<p><em>4.2.2.</em></p>
<p><em>4.2.3.</em></p>
<p><em>4.2.4.</em></p>
<p><em>4.2.5.</em></p>
<p><em>4.2.6.</em></p>
<p><em>4.2.7.</em></p>
<p><em>4.2.8.</em></p>
<p><em>4.2.9.</em></p>
<p><strong>5.</strong></p>
</div></blockquote>
</div>
<div class="section" id="id27">
<h2>5.1.<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>5.1.1.</em></p>
<p><em>5.1.2.</em></p>
<p><em>5.1.3.</em></p>
<p><em>5.1.4.</em></p>
</div></blockquote>
</div>
<div class="section" id="id28">
<h2>5.2.<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><strong>5.3.</strong></p>
<p><em>5.3.1.</em></p>
<p><em>5.3.2.</em></p>
<p><em>5.3.3.</em></p>
</div></blockquote>
</div>
<div class="section" id="id29">
<h2>5.4.<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>5.4.1.</em></p>
<p><em>5.4.2.</em></p>
</div></blockquote>
</div>
<div class="section" id="id30">
<h2>5.5.<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><strong>5.6.</strong></p>
<p><strong>5.7.</strong></p>
<p><strong>5.8.</strong></p>
<p><strong>5.9.</strong></p>
<p><strong>5.10.</strong></p>
</div></blockquote>
</div>
<div class="section" id="how-to-determine-if-running-under-virtel-231">
<h2><a class="reference external" href="#_bookmark265">How to determine if running under VIRTEL 231</a><a class="headerlink" href="#how-to-determine-if-running-under-virtel-231" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark266">*Use a different transaction code* *231*</a></p>
<p><a class="reference external" href="#_bookmark267">*Include parameters after the transaction code*
*232*</a></p>
<p><a class="reference external" href="#_bookmark268">*Use a specific range of terminal names* *232*</a></p>
</div></blockquote>
</div>
<div class="section" id="virtel-web-integration-233">
<h2><a class="reference external" href="#_bookmark269">VIRTEL Web Integration 233</a><a class="headerlink" href="#virtel-web-integration-233" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark270">*FA88: Transmit large data message to application*
*233*</a></p>
<p><a class="reference external" href="#_bookmark271">*FAC8: Selection of page template* *234*</a></p>
<p><a class="reference external" href="#_bookmark272">*FAE5, FAE6: Sending a table variable* *236*</a></p>
<p><a class="reference external" href="#_bookmark273">*Call Interface* *237*</a></p>
<p><a class="reference external" href="#_bookmark274">*HOST4WEB commands* *244*</a></p>
</div></blockquote>
</div>
<div class="section" id="mail-247">
<h2><a class="reference external" href="#_bookmark275">mail 247</a><a class="headerlink" href="#mail-247" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark276">*FAC8: Retrieve data from an e-mail* *247*</a></p>
<p><a class="reference external" href="#_bookmark277">*FAD4: Sending an e-mail from a host application*
*250*</a></p>
<p><a class="reference external" href="#security">**Security** **253**</a></p>
</div></blockquote>
</div>
<div class="section" id="virtel-web-access-security-253">
<h2><a class="reference external" href="#_bookmark279">VIRTEL Web Access Security 253</a><a class="headerlink" href="#virtel-web-access-security-253" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="technical-characteristics-253">
<h2><a class="reference external" href="#_bookmark280">Technical characteristics 253</a><a class="headerlink" href="#technical-characteristics-253" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark281">*Specifying security in the entry point* *253*</a></p>
<p><a class="reference external" href="#_bookmark282">*Specifying security in the transaction* *254*</a></p>
<p><a class="reference external" href="#_bookmark283">*Mixed-case password support* *254*</a></p>
<p><a class="reference external" href="#_bookmark284">*Automatic retrieval of username* *254*</a></p>
<p><a class="reference external" href="#_bookmark285">*Data encryption by SSL* *255*</a></p>
<p><a class="reference external" href="#_bookmark286">*Identification by certificate* *255*</a></p>
<p><a class="reference external" href="#_bookmark287">*Password encryption* *255*</a></p>
<p><a class="reference external" href="#_bookmark288">*Signon using HTML fields* *255*</a></p>
<p><a class="reference external" href="#_bookmark289">*Security by rule* *257*</a></p>
<p><a class="reference external" href="#howtos">**HOWTOs** **260**</a></p>
</div></blockquote>
</div>
<div class="section" id="how-to-use-different-screen-sizes-260">
<h2><a class="reference external" href="#_bookmark291">How to use different screen sizes 260</a><a class="headerlink" href="#how-to-use-different-screen-sizes-260" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark292">*LOGMODE defined by the transaction* *260*</a></p>
<p><a class="reference external" href="#_bookmark293">*Assigning a LOGMODE by URL parameter* *261*</a></p>
<p><a class="reference external" href="#_bookmark294">*User-specified LOGMODE* *262*</a></p>
<p><a class="reference external" href="#_bookmark295">*Dynamic logmode with user-specified screen size*
*262*</a></p>
</div></blockquote>
</div>
<div class="section" id="how-to-override-the-codepage-by-url-parameter-263">
<h2><a class="reference external" href="#_bookmark296">How to override the codepage by URL parameter 263</a><a class="headerlink" href="#how-to-override-the-codepage-by-url-parameter-263" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="how-to-handle-host-session-termination-263">
<h2><a class="reference external" href="#_bookmark297">How to handle host session termination 263</a><a class="headerlink" href="#how-to-handle-host-session-termination-263" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark298">*Return to the application selection menu* *263*</a></p>
<p><a class="reference external" href="#_bookmark299">*Displaying a specific page on disconnection*
*263*</a></p>
<p><a class="reference external" href="#_bookmark300">*Closing the browser window automatically* *264*</a></p>
</div></blockquote>
</div>
<div class="section" id="how-to-access-a-host-application-directly-264">
<h2><a class="reference external" href="#_bookmark301">How to access a host application directly 264</a><a class="headerlink" href="#how-to-access-a-host-application-directly-264" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><a class="reference external" href="#_bookmark302">*Full path URL* *264*</a></p>
<p><a class="reference external" href="#_bookmark303">*Default URL for the entry point* *265*</a></p>
</div></blockquote>
</div>
<div class="section" id="how-to-change-the-font-for-web-access-266">
<h2><a class="reference external" href="#_bookmark304">How to change the font for Web Access 266</a><a class="headerlink" href="#how-to-change-the-font-for-web-access-266" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="how-to-customize-the-enter-key-settings-266">
<h2><a class="reference external" href="#_bookmark305">How to customize the Enter key settings 266</a><a class="headerlink" href="#how-to-customize-the-enter-key-settings-266" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="how-to-change-the-default-user-settings-267">
<h2><a class="reference external" href="#_bookmark306">How to change the default user settings 267</a><a class="headerlink" href="#how-to-change-the-default-user-settings-267" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="how-to-change-the-user-settings-interface-267">
<h2><a class="reference external" href="#_bookmark307">How to change the user settings interface 267</a><a class="headerlink" href="#how-to-change-the-user-settings-interface-267" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="how-to-define-a-reverse-proxy-267">
<h2><a class="reference external" href="#_bookmark308">How to define a reverse proxy 267</a><a class="headerlink" href="#how-to-define-a-reverse-proxy-267" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="how-to-support-virtual-hosting-267">
<h2><a class="reference external" href="#_bookmark309">How to support virtual hosting 267</a><a class="headerlink" href="#how-to-support-virtual-hosting-267" title="Permalink to this headline">¶</a></h2>
<div class="section" id="incoming-calls">
<h3>Incoming calls<a class="headerlink" href="#incoming-calls" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>VIRTEL Web Access, formerly known as “Web-to-Host” (W2H), is a set
of functions which enable information produced by host applications
to be presented in an Internet browser.</p>
<p>The principle of operation of this program relies on the production
of HTML pages stored in a directory at the host site containing
standard tags and also tags specific to VIRTEL. Invoked by a browser
or a program, these pages form the basis of translation “on the fly”
of the specific tags, thus enabling the dynamic generation of pages
sent to the browser. The VWA model also includes functions which
allow dynamic modification of the presentation of the 3270 screens
in an HTML page, with the aim of making the interface as “clickable”
as possible. This chapter describes the set of functions required to
support this function and presupposes a certain knowledge of the
development of HTML pages.</p>
<p>Some fundamental principles must be taken into consideration:</p>
</div></blockquote>
<ol class="arabic">
<li><p class="first">Sessions between a browser and an HTTP server are in disconnected
mode, while they are in connected mode between VIRTEL and the host
application.</p>
</li>
<li><p class="first">The flow of information between an HTTP server and a client’s browser
always occurs on the initiative of the client.</p>
</li>
<li><p class="first">A single request from the browser will only invoke a single response
from the HTTP server, while the transmission of a message to an
application on the host may generate several response messages at
once (for example, a message to clear the screen followed by a new
screen image).</p>
<blockquote>
<div><p>These differences give rise to a need to ensure maintenance of
session context between a client and a host application. This is
done by the SESSION-CODE tag embedded in each template page.</p>
<p>Although the HTML pages used to display 3270 data contain specific
VIRTEL tags, these pages can be developed using standard web
development tools. The pages containing VIRTEL specific tags are
stored in a VIRTEL directory along with any images and other
elements required.</p>
<p>VIRTEL Web Modernisation, formerly known as “Host-Web-Services”
(HWS), allows the presentation of host applications to be modified,
without modifying the application itself. The presentation can be
adapted to a format (HTML, XML, Excel, etc) suited to the requester,
while hiding the details of navigation within the 3270 transactions.</p>
<p>This function is implemented through a combination of the VIRTEL Web
Access functions described in <a class="reference external" href="#_bookmark25">“Creating HTML</a> <a class="reference external" href="#_bookmark25">and
XML templates”, page 24</a> and the “scenario
language” described in <a class="reference external" href="#_bookmark148">“Web Modernisation VIRTEL
Scenarios”,</a></p>
<p><a class="reference external" href="#_bookmark148">page 142</a>.</p>
<p>VIRTEL Web Modernisation allows “frozen” or “untouchable” 3270
transactions to be accessed by intermediate servers (n-tier
architecture) or from a browser, while hiding the details of
navigation within the transactions. Variable input data for the
transaction can either be included in the URL (GET method), or sent
as data with the HTTP request (POST method).</p>
<p>The objective of VIRTEL Web Integration, formerly known as
“Host-for-Web” (H4W), is to allow a host application to take maximum
control of its web interface. This is in complete contrast to
VWA/VWM, whose objective is to avoid modification of host
applications.</p>
<p>To control its web interface, an application has at its disposal
primarily the 3270 screen, the VIRTEL table variable facility, the
HTML page template, and a set of VIRTEL commands contained in
structured fields. Additionally, for browser requests which enter
VIRTEL using an entry point which specifies emulation type
“HOST4WEB”, the application can also use a set of VIRTEL control
commands which can be embedded in the 3270 screen via a BMS map,
ISPF panel, or 3270 datastream. These HOST4WEB commands, available
from VIRTEL version 4.28 onwards, provide the same general functions
as the structured field commands in earlier versions.</p>
<p>Table variables, structured field commands, and HOST4WEB commands,
are sent by the application to the 3270 session using standard
methods (EXEC CICS SEND, ISPEXEC DISPLAY PANEL, TSO TPUT, etc).
VIRTEL intercepts and acts upon these commands, for example by
selecting the page template or loading data which can be referenced
by VIRTEL orders embedded in the page templates and used to build
lists of values or data tables.</p>
<p>For more information, refer to the chapte<a class="reference external" href="#_bookmark260">r “Programming
Interfaces”, page 229</a>.</p>
<p>A Service Transaction is a long-running VIRTEL transaction which
maintains a session with a host application and uses this session to
serve a series of HTTP request / responses. Unlike a regular HTTP
transaction, which serves requests only from its originating user,
identified by a specific VIRTEL SESSION-CODE, a service transaction
can serve a different user each time it processes an HTTP request.
Service transactions are typically used to provide fast access to
public information such as the lists of field values displayed by
the “VIRTEL Suggest” feature.</p>
<p>A service transaction is started by an HTTP URL in exactly the same
way as a regular transaction, but when it has finished processing
its first HTTP request, it indicates its readiness to serve another
user, either by means of the script command &amp;) described under the
heading “Transactions — Connection / Disconnection Scripts” in the
VIRTEL Connectivity Reference documentation, or by means of the
<a class="reference external" href="#_bookmark159">“ACTION$ SERVE-ANOTHER-USER”, page 146</a> command
in a scenario.</p>
<p>A service transaction remains connected to the host application
between input messages. It is then eligible to process any HTTP
request which specifies the same entry point and transaction name.
Since service transactions can potentially be used by many different
users, a typical service transaction will provide information which
is not sensitive to being signed-on as a particular user.</p>
<p>The general form of the URL for an HTML page stored in a VIRTEL
directory is:</p>
</div></blockquote>
</li>
</ol>
</div>
</div>
<div class="section" id="ipaddr-port">
<h2>ipaddr:port<a class="headerlink" href="#ipaddr-port" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>corresponds to the “Local ident” field of an HTTP line defined to
VIRTEL. The rules of the line are used to select the entry point.
This entry point, which must specify emulation type HTML, contains
the list of transactions which the user is authorized to invoke.</div></blockquote>
</div>
<div class="section" id="pathname">
<h2>pathname<a class="headerlink" href="#pathname" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>represents a VIRTEL directory containing HTML pages or other
elements. Refer to the section <a class="reference external" href="#_bookmark9">“How the path name</a>
<a class="reference external" href="#_bookmark9">corresponds to a VIRTEL directory”, page 11</a> below
for details of how the pathname is used to select the VIRTEL
directory.</div></blockquote>
</div>
<div class="section" id="pagename">
<h2>pagename<a class="headerlink" href="#pagename" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>is the name of an element (HTML page, etc.) in the specified
directory. VIRTEL converts the element name to upper case (unless
“case sensitive” is specified in the directory definition), and
truncates the name if necessary to the maximum length specified in
the directory definition (se`e “Directory Management”, page
20 &lt;#_bookmark16&gt;`__).</p>
<p>VIRTEL also accepts certain abbreviated forms of the URL:</p>
</div></blockquote>
</div>
<div class="section" id="id31">
<h2>ipaddr:port<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the address of the HTTP line, as before.</div></blockquote>
</div>
<div class="section" id="id32">
<h2>pathname<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>represents a VIRTEL directory, as described above. In this case,
VIRTEL loads a default page from this directory. The default page
name is the same as the entry point name. Note: the trailing slash
is compulsory.</div></blockquote>
</div>
<div class="section" id="id33">
<h2>ipaddr:port<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the address of the HTTP line, as before.</div></blockquote>
</div>
<div class="section" id="id34">
<h2>pagename<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the name of a page to be loaded from the default directory. The
default directory corresponds to a default pathname equal to the
entry point name.</div></blockquote>
</div>
<div class="section" id="id35">
<h2>ipaddr:port<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>is the address of the HTTP line, as before.</p>
<p>In this case, VIRTEL loads the default URL. VIRTEL obtains the
default URL from the “TIOA at logon” field of the default
transaction. The default transaction is a type 4 transaction which
has the same name as the entry point. See example 7 below for an
example of a default URL. If the “TIOA at logon” field of the
default transaction is blank, then VIRTEL loads the default page
from the default directory. The default page has the same name as
the entry point, and the default directory corresponds to a default
pathname equal to the entry point name.</p>
<p>The pathname specified in a VIRTEL URL is used to select a VIRTEL
directory which contains HTML page templates and other elements such
as CSS stylesheets, JavaScript procedures, and GIF or JPEG images.
VIRTEL directories have a simple 8-character case-insensitive name,
whereas the pathname is expressed in Unix-style syntax (one or more
case-</p>
<p>sensitive components separated by slashes), as is conventional for
web applications. VIRTEL must therefore translate the Unix-style
pathname into a VIRTEL directory name.</p>
<p>The process of mapping a pathname to a VIRTEL directory name is
carried out by means of VIRTEL transactions which are defined under
the entry point selected for each request by the rules of the HTTP
line. The entry point contains both processing transactions
(application types 1, 2, and 3) and directory transactions
(application type 4).</p>
<p>To find the directory which corresponds to the pathname, VIRTEL
looks for a type 4 transaction whose external name matches the first
component of the pathname, and whose “Check URL prefix” field is
either blank or matches the start of the pathname. The name of the
VIRTEL directory is contained in the “Application name” field of the
first such matching transaction found under the entry point.</p>
<p>Notes:</p>
</div></blockquote>
<ul>
<li><p class="first">The comparison of the first component of the pathname with the
transaction external name is case insensitive, and if the first
component of the pathname is longer than 8 characters, only the first
8 characters are compared.</p>
</li>
<li><p class="first">The comparison of the beginning of the pathname against the
transaction’s “Check URL prefix” field is case sensitive.</p>
</li>
<li><p class="first">The “Check URL prefix” field may contain “%20” to represent a blank
and “?” to ignore a character position.</p>
</li>
<li><p class="first">If the “Check URL prefix” field is completely blank it is considered
to match any pathname whose first component matches the transaction
external name.</p>
<blockquote>
<div><p>Assume that entry point WEB2HOST contains the following
transactions:</p>
</div></blockquote>
</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="16%" />
<col width="56%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">W2H-04</th>
<th class="head">home</th>
<th class="head">User directory (URL prefix /home/user1)</th>
<th class="head">USER1DIR</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>W2H-05</td>
<td>home</td>
<td>User directory (URL prefix /home/user2)</td>
<td>USER2DIR</td>
</tr>
<tr class="row-odd"><td>W2H-06</td>
<td>IMAGES</td>
<td>All /images directories (URL prefix blank)</td>
<td>W2H-DIR</td>
</tr>
<tr class="row-even"><td>W2H-10</td>
<td>cics</td>
<td>CICS application</td>
<td>DBDCCICS</td>
</tr>
<tr class="row-odd"><td>W2H-20</td>
<td>tso</td>
<td>TSO application</td>
<td>TSO</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p><em>Transactions under entry point WEB2HOST</em></p>
<p>In this example, transactions W2H-00, W2H-04, W2H-05, and W2H-06 are
“application type 4” (directory transactions). Transactions W2H-10
and W2H-20 are “application type 1” (processing transactions) and
play no part in the directory selection process.</p>
<p>The figure below shows an example of the detail of a directory
transaction:</p>
</div></blockquote>
<blockquote>
<div><p><em>Example of a directory transaction</em></p>
<p>The pathname defaults to the entry point name, WEB2HOST, which
matches transaction W2H-00. The pagename also defaults to WEB2HOST.
VIRTEL therefore fetches page WEB2HOST from the directory W2H-DIR.</p>
<p>The pathname defaults to the entry point name, WEB2HOST, which
matches transaction W2H-00. VIRTEL therefore fetches page menu.htm
from the directory W2H-DIR.</p>
<p>The pathname /home/user1 matches transaction W2H-04. The pagename
defaults to the entry point name, WEB2HOST. VIRTEL therefore fetches
page WEB2HOST from the directory USER1DIR.</p>
<p>The pathname /home/user2 matches transaction W2H-05. VIRTEL
therefore fetches page index.html from the directory USER2DIR.</p>
<p><a class="reference external" href="http://ipaddr:port/home/user3/index.html">http://ipaddr:port/home/user3/index.html</a></p>
<p>In this case the pathname /home/user3 does not match any
transaction. VIRTEL therefore rejects the request.</p>
<p>The pathname /images/misc is not specifically defined to VIRTEL.
However there is a transaction W2H-06 whose external name is IMAGES
and whose “Check URL prefix” field is blank, which matches all
pathnames whose first component is /images. VIRTEL therefore fetches
the page square.gif from the directory W2H-DIR.</p>
<p>When a user connects to a VIRTEL line without specifying either
pathname or pagename, as in the example below, the entry point may
be configured to redirect the request to a default URL:</p>
<p>A default URL may be specified in the transaction whose external
name is the same as the entry point name. In the example type 4
transaction W2H-00 shown below, the default URL for the entry point
WEB2HOST is /w2h/ WEB2VIRT.htm+Cics and thus the URL
<a class="reference external" href="http://ipaddr:port">http://ipaddr:port</a> is processed by VIRTEL as if
<a class="reference external" href="http://ipaddr:port/w2h/">http://ipaddr:port/w2h/</a> WEB2VIRT.htm+Cics had been specified.</p>
<p><em>Example of a default transaction with default URL</em></p>
<p>The general form of the URL for a VIRTEL Web Access, VIRTEL Web
Integration, or VIRTEL Web Modernisation transaction is:</p>
</div></blockquote>
</div>
<div class="section" id="id36">
<h2>ipaddr:port<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the address of the HTTP line, as before.</div></blockquote>
</div>
<div class="section" id="id37">
<h2>pathname<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>represents a VIRTEL directory, as described earlier.</div></blockquote>
</div>
<div class="section" id="id38">
<h2>pagename<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the name of an element (HTML or XML) in the specified directory.
This name may be converted to upper case and truncated to the
maximum length defined in the directory definition, as previously
described. This element is used as the “template page” into which
VIRTEL inserts dynamic data.</div></blockquote>
</div>
<div class="section" id="tranname">
<h2>tranname<a class="headerlink" href="#tranname" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>is the external name of a transaction defined under the entry point.
The application program (which may be a CICS transaction or other
VTAM application, a VIRTEL sub-application, or an external server)
invoked by this transaction provides the dynamic data which VIRTEL
inserts into the template page.</p>
<p>A second form of URL allows user data to be passed to VIRTEL:</p>
</div></blockquote>
</div>
<div class="section" id="id39">
<h2>ipaddr:port<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the address of the HTTP line, as before.</div></blockquote>
</div>
<div class="section" id="id40">
<h2>pathname<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>represents a VIRTEL directory, as described earlier.</div></blockquote>
</div>
<div class="section" id="id41">
<h2>pagename<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the name of a template page, as before.</div></blockquote>
</div>
<div class="section" id="id42">
<h2>tranname<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the name of the transaction which provides the dynamic data for
the template page.</div></blockquote>
</div>
<div class="section" id="userdata">
<h2>userdata<a class="headerlink" href="#userdata" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>is a character string which can be tested by the “User Data” field
in the rules of the HTTP line (see “Rules” in the VIRTEL
Connectivity Reference documentation). This allows the administrator
to assign an entry point to the request based upon the contents of
the userdata in the URL. The userdata also becomes the value of the
“routing parameter” associated with the tranname transaction. The
routing parameter can be referenced by the variable &amp;1 in the “TIOA
at logon” field of the tranname transaction (see “Defining
transaction parameters” in the VIRTEL Connectivity Reference
documentation). Additionally, if the rule which is selected
specifies “$URL$” in its “Parameter” field, and if the HTTP terminal
relays are defined in a logical pool (see “HTTP Terminals” under the
heading “Definition of an HTTP line” in the VIRTEL Connectivity
Reference documentation), then the routing parameter is used by
VIRTEL to select a relay LU for the tranname transaction.</p>
<p>A third form of URL allows one or more parameters to be passed to a
transaction by means of an “Input Scenario” or by a “Connection /
Disconnection Script”:</p>
</div></blockquote>
</div>
<div class="section" id="id43">
<h2>ipaddr:port<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the address of the HTTP line, as before.</div></blockquote>
</div>
<div class="section" id="id44">
<h2>pathname<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>represents a VIRTEL directory, as described earlier.</div></blockquote>
</div>
<div class="section" id="id45">
<h2>pagename<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the name of a template page, as before.</div></blockquote>
</div>
<div class="section" id="id46">
<h2>tranname<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the name of the transaction which provides the dynamic data for
the template page. This transaction must be defined with the name of
a presentation module in its “Output Scenario” field.</div></blockquote>
</div>
<div class="section" id="param1-param2">
<h2>param1, param2, ...<a class="headerlink" href="#param1-param2" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>are the names of the parameters which the scenario can pick up using
the COPY$ INPUT-TO-VARIABLE or COPY$ INPUT-TO-SCREEN instructions
(described 153) or which can be substituted in a script by means of
the &amp;=paramn= system variable (see “Transactions – Connection /
Disconnection Scripts” in the VIRTEL Connectivity Reference
documentation. The cumulative length of the URL parameters is
limited by the BUFSIZE parameter of the VIRTCT. If blanks or other
special characters are required in the parameter value, then the
special characters must be coded in the standard URL escape format
%xx where xx is the hexadecimal value of the character in ASCII. For
example, a blank is represented as %20.</p>
<p>A URL may contain both userdata and query parameters, as shown in
the following example. The various components of the URL have the
same meaning as described in the preceding two sections.</p>
<p>Once a session has been established with the host 3270 application,
the template page allows the user to link to the next screen in the
3270 application dialog by means of a URL in the following format:</p>
</div></blockquote>
</div>
<div class="section" id="id47">
<h2>ipaddr:port<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the address of the HTTP line, as before.</div></blockquote>
</div>
<div class="section" id="id48">
<h2>pathname<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>represents a VIRTEL directory, as described earlier.</div></blockquote>
</div>
<div class="section" id="id49">
<h2>pagename<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the name of the template page to be used for displaying the next
3270 screen (usually the same as the current template page).</div></blockquote>
</div>
<div class="section" id="sessionid">
<h2>sessionid<a class="headerlink" href="#sessionid" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>is a VIRTEL-generated code which allows VIRTEL to identify the user
as being already connected to an existing host session. The
parameter VirtelSession=sessionid is inserted by the
{{{SESSION-CODE}}} tag embedded in the template page (se`e “Session
And Context Management”, page 25 &lt;#_bookmark28&gt;`__).</p>
<p>A second form of the URL with SESSION-CODE allows display of print
data sent by the application to the virtual printer associated with
the specified session. Normally this URL will be embedded in a
template page and will be triggered by the {{{IF-PRINT-IS-READY}}}
tag.</p>
</div></blockquote>
</div>
<div class="section" id="id50">
<h2>ipaddr:port<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the address of the HTTP line, as before.</div></blockquote>
</div>
<div class="section" id="id51">
<h2>pathname<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>represents a VIRTEL directory, as described earlier.</div></blockquote>
</div>
<div class="section" id="id52">
<h2>pagename<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>is the name of the template page to be used for displaying the print
data. This page must contain the special</p>
<p>{{{PRINT}}} tag (se`e “3287 Printing”, page 60 &lt;#_bookmark64&gt;`__) at
the point at which the print data are to be inserted in the page.</p>
</div></blockquote>
</div>
<div class="section" id="id53">
<h2>sessionid<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>is a code which allows VIRTEL to identify the printer associated
with the user’s 3270 session. The parameter
PrintVirtelSession=sessionid (where sessionid is the associated 3270
session identifier), is generated by the</p>
<p>{{{SESSION-CODE}}} tag as in the following example:</p>
<p>imprim.htm++Print{{{SESSION-CODE}}}</p>
<p>A third form of URL with SESSION-CODE allows a JavaScript procedure
embedded in a template page to determine whether there are pending
updates to the 3270 screen image. For this type of URL, VIRTEL
returns no data, only an HTTP response code. The possible response
codes are:</p>
</div></blockquote>
</div>
<div class="section" id="reset-content">
<h2>205 (Reset Content)<a class="headerlink" href="#reset-content" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the host application has updated the 3270 screen image since the
last time it was sent to the user</div></blockquote>
</div>
<div class="section" id="not-modified">
<h2>304 (Not Modified)<a class="headerlink" href="#not-modified" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the host application has not updated the 3270 screen image</div></blockquote>
</div>
<div class="section" id="not-found">
<h2>404 (Not Found)<a class="headerlink" href="#not-found" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>the sessionid code does not represent a valid host session</p>
<p>When response code 205 is indicated, the JavaScript procedure sends
a further request to VIRTEL to retrieve the updated 3270 screen
image. This technique can be useful in handling host applications
which use multiple 3270 write commands to paint a single 3270
screen, where the user might otherwise be presented with a partially
updated screen. An example of this technique is contained in the
WEB2VIRT.htm page delivered in the VIRTEL sample directory W2H-DIR.</p>
</div></blockquote>
</div>
<div class="section" id="id54">
<h2>ipaddr:port<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the address of the HTTP line, as before.</div></blockquote>
</div>
<div class="section" id="id55">
<h2>pathname<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>represents a VIRTEL directory, as described earlier.</div></blockquote>
</div>
<div class="section" id="id56">
<h2>pagename<a class="headerlink" href="#id56" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>may be specified but is not used.</div></blockquote>
</div>
<div class="section" id="id57">
<h2>sessionid<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>is a code which allows VIRTEL to identify the 3270 session whose
status is being queried. The parameter
ValidateVirtelSession=sessionid (where sessionid is the associated
3270 session identifier), is generated by the</p>
<p>{{{SESSION-CODE}}} tag as in the following example:</p>
<p>check.htm++Validate{{{SESSION-CODE}}}</p>
<p>For compatability with previous versions, the keyword
VerifyVirtelSession is also accepted. VerifyVirtelSession is similar
to ValidateVirtelSession except that it produces only two possible
return codes: 205 (screen updated) and 304 (screen not updated or
session invalid).</p>
<p>As an alternative to specifying the VirtelSession parameter in the
URL, the SESSION-CODE may be sent to VIRTEL in a cookie. An example
URL is shown below:</p>
</div></blockquote>
</div>
<div class="section" id="id58">
<h2>ipaddr:port<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the address of the HTTP line, as before.</div></blockquote>
</div>
<div class="section" id="id59">
<h2>pathname<a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>represents a VIRTEL directory, as described earlier.</div></blockquote>
</div>
<div class="section" id="id60">
<h2>pagename<a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the name of the template page to be used for displaying the next
3270 screen (usually the same as the current template page).</div></blockquote>
</div>
<div class="section" id="usecookiesession">
<h2>$UseCookieSession$<a class="headerlink" href="#usecookiesession" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>indicates that the SESSION-CODE is contained in the VirtelSession
cookie.</p>
<p>The VirtelSession cookie should be generated by Javascript as shown
in the example below. This function may be added to the custom.js
script (se`e “Site customization of Javascript functions”, page
123 &lt;#_bookmark129&gt;`__):</p>
<p><em>Custom Javascript function to generate a VirtelSession cookie</em></p>
<p>A URL may contain a “capability token” generated by another
terminal. In this case the URL inherits certain rights or
capabilities conferred by the other terminal. The capabilities
inherited depend on the parameters specified in the SET- HEADER tag
which generated the capability token. For further details, se<a class="reference external" href="#_bookmark60">e
“Capability Tokens”, page 58</a>.</p>
</div></blockquote>
</div>
<div class="section" id="id61">
<h2>ipaddr:port<a class="headerlink" href="#id61" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the address of the HTTP line, as before.</div></blockquote>
</div>
<div class="section" id="id62">
<h2>pathname<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>represents a VIRTEL directory, as described earlier.</div></blockquote>
</div>
<div class="section" id="id63">
<h2>pagename<a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the name of a template page, as before.</div></blockquote>
</div>
<div class="section" id="id64">
<h2>tranname<a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(optional) is the name of the transaction which supplies the dynamic
data for the page. If the transaction name is omitted then two “+”
signs must separate the pagename from the capabilitytoken</div></blockquote>
</div>
<div class="section" id="capability">
<h2>capability<a class="headerlink" href="#capability" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>token is a token which grants rights to another terminal’s
resources. This code, whose format is x-Virtel-name:token, is
generated by the <a class="reference external" href="#_bookmark61">“{{{SET-HEADER}}}”, page 59</a> tag.
The code is case-sensitive and so the capitalization must be exactly
the same as the generated token.</p>
<p>The security code, which identifies a user during page upload by
HTTP, is normally transmitted between the browser and VIRTEL as a
cookie (se`e “Uploading HTML Pages”, page 67 &lt;#_bookmark77&gt;`__). If,
for security or other reasons, your browser does not allow the use
of cookies, then the security code can, as an alternative, be
embedded in a URL of the form shown below:</p>
</div></blockquote>
</div>
<div class="section" id="id65">
<h2>ipaddr:port<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the address of the HTTP line, as before.</div></blockquote>
</div>
<div class="section" id="id66">
<h2>pathname<a class="headerlink" href="#id66" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>represents a VIRTEL directory, as described earlier.</div></blockquote>
</div>
<div class="section" id="id67">
<h2>pagename<a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the name of a template page, as before.</div></blockquote>
</div>
<div class="section" id="id68">
<h2>tranname<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the name of the transaction which supplies the dynamic data for
the page.</div></blockquote>
</div>
<div class="section" id="securitycode">
<h2>securitycode<a class="headerlink" href="#securitycode" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>is the code which allows VIRTEL to identify the user. This code,
whose format is VirtelCookie=xxxxxxxxxxxxxxxx, is generated by the
{{{SECURITY-TOKEN}}} tag, as shown in the example below:</p>
<p>upload2.htm+upload+VirtelCookie={{{SECURITY-TOKEN}}}</p>
<p>The following format allows a static page to be displayed:</p>
</div></blockquote>
</div>
<div class="section" id="id69">
<h2>ipaddr:port<a class="headerlink" href="#id69" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the address of the HTTP line, as before.</div></blockquote>
</div>
<div class="section" id="id70">
<h2>pathname<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>represents a VIRTEL directory, as described earlier.</div></blockquote>
</div>
<div class="section" id="id71">
<h2>pagename<a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the name of the page.</div></blockquote>
</div>
<div class="section" id="id72">
<h2>securitycode<a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>is a code of format VirtelCookie=xxxxxxxxxxxxxxxx which allows
VIRTEL to identify the user, as before.</p>
<p>On receipt of this URL, VIRTEL treats the VirtelCookie= parameter as
if it were a cookie transmitted by the browser.</p>
<p>A URL embedded in a page sent by VIRTEL may contain a
VirtelUserSignon parameter in order to propagate the user’s signon
credentials to another page. The value of the parameter is generated
by the {{{USER-SIGNON-CODE}}} tag, described 63. This can be useful
in cases where the browser does not propagate the user name and
password from one page to another, for example when using VIRTEL
transaction security type 4. The format of a URL containing a signon
code is shown below:</p>
</div></blockquote>
</div>
<div class="section" id="id73">
<h2>ipaddr:port<a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the address of the HTTP line, as before.</div></blockquote>
</div>
<div class="section" id="id74">
<h2>pathname<a class="headerlink" href="#id74" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>represents a VIRTEL directory, as described earlier.</div></blockquote>
</div>
<div class="section" id="id75">
<h2>pagename<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the name of a template page, as before.</div></blockquote>
</div>
<div class="section" id="id76">
<h2>tranname<a class="headerlink" href="#id76" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the name of the transaction which supplies the dynamic data for
the page.</div></blockquote>
</div>
<div class="section" id="signoncode">
<h2>signoncode<a class="headerlink" href="#signoncode" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>is a code which allows VIRTEL to identify the signed-on user. This
code is generated by the {{{USER-SIGNON-CODE}}} tag, as shown in the
example below:</p>
<p><a class="reference external" href="http://web2virt">http://web2virt</a>.htm+cics+VirtelUserSignon={{{USER-SIGNON-CODE}}}</p>
<p>A transaction may be defined with an external name consisting of an
asterisk, and this is considered to be a “universal” transaction. A
universal transaction matches any URL not already matched by a
preceding transaction in the entry point. This allows VIRTEL to
process URLs whose format does not conform to the classic VIRTEL
formats previously described.</p>
<p>HTML and XML template pages and other entities such as CSS
stylesheets, JavaScript procedures, and GIF or JPEG images used by
VIRTEL Web Access are stored in directories within a VSAM KSDS
managed by VIRTEL. Each KSDS defined to VIRTEL can contain one or
more directories. The system administrator can upload pages and
other elements into a VIRTEL directory by using a web browser or by
e-mail, as described in detail in the section <a class="reference external" href="#_bookmark77">“Uploading
HTML</a> <a class="reference external" href="#_bookmark77">Pages”, page 67</a>.</p>
<p>The directory management sub-application allows the administrator to
define directories. The sub-application is accessible by [PF6] from
the configuration menu, or by [PF12] from the system services menu
followed by option 3, or from the VIRTEL Multi-Session menu via a
transaction which invokes VIRTEL module VIR0042.</p>
<p>If security is active, access to the directory management
sub-application from the configuration menu or the system services
menu is controlled by resource $$PCPC$$.</p>
<p>When invoked via a transaction, normal transaction security rules
apply.</p>
<p>In addition, each directory is protected by a resource whose name is
the same as the directory name. The administrator must have access
to this resource in order to view or manage the contents of the
directory, or to upload pages to the directory. When an external
security product is used, the resource is defined in the class named
by the RNODE parameter in the VIRTCT (see “Parameters of the VIRTCT”
in the VIRTEL Installation Guide).</p>
<p>Security management is described in the Virtel Security
documentation.</p>
<p>When the directory management sub-application is invoked, it
displays a list of the directories already defined in the system:</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="30%" />
<col width="27%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">P1=Update</th>
<th class="head">P2=Delete</th>
<th class="head">P3=Return</th>
<th class="head">P4=List</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>P6=First page</td>
<td>P7=Previous</td>
<td>P8=Next</td>
<td>P12=Add</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p><em>Directory management summary screen</em></p>
<p>To delete a directory definition, place the cursor on the name of
the directory to be deleted and press [PF2]. The message CONFIRM
DELETE appears at the bottom of the screen. Press [PF2] again. The
message DELETE OK indicates that the deletion of the directory
definition was successful. While the message CONFIRM DELETE is
displayed, you can press any function key other than [PF2] to cancel
the operation.</p>
<p>To display the contents of a directory, place the cursor on the
directory name and press [PF4]. VIRTEL displays the directory
contents management screen described below.</p>
<p>To create a new directory definition, place the cursor on the blank
line after the last directory, and press [PF12] to display an empty
directory detail screen. Fill in all of the fields and press
[ENTER]. The message CREATION OK indicates that the directory
definition was successfully created.</p>
<p>To scroll to the top of the list, press [PF6]. To scroll up or down
the list, press [PF7] or [PF8].</p>
<p>To return to the configuration menu, press [PF3].</p>
<p>To access the detail screen for any directory, place the cursor on
the directory name and press [PF12]:</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="28%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Copy up</th>
<th class="head">===&gt; X</th>
<th class="head">upload a file</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Copy down</td>
<td>===&gt; X</td>
<td>download a file</td>
</tr>
<tr class="row-odd"><td>Delete</td>
<td>===&gt; X</td>
<td>delete a file</td>
</tr>
</tbody>
</table>
<blockquote>
<div><em>Directory management detail screen</em></div></blockquote>
</div>
<div class="section" id="name">
<h2>Name<a class="headerlink" href="#name" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The name of the directory as known by VIRTEL. If security is active,
this name must also be defined as a resource to which the user must
be authorized.</div></blockquote>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Comment associated with the directory.</div></blockquote>
</div>
<div class="section" id="type">
<h2>Type<a class="headerlink" href="#type" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><strong>V</strong> (or blank) indicates that the directory is held in a VSAM
KSDS.</div></blockquote>
</div>
<div class="section" id="dd-name">
<h2>DD name<a class="headerlink" href="#dd-name" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The file name of the VSAM KSDS which contains the directory. This
name must be defined in one of the UFILEn parameters in the VIRTCT,
and a DD statement with the same name must appear in the VIRTEL
started task JCL.</div></blockquote>
</div>
<div class="section" id="keyword">
<h2>Keyword<a class="headerlink" href="#keyword" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>This is an 8-byte key which allows multiple directories to be stored
within a single VSAM KSDS. Each directory in a KSDS must have a
unique key.</div></blockquote>
</div>
<div class="section" id="size-of-names">
<h2>Size of names<a class="headerlink" href="#size-of-names" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The maximum length of the names of HTML pages and other elements
stored in this directory. The minimum (and default) value is 8. The
maximum value is 64.</div></blockquote>
</div>
<div class="section" id="case">
<h2>Case<a class="headerlink" href="#case" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Any non-blank character in this field indicates that the element
names stored in this directory are case sensitive. Blank indicates
that the names are not case sensitive.</div></blockquote>
</div>
<div class="section" id="copy-up">
<h2>Copy up<a class="headerlink" href="#copy-up" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>This field is used by VIRTEL/PC. For VIRTEL Web Access directories,
the value <strong>X</strong> must be coded.</div></blockquote>
</div>
<div class="section" id="copy-down">
<h2>Copy down<a class="headerlink" href="#copy-down" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>This field is used by VIRTEL/PC. For VIRTEL Web Access directories,
the value <strong>X</strong> must be coded.</div></blockquote>
</div>
<div class="section" id="delete">
<h2>Delete<a class="headerlink" href="#delete" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>This field is used by VIRTEL/PC. For VIRTEL Web Access directories,
the value <strong>X</strong> must be coded.</p>
<p>After pressing [PF4] at the directory management summary screen or
detail screen, VIRTEL displays a list of the files in the directory:</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="44%" />
<col width="11%" />
<col width="16%" />
<col width="16%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">DIRECTORY</th>
<th class="head"><p class="first">: W2H-DIR [1] 55 FILE(S)&#8212;&#8212;&#8212;&#8212;</p>
<p class="last">Pages for WEB2HOST [2]</p>
</th>
<th class="head">Applid:</th>
<th class="head">SPVIRH2</th>
<th class="head">10:50:31</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Name</td>
<td>&#160;</td>
<td>Size</td>
<td>Date</td>
<td>Time</td>
</tr>
<tr class="row-odd"><td>WEBSERV0</td>
<td>&#160;</td>
<td>5572</td>
<td>20050208</td>
<td>15:52:23</td>
</tr>
<tr class="row-even"><td>ES.GIF</td>
<td>&#160;</td>
<td>517</td>
<td>20050208</td>
<td>15:51:35</td>
</tr>
<tr class="row-odd"><td>CALENDAR</td>
<td>&#160;</td>
<td>K 53</td>
<td>20050208</td>
<td>15:51:25</td>
</tr>
<tr class="row-even"><td>FAVICON.</td>
<td>&#160;</td>
<td>2998</td>
<td>20050208</td>
<td>15:51:36</td>
</tr>
<tr class="row-odd"><td>NOIR.GIF</td>
<td>&#160;</td>
<td>161</td>
<td>20050208</td>
<td>15:51:48</td>
</tr>
<tr class="row-even"><td>TXTSERV2</td>
<td>&#160;</td>
<td>K 15</td>
<td>20050208</td>
<td>15:52:05</td>
</tr>
<tr class="row-odd"><td>STYLNOIR</td>
<td>&#160;</td>
<td>2709</td>
<td>20050208</td>
<td>15:51:56</td>
</tr>
<tr class="row-even"><td>CAL-EN.J</td>
<td>&#160;</td>
<td>3830</td>
<td>20050208</td>
<td>15:51:24</td>
</tr>
<tr class="row-odd"><td>BLUE.GIF</td>
<td>&#160;</td>
<td>161</td>
<td>20050208</td>
<td>15:51:23</td>
</tr>
<tr class="row-even"><td>WEB2PLUG</td>
<td>&#160;</td>
<td>6370</td>
<td>20050208</td>
<td>15:52:21</td>
</tr>
<tr class="row-odd"><td>VERT.GIF</td>
<td>&#160;</td>
<td>161</td>
<td>20050208</td>
<td>15:52:12</td>
</tr>
<tr class="row-even"><td>RED.GIF</td>
<td>&#160;</td>
<td>161</td>
<td>20050208</td>
<td>15:51:50</td>
</tr>
<tr class="row-odd"><td>IMPRIM.H</td>
<td>&#160;</td>
<td>826</td>
<td>20050208</td>
<td>15:51:40</td>
</tr>
<tr class="row-even"><td>VIRLOAD.</td>
<td>&#160;</td>
<td>1346</td>
<td>20050208</td>
<td>15:52:13</td>
</tr>
<tr class="row-odd"><td>VIRTNOIR</td>
<td>&#160;</td>
<td>3737</td>
<td>20050208</td>
<td>15:52:16</td>
</tr>
<tr class="row-even"><td>[3]</td>
<td>&#160;</td>
<td>[4]</td>
<td>[5]</td>
<td>[6]</td>
</tr>
</tbody>
</table>
<blockquote>
<div><em>Directory contents management screen</em></div></blockquote>
</div>
<div class="section" id="id77">
<h2>[1]<a class="headerlink" href="#id77" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Name of directory.</div></blockquote>
</div>
<div class="section" id="id78">
<h2>[2]<a class="headerlink" href="#id78" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Directory description.</div></blockquote>
</div>
<div class="section" id="id79">
<h2>[3]<a class="headerlink" href="#id79" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Name of elements contained in the directory.</div></blockquote>
</div>
<div class="section" id="id80">
<h2>[4]<a class="headerlink" href="#id80" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Approximate size of element (K indicates that the size is displayed
in kilo-bytes).</div></blockquote>
</div>
<div class="section" id="id81">
<h2>[5]<a class="headerlink" href="#id81" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Date when element was loaded into the directory.</div></blockquote>
</div>
<div class="section" id="id82">
<h2>[6]<a class="headerlink" href="#id82" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Time when element was loaded into the directory.</div></blockquote>
</div>
<div class="section" id="id83">
<h2>[7]<a class="headerlink" href="#id83" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Name of target directory for file copy.</p>
<p>To delete an element from a directory, place the cursor on the name
of the element to be deleted and press [PF2]. The message CONFIRM
DELETE appears at the bottom of the screen. Press [PF2] again. The
message DELETE OK indicates that the deletion of the element was
successful. While the message CONFIRM DELETE is displayed, you can
press any function key other than [PF2] to cancel the operation.</p>
<p>To copy an element from directory A to directory B, first display
the contents of directory A. In field [7] type the name of the
target directory B, then press [ENTER]. Next, place the cursor on
the name of the element to be copied, then press [PF6]. The message
COPY COMPLETED indicates that the operation was successful. If the
element exists in the target directory, the copy fails and the
message THIS FILE IS ALREADY IN THE TARGET DIRECTORY is displayed at
the bottom of the screen.</p>
<p>The list of elements can be scrolled up and down using [PF7] and
[PF8].</p>
<p>To return to the list of directories, press [PF3].</p>
<p>Template pages are the means by which VIRTEL presents host
application data to the user via a web browser. In addition to
standard HTML or XML tags, template pages contain VIRTEL-specific
tags enabling integration of</p>
<p>information delivered by the mainframe application programs. HTML
template pages may contain GIF or JPEG images, sounds, scripts such
as JavaScript or any other function or program elements that are
compatible with the browser.</p>
<p>Template pages may be produced either by hand or by using standard
HTML or XML design tools available on the market,</p>
<p>VIRTEL-specific tags are used to insert data originating at the host
into an HTML or XML page, and to manage colours and function keys in
an HTML page. VIRTEL-specific tags are identified by special begin
and end delimiters.</p>
<p>The delimiters themselves are defined by means of a comment placed
between the tags &lt;HEAD&gt; and &lt;/HEAD&gt; of the HTML page. The actual
delimiters may vary from one page to another.</p>
<p>In this example, VIRTEL-specific tags are defined as being
represented by a succession of 3 opening braces and terminated by a
succession of 3 closing braces. This convention is maintained
throughout the remainder of this chapter.</p>
<p>VIRTEL uses the concept of a sessioncode to maintain the context
between a client using a browser and the host application to which
the client is connected. This code allows VIRTEL to identify the
client and to associate the client with a session already
established with a host application.</p>
<p>The SESSION-CODE tag is used to create the URL associated with form
submission.</p>
<p>The SESSION-CODE tag allows a sessioncode to be inserted in the
template page in the format VirtelSession=xxxxxxxxxxxxxxxx. The
value of the sessioncode changes after each message. For examples of
its use, see <a class="reference external" href="#_bookmark29">“Transmitting Data To The Host”, page
26</a>, and <a class="reference external" href="#_bookmark64">“3287 Printing”, page
60</a>.</p>
<p>The AJAX-SESSION-CODE tag is similar to the SESSION-CODE tag, but it
generates the code in a different format which does not change with
each request. This is useful when implementing an AJAX dialog
between the application and the browser. For this type of
application, it is not always possible to transmit the VIRTEL
session code to the browser, especially if a Javascript library is
used.</p>
<p>The AJAX-SESSION-CODE tag allows a sessioncode to be inserted in the
template page in the format AjaxSession=xxxxxxxxxxxxxxxx. For
example:</p>
<p>This instruction allows a scenario to trigger a 205 response to the
Long Poll session.</p>
<p>This 205 response will then tell the JavaScript to refresh the
terminal 3270 emulation screen, so that the user can see whatever
was changed by the scenario.</p>
<p>The SET-INITIAL-TIMEOUT tag allows a timeout to be started when
VIRTEL builds the page.</p>
<p>For example, if the instruction</p>
<p>is coded in a page or a sub-page, then VIRTEL will cancel the
session if the workstation has not sent another request after 10
seconds.</p>
<p>Transmission of data to the host uses the principle of sending an
HTML form. In conjunction with the SESSION-CODE tag, the form allows
the transmission of input fields to the host application, and the
display of the subsequent application screen.</p>
<p>The form is defined as follows:</p>
</div></blockquote>
</div>
<div class="section" id="id84">
<h2>name<a class="headerlink" href="#id84" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Form name. The name of the form is used in JavaScript procedures to
refer to various elements of the form. For an example, see the
section <a class="reference external" href="#_bookmark38">“Cursor management”, page 37</a>.</div></blockquote>
</div>
<div class="section" id="action">
<h2>action<a class="headerlink" href="#action" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>URL transmitted to the server, in the following format:</p>
<p>action=&#8221;pagename++{{{SESSION-CODE}}}&#8221;</p>
</div></blockquote>
</div>
<div class="section" id="id85">
<h2>pagename<a class="headerlink" href="#id85" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the name of the template page to be used to display the
subsequent screen sent by the host application (usually the same as
the current template page)</div></blockquote>
</div>
<div class="section" id="session-code">
<h2>{{{SESSION-CODE}}}<a class="headerlink" href="#session-code" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>identifies the session established with the host application</div></blockquote>
</div>
<div class="section" id="method">
<h2>method<a class="headerlink" href="#method" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Transmission mode. Always POST.</p>
<p>Example :</p>
<p>By design, an HTML page starts with the &lt;HTML&gt; tag and is terminated
by the &lt;/HTML&gt; tag. In order to be able to be correctly interpreted
by the browser, other tags are necessary, for example &lt;HEAD&gt; and
&lt;/HEAD&gt; as well as &lt;BODY&gt; and &lt;/BODY&gt;. All other tags are optional.</p>
<p>As shown previously, data transmitted to the HTTP server by the
client is itself placed in the tag fields &lt;FORM&gt; and</p>
<p>&lt;/FORM&gt;. In order to minimise traffic, it is also advisable to place
only useful data in the tag fields for example, generated fields or
copies resulting from GENERATE-HTML and COPY-FROM tags, as well as
indispensable fields such as focusField and pfkField. Other data may
be placed anywhere in the area of the HTML page, provided that their
position conforms to the standards. The following presents an
example of the possible structure.</p>
<p>&lt;HTML&gt;</p>
<p>&lt;HEAD&gt;&lt;!&#8212;&#8212;&#8212;&#8212;&#8212;&#8212; start of HTML page header
&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8211;&gt;</p>
<p>&lt;style&gt;&lt;!&#8211; définition des classes de style</p>
<p>.GREEN {font-family: monospace; background: #000000; color: #00FF00;
}</p>
<p>//&#8211;&gt;&lt;/style&gt;</p>
<p>&lt;!&#8211;VIRTEL start=&#8221;{{{&#8221; end=&#8221;}}}&#8221; &#8211;&gt;</p>
<p>{{{ON-ATTRIBUTE (PROTECTED,WHITE)&lt;font color=white&gt;}}}</p>
<p>{{{ON-END-OF-ATTRIBUTE (PROTECTED,WHITE)&lt;/font&gt;}}}</p>
<p>{{{ADD-TO-FIELDS (NORMAL,NOCOLOR) class=&#8221;GREEN&#8221; }}}</p>
<p>{{{DEFINE-HTML-PFKEY &#8220;PFKFIELD&#8221;}}}</p>
<p>{{{DEFINE-HTML-FOCUS-FIELD &#8220;FOCUSFIELD&#8221;}}}</p>
<p>&lt;title&gt;Sample HTML page&lt;/title&gt;</p>
<p>&lt;/HEAD&gt;&lt;!&#8212;&#8212;&#8212;&#8212;&#8212;&#8212; end of HTML page header
&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8211;&gt;</p>
<p>&lt;script language=&#8221;JavaScript&#8221;&gt;&lt;!&#8211; function SetFocus()</p>
<p>{ document.virtelForm.{{{FIELD-WITH-CURSOR}}}.focus(); } function
SaveFocus(CurrentFieldName)</p>
<p>{ document.virtelForm.FOCUSFIELD.value = CurrentFieldName; }
function SubmitForm(valeur)</p>
<p>{ document.virtelForm.PFKFIELD.value = valeur;
document.virtelForm.submit(); }</p>
<p>function ShowPopup()</p>
<p>{ var popup =
window.open(&#8220;&#8221;,&#8221;PopupImpression&#8221;,&#8217;width=614,height=129&#8217;);
popup.location = &#8220;imprim.htm++Print{{{SESSION-CODE}}}&#8221;; }</p>
<p class="attribution">&mdash;&gt;&lt;/script&gt;</p>
</div></blockquote>
<blockquote>
<div><p>&lt;!&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;- start of HTML page body
&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8211;&gt;</p>
<p>&lt;BODY onLoad=&#8221;SetFocus()&#8221;&gt;</p>
<p>&lt;!&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;- start of HTML form
&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8211;&gt;</p>
<p>&lt;FORM name=&#8221;virtelForm&#8221; action=&#8221;example.html++{{{SESSION-CODE}}}&#8221;
method==&#8221;POST&#8221;&gt;</p>
<p>{{{ GENERATE-HTML (1,1,1920) }}}</p>
<p>&lt;input name=&#8221;PFKFIELD&#8221; type=&#8221;HIDDEN&#8221; value=&#8221;&#8220;&gt;</p>
<p>&lt;input name=&#8221;FOCUSFIELD&#8221; type=&#8221;HIDDEN&#8221;
value=&#8221;{{{FIELD-WITH-CURSOR}}}&#8221;&gt;</p>
<p>&lt;/FORM&gt;&lt;!&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212; end of HTML form
&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-&gt;</p>
<p>&lt;!—-Place submit buttons and hypertext links here. For example:&#8211;&gt;</p>
<p>&lt;a href=&#8221;<a class="reference external" href="javascript:submitform('PF1">javascript:submitform(&#8216;PF1</a>&#8216;)&#8221; &gt;soumettre avec PF01&lt;/a&gt;</p>
<p>&lt;INPUT TYPE=&#8221;BUTTON&#8221; size=&#8221;5&#8221; onclick=&#8221;SubmitForm(this.value)&#8221;
value=&#8221;PF01&#8221;&gt;</p>
<p>&lt;script language=&#8221;JavaScript&#8221;&gt;&lt;!&#8211;</p>
<p>{{{IF-PRINT-IS-READY</p>
<p>ShowPopUp();</p>
<p>}}}</p>
<p class="attribution">&mdash;&gt;&lt;/script&gt;</p>
</div></blockquote>
<blockquote>
<div><p>&lt;/BODY&gt;&lt;!&#8212;&#8212;&#8212;&#8212;&#8212;&#8212; end of HTML page body
&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8211;&gt;</p>
<p>&lt;/HTML&gt;</p>
<p>For a full example, see the WEB2VIRT.htm page delivered with VIRTEL.</p>
<p>Insertion of host application data in an HTML or XML page is
achieved with the GENERATE-HTML and COPY-FROM tags.</p>
<p>The GENERATE-HTML tag instructs VIRTEL to convert all or part of the
3270 screen into HTML form data. Output fields are converted into
text, while input fields are converted into HTML input statements.
The generated text and input fields are aligned so as to correspond
as far as possible with the layout of the original 3270 screen. The
resulting generation takes account of the nature of the data as well
as the information specified in the ON-ATTRIBUTE, ON-END-
OF-ATTRIBUTE and ADD-TO-FIELDS tags.</p>
</div></blockquote>
</div>
<div class="section" id="row-col">
<h2>row,col<a class="headerlink" href="#row-col" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Starting position (row and column number on the 3270 screen) of the
data to be copied. This starting position will usually contain a
3270 attribute character.</div></blockquote>
</div>
<div class="section" id="len">
<h2>len<a class="headerlink" href="#len" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Length of the data to be copied (including attribute characters).</p>
<p>For example, the command {{{ GENERATE-HTML (01,01,1920) }}} will
generate the total contents of the 3270 screen.</p>
<p>An alternative form of the GENERATE-HTML tag allows the position and
length to be specified by means of a symbolic name defined in a
previous DEFINE-DFHMDF-NAME or DEFINE-DFHMDF-COLUMN tag (se`e
“{{{DEFINE-DFHMDF- &lt;#_bookmark35&gt;`__ <a class="reference external" href="#_bookmark35">COLUMN}}}”, page
31</a>).</p>
</div></blockquote>
</div>
<div class="section" id="id86">
<h2>name<a class="headerlink" href="#id86" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>symbolic name defined in a previous DEFINE-DFHMDF-NAME or
DEFINE-DFHMDF-COLUMN tag.</p>
<p>The COPY-FROM tag copies data into the HTML page from a specific
location on the 3270 screen. Unlike the GENERATE-HTML tag, the
COPY-FROM tag copies only the data and does not process any
associated 3270 field attributes.</p>
</div></blockquote>
</div>
<div class="section" id="id87">
<h2>row,col<a class="headerlink" href="#id87" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Starting position (row and column number on the 3270 screen) of the
data to be copied. This will typically be the first character after
the attribute character which defines the start of the field.</div></blockquote>
</div>
<div class="section" id="id88">
<h2>len<a class="headerlink" href="#id88" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Length of the data to be copied.</p>
<p>An alternative form of the COPY-FROM tag allows the position and
length to be specified by means of a symbolic name defined in a
previous DEFINE-DFHMDF-NAME or DEFINE-DFHMDF-COLUMN tag (described
37).</p>
</div></blockquote>
</div>
<div class="section" id="id89">
<h2>name<a class="headerlink" href="#id89" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>symbolic name defined in a previous DEFINE-DFHMDF-NAME or
DEFINE-DFHMDF-COLUMN tag.</p>
<p>Normally, any binary zeroes in the copied data will be removed.
However, if the BLANK-BINARY-ZEROES option is set (se`e “Setting and
unsetting local options”, page 41 &lt;#_bookmark42&gt;`__) then binary
zeroes will be converted to blanks.</p>
<p>The CREATE-VARIABLE-FROM tag copies data from the 3270 screen into a
VIRTEL variable. There are several formats of the COPY-VARIABLE-FROM
tag, as described below.</p>
<p>In the first form of CREATE-VARIABLE-FROM, the name of a variable is
specified within the tag. Data is extracted from the indicated
location on the screen, continuing until an attribute character is
found or until the specified length is reached. Any non-alphanumeric
characters are removed, all alphabetic characters are converted to
upper case, and the resulting data is copied into the variable. If
the variable does not exist, it will be created. If the variable
already exists, the new value will be appended to any existing
values.</p>
</div></blockquote>
</div>
<div class="section" id="id90">
<h2>row,col<a class="headerlink" href="#id90" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Starting position (row and column number on the 3270 screen) of the
data to be copied. This will typically be the first character after
an attribute character which defines the start of a field.</div></blockquote>
</div>
<div class="section" id="id91">
<h2>len<a class="headerlink" href="#id91" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Length of the data to be copied.</div></blockquote>
</div>
<div class="section" id="varname">
<h2>varname<a class="headerlink" href="#varname" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The name of the variable to be created</p>
<p>The second form of CREATE-VARIABLE-FROM is distinguished by the
absence of a variable name within the tag. In this case, the
variable name is obtained from the 3270 screen. Data is extracted
from the indicated location on the screen, continuing until an
attribute character is found or until the specified length is
reached. Any non-alphanumeric characters are removed, all alphabetic
characters are converted to upper case, and the resulting string is
used as a variable name. If the variable does not exist, it will be
created. If the variable already exists, a new value will be
appended to any existing values. If the variable name was terminated
by an attribute character, then the data in the following field is
used as the value of the variable. Otherwise the string “EMPTY” will
be used as the value of the variable.</p>
</div></blockquote>
</div>
<div class="section" id="id92">
<h2>row,col<a class="headerlink" href="#id92" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Line and column number on the 3270 screen containing the variable
name.</div></blockquote>
</div>
<div class="section" id="id93">
<h2>len<a class="headerlink" href="#id93" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Total length of the variable name and value to be copied.</p>
<p>The third form of CREATE-VARIABLE-FROM allows a rectangle to be
copied from the screen. With a fourth sub- parameter specified, the
instruction will not stop collecting data after encountering an
attribute, but will continue adding values to the variable for the
specified height on the screen. Any attributes found in the
rectangle will be</p>
<p>copied as blanks. If the variable does not exist, it will be
created. If the variable already exists, the new values will be
appended to any existing values.</p>
</div></blockquote>
</div>
<div class="section" id="id94">
<h2>row,col<a class="headerlink" href="#id94" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Starting position (row and column number on the 3270 screen) of the
data to be copied.</div></blockquote>
</div>
<div class="section" id="width-height">
<h2>width,height<a class="headerlink" href="#width-height" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Size (in columns and rows) of the rectangle to be copied.</div></blockquote>
</div>
<div class="section" id="id95">
<h2>varname<a class="headerlink" href="#id95" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The name of the variable to be created</p>
<p>The DEFINE-HTML-FIELD-NAME tag requests that VIRTEL should use a
specific HTML input field name for the specified 3270 field, instead
of an automatically generated name. The DEFINE-HTML-FIELD-NAME tag
may be followed by a GENERATE-HTML tag, in which case VIRTEL will
generate an HTML input field with the specified name, or the input
field may be explicitly coded in the page template, in which case
VIRTEL will use the name to associate the HTML input field with the
3270 field at the specified position. Normally this tag is not
needed because the automatically generated field names are adequate
for all except certain specialised applications.</p>
</div></blockquote>
</div>
<div class="section" id="id96">
<h2>row,col<a class="headerlink" href="#id96" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Line and column number of the start of the field on the 3270 screen.
This must be the first character after the attribute character.</div></blockquote>
</div>
<div class="section" id="id97">
<h2>len<a class="headerlink" href="#id97" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Length of the input field (excluding attribute character).</div></blockquote>
</div>
<div class="section" id="id98">
<h2>name<a class="headerlink" href="#id98" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Name to be associated with the HTML input field.</p>
<p>The DEFINE-HTML-FIELD tag is equivalent to a DEFINE-HTML-FIELD-NAME
tag followed by a GENERATE-HTML tag.</p>
</div></blockquote>
</div>
<div class="section" id="id99">
<h2>row,col<a class="headerlink" href="#id99" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Line and column number of the start of the field on the 3270 screen.
This must be the first character after the attribute character.</div></blockquote>
</div>
<div class="section" id="id100">
<h2>len<a class="headerlink" href="#id100" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Length of the input field (excluding attribute character).</div></blockquote>
</div>
<div class="section" id="id101">
<h2>name<a class="headerlink" href="#id101" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Name to be associated with the HTML input field.</p>
<p>The DEFINE-DFHMDF-NAME tag allows a field on the 3270 screen to be
given a symbolic name which can be used in a subsequent
GENERATE-HTML tag or COPY-FROM tag.</p>
</div></blockquote>
</div>
<div class="section" id="id102">
<h2>row,col<a class="headerlink" href="#id102" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Position (row and column number on the 3270 screen) of the attribute
character which precedes the field on the 3270 screen.</div></blockquote>
</div>
<div class="section" id="id103">
<h2>len<a class="headerlink" href="#id103" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Length of the 3270 field (excluding attribute character).</div></blockquote>
</div>
<div class="section" id="id104">
<h2>name<a class="headerlink" href="#id104" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Name to be associated with the field.</p>
<p>The name specified by the DEFINE-DFHMDF-NAME tag can then be used in
subsequent GENERATE-HTML tags or COPY- FROM tags, instead of
specifying an explicit row, column, and length. In addition, the
DEFINE-DFHMDF-NAME tag generates an implicit DEFINE-HTML-FIELD-NAME
tag.</p>
<p>For example, the following tag defines a 10-character input field
having attribute byte at row 1 column 59. The field itself occupies
row 1 columns 60 to 69:</p>
<p>Subsequently:</p>
<p>is interpreted as:</p>
<p>and</p>
<p>is interpreted as:</p>
<p>and the following tag will be automatically generated:</p>
<p>Notice that VIRTEL automatically adjusts the starting position and
length as necessary to account for the attribute byte.</p>
<p>The DEFINE-DFHMDF-COLUMN tag is similar to the DEFINE-DFHMDF-NAME
tag except that it allows the definition of a field which is
repeated in the same column position on several consecutive lines of
the screen.</p>
</div></blockquote>
</div>
<div class="section" id="id105">
<h2>row,col<a class="headerlink" href="#id105" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Position (row and column number on the 3270 screen) of the attribute
character which precedes the first occurrence of the field on the
3270 screen.</div></blockquote>
</div>
<div class="section" id="id106">
<h2>len<a class="headerlink" href="#id106" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Length of each 3270 field (excluding attribute character).</div></blockquote>
</div>
<div class="section" id="ht">
<h2>ht<a class="headerlink" href="#ht" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Height of column (number of lines).</div></blockquote>
</div>
<div class="section" id="id107">
<h2>name<a class="headerlink" href="#id107" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Name to be associated with the field.</p>
<p>The name specified by the DEFINE-DFHMDF-COLUMN tag can be used in
subsequent GENERATE-HTML tags or COPY- FROM tags instead of
specifying an explicit row, column, and length. The first time the
field name is referenced in a GENERATE-HTML or COPY-FROM tag, the
first occurrence of the field will be used. Each time the field name
is referenced subsequently, the row number is incremented
automatically. After the end of the series is reached, any
subsequent reference wraps back to the first row number. In
addition, the DEFINE-DFHMDF-COLUMN tag implicitly generates a series
of DEFINE-HTML-FIELD-NAME tags, each of which contains the field
name suffixed by _1, _2, etc.</p>
<p>For example, the following tag defines a column of 5-character input
fields having attribute bytes in column 1. The fields themselves
occupy columns 2 to 6. The first field is in row 9 and there are 12
occurrences:</p>
<p>Subsequently:</p>
<p>is interpreted as:</p>
<p>and</p>
<p>is interpreted as:</p>
<p>where n takes the next value in the range 9 to 20 The following tags
will be automatically generated:</p>
<p>and so on until:</p>
<p>Notice that VIRTEL automatically adjusts the starting positions and
lengths as necessary to account for the attribute byte.</p>
<p>The GENERATE-VARIABLES tag functions like GENERATE-HTML except that,
instead of generating HTML, it generates a set of table variables
for each attribute found in the designated portion of the screen.</p>
</div></blockquote>
</div>
<div class="section" id="id108">
<h2>row,col<a class="headerlink" href="#id108" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Starting position (row and column number on the 3270 screen) of the
data to be copied. This starting position will usually contain a
3270 attribute character.</div></blockquote>
</div>
<div class="section" id="id109">
<h2>len<a class="headerlink" href="#id109" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Length of the data to be copied (including attribute characters).</div></blockquote>
</div>
<div class="section" id="prefix">
<h2>prefix<a class="headerlink" href="#prefix" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The prefix of the generated variable names.</p>
<p>A set of these variables is generated for each field found on the
screen:</p>
<p><strong>*prefix*NAME</strong></p>
<p>Field name</p>
<p>Example : V00002E9 for an input field, blank for an output field</p>
<p><strong>*prefix*LINE</strong></p>
<p>Line position of the field attribute (first line = 1)</p>
<p><strong>*prefix*COLUMN</strong></p>
<p>Column position of the field attribute (first column = 1)</p>
<p><strong>*prefix*LENGTH</strong></p>
<p>Field length (excluding attribute)</p>
<p><strong>*prefix*ATTRB</strong></p>
<p>Attribute: ASKIP, PROT, UNPROT, NUM, BRT, NORM, DET, MDT</p>
<p><strong>*prefix*COLOR</strong></p>
<p>Color: NEUTRAL, BLUE, RED, PINK, GREEN, TURQUOISE, YELLOW, WHITE</p>
<p><strong>*prefix*HILIGHT</strong></p>
<p>Highlight: BLINK, REVERSE, UNDERLINE, OFF</p>
<p><strong>*prefix*VALUE</strong></p>
<p>The text contained in the field (excluding attribute)</p>
<p>For example, the tag {{{ GENERATE-VARIABLES (01,01,1920) &#8220;MYPREFIX&#8221;
}}} generates a set of table variables describing the entire
contents of the 3270 screen.</p>
<p>Normally, any binary zeroes in the field will be removed from the
VALUE. However, if the BLANK-BINARY-ZEROES option is set (se`e
“Setting and unsetting local options”, page 41 &lt;#_bookmark42&gt;`__)
then binary zeroes will be converted to blanks.</p>
<p>GENERATE-VIR3270, in conjunction with supporting JavaScript
functions, is used by VIRTEL Web Access to generate an HTML page
which reproduces as closely as possible the look and feel of a
classic 3270 screen.</p>
<p>The GENERATE-VIR3270 tag functions like GENERATE-HTML except that,
instead of generating HTML form fields corresponding to 3270 input
fields, it generates all 3270 fields as HTML spans. Special
attribute keywords are added to</p>
<p>each span to indicate the type of field, the screen position, and
the 3270 field attributes. A subspan is generated for characters
whose character attributes differ from the field attributes. In
addition, GENERATE-VIR3270 generates a hidden HTML form field for
each 3270 input field, and these fields are written as HTML
fragments into a VIRTEL table variable so that they can be inserted
later in the page.</p>
</div></blockquote>
</div>
<div class="section" id="id110">
<h2>row,col<a class="headerlink" href="#id110" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Starting position (row and column number on the 3270 screen) of the
data to be copied.</div></blockquote>
</div>
<div class="section" id="id111">
<h2>len<a class="headerlink" href="#id111" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Length of the data to be copied.</div></blockquote>
</div>
<div class="section" id="fragvar">
<h2>fragvar<a class="headerlink" href="#fragvar" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The name of the table variable for the hidden HTML form fields.</p>
<p>The table below shows the HTML attributes generated for each field
and 3270 attribute position on the screen:</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>An example of the GENERATE-VIR3270 tag is shown below:</p>
<p>The management of the size and the colours of the text is effected
for all fields by means of the ON-ATTRIBUTE and ON-END-OF-ATTRIBUTE
tags. For applications which use 3270 character attributes (order
code x’28’), the colour and highlighting of individual characters
within a field can be managed by means of the ON-CHARACTER-ATTRIBUTE
and ON-END-OF-CHARACTER-ATTRIBUTE tags. Input fields may be supplied
with additional information by way of the ADD- TO-FIELDS tag.</p>
<p>The ON-ATTRIBUTE and ON-END-OF-ATTRIBUTE tags allow HTML tags to be
inserted before and after each field depending on the 3270
attributes specified by the host application.</p>
<p>Inserts the value specified by “standard html tag” before the field
when the conditions p1 to pn are fulfilled. The parameters p1 to pn
may appear in any order, each parameter representing one of the
following values:</p>
</div></blockquote>
</div>
<div class="section" id="p1">
<h2>p1<a class="headerlink" href="#p1" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Type of field: PROTECTED, UNPROTECTED, NON-DISPLAY, NUMERIC, MDTON,
DETECTABLE. ALPHANUMERIC, INTENSIFIED, BRIGHT, NORMAL</div></blockquote>
</div>
<div class="section" id="p2">
<h2>p2<a class="headerlink" href="#p2" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Highlighting: NOHILIGHT, BLINK, REVERSE, UNDERSCORE</div></blockquote>
</div>
<div class="section" id="p3">
<h2>p3<a class="headerlink" href="#p3" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Colour: NOCOLOR, BLUE, RED, PINK, GREEN, YELLOW, TURQUOISE, WHITE</p>
<p>When more than one ON-ATTRIBUTE tag matches the same field, the tags
are processed in reverse order and the generated HTML is accumulated
from each matching ON-ATTRIBUTE tag. The WITH-NO-MATCH-BELOW keyword
allows an ON-ATTRIBUTE tag to match the field only if no match has
been found with the ON-ATTRIBUTE tags already processed.</p>
<p>The presence of the ON-ATTRIBUTE tag requires the presence of an
ON-END-OF-ATTRIBUTE tag having the same values for the p1 to pn
parameters.</p>
<p>Inserts the value specified by “standard html tag” after the field
when the conditions p1 to pn are fulfilled.</p>
<p>As previously described for the ON-ATTRIBUTE tag, multiple matching
ON-END-OF-ATTRIBUTE tags are processed in reverse order, and the
optional WITH-NO-MATCH-BELOW keyword causes the ON-END-OF-ATTRIBUTE
tag to match only if no match has been found with the
ON-END-OF-ATTRIBUTE tags already processed.</p>
<p>Example:</p>
<p><em>Example set of ON-ATTRIBUTE and ON-END-OF-ATTRIBUTE tags</em></p>
<p>If the page template contains ON-CHARACTER-ATTRIBUTE and
ON-END-OF-CHARACTER-ATTRIBUTE tags, changes in colour or
highlighting of individual characters within a field are surrounded
by the specified HTML code during processing by GENERATE-HTML. Since
HTML code cannot be included in the “value” clause of an input
field, GENERATE-HTML does not generate HTML code for character
attributes within input fields.</p>
</div></blockquote>
</div>
<div class="section" id="p1-p2">
<h2>p1,p2<a class="headerlink" href="#p1-p2" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Highlighting and colour parameters as specified for the ON-ATTRIBUTE
tag.</p>
<p>The ON-END-OF-CHARACTER-ATTRIBUTE tag specifies the HTML code to be
inserted at the termination of a character string opened by an
ON-CHARACTER-ATTRIBUTE tag.</p>
<p>The presence of an ADD-TO-FIELDS tag allows the definition of each
HTML input field to be modified according to the 3270 attributes
specified by the host application.</p>
<p>Inserts the value specified by “part of standard html tag” into the
HTML &lt;INPUT&gt; tag when the conditions p1 to pn (described in the
previous paragraph) are fulfilled.</p>
<p>When more than one ADD-TO-FIELDS tag matches the same field, the
tags are processed in order of appearance and the generated HTML is
accumulated from each matching ADD-TO-FIELDS tag. The
WITH-NO-MATCH-ABOVE keyword allows an ADD-TO-FIELDS tag to match the
field only if no match has been found with the ADD-TO-FIELDS tags
already processed.</p>
<p>Example:</p>
<p><em>Example set of ADD-TO-FIELDS tags</em></p>
<p>In the above example, the parameter class makes reference to a style
class defined in the HTML page header:</p>
<p><em>Example styles for ADD-TO-FIELDS tags</em></p>
<p>For certain fields, the action of the ADD-TO-FIELDS tag may be
nullified by the NO-ADD-TO-CHECKBOX and NO-ADD- TO-LISTBOX local
options (se`e “Setting and unsetting local options”, page
41 &lt;#_bookmark42&gt;`__).</p>
<p>The ADD-TO-FIELDS tag affects input fields only</p>
<p>In each message sent from the host application to the browser,
VIRTEL automatically manages the positioning of the cursor insofar
as is possible. Conversely, when a message is sent to VIRTEL from
the browser, it is necessary to know the position of the cursor in
order to inform the application on the host side. The cursor
position cannot be handled relatively therefore, the cursor’s exact
position is communicated via a hidden field specifying the name of
the field having the focus at the time of transmission.</p>
<p>Cursor management is determined by the tags DEFINE-HTML-FOCUS-FIELD,
FIELD-WITH-CURSOR, DEFAULT-FIELD- WITH-CURSOR and by two JavaScript
procedures. More precise positioning of the cursor can be controlled
by the optional tags DEFINE-CURSOR-POSITION-FIELD and
POSITION-OF-THE-CURSOR.</p>
<p>The DEFINE-HTML-FOCUS-FIELD tag informs VIRTEL of the existence of
the focusField.</p>
<p>The focusField is a hidden field which will receive the name of the
field having the focus, that is to say the input field on which the
cursor is positioned, at the moment of transmission of a message
from the browser to VIRTEL.</p>
<p>This field must be defined in the following way:</p>
<p>The DEFINE-CURSOR-POSITION-FIELD tag informs VIRTEL of the existence
of the cursorField.</p>
<p>The cursorField is an optional hidden field in which the JavaScript
routines may place the exact position of the cursor when a message
is transmitted from the browser to VIRTEL. The cursor position is
indicated by a string of the format Vnnnnnnn or Pnnnnnnn, where V
indicates that the cursor is in a non-protected (input) field, P
indicates a protected</p>
<p>(output) field, and nnnnnnn is the hexadecimal offset of the cursor
from the start of the screen (where 0000000 represents row 1 column
1).</p>
<p>The cursorField must be defined in the following way:</p>
<p>If both focusField and cursorField are sent to VIRTEL, then VIRTEL
will use cursorField to determine the position of the cursor.</p>
<p>The FIELD-WITH-CURSOR tag enables VIRTEL to insert the name of the
field having the focus at the time of transmission of the message to
the browser.</p>
<p>The DEFAULT-FIELD-WITH-CURSOR tag specifies the name generated by
the FIELD-WITH-CURSOR tag when the 3270 screen contains no input
fields.</p>
<p>In the DEFAULT-FIELD-WITH-CURSOR tag, fieldname must be the name of
an HTML input field defined in the template page. If no
DEFAULT-FIELD-WITH-CURSOR tag is present, and the screen contains no
input fields, VIRTEL will convert the first field on the screen into
an input field, so that the FIELD-WITH-CURSOR tag can generate the
name of a valid input field.</p>
<p>The positioning of the focus is done with the help of a JavaScript
procedure referenced by the &lt;BODY&gt; tag of the HTML page:</p>
</div></blockquote>
</div>
<div class="section" id="script-for-focus-position-management">
<h2>Script for focus position management<a class="headerlink" href="#script-for-focus-position-management" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>&lt;script language=&#8221;Javascript&#8221;&gt;</p>
<p>&lt;!&#8211; comment to mask script for some browsers function setfocus()</p>
</div></blockquote>
<p>{</p>
<blockquote>
<div>document.virtelForm.{{{ FIELD-WITH-CURSOR }}}.focus();</div></blockquote>
<p>}</p>
<blockquote>
<div><p>//&#8211;&gt;</p>
<p>&lt;/script&gt;</p>
</div></blockquote>
</div>
<div class="section" id="cursor-position-initialisation">
<h2>Cursor position initialisation<a class="headerlink" href="#cursor-position-initialisation" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>&lt;body onload=&#8221;setfocus()&#8221;&gt;</p>
<p>Once present in the client&#8217;s browser, the user may need to move the
focus to a different field, either by using the TAB key on the
keyboard or by using the mouse. The focusField field is
automatically updated if the ADD-TO-FIELDS tag calls a script which
updates the focus field.</p>
</div></blockquote>
</div>
<div class="section" id="script-for-saving-the-name-of-the-field-having-the-focus">
<h2>Script for saving the name of the field having the focus<a class="headerlink" href="#script-for-saving-the-name-of-the-field-having-the-focus" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>&lt;script language=&#8221;Javascript&#8221;&gt;</p>
<p>&lt;!&#8211; comment to mask script for some browsers function
savefocus(CurrentFieldName)</p>
</div></blockquote>
<p>{</p>
<blockquote>
<div>document.virtelForm.focusField.value = CurrentFieldName;</div></blockquote>
<p>}</p>
<blockquote>
<div><p>//&#8211;&gt;</p>
<p>&lt;/script&gt;</p>
</div></blockquote>
</div>
<div class="section" id="automatic-call-of-the-update-script">
<h2>Automatic call of the update script<a class="headerlink" href="#automatic-call-of-the-update-script" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>{{{ ADD-TO-FIELDS onfocus = &#8220;savefocus(this.name)&#8221; }}}</p>
<p>The POSITION-OF-THE-CURSOR tag allows VIRTEL to send the exact
position of the cursor to the browser by including a string of the
format Vnnnnnnn or Pnnnnnnn in the HTML page. Vnnnnnnn means that
the cursor is in a non-protected (input) field. Pnnnnnnn means that
the cursor is in a protected (output) field. In both cases, nnnnnnn
is the hexadecimal offset of the cursor from the start of the screen
(where 0000000 represents row 1 column 1).</p>
<p>By design, the transmission of information delivered by a 3270
application is effected by using only the function keys, usually the
PF and PA keys. Also by design, the navigation from an HTML page is
radically different, generally using the mouse to submit requests to
the HTTP server. This difference in philosophy makes it difficult,
even impossible in certain instances, to detect the use of a
function key via the browser. Conserving the ergonomic aspects of
the web in an application that allows full use of the function keys
is naturally not an easy thing to do, it is, however, made possible
by the following functions.</p>
<p>As with the management of the cursor, the pfkField is a hidden field
designed to accept the name of the function key that VIRTEL must use
to transmit data to the application on the host.</p>
<p>VIRTEL is notified of the existence of the field by the following
tag:</p>
<p>The field pfkField is updated by using a JavaScript procedure called
at the time of the submission of the request. The script used is
referenced in the BUTTON field definition or in the HTML link used
for the submission.</p>
</div></blockquote>
</div>
<div class="section" id="save-the-name-of-the-field-having-the-focus">
<h2>Save the name of the field having the focus<a class="headerlink" href="#save-the-name-of-the-field-having-the-focus" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>&lt;script language=&#8221;Javascript&#8221;&gt;</p>
<p>&lt;!&#8211; comment to mask script for some browsers function
submitform(pfkey)</p>
</div></blockquote>
<p>{</p>
<blockquote>
<div>document.virtelForm.pfkField.value = pfkey;
document.virtelForm.submit();</div></blockquote>
<p>}</p>
<blockquote>
<div><p>//&#8211;&gt;</p>
<p>&lt;/script&gt;</p>
</div></blockquote>
</div>
<div class="section" id="automatic-call-of-the-update-script-from-a-field-of-type-button">
<h2>Automatic call of the update script from a field of type BUTTON<a class="headerlink" href="#automatic-call-of-the-update-script-from-a-field-of-type-button" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>&lt;INPUT TYPE=&#8221;BUTTON&#8221; size=&#8221;5&#8221; VALUE=&#8221;PF01&#8221;</p>
<p>onclick=&#8221;submitform(this.value)&#8221;&gt;</p>
</div></blockquote>
</div>
<div class="section" id="automatic-call-of-the-script-from-a-hypertext-link">
<h2>Automatic call of the SCRIPT from a hypertext link<a class="headerlink" href="#automatic-call-of-the-script-from-a-hypertext-link" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>&lt;a href=&#8221;<a class="reference external" href="javascript:submitform('PF1">javascript:submitform(&#8216;PF1</a>&#8216;)&#8221; &gt;submit with PF01&lt;/a&gt;</p>
<p>The function keys may be defined in the following manner in the
“value” keyword of the INPUT TYPE=BUTTON field.</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p><em>Function key values for pfkField</em></p>
<p>Certain function keys may be explicitly restricted by means of the
INVALID-PFKEYS tag containing the list of prohibited PF keys.</p>
<p>On the other hand, an exhaustive list of authorised function keys
may be specified with the VALID-PFKEYS tag.</p>
<p>For example,</p>
</div></blockquote>
</div>
<div class="section" id="disallow-attn-pf08-and-pf24">
<h2>Disallow ATTN, PF08 and PF24<a class="headerlink" href="#disallow-attn-pf08-and-pf24" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>{{{ INVALID-PFKEYS (ATTN,PF08,PF24) }}}</div></blockquote>
</div>
<div class="section" id="disallow-all-function-keys-except-enter-and-pf03">
<h2>Disallow all function keys except ENTER and PF03<a class="headerlink" href="#disallow-all-function-keys-except-enter-and-pf03" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>{{{ VALID-PFKEYS (ENTER,PF03) }}}</p>
<p>A page template can generate a “pseudo-PFkey” intended to be
interpreted by an INPUT scenario. This is done by setting the
pfkField to a value beginning with SCENARIO. The pseudo-PFKey will
be accepted by VIRTEL and treated as ENTER, but it will not be
transmitted to the application. The scenario can retrieve the value
of the pfkField by means of the COPY$ INPUT-TO-VARIABLE instruction.</p>
<p>For example:</p>
</div></blockquote>
</div>
<div class="section" id="definition-of-the-button-field-in-the-page-template">
<h2>Definition of the BUTTON field in the page template:<a class="headerlink" href="#definition-of-the-button-field-in-the-page-template" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>{{{ DEFINE-HTML-PFKEY &#8220;pf&#8221; }}}</p>
<p>&lt;INPUT TYPE=&#8221;BUTTON&#8221; size=&#8221;5&#8221; VALUE=&#8221;SCENARIO-DFHMDF&#8221;</p>
<p>onclick=&#8221;submitform(this.value)&#8221;&gt;</p>
</div></blockquote>
</div>
<div class="section" id="retrieving-and-testing-the-pf-key-value-in-the-input-scenario">
<h2>Retrieving and testing the PF key value in the INPUT scenario:<a class="headerlink" href="#retrieving-and-testing-the-pf-key-value-in-the-input-scenario" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>COPY$ INPUT-TO-VARIABLE,FIELD=&#8217;pf&#8217;,VAR=&#8217;PF&#8217; IF$
NOT-FOUND,THEN=NOPARAMS</p>
<p>CASE$ &#8216;PF&#8217;,(NE,&#8217;SCENARIO-DFHMDF&#8217;,NOPARAMS)</p>
</div></blockquote>
<ul>
<li><p class="first">generate the screen capture:</p>
<blockquote>
<div><p>COPY$ OUTPUT-FILE-TO-VARIABLE, *</p>
<p>FILE=&#8217;DFHMDF.TXT&#8217;,VAR=&#8217;CAPTURE&#8217;</p>
</div></blockquote>
</li>
<li><p class="first">send result to browser</p>
<blockquote>
<div><p>SEND$ AS-FILE,VAR=&#8217;CAPTURE&#8217;, *</p>
<p>TYPE=&#8217;text/plain&#8217;,NAME=&#8217;dfhmdf.asm&#8217; NOPARAMS EQU *</p>
<p>A page template or JavaScript program can request VIRTEL to resend
the contents of the current 3270 screen, without sending any input
to the host application, by setting the pfkField to the value
NULL-PF</p>
<p>The SET-LOCAL-OPTIONS and UNSET-LOCAL-OPTIONS tags allow the
activation or deactivation of miscellaneous processing options
associated with HTML generation. These options are normally
deactivated, but any or all of them can be activated by default
using the HTSETn parameters in the VIRTCT. Refer to the VIRTEL
Installation Guide for details of the HTSETn parameters. The
SET-LOCAL-OPTIONS and UNSET-LOCAL-OPTIONS tags apply only to the
current page, and take effect from the point in the page at which
they appear.</p>
<p>The options which can be specified are:</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="maxlength">
<h2>MAXLENGTH<a class="headerlink" href="#maxlength" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Indicates that VIRTEL will generate HTML input fields with the
parameter “maxlength” in addition to “size”. The “maxlength”
parameter ensures that the number of characters that can be entered
into an HTML field does not exceed the 3270 field length. By
default, VIRTEL does not generate “maxlength”, which allows an
unlimited number of characters to be entered in each HTML field, and
VIRTEL truncates the value as necessary before sending the data to
the host application.</div></blockquote>
</div>
<div class="section" id="id">
<h2>ID<a class="headerlink" href="#id" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Indicates that VIRTEL will generate HTML input fields with the
parameter “id” in addition to the “name” parameter. The “id” has the
same value as the “name”. This is intended for use with JavaScript
code which refers to VIRTEL- generated fields using the
getElementById method.</div></blockquote>
</div>
<div class="section" id="do-not-ignore-binary-zeroes">
<h2>DO-NOT-IGNORE-BINARY-ZEROES<a class="headerlink" href="#do-not-ignore-binary-zeroes" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>When this option is activated, then all 3270 NUL characters in input
fields generated by VIRTEL will be sent to the browser as SUB
characters (x&#8216;1A&#8217;). When this option is not activated, then VIRTEL
will remove 3270 NUL characters from input fields.</div></blockquote>
</div>
<div class="section" id="blank-binary-zeroes">
<h2>BLANK-BINARY-ZEROES<a class="headerlink" href="#blank-binary-zeroes" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Affects the processing of the COPY-FROM and GENERATE-VARIABLES tags
(see <a class="reference external" href="#_bookmark32">“Inserting host application data in a</a>
<a class="reference external" href="#_bookmark32">page”, page 28</a>).</div></blockquote>
</div>
<div class="section" id="html-escapes-javascript-escapes-json-escapes-no-escapes-xml-escapes">
<h2>HTML-ESCAPES, JAVASCRIPT-ESCAPES, JSON-ESCAPES, NO-ESCAPES, XML-ESCAPES<a class="headerlink" href="#html-escapes-javascript-escapes-json-escapes-no-escapes-xml-escapes" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Affects the processing of the CURRENT-VALUE-OF, TRIMMED-VALUE-OF and
NO-BLANKS-VALUE-OF tags (see <a class="reference external" href="#_bookmark44">“Handling table variables”, page
43</a>). Similarly affects the processing of the
values generated by GENERATE- VARIABLES.</div></blockquote>
</div>
<div class="section" id="auto-increment-variables">
<h2>AUTO-INCREMENT-VARIABLES<a class="headerlink" href="#auto-increment-variables" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>When this option is activated, table variables referenced outside a
FOR-EACH-VALUE-IN loop will be automatically advanced to their next
value each time they are reused. If this option is not active, the
CURRENT-VALUE-OF tag always produces the first value of a table
variable when it is referenced outside a loop.</div></blockquote>
</div>
<div class="section" id="no-add-to-checkbox">
<h2>NO-ADD-TO-CHECKBOX<a class="headerlink" href="#no-add-to-checkbox" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>When this option is activated, HTML attributes defined within an
ADD-TO-FIELDS tag are not added to &lt;input type=checkbox&gt; clauses
generated by the GENERATE-HTML tag in conjunction with the FIELD$
IS-BINARY-CHOICE instruction.</div></blockquote>
</div>
<div class="section" id="no-add-to-listbox">
<h2>NO-ADD-TO-LISTBOX<a class="headerlink" href="#no-add-to-listbox" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>When this option is activated, HTML attributes defined within an
ADD-TO-FIELDS tag are not added to &lt;select&gt; clauses generated by the
GENERATE-HTML tag in conjunction with the FIELD$ DEFINE-CHOICE or
FIELD$ DEFINE- VARIABLE-CHOICE instructions.</div></blockquote>
</div>
<div class="section" id="mdt-if-received">
<h2>MDT-IF-RECEIVED<a class="headerlink" href="#mdt-if-received" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>When this option is activated, VIRTEL will consider all input fields
received from the browser to be “modified” fields to be sent to the
host application. Fields in the page not received from the browser
are considered to be unmodified and are not sent to the host
application. When this option is not activated, VIRTEL inspects the
contents of all fields received from the browser to determine
whether the field has been modified. VIRTEL sends modified fields to
the host application, and any fields not received from the browser
are sent as empty fields. Notes: (1) This option must be coded in
the page template before the fields to which it applies. (2) This
option cannot be specified in the VIRTCT</div></blockquote>
</div>
<div class="section" id="trace-line">
<h2>TRACE-LINE<a class="headerlink" href="#trace-line" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Setting this option within a page starts a VIRTEL line trace on the
HTTP line. Unsetting this option stops the line trace. Refer to the
VIRTEL Messages and Operations Guide for more information about line
traces.</div></blockquote>
</div>
<div class="section" id="trace-relay">
<h2>TRACE-RELAY<a class="headerlink" href="#trace-relay" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Setting this option within a page starts a VIRTEL terminal trace on
the VTAM session. Unsetting this option stops the terminal trace.
Refer to the VIRTEL Messages and Operations Guide for more
information about terminal traces.</p>
<p>The SET-LOCAL-OPTIONS tag activates one or more HTML processing
options for the remainder of the current page, or until deactivated
by UNSET-LOCAL-OPTIONS:</p>
</div></blockquote>
</div>
<div class="section" id="option">
<h2>option<a class="headerlink" href="#option" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>one or more HTML processing options as described above</p>
<p>The UNSET-LOCAL-OPTIONS tag deactivates one or more HTML processing
options previously activated by SET-LOCAL- OPTIONS or by HTSETn. The
specified options are deactivated for the remainder of the current
page, or until reactivated by SET-LOCAL-OPTIONS:</p>
</div></blockquote>
</div>
<div class="section" id="id112">
<h2>option<a class="headerlink" href="#id112" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>one or more HTML processing options as described above.</p>
<p>A table variable is a list of values sent to VIRTEL by a host
application in a structured field of type <a class="reference external" href="#_bookmark272">“FAE5 or
FAE6”,</a></p>
<p><a class="reference external" href="#_bookmark272">page 236</a>. Table variables may also be created by
means of a VIRTEL tag embedded in the page template (see
<a class="reference external" href="#_bookmark34">“CREATE-</a> <a class="reference external" href="#_bookmark34">VARIABLE-FROM”, page
29</a>), via a scenario (see <a class="reference external" href="#_bookmark165">“COPY$ instructions”,
page 151</a>), or by means of a S VARIABLE command
contained in the host 3270 datastream (see <a class="reference external" href="#_bookmark274">“HOST4WEB commands”,
page 244</a>).</p>
<p>The FOR-EACH-VALUE-IN tag marks the start of a loop. varname is the
name of a table variable. VIRTEL generates everything between the
FOR-EACH-VALUE-IN tag and the END-FOR tag once for each value in
varname. If varname has no values then nothing is generated. The
current value of varname, and of any other table variables
referenced in the loop, changes when the END-FOR tag is encountered.</p>
<p>The CURRENT-VALUE-OF tag is used in a loop bracketed by the
FOR-EACH-VALUE-IN and END-FOR tags. varname is the name of a table
variable. If it is the variable named in the FOR-EACH-VALUE-IN tag,
it determines the number of iterations of the loops. Otherwise, its
value is simply changed when the END-FOR tag is encountered.</p>
<p>The CURRENT-VALUE-OF tag also allows variables to be inserted in a
template page outside of a FOR-EACH-VALUE-IN loop. In this case, the
variable varname must have been created from the HTTP request by an
INPUT scenario by means of the COPY$ INPUT-TO-VARIABLE instruction.</p>
<p>The local options HTML-ESCAPES, JAVASCRIPT-ESCAPES, JSON-ESCAPES,
NO-ESCAPES, and XML-ESCAPES (se`e “Setting &lt;#_bookmark42&gt;`__</p>
<p><a class="reference external" href="#_bookmark42">and unsetting local options”, page 41</a>) may affect
the processing of this tag.</p>
<p>If the HTML-ESCAPES local option is set, special characters in the
value of the variable will be replaced by the corresponding HTML
escape sequence as shown in the table below:</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote>
<div>If the JAVASCRIPT-ESCAPES local option is set, special characters in
the value of the variable will be replaced by the corresponding
JavaScript escape sequence as shown in the table below:</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote>
<div>If the JSON-ESCAPES local option is set, special characters in the
value of the variable will be replaced by the corresponding JSON
escape sequence as shown in the table below:</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote>
<div>If the XML-ESCAPES local option is set, special characters in the
value of the variable will be replaced by the corresponding XML
escape sequence as shown in the table below:</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>Setting any of the HTML-ESCAPES, JAVASCRIPT-ESCAPES, JSON-ESCAPES,
or XML-ESCAPES local options causes the other options to be
automatically unset.</p>
<p>Setting the NO-ESCAPES local option disables all escape processing.</p>
<p>The NO-BLANKS-VALUE-OF tag is similar to the CURRENT-VALUE-OF tag,
but the value is truncated at the first blank.</p>
<p>The TRIMMED-VALUE-OF tag is similar to the CURRENT-VALUE-OF tag,
except that leading and trailing blanks (if any) are removed from
the value before it is substituted in the page.</p>
<p>The END-FOR tag marks the end of a loop started by the
FOR-EACH-VALUE-IN tag.</p>
<p>The ADVANCE-TO-NEXT-VALUE-OF tag causes subsequent references to the
table variable varname (via the CURRENT- VALUE-OF tag, the
TRIMMED-VALUE-OF tag, or the NO-BLANKS-VALUE-OF tag) to refer to the
next value in the table.</p>
<p>The DO-COUNT-UP-WITH tag marks the start of a loop. varname is the
name of a variable. VIRTEL generates everything between the
DO-COUNT-UP-WITH tag and the END-DO-COUNT tag n times, where n is
the current value of varname. During the execution of the loop, the
value of varname varies from 1 to n, and other table variables
referenced in the loop change when the END-DO-COUNT tag is
encountered.</p>
<p>The END-DO-COUNT tag marks the end of a loop started by the
DO-COUNT-UP-WITH tag.</p>
<p>The DEFINE-AUTOMATIC-COUNTER tag allows automatic generation of a
counter variable in a loop started by the FOR- EACH-VALUE-IN tag.
The parameters are:</p>
</div></blockquote>
</div>
<div class="section" id="init">
<h2>init<a class="headerlink" href="#init" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the initial value of the counter variable</div></blockquote>
</div>
<div class="section" id="incr">
<h2>incr<a class="headerlink" href="#incr" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the increment added at each END-FOR</div></blockquote>
</div>
<div class="section" id="max">
<h2>max<a class="headerlink" href="#max" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the maximum value of the counter variable</div></blockquote>
</div>
<div class="section" id="id113">
<h2>varname<a class="headerlink" href="#id113" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>the name of the counter variable</p>
<p>The variable generated can be the loop master variable (the variable
named in the FOR-EACH-VALUE-IN) or a slave variable. When the
counter reaches its maximum value, the loop terminates if it is the
master, or continues if it is the slave. In the latter case the
counter variable starts again from its initial value.</p>
<p>The DEFINE-SUB-VARIABLE tag allows a sub-variable to be defined. A
sub-variable remaps part of the current value of the loop master
variable in a FOR-EACH-VALUE-IN loop. The parameters are:</p>
</div></blockquote>
</div>
<div class="section" id="offset">
<h2>offset<a class="headerlink" href="#offset" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the offset of the sub-variable in the loop master variable</div></blockquote>
</div>
<div class="section" id="length">
<h2>length<a class="headerlink" href="#length" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the length (in characters) of the sub-variable</div></blockquote>
</div>
<div class="section" id="count">
<h2>count<a class="headerlink" href="#count" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the number of occurrences of the sub-variable</div></blockquote>
</div>
<div class="section" id="subname">
<h2>subname<a class="headerlink" href="#subname" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>the name of the sub-variable</p>
<p>A sub-variable consists of count values, each of length bytes,
starting at offset in the loop master variable. The first byte of
the loop master variable is considered to be offset 0. Sub-variables
are defined outside but referenced within a FOR-EACH-VALUE-IN loop.
A sub-variable can be referenced wherever a normal table variable
would be valid, including the loop master variable of an inner
FOR-EACH-VALUE-IN loop, which could in itself be redefined by other
sub- variables. When the sub-variable is referenced, it acts as an
implicit redefinition of the current value of the master variable of
the innermost FOR-EACH-VALUE-IN loop in which the reference appears.
Thus, the same sub-variable could possibly redefine different loop
master variables if it is referenced in more than one place.</p>
</div></blockquote>
<ol class="arabic">
<li><p class="first"><strong>Examples</strong></p>
<blockquote>
<div><p>A host application uses an FAE5 structured field to create a table
variable called HOSTDATA. The HOSTDATA variable consists of an array
of 20-byte records. Each record consists of an 8-byte key, followed
by six 2-byte codes. The following code generates an HTML table from
this data. Each row of the table contains the row number, the key,
and the codes. A hyperlink is generated for each code, by removing
any trailing blanks from the code and appending “.html”:</p>
<p>The DELETE-ALL-VARIABLES tag deletes all variables in the VIRTEL
variable pool. An optional prefix parameter allows deletion of only
those variables whose names begin with the specified prefix.</p>
<p>The IP-ADDRESS-OF-LINE tag will be replaced by the IP address of the
specified VIRTEL line. For example, {{{IP- ADDRESS-OF-LINE
&#8220;H-HTTP&#8221;}}} might generate 192.168.229.147</p>
<p>The IP-PORT-OF-LINE tag will be replaced by the port number of the
specified VIRTEL line. For example, {{{IP-PORT-OF- LINE &#8220;H-HTTP&#8221;}}}
might generate 41000</p>
<p>The NAME-OF tag allows the insertion in a page of various data items
related to the VIRTEL transaction in progress.</p>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="xxxxxx">
<h2>xxxxxx<a class="headerlink" href="#xxxxxx" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the data item to be inserted. Valid values are:</div></blockquote>
</div>
<div class="section" id="virtel">
<h2>VIRTEL<a class="headerlink" href="#virtel" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The VIRTEL APPLID specified in the VIRTCT</div></blockquote>
</div>
<div class="section" id="relay">
<h2>RELAY<a class="headerlink" href="#relay" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The relay LU name used to connect to the host application</div></blockquote>
</div>
<div class="section" id="print-relay">
<h2>PRINT-RELAY<a class="headerlink" href="#print-relay" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The relay LU name of the associated printer</div></blockquote>
</div>
<div class="section" id="pseudo-terminal">
<h2>PSEUDO-TERMINAL<a class="headerlink" href="#pseudo-terminal" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The VIRTEL terminal name</div></blockquote>
</div>
<div class="section" id="entry-point">
<h2>ENTRY-POINT<a class="headerlink" href="#entry-point" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The VIRTEL entry point name</div></blockquote>
</div>
<div class="section" id="line-internal">
<h2>LINE-INTERNAL<a class="headerlink" href="#line-internal" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The internal name of the VIRTEL line</div></blockquote>
</div>
<div class="section" id="line-external">
<h2>LINE-EXTERNAL<a class="headerlink" href="#line-external" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The external name of the VIRTEL line</div></blockquote>
</div>
<div class="section" id="user">
<h2>USER<a class="headerlink" href="#user" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The user name, if signon has occurred</div></blockquote>
</div>
<div class="section" id="password">
<h2>PASSWORD<a class="headerlink" href="#password" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The user’s password, if signon has occurred</div></blockquote>
</div>
<div class="section" id="user-ip-address">
<h2>USER-IP-ADDRESS<a class="headerlink" href="#user-ip-address" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The IP address of the client terminal</div></blockquote>
</div>
<div class="section" id="sna-status">
<h2>SNA-STATUS<a class="headerlink" href="#sna-status" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The status of the host LU2 session:</div></blockquote>
<ul class="simple">
<li>X: input is inhibited</li>
<li>blank: input is allowed</li>
</ul>
</div>
<div class="section" id="transaction-internal">
<h2>TRANSACTION-INTERNAL<a class="headerlink" href="#transaction-internal" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The internal name of the VIRTEL transaction</div></blockquote>
</div>
<div class="section" id="transaction-external">
<h2>TRANSACTION-EXTERNAL<a class="headerlink" href="#transaction-external" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The external name of the VIRTEL transaction</div></blockquote>
</div>
<div class="section" id="url">
<h2>URL<a class="headerlink" href="#url" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The URL excluding the query string</div></blockquote>
</div>
<div class="section" id="query">
<h2>QUERY<a class="headerlink" href="#query" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The query string from the URL</div></blockquote>
</div>
<div class="section" id="page">
<h2>PAGE<a class="headerlink" href="#page" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The name of the current HTML page template</div></blockquote>
</div>
<div class="section" id="page-internal">
<h2>PAGE-INTERNAL<a class="headerlink" href="#page-internal" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The name of the original HTML page template specified in the URL</div></blockquote>
</div>
<div class="section" id="directory">
<h2>DIRECTORY<a class="headerlink" href="#directory" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The current VIRTEL directory name</div></blockquote>
</div>
<div class="section" id="character-set">
<h2>CHARACTER-SET<a class="headerlink" href="#character-set" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The name of the current UTF-8 character set, or the country code if
the page is not in UTF-8 mode (see <a class="reference external" href="#_bookmark54">“EBCDIC</a>
<a class="reference external" href="#_bookmark54">translation management”, page 55</a>)</div></blockquote>
</div>
<div class="section" id="date-time">
<h2>DATE-TIME<a class="headerlink" href="#date-time" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The current date and time (14 characters in the format
YYYYMMDDHHMMSS)</div></blockquote>
</div>
<div class="section" id="virtel-version">
<h2>VIRTEL-VERSION<a class="headerlink" href="#virtel-version" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The VIRTEL version number</div></blockquote>
</div>
<div class="section" id="xxx-symbol">
<h2>xxx-SYMBOL<a class="headerlink" href="#xxx-symbol" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The value of the system symbol xxx (only if SYSPLUS=YES is specified
in the VIRTCT). Example: SYSNAME-SYMBOL</div></blockquote>
</div>
<div class="section" id="id114">
<h2>len<a class="headerlink" href="#id114" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>an optional length. If specified, the value of the data item will be
padded with blanks or truncated on the right to the specified
length.</p>
<p>The NUMBER-OF tag allows the insertion in a page of various data
items related to the VIRTEL transaction in progress.</p>
</div></blockquote>
</div>
<div class="section" id="id115">
<h2>xxxxxx<a class="headerlink" href="#id115" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the data item to be inserted. Valid values are:</div></blockquote>
</div>
<div class="section" id="screen-columns">
<h2>SCREEN-COLUMNS<a class="headerlink" href="#screen-columns" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The width of the current host 3270 screen</div></blockquote>
</div>
<div class="section" id="screen-lines">
<h2>SCREEN-LINES<a class="headerlink" href="#screen-lines" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The depth of the current host 3270 screen</p>
<p>The AFTER-NOT-LAST-VALUE-OF tag brackets a section of the page which
is to be generated for all except the last iteration of a
FOR-EACH-VALUE-IN loop. The HTML content represented by “...” is
generated unless the current value of the variable varname is the
last in the table.</p>
<p>The AFTER-NOT-LAST-VALUE-OF tag is useful, for example, when
generating a comma-separated list of values, as shown in the example
below:</p>
<p>If the variable myvar contains the values 1, 2, and 3, then this
example would generate [ &#8220;1&#8221;, &#8220;2&#8221;, &#8220;3&#8221; ]</p>
<p>The IF-USER-IS-ALLOWED-TO tag brackets a section of the page whose
appearance is conditional on the user’s authorization to access the
resource resourcename. The HTML content represented by “...” is
generated only if the signed-on user is authorized to access the
specified resource.</p>
<p>The WHEN-EXISTS and END-WHEN-EXISTS tags bracket a section of the
page whose appearance is conditional on the existence of a named
table variable. The variable can be created by a VIRTEL Web
Integration application using the FAE5 or FAE6 structured fields, or
it can be created by a scenario. The HTML content represented by
“...” is generated only if the named variable exists in the context
of the current page and has at least one value.</p>
<p>The WHEN-NOT-EXISTS and END-WHEN-NOT-EXISTS tags are similar to the
WHEN-EXISTS and END-WHEN-EXISTS tags, except that the section of the
page enclosed by the tags is generated only if the named table
variable does not exist.</p>
<p>The WHEN-NOT-BLANK and END-WHEN-NOT-BLANK tags bracket a section of
the page which is generated only if the current value of a named
table variable is non-blank. The HTML content represented by “...”
is omitted if the named variable does not exist, or if its current
value is null or all blanks.</p>
<p>The WHEN-NEXT-EVENT and END-WHEN-NEXT-EVENT tags allow an XML
template to be written which uses variables generated by a
commarea-to-output conversion scenario. These tags work in
conjunction with the $EVENT$ variable generated by th<a class="reference external" href="#_bookmark203">e “MAP$
EVENTUAL-AREA and MAP$ ELSE-THEN-AREA”, page 176</a>.
The section of the page enclosed by the WHEN-NEXT-EVENT and
END-WHEN-NEXT-EVENT tags is generated only if the current value of
the $EVENT$ variable matches the specified eventname.</p>
<p>The WHILE-EVENT and END-WHILE-EVENT tags work in conjunction with
the $EVENT$ variable generated by the <a class="reference external" href="#_bookmark203">“MAP$ EVENTUAL-AREA and MAP$
ELSE-THEN-AREA”, page 176</a>. The WHILE-EVENT tag
marks the start of a loop. Everything between the WHILE-EVENT and
END-WHILE-EVENT tags is generated once for each value of the $EVENT$
variable, as long as the current value of the $EVENT$ variable
matches the specified eventname.</p>
<p>The CREATE-VARIABLE-IF tag with the TRACING-SCENARIO parameter
retrieves the contents of the scenario trace created by th<a class="reference external" href="#_bookmark60">e
“Capability Tokens”, page 58</a>). If the trace is
active, the variable varname will be created. The value of this
variable is a JSON structure (see example below) which can be used
by Virtel Studio.</p>
<p>The trace data for a specific terminal may be obtained by specifying
an x-Virtel-Debug=capability-token parameter in the URL. The
<a class="reference external" href="#_bookmark60">“capability tokens”, page 58</a> is generated by a
SET-HEADER tag issued by the terminal which owns the trace data.</p>
<p>{ &#8220;scenario&#8221;:&#8221;EXECUTE3&#8221;, &#8220;externalName&#8221;:&#8221;EXECUTE3&#8221;,</p>
<p>&#8220;compiled&#8221;:&#8221;02/04/13 18.49 &#8221;, &#8220;terminal&#8221;:&#8221;HTVTA012&#8221;,
&#8220;relay&#8221;:&#8221;R5HVT511&#8221;, &#8220;trace&#8221;:[</p>
<p>{&#8220;t&#8221;:&#8221;20:38:41.14&#8221;,&#8221;o&#8221;:&#8221;00014A&#8221;,&#8221;i&#8221;:&#8221;COPY$&#8221;},</p>
<p>{&#8220;t&#8221;:&#8221;20:38:41.14&#8221;,&#8221;o&#8221;:&#8221;00015E&#8221;,&#8221;i&#8221;:&#8221;TOVAR$&#8221;},</p>
<p>{&#8220;t&#8221;:&#8221;20:38:41.14&#8221;,&#8221;o&#8221;:&#8221;000046&#8221;,&#8221;i&#8221;:&#8221;MAP$&#8221;},</p>
<p>{&#8220;t&#8221;:&#8221;20:38:41.14&#8221;,&#8221;o&#8221;:&#8221;000058&#8221;,&#8221;i&#8221;:&#8221;MAP$&#8221;,&#8221;p&#8221;:[{&#8220;Customer&#8221;:&#8221;A0111115&#8221;}]},</p>
<p>{&#8220;t&#8221;:&#8221;20:38:41.14&#8221;,&#8221;o&#8221;:&#8221;000066&#8221;,&#8221;i&#8221;:&#8221;MAP$&#8221;},</p>
<p>{&#8220;t&#8221;:&#8221;20:38:41.14&#8221;,&#8221;o&#8221;:&#8221;000078&#8221;,&#8221;i&#8221;:&#8221;MAP$&#8221;,&#8221;p&#8221;:[{&#8220;Datemin&#8221;:&#8221;20110505&#8221;}]},</p>
<p>{&#8220;t&#8221;:&#8221;20:38:41.14&#8221;,&#8221;o&#8221;:&#8221;000086&#8221;,&#8221;i&#8221;:&#8221;MAP$&#8221;,&#8221;p&#8221;:[{&#8220;Datemax&#8221;:&#8221;20110525&#8221;}]},</p>
<p>{&#8220;t&#8221;:&#8221;20:38:41.14&#8221;,&#8221;o&#8221;:&#8221;000110&#8221;,&#8221;i&#8221;:&#8221;MAP$&#8221;},</p>
<p>{&#8220;t&#8221;:&#8221;20:38:41.14&#8221;,&#8221;o&#8221;:&#8221;000170&#8221;,&#8221;i&#8221;:&#8221;CASE$&#8221;,&#8221;p&#8221;:[{&#8220;CURLINE&#8221;:&#8221;0&#8221;}]},</p>
<p>{&#8220;t&#8221;:&#8221;20:38:41.14&#8221;,&#8221;o&#8221;:&#8221;0001FC&#8221;,&#8221;i&#8221;:&#8221;COPY$&#8221;},</p>
<p>{&#8220;t&#8221;:&#8221;20:38:41.14&#8221;,&#8221;o&#8221;:&#8221;000214&#8221;,&#8221;i&#8221;:&#8221;COPY$&#8221;}]}</p>
<p><em>Exampleof a JSON structure generated by TRACING-SCENARIO</em></p>
<p>For more informations, se<a class="reference external" href="#_bookmark50">e “CREATE-VARIABLE-IF”, page
51</a>.</p>
<p>The CREATE-VARIABLE-IF tag allows the conditional creation of a
VIRTEL variable. If the specified condition is true, the variable
varname will be created and initialized with a value as shown in the
list of condition names below. This variable can be used
subsequently to conditionally generate a section of the page
bracketed by WHEN-EXISTS and END-WHEN-EXISTS tags.</p>
<p>The possible values of the condition parameter for the
CREATE-VARIABLE-IF tag are listed below:</p>
</div></blockquote>
</div>
<div class="section" id="signon-is-needed">
<h2>SIGNON-IS-NEEDED<a class="headerlink" href="#signon-is-needed" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The variable varname is created if a signon is needed, i.e. if the
transaction security type is non-zero and the user has not yet
successfully signed on at the terminal.</div></blockquote>
</div>
<div class="section" id="signon-is-ok">
<h2>SIGNON-IS-OK<a class="headerlink" href="#signon-is-ok" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The variable varname is created if the user has successfully signed
on at the terminal. The initial value of the variable is the user
name.</div></blockquote>
</div>
<div class="section" id="application-is-connected">
<h2>APPLICATION-IS-CONNECTED<a class="headerlink" href="#application-is-connected" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The variable varname is created if the terminal is connected to a
host application. The initial value of the variable is either the
VTAM application name, or the external name of the VIRTEL
transaction, depending on the value of the AIC parameter in the
VIRTCT (see “Parameters of the VIRTCT” in the VIRTEL Installation
Guide).</p>
<p>For more informations, se<a class="reference external" href="#_bookmark48">e “CREATE-VARIABLE-IF”, page
51</a>, in the “Debugging facilities” section.</p>
<p>When used in conjunction with a security type 4 transaction, the
DECLARE-FIELD-AS tag allows VIRTEL to obtain the userid and password
from fields embedded in the HTML page. For an example, se<a class="reference external" href="#_bookmark288">e
“Signon using HTML fields”,</a> <a class="reference external" href="#_bookmark288">page
255</a>.</p>
<p>The DECLARE-FIELD-AS tag indicates to VIRTEL that the HTML field
whose name is fieldname is to be treated as a userid or password
field when used with a transaction defined as having security type
4. One of more attribute values must be specified. The possible
attributes are listed below:</p>
</div></blockquote>
</div>
<div class="section" id="username">
<h2>USERNAME<a class="headerlink" href="#username" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>indicates that the field contains the name of the user (userid) to
be signed on.</div></blockquote>
</div>
<div class="section" id="id116">
<h2>PASSWORD<a class="headerlink" href="#id116" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>indicates that the field contains the user’s password.</div></blockquote>
</div>
<div class="section" id="new-password">
<h2>NEW-PASSWORD<a class="headerlink" href="#new-password" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>indicates that the field contains a new password. VIRTEL will
request the security product to change the user’s current password
to the new value if the signon is successful.</div></blockquote>
</div>
<div class="section" id="hex">
<h2>HEX<a class="headerlink" href="#hex" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>indicates that VIRTEL expects the browser to encode the field in
hexadecimal.</div></blockquote>
</div>
<div class="section" id="base64">
<h2>BASE64<a class="headerlink" href="#base64" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>indicates that VIRTEL expects the browser to encode the field in
base64 format.</div></blockquote>
</div>
<div class="section" id="encrypted">
<h2>ENCRYPTED<a class="headerlink" href="#encrypted" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>indicates that VIRTEL expects the browser to encrypt the field using
the session key specified elsewhere in the page (se`e
“DECLARE-FIELD-AS CRYPTO-SESSION-KEY”, page 54 &lt;#_bookmark52&gt;`__)</p>
<p>Examples:</p>
<p>The same field can be both declared and defined:</p>
<p>The above example indicates that the field NOM is transmitted to
VIRTEL in base64 format. In this case, the DEFINE must precede the
DECLARE.</p>
<p>The USER-SIGNON-CODE tag generates a unique value called a
signoncode which may be used with the VirtelUserSignon parameter of
the URL to propagate the signed-on user’s credentials to another
page (see <a class="reference external" href="#_bookmark14">“Propagation of signon by URL”, page
20</a>).</p>
<p>The presence of certain tags in a page template causes VIRTEL to
generate encryption keys and to encrypt and decrypt selected data in
the page. The use of these tags is dependent upon the specification
of a CRYPTn parameter in the VIRTCT (see “Parameters of the VIRTCT”)
in the VIRTEL Installation Guide manual.</p>
<p>The ENCRYPTION-PARAMETERS tag inserts into the page the contents of
one or all fields of the CRYPTn parameter whose name field is
cryptname. If the VIRTCT does not contain a CRYPTn parameter with
name cryptname then the ENCRYPTION-PARAMETERS tag returns a null
value.</p>
<p>If the optional field parameter is specified, the
ENCRYPTION-PARAMETERS tag returns the specified or defaulted value
of one field of the CRYPTn parameter, without quotes. The names of
the fields are:</p>
</div></blockquote>
</div>
<div class="section" id="id117">
<h2>NAME<a class="headerlink" href="#id117" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The name of this set of encryption parameters.</div></blockquote>
</div>
<div class="section" id="algorithm">
<h2>ALGORITHM<a class="headerlink" href="#algorithm" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The symmetric encryption algorithm.</div></blockquote>
</div>
<div class="section" id="initial-algorithm">
<h2>INITIAL-ALGORITHM<a class="headerlink" href="#initial-algorithm" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The asymmetric encryption algorithm.</div></blockquote>
</div>
<div class="section" id="driver">
<h2>DRIVER<a class="headerlink" href="#driver" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The name of the encryption engine.</div></blockquote>
</div>
<div class="section" id="format">
<h2>FORMAT<a class="headerlink" href="#format" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The encoding used for encrypted text.</div></blockquote>
</div>
<div class="section" id="chaining">
<h2>CHAINING<a class="headerlink" href="#chaining" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The chaining method for symmetric encryption.</div></blockquote>
</div>
<div class="section" id="padding">
<h2>PADDING<a class="headerlink" href="#padding" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The padding method for symmetric encryption.</p>
<p>If the field parameter is not specified, then the
ENCRYPTION-PARAMETERS tag returns the specified or defaulted values
of all fields of the CRYPTn parameter. Each value is surrounded by
single quotes and the values are separated by commas.</p>
<p>Example: If the VIRTCT contains the following parameters:</p>
<p>then the tag {{{ENCRYPTION-PARAMETERS (ALGORITHM) &#8220;CRYPT3270&#8221;}}}</p>
<p>returns the value 3TDEA,</p>
<p>and the tag {{{ENCRYPTION-PARAMETERS &#8220;CRYPT3270&#8221;}}}</p>
<p>returns the value
&#8216;CRYPT3270&#8217;,&#8216;3TDEA&#8217;,&#8217;RSA-1024&#8217;,&#8217;ICSF&#8217;,&#8217;HEX&#8217;,&#8217;CBC&#8217;,&#8217;PKCS7&#8217;</p>
<p>The presence of one or more PUBLIC-KEY tags in a page template
causes VIRTEL to generate a public/private key pair for the session,
and to insert the value of the specified component of the public key
into the page. The public/private key pair is generated according to
the INITIAL-ALGORITHM specified in the CRYPTn parameter whose name
field is cryptname. If the VIRTCT does not contain a CRYPTn
parameter with name cryptname then no key is generated and the
PUBLIC-KEY tag returns a null value.</p>
</div></blockquote>
</div>
<div class="section" id="component">
<h2>component<a class="headerlink" href="#component" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the name of the public key component to be inserted into the
page. Possible values are:</div></blockquote>
</div>
<div class="section" id="exponent">
<h2>EXPONENT<a class="headerlink" href="#exponent" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The hexadecimal value of the public exponent.</div></blockquote>
</div>
<div class="section" id="modulus">
<h2>MODULUS<a class="headerlink" href="#modulus" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The hexadecimal value of the modulus.</p>
<p>When used in conjunction with the PUBLIC-KEY tag, the
DECLARE-FIELD-AS tag indicates to VIRTEL that the HTML field whose
name is fieldname is to be treated as an encrypted session key.
VIRTEL decrypts the contents of the field using the corresponding
private key (which is known only to VIRTEL) and uses it as the
session key when symmetric encryption is requested by the
SET-LOCAL-OPTIONS (ENCRYPT-PASSWORD-FIELDS) tag. The possible
attributes are listed below:</p>
</div></blockquote>
</div>
<div class="section" id="crypto-session-key">
<h2>CRYPTO-SESSION-KEY<a class="headerlink" href="#crypto-session-key" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>indicates that the field contains the session key encrypted under
the public key specified by the PUBLIC-KEY tag.</p>
<p>When used in conjunction with the PUBLIC-KEY and DECLARE-FIELD-AS
(CRYPTO-SESSION-KEY) tags, the SET-LOCAL- OPTIONS tag activates
encryption for selected fields that are sent and received in HTML
pages.</p>
</div></blockquote>
</div>
<div class="section" id="id118">
<h2>option<a class="headerlink" href="#id118" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the following values indicate the use of encryption :</div></blockquote>
</div>
<div class="section" id="encrypt-password-fields">
<h2>ENCRYPT-PASSWORD-FIELDS<a class="headerlink" href="#encrypt-password-fields" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>indicates that 3270 non-display unprotected (data entry) fields are
encrypted in both inbound and outbound messages, and that 3270
non-display protected (output only) fields are replaced by blanks in
outbound messages.</p>
<p>Encryption is performed according to the symmetric encryption method
indicated by the CRYPTn parameter specified by the PUBLIC-KEY tag,
using the session key specified by the DECLARE-FIELD-AS
(CRYPTO-SESSION-KEY) tag. The GENERATE-HTML tag automatically adds
an additional VCRYPT attribute to each encrypted field.</p>
<p>By default, VIRTEL translates host application EBCDIC data into
ISO-8859-1 before sending it to the browser. This default behaviour
is suitable for Western European and English speaking countries. The
COUNTRY parameter in the VIRTCT indicates which EBCDIC country
codepage is used by host applications, and serves to select the
appropriate default EBCDIC-to-ISO-8859-1 translation table within
VIRTEL. Translation tables other than the default may be selected by
means of the SET-COUNTRY-CODE tag.</p>
<p>The SET-COUNTRY-CODE tag allows the 3270 host application data to be
translated to ISO-8859-1 according to an EBCDIC codepage other than
the default codepage implied by the COUNTRY parameter in the VIRTCT.
It may also be used to translate from the French EBCDIC codepage to
ASCII Western European codepage 850, or to translate from Latin-2
EBCDIC Multilingual (CP870) to either ISO-8859-2 Latin-2 (CP912) or
PC Latin-2 (CP852).</p>
<p>This tag takes effect starting from the point where it appears in
the template page, and it may appear multiple times in a single
page. The possible values for the countryname parameter are shown in
the table below:</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p><em>Country Codes for EBCDIC to ASCII translation</em></p>
<p>Note: Values in parentheses are accepted for compatibility with
previous versions of VIRTEL</p>
<p>The COUNTRY-CODE tag inserts the country code into the page, where
it can be tested by JavaScript.</p>
<p>For countries which use a non-Western European language, VIRTEL can
generate data in UTF-8 encoding instead of ISO-8859-1. This is done
by embedding the SET-OUTPUT-ENCODING-UTF-8 tag in the page template:</p>
<p>The SET-OUTPUT-ENCODING-UTF-8 tag indicates that host data inserted
in the template page by VIRTEL is to be in UTF-8 format, translated
according to the EBCDIC country codepage whose name is specified
within quotes. The</p>
<p>possible values for charset are given under the description of the
DEFUTF8 parameter of the VIRTCT. If no charset value is specified,
as for example {{{SET-OUTPUT-ENCODING-UTF-8 &#8220;&#8221;}}}, then the default
value of charset is the codepage specified by the DEFUTF8 parameter
of the VIRTCT described in the VIRTEL Installation Guide.</p>
<p>When SET-OUTPUT-ENCODING-UTF-8 is specified, the rest of the
template page must also be coded in UTF-8, and, in the case of an
HTML page, must contain the HTML tag:</p>
<p>In the case of an XML page, no such instruction is needed because
XML is considered to be encoded in UTF8 by default.</p>
<p>A 3270 application generates US EBCDIC (CECP 037). The following
statements, coded between the &lt;HEAD&gt; and</p>
<p>&lt;/HEAD&gt; tags in the template page, ensure the correct translation of
this application’s data:</p>
<p>Another 3270 application generates output using the Chinese
Simplified EBCDIC character set (IBM1388). The output is to be
translated to UTF-8 and inserted into a template page which must
also be encoded in UTF-8:</p>
<p>A third 3270 application generates output using the Spanish EBCDIC
character set, which is to be translated to UTF-8 and inserted into
the template page. In this example, we assume that the parameter
DEFUTF8=IBM1145 has been specified in the VIRTCT, so we can use this
as the default value for the SET-OUTPUT-ENCODING-UTF-8 tag:</p>
<p>In each case, the {{{SET}}} statement tells VIRTEL what character
set to generate, while the &lt;META&gt; statement tells the browser what
character set to expect.</p>
<p>If you specify neither SET-OUTPUT-ENCODING-UTF-8 nor
SET-COUNTRY-CODE, then VIRTEL will generate ISO-8859-1 according to
the default COUNTRY parameter specified in the VIRTCT.</p>
<p>Normally when VIRTEL delivers a page via HTTP it includes an HTTP
response status code of “200 OK”. The SET-HTTP- RETURN-CODE allows
the page to specify an alternative HTTP response status code. This
may be useful, for example, in a page which contains an error
message from an application.</p>
<p>The SET-HTTP-RETURN-CODE tag indicates to VIRTEL the HTTP status
code and supplementary text which will be sent in the HTTP response
message when this page is delivered. rc is a 3-digit numeric status
code, as defined by RFC 2616, and text is the text which accompanies
the numeric code.</p>
<p>Example :</p>
<p>When delivering static elements such as menu pages, images, and
JavaScript programs, VIRTEL indicates to the browser that the
element is eligible to be stored in the browser’s cache. This
improves performance because the browser does not have to request
the element from VIRTEL each time it is required. By contrast,
dynamic elements (i.e. elements which contain VIRTEL tags) are
generally marked as non-cacheable because their content is likely to
change each time the page is requested.</p>
<p>The VIRTEL tags described in this section are used to override the
default cacheable/non-cacheable behavior.</p>
<p>When an element contains a SET-PAGE-CACHEABLE tag, VIRTEL will
generate two HTTP headers: an Expires: header which indicates that
the browser may cache the element until midnight, and a
Last-Modified:.header which contains the date that the element was
uploaded to VIRTEL. This is the default for static elements.</p>
<p>When an element contains a SET-PAGE-NOT-CACHEABLE tag, VIRTEL will
generate an Expires: 0 HTTP header indicating that the browser
should not store the element in its cache. This is the default for
dynamic elements.</p>
<p>When an element contains a SET-MAX-AGE tag, VIRTEL will not generate
the normal Expires: and Last-Modified:.HTTP headers, but instead it
will generate a Cache-Control: max-age=secs header, where secs
represents the validity time (in seconds) during which the browser
may keep the element in its cache.</p>
<p>VIRTEL associates a MIME-type with each page template or other
element stored in a directory. VIRTEL always sends the MIME-type to
the browser when the browser requests any element. Some browsers use
the MIME-type to determine how to display the element. For example,
HTML pages must have MIME-type “text/html”, XML pages must have
MIME-type “text/xml”, JPG files must have MIME-type “image/jpeg”,
etc.</p>
<p>VIRTEL normally sets the MIME-type to the value indicated by the
browser or mailer at the time the page is uploaded. However, in
certain cases VIRTEL may force the MIME-type to a different value:</p>
<ul class="simple">
<li>If the filename extension is .HTM or .HTML, or is absent, VIRTEL</li>
</ul>
<p>will force the MIME-type to be “text/html”. This is because some
versions of Internet Explorer upload HTML files using MIME-type
“text/plain”</p>
<ul class="simple">
<li>If the file contains a SET-CONTENT-TYPE tag, then VIRTEL will</li>
</ul>
<p>force the MIME-type to the value specified in the tag</p>
<p>The SET-CONTENT-TYPE tag allows the administrator to override the
MIME-type supplied by the browser or mailer when the element is
uploaded. VIRTEL stores the value of the parameter mimetype in the
directory with the element.</p>
<p>In the following example, the page template is to be stored with a
MIME-type which will cause the browser to process it as speadsheet
data:</p>
<p>VIRTEL capability tokens permit an HTTP transaction to access data
associated with an transaction running on another terminal. The
token is delivered by VIRTEL by means of an x-Virtel HTTP response
header from the terminal which owns the capability, and the same
token is returned to VIRTEL in a subsequent URL sent by the terminal
which wishes to use the capability (se`e “Capability URLs”, page
18 &lt;#_bookmark12&gt;`__). The x-Virtel HTTP header is generated by a
SET-HEADER tag embedded in a page template sent by the terminal
which owns the capablity.</p>
<p>When the SET-HEADER tag is present in a page template, VIRTEL
generates an HTTP response header.</p>
<p>When type is one of the VIRTEL capability types listed below, the
quoted string header-string is the name of the header; this name
should start with x-Virtel- should end with a colon (:) and should
not contain blanks. The capability value is an opaque string added
by VIRTEL.</p>
<p>When type is AS-IS the quoted string header-string is a complete
header (including value) to be added as-is. No capability processing
is performed in this case.</p>
<p>The VIRTEL capability types are:</p>
</div></blockquote>
</div>
<div class="section" id="to-allow-read-of-scenario-trace">
<h2>TO-ALLOW-READ-OF-SCENARIO-TRACE<a class="headerlink" href="#to-allow-read-of-scenario-trace" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Generates a capability token which permits a subsequent requester to
obtain this terminal’s trace data by means of the CREATE-VARIABLE-IF
TRACING-SCENARIO tag described on page 61.</div></blockquote>
</div>
<div class="section" id="giving-access-to-user-directory-with-my-userid">
<h2>GIVING-ACCESS-TO-%USER%-DIRECTORY-WITH-MY-USERID<a class="headerlink" href="#giving-access-to-user-directory-with-my-userid" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The capability token generated by this tag may be used by a
subsequent request to access a directory which has</p>
<p>%USER% in the keyword field of its definition. The userid of the
capability owning transaction will be used as the directory key when
the directory is accessed.</p>
</div></blockquote>
</div>
<div class="section" id="giving-access-to-group-directory-with-my-userid">
<h2>GIVING-ACCESS-TO-%GROUP%-DIRECTORY-WITH-MY-USERID<a class="headerlink" href="#giving-access-to-group-directory-with-my-userid" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The capability token generated by this tag may be used by a
subsequent request to access a directory which has</p>
<p>%GROUP% in the keyword field of its definition. The RACF group name
of the capability owning transaction will be used as the directory
key when the directory is accessed.</p>
</div></blockquote>
</div>
<div class="section" id="giving-access-to-user-directory-in-variable-user">
<h2>GIVING-ACCESS-TO-%USER%-DIRECTORY-IN-VARIABLE-%USER%<a class="headerlink" href="#giving-access-to-user-directory-in-variable-user" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The capability token generated by this tag may be used by a
subsequent request to access a directory which has</p>
<p>%USER% in the keyword field of its definition. The value of the
%USER% variable of the capability owning transaction will be used as
the directory key when the directory is accessed.</p>
</div></blockquote>
</div>
<div class="section" id="giving-access-to-group-directory-in-variable-group">
<h2>GIVING-ACCESS-TO-%GROUP%-DIRECTORY-IN-VARIABLE-%GROUP%<a class="headerlink" href="#giving-access-to-group-directory-in-variable-group" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The capability token generated by this tag may be used by a
subsequent request to access a directory which has</p>
<p>%GROUP% in the keyword field of its definition. The value of the
%GROUP% variable of the capability owning transaction will be used
as the directory key when the directory is accessed.</p>
<p>The SECURITY-TOKEN and IF-SECURITY-TOKEN-IS-READY tags are used
during uploading of HTML pages from a browser (se`e “Uploading pages
by HTTP (secured by cookie)”, page 68 &lt;#_bookmark79&gt;`__).</p>
<p>If the SECURITY-TOKEN tag is present in a template page, VIRTEL
substitutes a newly generated user security code to be used for the
next transfer. For example,</p>
<p>If a security code exists, the above code might generate:</p>
<p>var VirtelRef =
&#8220;20040427130843.07F5D1DC.56A85680Bgpamk4WZRKKBiZWjS4OTlqSES4OWlA==&#8221;;</p>
<p>otherwise it will generate:</p>
<p>var VirtelRef = &#8220;&#8221;;</p>
<p>Two examples of the use of the SECURITY-TOKEN tag are supplied in
the HTMLBAS directory used by VIRTEL entry point DEMOHTTP. The
upload.htm page stores and retransmits the user security code in the
form of a cookie (VirtelRef=xxxxxxxxxxxxxxxx). The upload2.htm page
retransmits the user security code using the VirtelCookie= parameter
of the URL (see <a class="reference external" href="#_bookmark13">“Transmission of upload cookie by URL”, page
19</a>), but it does not store the code.</p>
<p>The IF-SECURITY-TOKEN-IS-READY tag encloses HTML or JavaScript code
to be generated only if a non-empty SECURITY-TOKEN is present.</p>
<p>Note that the total size of this tag, including the enclosed code,
must not exceed the size of an inter-block buffer (120 characters)
otherwise it will not be correctly processed if it spans blocks.</p>
<p>Each relay LU, through which a user connects to a host application,
can be associated with a second LU which represents a virtual
printer (see the description of HTTP terminals in the VIRTEL
Connectivity Reference</p>
<p>documentation). Data sent to this virtual printer by a host
application (such as CICS) are stored by VIRTEL and can be retrieved
by means of the tags IF-PRINT-IS-READY, SESSION-CODE, and PRINT
embedded in a template page.</p>
<p>The IF-PRINT-IS-READY tag encloses a section of the page which is
generated only if print data exists on the virtual printer
associated with the user’s session. The HTML content represented by
“...” is generated only if VIRTEL has data ready to be printed.</p>
<p>The SESSION-CODE tag, prefixed by the word “Print”, generates a
sessioncode which allows a subsidiary window to be opened for the
print data associated with the specified session. The template page
displayed in this window can retrieve the stored print data by means
of the PRINT tag. The user can then view the print data, and can, if
desired, send the data to a physical workstation printer using the
normal procedure for printing from a browser.</p>
<p>For example:</p>
<p>The PRINT tag allows a template page, such as the imprim.htm page
supplied with VIRTEL, to retrieve 3287 print data. The structured
field FAD3 also allows print data to be fed to VIRTEL for retrieval
with the PRINT tag.</p>
<p>When a page template is processed in a scenario by a COPY$
OUTPUT-FILE-TO-VARIABLE instruction with the TYPE=LINEBUFFER
parameter, the page template may contain additional tags. These tags
are used to assist in the construction of INPUT, DOCOPT, and LAYOUT
files in the “LINEBUF” format required by the MakePDF program
product.</p>
<p>These files may then be passed to the VIRSVPDF service program which
invokes MakePDF to generate output files in PDF format. Refer t<a class="reference external" href="#_bookmark239">o
“PDF output generation”, page 202</a> for an example
scenario.</p>
<p>The PDF-LINES-PER-PAGE tag inserts “1” in the ASA carriage control
character position after every nn lines.</p>
<p>The PDF-NEW-DOCOPT tag is used only in a MakePDF DOCOPT file. It
identifies the DOCOPT file by the character “n”. This allows the
DOCOPT file to be referenced by the PDF-USE-DOCOPT tag in the
corresponding INPUT file.</p>
<p>The PDF-NEW-INPUT tag is used only in a MakePDF INPUT file. It
identifies the start of a new segment in the INPUT file.</p>
<p>The PDF-NEW-LAYOUT tag is used only in a MakePDF LAYOUT file. It
identifies the LAYOUT file by the character “n”. This allows the
LAYOUT file to be referenced by the PDF-USE-LAYOUT tag in the
corresponding INPUT file.</p>
<p>The PDF-OUTLINE tag inserts “&#64;” in the ASA carriage control
character position.</p>
<p>The PDF-PAGE-BREAK tag inserts “1” in the ASA carriage control
character position.</p>
<p>The PDF-USE-DOCOPT tag is used only in a MakePDF INPUT file. It
specifies that the INPUT file is associated with the DOCOPT file
identified by the character “n”</p>
<p>The PDF-USE-LAYOUT tag is used only in a MakePDF INPUT file. It
specifies that the INPUT file is associated with the LAYOUT file
identified by the character “n”</p>
<p>The PDF-VARIABLE tag inserts “=” in the ASA carriage control
character position.</p>
<p>One of the methods which VIRTEL may use to identify users is by
means of a security code which the user presents to VIRTEL, either
in an incoming e-mail, or by means of a “cookie” included in an HTTP
request by the browser. A user which VIRTEL recognizes in this way
is known as a “Correspondent”. VIRTEL stores the list of
correspondents in a VSAM file known as the “Correspondent file”,
also known as the “VIRHTML” file.</p>
<p>VIRTEL uses the correspondent file for the following purposes:</p>
<ul class="simple">
<li>the rules of an HTTP line permit VIRTEL to distinguish between</li>
</ul>
<p>correspondents and non-correspondents when processing incoming HTTP
requests. When the requesting user is identified as a correspondent,
a special entry point may be assigned, or a set of rules specific to
the user may be executed. Refer to “Rules” in the VIRTEL
Connectivity Reference manual for further details.</p>
<ul class="simple">
<li>the rules of an HTTP line may assign a specific LU name to a</li>
</ul>
<p>correspondent connecting to a host application via web access. This
is known as “LU nailing” and is described in more detail in the
VIRTEL LU Nailing HOWTO manual.</p>
<ul class="simple">
<li>a correspondent may be authorized to upload HTML pages and other</li>
</ul>
<p>elements into an HTMLTRSF file. For further details, refer t<a class="reference external" href="#_bookmark78">o
“Uploading pages by SMTP”, page 67</a> and <a class="reference external" href="#_bookmark79">“Uploading
pages by HTTP (secured by cookie)”, page 68</a>.</p>
<p>There are two types of correspondent: an e-mail correspondent and a
local correspondent:</p>
<ul class="simple">
<li>An <strong>e-mail correspondent</strong> is always defined by the VIRTEL</li>
</ul>
<p>administrator. When the administrator activates an e- mail
correspondent, VIRTEL sends an e-mail message to the correspondent
containing the security code. The correspondent then either replies
to the e-mail message or clicks on a link in the message to connect
to VIRTEL.</p>
<ul class="simple">
<li>A <strong>local correspondent</strong> is activated by the correspondent using</li>
</ul>
<p>a procedure known as “self-registration”. The self- registration
procedure creates a clickable link which delivers the security code
to the correspondent’s browser via a cookie. The VIRTEL
administrator may optionally pre-define or change the
characteristics of a correspondent by using the correspondent
management sub-application. Self-registration is described in the
VIRTEL LU Nailing HOWTO manual.</p>
<p>The correspondent management sub-application, which allows the
VIRTEL administrator to define the parameters associated with a
correspondent, is accessible by pressing [PF5] in the VIRTEL
configuration menu, or [PF12] in the system services sub-application
menu, or from the VIRTEL Multi-Session screen via an application
referencing the module VIR0041A.</p>
<p>When security is active, access to the correspondent management
sub-application from the configuration menu or from the system
services sub-application menu is controlled by the resource
$$PCPC$$.</p>
<p>When it is accessed by a transaction, the rules of security
management of transactions will apply. Security management is
described under the heading “Security” 282.</p>
<p>This sub-application initially displays a summary screen of existing
definitions presented in alphanumeric order. Access to the detail of
a correspondent is achieved by positioning the cursor and pressing
[PF12].</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="26%" />
<col width="26%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">P1=Update</th>
<th class="head">P2=Delete</th>
<th class="head">P3=Return</th>
<th class="head">P6=Rules</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>P7=Previous</td>
<td>P8=Next</td>
<td>P12=Edit</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote>
<div><em>Summary of correspondents</em></div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="39%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">P1=Update</th>
<th class="head">P3=Return</th>
<th class="head">Enter=Add</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>P4=Activate</td>
<td>P5=Disable</td>
<td>P6=Rules</td>
</tr>
</tbody>
</table>
<blockquote>
<div><em>Correspondent detail screen (e-mail correspondent)</em></div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="8%" />
<col width="36%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">P1=Update</th>
<th class="head">&#160;</th>
<th class="head">P3=Return</th>
<th class="head">Enter=Add</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>P4=Activate</td>
<td>&#160;</td>
<td>P5=Disable</td>
<td>P6=Rules</td>
</tr>
</tbody>
</table>
<blockquote>
<div><em>Correspondent detail screen (local correspondent)</em></div></blockquote>
</div>
<div class="section" id="id119">
<h2>Id<a class="headerlink" href="#id119" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>For an e-mail correspondent: the e-mail address of the correspondent</p>
<p>For a local correspondent: a unique identifier generated by the
self-registration procedure, or assigned by the VIRTEL administrator</p>
</div></blockquote>
</div>
<div class="section" id="type-of-id">
<h2>Type of Id<a class="headerlink" href="#type-of-id" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><strong>1</strong></p>
<p>this is an e-mail correspondent</p>
</div></blockquote>
</div>
<div class="section" id="id120">
<h2>2<a class="headerlink" href="#id120" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>this is a local correspondent whose security code is generated at
activation time and subsequently remains constant</div></blockquote>
</div>
<div class="section" id="id121">
<h2>3<a class="headerlink" href="#id121" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>this is a local correspondent whose security code changes each time
it is accessed</div></blockquote>
</div>
<div class="section" id="activation-message">
<h2>Activation message<a class="headerlink" href="#activation-message" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Message received by the user at time of activation of his account.
This message can contain a link allowing the user to connect to a
host application or to open the upload.htm page with automatic
installation of an authorization cookie. The activation message may
include the following variables:</div></blockquote>
</div>
<div class="section" id="r">
<h2>&amp;R<a class="headerlink" href="#r" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>meaning “insert a blank line”</div></blockquote>
</div>
<div class="section" id="c">
<h2>&amp;C<a class="headerlink" href="#c" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>meaning “insert security code”. The activation security code is
inserted into the message in the form VirtelCookie=xxx</div></blockquote>
</div>
<div class="section" id="rule-set">
<h2>Rule Set<a class="headerlink" href="#rule-set" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(optional) The name of the rule set associated with this user.</div></blockquote>
</div>
<div class="section" id="id122">
<h2>Directory<a class="headerlink" href="#id122" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(optional) Name of the directory into which this correspondent may
upload files.</div></blockquote>
</div>
<div class="section" id="last-contact">
<h2>Last contact<a class="headerlink" href="#last-contact" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Date and time of the last transfer, and the IP address of the
correspondent.</div></blockquote>
</div>
<div class="section" id="contacts">
<h2>Contacts<a class="headerlink" href="#contacts" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The number of contacts since the last activation.</p>
<p>In order to be operational, a correspondent account must be
activated. This is achieved by pressing [PF4] at the CORRESPONDENT
DETAIL DEFINITION screen. In the case of an e-mail correspondent,
VIRTEL will transmit an initial e- mail to the correspondent
containing the security code to be used for the transfers. The
message ACTIVATION WAS REQUESTED indicates that the correspondent’s
security code has been activated, and, in the case of an e-mail
correspondent, that the e-mail was sent successfully. The number of
contacts is reset to zero.</p>
<p>To activate an e-mail correspondent, the administrator must be
logged on to VIRTEL via an entry point containing a transaction with
external name $MAIL$ (application type=3) which contains, in the
application field, the name of the SMTP line used by VIRTEL. The
message YOU ARE NOT AUTHORISED TO USE THIS APPLICATION indicates
that the</p>
<p>$MAIL$ transaction is not defined.</p>
<p>A correspondent’s security code may be cancelled by deactivating
with the [PF5] key. The message DISABLE WAS DONE indicates that the
deactivation was successful.</p>
<p>To display the list of rules associated with this correspondent,
press the [PF6] key.</p>
<p>HTML pages and other elements such as graphics can be uploaded to
VIRTEL by any of the following methods:</p>
</div></blockquote>
<ol class="arabic">
<li><p class="first">by e-mail (SMTP)</p>
</li>
<li><p class="first">by web browser (HTTP), with cookie security</p>
</li>
<li><p class="first">by web browser (HTTP), with signon security</p>
<blockquote>
<div><p>Upload by SMTP allows the administrator to load HTML pages into
VIRTEL by e-mail. VIRTEL sends the administrator an e-mail, and the
administrator replies to this e-mail with the pages to be uploaded
included as attachments. VIRTEL sends another e-mail to inform the
administrator that the upload was successful. The administrator
saves this e-mail and replies to it the next time he has a set of
pages to upload.</p>
<ul class="simple">
<li>Check the definition of your SMTP line (F1 then F12 from the</li>
</ul>
<p>Configuration Menu, see the VIRTEL Connectivity Reference
documentation).</p>
<ul class="simple">
<li>Press F5 from the Configuration Menu and define an e-mail</li>
</ul>
<p>correspondent specifying W2H-DIR as the directory name:</p>
</div></blockquote>
</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="47%" />
<col width="31%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">P1=Update</th>
<th class="head">P3=Return</th>
<th class="head">Enter=Add</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>P4=Activate</td>
<td>P5=Disable</td>
<td>P6=Rules</td>
</tr>
<tr class="row-odd"><td>ACTIVATION WAS REQUESTED</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote>
<div><em>Page upload by SMTP: Creating an e-mail correspondent</em></div></blockquote>
<ol class="arabic">
<li><p class="first">Activate the e-mail correspondent: see “Account activation” under the
heading <a class="reference external" href="#_bookmark67">“Correspondent Management”,</a> <a class="reference external" href="#_bookmark67">page
63</a>. This triggers the sending of an e-mail
containing the security code, as in the following example:</p>
<blockquote>
<div><p><em>Page upload by SMTP : activation e-mail</em></p>
</div></blockquote>
</li>
</ol>
<ol class="arabic">
<li><p class="first">Reply to this e-mail, with the files to be uploaded (HTML pages,
graphics, etc) included as attachments. VIRTEL recognizes the
security code returned automatically by the e-mail client in the
“Message-id” field, and loads the attached files into the directory
defined in the definition of the correspondent.</p>
</li>
<li><p class="first">VIRTEL replies by sending an e-mail containing the result of the
upload. The following example shows the reply sent by VIRTEL to a
request to upload two files: LOGOVERT.GIF and WEB2VIRT.HTM. The
“Message-id” field in this e-mail contains the new security code. You
can reply to this e-mail the next time you have files to upload.</p>
<blockquote>
<div><p><em>Page upload by SMTP : upload response e-mail</em></p>
<p>Depending on the values specified in the directory definition,
VIRTEL may convert the filename to upper case, and truncate the
filename to a maximum length, before storing it in the directory.
The filename after conversion and truncation must not duplicate any
other filename in the directory. For example, when uploading to a
directory defined using the default parameters (not case sensitive,
with maximum filename length 8), the file links.gif would be stored
under the name LINKS.GI</p>
<p>The upload.htm page allows HTML pages or graphics to be uploaded to
VIRTEL. The user’s identity is guaranteed by a cookie named
VirtelRef= whose value changes after each upload. The value of the
cookie is the same as the security code used for uploading by SMTP.</p>
<p>To upload a page, a user must:</p>
<ul class="simple">
<li>have a valid cookie (obtained by activation of the VIRTEL e-mail</li>
</ul>
<p>correspondent)</p>
<ul class="simple">
<li>click on the link contained in the e-mail, which displays the</li>
</ul>
<p>upload.htm page and loads the cookie into the browser (first time
only)</p>
<ul class="simple">
<li>click the “Browse” button and select a file</li>
<li>click the “Send” button</li>
</ul>
<p>The VIRTEL response is displayed in the page and is similar to the
response received by e-mail when uploading via SMTP.</p>
<p>All the elements needed for page upload by HTTP secured by cookie
are contained in the base configuration delivered with VIRTEL 4.27.
Users who upgrade to VIRTEL 4.27 while keeping their existing
configuration need to add certain elements to their existing
configuration to benefit from the new “page upload secured by
cookie” function.</p>
<p>The following steps show how to upgrade your configuration based on
entry point WEB2HOST. You can also carry out these steps in batch by
running the DEFUPLOD job in the SAMPLIB delivered with VIRTEL
version 4.27. Having updated the configuration, you then need to
upload three new elements (upload.htm, default.js, and logo_3.gif)
to the W2H- DIR directory using the existing SMTP upload method.</p>
</div></blockquote>
</li>
</ol>
<ol class="arabic">
<li><p class="first">In entry point WEB2HOST, define a new transaction W2H–70, with
external name upload. This transaction specifies VIR0041C as the
application name and application type 2. The “Logon message” field is
blank to indicate to VIRTEL that the name of the target directory is
to be found in the definition of the e-mail correspondent:</p>
<blockquote>
<div><p><em>Page upload by HTTP with cookie : Creating the ‘upload’
transaction</em></p>
</div></blockquote>
</li>
</ol>
<ol class="arabic simple">
<li>Check the definition of your SMTP line (F1 then F12 from the
Configuration Menu, see the VIRTEL Connectivity Reference
documentation).</li>
<li>Press F5 from the Configuration Menu and define an e-mail
correspondent specifying directory name W2H-DIR and ruleset name
ADMRSET1 :</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="47%" />
<col width="31%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">P1=Update</th>
<th class="head">P3=Return</th>
<th class="head">Enter=Add</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>P4=Activate</td>
<td>P5=Disable</td>
<td>P6=Rules</td>
</tr>
<tr class="row-odd"><td>ACTIVATION WAS REQUESTED</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote>
<div><em>Page upload by HTTP with cookie : Creating the e-mail
correspondent</em></div></blockquote>
<ol class="arabic simple">
<li>Press F6 then F12 to create rule UPLOAD1B in ruleset ADMRSET1 :</li>
</ol>
<blockquote>
<div><em>Page upload by HTTP with cookie : Creating rule UPLOAD1B</em></div></blockquote>
<ol class="arabic simple">
<li>Define two new rules attached to the HTTP line. The first rule, which
specifies $COOKIE$ as the entry point name, will be used for
administrators; the second rule, which specifies entry point
WEB2HOST, is for all other users:</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="58%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name Status</th>
<th class="head">Description</th>
<th class="head">Entry</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>Point</td>
</tr>
<tr class="row-odd"><td>WHT00100 ACTIVE</td>
<td>HTTP access (users authorised by cookie)</td>
<td>$COOKIE$</td>
</tr>
<tr class="row-even"><td>WHT00200 ACTIVE</td>
<td>HTTP access (other users)</td>
<td>WEB2HOST</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="28%" />
<col width="25%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">P1=Update</th>
<th class="head">P2=Suppress</th>
<th class="head">P3=Return</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>P6=1st page</td>
<td>P7=Page-1</td>
<td>P8=Page+1</td>
<td>P12=Edit</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>DETAIL of RULE from RULE SET: W-HTTP &#8212;&#8212;&#8212;&#8212;- Applid: SPVIRE2
14:45:34</p>
<p>Name ===&gt; WHT00100 Rule priority is per name</p>
<p>Status ===&gt; ACTIVE Mon, 24 Sep 2001 14:19:14</p>
<p>Description ===&gt; HTTP access (users authorised by cookie) Entry
point ===&gt; $COOKIE$ Target Entry Point</p>
<p>Parameter ===&gt; optional &amp;1 value</p>
<p>Trace ===&gt; 1=commands 2=data 3=partner</p>
<p>C : 0=IGNORE 1=IS 2=IS NOT 3=STARTS WITH 4=DOES NOT 5=ENDS WITH
6=DOES NOT</p>
<p>0 IP Subnet ===&gt; Mask ===&gt;</p>
<p>0 HTTP Host ===&gt;</p>
<p>0 eMail ===&gt;</p>
<p>0 Calling DTE ===&gt; Calling DTE address</p>
<p>0 Called ===&gt; Called DTE address</p>
<p>0 CUD0 (Hex) ===&gt; First 4 bytes of CUD (X25 protocol)</p>
<p>0 User Data ===&gt;</p>
</div></blockquote>
<blockquote>
<div><p>DETAIL of RULE from RULE SET: W-HTTP &#8212;&#8212;&#8212;&#8212;- Applid: SPVIRE2
14:45:56</p>
<p>Name ===&gt; WHT00200 Rule priority is per name</p>
<p>Status ===&gt; ACTIVE Mon, 24 Sep 2001 14:19:14</p>
<p>Description ===&gt; HTTP access (other users)</p>
<p>Entry point ===&gt; WEB2HOST Target Entry Point</p>
<p>Parameter ===&gt; optional &amp;1 value</p>
<p>Trace ===&gt; 1=commands 2=data 3=partner</p>
<p>C : 0=IGNORE 1=IS 2=IS NOT 3=STARTS WITH 4=DOES NOT 5=ENDS WITH
6=DOES NOT</p>
<p>0 IP Subnet ===&gt; Mask ===&gt;</p>
<p>0 HTTP Host ===&gt;</p>
<p>0 eMail ===&gt;</p>
<p>0 Calling DTE ===&gt; Calling DTE address</p>
<p>0 Called ===&gt; Called DTE address</p>
<p>0 CUD0 (Hex) ===&gt; First 4 bytes of CUD (X25 protocol)</p>
<p>0 User Data ===&gt;</p>
</div></blockquote>
<blockquote>
<div><em>Page upload by HTTP with cookie : Rules of the HTTP line</em></div></blockquote>
<ol class="arabic">
<li><p class="first">(First time only) Activate the e-mail correspondent: see “Account
activation” under the heading <a class="reference external" href="#_bookmark67">“Correspondent</a>
<a class="reference external" href="#_bookmark67">Management”, page 63</a>. This triggers the sending of
an e-mail containing the security code, as in the following example:</p>
<blockquote>
<div><p><em>Page upload by HTTP with cookie : activation e-mail</em></p>
</div></blockquote>
</li>
</ol>
<ol class="arabic">
<li><p class="first"><a class="reference internal" href="../../../_images/image421.png"><img alt="image2" src="../../../_images/image421.png" style="width: 5.13354in; height: 3.56187in;" /></a>Click the link in the e-mail to open the upload.htm page:</p>
<blockquote>
<div><p><em>Page upload by HTTP with cookie : Displaying the upload.htm page</em></p>
</div></blockquote>
</li>
</ol>
<ol class="arabic">
<li><p class="first">Click the “Browse” button and the file selection dialog will be
displayed:</p>
<blockquote>
<div><p><a class="reference internal" href="../../../_images/image516.png"><img alt="image3" src="../../../_images/image516.png" style="width: 5.10219in; height: 3.14469in;" /></a></p>
<p><em>Page upload by HTTP with cookie : File selection dialog</em></p>
</div></blockquote>
</li>
</ol>
<ol class="arabic">
<li><p class="first"><a class="reference internal" href="../../../_images/image616.png"><img alt="image4" src="../../../_images/image616.png" style="width: 5.13354in; height: 3.56187in;" /></a>Select the file you want to upload, then press the “Open”
button. The name of the selected file will be displayed in the input
field:</p>
<blockquote>
<div><p><em>Page upload by HTTP with cookie : Sending the file</em></p>
</div></blockquote>
</li>
</ol>
<ol class="arabic">
<li><p class="first">Press the “Send File” button to upload the file to VIRTEL. VIRTEL
stores the file in the directory (W2H-DIR in this example) specified
in the definition of the correspondent associated with the cookie.
VIRTEL then displays the result of the upload:</p>
<blockquote>
<div><p><a class="reference internal" href="../../../_images/image712.png"><img alt="image5" src="../../../_images/image712.png" style="width: 5.13354in; height: 5.08229in;" /></a></p>
<p><em>Page upload by HTTP with cookie : Confirmation of file uploadr</em></p>
<p>From now on, the cookies are managed automatically. After each
upload, VIRTEL sends a new cookie to the browser, as indicated by
the message “Upload code was set by the remote host”.</p>
<p>Depending on the values specified in the directory definition,
VIRTEL may convert the file name to upper case, and truncate the
filename to a maximum length, before storing it in the directory.
The filename after conversion and truncation must not duplicate any
other filename in the directory. For example, when uploading to a
directory defined using the default parameters (not case sensitive,
with maximum filename length 8), the file links.gif would be stored
under the name LINKS.GI</p>
<p>The upload4.htm page allows the administrator to upload HTML pages
and graphics to VIRTEL. When this page is first loaded, the web
browser displays a signon dialog box requesting a userid and
password. The userid allows the security product (RACF, ACF2, TSS,
or VIRTEL) to determine which, if any, of the page upload
transactions the user is authorized to use. Each VIRTEL directory
has its own upload transaction, so that upload security can be
applied individually to each directory, by authorizing users to the
corresponding directory’s upload transaction.</p>
<p>All the elements needed for page upload by HTTP secured by signon
are contained in the base configuration delivered with VIRTEL. Users
who upgrade from a version prior to VIRTEL 4.27 while keeping their
existing configuration need to add certain elements to their
existing configuration to benefit from the new “page upload secured
by signon” function.</p>
<p>The following steps show how to upgrade your configuration based on
entry point WEB2HOST. You can also carry out these steps in batch by
running the DEFUPLOD job in the SAMPLIB delivered with VIRTEL.
Having updated the configuration, you then need to upload one new
page (upload4.htm) to the W2H-DIR directory using the existing SMTP
upload method.</p>
</div></blockquote>
</li>
</ol>
<ol class="arabic">
<li><p class="first">In entry point WEB2HOST, define a new transaction W2H-68 with
external name dirlist, application name VIR0041S and application type
2:</p>
<blockquote>
<div><p><em>Page upload by HTTP with signon : Transaction ‘dirlist’</em></p>
</div></blockquote>
</li>
</ol>
<ol class="arabic">
<li><p class="first">Still in entry point WEB2HOST, define three new transactions W2H–71,
W2H-72, W2H-73 with external names uplbas, uplw2h, and uplcli. Each
of these transactions specifies VIR0041C as the application name and
application type 2. The “Logon message” field contains the name of
the target directory: HTMLBAS for transaction uplbas, W2H- DIR for
transaction uplw2h, and CLI-DIR for uplcli :</p>
<blockquote>
<div><p>TRANSACTION DETAIL DEFINITION &#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;- Applid: SPVIRE2
15:03:01</p>
<p>Internal name ===&gt; W2H-72 To associate with an entry point name</p>
<p>External name ===&gt; uplw2h Name displayed on user menu Description
===&gt; Chargement des pages HTML (répertoire W2H-DIR) Application ===&gt;
VIR0041C Application to be called PassTicket ===&gt; 0 Name ===&gt; 0=no
1=yes 2=unsigned</p>
<p>Application type ===&gt; 2 1=VTAM 2=VIRTEL 3=SERV 4=PAGE 5=LINE</p>
<p>Pseudo-terminals ===&gt; DELOC Prefix of name of partner terminals
Logmode ===&gt; Specify when LOGMODE must be changed</p>
<p>How started ===&gt; 2 1=menu 2=sub-menu 3=auto</p>
<p>Security ===&gt; 1 0=none 1=basic 2=NTLM 3=TLS 4=HTML</p>
<p>H4W commands ? ===&gt; 0=no 1=yes 2=if2VIRTEL 4=auto Logon message ===&gt;
W2H-DIR</p>
<p>TIOA at logon ===&gt;</p>
<p>TIOA at logoff ===&gt;</p>
<p>Initial Scenario ===&gt; Final Scenario ===&gt;</p>
<p>Input Scenario ===&gt; Output Scenario ===&gt;</p>
<p>P1=Update P3=Return P12=Server</p>
<p>TRANSACTION DETAIL DEFINITION &#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;- Applid: SPVIRE2
15:03:21</p>
<p>Internal name ===&gt; W2H-73 To associate with an entry point name</p>
<p>External name ===&gt; uplcli Name displayed on user menu Description
===&gt; Chargement des pages HTML (répertoire CLI-DIR) Application ===&gt;
VIR0041C Application to be called PassTicket ===&gt; 0 Name ===&gt; 0=no
1=yes 2=unsigned</p>
<p>Application type ===&gt; 2 1=VTAM 2=VIRTEL 3=SERV 4=PAGE 5=LINE</p>
<p>Pseudo-terminals ===&gt; DELOC Prefix of name of partner terminals
Logmode ===&gt; Specify when LOGMODE must be changed</p>
<p>How started ===&gt; 2 1=menu 2=sub-menu 3=auto</p>
<p>Security ===&gt; 1 0=none 1=basic 2=NTLM 3=TLS 4=HTML</p>
<p>H4W commands ? ===&gt; 0=no 1=yes 2=if2VIRTEL 4=auto Logon message ===&gt;
CLI-DIR</p>
<p>TIOA at logon ===&gt;</p>
<p>TIOA at logoff ===&gt;</p>
<p>Initial Scenario ===&gt; Final Scenario ===&gt;</p>
<p>Input Scenario ===&gt; Output Scenario ===&gt;</p>
<p>P1=Update P3=Return P12=Server</p>
<p><em>Page upload by HTTP with signon : Transactions ‘uplxxx’</em></p>
</div></blockquote>
</li>
</ol>
<ol class="arabic simple">
<li>Use your security package (VIRTEL/SECURITE, RACF, TOP SECRET, ACF2)
to grant access to resources W2H-71 and HTMLBAS (for users authorized
to upload pages to the HTMLBAS directory) and/or to resources W2H-72
and W2H- DIR (for users authorized to upload pages to the W2H-DIR
directory) and/or to resources W2H-73 and CLI-DIR (for users
authorized to upload pages to the CLI-DIR directory). For more
details, refer to the “Virtel Security Guide” manual.</li>
</ol>
<ol class="arabic">
<li><p class="first">Display the upload4.htm page by entering the URL
<a class="reference external" href="http://ipaddr:port/SECURE/upload4.htm+dirlist">http://ipaddr:port/SECURE/upload4.htm+dirlist</a> in your browser, or by
clicking the “Upload” link on the VIRTEL Web2Host welcome page.
Because the directory named SECURE is defined as a secure
transaction, VIRTEL first requests the browser to display the
password dialog box shown below:</p>
<blockquote>
<div><p><a class="reference internal" href="../../../_images/image810.png"><img alt="image6" src="../../../_images/image810.png" style="width: 5.10875in; height: 3.22792in;" /></a></p>
<p><em>Page upload by HTTP with signon : Entering the userid and password</em></p>
<p>The user must have authority to access the resource represented by
the internal name of the page upload transaction for the desired
directory.</p>
</div></blockquote>
</li>
</ol>
<ol class="arabic">
<li><p class="first"><a class="reference internal" href="../../../_images/image99.png"><img alt="image7" src="../../../_images/image99.png" style="width: 5.11501in; height: 2.79583in;" /></a>After entering the user name and password, the upload4.htm
page will be displayed:</p>
<blockquote>
<div><p><em>Page upload by HTTP with signon : Displaying the upload4.htm page</em></p>
</div></blockquote>
</li>
</ol>
<ol class="arabic">
<li><p class="first">Press the “Browse” button to display the file selection dialog:</p>
<blockquote>
<div><p><a class="reference internal" href="../../../_images/image109.png"><img alt="image8" src="../../../_images/image109.png" style="width: 5.10219in; height: 3.14469in;" /></a></p>
<p><em>Page upload by HTTP with signon : File selection dialog</em></p>
</div></blockquote>
</li>
</ol>
<ol class="arabic">
<li><p class="first"><a class="reference internal" href="../../../_images/image1114.png"><img alt="image9" src="../../../_images/image1114.png" style="width: 5.11501in; height: 2.79583in;" /></a>Select the file you want to upload, then press the “Open”
button. The name of the selected file will be displayed in the input
field:</p>
<blockquote>
<div><p><em>Page upload by HTTP with signon : Sending the file</em></p>
</div></blockquote>
</li>
</ol>
<ol class="arabic">
<li><p class="first">Press the button corresponding to the target directory (W2H-DIR in
this example) to upload the file to VIRTEL. VIRTEL stores the file in
the chosen directory, and displays the result:</p>
<blockquote>
<div><p><a class="reference internal" href="../../../_images/image1212.png"><img alt="image10" src="../../../_images/image1212.png" style="width: 5.11500in; height: 5.09667in;" /></a></p>
<p><em>Page upload by HTTP with signon : Confirmation of file upload</em></p>
<p>Depending on the values specified in the directory definition,
VIRTEL may convert the filename to upper case, and truncate the
filename to a maximum length, before storing it in the directory.
The filename after conversion and truncation must not duplicate any
other filename in the directory. For example, when uploading to a
directory defined using the default parameters (not case sensitive,
with maximum filename length 8), the file links.gif would be stored
under the name LINKS.GI</p>
<p>The VIRTEL administrator can upload pages to a VIRTEL directory
using the drag and drop upload interface with the Firefox or Chrome
browser. This method has the advantage that multiple pages can be
uploaded to a VIRTEL directory (for example, W2H-DIR) in a single
operation.</p>
<p>After clicking on the Drag &amp; Drop Upload link on the VIRTEL Web
Access menu (URL <a class="reference external" href="http://n.n.n.n:41001">http://n.n.n.n:41001</a>), the VIRTEL administrator
will be presented with a signon screen, followed by the drag and
drop upload interface screen shown below:</p>
<p><a class="reference internal" href="../../../_images/image1310.png"><img alt="image11" src="../../../_images/image1310.png" style="width: 5.13563in; height: 2.23875in;" /></a></p>
<p><em>Drag and drop upload interface</em></p>
<p>The administrator can then select one or more files using the
workstation graphical user interface, drag them to the upload
interface screen, and drop them on the button representing the
VIRTEL directory (for example, CLI-DIR). Files in zipped archive may
need to be extracted to a temporary directory first.</p>
</div></blockquote>
</li>
</ol>
<p><a class="reference internal" href="../../../_images/image145.png"><img alt="image12" src="../../../_images/image145.png" style="width: 5.13000in; height: 3.84750in;" /></a></p>
<blockquote>
<div><p><em>Displaying upload results</em></p>
<p>The results of the upload are displayed on the screen with a return
code for each file uploaded. Each file should produce the message
RETURN CODE IS: 00 In addition, by clicking on + or -, the
administrator can open and close the detail display for each file
uploaded.</p>
<p>After multiple files have been uploaded, the drag and drop upload
interface will display a summary showing the number of files
processed with return code 00, and, in case of error, the number of
files which failed to upload non- zero return codes.</p>
<p>The summary is not displayed when files are dragged and dropped one
at a time.</p>
<p>In this example, one file has failed to upload because of an invalid
VIRTEL tag, and the user has clicked on the + sign to the left of
the file to expand the error messages:</p>
</div></blockquote>
<p><a class="reference internal" href="../../../_images/image155.png"><img alt="image13" src="../../../_images/image155.png" style="width: 5.09918in; height: 2.36833in;" /></a></p>
<blockquote>
<div><em>Upload summary report</em></div></blockquote>
<p><a class="reference internal" href="../../../_images/image164.png"><img alt="image14" src="../../../_images/image164.png" style="width: 0.22500in; height: 0.22500in;" /></a></p>
<blockquote>
<div>The Excel button allows the administrator to export the results log
as a .SLK file which can be opened as an Excel spreadsheet.</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<p><a class="reference internal" href="../../../_images/image174.png"><img alt="image15" src="../../../_images/image174.png" style="width: 0.22500in; height: 0.22500in;" /></a></p>
<blockquote>
<div><p>The Delete button allows the administrator to clear the results log.</p>
<p>You can upload multiple pages (or other elements) at a time from a
Windows workstation by using a command-line HTTP-client program,
such as cURL from
<a class="reference external" href="#_bookmark0">w</a><a class="reference external" href="http://www.haxx.se/">ww.haxx.se.</a></p>
<p>The following example shows a Windows command to upload all files of
type .htm from the current directory to VIRTEL:</p>
<p>In this example:</p>
</div></blockquote>
</div>
<div class="section" id="htm">
<h2>*.htm<a class="headerlink" href="#htm" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the files to be uploaded</div></blockquote>
</div>
<div class="section" id="virdba-virdbapw">
<h2>virdba:virdbapw<a class="headerlink" href="#virdba-virdbapw" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>userid and password for VIRTEL</div></blockquote>
</div>
<div class="section" id="id123">
<h2>192.168.235.30:41001<a class="headerlink" href="#id123" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>identifies the VIRTEL HTTP line</div></blockquote>
</div>
<div class="section" id="virmsg-txt">
<h2>virmsg.txt<a class="headerlink" href="#virmsg-txt" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>page template for displaying upload result messages</div></blockquote>
</div>
<div class="section" id="uplbas">
<h2>uplbas<a class="headerlink" href="#uplbas" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>external name of the upload transaction in VIRTEL which specifies
the target directory (HTMLBAS). See <a class="reference external" href="#_bookmark80">“Uploading</a>
<a class="reference external" href="#_bookmark80">pages by HTTP (secured by signon)”, page 74</a> for a
list of upload transactions.</p>
<p>Note: %F appears twice in the command shown above. In conformance
with the syntax requirements of the Windows command interpreter, you
must use %F if you execute the command from the command prompt, but
%%F if you execute the command from within a command (.cmd) file.</p>
<p>For users of Windows XP and above, the command procedure
upl2virt.cmd may be used to upload elements to VIRTEL from the
Windows command prompt, or from Windows Explorer. upl2virt
automatically generates the required cURL commands as described in
the previous section.</p>
<p>upl2virt requires as a pre-requisite the cURL package described in
the previous section.</p>
<p>Optionally, Bill Stewart’s editvar freeware package from
<a class="reference external" href="#_bookmark0">w</a><a class="reference external" href="http://www.westmesatech.com/">ww.westmesatech.com</a>
may also be installed. This package allows upl2virt to securely
prompt the administrator for a password. If the editvar package is
not installed, then upl2virt can still prompt for a password but it
will be unable to mask the password as the administrator types it
into the command window.</p>
<p>upl2virt may be downloaded from VIRTEL to the workstation by
entering the following URL in your browser:
<a class="reference external" href="http://n.n.n.n:41001/upl2virt.cmd">http://n.n.n.n:41001/upl2virt.cmd</a> (where n.n.n.n is the IP address
of VIRTEL). When prompted, save the upl2virt.cmd file in a directory
in your path (for example, C:\WINDOWS).</p>
<p>To execute upl2virt as a command, open a Windows command prompt,
navigate to the directory which contains the file(s) to be uploaded,
and execute the command:</p>
<p>In the above command:</p>
</div></blockquote>
</div>
<div class="section" id="userid-password">
<h2>userid:password<a class="headerlink" href="#userid-password" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is your VIRTEL userid and password. If not specified, upl2virt will
prompt for userid and password. If userid is specified without the
password, then upl2virt will prompt for password.</div></blockquote>
</div>
<div class="section" id="id124">
<h2>directory<a class="headerlink" href="#id124" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the name of the target VIRTEL directory (for example, CLI-DIR)</div></blockquote>
</div>
<div class="section" id="n-n-n-n">
<h2>n.n.n.n<a class="headerlink" href="#n-n-n-n" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the IP address of VIRTEL</div></blockquote>
</div>
<div class="section" id="port">
<h2>port<a class="headerlink" href="#port" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>is the VIRTEL administration port number (default 41001).</p>
<p>Note: this is the port number for the WEB2HOST entry point, not the
port number associated with the directory you are uploading to.</p>
</div></blockquote>
</div>
<div class="section" id="ctlfile">
<h2>ctlfile<a class="headerlink" href="#ctlfile" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>specifies the name of a control file containing a list of file names
to be uploaded</div></blockquote>
</div>
<div class="section" id="file1-file2">
<h2>file1 file2 ...<a class="headerlink" href="#file1-file2" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>are the names of files to be uploaded</div></blockquote>
</div>
<div class="section" id="id125">
<h2>-r<a class="headerlink" href="#id125" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>specifies recursion into subdirectories</div></blockquote>
</div>
<div class="section" id="k">
<h2>-k<a class="headerlink" href="#k" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>keeps the command window open after the last upload</p>
<p>If no file names are specified, and no control file is specified,
the default is to upload all web elements from the current directory
(and also from all subdirectories if the –r option is specified).</p>
<p>The upl2virt command may also be used to upload elements to VIRTEL
from the Windows Explorer interface. Having selected one or more
files in Windows Explorer, the administrator right-clicks on the
selected files and chooses the “Send To” option, then chooses
“Upload to VIRTEL” from the “Send To” menu.</p>
<p>To activate the “Upload to VIRTEL” option in the “Send To” menu, use
Windows Explorer to navigate to the “c:\Documents and
Settings\username\SendTo” folder, where username is your Windows
username. If you cannot see the SendTo folder, then click on “Tools”
– “Folder options” – “View”, tick the option “Display hidden files
and folders”, and click “OK”.</p>
<p>In the “SendTo” folder, right click and select “New” – “Shortcut”.
Then click “Browse”, navigate to the place where you stored the
upl2virt.cmd file, and click on it. Click “Next” and enter a
descriptive title for the menu item, such as “Upload to VIRTEL”.
Then click “Finish”.</p>
<p>You now have an item in the “SendTo” folder named “Upload to
VIRTEL”. Right-click on this item and choose “Properties”. In the
“Target” field you will see the path to the upl2virt.cmd file which
you specified. Update this field with parameters as shown in the
example below:</p>
<p>where:</p>
</div></blockquote>
</div>
<div class="section" id="myuserid">
<h2>MYUSERID<a class="headerlink" href="#myuserid" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is your VIRTEL userid</div></blockquote>
</div>
<div class="section" id="cli-dir">
<h2>CLI-DIR<a class="headerlink" href="#cli-dir" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the name of the VIRTEL directory that this shortcut will upload
to</div></blockquote>
</div>
<div class="section" id="id126">
<h2>10.1.12.101<a class="headerlink" href="#id126" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>is the IP address of VIRTEL.</p>
<p>You may omit the –u MYUSERID parameter and upl2virt will prompt you
for your userid.</p>
<p>The VIRTEL Web Access user can use the Settings menu to modify
certain options such as font size, 3270 key mappings, and color
schemes. The user’s settings are stored in a browser local storage
which remains valid so long as cookies are not deleted from the
workstation. The settings stored in the user’s local storage
override the default settings for VIRTEL Web Access which are stored
in the w2hparm.js file. See <a class="reference external" href="#_bookmark89">“Global modification of Web Access
settings”, page 98</a>. The Web Acces Settings menu
can be displayed with two differents patterns, presented below as
&#8220;Version 1&#8221; or &#8220;Version 2&#8221;. To select a specifc patern, see
<a class="reference external" href="#_bookmark90">“Choosing Web Access settings pattern”, page 100</a>.</p>
</div></blockquote>
<p><a class="reference internal" href="../../../_images/image181.jpeg"><img alt="image16" src="../../../_images/image181.jpeg" style="width: 0.22917in; height: 0.22917in;" /></a></p>
<blockquote>
<div><p>When the user clicks this button on the VIRTEL Web Access toolbar,
the window shown below opens:</p>
<p><a class="reference internal" href="../../../_images/image193.png"><img alt="image17" src="../../../_images/image193.png" style="width: 5.12937in; height: 6.29844in;" /></a></p>
<p><em>VIRTEL Web Access Settings menu (part 1 of 3)</em></p>
<p><a class="reference internal" href="../../../_images/image203.png"><img alt="image18" src="../../../_images/image203.png" style="width: 5.14750in; height: 6.29844in;" /></a></p>
<p><em>VIRTEL Web Access Settings menu (part 2 of 3)</em></p>
<p><a class="reference internal" href="../../../_images/image2111.png"><img alt="image19" src="../../../_images/image2111.png" style="width: 5.09115in; height: 6.19792in;" /></a></p>
<p><em>VIRTEL Web Access Settings menu (part 3 of 3)</em></p>
</div></blockquote>
</div>
<div class="section" id="font-size">
<h2>Font Size<a class="headerlink" href="#font-size" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Size of font. Possible values are:</div></blockquote>
</div>
<div class="section" id="window">
<h2>Window<a class="headerlink" href="#window" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>VIRTEL calculates the font size to fit the browser’s window size.</div></blockquote>
</div>
<div class="section" id="screen">
<h2>Screen<a class="headerlink" href="#screen" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>VIRTEL calculates the font size to fit the display screen size.</div></blockquote>
</div>
<div class="section" id="nn">
<h2>nn<a class="headerlink" href="#nn" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>VIRTEL uses a fixed font size. nn is the size in “points”: 8pt,
10pt, 12pt, 14pt, or 16pt.</div></blockquote>
</div>
<div class="section" id="font-family">
<h2>Font family<a class="headerlink" href="#font-family" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Name of font. The panel displays a list of fonts known to VIRTEL and
installed on the workstation, in addition to the fonts supplied by
VIRTEL. If the required font is not in the list, click the ellipsis
to the right of the selection box and type the name of the font in
the box. Any fixed-width font installed on the workstation may be
specified.</div></blockquote>
</div>
<div class="section" id="auto-capture">
<h2>Auto-capture<a class="headerlink" href="#auto-capture" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>When activated, causes a snapshot of each screen displayed by the
host application to be automatically appended to the screen capture
window.</div></blockquote>
</div>
<div class="section" id="auto-print">
<h2>Auto-print<a class="headerlink" href="#auto-print" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>When activated, causes the Windows print function to be launched
automatically in the print window as a result of a screen snapshot
or print request.</div></blockquote>
</div>
<div class="section" id="cursor">
<h2>Cursor<a class="headerlink" href="#cursor" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The shape of the 3270 cursor. The possible settings are:</div></blockquote>
</div>
<div class="section" id="bar">
<h2>Bar<a class="headerlink" href="#bar" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The character at the cursor position is underlined</div></blockquote>
</div>
<div class="section" id="block">
<h2>Block<a class="headerlink" href="#block" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The character at the cursor position is in reverse video</div></blockquote>
</div>
<div class="section" id="blink">
<h2>Blink<a class="headerlink" href="#blink" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The character at the cursor position is in blinking reverse video
Note: For Internet Explorer versions 6 and 7, Blink is the same as
Block</div></blockquote>
</div>
<div class="section" id="vertical-line-horiz-line">
<h2>Vertical line, Horiz line<a class="headerlink" href="#vertical-line-horiz-line" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>When activated, causes the position of the cursor to be marked with
a vertical line and/or a horizontal line extending to the edges of
the 3270 window (also known as a “crosshair cursor”).</div></blockquote>
</div>
<div class="section" id="esc-key-to-alt-f3">
<h2>Esc key to Alt+F3<a class="headerlink" href="#esc-key-to-alt-f3" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Defines the mapping of workstation keyboard to 3270 keys. The value
“no” indicates that the keystroke is ignored.</p>
<p>For example the 3270 PA1 key may be assigned to the PageUp key, to
the Alt+PageUp key, and/or to the Alt+F1 key on the user’s keyboard.</p>
<p>Note: For Internet Explorer, the “Ctrl key” setting refers to the
right Ctrl key. For Firefox, Chrome, and Safari the “Ctrl key”
setting applies to both the left and right Ctrl keys identically.
For Firefox, the “Keypad Enter” setting is ignored. For Internet
Explorer versions 6, 7, and 8, a browser helper object (virtkey.dll)
must be installed to allow recognition of the keypad Enter key. This
BHO is not needed for Internet Explorer 9.</p>
<p>The ChgCur setting allows the user to toggle the cursor between the
“bar”, “block”, “bar+crosshairs”, and “block+crosshairs” style.</p>
</div></blockquote>
</div>
<div class="section" id="keypad">
<h2>Keypad /*-+.<a class="headerlink" href="#keypad" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Allows keys on the numeric keypad to be assigned to certain 3270
functions including PA1, PA2, Tab, Backtab, and Newline. Also allows
the decimal point on the numeric keypad to be remapped to comma for
European countries.</p>
<p>Note: Remapping of the numeric keypad is only supported for Internet
Explorer, Chrome, and Safari. Keypad settings are ignored for
Firefox and Opera.</p>
</div></blockquote>
</div>
<div class="section" id="double-click">
<h2>Double click<a class="headerlink" href="#double-click" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies the action taken for a mouse double-click. Possible
settings are:</div></blockquote>
</div>
<div class="section" id="word">
<h2>Word<a class="headerlink" href="#word" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>draws a box around the word that the mouse is pointing in
preparation for a copy or cut operation.</div></blockquote>
</div>
<div class="section" id="enter">
<h2>ENTER<a class="headerlink" href="#enter" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Activates the “point-and-shoot” function. When set to ENTER, double
clicking the mouse moves the cursor to the mouse position and sends
a 3270 ENTER to the host application.</div></blockquote>
</div>
<div class="section" id="no">
<h2>no<a class="headerlink" href="#no" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>indicates that the double-click function is deactivated.</div></blockquote>
</div>
<div class="section" id="url-hotspots">
<h2>URL hotspots<a class="headerlink" href="#url-hotspots" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>When activated, any text starting with http, https, mailto, file, or
ftp (except in 3270 input fields) is transformed into a hyperlink.</div></blockquote>
</div>
<div class="section" id="pf-key-hotspots">
<h2>PF key hotspots<a class="headerlink" href="#pf-key-hotspots" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>When activated, any text starting with Fnn= or PFnn= (except in 3270
input fields) is transformed into a clickable area. Clicking on the
area is equivalent to pressing PF nn.</div></blockquote>
</div>
<div class="section" id="paste-erase-eof">
<h2>Paste erase EOF<a class="headerlink" href="#paste-erase-eof" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>When activated, a paste operation will erase the rest of an input
field to the right of the pasted text</div></blockquote>
</div>
<div class="section" id="move-cursor-on-activate">
<h2>Move cursor on activate<a class="headerlink" href="#move-cursor-on-activate" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>This setting takes effect only when the user clicks on a background
3270 window in order to bring the window to the foreground. When the
option is activated, the window is brought to the foreground and the
3270 cursor moves to the location in the window where the user
clicked; the copy/paste box and context menu are removed if present.
When the option is not activated, the window is brought to the
foreground and the cursor remains in its previous position; the
copy/paste box and context menu remain displayed if present.</div></blockquote>
</div>
<div class="section" id="style">
<h2>Style<a class="headerlink" href="#style" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Allows a choice of color schemes by selection of CSS style sheet.
Possible values are:</div></blockquote>
</div>
<div class="section" id="id127">
<h2>3270<a class="headerlink" href="#id127" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>extended colors on black background</div></blockquote>
</div>
<div class="section" id="gray">
<h2>Gray<a class="headerlink" href="#gray" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>extended colors on gray background</div></blockquote>
</div>
<div class="section" id="white">
<h2>White<a class="headerlink" href="#white" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>gray characters on white background</div></blockquote>
</div>
<div class="section" id="print-style">
<h2>Print style<a class="headerlink" href="#print-style" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Allows a choice of color schemes for the screen capture window.
Possible values are:</div></blockquote>
</div>
<div class="section" id="id128">
<h2>3270<a class="headerlink" href="#id128" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>extended colors on black background</div></blockquote>
</div>
<div class="section" id="color">
<h2>Color<a class="headerlink" href="#color" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>extended colors on white background</div></blockquote>
</div>
<div class="section" id="id129">
<h2>White<a class="headerlink" href="#id129" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>black characters on white background</div></blockquote>
</div>
<div class="section" id="response-time-monitor">
<h2>Response time monitor<a class="headerlink" href="#response-time-monitor" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>When activated, two counters are displayed on the status line below
the 3270 screen, for example: H:110ms J:31ms. The first number
(H=Host) represents the response time of the VIRTEL server, from the
last Enter or PF key until the receipt of the most recent message
from the server. The second number (J=JavaScript) is the time taken
by the browser scripts to prepare the screen for display. The sum of
the two numbers is the response time perceived by the user.</p>
<p>Note: The response time monitor is active in Ajax mode only</p>
</div></blockquote>
</div>
<div class="section" id="omit-nulls-from-input">
<h2>Omit nulls from input<a class="headerlink" href="#omit-nulls-from-input" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>When activated, VIRTEL Web Access will remove all nulls from
modified input fields before sending to the server, in strict
conformance with 3270 protocol. When not activated, leading and
embedded nulls are converted to blanks, and only trailing nulls are
suppressed, which many users find more convenient.</div></blockquote>
</div>
<div class="section" id="keep-macro-pad-open">
<h2>Keep macro pad open<a class="headerlink" href="#keep-macro-pad-open" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>If checked, the macro window remains open all the time. If not, it
disappears as soon as you have clicked a macro.</div></blockquote>
</div>
<div class="section" id="keep-keypad-open">
<h2>Keep keypad open<a class="headerlink" href="#keep-keypad-open" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>If checked, the keypad window remains open all the time. If not, it
disappears as soon as you have clicked a function key in it.</div></blockquote>
</div>
<div class="section" id="highlight-input-fields">
<h2>Highlight input fields<a class="headerlink" href="#highlight-input-fields" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Permits the user to display a different background color for 3270
input fields. When this option is selected, all input fields will
have a class designator HIGHLIGHTED_INPUTFIELD in addition to their
regular class. The style definition may be overridden by the
administrator in the custom.css file.</div></blockquote>
</div>
<div class="section" id="remap-caret-to-logical-not">
<h2>Remap caret to logical not<a class="headerlink" href="#remap-caret-to-logical-not" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>If checked, translates the “caret” sign (Shift+6 on a US keyboard)
to EBCDIC X&#8216;5F&#8217;, which is the “logical not” sign (¬) in codepage
037/1140.</div></blockquote>
</div>
<div class="section" id="adapt-font-size-ratio">
<h2>Adapt font size ratio<a class="headerlink" href="#adapt-font-size-ratio" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>If checked, characters will be stretched to fill the window. This
option functions in Internet Explorer versions 9 and later, in
Firefox, and Chrome. For Internet Explorer versions 6, 7, and 8 this
option has no effect.</div></blockquote>
</div>
<div class="section" id="character-spacing">
<h2>Character spacing<a class="headerlink" href="#character-spacing" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>If checked, blank space will be added between characters if
necessary to make the 3270 screen fill the browser window
horizontally.</div></blockquote>
</div>
<div class="section" id="line-spacing">
<h2>Line spacing<a class="headerlink" href="#line-spacing" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>If checked, blank space will be added between lines if necessary to
make the 3270 screen fill the browser window vertically. This option
is incompatible with IE6 and will be ignored if used with IE6.
Additionally, if “Adapt font size ratio” is specified and the
browser supports it, then the “Line spacing” option is ignored.</p>
<p>After modifying the Settings menu, the user presses one of the
buttons:</p>
</div></blockquote>
</div>
<div class="section" id="save">
<h2>Save<a class="headerlink" href="#save" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>save the options in browser local storage.</div></blockquote>
</div>
<div class="section" id="cancel">
<h2>Cancel<a class="headerlink" href="#cancel" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>exit without saving the modifications made to this menu.</div></blockquote>
</div>
<div class="section" id="defaults">
<h2>Defaults<a class="headerlink" href="#defaults" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>returns all of the settings to their default values. The default
values are specified by the installation in w2hparm.js.</p>
<p>Deletion of browser cookies may delete the values saved in local
storage. For Internet Explorer, ensure that the option “Delete
browsing history on exit” in Tools – Internet Options” is not
checked.</p>
</div></blockquote>
<p><a class="reference internal" href="../../../_images/image221.jpeg"><img alt="image20" src="../../../_images/image221.jpeg" style="width: 0.22917in; height: 0.22917in;" /></a></p>
<blockquote>
<div><p>When the user clicks this button on the VIRTEL Web Access toolbar,
and if the parameter “settingsGUI” stored in the file w2hparms.js
contains one of the values “V1+V2” or “V2”, the window shown below
opens :</p>
<p><a class="reference internal" href="../../../_images/image232.png"><img alt="image21" src="../../../_images/image232.png" style="width: 5.10125in; height: 6.26500in;" /></a></p>
<p>VIRTEL Web Access Settings menu (Display tab)</p>
<p><a class="reference internal" href="../../../_images/image242.png"><img alt="image22" src="../../../_images/image242.png" style="width: 5.10125in; height: 6.26500in;" /></a></p>
<p>VIRTEL Web Access Settings menu (Miscellaneous tab)</p>
<p><a class="reference internal" href="../../../_images/image252.png"><img alt="image23" src="../../../_images/image252.png" style="width: 5.10125in; height: 6.26500in;" /></a></p>
<p>VIRTEL Web Access Settings menu (Key Mappings tab)</p>
<p><a class="reference internal" href="../../../_images/image262.png"><img alt="image24" src="../../../_images/image262.png" style="width: 5.10125in; height: 6.85125in;" /></a></p>
<p>VIRTEL Web Access Settings menu (Import tab)</p>
</div></blockquote>
</div>
<div class="section" id="id130">
<h2>Font Size<a class="headerlink" href="#id130" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Size of font. Possible values are :</div></blockquote>
</div>
<div class="section" id="id131">
<h2>Window<a class="headerlink" href="#id131" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>VIRTEL calculates the font size to fit the browser’s window size.</div></blockquote>
</div>
<div class="section" id="id132">
<h2>Screen<a class="headerlink" href="#id132" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>VIRTEL calculates the font size to fit the display screen size.</div></blockquote>
</div>
<div class="section" id="id133">
<h2>nn<a class="headerlink" href="#id133" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>VIRTEL uses a fixed font size. nn is the size in “points”: 8pt,
10pt, 12pt, 14pt, or 16pt.</div></blockquote>
</div>
<div class="section" id="id134">
<h2>Font family<a class="headerlink" href="#id134" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Name of font. The panel displays a list of fonts known to VIRTEL and
installed on the workstation, in addition to the fonts supplied by
VIRTEL. If the required font is not in the list, click the ellipsis
to the right of the selection box and type the name of the font in
the box. Any fixed-width font installed on the workstation may be
specified.</div></blockquote>
</div>
<div class="section" id="id135">
<h2>Cursor<a class="headerlink" href="#id135" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The shape of the 3270 cursor. The possible settings are:</div></blockquote>
</div>
<div class="section" id="id136">
<h2>Bar<a class="headerlink" href="#id136" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The character at the cursor position is underlined</div></blockquote>
</div>
<div class="section" id="id137">
<h2>Block<a class="headerlink" href="#id137" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The character at the cursor position is in reverse video</div></blockquote>
</div>
<div class="section" id="id138">
<h2>Blink<a class="headerlink" href="#id138" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The character at the cursor position is in blinking reverse video
Note: For Internet Explorer versions 6 and 7, Blink is the same as
Block</div></blockquote>
</div>
<div class="section" id="id139">
<h2>Vertical line, Horiz line<a class="headerlink" href="#id139" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>When activated, causes the position of the cursor to be marked with
a vertical line and/or a horizontal line extending to the edges of
the 3270 window (also known as a “crosshair cursor”).</div></blockquote>
</div>
<div class="section" id="display-style">
<h2>Display Style<a class="headerlink" href="#display-style" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Allows a choice of color schemes by selection of CSS style sheet.
Possible values are :</div></blockquote>
</div>
<div class="section" id="id140">
<h2>3270<a class="headerlink" href="#id140" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>extended colors on black background</div></blockquote>
</div>
<div class="section" id="id141">
<h2>Gray<a class="headerlink" href="#id141" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>extended colors on gray background</div></blockquote>
</div>
<div class="section" id="id142">
<h2>White<a class="headerlink" href="#id142" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>gray characters on white background</div></blockquote>
</div>
<div class="section" id="id143">
<h2>Print style<a class="headerlink" href="#id143" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Allows a choice of color schemes for the screen capture window.
Possible values are :</div></blockquote>
</div>
<div class="section" id="id144">
<h2>3270<a class="headerlink" href="#id144" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>extended colors on black background</div></blockquote>
</div>
<div class="section" id="id145">
<h2>Color<a class="headerlink" href="#id145" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>extended colors on white background</div></blockquote>
</div>
<div class="section" id="id146">
<h2>White<a class="headerlink" href="#id146" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>black characters on white background</div></blockquote>
</div>
<div class="section" id="miscellaneous-highlight-input-fields">
<h2>Miscellaneous Highlight input fields<a class="headerlink" href="#miscellaneous-highlight-input-fields" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Permits the user to display a different background color for 3270
input fields. When this option is selected, all input fields will
have a class designator HIGHLIGHTED_INPUTFIELD in addition to their
regular class. The style definition may be overridden by the
administrator in the custom.css file.</div></blockquote>
</div>
<div class="section" id="id147">
<h2>Adapt font size ratio<a class="headerlink" href="#id147" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>If checked, characters will be stretched to fill the window. This
option functions in Internet Explorer versions 9 and later, in
Firefox, and Chrome. For Internet Explorer versions 6, 7, and 8 this
option has no effect.</div></blockquote>
</div>
<div class="section" id="id148">
<h2>Character spacing<a class="headerlink" href="#id148" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>If checked, blank space will be added between characters if
necessary to make the 3270 screen fill the browser window
horizontally.</div></blockquote>
</div>
<div class="section" id="id149">
<h2>Line spacing<a class="headerlink" href="#id149" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>If checked, blank space will be added between lines if necessary to
make the 3270 screen fill the browser window vertically. This option
is incompatible with IE6 and will be ignored if used with IE6.
Additionally, if “Adapt font size ratio” is specified and the
browser supports it, then the “Line spacing” option is ignored.</div></blockquote>
</div>
<div class="section" id="id150">
<h2>Double click<a class="headerlink" href="#id150" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies the action taken for a mouse double-click. Possible
settings are :</div></blockquote>
</div>
<div class="section" id="off">
<h2>off<a class="headerlink" href="#off" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Indicates that the double-click function is deactivated.</div></blockquote>
</div>
<div class="section" id="word-selection">
<h2>Word Selection<a class="headerlink" href="#word-selection" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Draws a box around the word that the mouse is pointing in
preparation for a copy or cut operation.</div></blockquote>
</div>
<div class="section" id="id151">
<h2>ENTER<a class="headerlink" href="#id151" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Activates the “point-and-shoot” function. When set to ENTER, double
clicking the mouse moves the cursor to the mouse position and sends
a 3270 ENTER to the host application.</div></blockquote>
</div>
<div class="section" id="edition">
<h2>Edition<a class="headerlink" href="#edition" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><strong>Paste erase EOF</strong></p>
<p>When activated, a paste operation will erase the rest of an input
field to the right of the pasted text</p>
</div></blockquote>
</div>
<div class="section" id="map-ctrl-v-to-paste-by-typing">
<h2>Map Ctrl+V to Paste by Typing<a class="headerlink" href="#map-ctrl-v-to-paste-by-typing" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Indicates that Ctrl+V will act “paste by typing”, i.e cursor will be
positionned at the end of the pasted text instead of remaining at
the position it was before using Ctrl+V.</div></blockquote>
</div>
<div class="section" id="id152">
<h2>Move cursor on activate<a class="headerlink" href="#id152" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>This setting takes effect only when the user clicks on a background
3270 window in order to bring the window to the foreground. When the
option is activated, the window is brought to the foreground and the
3270 cursor moves to the location in the window where the user
clicked; the copy/paste box and context menu are removed if present.
When the option is not activated, the window is brought to the
foreground and the cursor remains in its previous position; the
copy/paste box and context menu remain displayed if present.</div></blockquote>
</div>
<div class="section" id="preserve-insertion-mode">
<h2>Preserve insertion mode<a class="headerlink" href="#preserve-insertion-mode" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>This setting takes effect only when the keyboard is in insertion
mode. When the option is activated, the cursor will remain in insert
mode until the user returns to normal entry mode by using the
“insert” key again, otherwise the cursor returns to normal whenever
a transmission key is used.</div></blockquote>
</div>
<div class="section" id="pads">
<h2>Pads<a class="headerlink" href="#pads" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><strong>Keep macro pad open</strong></p>
<p>If checked, the macro window remains open all the time. If not, it
disappears as soon as you have clicked a macro.</p>
</div></blockquote>
</div>
<div class="section" id="id153">
<h2>Keep keypad open<a class="headerlink" href="#id153" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>If checked, the keypad window remains open all the time. If not, it
disappears as soon as you have clicked a function key in it.</div></blockquote>
</div>
<div class="section" id="hotspots">
<h2>Hotspots<a class="headerlink" href="#hotspots" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><strong>Display URL hotspots</strong></p>
<p>When activated, any text starting with http, https, mailto, file, or
ftp (except in 3270 input fields) is transformed into a hyperlink.</p>
</div></blockquote>
</div>
<div class="section" id="display-pf-key-hotspots">
<h2>Display PF key hotspots<a class="headerlink" href="#display-pf-key-hotspots" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>When activated, any text starting with Fnn= or PFnn= (except in 3270
input fields) is transformed into a clickable area. Clicking on the
area is equivalent to pressing PF nn.</div></blockquote>
</div>
<div class="section" id="capture">
<h2>Capture<a class="headerlink" href="#capture" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><strong>Auto-capture</strong></p>
<p>When activated, causes a snapshot of each screen displayed by the
host application to be automatically appended to the screen capture
window.</p>
</div></blockquote>
</div>
<div class="section" id="bring-capture-to-the-foreground">
<h2>Bring capture to the foreground<a class="headerlink" href="#bring-capture-to-the-foreground" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>When activated, causes the capture windows to come in the foreground
whenever the cature icon is used.</div></blockquote>
</div>
<div class="section" id="miscellaneous-auto-print">
<h2>Miscellaneous Auto-print<a class="headerlink" href="#miscellaneous-auto-print" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>When activated, causes the Windows print function to be launched
automatically in the print window as a result of a screen snapshot
or print request.</div></blockquote>
</div>
<div class="section" id="id154">
<h2>Response time monitor<a class="headerlink" href="#id154" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>When activated, two counters are displayed on the status line below
the 3270 screen, for example: H:110ms J:31ms. The first number
(H=Host) represents the response time of the VIRTEL server, from the
last Enter or PF key until the receipt of the most recent message
from the server. The second number (J=JavaScript) is the time taken
by the browser scripts to prepare the screen for display. The sum of
the two numbers is the response time perceived by the user.</p>
<p>Note: The response time monitor is active in Ajax mode only.</p>
</div></blockquote>
</div>
<div class="section" id="id155">
<h2>Omit nulls from input<a class="headerlink" href="#id155" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>When activated, VIRTEL Web Access will remove all nulls from
modified input fields before sending to the server, in strict
conformance with 3270 protocol. When not activated, leading and
embedded nulls are converted to blanks, and only trailing nulls are
suppressed, which many users find more convenient.</div></blockquote>
</div>
<div class="section" id="id156">
<h2>Remap caret to logical not<a class="headerlink" href="#id156" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>If checked, translates the “caret” sign (Shift+6 on a US keyboard)
to EBCDIC X&#8216;5F&#8217;, which is the “logical not” sign (¬) in codepage
037/1140.</p>
<p>This tab is used to map specific functions to certain keyboard keys.
The tab contains five sub categories whose names are explicit enough
to not require more precision.</p>
<p>This tab lets the user to save and restore his settings into (or
from) a local file. This backup method is different and independent
of the method used when the &#8220;save&#8221; button is pressed. (See below).</p>
<p>When the user press the &#8220;save&#8221; button, his Web Access settings and
macros are stored in browser local storage.</p>
<p>For Internet Explorer 6, local storage is stored in the folder :</p>
<p>%userprofile%/UserData</p>
<p>For Internet Explorer 8 and 9, local storage is stored in the folder
:</p>
<p>%userprofile%/Local Settings/Application Data/Microsoft/Internet
Explorer/DOMStore</p>
<p>Note: to see DOMStore you must untick “hide protected operating
system files” in Windows folder options.</p>
<p>For other browsers, see</p>
<p><a class="reference external" href="http://www.sitepoint.com/building-web-pages-with-local-storage/">http://www.sitepoint.com/building-web-pages-with-local-storage/</a></p>
<p>Those installations who wish to modify the default Web Access
settings for all users can do so by uploading the w2hparm.js file.
This file is included in the sources.zip file which can be obtained
from the VIRTEL Web Access menu accessible by URL
<a class="reference external" href="http://n.n.n.n:41001">http://n.n.n.n:41001</a></p>
<p>The w2hparm.js file as delivered contains the following source code:</p>
<p><em>w2hparm.js: Default settings for VIRTEL Web Access</em></p>
<p>Default values may be changed or added.</p>
<p>For example, installations who wish to map the 3270 ATTN key to the
Esc (Escape) key for use with Multisession applications such as NVAS
(IBM® NetView™ Access Services) can add the following instruction to
the w2hparm.js file:</p>
<p>Modifications to the global settings are only effective after the
expiry of the w2hparm.js file in the browser’s cache which occurs at
midnight each day. A user can force the use of the updated global
settings file by clearing the browser cache, deleting any cookies
associated with the VIRTEL server, and refreshing the 3270 page
using the Ctrl-R key.</p>
<p>After modifying the w2hparm.js file, it must be uploaded to VIRTEL’s
CLI-DIR directory by means of the “Upload” link on the VIRTEL Web
Access menu (URL <a class="reference external" href="http://n.n.n.n:41001">http://n.n.n.n:41001</a>). Then you must check the
Entry Point (usually CLIWHOST) and check that the transaction whose
“External name” is w2h and whose “Check URL Prefix” field is set to
/w2h/ w2hparm-js specifies CLI-DIR in the “Application” field. For
the CLIWHOST entry point this is transaction CLI-03P.</p>
<p>The list of keywords and possible values which can be coded in the
w2hparm.js file is shown below:</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p><em>w2hparm.js: List of keywords and possible values</em></p>
<p>User interface settings may be presented under two different forms
which are shown at the beginning of this section. The desired form
may be defined using the variable &#8220;settingsGUI&#8221; present in the
w2hparms.js file. The possible values for this parameter are :</p>
</div></blockquote>
</div>
<div class="section" id="version">
<h2>version<a class="headerlink" href="#version" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Allows a choice beetwen older and or newest form. Possible values
are:</div></blockquote>
</div>
<div class="section" id="v1-v2">
<h2>V1+V2<a class="headerlink" href="#v1-v2" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>When activated, two setting icones will appear in the toolbar. The
setting icone of the new forms will be overrided with a &#8220;V2&#8221; label.</div></blockquote>
</div>
<div class="section" id="v2">
<h2>V2<a class="headerlink" href="#v2" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>When activated, only the newest user setting interface is available
in the toolbar. The settings icone will remain the same as actually.</div></blockquote>
</div>
<div class="section" id="no-value">
<h2>no value<a class="headerlink" href="#no-value" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>When none of the previous values are activated, only the older user
setting interface is available in the toolbar.</div></blockquote>
</div>
<div class="section" id="width">
<h2>width<a class="headerlink" href="#width" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Allows to change the width of the setting form.</div></blockquote>
</div>
<div class="section" id="height">
<h2>height<a class="headerlink" href="#height" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Allows to change the heigth of the setting form.</p>
<p>Note: Version 2 is more powerful and offers more setting
possibilities of the keyboard than version 1 . Version 1 will be
dropped in the next release of VIRTEL.</p>
<p>The example below shows how to override the default settingsGUI
parameter using a custom.js file :</p>
<p>/*</p>
<p>* Configuration of the settings dialog GUI.</p>
<p>*/ w2hparm.settingsGUI =</p>
<p>{</p>
<p>/*</p>
</div></blockquote>
<ul>
<li><p class="first">Select which settings dialog version(s) will be accessible in the VWA
toolbar.</p>
</li>
<li><p class="first">Possible values are :</p>
</li>
<li><ul class="first simple">
<li>&#8220;v1+v2&#8221; ...... Allow both settings dialogs (OLD and NEW)</li>
</ul>
</li>
<li><ul class="first simple">
<li>&#8220;v2&#8221; ......... Allow NEW settings dialog only</li>
</ul>
</li>
<li><ul class="first simple">
<li>otherwise ... Allow OLD settings dialog only</li>
</ul>
<blockquote>
<div><p>*/</p>
<p>version : &#8220;v2&#8221;,</p>
<p>/* Width of the settings dialog */ width : 540,</p>
<p>/* Height of the settings dialog */ height : 730</p>
<p>};</p>
<p><em>custom.js: Choosing the Web Access settings interface form</em></p>
<p>To prevent the user from overriding the site defaults, the
administrator can remove individual settings from the user’s Web
Access Settings menu. The names of settings to be hidden are
specified in the w2hparmHide variable in the w2hparm.js file.</p>
<p>The example below shows how to hide the default font, font size, and
style settings from the menu:</p>
<p><em>w2hparm.js: Hiding VIRTEL Web Access settings</em></p>
<p>The VIRTEL application selection menu is dynamically generated by
the appmenu.htm page in conjunction with the applist transaction.
For example, the following URL displays the application selection
menu for the CLIWHOST entry point (line C-HTTP port 41002):</p>
<p><a class="reference external" href="http://n.n.n.n:41002/w2h/appmenu.htm+applist">http://n.n.n.n:41002/w2h/appmenu.htm+applist</a></p>
<p>The application selection menu for the WEB2HOST entry point (line
W-HTTP port 41001) is accessible from the “Other applications” link
on the VIRTEL Web Access main menu.</p>
<p><a class="reference internal" href="../../../_images/image27.jpeg"><img alt="image25" src="../../../_images/image27.jpeg" style="width: 5.08938in; height: 2.28969in;" /></a>An example of the application selection menu is shown in
the figure below:</p>
<p><em>Application selection menu</em></p>
<p>The application selection menu contains clickable links to the
transactions defined under the entry point. A transaction will
appear in the menu if all of the following conditions are met:</p>
<ul class="simple">
<li>The “Application type” is 1 (VTAM) or 2 (VIRTEL)</li>
<li>The “How started” field is 1 (menu)</li>
<li>The user is logged on and authorized via the security subsystem to</li>
</ul>
<p>the security resource whose name is the internal name of the
transaction (except when the transaction “Security” field is 0)</p>
<p>If the user is not logged on, then only public transactions
(security type 0) are displayed.</p>
<p>If the APPSTAT=YES parameter is specified in the VIRTCT (see
“Parameters of the VIRTCT” in the VIRTEL Installation Guide) then
the status of VTAM applications is indicated by a green bar for
active applications, and by a red bar for inactive applications.</p>
<p>To add an application to the menu, use the VIRTEL administration
panels to define a transaction under the entry point, press F1 to
update the entry point, then refresh the appmenu.htm page in the
browser.</p>
<p>The application selection menu offers a choice of several different
presentation modes, selectable by clicking one of the buttons at the
top right of the screen. The selected presentation mode determines
which page template will be used to access the selected host
applications.</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="presentation">
<h2>3270 presentation<a class="headerlink" href="#presentation" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>This presentation mode, which uses the WEB3270.htm page template, is
designed for experienced 3270 users who do not require the
presentation enhancements offered by VIRTEL Web Modernisation. It
offers a user interface which matches as closely as possible that of
a real 3270 screen.</div></blockquote>
</div>
<div class="section" id="ajax-3270">
<h2>Ajax 3270<a class="headerlink" href="#ajax-3270" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>This presentation mode is similar to the 3270 presentation mode, but
it uses a static main page (WEB2AJAX.htm) together with an
Ajax-loaded sub-page (WEB2SUB.html). This can reduce network load
and provide faster response time with a better 3270 user experience.
Ajax mode also offers password encryption as an option (see
<a class="reference external" href="#_bookmark287">“Password</a> <a class="reference external" href="#_bookmark287">encryption”, page
255</a>).</div></blockquote>
</div>
<div class="section" id="html-presentation">
<h2>HTML presentation<a class="headerlink" href="#html-presentation" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>This presentation mode, which uses the WEB2VIRT.htm page template,
is intended as a first step towards VIRTEL Web Modernisation. In
this mode the 3270 screen image is displayed as an HTML form, to
which presentation</p>
<p>enhancements such as drop-down lists, checkboxes, and calendars can
be added by means of VIRTEL Web Modernisation scenarios (see <a class="reference external" href="#_bookmark148">“Web
Modernisation VIRTEL Scenarios”, page 142</a>).</p>
</div></blockquote>
</div>
<div class="section" id="ajax-html">
<h2>Ajax HTML<a class="headerlink" href="#ajax-html" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>This presentation mode is similar to the HTML presentation mode, but
it uses a static main page (WEB2VIRTAJAX.htm) together with an
Ajax-loaded sub-page (WEB2VIRTSUB.html).</div></blockquote>
</div>
<div class="section" id="tablet">
<h2>Tablet<a class="headerlink" href="#tablet" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>This presentation mode it uses the SMARTWEB2VIRT.htm page template
for an HTML presentation adapted for tablets and smartphones.</p>
<p>The appmenu.htm page for the VIRTEL application selection menu is
delivered in the W2H-DIR directory. The page may be customized if
required to meet installation standards. The appmenutable and
appmenuitem styles in the STYLBLUE.css stylesheet allow the
appearance of the menu to be customized. The source code for the
page and the stylesheet may be obtained from the sources.zip file
accessible from the VIRTEL Web Access menu. After modifying the page
or the stylesheet, follow the “Upload” link on the VIRTEL Web Access
menu to upload the updated files to the W2H-DIR directory.</p>
<p>A transaction with external name applist must be present in the list
of transactions at the entry point associated with the line. VIRTEL
supplies as standard transactions W2H-90 (for entry point WEB2HOST,
line W-HTTP port 41001) and CLI-90 (for entry point CLIWHOST, line
C-HTTP port 41002). The applist transaction must specify application
name VIR0021S and application type 2. Security type 1 requires the
user to sign on so that the transaction can determine which
applications the user is authorized to. The user must also be
authorized to the applist transaction itself by its internal name
(W2H-90 or CLI-90).</p>
<p>The figure below shows the definition of the applist transaction
CLI-90:</p>
<p><em>Definition of applist transaction</em></p>
<p>When the appmenu.htm+applist URL is coded in the “TIOA at logon”
field of the default transaction for the entry point, the
application selection menu will be displayed whenever the user
accesses the HTTP line using its root URL (for example,
<a class="reference external" href="http://n.n.n.n:41002">http://n.n.n.n:41002</a> for line C-HTTP).</p>
<p>The default transaction is the transaction whose external name is
the same as the entry point name, and the example below shows the
default transaction for the CLIWHOST entry point:</p>
<p><em>Specifying the application selection menu in the default
transaction</em></p>
<p>VIRTEL provides printing support by means of virtual 3287 type
printers. Each user connected to VIRTEL Web Access has a virtual
3287 printer associated with the user’s 3270 display terminal. The
name of the virtual printer is displayed in the status bar at the
bottom of the Web Access window. Data sent to the virtual printer
from a host application (for example, CICS, QMF, or VPS) is captured
by VIRTEL and is saved in virtual storage.</p>
<p><a class="reference internal" href="../../../_images/image281.png"><img alt="image26" src="../../../_images/image281.png" style="width: 0.30937in; height: 0.30937in;" /></a>A printer icon appears in the Web Access toolbar to
notify the user that print data is available.</p>
<p>When the user clicks on this icon, VIRTEL sends the print data to
the user’s browser, either as an attached file or in a pop-up
window.</p>
<p>Two types of virtual printer are supported:</p>
<ul class="simple">
<li>LUTYPE1 (SCS): VIRTEL sends the print data to the browser as an</li>
</ul>
<p>attached file.</p>
<ul class="simple">
<li>LUTYPE3 (3270 data stream): VIRTEL converts the print data to HTML</li>
</ul>
<p>and the browser displays it in a pop-up window.</p>
<p>In the VIRTEL configuration file, LUTYPE1 virtual printers are
defined with the “Terminal type” field set to 1 or S. The “Relay”
field contains the VTAM LU name known to the host application. The
figure below shows an example definition of 80 LUTYPE1 virtual
printers with LU names RHTIM000 to RHTIM079:</p>
</div></blockquote>
<blockquote>
<div><p><em>VIRTEL definition of LUTYPE1 virtual printers</em></p>
<p>Similarly, LUTYPE3 virtual printers are defined with the “Terminal
type” field set to 2 or P. The figure below shows an example
definition of 80 LUTYPE3 virtual printers with LU names RHTIP000 to
RHTIP079:</p>
<p><em>VIRTEL definition of LUTYPE1 virtual printers</em></p>
<p>To associate virtual printers with the corresponding terminal LU
names, define the printer LU name in the “2nd relay” field of the
terminal pool definition. In the example below, Web Access terminals
with LU names RHTVT000-079 are associated with virtual printer LU
names RHTIP000-079 (LUTYPE3). Similarly, terminal LU names
RHTVT100-179 are associated with virtual printer LU names
RHTIM000-079 (LUTYPE1). There is a one-for-one correspondence
between the display terminal’s LU name and the printer LU name.</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="16%" />
<col width="23%" />
<col width="7%" />
<col width="7%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">CLLOC000</th>
<th class="head">0050</th>
<th class="head">&#160;</th>
<th class="head">3</th>
<th class="head">3</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>CLVTA000</td>
<td>0080</td>
<td>*W2HPOOL</td>
<td>3</td>
<td>3</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>DELOC000</td>
<td>0010</td>
<td>&#160;</td>
<td>3</td>
<td>3</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>DEVTA000</td>
<td>0016</td>
<td>*W2HPOOL</td>
<td>3</td>
<td>3</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>W2HIM000</td>
<td>0080</td>
<td>RHTIM000</td>
<td>S</td>
<td>1</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>W2HIP000</td>
<td>0080</td>
<td>RHTIP000</td>
<td>P</td>
<td>1</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>W2HTP000</td>
<td>0080</td>
<td>RHTVT000</td>
<td>3</td>
<td>3</td>
<td>*W2HPOOL RHTIP000</td>
</tr>
<tr class="row-even"><td>W2HTP100</td>
<td>0080</td>
<td>RHTVT100</td>
<td>3</td>
<td>3</td>
<td>*W2HPOOL RHTIM000</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="25%" />
<col width="28%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">P1=Update</th>
<th class="head">P2=Delete</th>
<th class="head">P3=Return</th>
<th class="head">P6=1st Page</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>P7=Page-1</td>
<td>P8=Page+1</td>
<td>P12=Details</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p><em>VIRTEL terminal definitions for virtual printers</em></p>
<p>Virtual printer LUs are activated by VIRTEL at startup time, and
will remain in ACTIV state until they are acquired by the
application. For virtual printers defined with terminal type 1 or 2,
the application must initiate the acquire (for example, by CEMT SET
TERM(xxxx) ACQ in CICS).</p>
<p>Virtual printers defined with terminal type P or S may be
automatically connected to a controlling host application when a
user starts a Web Access session using the associated terminal LU.
The “Entry Point” field of the virtual printer definition should
contain the name of an entry point which specifies VIR0021B as its
menu program. The entry point must have one transaction whose
“Application” field contains the name of the host application to
which the printer is to be connected.</p>
<p>The example below shows an entry point definition for connecting
printers to CICS:</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="24%" />
<col width="45%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Menu program</th>
<th class="head">===&gt; VIR0021B</th>
<th class="head">List of transactions</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Identification scenario</td>
<td>===&gt;</td>
<td>eg XML identification</td>
</tr>
<tr class="row-odd"><td>Type 3 compression</td>
<td>===&gt;</td>
<td>Discover typical screens (Virtel/PC)</td>
</tr>
<tr class="row-even"><td>Mandatory identification</td>
<td>===&gt;</td>
<td>(PC or minitel)</td>
</tr>
<tr class="row-odd"><td>3270 swap key</td>
<td>===&gt;</td>
<td>eg P24</td>
</tr>
<tr class="row-even"><td>Extended colors</td>
<td>===&gt;</td>
<td>E: extended X: extended + DBCS</td>
</tr>
</tbody>
</table>
<blockquote>
<div><em>Entry point definition for virtual printer autoconnect</em></div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="7%" />
<col width="5%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><p class="first">Application type Pseudo-terminals Logmode</p>
<p class="last">How started</p>
</th>
<th class="head"><p class="first">===&gt;</p>
<p>===&gt;</p>
<p>===&gt;</p>
<p class="last">===&gt;</p>
</th>
<th class="head"><p class="first">1</p>
<p class="last">1</p>
</th>
<th class="head"><p class="first">1=VTAM 2=VIRTEL 3=SERV 4=PAGE 5=LINE</p>
<p class="last">Prefix of name of partner terminals Specify when LOGMODE must be changed 1=menu 2=sub-menu 3=auto</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><p class="first">Security</p>
<p class="last">H4W commands ? Logon message</p>
</td>
<td><p class="first">===&gt;</p>
<p>===&gt;</p>
<p class="last">===&gt;</p>
</td>
<td>0</td>
<td>0=none 1=basic 2=NTLM 3=TLS 4=HTML 0=no 1=yes 2=if2VIRTEL 4=auto</td>
</tr>
<tr class="row-odd"><td>TIOA at logon</td>
<td>===&gt;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>TIOA at logoff</td>
<td>===&gt;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Initial Scenario Input Scenario</td>
<td><p class="first">===&gt;</p>
<p class="last">===&gt;</p>
</td>
<td>&#160;</td>
<td><p class="first">Final Scenario ===&gt;</p>
<p class="last">Output Scenario ===&gt;</p>
</td>
</tr>
<tr class="row-even"><td>P1=Update</td>
<td>&#160;</td>
<td>&#160;</td>
<td>P3=Return P12=Server</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p><em>Transaction definition for virtual printer autoconnect</em></p>
<p>Virtual printer LUs must be defined to VTAM with an appropriate
LOGMODE (normally SCS for LUTYPE1, or DSILGMOD for LUTYPE3). The
necessary APPL statements may be coded in the VIRTAPPL member of the
VTAMLST library, as shown in the example below:</p>
<p><em>VTAM definitions for virtual printers</em></p>
<p>If the virtual printer is defined to CICS via RDO, use an
appropriate TYPETERM as shown in the table below:</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p><em>CICS TYPETERM definitions for virtual printers</em></p>
<p>Note: from version 4.50 onwards, VIRTEL supports the QUERY parameter
for SCS printers as well as for LUTYPE3 printers.</p>
<p>When virtual printers are defined with terminal type 1 or S, all
VIRTEL transactions defined under an entry point which offers
printing must indicate the name of an “Input Scenario”. The scenario
processes the HTTP request containing a PF=SCENARIO-PRINT parameter
which is issued when the user presses the “Get print data” icon
(below) on the VIRTEL Web Access toolbar.</p>
</div></blockquote>
<p><a class="reference internal" href="../../../_images/image281.png"><img alt="image27" src="../../../_images/image281.png" style="width: 0.30937in; height: 0.30937in;" /></a></p>
<blockquote>
<div><p>The scenario accesses the SCS print data which is accumulated in a
VIRTEL variable called $PRINT$, and instructs VIRTEL to send the
print data to the browser as an attached file.</p>
<p>Several suitable scenarios are delivered as standard in the VIRTEL
SAMPLIB and LOADLIB:</p>
</div></blockquote>
</div>
<div class="section" id="scenfpdf">
<h2>SCENFPDF<a class="headerlink" href="#scenfpdf" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>converts an SCS datastream into a PDF document</div></blockquote>
</div>
<div class="section" id="scenfpcl">
<h2>SCENFPCL<a class="headerlink" href="#scenfpcl" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>downloads PCL data into a raw printer file</div></blockquote>
</div>
<div class="section" id="scenppdf">
<h2>SCENPPDF<a class="headerlink" href="#scenppdf" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>converts PCL data into a PDF document (requires additional VIRTEL
PCL2PDF feature running on a Windows server)</p>
<p>When the SCENFPDF input scenario is specified in the VIRTEL
transaction definition, the SCS data produced by the application is
passed to VIRTEL’s MAKEPDF component, and the resulting PDF file is
sent to the browser. The browser normally displays a dialog giving
the user the choice of opening or saving the PDF file.</p>
<p>Certain applications such as VPS are capable of sending print data
in PCL (HP Printer Command Language) format to SNA printers. The PCL
commands and data are sent as SCS transparent data on sessions with
LUTYPE1 logical units.</p>
<p>The transparent data (contained in blocks of up to 253 ASCII
characters preceded by a X’35’ SCS command) is extracted from the
SCS datastream and is copied into the VIRTEL variable $PRINT$.</p>
<p>PCL data may also be delivered in EBCDIC as part of the normal SCS
datastream, and this data will be converted to ASCII using the
codepage defined by the COUNTRY parameter in the VIRTCT (see
“Parameters of the VIRTCT” in the VIRTEL Installation Guide).</p>
<p>The SCENFPCL scenario delivered as standard in the VIRTEL SAMPLIB
and LOADLIB allows PCL data to be downloaded to the user’s
workstation as an attached file. The user may either save the file,
or open it using an appropriate program (such as PCL Reader from
Page Technology Marketing, Inc.) to display and optionally print the
PCL data.</p>
<p>For customers who have licensed the optional PCL2PDF feature of
VIRTEL, PCL output from host applications can be delivered to the
workstation as PDF documents.</p>
<p>The SCENPPDF scenario captures PCL data and sends it to an external
server for conversion. The external server is a Windows Server
2008R2 platform running the Syspertec PCL2PDF application. The
VIRTEL configuration must include a line with external name PCL2PDF
which defines the IP address of the Windows server, as shown in the
example below:</p>
</div></blockquote>
<blockquote>
<div><p><em>VIRTEL line definition for PCL2PDF server</em></p>
<p>A batch job, supplied as member PCL2PDF of the VIRTEL SAMPLIB,
allows the definition of the PCL2PDF line to be added to the VIRTEL
configuration.</p>
<p>VIRTEL Web Access supports transfer of files between the browser and
a TSO session using the IND$FILE protocol.</p>
<p>To activate the file transfer function you must access TSO via a
VIRTEL transaction which specifies SCENINDT in both the “Input
scenario” and the “Output scenario” fields of the transaction
definition. The figure below shows the sample TSO transaction W2H-13
supplied with VIRTEL:</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="26%" />
<col width="23%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><p class="first">TIOA at logoff</p>
<p class="last">Initial Scenario</p>
</th>
<th class="head"><p class="first">===&gt;</p>
<p class="last">===&gt;</p>
</th>
<th class="head">Final Scenario</th>
<th class="head">===&gt;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Input Scenario</td>
<td>===&gt; SCENINDT</td>
<td>Output Scenario</td>
<td>===&gt; SCENINDT</td>
</tr>
<tr class="row-odd"><td>P1=Update</td>
<td>&#160;</td>
<td>P3=Return</td>
<td>P12=Server</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p><em>TSO transaction definition for file transfer</em></p>
<p>The source code of the SCENINDT scenario is supplied in the VIRTEL
SAMPLIB.</p>
<p>To activate the file transfer function when a user-written scenario
is specified in the transaction definition, the INDSCEN$ macro
instruction must be added to both the input and output sections of
the scenario.</p>
<p>When file transfer is activated, two new icons (receive file) and
(send file) appear on the VIRTEL Web Access toolbar:</p>
<p><a class="reference internal" href="../../../_images/image29.jpeg"><img alt="image28" src="../../../_images/image29.jpeg" style="width: 5.09831in; height: 1.58083in;" /></a></p>
<p><em>VIRTEL Web Access toolbar for TSO file transfer</em></p>
<p>To transfer a file from TSO to your workstation, go to ISPF option 6
(or TSO READY) and click the “Receive” icon on the toolbar. The
“Receive File” dialog will open:</p>
<p><a class="reference internal" href="../../../_images/image30.jpeg"><img alt="image29" src="../../../_images/image30.jpeg" style="width: 5.12552in; height: 3.46667in;" /></a></p>
<p><em>VIRTEL IND$FILE receive dialog (part 1)</em></p>
<p>Specify the TSO dataset name, surrounded by quotes if necessary.
Dataset names without quotes will be prefixed by your TSO prefix
(usually your userid). Click either “Text” or “Binary”. “Text”
translates the file from EBCDIC to ASCII and inserts carriage return
line feed sequences (x’0D0A’) at the end of each record. “Binary”
performs no translation.</p>
<p>Finally click “Receive” to start the transfer.</p>
<p><a class="reference internal" href="../../../_images/image311.jpeg"><img alt="image30" src="../../../_images/image311.jpeg" style="width: 5.11416in; height: 3.90292in;" /></a>When the file transfer is complete, the browser’s
“Download” dialog appears:</p>
<p><em>VIRTEL IND$FILE receive dialog (part 2)</em></p>
<p>Click “Save”. The “Save As” dialog will open to allow you to specify
the name and location of the destination file on your workstation:</p>
<p><a class="reference internal" href="../../../_images/image321.jpeg"><img alt="image31" src="../../../_images/image321.jpeg" style="width: 5.07698in; height: 2.95469in;" /></a></p>
<p><em>VIRTEL IND$FILE receive dialog (part 3)</em></p>
<p>Now select the destination file and click “Save”. If the file
already exists you will be prompted for permission to overwrite it.
The “Download Complete” dialog appears when the file has been saved:</p>
</div></blockquote>
<p><a class="reference internal" href="../../../_images/image331.jpeg"><img alt="image32" src="../../../_images/image331.jpeg" style="width: 5.10239in; height: 3.58156in;" /></a></p>
<blockquote>
<div><p><em>VIRTEL IND$FILE receive dialog (part 4)</em></p>
<p>To transfer a file from your workstation to TSO, go to ISPF option 6
(or TSO READY) and click the “Send” icon on the toolbar. The “Send
File” dialog will open:</p>
<p><a class="reference internal" href="../../../_images/image34.jpeg"><img alt="image33" src="../../../_images/image34.jpeg" style="width: 5.10876in; height: 3.10573in;" /></a></p>
<p><em>VIRTEL IND$FILE send dialog (part 1)</em></p>
<p><a class="reference internal" href="../../../_images/image35.jpeg"><img alt="image34" src="../../../_images/image35.jpeg" style="width: 5.09479in; height: 3.90094in;" /></a>Click the “Browse...” button and the “Choose File to
Upload” dialog will appear:</p>
<p><em>VIRTEL IND$FILE send dialog (part 2)</em></p>
<p>Choose the file you want to upload, and click “Open” to return to
the “Send File” dialog:</p>
<p><a class="reference internal" href="../../../_images/image36.jpeg"><img alt="image35" src="../../../_images/image36.jpeg" style="width: 5.11032in; height: 3.77719in;" /></a></p>
<p><em>VIRTEL IND$FILE send dialog (part 3)</em></p>
<p>Specify the TSO dataset name, surrounded by quotes if necessary.
Dataset names without quotes will be prefixed by your TSO prefix
(usually your userid).</p>
<p>If the TSO dataset does not yet exist, you may optionally specify
space (units, primary quantity, and secondary quantity), and DCB
attributes (record format, logical record length, and block size).
If you do not specify these attributes, the TSO IND$FILE will use
its default values.</p>
<p>Check the “Append” checkbox to append the file to the end of an
existing TSO file. The “New” checkbox indicates that the TSO file
must not already exist.</p>
<p>Click either “Text” or “Binary”. “Text” translates the file from
ASCII to EBCDIC and treats carriage return line feed sequences
(x’0D0A’) as end of each record markers. “Binary” performs no
translation. Finally click “Send” to start the transfer.</p>
<p><a class="reference internal" href="../../../_images/image37.jpeg"><img alt="image36" src="../../../_images/image37.jpeg" style="width: 5.10125in; height: 3.68958in;" /></a></p>
<p><em>VIRTEL IND$FILE send dialog (part 4)</em></p>
<p>The message “File transfer complete” is displayed upon successful
completion of the upload.</p>
<p>Users can select a PC Codepage for file transfer. Possible values
are :</p>
</div></blockquote>
</div>
<div class="section" id="windows-cp-1252">
<h2>Windows (CP-1252)<a class="headerlink" href="#windows-cp-1252" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>When selected, causes the file being translated by VIRTEL according
to the CP-1252 ASCII-EBCDIC translation table.</div></blockquote>
</div>
<div class="section" id="ms-dos-cp-850">
<h2>MS-DOS (CP-850)<a class="headerlink" href="#ms-dos-cp-850" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>When selected, causes the file being translated by VIRTEL according
to the CP-850 ASCII-EBCDIC translation table. The selected CP-850
table depends on the value of the COUNTRY parameter specified in the
VIRTCT. If this value is &#8220;FR&#8221;, &#8220;DE&#8221; or &#8220;BE&#8221;, system will use
corresponding table FR-850, DE-850 or BE-850. If the specified
country value is different, by default the BE-850 table will be used
to support CECP 500 international EBCDIC.</p>
<p>Users who frequently carry out the same or similar file transfers
can save the file transfer parameters for later reuse. To save a
file transfer, enter the dataset name and the type of transfer, then
click the “Save” button:</p>
<p><a class="reference internal" href="../../../_images/image381.png"><img alt="image37" src="../../../_images/image381.png" style="width: 5.13562in; height: 4.16625in;" /></a></p>
<p><em>VIRTEL IND$FILE receive dialog (saved transfers)</em></p>
<p>The user can then choose a name for the saved transfer, and click
“OK” to save the parameters. At the next transfer, the user clicks
the name of the saved transfer to retrieve the parameters, then
clicks “Receive” to start the transfer.</p>
</div></blockquote>
<p><a class="reference internal" href="../../../_images/image391.png"><img alt="image38" src="../../../_images/image391.png" style="width: 5.13560in; height: 1.45406in;" /></a></p>
<blockquote>
<div><p><em>Saving the file transfer parameters</em></p>
<p>Users can save transfer parameters for both “Send” and “Receive”.
The paramters are saved in browser local storage. The number of sets
of parameters which can be saved is limited only by the amount of
local storage available.</p>
<p>Normally the VIRTEL administrator provides access to VTAM
applications by configuring a specific VIRTEL transaction for each
application. However some users require the ability to access any
VTAM application, including those not configured by the
administrator, similar to the function provided by VTAM’s USSTAB
USS10 screen. For these users, VIRTEL provides transactions named
W2H-16 and CLI-16 whose external name is VTAM.</p>
<p>This transaction displays a screen on which the user can enter the
ACBNAME of the VTAM application, together with optional LOGON DATA
and LOGMODE.</p>
<p>To access VIRTEL’s VTAM logon screen, click on “Other applications”
on the VIRTEL Web Access menu (port 41001) or enter its URL
directly:</p>
<p><a class="reference external" href="http://n.n.n.n:41001/w2h/WEB2AJAX.htm+VTAM">http://n.n.n.n:41001/w2h/WEB2AJAX.htm+VTAM</a></p>
</div></blockquote>
<p><a class="reference internal" href="../../../_images/image40.png"><img alt="image39" src="../../../_images/image40.png" style="width: 5.10176in; height: 3.15781in;" /></a></p>
<blockquote>
<div><p><em>VTAM logon screen in VIRTEL Web Access mode</em></p>
<p>To access, for example, TSO with logmode SNX32705, type TSO in the
“LOGON APPLID” field and SNX32705 in the “LOGMODE” field, then press
enter.</p>
<p>You can exit this screen by pressing F3.</p>
<p>Lines 3 and 4 of the screen indicate the name of your installation
and are taken from the TITRE1 and TITRE2 parameters of the VIRTCT
(see VIRTEL Installation Guide).</p>
<p>The layout of the VTAM logon screen can be customized by assembling
the map in member EIRM00U in the VIRTEL SAMPLIB.</p>
<p>To permit access to the VTAM logon screen, the administrator defines
a VIRTEL transaction which calls VIRTEL program VIR0021U, as shown
in the example below. The transaction should have “Security” set to
1 to force the user to sign on before the screen is displayed.</p>
<p>The VTAM logon screen is protected by a security resource named
prefix.W2H-16 or prefix.CLI-16 (where prefix is the value of the
PRFSECU parameter in the VIRTCT) in the RACF FACILITY class.
Provided the “Security” field is set to 1, and security is activated
in the VIRTCT, only those users having READ access to the resource
can obtain the VTAM logon screen.</p>
<p><a class="reference internal" href="../../../_images/image4110.png"><img alt="image40" src="../../../_images/image4110.png" style="width: 5.16895in; height: 3.25187in;" /></a></p>
<p><em>Example VIRTEL transaction for VTAM logon via Web Access</em></p>
<p>The VIRTEL administrator can customize the color settings for all
applications or for specific applications. The custom settings are
defined in a style sheet called custom.css which the administrator
uploads to a VIRTEL directory designated for storage of customer
files (usually CLI-DIR).</p>
<p>The custom.css file is loaded from the directory designated by the
transaction W2H-03CC (for entry point WEB2HOST on port 41001) or
CLI-03CC (for entry point CLIWHOST on port 41002). These
transactions have external name w2h and specify the path name
/w2h/custom-css in the URL Prefix field. When VIRTEL is first
installed, these transactions point to directory W2H-DIR which
contains a dummy version of the file custom.css.</p>
<p>The procedure for activating customized settings is:</p>
</div></blockquote>
<ol class="arabic">
<li><p class="first">Download the dummy custom.css from W2H-DIR by opening this URL in
your browser: <a class="reference external" href="http://n.n.n.n:41001/w2h/">http://n.n.n.n:41001/w2h/</a> custom.css (where n.n.n.n is
the IP address of your VIRTEL)</p>
</li>
<li><p class="first">Save the custom.css file in a directory on your workstation.</p>
</li>
<li><p class="first">Open the custom.css file using a text editor such as notepad.</p>
</li>
<li><p class="first">Edit the custom.css file with the color and/or logo settings you
require (see examples below), then save the updated file.</p>
</li>
<li><p class="first">Open the VIRTEL Web Access menu (URL <a class="reference external" href="http://n.n.n.n:41001">http://n.n.n.n:41001</a>) and click
the “Upload” link</p>
</li>
<li><p class="first">Click “Browse” and navigate to the directory where you saved the
updated custom.css. Click on the custom.css file, then click the
“CLI-DIR” button to upload the file to VIRTEL.</p>
</li>
<li><p class="first">From the VIRTEL Web Access menu (URL <a class="reference external" href="http://n.n.n.n:41001">http://n.n.n.n:41001</a>) click the
“Admin” link.</p>
</li>
<li><p class="first">Press “F3 - Entry Points” then click “CLIWHOST”</p>
</li>
<li><p class="first">Press “F4 - Transactions” then click “CLI-03CC”</p>
</li>
<li><p class="first">Press “F12 - View/Add” and type CLI-DIR in the “Application” field,
overwriting the original value W2H-DIR</p>
</li>
<li><p class="first">Press “F1 - Update” at the Transaction Detail Definition screen,
then “F3 – Return” twice to return to the List of Entry Points
screen, then “F1 – Update” again to update the entry point.</p>
<p>It is sometimes useful for the user to have a clear visual
indication of which system he or she is logged on to. This example
shows how to set the color of the toolbar to yellow for SPCICSP and
pink for SPCICSQ.</p>
<p><a class="reference internal" href="../../../_images/image421.jpeg"><img alt="image41" src="../../../_images/image421.jpeg" style="width: 5.15687in; height: 1.07146in;" /></a><em>Example custom.css for coloring the toolbar according to
CICS region</em></p>
<p><em>Web Access screen with yellow toolbar for SPCICSP</em></p>
<p><a class="reference internal" href="../../../_images/image43.jpeg"><img alt="image42" src="../../../_images/image43.jpeg" style="width: 5.05125in; height: 1.06500in;" /></a></p>
<p><em>Web Access screen with pink toolbar for SPCICSQ</em></p>
<p>Another way of providing a clear visual indication of which
application the user is logged on to is to add a text label to the
toolbar. In this example the text “MVS1” is displayed when logged on
to application TSO1A, and “MVS2” is displayed for application TSO2A.</p>
<p><a class="reference internal" href="../../../_images/image44.jpeg"><img alt="image43" src="../../../_images/image44.jpeg" style="width: 5.15531in; height: 1.27292in;" /></a><em>Example custom.css for adding custom text to the
toolbar</em></p>
<p><em>Web Access screen with custom text in the toolbar</em></p>
<p>It is sometimes useful to have a clear visual indication of which
server a user is logged on to, its version and the maintenace level
applied on the system. By default, the value specified into the
APPLID parameter of the VIRTCT is displayed at the top-right of the
toolbar as shown below. This information is followed by the running
version number and the Virtel Web access level of maintenance used.
This last information is enclosed in parentheses.</p>
</li>
</ol>
<p><a class="reference internal" href="../../../_images/image45.jpeg"><img alt="image44" src="../../../_images/image45.jpeg" style="width: 5.14063in; height: 1.02323in;" /></a></p>
<blockquote>
<div><p>The running version and the level of maintenance cannot be hidden,
only the server name can be permanently removed by modifying the
w2hparm.hideinfo attribut present in the customized w2hparms.js
file:</p>
<p><em>Example w2hparm.js for hiding the mainframe application name on
which a user is connected to.</em></p>
<p>If the default value is preserved, the user can hide this
information for his own usage by checking &#8220;Hide Virtel information
in toolbar&#8221; in the Display tab of the settings panel.</p>
<p>Under Virtel 4.53, this feature requieres update #5140 or above to
be applied.</p>
<p>The administrator may wish to prevent users from accessing features
like copy/paste, print, and settings. This example shows how to hide
the toolbar using a custom.css file:</p>
<p><em>Example custom.css for hiding the toolbar</em></p>
<p>You can also use custom.js to remove icons individually from the
toolbar, se<a class="reference external" href="#_bookmark132">e “Removing unwanted toolbar
icons”,</a> <a class="reference external" href="#_bookmark132">page 126</a>.</p>
<p>Some installations prefer to modify the colors displayed on the 3270
screen to make the characters more readable. This example shows how
to modify the colors used by VIRTEL Web Access:</p>
<p><em>Example custom.css for modifying the 3270 colors</em></p>
<p>In this stylesheet, BLUE, RED, PINK, GREEN, TURQUOISE, YELLOW, and
WHITE represent the 7 colors of the 3270 pallette, with a prefix
indicating the highlighting mode: N=normal, U=underscore, B=blink,
R=reverse video.</p>
<p>The color values (for example, #7890F0) are expressed in hexadecimal
RGB encoding or as color names. For more explanation, see :</p>
<ul class="simple">
<li><a class="reference external" href="http://en.wikipedia.org/wiki/Web_colors">http://en.wikipedia.org/wiki/Web_colors</a> or</li>
<li><a class="reference external" href="http://www.w3schools.com/html/html_colornames.asp">http://www.w3schools.com/html/html_colornames.asp</a></li>
</ul>
<p>This example shows how to display an icon (for example, a company
logo) at the left of the toolbar:</p>
<p><em>Example custom.css for displaying company logo in the toolbar</em></p>
<p>This example shows how to replace the Virtel logo in the VIRTEL Web
Access menu and the Application menu by your company logo:</p>
<p><em>Example custom.css for replacing the Virtel logo by a company logo</em></p>
<p>Note: If no explicit path is given, the company logo will be loaded
from the same directory as the custom.css file.</p>
<p>This example shows how to remove the 3D/hover effects on toolbar
buttons by adding orders in the custom.css file:</p>
<p>/*</p>
<p>* VIRTEL Web Access style sheet customisation for removing 3D/hover
effects</p>
<p>* (c)Copyright SysperTec Communication 2014 All Rights Reserved</p>
<p>*/</p>
<p>#toolbar td .tbButton, #toolbar td .tbButton:hover, #toolbar td
.tbButton:active { background-color: inherit;</p>
<p>border: inherit;</p>
<p>box-shadow: inherit;</p>
<p>}</p>
<p><em>Example custom.css for removing 3D/hover effects on buttons</em></p>
<p>Under Virtel 4.53, this feature requieres update #5140 or above to
be applied.</p>
<p>This example shows how to change the backgroung color of the toolbar
buttons by adding orders in the custom.css file:</p>
<p>/*</p>
<p>* VIRTEL Web Access style sheet customisation the background of the
toolbar buttons</p>
<p>* (c)Copyright SysperTec Communication 2014 All Rights Reserved</p>
<p>*/</p>
<p><em>Example custom.css managin the background color of the toolbar
buttons</em></p>
<p>Under Virtel 4.53, this feature requieres update #5140 or above to
be applied.</p>
<p>If some icons on the toolbar are displayed with some parasites on
the border, please check that the browser is not in a zoom mode
greater than 100%.</p>
<p>To take into account site-specific Javascript extensions for Web
Access, the WEB2AJAX.htm page template loads the</p>
<p>/w2h/custom-js/custom.js file when a session is started. An empty
custom.js file is delivered as standard in the W2H- DIR directory.
The CLI-03CJ (/w2h/custom-js) transaction delivered as standard
under the CLIWHOST entry point references the W2H-DIR directory, but
the administrator can modify this transaction to reference a
different directory containing a site-specific version of custom.js.
The CLI-DIR directory, which is intended for client-specific files,
may be used for this purpose.</p>
<p>To facilitate site-specific modifications to custom.js, VIRTEL Web
Access calls various custom exits at strategic points in its
processing. These exits are optional Javascript functions which can
be codes custom.js if required. The exits are described below.</p>
<p>This function is called after the session with the host application
has started.</p>
<p>This function is called before submitting a request to the VIRTEL
server. The arguments passed to before_submitForm are:</p>
</div></blockquote>
</div>
<div class="section" id="pfkey">
<h2>pfKey<a class="headerlink" href="#pfkey" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the key pressed: &#8220;ENTER&#8221;, &#8220;PF1&#8221;, etc.</div></blockquote>
</div>
<div class="section" id="oform">
<h2>oForm<a class="headerlink" href="#oform" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>a DOM object representing the form to be submitted (usually
document.virtelForm)</p>
<p>This function is called after receiving a response from the VIRTEL
server. The arguments passed to after_responseHandle are:</p>
</div></blockquote>
</div>
<div class="section" id="o">
<h2>o<a class="headerlink" href="#o" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the XMLHttpRequest object (contains the status and responseText)</div></blockquote>
</div>
<div class="section" id="id157">
<h2>url<a class="headerlink" href="#id157" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the URL which was used in the request</div></blockquote>
</div>
<div class="section" id="xtim">
<h2>xtim<a class="headerlink" href="#xtim" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>a Javascript Date object representing the time the request was sent
to the server</p>
<p>This function is called before the list of possible values for a
parameter is displayed in the VIRTEL Web Access Settings menu. It
allows the list of values to be modified.</p>
<p>The arguments passed to modify_settingsValues are:</p>
</div></blockquote>
</div>
<div class="section" id="id158">
<h2>name<a class="headerlink" href="#id158" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the parameter name</div></blockquote>
</div>
<div class="section" id="values">
<h2>values<a class="headerlink" href="#values" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>the list of possible values</p>
<p>The return value is treated as the new list of possible values. If
the function returns null or undefined, the list remains unchanged.</p>
<p>This function is called for each subpage after vir3270
initialisation.</p>
<p>This function is called whenever the 3270 window gains the focus.</p>
<p>This function is called whenever the 3270 window loses the focus.</p>
<p>This example uses the after_standardInit function to insert
additional icons into the toolbar when the session is started. Icons
may subsequently be added or removed from the toolbar after each
screen by means of the after_responseHandle function.</p>
<p><em>Example custom.js to customize the toolbar icons</em></p>
<p>The best size for an icon is 32x32 pixels. For bigger or smaller
icons, it possible to offer better center rendering in modifying the
content of the class attribut passed within the &#8220;addtoolbarbutton&#8221;
function in conjunction of using a specific css attribut.</p>
<p>/*</p>
<p>* (c)Copyright SysperTec Communication 2014 All Rights Reserved</p>
<p>* VIRTEL Web Access customer-specific javascript functions</p>
<p>* Resizing a too small or too big toolbar icon.</p>
<p>* For example toosmall_pic.png=22x22 and toobig_pic.jpg=145x30</p>
<p>*/</p>
<p>addtoolbarbutton(999, &#8220;/w2h/toosmall_pic.png&#8221;, &#8220;Custom button #1
tooltip&#8221;, do_search, &#8220;tbButton size22x22&#8221; addtoolbarbutton(999,
&#8220;/w2h/toobig_pic.jpg&#8221;, &#8220;Custom button #2 tooltip&#8221;, do_search,
&#8220;tbButton size145x30&#8221;</p>
<p><em>Example custom.js to specify the toolbar icon size</em></p>
<p>/*</p>
<p>#toolbar td img.tbButton.size22x22 { width: 22px;</p>
<p>height: 22px;</p>
<p>padding: 5px; /* padding is calculated to center the picture
horizontaly and verticaly in the 32x32 alloc</p>
<p>}</p>
<p>#toolbar td img.tbButton.size145x30 { width: 145px;</p>
<p>height: 30px;</p>
<p>padding: 1px 0; /* padding is calculated to center the picture
verticaly in the 32x32 allocated area (1+3</p>
<p>}</p>
<p><em>Example custom.css to manage a toolbar icon with a non standard
size</em></p>
<p>This example uses the after_standardInit function to disable macro
functions by removing the corresponding icons from the toolbar.</p>
<p><em>Example custom.js to remove selected toolbar icons</em></p>
<p>The names of the other toolbar icons which can be removed in this
way are: capture, disconnect, document-print- previw, edit-copy,
edit-cut, edit-paste, emptybuf, file-rcv, file-send, help, keypad,
settings, settingsV2, startrecording, playback, printer.</p>
<p>settingsV2 is présent only if</p>
<p>To hide the toolbar completely, se<a class="reference external" href="#_bookmark123">e “Hiding the toolbar”, page
120</a>.</p>
<p>To hide only the Virtel Application name, se<a class="reference external" href="#_bookmark122">e “Showing / Hiding
server informations”, page 120</a>.</p>
<p>This example uses the after_responseHandle function to modify the
text in the status bar at the bottom of the Web Access screen. The
status bar text is enclosed in &lt;span id=relayStatus&gt;&lt;/span&gt; tags to
allow custom.js to modify it. This example displays the text “Your
printer name is xxxx” in the status bar:</p>
<p><em>Example custom.js to modify the text of the status bar</em></p>
<p>This example uses the after_responseHandle function to modify the
regular expression which is used to identify PF key hotspots.</p>
<p><em>Example custom.js to modify PF key hotspot recognition</em></p>
<p>This example uses the after_standardInit function in conjunction
with a custom stylesheet to add a watermark to the Web Access
screen. The watermark displays the application name in light text
behind the 3270 screen content. The application name is obtained
from the class attribute of the body tag.</p>
<p><em>Example custom.js to add a watermark to the Web Access 3270 screen</em></p>
<p>/*</p>
</div></blockquote>
<ul>
<li><p class="first">(c)Copyright SysperTec Communication 2012 All Rights Reserved</p>
</li>
<li><p class="first">VIRTEL Web Access style sheet for site customisation</p>
<blockquote>
<div><p>*/</p>
<p>.watermark {</p>
<p>position: absolute; pointer-events: none; left: 150px;</p>
<p>top: 100px; color: gray; opacity: 0.25; font-size: 10em; width: 60%;</p>
<p>text-align: center; z-index: 1000;</p>
<p>-webkit-text-stroke: 1px #FFF;</p>
<p>-webkit-text-fill-color: transparent;</p>
<p>-webkit-transform: rotate(-40deg);</p>
<p>-moz-transform: rotate(-40deg);</p>
<p>filter: alpha(opacity=25)
progid:DXImageTransform.Microsoft.Matrix(M11=0.819, M12=0.574,
M21=-0.574, M22</p>
<p>}</p>
<p><em>Example custom.css to define the style of the watermark</em></p>
<p><a class="reference internal" href="../../../_images/image461.png"><img alt="image45" src="../../../_images/image461.png" style="width: 5.07834in; height: 3.56125in;" /></a></p>
<p><em>Web Access screen with application name as watermark</em></p>
<p>The callback function modify_settingsValues allows the
administrator to modify or replace the list of values allowed for
specific parameters in the VIRTEL Web Access Settings menu.</p>
<p>The example shown below replaces the list of fonts, and adds two
extra values &#8220;20&#8221; and &#8220;24&#8221; to the list of fontsizes:</p>
<p><em>Example custom.js to modify Settings values</em></p>
<p>Users can obtain help on VIRTEL Web Access functions by clicking the
help icon in the Web Access toolbar:</p>
<p><a class="reference internal" href="../../../_images/image471.png"><img alt="image46" src="../../../_images/image471.png" style="width: 0.22917in; height: 0.22917in;" /></a></p>
<p>which causes the browser to display the page
/w2h/custom-help/help.html delivered as standard with VIRTEL Web
Access.</p>
<p>The administrator can create a custom version of the help.html page
and upload it to a VIRTEL directory destined for site-specific
pages, such as CLI-DIR.</p>
<p><a class="reference internal" href="../../../_images/image48.jpeg"><img alt="image47" src="../../../_images/image48.jpeg" style="width: 5.13438in; height: 5.81250in;" /></a>The standard help.html page is shown below:</p>
<p><em>Standard help page for Web Access</em></p>
<p>To install a customized help.html page, the administrator must
perform the following operations:</p>
<ul class="simple">
<li>Upload the customized help.html file into a VIRTEL directory such</li>
</ul>
<p>as CLI-DIR</p>
<ul class="simple">
<li>Modify the VIRTEL transactions CLI-03CH so that it points to the</li>
</ul>
<p>CLI-DIR directory (instead of W2H-DIR as initially installed), then
press F1-F3-F3-F1 to update the transaction and the CLIWHOST entry
point. Perform the same operation on transaction W2H-03CH and entry
point WEB2HOST.</p>
<p>Copy, cut or paste operation are done using standard function key
combinations CTRL + C, CTRL + X or CTRL + V or using a pop-up menu
when using the right mouse button. These operations often require
access to the clipboard, which, depending on the browser used, may
require the installation of an additional module..</p>
<p>For Internet Explorer, the usage of the clipboard is systematic for
copy / cut / paste operation and does not require any additional
module.</p>
<p>During the first attempt to use copy / cut / paste function the
browser will display a window requesting confirmation to access the
clipboard. Once the decision is communicated, it remains valid until
closing the window with the domain.</p>
<p>An ADDON is required to perform any copy / cut / paste operation
with another application or with another internet domain. The ADDON
is available for download at the following address:</p>
<p><a class="reference external" href="#_bookmark0">https://addons.mozilla.org/fr/firefox/addon/virtel-webaccess-add-on/</a>.</p>
<p>If the browser version is compatible with the latest version of
ADDON published click the &#8220;+ Add to Firefox&#8221; icon. Any additional
window will open to confirm the installation.</p>
</div></blockquote>
</li>
</ul>
<p><a class="reference internal" href="../../../_images/image49.jpeg"><img alt="image48" src="../../../_images/image49.jpeg" style="width: 5.13481in; height: 2.10802in;" /></a></p>
<blockquote>
<div>If the browser version is too old to be supported by the latest
version of ADDON published, the link &#8220;+ Add to Firefox&#8221; will not be
available. Click on the link &#8220;View full history version&#8221; at the
bottom of the page as shown below.</div></blockquote>
<p><a class="reference internal" href="../../../_images/image50.jpeg"><img alt="image49" src="../../../_images/image50.jpeg" style="width: 5.11332in; height: 1.84000in;" /></a></p>
<blockquote>
<div><p>On the next page, select the ADDON version of the most compatible
version available for the browser in use. Click &#8220;+ Add to Firefox&#8221;.
Several versions of the ADDON can be installed in parallel, however,
only one must be active at any given time.</p>
<p>An extension is required for any copy / cut / paste operation with
another application or with another internet domain. The extension
can be obtained on the Chrome WebStore at the following address:</p>
<p><a class="reference external" href="#_bookmark0">https://chrome.google.com/webstore/category/apps?hl=en-GB</a>.</p>
<p>Enter &#8220;Virtel Extender WebAccess&#8221; in the search field and launch the
search. The extension appears in the &#8220;Extensions&#8221; list.</p>
</div></blockquote>
<p><a class="reference internal" href="../../../_images/image511.jpeg"><img alt="image50" src="../../../_images/image511.jpeg" style="width: 5.16146in; height: 0.97396in;" /></a></p>
<blockquote>
<div><p>Click on the extension item and then, on the next page, click &#8220;Add
to Chrome&#8221;.</p>
<p>Once the additional module has been installed, it will be necessary
to specify the permissions.</p>
<p>On the toolbar, click on the &#8220;Menu&#8221; in the upper right (1) icon,
then click on &#8220;Modules&#8221; (2). If this section does not appear
directly in the tool window, click on &#8220;Customise&#8221; (3) tool to add
&#8220;Modules&#8221; in the menu. It is also possible to directly access the
extension manager by typing &#8220;about: addons&#8221; in the URL bar of the
browser.</p>
<p><a class="reference internal" href="../../../_images/image521.png"><img alt="image51" src="../../../_images/image521.png" style="width: 3.50344in; height: 6.16521in;" /></a></p>
<p>On the ADDONS page, select &#8220;Extension&#8221; to display the VIRTEL
extension. Click on the &#8220;Options&#8221; button to display a setup screen
similar to the one shown below.</p>
</div></blockquote>
<p><a class="reference internal" href="../../../_images/image53.jpeg"><img alt="image52" src="../../../_images/image53.jpeg" style="width: 4.98000in; height: 1.11667in;" /></a></p>
<blockquote>
<div><p><a class="reference internal" href="../../../_images/image54.jpeg"><img alt="image53" src="../../../_images/image54.jpeg" style="width: 5.07937in; height: 2.67406in;" /></a></p>
<p>The following options should be set:</p>
</div></blockquote>
</div>
<div class="section" id="automatic-update">
<h2>Automatic update<a class="headerlink" href="#automatic-update" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>by default</li>
<li>enabled</li>
<li>off</li>
</ul>
</div>
<div class="section" id="authorized-domains">
<h2>Authorized domains:<a class="headerlink" href="#authorized-domains" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Contains a list of domains for which permission to access the
clipboard is granted. Each domain is separated from the next with a
comma. The * indicates that all values are valid for the
corresponding criteria. All definitions should end with an asterisk
character, for example,
<a class="reference external" href="http://www.mydomain.com/">&#8220;http://w</a>w<a class="reference external" href="http://www.mydomain.com/">w.mydomain.com/&#8221;</a>
is not a valid definition because it does not end with *.</p>
<p>Example of definitions:</p>
</div></blockquote>
<ul class="simple">
<li><a class="reference external" href="http://www.mydomain.com/">http://www.mydomain.com/*</a> allow
access to the clipboard for the domain. Typing
<a class="reference external" href="http://www.mydomain.com:8080/">http://www.mydomain.com:8080/</a> will be denied access, the presence of
a port number in the URL does not match the rule.</li>
<li><a class="reference external" href="http://192.168.92.161:41001/*">http://192.168.92.161:41001/*</a> allows URLs communicating on the 41001
port access to the clipboard for specified IP address. URLs using
another port will be denied access.</li>
<li><a class="reference external" href="http://192.168.92.161/">http://192.168.92.161:*</a> allows URL
communicating on any port to access the clipboard for specified IP
address. All entries must ends with a wildchar (*) character. Only
one wildchar character is allowed for each entry.</li>
</ul>
</div>
<div class="section" id="show-notifications">
<h2>Show notifications:<a class="headerlink" href="#show-notifications" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Display a POP_UP window in the bottom right of the screen
summarizing the result of last copy / paste operation.</div></blockquote>
</div>
<div class="section" id="refresh-preferences">
<h2>Refresh preferences:<a class="headerlink" href="#refresh-preferences" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Saves the last configuration changes.</p>
<p>On the toolbar, click on the &#8220;Customize and control Google Chrome&#8221;
icon in the upper right (1), then click on the &#8220;Settings&#8221; (2), then
the extensions section. It is also possible to directly access the
extension manager by typing &#8220;chrome://extensions&#8221; in the URL bar of
the browser. From the extensions page, select &#8220;Extension&#8221; to display
the VIRTEL extension.</p>
<p><a class="reference internal" href="../../../_images/image55.jpeg"><img alt="image54" src="../../../_images/image55.jpeg" style="width: 5.10999in; height: 3.38333in;" /></a></p>
<p><a class="reference internal" href="../../../_images/image56.jpeg"><img alt="image55" src="../../../_images/image56.jpeg" style="width: 5.13188in; height: 1.23375in;" /></a>Verify that the extension is activated and click on the
&#8220;Options&#8221; link.</p>
<p>The following options should be set:</p>
<p><a class="reference internal" href="../../../_images/image57.jpeg"><img alt="image56" src="../../../_images/image57.jpeg" style="width: 5.10937in; height: 6.50781in;" /></a></p>
</div></blockquote>
</div>
<div class="section" id="allow-copy-paste-operation">
<h2>Allow copy / paste operation:<a class="headerlink" href="#allow-copy-paste-operation" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Allows operations copy / cut / paste on the domains specified in the
definitions parameter.</div></blockquote>
</div>
<div class="section" id="for-all-domains">
<h2>For all domains:<a class="headerlink" href="#for-all-domains" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>All domains are open for any copy / cut / paste operations.</div></blockquote>
</div>
<div class="section" id="for-these-domains-only">
<h2>For these domains only:<a class="headerlink" href="#for-these-domains-only" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Only the domains defined in a list are allowed. When multiple
domains are required, the list must be defined with one line per
domain reference.</p>
<p>Example of definitions:</p>
</div></blockquote>
<ul class="simple">
<li><a class="reference external" href="http://www.mydomain.com/">http://www.mydomain.com/*</a> allow
access to the clipboard for the domain. Typing
<a class="reference external" href="http://www.mydomain.com:8080/">http://www.mydomain.com:8080/</a> will be denied access, the presence of
a port number in the URL does not match the rule.</li>
<li><a class="reference external" href="http://192.168.92.161:41001/*">http://192.168.92.161:41001/*</a> allows URLs communicating on the 41001
port access to the clipboard for specified IP address. URLs using
another port will be denied access.</li>
<li><a class="reference external" href="http://192.168.92.161/">http://192.168.92.161:*/*</a> allows URL
communicating on any port to access the clipboard for specified IP
address.</li>
</ul>
</div>
<div class="section" id="iframe-support">
<h2>IFrame support:<a class="headerlink" href="#iframe-support" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Allows operation of copy / cut / paste operation when Virtel Web
Access window is encapsulated in an IFrame.This information is
supplemented by a list of areas on which these operations are
allowed. This list may be identical to that defined in the previous
section and, if required, may contain additional restrictions
through a restrictive list. When a restrictive list is specified,
the relevant fields should appear in the previous list.</div></blockquote>
</div>
<div class="section" id="logging">
<h2>Logging:<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Whenever a copy / cut / paste operation is attempted the domain
involved can be saved to a list. This list is presented in the
following form:</p>
<p>By default the system registers a historical log all operations. It
is possible to restrict registration to only rejected requests by
checking the &#8220;Record only the gold failes Rejected requests&#8221; box.
Managing the number of log entries and setting a retention time is
configurable via &#8220;Maximum entries in history&#8221; and &#8220;Delete history
entries after&#8221; settings.</p>
<p><a class="reference internal" href="../../../_images/image581.png"><img alt="image57" src="../../../_images/image581.png" style="width: 5.10938in; height: 5.94531in;" /></a></p>
<p>Firefox and Chrome. Use the right mouse button to open a selection
menu for copy / cut / paste operations. The operational status of
this feature is displayed in an ICON in top right.</p>
</div></blockquote>
<p><a class="reference internal" href="../../../_images/image591.png"><img alt="image58" src="../../../_images/image591.png" style="width: 1.95686in; height: 1.92531in;" /></a></p>
<blockquote>
<div><p><em>Green: Indicates that the module is properly installed and that the
field is allowed.</em></p>
<p><a class="reference internal" href="../../../_images/image60.png"><img alt="image59" src="../../../_images/image60.png" style="width: 1.95686in; height: 1.93583in;" /></a></p>
<p><em>Orange: Indicates that the module is installed correctly but the
field is not defined as an authorized domain. (Available only for
Chrome).</em></p>
</div></blockquote>
<p><a class="reference internal" href="../../../_images/image617.png"><img alt="image60" src="../../../_images/image617.png" style="width: 1.96740in; height: 1.94635in;" /></a></p>
<blockquote>
<div><p><em>Red: The expansion module is not installed. For Firefox, it may
also indicate that the field is not allowed, or that the navigation
is done in private mode.</em></p>
<p>By pressing the REC button on the VIRTEL Web Access toolbar, the
user can start recording a sequence of keystrokes. A second click on
the REC button terminates the recording and allows the user to
assign a name to the macro which has been recorded.</p>
<p>The PLAY button on the toolbar allows the user to display a list of
macros already recorded, and to replay or delete a macro.</p>
</div></blockquote>
<p><a class="reference internal" href="../../../_images/image621.jpeg"><img alt="image61" src="../../../_images/image621.jpeg" style="width: 0.34375in; height: 0.40625in;" /></a></p>
<blockquote>
<div>REC button</div></blockquote>
<p><a class="reference internal" href="../../../_images/image631.png"><img alt="image62" src="../../../_images/image631.png" style="width: 0.34375in; height: 0.33333in;" /></a></p>
<blockquote>
<div><p>PLAY button</p>
<p>By default macros created by the user are saved on the workstation
in “Browser Local Storage”.</p>
<p>The VirtelMacros function allows global, group, and user macros to
be stored under the name macros.json in a VSAM file on the VIRTEL
host system.</p>
<p>If used in a Sysplex distributed environment, the VSAM file that
contains the macros cannot be shared between two VIRTEL STC (i.e.
each VIRTEL must have its own VSAM macro file).</p>
<p>The SET VMACROS=YES parameter in the ARBOLOAD job allows the
definitions needed for the VirtelMacros function to be loaded during
VIRTEL installation.</p>
<p>Multiple macros.json files can be defined: a global file containing
shared macros for all users, and group and user files where macros
specific to a group or to a user are stored.</p>
<p>User macros created by each user are stored in macros.json files
loaded into the USR-DIR directory with keyword</p>
<p>%USER%. When the macros are loaded into or read from this directory,
VIRTEL substitutes the keyword %USER% by the userid.</p>
<p>Global macros accessible to all users are stored in the macros.json
file loaded into the GLB-DIR directory.</p>
<p>Group macros are defined for a specific group name recognized by the
security subsystem (RACF, TOPS, ACF2). They are stored in a
macros.json file loaded into the GRP-DIR directory with keyword
%GROUP%.</p>
<p>At execution time, VIRTEL substitutes the keyword %GROUP% by the
name of the group supplied by the security subsystem.</p>
<p>A prerequisite for using group and user macros is that the user must
sign on to VIRTEL with a userid and password, either by accessing
VIRTEL via a secure transaction (one whose “Security” field is
non-zero), or by executing a SET$ SIGNON instruction contained in a
scenario.</p>
<p>When VIRTEL is first installed, no macros.json files exist.</p>
<p>To allow macros to be stored and loaded from the host site, the
administrator activates the VirtelMacros function by adding the code
shown below to the custom.js file loaded into the CLI-DIR directory
(or another site-defined directory):</p>
<p><em>custom.js to activate the VirtelMacros function</em></p>
<p>The custom.js file must be activated as described in <a class="reference external" href="#_bookmark129">“Site
customization of Javascript functions”, page 123</a>.
Once this has been done, each VIRTEL Web Access user has access to
one or more macros.json files.</p>
<p>If no file exists, a 404 error is produced, and no macros are listed
in the macro window.</p>
<p>When the VirtelMacros function is implemented on two differents
VIRTEL, it is possible to synchronize automatically the Macros
between them.</p>
<p>To allow this, the administrator activates the VirtelMacros
synchronization function by adding the code shown below to the
custom.js file loaded into the CLI-DIR directory (or another
site-defined directory):</p>
<p><em>custom.js to activate the VirtelMacros synchronization function</em></p>
<p>The custom.js file must be activated as described in <a class="reference external" href="#_bookmark129">“Site
customization of Javascript functions”, page 123</a>.</p>
<p>Once this has been done, each VIRTEL Web Access user macros are
automaticaly synchonized beetween the two VIRTEL.</p>
<p>Each user can create his or her own macros.json file once the user
has signed on to VIRTEL.</p>
<p>To create the file, the user only has to sign on to VIRTEL Web
Access and record a new macro. When the macro is saved with a
user-specified name, the macros.json file is automatically uploaded
into VIRTEL’s USR-DIR directory.</p>
<p>For subsequent Web Access sessions, the macros.json file is
automatically loaded and the user’s macros are displayed in the
macro window (with an X allowing the macro to be deleted):</p>
</div></blockquote>
<p><a class="reference internal" href="../../../_images/image641.png"><img alt="image63" src="../../../_images/image641.png" style="width: 2.36980in; height: 4.21823in;" /></a></p>
<blockquote>
<div><p><em>Display macros for VirtelMacros function</em></p>
<p>Only the administrator can upload macros.json files into the global
(GLB-DIR) and group (GRP-DIR) directories.</p>
<p>Uploads to the user and group directories are performed by means of
a command-line script from the Windows prompt.</p>
<p>To define a new global or group macros.json file, the administrator
can:</p>
<ul class="simple">
<li>Edit a new text file and manually code the macro definitions in</li>
</ul>
<p>this file using the appropriate syntax, or</p>
<ul class="simple">
<li>Convert a set of existing macros (for example, macros created</li>
</ul>
<p>using the 3270 HOB emulator) into a single macros.json file. The
administrator script hob2webaccess.js performs this task. Additional
scripts may be provided to allow conversion of macros from other
emulators.</p>
<p>Then the macros.json file is uploaded to VIRTEL using the
administrator script adminupload.js.</p>
<p>These administrator scripts are executed using the node.exe
interpreter. The interpreter executable is supplied with the script,
but it is also possible to download and install it from
<a class="reference external" href="http://nodejs.org/">http://nodejs.org</a>.</p>
<p>To use the scripts, open a Windows command prompt in the directory
containing the macros to be converted, then:</p>
</div></blockquote>
<ol class="arabic">
<li><p class="first">Convert a set of macros into a macros.json file using the command:</p>
<blockquote>
<div><p>node.exe hob2webaccess.js –o macros.json file1.mac file2.mac
file3.mac</p>
</div></blockquote>
</li>
</ol>
<ol class="arabic">
<li><p class="first">Upload a macros.json file into the user, group, or global directory:</p>
<blockquote>
<div><p>node.exe adminupload.js -u admin -h n.n.n.n -p 41001 -t user -n
userid macros.json</p>
<p>node.exe adminupload.js -u admin -h n.n.n.n -p 41001 -t group -n
groupid macros.json</p>
<p>node.exe adminupload.js -u admin -h n.n.n.n -p 41001 -t global
macros.json</p>
<p>where:</p>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="admin">
<h2>admin<a class="headerlink" href="#admin" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the name of a user with VIRTEL administration privileges</div></blockquote>
</div>
<div class="section" id="id159">
<h2>n.n.n.n<a class="headerlink" href="#id159" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the IP address of VIRTEL</div></blockquote>
</div>
<div class="section" id="id160">
<h2>41001<a class="headerlink" href="#id160" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the VIRTEL administration port</div></blockquote>
</div>
<div class="section" id="userid-and-groupid">
<h2>userid and groupid<a class="headerlink" href="#userid-and-groupid" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>are the name of the user and group which owns the macros</p>
<p>The two scripts supplied may be called from a batch file which can
scan all users’ macros and then convert and upload them to VIRTEL.</p>
<p>Each macros.json file contains a set of macros as shown in the
example below:</p>
<p><em>Example of a macros.json file</em></p>
<p>An empty file (containing no macros) contains only:</p>
<p><em>Example of an empty macros.json file</em></p>
<p>The following commands can be used in a macro file :</p>
<p>Without modifying existing applications, VIRTEL offers several
possibilities for dynamic modification of 3270 data extracted by the
{{{GENERATE-HTML}}} tag before it is presented in an HTML page. For
instance, it is possible to define, for each field selected, a list
of permitted values, or to generate a URL as a function of the value
of a fixed field.</p>
<p>As opposed to the specific tags presented in the previous
paragraphs, this set of presentation rules is not defined in an HTML
page, but in a program assembled and link edited in the VIRTEL
LOADLIB.</p>
<p>An <strong>HTML presentation module</strong> is made up of several scenarios
composed of the following instructions: SCREENS, SCRNEND, SCENARIO,
ACTION$, CONVERT$, COPY$, DECLARE$, ERROR$, FIELD$, GOTO$, IF$,
MAP$, SET$, TOVAR$,</p>
<p>VIRSV$ and END. These instructions are assembler macros contained in
the VIRT453.SCRNAPI.MACLIB library (for MVS) or the VIRT453.VIRSAPI
sublibrary (for VSE). The other instructions included in this
library are for internal use and must not be used directly. Each
module begins with a SCREENS instruction, is terminated by a SCRNEND
instruction, and must contain at least one SCENARIO.</p>
<p>VIRTEL scenarios were originally assembled and link-edited into a
load library concatenated to the DFHRPL DD statement in the VIRTEL
started task. From VIRTEL version 4.48 onwards, there is also the
possibility of generating, syntax checking, and compiling scenarios
using Virtel Studio on an Eclipse platform, and uploading the
resulting executable code into a VIRTEL directory stored in a VSAM
file.</p>
<p>After compilation, the resulting module must be placed in one of the
libraries defined in the DFHRPL concatenation in the VIRTEL started
task (for MVS), or in one of the libraries in the LIBDEF SEARCH
statement (for VSE). Refer to member ASMSCEN in the VIRTEL SAMPLIB
for an example job to assemble and link a presentation module in
z/OS.</p>
<p>The F VIRTEL,NEW=scenario-name command (see VIRTEL Messages and
Operations Guide) allows VIRTEL to take into account the new version
of a scenario assembled and link-edited into a load library.</p>
<p>If the “Directory for scenarios” field in the Entry Point is
non-blank, VIRTEL will load scenarios from the specified directory
instead of from the DFHRPL load library.</p>
<p>Scenarios in VSAM are ordinary VIRTEL files and their extension must
be .390; they are normally assembled on a workstation and uploaded
to the “Directory for scenarios” by means of Virtel Studio.</p>
<p>If a new version of a scenario is uploaded in a VSAM directory, the
new version will be used immediately whenever a new connection needs
it; no VIRTEL command is necessary. If a terminal is already
executing the old version of the scenario, it is not affected, and
continues with a copy of the old version. If another scenario with
the same name exists in another directory, it is not modified by the
upload.</p>
<p>In order to be used, the name of the HTML presentation module must
be specified in the “Initial Scenario”, “Final Scenario”, “Input
Scenario” or “Output Scenario” field of the transaction supporting
access to the application (see “Parameters of the transaction” in
the VIRTEL Connectivity Reference manual), or in the “Identification
scenario” field of the entry point (see “Parameters of the entry
point” in the VIRTEL Connectivity Reference manual).</p>
<p>A presentation module can contain one of each of the following types
of scenario:</p>
<p>An identification scenario is invoked when an inbound call is
assigned to an entry point. Because an identification scenario is
executed before a transaction is selected and before connecting to a
host application, the scenario may use the SET$ TRANSACTION
instruction to select the transaction which specifies the host
application (if any) to be used.</p>
<p>The identification scenario is required when the entry point
specifies the name of this presentation module in its
“Identification scenario” field.</p>
<p>An initial scenario is invoked when an &amp;/S order is processed in a
connection script (see “Connection / Disconnection Scripts” in the
VIRTEL Connectivity Reference manual). The initial scenario is
required when the “TIOA at logon” field of the transaction contains
&amp;/S and the name of the presentation module is coded in the “Initial
Scenario” field of the transaction.</p>
<p>A final scenario is invoked when an &amp;/S order is processed in a
disconnection script (see “Connection / Disconnection Scripts” in
the VIRTEL Connectivity Reference manual). The final scenario is
required when the “TIOA at logoff” field of</p>
<p>the transaction contains &amp;/S and the name of the presentation module
is coded in the “Final Scenario” field of the transaction.</p>
<p>An input scenario is invoked once at the start of the session (on
receipt of the first message from the application to the terminal
after the connection has been established with the host
application), and again on receipt of each inbound message (from the
terminal to the application). The input scenario is required when
the name of the presentation module is coded in the “Input Scenario”
field of the transaction.</p>
<p>When the input scenario is invoked on receipt of the first outbound
message (from the application to the terminal), the scenario may
terminate with a CASE$ FAIL or an IF$ FAIL instruction. In this
case, the outbound message is discarded and the input scenario is
invoked again on receipt on the next outbound message from the
application. This process continues until the input scenario
terminates with a CASE$ SUCCESS or IF$ SUCCESS instruction, or
reaches SCENARIO END, after which the input scenario stops
processing outbound messages and is subsequently invoked for each
inbound message.</p>
<p>An output scenario is invoked on receipt of each outbound message
(sent from the application to the terminal). The output scenario is
required when the name of the presentation module is coded in the
“Output Scenario” field of the transaction.</p>
<p>Subroutine scenario represent a certain part of code that can be
invoked from within a scenario.</p>
<p>Subroutine scenario starts with a SCENARIO SUBROUTINE intruction and
ends with a SCENARIO END instruction.</p>
<p>The following restrictions apply to a SCENARIO SUBROUTINE :</p>
</div></blockquote>
<ul>
<li><p class="first">It must not contain any other scenario.</p>
</li>
<li><p class="first">It must not be included in a scenario.</p>
</li>
<li><p class="first">All its labels must use the LABEL$ instruction</p>
</li>
<li><p class="first">It must end with a SCENARIO END instruction which acts as a RETURN$
instruction.</p>
</li>
<li><p class="first">It must not try to branch outside of its limits.</p>
<blockquote>
<div><p>The subroutine scenario can be invoked from a main scenario using :</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="this-will-call-the-subroutine-and-the-calling-scenario-will-continue-in-sequence-when-the-subroutine-scenario-end-instruction-will-be-reached">
<h2>This will call the subroutine and the calling scenario will continue in sequence when the subroutine SCENARIO END instruction will be reached.<a class="headerlink" href="#this-will-call-the-subroutine-and-the-calling-scenario-will-continue-in-sequence-when-the-subroutine-scenario-end-instruction-will-be-reached" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><strong>A subroutine may contains a PERFORM$ instruction to call another
subroutine up to 3 levels. For example, main scenario may call
level_1 subroutine scenario, which may call level_2 subroutine
scenario, which may call level_3 subroutine scenario, but level_3
connot call level_4 subroutine scenario.</strong></p>
<p>A scenario may also be specified in the “Output Scenario” field of a
transaction invoked by VIRTEL Multi-Session. By executing an OUTPUT
scenario on a 3270 terminal, VIRTEL allows automated 3270 navigation
(for example, logon to VTAM application) from the Multi-Session
screen.</p>
<p>When the same VTAM application is re-invoked from a VIRTEL
Multi-Session screen using a different transaction from the one
which was previously active, VIRTEL will call the OUTPUT scenario of
the new transaction so that the scenario can terminate the previous
transaction and start the new one. In this case the IF$
SESSION-SWITCH instruction is useful (refer t<a class="reference external" href="#_bookmark193">o “IF$
instructions”, page 169</a> for further details).</p>
<p>This instruction specifies the name of the presentation module and
its execution mode. Each SCREENS instructions is terminated by a
SCRNEND instruction and may contain only SCENARIO or ERROR$
instructions.</p>
</div></blockquote>
</div>
<div class="section" id="modname">
<h2>modname<a class="headerlink" href="#modname" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Name of the presentation module (8 characters maximum). Under
certain conditions, this value will allow calls to a script from a
subsystem by way of a CALL command.</div></blockquote>
</div>
<div class="section" id="appl">
<h2>APPL<a class="headerlink" href="#appl" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies the name of the target transaction when the presentation
module is called by a program.</div></blockquote>
</div>
<div class="section" id="exec">
<h2>EXEC<a class="headerlink" href="#exec" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Determines the mode in which the script is used. The possible values
are:</div></blockquote>
</div>
<div class="section" id="yes">
<h2>YES<a class="headerlink" href="#yes" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The script may be called by a CALL from a subsystem with the
possible passing of parameters</div></blockquote>
</div>
<div class="section" id="id161">
<h2>NO<a class="headerlink" href="#id161" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The script may not be externally called.</p>
<p>This instruction marks the end of a presentation module.</p>
<p>This instruction encloses ACTION$, CONVERT$, COPY$, DECLARE$,
ERROR$, FIELD$, GOTO$, IF$, MAP$, SET$, TOVAR$, and VIRSV$
instructions.</p>
</div></blockquote>
</div>
<div class="section" id="value">
<h2>value<a class="headerlink" href="#value" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Determines the type of processing. The permitted values are:</div></blockquote>
</div>
<div class="section" id="identification">
<h2>IDENTIFICATION<a class="headerlink" href="#identification" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Marks the start of the identification scenario.</div></blockquote>
</div>
<div class="section" id="initial">
<h2>INITIAL<a class="headerlink" href="#initial" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Marks the start of the initial scenario.</div></blockquote>
</div>
<div class="section" id="final">
<h2>FINAL<a class="headerlink" href="#final" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Marks the start of the final scenario.</div></blockquote>
</div>
<div class="section" id="input">
<h2>INPUT<a class="headerlink" href="#input" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Marks the start of the input scenario.</div></blockquote>
</div>
<div class="section" id="output">
<h2>OUTPUT<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Marks the start of the output scenario.</div></blockquote>
</div>
<div class="section" id="end">
<h2>END<a class="headerlink" href="#end" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Marks the end of a scenario. In the case of an input or output
scenario, the scenario is stopped, but will resume on receipt of the
next input or output message.</div></blockquote>
</div>
<div class="section" id="discard">
<h2>DISCARD<a class="headerlink" href="#discard" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Marks the end of a scenario. In the case of an input or output
scenario, the scenario stops, and does not resume for the remainder
of the life of the VIRTEL transaction.</div></blockquote>
</div>
<div class="section" id="subroutine">
<h2>SUBROUTINE<a class="headerlink" href="#subroutine" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Marks the start of a subroutine scenario which must ends with a
SCENARIO END instruction. A subroutine scenario is invoked using
PERFORM$ instruction. A subroutine scenario can invoke another
subroutine scenario, and so on up to 3 levels. A sample of such type
of scenario is available in the PREFORM$ insctruction description.</p>
<p>This instruction specifies actions to be taken.</p>
<p>Terminate the application.</p>
<p>Indicates that the transaction is now a service transaction (se`e
“Service Transactions”, page 10 &lt;#_bookmark6&gt;`__).</p>
<p>Requests disconnection from the host application after the next
message has been sent to the client’s browser.</p>
<p>Send a message to the application, consisting of the input fields in
the screen image buffer and the function key specified by pfkey.</p>
</div></blockquote>
</div>
<div class="section" id="id162">
<h2>pfkey<a class="headerlink" href="#id162" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>a 3270 AID key. The allowable values are:</div></blockquote>
</div>
<div class="section" id="f1-f9">
<h2>F1-F9<a class="headerlink" href="#f1-f9" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>PF1 to PF9</div></blockquote>
</div>
<div class="section" id="a-7c">
<h2>7A-7C<a class="headerlink" href="#a-7c" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>PF10 to PF12</div></blockquote>
</div>
<div class="section" id="c1-c9">
<h2>C1-C9<a class="headerlink" href="#c1-c9" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>PF13 to PF21</div></blockquote>
</div>
<div class="section" id="a-4c">
<h2>4A-4C<a class="headerlink" href="#a-4c" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>PF22 to PF24</div></blockquote>
</div>
<div class="section" id="id163">
<h2>6C<a class="headerlink" href="#id163" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>PA1</div></blockquote>
</div>
<div class="section" id="e">
<h2>6E<a class="headerlink" href="#e" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>PA2</div></blockquote>
</div>
<div class="section" id="b">
<h2>6B<a class="headerlink" href="#b" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>PA3</div></blockquote>
</div>
<div class="section" id="d">
<h2>6D<a class="headerlink" href="#d" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Clear</div></blockquote>
</div>
<div class="section" id="id164">
<h2>7D<a class="headerlink" href="#id164" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Enter</div></blockquote>
</div>
<div class="section" id="fd">
<h2>FD<a class="headerlink" href="#fd" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Attn</div></blockquote>
</div>
<div class="section" id="and-wait-string">
<h2>AND=(WAIT,&#8217;string&#8217;)<a class="headerlink" href="#and-wait-string" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(optional) after sending the message to the application, the
scenario waits until the application sends a message containing the
specified character string. Intervening messages are processed by
VIRTEL but are not passed to the scenario or sent to the terminal.</div></blockquote>
</div>
<div class="section" id="and-script-string">
<h2>AND=(SCRIPT,&#8217;string&#8217;)<a class="headerlink" href="#and-script-string" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(optional) after sending the message to the application, VIRTEL
executes the string as a Connection/Disconnection script (see
“Connection/Disconnection Scripts” in the VIRTEL Connectivity
Reference manual).</div></blockquote>
</div>
<div class="section" id="and-process-response-string">
<h2>AND=(PROCESS-RESPONSE,&#8217;string&#8217;)<a class="headerlink" href="#and-process-response-string" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>(optional) allows an input scenario to explicitly request that
control is to be returned when the next message is received from the
application. The string is optional. If specified, after sending the
message to the application, VIRTEL executes the string as a
Connection/Disconnection script (see “Connection/Disconnection
Scripts” in the VIRTEL Connectivity Reference manual).</p>
<p>For an input scenario, AND=(PROCESS-RESPONSE) is the default value
immediately after the connection.</p>
</div></blockquote>
</div>
<div class="section" id="and-do-not-process-response">
<h2>AND=(DO-NOT-PROCESS-RESPONSE)<a class="headerlink" href="#and-do-not-process-response" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>(optional) allows an input scenario to explicitly state that is does
not want to process the response from the application. After this
instruction, the input scenario will not see any messages from the
application, only input messages from the terminal.</p>
<p>For an input scenario, AND=(DO-NOT-PROCESS-RESPONSE) is the default
value once the connection stage is passed.</p>
</div></blockquote>
</div>
<div class="section" id="maxtime-nnn">
<h2>MAXTIME=nnn<a class="headerlink" href="#maxtime-nnn" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(optional) specifies the maximum time, in hundredths of a second,
that the scenario will wait for a message from the application. When
this time expires, the APPLICATION-TIMEOUT flag will be set (see
<a class="reference external" href="#_bookmark193">“IF$ instructions”, page 169</a>) and the scenario
will resume execution. If the MAXTIME parameter is not specified,
then the scenario will wait indefinitely, or until VIRTEL
disconnects the session when the timeout value of the entry point is
exceeded.</div></blockquote>
</div>
<div class="section" id="lastmsg-yes">
<h2>LASTMSG=YES<a class="headerlink" href="#lastmsg-yes" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(optional) requests disconnection after the application responds to
the pfkey sent.</div></blockquote>
</div>
<div class="section" id="asynch-yes">
<h2>ASYNCH=YES<a class="headerlink" href="#asynch-yes" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>(optional) indicate that the sending of the message to the
application is not to prevent the normal screen display.</p>
<p>When the ACTION$ TO-APPLICATION instruction is executed in an output
scenario, or in an input scenario before the first message has been
delivered to the terminal, the specified function key is sent to the
application and the scenario is suspended awaiting the next outbound
message from the host application. When the next outbound message
arrives, the scenario is resumed starting with the next instruction
after the ACTION$ TO-APPLICATION instruction.</p>
<p>Subsequent outbound messages will cause the scenario to resume
execution again at the instruction after the latest ACTION$
TO-APPLICATION instruction until a SCENARIO END instruction is
executed. After a SCENARIO END instruction is executed, subsequent
outbound messages will once again cause the output scenario to
resume at the beginning.</p>
<p>When the ACTION$ TO-APPLICATION instruction is executed in an input
scenario driven by an inbound message, the data in the inbound
message is sent to the application together with the 3270 AID key
specified in the KEY parameter. Subsequent inbound messages will
cause the input scenario to resume execution again at the
instruction after the ACTION$ TO-APPLICATION instruction until a
SCENARIO END instruction is executed. After a SCENARIO END
instruction is executed, subsequent inbound messages will once again
cause the input scenario to resume at the beginning.</p>
<p>To allow an input scenario to see the responses from the host
application in addition to the input messages from the terminal, the
ACTION$ TO-APPLICATION instruction contains an AND= parameter which
allows the scenario to explicitly request whether or not it expects
to process the application response message following the ACTION$
instruction.</p>
<p>Send F3 (PF3) to the application and wait for the next outbound
message. When the application responds, continue with the next
instruction in the scenario.</p>
<p>Send ENTER to the application and wait for the application to send a
message containing the string “Password ===&gt;”. If the requested
message does not arrive within 1 second, then set the
APPLICATION-TIMEOUT flags and continue the scenario.</p>
<p>Send ENTER to the application before sending two tab key followed by
a message containing the string “Test&#8221;.</p>
<p>Send ENTER to the application, wait for the application to send a
message containing the string “Signon to CICS”, then send F3 to the
application, and send the screen image to the terminal. Note: the
ampersands are doubled to conform with assembler syntax
requirements.</p>
<p>Exit from the scenario (equivalent to IF$ ... SUCCESS), display the
screen as normal, send 6D (CLEAR) to the application, and when the
application responds, disconnect.</p>
<p>The input scenario will resume at the next instruction when the next
message is received from the host application.</p>
<p>The input scenario will not be called again for messages received
from the host application. It will only be called for input
messages.</p>
<p>This is the same as for PROCESS-RESPONSE but with execution of a
script in addition. Note: the ampersands are doubled to conform
withinh assembler syntax requirements.</p>
<p>Send the current contents of the screen image buffer to the
terminal.</p>
<p>When the ACTION$ TO-TERMINAL instruction is executed in an input
scenario, the contents of the screen image buffer are sent to the
terminal. The scenario may use instructions such as COPY$
VARIABLE-TO-SCREEN to place data in the screen image buffer before
issuing the ACTION$ TO-TERMINAL instruction.</p>
<p>This instruction tests a value in a 3270 screen position, or a value
in a VIRTEL variable, and directs the subsequent processing flow
according to the value.</p>
</div></blockquote>
</div>
<div class="section" id="row-col-len">
<h2>(row,col,len)<a class="headerlink" href="#row-col-len" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies the row, column, and length of the 3270 screen data</div></blockquote>
</div>
<div class="section" id="id165">
<h2>varname<a class="headerlink" href="#id165" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies the name of a VIRTEL variable (must be placed in quotes)</div></blockquote>
</div>
<div class="section" id="condition">
<h2>condition<a class="headerlink" href="#condition" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies whether the data tested must be equal (EQ), not equal
(NE), prefixed by (BEGIN), less than (LT), or greater than (GT), or
must contain (CONTAINS) the specified value</div></blockquote>
</div>
<div class="section" id="id166">
<h2>value<a class="headerlink" href="#id166" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies the value against which the data is tested (must be placed
in quotes)</div></blockquote>
</div>
<div class="section" id="process1-2">
<h2>process1,2,...<a class="headerlink" href="#process1-2" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies the address of the branch exit of the script if the
condition is satisfied. Permitted values are:</div></blockquote>
</div>
<div class="section" id="label">
<h2>label<a class="headerlink" href="#label" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>instruction label at which execution of the scenario is to continue.</div></blockquote>
</div>
<div class="section" id="fail">
<h2>FAIL<a class="headerlink" href="#fail" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>reserved word indicating that the scenario is to be terminated and
the current message is to be discarded. The scenario will be called
again on receipt of the next outbound message from the application.</div></blockquote>
</div>
<div class="section" id="success">
<h2>SUCCESS<a class="headerlink" href="#success" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>reserved word indicating that the scenario is to be terminated and
the current message is to be presented to the user. This is
equivalent to branching to a SCENARIO END instruction.</div></blockquote>
</div>
<div class="section" id="processx">
<h2>processx<a class="headerlink" href="#processx" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Specifies the address of the branch exit of the script if none of
the conditions is satisfied. Permitted values are identical to
process1.</p>
<p>Notes: Any number of (condition,&#8217;value&#8217;,process) parameters may be
specified, within the limits set by the assembler. Use assembler
conventions (non-blank in column 72 and continuation starting in
column 16) to continue the statement over more than one line.</p>
<p>This instruction allows a scenario to translate a VIRTEL variable to
or from EBCDIC, or to convert a variable to upper or lower case.</p>
</div></blockquote>
</div>
<div class="section" id="direction">
<h2>direction<a class="headerlink" href="#direction" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>specifies the translation requested. Possible values are:</div></blockquote>
<ul class="simple">
<li>ASCII-TO-EBCDIC</li>
<li>EBCDIC-TO-ASCII</li>
<li>UTF8-TO-EBCDIC</li>
<li>EBCDIC-TO-UTF8</li>
<li>EBCDIC-TO-UPPERCASE</li>
<li>EBCDIC-TO-LOWERCASE</li>
</ul>
</div>
<div class="section" id="id167">
<h2>varname<a class="headerlink" href="#id167" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>is the name of a VIRTEL variable. The variable name must be placed
in quotes.</div></blockquote>
</div>
<div class="section" id="tabname">
<h2>tabname<a class="headerlink" href="#tabname" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>is the name of the translate table to be used for UTF-8 conversion.
The possible values are given under the description of the DEFUTF8
parameter of the VIRTCT. The table name must be placed in quotes. If
the TABLE parameter is not specified, then the table specified by
the DEFUTF8 parameter is used as a default. VIRTCT parameters are
described in the VIRTEL Installation Guide.</p>
<p>This instruction allows various copy operations within the context
of a scenario.</p>
<p>Copies the name of an HTTP input field into a VIRTEL variable.</p>
</div></blockquote>
</div>
<div class="section" id="id168">
<h2>row,col<a class="headerlink" href="#id168" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>starting row and column of the field on the screen.</div></blockquote>
</div>
<div class="section" id="name2">
<h2>name2<a class="headerlink" href="#name2" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of a VIRTEL table variable. If the variable does not exist,
it will be created.</div></blockquote>
</div>
<div class="section" id="id169">
<h2>type<a class="headerlink" href="#id169" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(optional) may indicate one of the following values:</div></blockquote>
</div>
<div class="section" id="type-replace">
<h2>TYPE=REPLACE<a class="headerlink" href="#type-replace" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>indicates that the new value will replace the existing value of the
variable. If TYPE=REPLACE is not specified, and the variable already
exists, the new value will be appended to any existing values.</p>
<p>Copies the contents of a file into a VIRTEL variable. This
instruction can be used in an input scenario which processes an HTTP
request or SMTP input message having one or more attached files.</p>
</div></blockquote>
</div>
<div class="section" id="id170">
<h2>varname<a class="headerlink" href="#id170" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of a VIRTEL table variable. If the variable does not exist,
it will be created. If the variable already exists, the new value
will be appended to any existing values. If this parameter is
omitted, the variable name $INFILE$ is used.</div></blockquote>
</div>
<div class="section" id="filename">
<h2>filename<a class="headerlink" href="#filename" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>the name of a file attached to the HTTP request or SMTP message. If
this parameter is omitted, the first attached file will be read.</p>
<p>If the input request does not contain the requested file, the
NOT-FOUND condition will be raised. This condition can be tested by
means of the IF$ instruction.</p>
<p>Copies the value of an HTTP query parameter to a given position on
the 3270 screen.</p>
</div></blockquote>
</div>
<div class="section" id="name1">
<h2>name1<a class="headerlink" href="#name1" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of an HTTP query parameter (se`e “VIRTEL URL formats”, page
10 &lt;#_bookmark8&gt;`__)</div></blockquote>
</div>
<div class="section" id="id171">
<h2>row,col,len<a class="headerlink" href="#id171" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>row, column, and length of the destination field on the screen.</div></blockquote>
</div>
<div class="section" id="id172">
<h2>type<a class="headerlink" href="#id172" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(optional) may indicate one of the following values:</div></blockquote>
</div>
<div class="section" id="type-erase-field">
<h2>TYPE=ERASE-FIELD<a class="headerlink" href="#type-erase-field" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>indicates that the destination field is cleared to nulls before
copying the data.</p>
<p>If the parameter name1 is not present in the input request, the
NOT-FOUND condition will be raised. This condition can be tested by
means of the IF$ instruction.</p>
<p>If the destination row and column specify a protected field of the
3270 screen, the scenario terminates abnormally and message VIRS129E
is issued to the system console. If the destination field is
unprotected but the input value is too long for the field, the data
will be silently truncated.</p>
<p>Copies the value of an HTTP query parameter into a VIRTEL variable.</p>
</div></blockquote>
</div>
<div class="section" id="id173">
<h2>name1<a class="headerlink" href="#id173" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of an HTTP query parameter (se`e “VIRTEL URL formats”, page
10 &lt;#_bookmark8&gt;`__)</div></blockquote>
</div>
<div class="section" id="id174">
<h2>name2<a class="headerlink" href="#id174" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of a VIRTEL table variable. If the variable does not exist,
it will be created.</div></blockquote>
</div>
<div class="section" id="id175">
<h2>type<a class="headerlink" href="#id175" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(optional) may indicate one of the following values:</div></blockquote>
</div>
<div class="section" id="type-offset-length">
<h2>TYPE=OFFSET-LENGTH<a class="headerlink" href="#type-offset-length" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>indicates that the input parameter consists of two numeric values
separated by a comma. The first numeric value is converted to binary
and stored in the first 8 bytes of the result variable, and the
second numeric value is converted to binary and stored in the next 4
bytes of the result variable. The 12-byte value thus produced is in
the format required by the OFFAREA parameter for the read-partial
and write-append functions of the VIRSVFIO service program.</div></blockquote>
</div>
<div class="section" id="id176">
<h2>TYPE=REPLACE<a class="headerlink" href="#id176" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>indicates that the new value will replace the existing value of the
variable. If TYPE=REPLACE is not specified, and the variable already
exists, the new value will be appended to any existing values.</p>
<p>If the parameter name1 is not present in the input request, the
NOT-FOUND condition will be raised. This condition can be tested by
means of the IF$ instruction.</p>
<p>Copies a constant value to a variable.</p>
</div></blockquote>
</div>
<div class="section" id="id177">
<h2>varname<a class="headerlink" href="#id177" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of a VIRTEL table variable. If the variable does not exist,
it will be created.</div></blockquote>
</div>
<div class="section" id="string">
<h2>string<a class="headerlink" href="#string" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>characters to be copied into the variable varname.</div></blockquote>
</div>
<div class="section" id="fromvar">
<h2>fromvar<a class="headerlink" href="#fromvar" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of a variable whose value is to be copied into the variable
varname.</div></blockquote>
</div>
<div class="section" id="id178">
<h2>type<a class="headerlink" href="#id178" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(optional) may indicate one of the following values:</div></blockquote>
</div>
<div class="section" id="id179">
<h2>TYPE=REPLACE<a class="headerlink" href="#id179" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>indicates that the new value will replace the existing value of the
variable. If TYPE=REPLACE is not specified, and the variable already
exists, the new value will be appended to any existing values.</p>
<p>Generates an output page from a page template, and copies the result
into a VIRTEL variable. Any VIRTEL tags within the page template are
processed as if the page were being generated as the response to an
HTTP request, but the generated page is placed in a variable instead
of being sent to the terminal.</p>
</div></blockquote>
</div>
<div class="section" id="id180">
<h2>filename<a class="headerlink" href="#id180" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the page template.</div></blockquote>
</div>
<div class="section" id="id181">
<h2>varname<a class="headerlink" href="#id181" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of a VIRTEL table variable which will receive the contents
of the generated output page. If the variable does not exist, it
will be created. If the variable already exists, the new value will
be appended to any existing values.</div></blockquote>
</div>
<div class="section" id="id182">
<h2>type<a class="headerlink" href="#id182" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(optional) indicates that the result variable has a special format.
The following values are possible:</div></blockquote>
</div>
<div class="section" id="type-ascii">
<h2>TYPE=ASCII<a class="headerlink" href="#type-ascii" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>indicates that the result should be converted to ASCII (or UTF-8 if
the SET-OUTPUT-ENCODING-UTF-8 tag is present in the page template).
This is the default value if the HTTP request is in ASCII.</div></blockquote>
</div>
<div class="section" id="type-ebcdic">
<h2>TYPE=EBCDIC<a class="headerlink" href="#type-ebcdic" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>indicates that the result should be converted to EBCDIC. This is the
default value if the HTTP request is in EBCDIC.</div></blockquote>
</div>
<div class="section" id="type-linebuffer">
<h2>TYPE=LINEBUFFER<a class="headerlink" href="#type-linebuffer" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>indicates that the result should be converted to MakePDF “LINEBUF”
format for input to the VIRSVPDF service program. The page template
contains special tags (see <a class="reference external" href="#_bookmark66">“Generating PDF output”, page
61</a>) which are converted to the format required by
MakePDF.</p>
<p>If the specified file does not exist in the current VIRTEL
directory, the NOT-FOUND condition will be raised. This condition
can be tested by means of the IF$ instruction.</p>
<p>Copies a portion of the screen into a table variable.</p>
</div></blockquote>
</div>
<div class="section" id="row">
<h2>row<a class="headerlink" href="#row" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>starting row of the portion of the screen to copy.</div></blockquote>
</div>
<div class="section" id="col">
<h2>col<a class="headerlink" href="#col" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>starting column of the portion of the screen to copy.</div></blockquote>
</div>
<div class="section" id="id183">
<h2>len<a class="headerlink" href="#id183" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>width (in columns) of the portion of the screen to copy.</div></blockquote>
</div>
<div class="section" id="id184">
<h2>ht<a class="headerlink" href="#id184" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>height (in rows) of the portion of the screen to copy.</div></blockquote>
</div>
<div class="section" id="id185">
<h2>name2<a class="headerlink" href="#id185" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of a VIRTEL table variable containing ht values, each of
length len. If the variable does not exist, it will be created.</div></blockquote>
</div>
<div class="section" id="id186">
<h2>type<a class="headerlink" href="#id186" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(optional) may indicate one of the following values:</div></blockquote>
</div>
<div class="section" id="id187">
<h2>TYPE=REPLACE<a class="headerlink" href="#id187" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>indicates that the new value will replace the existing value of the
variable. If TYPE=REPLACE is not specified, and the variable already
exists, the new value will be appended to any existing values.</p>
<p>Note: the fourth sub-parameter (ht) of the SCREEN parameter is
optional. If the fourth sub-parameter is specified, then attributes
and binary zeroes will be replaced by blanks. To keep compatibility
with existing scenarios, the instruction will ignore attributes and
binary zeroes if the fourth SCREEN sub-parameter is NOT specified.</p>
<p>Copies a system information field into a table variable.</p>
</div></blockquote>
</div>
<div class="section" id="id188">
<h2>varname<a class="headerlink" href="#id188" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of a VIRTEL table variable into which the system
information will be copied.</div></blockquote>
</div>
<div class="section" id="class">
<h2>class<a class="headerlink" href="#class" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the type of system information to be copied. The following values
may be specified for class:</div></blockquote>
</div>
<div class="section" id="http-header">
<h2>HTTP-HEADER<a class="headerlink" href="#http-header" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Information extracted from an HTTP header in the incoming HTTP
request is copied into the specified variable. When HTTP-HEADER is
specified, item represents one of the HTTP headers listed below.</div></blockquote>
</div>
<div class="section" id="tct-http-header">
<h2>TCT-HTTP-HEADER<a class="headerlink" href="#tct-http-header" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Information extracted from an HTTP header in the incoming HTTP
request is copied into the specified variable. When TCT-HTTP-HEADER
is specified, item represents one of the HTTP headers specified in
the HTHEADR parameter in the VIRTCT (refer to “Parameters of the
VIRTCT” in the VIRTEL Installation Guide for more information).</div></blockquote>
</div>
<div class="section" id="name-of">
<h2>NAME-OF<a class="headerlink" href="#name-of" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Information about the VIRTEL environment is copied to the table
variable. When NAME-OF is specified, item represents the name of a
VIRTEL data item.</div></blockquote>
</div>
<div class="section" id="number-of">
<h2>NUMBER-OF<a class="headerlink" href="#number-of" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>A numeric value is copied to the table variable. When NUMBER-OF is
specified, item represents the name of a VIRTEL numeric data item.</div></blockquote>
</div>
<div class="section" id="value-of">
<h2>VALUE-OF<a class="headerlink" href="#value-of" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Information about the VIRTEL environment is copied to the table
variable. When VALUE-OF is specified, item represents the name of a
VIRTEL data item. VALUE-OF is synonymous with NAME-OF.</div></blockquote>
</div>
<div class="section" id="user-security-profile">
<h2>USER-SECURITY-PROFILE<a class="headerlink" href="#user-security-profile" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Information from the user’s RACF profile is copied to the table
variable. When USER-SECURITY-PROFILE is specified, item represents
the name of a field in the RACF user profile. The supported fields
are listed below.</div></blockquote>
</div>
<div class="section" id="item">
<h2>item<a class="headerlink" href="#item" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>When class is HTTP-HEADER, the following standard HTTP headers,
described in RFC2616, may be specified:</div></blockquote>
<ul>
<li><p class="first">ACCEPT</p>
</li>
<li><p class="first">ACCEPT-LANGUAGE</p>
</li>
<li><p class="first">CONNECTION</p>
</li>
<li><p class="first">CONTENT-TYPE</p>
</li>
<li><p class="first">IF-MODIFIED-SINCE</p>
</li>
<li><p class="first">HOST</p>
</li>
<li><p class="first">USER-AGENT</p>
<blockquote>
<div><p>In addition, the following non-standard HTTP headers, described in
the IBM Tivoli Access Manager WebSEAL Administration Guide manual,
may be specified:</p>
</div></blockquote>
</li>
<li><p class="first">IV-USER</p>
</li>
<li><p class="first">IV-USERL</p>
</li>
<li><p class="first">IV-GROUPS</p>
</li>
<li><p class="first">IV-CREDS</p>
<blockquote>
<div><p>Note that IV headers provide reliable user identification only when
the request comes from a trusted proxy. The proxy IP address can be
specified in the “Calling DTE” field of a rule attached to the HTTP
line. See the “Rules” chapter of the VIRTEL Configuration Reference
manual for further information.</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="id189">
<h2>item<a class="headerlink" href="#id189" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>When class is NAME-OF or VALUE-OF, the following VIRTEL data items
may be specified:</div></blockquote>
</div>
<div class="section" id="id190">
<h2>VIRTEL<a class="headerlink" href="#id190" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The VIRTEL APPLID specified in the VIRTCT</div></blockquote>
</div>
<div class="section" id="id191">
<h2>RELAY<a class="headerlink" href="#id191" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The relay LU name used to connect to the host application</div></blockquote>
</div>
<div class="section" id="id192">
<h2>PRINT-RELAY<a class="headerlink" href="#id192" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The relay LU name of the associated printer</div></blockquote>
</div>
<div class="section" id="id193">
<h2>PSEUDO-TERMINAL<a class="headerlink" href="#id193" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The VIRTEL terminal name</div></blockquote>
</div>
<div class="section" id="id194">
<h2>ENTRY-POINT<a class="headerlink" href="#id194" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The VIRTEL entry point name</div></blockquote>
</div>
<div class="section" id="id195">
<h2>LINE-INTERNAL<a class="headerlink" href="#id195" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The internal name of the VIRTEL line</div></blockquote>
</div>
<div class="section" id="id196">
<h2>LINE-EXTERNAL<a class="headerlink" href="#id196" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The external name of the VIRTEL line</div></blockquote>
</div>
<div class="section" id="id197">
<h2>USER<a class="headerlink" href="#id197" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The user name, if signon has occurred</div></blockquote>
</div>
<div class="section" id="id198">
<h2>PASSWORD<a class="headerlink" href="#id198" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The password entered during signon</div></blockquote>
</div>
<div class="section" id="id199">
<h2>USER-IP-ADDRESS<a class="headerlink" href="#id199" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The IP address of the client terminal</div></blockquote>
</div>
<div class="section" id="id200">
<h2>SNA-STATUS<a class="headerlink" href="#id200" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The status of the host LU2 session:</div></blockquote>
</div>
<div class="section" id="x">
<h2>X<a class="headerlink" href="#x" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>input is inhibited</div></blockquote>
</div>
<div class="section" id="blank">
<h2>blank<a class="headerlink" href="#blank" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>input is allowed</div></blockquote>
</div>
<div class="section" id="id201">
<h2>TRANSACTION-INTERNAL<a class="headerlink" href="#id201" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The internal name of the VIRTEL transaction</div></blockquote>
</div>
<div class="section" id="id202">
<h2>TRANSACTION-EXTERNAL<a class="headerlink" href="#id202" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The external name of the VIRTEL transaction</div></blockquote>
</div>
<div class="section" id="routing-parameter">
<h2>ROUTING-PARAMETER<a class="headerlink" href="#routing-parameter" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The value specified in the userdata field of the URL or call packet</div></blockquote>
</div>
<div class="section" id="id203">
<h2>URL<a class="headerlink" href="#id203" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The URL excluding the query string</div></blockquote>
</div>
<div class="section" id="id204">
<h2>QUERY<a class="headerlink" href="#id204" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The query string from the URL</div></blockquote>
</div>
<div class="section" id="id205">
<h2>PAGE<a class="headerlink" href="#id205" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The name of the original HTML page template specified in the URL</div></blockquote>
</div>
<div class="section" id="id206">
<h2>DIRECTORY<a class="headerlink" href="#id206" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The current VIRTEL directory name</div></blockquote>
</div>
<div class="section" id="id207">
<h2>CHARACTER-SET<a class="headerlink" href="#id207" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The name of the current UTF-8 character set, or the country code if
the page is not in UTF-8 mode (see <a class="reference external" href="#_bookmark54">“EBCDIC</a>
<a class="reference external" href="#_bookmark54">translation management”, page 55</a>)</div></blockquote>
</div>
<div class="section" id="id208">
<h2>DATE-TIME<a class="headerlink" href="#id208" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The current date and time (14 characters in the format
YYYYMMDDHHMMSS)</div></blockquote>
</div>
<div class="section" id="id209">
<h2>VIRTEL-VERSION<a class="headerlink" href="#id209" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The VIRTEL version number</div></blockquote>
</div>
<div class="section" id="id210">
<h2>xxx-SYMBOL<a class="headerlink" href="#id210" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The value of the system symbol xxx (only if SYSPLUS=YES is specified
in the VIRTCT). Example: SYSNAME-SYMBOL When class is NUMBER-OF, the
following VIRTEL numeric data items may be specified:</div></blockquote>
</div>
<div class="section" id="id211">
<h2>SCREEN-COLUMNS<a class="headerlink" href="#id211" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The width of the current host 3270 screen</div></blockquote>
</div>
<div class="section" id="id212">
<h2>SCREEN-LINES<a class="headerlink" href="#id212" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The depth of the current host 3270 screen</p>
<p>When class is USER-SECURITY-PROFILE, the following RACF field names
may be specified:</p>
</div></blockquote>
</div>
<div class="section" id="userid">
<h2>USERID<a class="headerlink" href="#userid" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The signed-on user id</div></blockquote>
</div>
<div class="section" id="group">
<h2>GROUP<a class="headerlink" href="#group" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The group to which the user belongs</div></blockquote>
</div>
<div class="section" id="waname">
<h2>WANAME<a class="headerlink" href="#waname" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>User name for SYSOUT</div></blockquote>
</div>
<div class="section" id="wabldg">
<h2>WABLDG<a class="headerlink" href="#wabldg" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Building name for delivery</div></blockquote>
</div>
<div class="section" id="wadept">
<h2>WADEPT<a class="headerlink" href="#wadept" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Department name for delivery</div></blockquote>
</div>
<div class="section" id="waroom">
<h2>WAROOM<a class="headerlink" href="#waroom" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Room for delivery</div></blockquote>
</div>
<div class="section" id="waaddr1">
<h2>WAADDR1<a class="headerlink" href="#waaddr1" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Address line 1</div></blockquote>
</div>
<div class="section" id="waaddr2">
<h2>WAADDR2<a class="headerlink" href="#waaddr2" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Address line 2</div></blockquote>
</div>
<div class="section" id="waaddr3">
<h2>WAADDR3<a class="headerlink" href="#waaddr3" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Address line 3</div></blockquote>
</div>
<div class="section" id="waaddr4">
<h2>WAADDR4<a class="headerlink" href="#waaddr4" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Address line 4</div></blockquote>
</div>
<div class="section" id="waaccnt">
<h2>WAACCNT<a class="headerlink" href="#waaccnt" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Account number</p>
<p>Note: USER-SECURITY-PROFILE information is available only if the
user has signed on and SECUR=(RACROUTE,RACF) has been specified in
the VIRTCT. Otherwise null values are returned for all fields.</p>
</div></blockquote>
</div>
<div class="section" id="id213">
<h2>len<a class="headerlink" href="#id213" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(optional) the variable will be padded or truncated to the specified
length. Alphanumeric data items are right-padded with blanks or
truncated on the right. Numeric items are left-padded with zeroes on
the left. The maximum length for a numeric item is 8. If the LENGTH
parameter is omitted, the length of the variable will be equal to
the length of the requested value.</div></blockquote>
</div>
<div class="section" id="id214">
<h2>offset<a class="headerlink" href="#id214" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(optional) the starting offset within the data item from which to
extract the information to be placed in the variable. If omitted,
extraction starts from offset 0. This parameter is valid only when
class is USER-SECURITY-PROFILE.</div></blockquote>
</div>
<div class="section" id="id215">
<h2>type<a class="headerlink" href="#id215" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(optional) may indicate one of the following values:</div></blockquote>
</div>
<div class="section" id="id216">
<h2>TYPE=REPLACE<a class="headerlink" href="#id216" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>indicates that the new value will replace the existing value of the
variable. If TYPE=REPLACE is not specified, and the variable already
exists, the new value will be appended to any existing values.</p>
<p>Example of COPY$ SYSTEM-TO-VARIABLE:</p>
<p>COPY$ SYSTEM-TO-VARIABLE,FIELD=(HTTP-HEADER,HOST), X VAR=&#8217;HOST&#8217;</p>
<p>COPY$ SYSTEM-TO-VARIABLE,FIELD=(HTTP-HEADER,USER-AGENT), X
VAR=&#8217;BROWSER&#8217;</p>
<p>COPY$ SYSTEM-TO-VARIABLE,FIELD=(NAME-OF,VIRTEL), X VAR=&#8217;APPLID&#8217;</p>
<p>COPY$ SYSTEM-TO-VARIABLE,FIELD=(NAME-OF,LINE-INTERNAL), X
VAR=&#8217;LINEINT&#8217;</p>
<p>COPY$ SYSTEM-TO-VARIABLE,FIELD=(NAME-OF,PSEUDO-TERMINAL), X
VAR=&#8217;TERMID&#8217;</p>
<p>COPY$ SYSTEM-TO-VARIABLE,FIELD=(NAME-OF,RELAY), X VAR=&#8217;LUNAME&#8217;</p>
<p>COPY$ SYSTEM-TO-VARIABLE,FIELD=(NAME-OF,ENTRY-POINT), X VAR=&#8217;EPNAME&#8217;</p>
<p>COPY$ SYSTEM-TO-VARIABLE,FIELD=(NAME-OF,TRANSACTION-INTERNAL),X
VAR=&#8217;TRANINT&#8217;</p>
<p>COPY$ SYSTEM-TO-VARIABLE,FIELD=(NAME-OF,TRANSACTION-EXTERNAL),X
VAR=&#8217;TRANEXT&#8217;</p>
<p>COPY$ SYSTEM-TO-VARIABLE,FIELD=(NAME-OF,ROUTING-PARAMETER), X
VAR=&#8217;ROUTPARM&#8217;</p>
<p>COPY$ SYSTEM-TO-VARIABLE,FIELD=(NAME-OF,URL), X VAR=&#8217;URL&#8217;</p>
<p>COPY$ SYSTEM-TO-VARIABLE,FIELD=(NAME-OF,QUERY), X VAR=&#8217;QSTRING&#8217;</p>
<p>COPY$ SYSTEM-TO-VARIABLE,FIELD=(NAME-OF,PAGE), X VAR=&#8217;PAGENAME&#8217;</p>
<p>COPY$ SYSTEM-TO-VARIABLE,FIELD=(NAME-OF,DIRECTORY), X VAR=&#8217;DIRNAME&#8217;</p>
<p>COPY$ SYSTEM-TO-VARIABLE,FIELD=(NAME-OF,SNA-STATUS), X VAR=&#8217;SNASTAT&#8217;</p>
<p>COPY$ SYSTEM-TO-VARIABLE,FIELD=(NAME-OF,USER-IP-ADDRESS), X
VAR=&#8217;CLIENT&#8217;</p>
<p>COPY$ SYSTEM-TO-VARIABLE,FIELD=(NAME-OF,CHARACTER-SET), X
VAR=&#8217;CHARSET&#8217;</p>
<p>COPY$ SYSTEM-TO-VARIABLE,FIELD=(VALUE-OF,DATE-TIME), X
VAR=&#8217;DATETIME&#8217;</p>
<p>COPY$ SYSTEM-TO-VARIABLE,FIELD=(VALUE-OF,VIRTEL-VERSION), X
VAR=&#8217;VERSION&#8217;</p>
<p>COPY$ SYSTEM-TO-VARIABLE,FIELD=(VALUE-OF,SYSNAME-SYMBOL), X
VAR=&#8217;SYSNAME&#8217;</p>
<p>COPY$ SYSTEM-TO-VARIABLE,FIELD=(VALUE-OF,SYSPLEX-SYMBOL), X
VAR=&#8217;SYSPLEX&#8217;</p>
<p>COPY$ SYSTEM-TO-VARIABLE,FIELD=(NUMBER-OF,SCREEN-COLUMNS), X
VAR=&#8217;COLS&#8217;</p>
<p>COPY$ SYSTEM-TO-VARIABLE,FIELD=(NUMBER-OF,SCREEN-LINES), X
VAR=&#8217;ROWS&#8217;</p>
<p>COPY$ SYSTEM-TO-VARIABLE, X</p>
<p>FIELD=(USER-SECURITY-PROFILE,WADEPT), X VAR=&#8217;DEPT’</p>
<p>The following table shows a possible result of this example scenario
when used in conjunction with the URL</p>
<p><a class="reference external" href="http://192.168.235.30:41001/w2h/WEB2AJAX.htm+Tso+model2?u=rxb&amp;g=sys1">http://192.168.235.30:41001/w2h/WEB2AJAX.htm+Tso+model2?u=rxb&amp;g=sys1</a></p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote>
<div>Copies a constant value to a variable.</div></blockquote>
</div>
<div class="section" id="id217">
<h2>string<a class="headerlink" href="#id217" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>characters to be copied into the variable name2.</div></blockquote>
</div>
<div class="section" id="id218">
<h2>name2<a class="headerlink" href="#id218" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of a VIRTEL table variable. If the variable does not exist,
it will be created.</div></blockquote>
</div>
<div class="section" id="id219">
<h2>type<a class="headerlink" href="#id219" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(optional) may indicate one of the following values:</div></blockquote>
</div>
<div class="section" id="id220">
<h2>TYPE=REPLACE<a class="headerlink" href="#id220" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>indicates that the new value will replace the existing value of the
variable. If TYPE=REPLACE is not specified, and the variable already
exists, the new value will be appended to any existing values.</p>
<p>The COPY$ VALUE-TO-VARIABLE instruction allows the DUP (X&#8216;1C&#8217;) and
FM (X&#8216;1E&#8217;) characters to be included in the value of a variable
which can subsequently be referenced by the COPY$ VARIABLE-TO-SCREEN
instruction.</p>
<p>The following example shows the instructions required to place FIELD
MARK (X&#8216;1E&#8217;) followed by W (X&#8217;E6&#8217;) at the cursor position and press
ENTER:</p>
<p>Copies a constant value to a given position on the 3270 screen.</p>
</div></blockquote>
</div>
<div class="section" id="id221">
<h2>string<a class="headerlink" href="#id221" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>characters to be copied to the screen.</div></blockquote>
</div>
<div class="section" id="id222">
<h2>row,col,len<a class="headerlink" href="#id222" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>row, column, and length of the destination field on the screen.</div></blockquote>
</div>
<div class="section" id="id223">
<h2>type<a class="headerlink" href="#id223" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(optional) may indicate one of the following values:</div></blockquote>
</div>
<div class="section" id="id224">
<h2>TYPE=ERASE-FIELD<a class="headerlink" href="#id224" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>indicates that the destination field is cleared to nulls before
copying the data.</p>
<p>If the destination row and column specify a protected field of the
3270 screen, the scenario terminates abnormally and message VIRS129E
is issued to the system console. If the destination field is
unprotected but the string is too long for the field, the string
will be silently truncated.</p>
<p>Copies the value of a variable to a given position on the 3270
screen. In the case of a table variable, only the first value is
copied.</p>
</div></blockquote>
</div>
<div class="section" id="id225">
<h2>name2<a class="headerlink" href="#id225" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of a VIRTEL variable.</div></blockquote>
</div>
<div class="section" id="id226">
<h2>row,col,len<a class="headerlink" href="#id226" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>row, column, and length of the destination field on the screen. If
the SCREEN parameter is not specified, the variable will be copied
to the current cursor position.</div></blockquote>
</div>
<div class="section" id="id227">
<h2>type<a class="headerlink" href="#id227" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(optional) may indicate one of the following values:</div></blockquote>
</div>
<div class="section" id="id228">
<h2>TYPE=ERASE-FIELD<a class="headerlink" href="#id228" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>indicates that the destination field is cleared to nulls before
copying the data.</p>
<p>If the variable name2 does not exist, the NOT-FOUND condition will
be raised. This condition can be tested by means of the IF$
instruction.</p>
<p>If the destination row and column specify a protected field of the
3270 screen, the scenario terminates abnormally and message VIRS129E
is issued to the system console. If the destination field is
unprotected but the variable value is too long for the field, the
data will be silently truncated.</p>
<p>Copies the value of a variable to a VIRTEL system field. In the case
of a table variable, only the first value is copied.</p>
</div></blockquote>
</div>
<div class="section" id="id229">
<h2>varname<a class="headerlink" href="#id229" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of a VIRTEL variable.</div></blockquote>
</div>
<div class="section" id="id230">
<h2>class<a class="headerlink" href="#id230" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>identifies the type of VIRTEL system field to be updated. The
following values may be specified:</div></blockquote>
</div>
<div class="section" id="id231">
<h2>NAME-OF<a class="headerlink" href="#id231" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>A VIRTEL data item is to be updated. When NAME-OF is specified, item
represents the name of a VIRTEL data item.</div></blockquote>
</div>
<div class="section" id="id232">
<h2>NUMBER-OF<a class="headerlink" href="#id232" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>A VIRTEL data item is to be updated. When NUMBER-OF is specified,
item represents the name of a VIRTEL numeric data item.</div></blockquote>
</div>
<div class="section" id="id233">
<h2>VALUE-OF<a class="headerlink" href="#id233" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>A VIRTEL data item is to be updated. When VALUE-OF is specified,
item represents the name of a VIRTEL data item. VALUE-OF is
synonymous with NAME-OF.</div></blockquote>
</div>
<div class="section" id="id234">
<h2>item<a class="headerlink" href="#id234" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>When class is NAME-OF or VALUE-OF, the following VIRTEL data items
may be specified:</div></blockquote>
</div>
<div class="section" id="id235">
<h2>DIRECTORY<a class="headerlink" href="#id235" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Allows a scenario to specify the name of the VIRTEL directory The
user name which will appear in the VIRLOG entry for this
transaction.</div></blockquote>
</div>
<div class="section" id="id236">
<h2>USER<a class="headerlink" href="#id236" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Allows a scenario to specify the user name which will appear in the
VIRLOG entry for this transaction and which will become the value of
the system variable &amp;U (see “Connection/disconnection scripts” in
the VIRTEL Connectivity Guide).</div></blockquote>
</div>
<div class="section" id="id237">
<h2>PASSWORD<a class="headerlink" href="#id237" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Allows a scenario to specify the password which will become the
value of the system variable &amp;P (see “Connection/disconnection
scripts” in the VIRTEL Connectivity Guide).</div></blockquote>
</div>
<div class="section" id="logmode">
<h2>LOGMODE<a class="headerlink" href="#logmode" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The name of the logmode to be used for the VTAM session with the
host application. The logmode can be set in an Identification
Scenario. It overrides the logmode specified in the transaction or
terminal definition.</div></blockquote>
</div>
<div class="section" id="id238">
<h2>ROUTING-PARAMETER<a class="headerlink" href="#id238" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Allows an Identification Scenario to override the value of the
routing parameter specified in the userdata field of the URL (se`e
“Virtel URL formats”, page 10 &lt;#_bookmark8&gt;`__).</p>
<p>When class is NUMBER-OF, the following VIRTEL data items may be
specified:</p>
</div></blockquote>
</div>
<div class="section" id="id239">
<h2>SCREEN-COLUMNS<a class="headerlink" href="#id239" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The alternate width (number of columns) of the 3270 screen</div></blockquote>
</div>
<div class="section" id="id240">
<h2>SCREEN-LINES<a class="headerlink" href="#id240" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The alternate depth (number of rows) of the 3270 screen</p>
<p>SCREEN-COLUMNS and SCREEN-LINES can be set in an Identification
Scenario. These parameters allow the scenario to specify the desired
screen size when a dynamic logmode such as D4A32XX3 is used and the
host application places the 3270 session in alternate mode using the
Erase Write Alternate command. This command has no effect on the
primary screen size which is always 24 rows by 80 columns.</p>
<p>This instruction allows a scenario to activate various debugging
functions.</p>
</div></blockquote>
</div>
<div class="section" id="trace-line-or-notrace-line">
<h2>TRACE,LINE or NOTRACE,LINE<a class="headerlink" href="#trace-line-or-notrace-line" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Starts or stops a trace on the current line. The trace is written to
the VIRTRACE file.</div></blockquote>
</div>
<div class="section" id="trace-terminal-or-notrace-terminal">
<h2>TRACE,TERMINAL or NOTRACE,TERMINAL<a class="headerlink" href="#trace-terminal-or-notrace-terminal" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Starts or stops a trace on the current terminal. The trace is
written to the VIRTRACE file.</div></blockquote>
</div>
<div class="section" id="trace-scenario-or-notrace-scenario">
<h2>TRACE,SCENARIO or NOTRACE,SCENARIO<a class="headerlink" href="#trace-scenario-or-notrace-scenario" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Starts or stops a trace on the scenario. The trace is downloadable
by means of the <a class="reference external" href="#_bookmark48">“CREATE-VARIABLE-IF”, page 51</a> tag
intended for use by Virtel Studio.</div></blockquote>
</div>
<div class="section" id="snap">
<h2>SNAP<a class="headerlink" href="#snap" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Generates a snapshot of the VIRTEL internal trace table in the
SYSPRINT file (same as the command F VIRTEL,SNAP). SNAP is described
in the “Audit and Performance” chapter of the VIRTEL Messages and
Operations Guide.</div></blockquote>
</div>
<div class="section" id="snap-terminal">
<h2>SNAP,TERMINAL<a class="headerlink" href="#snap-terminal" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Generates a snapshot including terminal information (same as the
command F VIRTEL,SNAP,T=termid where termid is the current terminal
name).</div></blockquote>
</div>
<div class="section" id="when-always">
<h2>WHEN=ALWAYS<a class="headerlink" href="#when-always" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The DEBUG$ instruction is executed unconditionally. This is the
default.</div></blockquote>
</div>
<div class="section" id="when-transaction-name-starts-with-prefix">
<h2>WHEN=(TRANSACTION-NAME-STARTS-WITH,&#8217;prefix&#8217;)<a class="headerlink" href="#when-transaction-name-starts-with-prefix" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The DEBUG$ instruction is executed only if the external name of the
transaction being used begins with the characters specified by the
string prefix.</p>
<p>This instruction defines a portion of the screen as a clickable
hyperlink. The hyperlink can invoke either a 3270 key (ENTER or
PFnn), a JavaScript procedure, or an external URL. The generation of
the hyperlink can optionally be conditional on the presence or
absence of a particular value at the 3270 screen position. In any
case, the hyperlink is generated only if the specified screen
position is non-blank.</p>
</div></blockquote>
</div>
<div class="section" id="id241">
<h2>row<a class="headerlink" href="#id241" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies the row position of the hyperlink</div></blockquote>
</div>
<div class="section" id="id242">
<h2>col<a class="headerlink" href="#id242" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies the column position of the hyperlink</div></blockquote>
</div>
<div class="section" id="id243">
<h2>len<a class="headerlink" href="#id243" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies the length of the hyperlink</div></blockquote>
</div>
<div class="section" id="id244">
<h2>value<a class="headerlink" href="#id244" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Optional, this parameter specifies the value of the data tested at
the specified screen position. Must be put in quotes</div></blockquote>
</div>
<div class="section" id="id245">
<h2>Condition<a class="headerlink" href="#id245" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Optional, this parameter determines the type of condition applicable
to value</div></blockquote>
</div>
<div class="section" id="eq">
<h2>EQ<a class="headerlink" href="#eq" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Equality (value by default).</div></blockquote>
</div>
<div class="section" id="ne">
<h2>NE<a class="headerlink" href="#ne" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Inequality.</div></blockquote>
</div>
<div class="section" id="id246">
<h2>P1<a class="headerlink" href="#id246" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies the type of processing applicable. The permissible values
are:</div></blockquote>
</div>
<div class="section" id="as-pfkey">
<h2>AS-PFKEY<a class="headerlink" href="#as-pfkey" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Indicates that the indicated portion of the screen is to be
interpreted as a function key hyperlink. The value of the function
key (ENTER, PF1, etc) can be specified by parameter P2. If P2 is not
specified, then the data at the indicated screen position is
interpreted as the name of the function key. The values allowable as
function key names are the same as those fo<a class="reference external" href="#_bookmark40">r “PfkField”, page
40</a>)</div></blockquote>
</div>
<div class="section" id="as-parameter">
<h2>AS-PARAMETER<a class="headerlink" href="#as-parameter" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Indicates that the indicated portion of the screen is to be treated
as a hyperlink which calls a JavaScript function. The data at the
indicated screen position is passed as a parameter to the JavaScript
function. The name of the</p>
<p>JavaScript function is specified in the TO parameter of the $DECLARE
instruction. See <a class="reference external" href="#_bookmark180">“JavaScript functions”,</a> <a class="reference external" href="#_bookmark180">page
164</a> for further details.</p>
</div></blockquote>
</div>
<div class="section" id="as-href">
<h2>AS-HREF<a class="headerlink" href="#as-href" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Indicates that the indicated portion of the screen is to be treated
as a hyperlink which invokes the URL specified in the TO parameter
of the $DECLARE instruction. The data at the indicated screen
position is appended to the URL, followed by the contents of the P2
parameter of the $DECLARE instruction, if specified.</div></blockquote>
</div>
<div class="section" id="id247">
<h2>P2<a class="headerlink" href="#id247" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(optional) Function parameter referenced by P1.</div></blockquote>
</div>
<div class="section" id="id248">
<h2>P3<a class="headerlink" href="#id248" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(optional) Text to be displayed in the status bar of the browser
when the mouse pointer is over the indicated screen position.</div></blockquote>
</div>
<div class="section" id="p4">
<h2>P4<a class="headerlink" href="#p4" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Name of JavaScript function (for AS-PARAMETER) or URL (for AS-HREF).</p>
<p>Note that, in conformance with assembler syntax, quotes and
ampersands in the URL must be specified as double quotes and double
ampersands.</p>
<p>For the AS-PARAMETER form of the $DECLARE instruction, the TO
parameter specifies the name of a JavaScript function which will be
called when the user clicks on the field. The function name is
case-sensitive. The following parameters are passed to the
JavaScript function:</p>
</div></blockquote>
</div>
<div class="section" id="parameter-1">
<h2>Parameter 1<a class="headerlink" href="#parameter-1" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>an internally generated field name</div></blockquote>
</div>
<div class="section" id="parameter-2">
<h2>Parameter 2<a class="headerlink" href="#parameter-2" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the data at the indicated screen position</div></blockquote>
</div>
<div class="section" id="parameter-3">
<h2>Parameter 3<a class="headerlink" href="#parameter-3" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>the contents of the P2 parameter of the $DECLARE instruction</p>
<p>The JavaScript function itself must be defined in the HTML template
page, or in an included page. The following standard functions are
provided in the page js01.js delivered with VIRTEL in the W2H-DIR
directory:</p>
</div></blockquote>
</div>
<div class="section" id="vclick">
<h2>VClick<a class="headerlink" href="#vclick" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Moves the cursor to the start of the clickable area and sends the
indicated function key (P2 parameter) to the host application</div></blockquote>
</div>
<div class="section" id="vclick2">
<h2>VClick2<a class="headerlink" href="#vclick2" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Copies the contents of the clickable area to the field containing
the cursor and sends the indicated function key (P2 parameter) to
the host application</div></blockquote>
</div>
<div class="section" id="vclick3">
<h2>VClick3<a class="headerlink" href="#vclick3" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Copies the contents of the clickable area to the following input
field and sends the indicated function key (P2 parameter) to the
host application</p>
<p>Row 23 column 19 length 4 becomes a clickable field. The contents of
the field are treated as the name of a PF key. For example, if the
field contains “PF12” then clicking on this field is equivalent to
pressing the 3270 key PF12.</p>
<p>Row 14 column 17 length 3 becomes a clickable field. When clicked it
is the equivalent of pressing the 3270 key PA2.</p>
<p>Row 24 column 2 length 4 becomes a clickable field, unless it
contains asterisks. The contents of the field are treated as the
name of a PF key.</p>
<p>Row 20 column 2 length 6 becomes a clickable field. It calls the
JavaScript function VClick(&#8216;Vxxxxxxx&#8217;,&#8217;cccccc&#8217;,&#8217;PF12&#8217;) where
Vxxxxxxx is an internally generated field name, cccccc is the
contents of the field, and PF12 is a constant specified in the
DECLARE$ instruction.</p>
<p>Row 4 column 9 length 17 becomes a clickable field, hyperlinked to
the URL:
h<a class="reference external" href="http://www.google.com/">ttp//w</a>ww.g<a class="reference external" href="http://www.google.com/">oogle.com/</a>
search?=ccc...ccc&amp;hl=fr</p>
<p>(where ccc...ccc is replaced by the contents of the clickable field)</p>
<p>This instruction returns an error code to the calling program. When
this instruction is used, the return code in the HTTP response will
be &#8220;400 Bad Request&#8221; instead of &#8220;200 Ok&#8221;.</p>
</div></blockquote>
</div>
<div class="section" id="id249">
<h2>value<a class="headerlink" href="#id249" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies the error code (decimal 0 to 255). If the error code is
non-zero, a message is issued to the console and the scenario
returns the error code to the calling program. If the error code is
zero, a message is issued to the console and the scenario continues.</div></blockquote>
</div>
<div class="section" id="string1-string2">
<h2>&#8216;string1&#8217; [,&#8217;string2&#8217;, …]<a class="headerlink" href="#string1-string2" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>(optional) one or more strings of text to be concatenated together
and displayed as a message on the console. If a string begins with
an asterisk it represents the name of a VIRTEL variable whose
contents is to be included in the message. The number of quoted
strings is not limited, but the message itself cannot be larger than
252 characters.</p>
<p>This instruction defines the position and the length of the 3270
selection involved, as well as the set of presentation rules.</p>
</div></blockquote>
</div>
<div class="section" id="id250">
<h2>row<a class="headerlink" href="#id250" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies the row position of the field</div></blockquote>
</div>
<div class="section" id="id251">
<h2>col<a class="headerlink" href="#id251" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies the column position of the field</div></blockquote>
</div>
<div class="section" id="id252">
<h2>len<a class="headerlink" href="#id252" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies the length of the field</div></blockquote>
</div>
<div class="section" id="operation">
<h2>operation<a class="headerlink" href="#operation" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Defines the presentation rule. The permissible values are:</div></blockquote>
</div>
<div class="section" id="define-choice">
<h2>DEFINE-CHOICE<a class="headerlink" href="#define-choice" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Adds a value of type SELECT</div></blockquote>
</div>
<div class="section" id="define-variable-choice">
<h2>DEFINE-VARIABLE-CHOICE<a class="headerlink" href="#define-variable-choice" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Adds multiple values of type SELECT</div></blockquote>
</div>
<div class="section" id="is-binary-choice">
<h2>IS-BINARY-CHOICE<a class="headerlink" href="#is-binary-choice" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Defines a field as a checkbox</div></blockquote>
</div>
<div class="section" id="hide">
<h2>HIDE<a class="headerlink" href="#hide" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Defines a field as non-display</div></blockquote>
</div>
<div class="section" id="param-n">
<h2>param-N<a class="headerlink" href="#param-n" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Depends on the contents of the operation.</p>
<p>The FIELD$ instruction only operates on input fields</p>
<p>Generates a SELECT type entry field for the 3270 field concerned.
This instruction requires a VAL parameter and optionally a SHOW
parameter.</p>
<p>The VAL parameter generates an OPTION value for the SELECT field.</p>
<p>The optional SHOW parameter allows the specification of the text
displayed in the SELECT field for the given value. If the SHOW
parameter is omitted, the text displayed is identical to the value.</p>
<p>Generates a list of SELECT entries for the 3270 field concerned.
This instruction requires a VAL parameter.</p>
<p>The VAL parameter of a DEFINE-VARIABLE-CHOICE operation specifies
the name of a table variable which contains the OPTION values for
the SELECT statement generated for the 3270 field concerned. These
values must be supplied by the 3270 application by means of a
structured field type FAE5 or FAE6, or by means of the HOST4WEB
command S VARIABLE. Structured fields are described in the VIRTEL
Programming Interface documentation 263 HOST4WEB commands are
described in the VIRTEL Programming Interface documentation 274</p>
<p>Generates an INPUT TYPE=CHECKBOX field for the 3270 field concerned.
This is useful for 3270 fields which can take two values: one value
representing a “checked” box and the other value representing an
“unchecked” box. This instruction requires a VAL parameter and
optionally a NOTVAL parameter.</p>
<p>For output messages, the box will be displayed as checked if the
value of the 3270 field matches the VAL parameter, otherwise it will
be displayed as unchecked. For input messages, the VAL parameter
specifies the value which will be transmitted to the application in
the 3270 field when the box is checked, and the NOTVAL parameter
specifies the value to be transmitted to the application if the box
is unchecked. If the NOTVAL parameter is omitted then an empty field
will be transmitted to the application if the box is unchecked.</p>
<p>Generates an INPUT TYPE=HIDDEN field for the 3270 field concerned.
This instruction takes no additional parameters.</p>
<p>The FILTER$ VARIABLE-TO-VARIABLE instruction creates or adds values
to a variable from another variable according to a list of
conditions, similar to the conditions in a CASE$ instruction.</p>
</div></blockquote>
</div>
<div class="section" id="from-to">
<h2>FROM,TO<a class="headerlink" href="#from-to" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>varname1 is the name of the VIRTEL variable whose values are to be
inspected, and varname2 is the name of the VIRTEL variable to which
values are to be added. The variable varname2 will be created if it
does not exist.</div></blockquote>
</div>
<div class="section" id="when-then">
<h2>WHEN,THEN<a class="headerlink" href="#when-then" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>when a value ‘YYYY’ is found in variable varname1, then the value
‘aaa’ will be added to varname2.</div></blockquote>
</div>
<div class="section" id="begin-then">
<h2>BEGIN,THEN<a class="headerlink" href="#begin-then" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>when a value beginning with ‘XXXX’ is found in varname1, then the
value ‘bbb’ will be added to varname2.</div></blockquote>
</div>
<div class="section" id="contains-then-ignore">
<h2>CONTAINS,THEN,IGNORE<a class="headerlink" href="#contains-then-ignore" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>when a value containing ‘ZZZZ’ is found in varname1, then no value
will be added to varname2.</div></blockquote>
</div>
<div class="section" id="otherwise-keep">
<h2>OTHERWISE,KEEP<a class="headerlink" href="#otherwise-keep" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>the default action, if none of the preceding conditions is met, is
to copy the value from varname1 to a new value in varname2.</p>
<p>This instruction directs the subsequent processing flow to a
specified label.</p>
</div></blockquote>
</div>
<div class="section" id="id253">
<h2>label<a class="headerlink" href="#id253" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Specifies the instruction label at which execution of the scenario
is to continue.</p>
<p>This instruction allows to manage various handle operations within
the context of a scenario.</p>
<p>This instruction allows a scenario to continue after an ABEND, due
for instance to trying to write on the screen at a protected
position, and directs the subsequent processing flow to a specified
label.</p>
</div></blockquote>
</div>
<div class="section" id="id254">
<h2>label<a class="headerlink" href="#id254" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Specifies the instruction label at which execution of the scenario
is to continue.</p>
<p>This instruction allows to detect loops in a scenario. When the
limit is reached, VIRTEL abends the scenario, and a message VIRS12IE
terminal LOOP WAS DETECTED IN SCENARIO scenname</p>
</div></blockquote>
</div>
<div class="section" id="id255">
<h2>label<a class="headerlink" href="#id255" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies the instruction label at which execution of the scenario
is to continue if the counter limit is reached.</div></blockquote>
</div>
<div class="section" id="counter">
<h2>Counter<a class="headerlink" href="#counter" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Specifies the number of instructions executed beyond which the
program will be switched to the label previously specified.</p>
<p>This instruction can also be used with one of the following
syntaxes.</p>
<p>If no instruction counter is specified, Virtel will take 32 times
the number of instructions in the scenario as a default counter.</p>
<p>Both handle conditions may be spécified simultaneously.</p>
<p>The previous syntax wich is also valid is generated internaly by the
HANDLE$ instruction.</p>
<p>After the loop is detected, and the specified handling routine is
called, a new HANDLE$ LOOP= instruction may be issued and processing
may continue.</p>
<p>If no HANDLE$ is specified, Virtel will still set an instruction
limit, equal to 32 times the number of instructions in the scenario.</p>
<p>This instruction enables the testing of the presence of a value in a
3270 screen, or a value in a VIRTEL variable, or a condition set by
a previous instruction, and directs the subsequent processing flow.</p>
</div></blockquote>
</div>
<div class="section" id="id256">
<h2>row,col,len<a class="headerlink" href="#id256" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies the position (row, column) and length of the data tested.</div></blockquote>
</div>
<div class="section" id="id257">
<h2>value<a class="headerlink" href="#id257" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies the value of the data tested (must be placed in quotes).
If the value to be tested is in hexadecimal format, use EQ=X’CXNN…’
syntax.</div></blockquote>
</div>
<div class="section" id="variable">
<h2>VARIABLE<a class="headerlink" href="#variable" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies that the value of a VIRTEL variable is to be tested.</div></blockquote>
</div>
<div class="section" id="exists-variable">
<h2>EXISTS-VARIABLE<a class="headerlink" href="#exists-variable" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Tests if the specified variable exists.</div></blockquote>
</div>
<div class="section" id="not-exists-variable">
<h2>NOT-EXISTS-VARIABLE<a class="headerlink" href="#not-exists-variable" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Tests if the specified variable does not exist.</div></blockquote>
</div>
<div class="section" id="id258">
<h2>varname<a class="headerlink" href="#id258" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies the name of the VIRTEL variable to be tested (must be
placed in quotes)</div></blockquote>
</div>
<div class="section" id="application-timeout">
<h2>APPLICATION-TIMEOUT<a class="headerlink" href="#application-timeout" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Tests whether a previous ACTION$ TO-APPLICATION instruction with a
MAXTIME parameter ended in timeout.</div></blockquote>
</div>
<div class="section" id="id259">
<h2>CURSOR<a class="headerlink" href="#id259" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Tests whether the application has turned on the cursor. This option
is valid for both 3270 applications and videotex servers.</div></blockquote>
</div>
<div class="section" id="first-pass">
<h2>FIRST-PASS<a class="headerlink" href="#first-pass" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Tests whether the scenario is entered for the first time after
connecting to the VTAM application. This condition is no longer true
after the scenario has exited for the first time, for example when
waiting for the next message. If both an INPUT and an OUTPUT
scenario are present, the FIRST-PASS condition is true the first
time the INPUT scenario is run, and the first time the OUTPUT
scenario is run as well. This condition is always true for other
types of scenario.</div></blockquote>
</div>
<div class="section" id="ind-file-timeout">
<h2>IND$FILE-TIMEOUT<a class="headerlink" href="#ind-file-timeout" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Tests whether, having received the 3270 messages which precede an
IND$FILE transfer, the transfer itself has still not started after a
delay of one second. This condition indicates an IND$FILE error and
is usually accompanied by an error message on the TSO screen.</div></blockquote>
</div>
<div class="section" id="id260">
<h2>NOT-FOUND<a class="headerlink" href="#id260" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Tests the condition code set by the previous COPY$ instruction.</div></blockquote>
</div>
<div class="section" id="screen-is-blank">
<h2>SCREEN-IS-BLANK<a class="headerlink" href="#screen-is-blank" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Tests whether the 3270 screen is completely blank. This condition is
true if the screen contains only blanks, nulls, and attribute
characters.</div></blockquote>
</div>
<div class="section" id="screen-is-unformatted">
<h2>SCREEN-IS-UNFORMATTED<a class="headerlink" href="#screen-is-unformatted" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Tests whether the 3270 screen is unformatted. This condition is true
if the screen contains no attribute characters.</div></blockquote>
</div>
<div class="section" id="session-switch">
<h2>SESSION-SWITCH<a class="headerlink" href="#session-switch" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Tests whether the scenario is entered for a VTAM application which
was already connected to this terminal. This condition is useful in
VIRTEL multisession scenarios which must reestablish the environment
before starting the transaction requested by the user. This
condition remains true until the end of this activation of the
scenario (for example until the scenario is reused for another
session).</div></blockquote>
</div>
<div class="section" id="process1">
<h2>process1<a class="headerlink" href="#process1" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies the address of the branch exit of the script if the
condition is satisfied. Permitted values are:</div></blockquote>
</div>
<div class="section" id="id261">
<h2>label<a class="headerlink" href="#id261" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>instruction label at which execution of the scenario is to continue.</div></blockquote>
</div>
<div class="section" id="id262">
<h2>FAIL<a class="headerlink" href="#id262" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>reserved word indicating that the scenario is to be terminated and
the current message is to be discarded. The scenario will be called
again on receipt of the next outbound message from the application.</div></blockquote>
</div>
<div class="section" id="id263">
<h2>SUCCESS<a class="headerlink" href="#id263" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>reserved word indicating that the scenario is to be terminated and
the current message is to be presented to the user. This is
equivalent to branching to a SCENARIO END instruction.</div></blockquote>
</div>
<div class="section" id="process2">
<h2>process2<a class="headerlink" href="#process2" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Specifies the address of the branch exit of the script if the
condition is not satisfied. Permitted values are identical to
process1.</p>
<p>This instruction allows a scenario to enable the IND$FILE file
transfer function. The INDSCEN$ macro instruction must be included
in both the input scenario and the output scenario.</p>
</div></blockquote>
</div>
<div class="section" id="id264">
<h2>type<a class="headerlink" href="#id264" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Specifies the type of host system running the IND$FILE program. TSO
is the only allowed value. The default is TSO.</p>
<p>This instruction allows to define a label in a scenario.</p>
<p>It is alike assembler classic ones :</p>
<p>It may be used in any scenario. If the scenario is not a subroutine,
you can also simply generates :</p>
<p>If the scenario is a subroutine, you must use LABEL$ instruction to
define each labels inside the subroutine. Each label is suffixed
with the name of the subroutine, in order to give some protection
from conflicting labels and from branching over the limits of
subroutines</p>
</div></blockquote>
</div>
<div class="section" id="mylabel">
<h2>mylabel<a class="headerlink" href="#mylabel" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Specifies the instruction label at which execution of a scenario is
to continue.</p>
<p>A sample of the usage of LABEL$ instruction is available in the
PERFORM$ insctruction description.</p>
<p>The MAP$ instruction defines the format of a flat-format data area
known as a “commarea”, and describes how VIRTEL converts XML or
Query input data to commarea format. The MAP$ instruction may also
be used in conjunction with the TOVAR$ instruction to convert an
output commarea to VIRTEL variables, which can be used with an
appropriate template to generate XML or other formats.</p>
<p>When the MAP$ instruction is used to convert input data to commarea
format, the input data may be supplied either as XML, or as named
parameters in a format known as “Query” data. In both cases, the
input data may be attached to an inbound HTTP request (GET or POST
request), or it may be supplied in a VIRTEL variable. The result of
the parsing process is a commarea which is suitable for processing
by an application program (typically a COBOL program running under
CICS). The commarea is written into a VIRTEL variable so that it can
be passed to the application program by means of the VIRTEL
transaction script language.</p>
<p>Conversion of input data to commarea format (“input-to-commarea”
conversion) is performed by means of an INITIAL scenario. The
scenario begins with a group of MAP$ instructions (MAP$ BEGIN, MAP$
END, MAP$ AREA, and MAP$ AREA-ATTRIBUTE) which define the format of
the commarea and its relationship to the XML tags or the Query
parameters. The scenario continues with a MAP$ FROM-FIELD, MAP$
FROM-INPUT, MAP$ FROM-VARIABLE instruction which defines the source
of the XML or Query data. Finally, the scenario ends with a MAP$
TO-VARIABLE instruction which names the VIRTEL variable into which
the commarea is to be stored.</p>
<p>Conversion from commarea format to VIRTEL variables
(“commarea-to-output” conversion) may be performed by means of an
INITIAL scenario or an OUTPUT scenario. The scenario begins with a
description of the commarea format (MAP$ BEGIN, MAP$ END, MAP$ AREA,
and MAP$ AREA-ATTRIBUTE), and continues with a TOVAR$ instruction
which defines the source of the commarea. See the description of
th<a class="reference external" href="#_bookmark233">e “TOVAR$ instruction”, page 192</a> for further
details of commarea-to-output conversion.</p>
<p>The MAP$ ABEND instruction is intended for diagnostic purposes only.
When VIRTEL encounters a MAP$ ABEND instruction while processing a
commarea with the MAP$ TO-VARIABLE or TOVAR$ instructions, the
scenario ends and a SNAP dump is produced. The VIRTEL SNAP is
described in the “Audit and Performance” chapter of the VIRTEL
Messages and Operations Guide.</p>
</div></blockquote>
</div>
<div class="section" id="text">
<h2>text<a class="headerlink" href="#text" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>A free-format description which will be printed in the SNAP at the
time of the abend.</p>
<p>The MAP$ ABEND-AT instruction is similar to MAP$ ABEND except that
it produces a SNAP only after it has been executed the number of
times indicated by the OCCURS parameter.</p>
</div></blockquote>
</div>
<div class="section" id="id265">
<h2>text<a class="headerlink" href="#id265" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>A free-format description which will be printed in the SNAP at the
time of the abend.</div></blockquote>
</div>
<div class="section" id="n">
<h2>n<a class="headerlink" href="#n" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The SNAP will be produced after the MAP$ ABEND-AT instruction has
been executed n times.</p>
<p>The MAP$ AREA instruction defines a field within a commarea. The
MAP$ AREA instruction must be enclosed by a pair of MAP$ BEGIN and
MAP$ END instructions which define the start and end of the
commarea.</p>
</div></blockquote>
</div>
<div class="section" id="id266">
<h2>name<a class="headerlink" href="#id266" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>For input-to-commarea conversion, this is the name of the XML tag or
Query parameter which identifies the input data item. For XML input,
the WITH parameter may be omitted, and the tag at the current
location in the input data is used.</p>
<p>For commarea-to-output conversion, this is the name of the VIRTEL
variable which will be generated.</p>
</div></blockquote>
</div>
<div class="section" id="nnn">
<h2>nnn<a class="headerlink" href="#nnn" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies the fixed length of the field in the commarea.</div></blockquote>
</div>
<div class="section" id="id267">
<h2>type<a class="headerlink" href="#id267" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><strong>X</strong></p>
<p>indicates an alphanumeric field</p>
</div></blockquote>
</div>
<div class="section" id="id268">
<h2>9<a class="headerlink" href="#id268" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>indicates a numeric field</div></blockquote>
</div>
<div class="section" id="s9">
<h2>S9<a class="headerlink" href="#s9" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>indicates a numeric field with sign overpunch</div></blockquote>
</div>
<div class="section" id="only9">
<h2>ONLY9<a class="headerlink" href="#only9" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>indicates a numeric field; any non-numeric characters in the input
data item are ignored when copied to the commarea</div></blockquote>
</div>
<div class="section" id="only9-left-aligned">
<h2>(ONLY9,LEFT-ALIGNED)<a class="headerlink" href="#only9-left-aligned" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>indicates that the numeric value is to be left-aligned in the field
in the commarea</div></blockquote>
</div>
<div class="section" id="id269">
<h2>BASE64<a class="headerlink" href="#id269" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>indicates that the data is encoded in Base64 format in the XML
datastream</div></blockquote>
</div>
<div class="section" id="offset-length-offset-length-text">
<h2>OFFSET-LENGTH OFFSET-LENGTH-TEXT<a class="headerlink" href="#offset-length-offset-length-text" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><strong>OFFSET-LENGTH-BINARY</strong></p>
<p>for input-to-commarea conversion, calculates the offset and length
of the XML data element identified by the WITH parameter. The offset
is calculated relative to the start of the XML datastream.</p>
<p>For OFFSET-LENGTH-TEXT the offset and length values are stored in
the result commarea as two decimal numbers separated by a comma.
OFFSET-LENGTH is a synonym for OFFSET-LENGTH-TEXT.</p>
<p>For OFFSET-LENGTH-BINARY the offset and length are stored as binary
values (8 bytes and 4 bytes respectively) in the result commarea.
When used in conjunction with the TO-VARIABLE or TO-VARIABLE-ONLY
parameters described below, the 12-byte value thus produced can
subsequently be passed to the VIRSVFIO service program as the
OFFAREA parameter for the read-partial and write-append functions.</p>
</div></blockquote>
</div>
<div class="section" id="pattern-char">
<h2>pattern,char<a class="headerlink" href="#pattern-char" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Specifies an editing pattern to be applied when the field is
processed during commarea-to-output conversion. Character positions
in pattern which contain char represent variable characters to be
obtained from the field in the commarea, other characters in pattern
represent constants. For example, if FORMAT=(&#8216;9999-99-99&#8217;,9) is
specified and the commarea field contains 20060621 then a result
value of 2006-06-21 will be generated.</p>
<p>Note: XML tag names are case sensitive. WITH=&#8217;Title&#8217; is not the same
as WITH=&#8217;TITLE&#8217;</p>
<p>A variation of the MAP$ AREA instruction allows the value of the
field to be copied into a VIRTEL variable, in addition to being
placed in the commarea. The variable will be created, if necessary,
and its value will be set when the commarea is created by a
subsequent MAP$ FROM-FIELD, MAP$ FROM-INPUT, or MAP$ FROM-VARIABLE
instruction. The value can then be tested by means of an IF$
VARIABLE instruction (se`e “Examples of presentation
scripts”, &lt;#_bookmark242&gt;`__</p>
<p><a class="reference external" href="#_bookmark242">page 203</a>):</p>
</div></blockquote>
</div>
<div class="section" id="id270">
<h2>varname<a class="headerlink" href="#id270" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The name of the VIRTEL variable to which the field value is to be
copied. The variable name must be placed in quotes. If the variable
already exists, then its current value will be replaced.</p>
<p>The parameters WITH, LENGTH, and TYPE are as previously described.</p>
<p>Another form of the MAP$ AREA instruction defines a field in the
commarea and fills the field with either a constant value, or the
value of a VIRTEL variable:</p>
</div></blockquote>
</div>
<div class="section" id="id271">
<h2>value<a class="headerlink" href="#id271" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The value to be copied to the field. The value must be placed in
quotes.</div></blockquote>
</div>
<div class="section" id="id272">
<h2>varname<a class="headerlink" href="#id272" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The name of the VIRTEL variable from which the field value is to be
copied. The variable name must be placed in quotes.</p>
<p>The parameters LENGTH, TYPE, and FORMAT are as previously described.</p>
<p>A further variation of the MAP$ AREA instruction places the value of
a field into a VIRTEL variable, without copying it into the
commarea. The variable will be created or replaced during the
processing of a subsequent MAP$ FROM-FIELD, MAP$ FROM-INPUT, or MAP$
FROM-VARIABLE instruction.</p>
</div></blockquote>
</div>
<div class="section" id="id273">
<h2>varname<a class="headerlink" href="#id273" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The name of the VIRTEL variable to which the field value is to be
copied. The variable name must be placed in quotes. If the variable
already exists, then its current value will be replaced.</p>
<p>The WITH parameter specifies the name of the XML tag or Query
parameter, as previously described. If the LENGTH and TYPE
parameters are specified, then the value of the field is edited, as
previously described, to conform to the length and type specified.
If the LENGTH and TYPE parameters are omitted, then the length and
value of the variable are copied exactly from the input data.</p>
<p>Another variation of the MAP$ AREA instruction,
TO-TABLE-VARIABLE-ONLY, is similar to TO-VARIABLE-ONLY except that
if the variable already exists, the new value will be appended to
any existing values instead of erasing the previous value.</p>
</div></blockquote>
</div>
<div class="section" id="id274">
<h2>varname<a class="headerlink" href="#id274" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The name of the VIRTEL variable to which the field value is to be
copied. The variable name must be placed in quotes. If the variable
already exists, the new value will be appended to any existing
values.</p>
<p>The WITH, LENGTH and TYPE parameters are as previously described.</p>
<p>For convenience, if the variable name is the same as the value of
the WITH parameter, the variable name may be specified as
VAR=&#8217;=WITH&#8217; or VAR==WITH.</p>
<p>The FROM-LAST-ELEMENT-FOUND-NAME keyword of the MAP$ AREA
instruction copies into the output commarea the name of the last XML
element found in the input stream. This may be used in conjunction
with the NEXT-ELEMENT keyword of the MAP$ BEGIN instruction.</p>
</div></blockquote>
</div>
<div class="section" id="id275">
<h2>nnn<a class="headerlink" href="#id275" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The length of the field in the output commarea where the name is to
be placed.</p>
<p>The MAP$ AREA-ATTRIBUTE instruction defines a field within a
commarea. It is similar to MAP$ AREA except that the contents of the
field are obtained from the value of an attribute parameter included
within the specified XML start tag, instead of from the data
enclosed by the XML start and end tags.</p>
</div></blockquote>
</div>
<div class="section" id="xmlname">
<h2>xmlname<a class="headerlink" href="#xmlname" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The name of the XML tag in the input data whose attribute is to be
copied. If the WITH parameter is omitted, the tag at the current
location in the input data is used.</div></blockquote>
</div>
<div class="section" id="attrname">
<h2>attrname<a class="headerlink" href="#attrname" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The name of the XML attribute whose value is to be copied to the
commarea.</div></blockquote>
</div>
<div class="section" id="id276">
<h2>nnn<a class="headerlink" href="#id276" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies the fixed length of the field in the commarea.</div></blockquote>
</div>
<div class="section" id="id277">
<h2>type<a class="headerlink" href="#id277" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Same as type parameter of the MAP$ AREA instruction.</p>
<p>Note: XML tag and attribute names are case sensitive.</p>
<p>A variation of the MAP$ AREA-ATTRIBUTE instruction allows the value
of the attribute to be copied into a VIRTEL variable, in addition to
being placed in the commarea:</p>
</div></blockquote>
</div>
<div class="section" id="id278">
<h2>varname<a class="headerlink" href="#id278" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The name of the VIRTEL variable to which the attribute value is to
be copied. The variable name must be placed in quotes. If the
variable already exists, then its current value will be replaced.</p>
<p>The parameters WITH, VALUEOF, LENGTH, and TYPE are as previously
described.</p>
<p>Another variation of the MAP$ AREA-ATTRIBUTE instruction places the
value of an attribute into a VIRTEL variable, without copying it
into the commarea:</p>
</div></blockquote>
</div>
<div class="section" id="id279">
<h2>varname<a class="headerlink" href="#id279" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The name of the VIRTEL variable to which the attribute value is to
be copied. The variable name must be placed in quotes. If the
variable already exists, then its current value will be replaced.</p>
<p>The parameters WITH and VALUEOF are as previously described. If the
LENGTH and TYPE parameters are specified, then the attribute value
is edited, as previously described, to conform to the length and
type specified. If the LENGTH and TYPE parameters are omitted, then
the length and value of the attribute are copied exactly.</p>
<p>The MAP$ BEGIN instruction marks the start of a commarea, or the
start of a group of fields within a commarea. The optional WITH
parameter indicates a group of fields enclosed by a specific XML tag
in the input data. The optional OCCURS parameter indicates a
repeating group of fields. Nested pairs of MAP$ BEGIN and MAP$ END
instructions are permitted.</p>
</div></blockquote>
</div>
<div class="section" id="groupname">
<h2>groupname<a class="headerlink" href="#groupname" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The label is required. It specifies the name of the commarea or
field group. The MAP$ BEGIN instruction must be matched by a
subsequent MAP$ END instruction having the same label.</div></blockquote>
</div>
<div class="section" id="id280">
<h2>xmlname<a class="headerlink" href="#id280" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The name of the XML tag which identifies the start of the group of
fields in the input data. If the WITH parameter is omitted,
processing for this group of fields starts at the current location
in the input data. The special value NEXT- ELEMENT matches with the
next XML tag in the input stream, regardless of its name.</div></blockquote>
</div>
<div class="section" id="id281">
<h2>nnn<a class="headerlink" href="#id281" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies the number of occurrences for a repeating group of fields.
If the OCCURS parameter is omitted, one occurrence will be
generated. The special value OCCURS=UNLIMITED indicates that the
field repeats indefinitely until the end of the input data is
reached.</div></blockquote>
</div>
<div class="section" id="countvar">
<h2>countvar<a class="headerlink" href="#countvar" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Specifies the name of a VIRTEL variable which will be created when
the MAP$ is processed for commarea-to-output conversion for a
repeating group of fields. The value of the variable is the number
of occurrences actually processed (which may be less than the value
of the OCCURS parameter if the length of the input commarea is
insufficient to contain nnn occurrences of the field group). If the
COUNT parameter is omitted, the groupname specified in the statement
label is used as the variable name.</p>
<p>A variation of the MAP$ BEGIN instruction can be used to force the
scan of the XML input stream to be restarted:</p>
<p>The TOP parameter specifies that the scan for the tag named xmlname
starts from the beginning of the XML stream.</p>
<p>Another variation of the MAP$ BEGIN instruction introduces a group
of fields which are conditional on the current value of the $EVENT$
variable:</p>
<p>The group of fields enclosed by the MAP$ BEGIN and MAP$ END
instructions are processed only if the “current event” set by a
previous MAP$ EVENTUAL-AREA or MAP$ ELSETHEN-AREA instruction
matches the eventname specified. For commarea-to-output conversion,
the names of the variables generated for this group are prefixed by
eventname/</p>
<p>The MAP$ END instruction marks the end of a commarea or field group.</p>
</div></blockquote>
</div>
<div class="section" id="id282">
<h2>groupname<a class="headerlink" href="#id282" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The label is required. It must match the label on the corresponding
MAP$ BEGIN instruction.</p>
<p>The MAP$ EVENTUAL-AREA and MAP$ ELSETHEN-AREA instructions generate
a field in a commarea whose value depends on the presence of a named
tag in the XML stream, or whose value depends on the value of a
specific XML tag.</p>
<p>The first form of these instructions tests for the presence of one
of a set of named tags, and generates a value which corresponds to
the tag which was found:</p>
<p>These instructions are coded as a group consisting of one MAP$
EVENTUAL-AREA instruction followed by one or more MAP$ ELSETHEN-AREA
instructions. A final MAP$ ELSETHEN-AREA instruction with no WHEN
parameter provides a default value for the output field. The group
is enclosed by a pair of MAP$ BEGIN and MAP$ END instructions which
specify the name of the enclosing XML tag.</p>
<p>The optional EVENT parameter specifies the name of the VIRTEL
variable to be created when the MAP$ is processed for
commarea-to-output conversion. If the EVENT parameter is omitted,
then the variable has the same name as the XML tag xmlname. The
value of the EVENT parameter is also added to the $EVENT$ variable,
and becomes the “current event” for any subsequent MAP$ BEGIN,EVENT
instructions.</p>
<p>The following example illustrates the process. The XML stream in
this example consists of an &lt;identity&gt; tag which may enclose one of
three different tags &lt;bic&gt; &lt;iban&gt; or &lt;rib&gt;:</p>
<p>The objective is to generate an output area which consists of a
one-byte code (1=bic, 2=iban, 3=rib) followed by an</p>
<p>8-byte area containing the value of the indicated tag. If none of
the indicated tags is found, the code is generated with a space as
the default value. This is achieved by means of the following
instructions in the scenario:</p>
<p>Note: XML tag names are case sensitive.</p>
<p>The second form of the MAP$ EVENTUAL-AREA and MAP$ ELSETHEN-AREA
instructions tests the data enclosed by a named tag in the XML
stream, and generates an output field with a corresponding value:</p>
<p>These instructions are coded as a group consisting of one MAP$
EVENTUAL-AREA instruction followed by one or more MAP$ ELSETHEN-AREA
instructions. A final MAP$ ELSETHEN-AREA instruction with no WHEN
parameter provides a default value for the output field. The group
is enclosed by a pair of MAP$ BEGIN and MAP$ END instructions which
specify the name of the XML tag whose value is being tested</p>
<p>The following example illustrates the process. The XML stream in
this example consists of an &lt;indicator&gt; tag which can take the value
“true” or “false”:</p>
<p>The objective is to generate an output area which consists of a
one-byte code (1=true, 0=false). A default value 0 is generated if
the tag data has any other value. This is achieved by means of the
following instructions in the scenario:</p>
<p>Note: XML tag names are case sensitive.</p>
<p>The MAP$ EXECUTE instruction allows a sequence of MAP$ instructions
to be interrupted in order to enter data on the 3270 screen before
continuing the analysis. The MAP$ EXECUTE instruction branches to a
subroutine defined elsewhere in the scenario. The subroutine ends
with a RETURN$ instruction.</p>
</div></blockquote>
</div>
<div class="section" id="id283">
<h2>subname<a class="headerlink" href="#id283" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The label is required. It specifies the name of the subroutine to be
called. The label subname must be defined elsewhere in the scenario.</p>
<p>In the following example the two MAP$ EVENT paragraphs each call a
subroutine later in the scenario. After the subroutine executes a
RETURN$ instruction, the analysis continues:</p>
<p>The MAP$ FROM-FIELD instruction requests VIRTEL to generate a
commarea from XML input data (“XML input-to- commarea” conversion).
The XML input data is obtained from an HTML form field in the
incoming HTTP request.</p>
</div></blockquote>
</div>
<div class="section" id="id284">
<h2>groupname<a class="headerlink" href="#id284" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The label is required. It specifies the name of the output area to
be generated. It must match the label on a preceding MAP$ BEGIN
instruction.</div></blockquote>
</div>
<div class="section" id="fieldname">
<h2>fieldname<a class="headerlink" href="#fieldname" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The name of the HTML form field which contains the XML input data.</p>
<p>The MAP$ FROM-FIELD instruction expects XML input data to be
presented as a character string fieldname=xmldata where xmldata is
XML data in URL-encoded format. In URL-encoded format, a “+” sign
represents a space, and “%xx” represents the hexadecimal encoding of
an ASCII character. The string fieldname=xmldata may either be
appended to the URL (HTTP “GET” method) or it may be contained in
the body of the HTTP request (HTTP “POST” method). See <a class="reference external" href="#_bookmark245">“Sending XML
input as URL-encoded data”, page 207</a> for
examples. To process requests containing XML data in plain
(unencoded) format, use instead the <a class="reference external" href="#_bookmark206">“MAP$ FROM-INPUT”, page
179</a>.</p>
<p>The MAP$ FROM-INPUT instruction requests VIRTEL to generate a
commarea from XML or Query format input data (“input-to-commarea”
conversion). The input data is obtained from the incoming HTTP
request.</p>
</div></blockquote>
</div>
<div class="section" id="id285">
<h2>groupname<a class="headerlink" href="#id285" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The label is required. It specifies the name of the output area to
be generated. It must match the label on a preceding MAP$ BEGIN
instruction.</div></blockquote>
</div>
<div class="section" id="id286">
<h2>format<a class="headerlink" href="#id286" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>XML: specifies that the input data is in XML format QUERY: specifies
that the input data is in Query format</p>
<p>If neither XML nor QUERY is specified, the default is XML.</p>
<p>Note: MAP$ FROM-INPUT with a FIELD parameter is accepted and treated
as MAP$ FROM-FIELD</p>
<p>The MAP$ FROM-INPUT instruction obtains its input data from an
incoming HTTP request. The HTTP request may use either via the GET
method (where the input data is appended to the URL) or the POST
method (where the input data is contained in the request body).</p>
<p>When the input format is XML, MAP$ FROM-INPUT treats the entire data
area as XML data without any translation. Se<a class="reference external" href="#_bookmark244">e “HTTP request with
XML input data”, page 206</a> for an example. MAP$
FROM-FIELD is preferred when using the GET method with XML input,
because certain characters cannot be included in a URL without using
URL-encoding.</p>
<p>When the input format is QUERY, MAP$ FROM-INPUT expects the input
data to contain one or more strings in the form fieldname=data. When
the HTTP request uses the GET method, the strings are appended to
the URL. The first string is preceded by a “?” character which
separates it from the URL, and the remaining strings are separated
by “&amp;” characters. When the HTTP request uses the POST method, the
strings are contained in the request body, either one per line, or
separated by “&amp;” characters if multiple strings are coded on the
same line. For both the GET and POST methods, Query strings are
expressed in URL-encoded format, where “+” sign represents a space,
and “%xx” represents the hexadecimal encoding of an ASCII character.
Se<a class="reference external" href="#_bookmark242">e “Parsing Query Input”, page 203</a> for
examples.</p>
<p>The MAP$ FROM-VARIABLE instruction requests VIRTEL to generate a
commarea from XML or Query format input data (“input-to-commarea”
conversion). The input data is contained in a VIRTEL variable.</p>
</div></blockquote>
</div>
<div class="section" id="id287">
<h2>groupname<a class="headerlink" href="#id287" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The label is required. It specifies the name of the output area to
be generated. It must match the label on a preceding MAP$ BEGIN
instruction.</div></blockquote>
</div>
<div class="section" id="id288">
<h2>format<a class="headerlink" href="#id288" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>XML: specifies that the input data is in XML format QUERY: specifies
that the input data is in Query format</p>
<p>If neither XML nor QUERY is specified, the default is XML.</p>
</div></blockquote>
</div>
<div class="section" id="id289">
<h2>varname<a class="headerlink" href="#id289" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The name of the VIRTEL variable which contains the input data.</p>
<p>The MAP$ TO-VARIABLE instruction requests VIRTEL to copy a commarea
into a VIRTEL variable. The commarea must have been already
generated by a previous MAP$ FROM-FIELD, FROM-INPUT, or
FROM-VARIABLE instruction.</p>
</div></blockquote>
</div>
<div class="section" id="id290">
<h2>groupname<a class="headerlink" href="#id290" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The label is required. It specifies the name of the output area to
be copied. It must match the label on a preceding MAP$ BEGIN
instruction.</div></blockquote>
</div>
<div class="section" id="id291">
<h2>varname<a class="headerlink" href="#id291" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The name of the VIRTEL variable into which the commarea is to be
copied.</p>
<p>This instruction allows the scenario to set up parameters for a
subsequent SEND$ TO-LINE instruction.</p>
<p>The OPTION$ FOR-HTTP instruction, when used in conjunction with a
SEND$ TO-LINE instruction referencing an outbound HTTP line, allows
a scenario to make a request to an HTTP server and to receive the
response. The OPTION$ FOR-HTTP instruction builds the parameter list
for the subsequent SEND$ TO-LINE instruction.</p>
</div></blockquote>
</div>
<div class="section" id="id292">
<h2>method<a class="headerlink" href="#id292" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(required) the HTTP method: GET or POST (see note below).</div></blockquote>
</div>
<div class="section" id="site">
<h2>site<a class="headerlink" href="#site" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the site portion of the URL (see notes below).</div></blockquote>
</div>
<div class="section" id="topath">
<h2>topath<a class="headerlink" href="#topath" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the path portion of the URL (see note below).</div></blockquote>
</div>
<div class="section" id="querytext">
<h2>querytext<a class="headerlink" href="#querytext" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>optional text to be appended to the URL (see note below).</div></blockquote>
</div>
<div class="section" id="header">
<h2>header<a class="headerlink" href="#header" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>additional HTTP headers to be inserted in the message. Multiple
headers may be inserted by specifying more than one HEADER
parameter.</div></blockquote>
</div>
<div class="section" id="varnameo">
<h2>varnameo<a class="headerlink" href="#varnameo" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the VIRTEL variable which contains the HTTP POST data to
be sent to the server. This parameter is required when the method is
POST.</div></blockquote>
</div>
<div class="section" id="varnamei">
<h2>varnamei<a class="headerlink" href="#varnamei" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(required) the name of the VIRTEL variable which will receive the
HTTP response data returned by the server.</div></blockquote>
</div>
<div class="section" id="varnamer">
<h2>varnamer<a class="headerlink" href="#varnamer" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the VIRTEL variable which will receive the HTTP return
code returned by the server.</div></blockquote>
</div>
<div class="section" id="varnamep">
<h2>varnamep<a class="headerlink" href="#varnamep" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>the name of the VIRTEL variable which will contain the parameter
list.</p>
<p>Note: If the field begins with “*” then it is treated as the name
of a variable.</p>
<p>Note: You can use the SITE parameter to specify the name and port of
the remote HTTP server, provided that the outbound HTTP line
specified by the SEND$ TO-LINE instruction is defined with the
special value $SITE$ in the “Remote Ident” field. The value of the
SITE parameter is also used to build the Host: header of the
outbound HTTP request.</p>
<p>Examples:</p>
<p>In this example, the VIRTEL variable SITENAME contains the value of
the SITE parameter.</p>
<p>The OPTION$ FOR-IND$FILE instruction prepares a TSO session for a
file transfer operation using the IND$FILE protocol. This
instruction does not itself perform a file transfer; instead it
produces an IND$FILE command in a VIRTEL variable. The scenario must
send the command to the TSO session to initiate the file transfer.</p>
<p>The format of the OPTION$ FOR-IND$FILE command for a transfer from
TSO to the workstation is shown below:</p>
</div></blockquote>
</div>
<div class="section" id="options">
<h2>options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>optional parameters (for example, &#8216;ASCII CRLF&#8217;) to be appended to
the IND$FILE command line (see note 1 below).</div></blockquote>
</div>
<div class="section" id="dsname">
<h2>dsname<a class="headerlink" href="#dsname" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(required) the TSO dataset name to be downloaded (see notes 1 and 2
below).</div></blockquote>
</div>
<div class="section" id="outvar">
<h2>outvar<a class="headerlink" href="#outvar" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(required) the name of the VIRTEL variable which is to receive the
contents of the downloaded file.</div></blockquote>
</div>
<div class="section" id="retvar">
<h2>retvar<a class="headerlink" href="#retvar" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the VIRTEL variable which will receive the completion
message sent by IND$FILE at the end of the transfer.</div></blockquote>
</div>
<div class="section" id="cmdvar">
<h2>cmdvar<a class="headerlink" href="#cmdvar" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>(required) the name of the VIRTEL variable which will contain the
generated IND$FILE command.</p>
<p>The format of the OPTION$ FOR-IND$FILE command for a transfer from
the workstation to TSO is shown below:</p>
</div></blockquote>
</div>
<div class="section" id="id293">
<h2>options<a class="headerlink" href="#id293" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>optional parameters (for example, &#8216;ASCII CRLF NEW&#8217;) to be appended
to the IND$FILE command line (see note 1 below).</div></blockquote>
</div>
<div class="section" id="id294">
<h2>dsname<a class="headerlink" href="#id294" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(required) the destination TSO dataset name (see notes 1 and 2
below).</div></blockquote>
</div>
<div class="section" id="invar">
<h2>invar<a class="headerlink" href="#invar" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(required) the name of the VIRTEL variable which contains the data
to be uploaded.</div></blockquote>
</div>
<div class="section" id="id295">
<h2>retvar<a class="headerlink" href="#id295" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the VIRTEL variable which will receive the completion
message sent by IND$FILE at the end of the transfer.</div></blockquote>
</div>
<div class="section" id="id296">
<h2>cmdvar<a class="headerlink" href="#id296" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>(required) the name of the VIRTEL variable which will contain the
generated IND$FILE command.</p>
<p>Note 1: If the field begins with “*” then it is treated as the name
of a variable.</p>
<p>Note 2: TSO will prefix the dataset name by your prefix (usually
your userid) unless the dataset name is enclosed in quotes. If you
specify the dataset name as a literal in the instruction (as opposed
to indirectly as the value of a variable) then triple quotes must be
used, for example: (FROM,&#8217;&#8216;&#8217;SYS1.PARMLIB(IEASYS00)&#8217;&#8216;&#8217;)</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="62%" />
<col width="31%" />
<col width="7%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">OPTION$ FOR-IND$FILE-DOWNLOAD, (METHOD,&#8217;*OPT&#8217;),</th>
<th class="head">&#8220;ASCII CRLF&#8221; or null</th>
<th class="head"><p class="first">*</p>
<p class="last">*</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>(FROM,&#8217;*DSN&#8217;),</td>
<td>TSO dataset name</td>
<td>*</td>
</tr>
<tr class="row-odd"><td>(FILE-OUT,&#8217;DOWNLOAD&#8217;),</td>
<td>&#160;</td>
<td>*</td>
</tr>
<tr class="row-even"><td>(RET-CODE,&#8217;RETURN-CODE&#8217;),</td>
<td>&#160;</td>
<td>*</td>
</tr>
<tr class="row-odd"><td>TOVAR=&#8217;FTCOMMAND&#8217;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote>
<div>In this example, the VIRTEL variable OPT contains the IND$FILE
optional parameters and DSN contains the dataset name. On completion
of the instruction, FTCOMMAND contains the IND$FILE command to be
sent to TSO. When the file transfer completes, the VIRTEL variable
DOWNLOAD contains the contents of the downloaded file, and RETURN-
CODE contains the IND$FILE completion message &#8220;TRANS03 File transfer
complete&#8221; or an error message.</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="49%" />
<col width="41%" />
<col width="10%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">(TO,&#8217;*DSN&#8217;),</th>
<th class="head">TSO dataset name</th>
<th class="head">*</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>(FILE-IN,&#8217;UPLOAD&#8217;),</td>
<td>&#160;</td>
<td>*</td>
</tr>
<tr class="row-odd"><td>(RET-CODE,&#8217;RETURN-CODE&#8217;),</td>
<td>&#160;</td>
<td>*</td>
</tr>
<tr class="row-even"><td>TOVAR=&#8217;FTCOMMAND&#8217;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>In this example, the VIRTEL variable OPT contains the IND$FILE
optional parameters and DSN contains the dataset name. On completion
of the instruction, FTCOMMAND contains the IND$FILE command to be
sent to TSO. When the file transfer is initiated, VIRTEL sends the
contents of the variable UPLOAD to IND$FILE. When the file transfer
completes, RETURN-CODE contains the IND$FILE completion message
&#8220;TRANS03 File transfer complete&#8221; or an error message.</p>
<p>Builds a parameter list for a subsequent SEND$ TO-LINE instruction
when the line type is MQ.</p>
</div></blockquote>
</div>
<div class="section" id="varname1">
<h2>varname1<a class="headerlink" href="#varname1" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the VIRTEL variable which contains data to be written to
the MQ line.</div></blockquote>
</div>
<div class="section" id="id297">
<h2>varnamep<a class="headerlink" href="#id297" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>the name of the VIRTEL variable which will contain the parameter
list.</p>
<p>Builds a parameter list for a subsequent SEND$ TO-LINE instruction
when the line type is SMTP.</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="77%" />
<col width="8%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">OPTION$</th>
<th class="head">FOR-SMTP,</th>
<th class="head">*</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td>(TO,&#8217;toaddr&#8217;),</td>
<td>*</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>(FROM,&#8217;fromaddr&#8217;),</td>
<td>*</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>(CC,&#8217;ccaddr&#8217;),</td>
<td>*</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>(BCC,&#8217;bccaddr&#8217;),</td>
<td>*</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>(TEXT,&#8217;bodytext&#8217;),</td>
<td>*</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>(SUBJECT,&#8217;subjtext&#8217;),</td>
<td>*</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>(CHARSET,&#8217;charset&#8217;),</td>
<td>*</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>(HEADER,&#8217;header&#8217;),</td>
<td>*</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>(FILE-OUT,&#8217;varname&#8217;,&#8217;filename&#8217;,&#8217;filetype&#8217;,&#8217;disp&#8217;),</td>
<td>*</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>(ALTERNATE-TEXT,&#8217;altvar&#8217;,&#8217;altfn&#8217;,&#8217;altft&#8217;,&#8217;altdp&#8217;),</td>
<td>*</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>TOVAR=&#8217;varnamep&#8217;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="toaddr">
<h2>toaddr<a class="headerlink" href="#toaddr" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the email address of the recipient (see note below).</div></blockquote>
</div>
<div class="section" id="fromaddr">
<h2>fromaddr<a class="headerlink" href="#fromaddr" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the email address of the sender (see note below).</div></blockquote>
</div>
<div class="section" id="ccaddr">
<h2>ccaddr<a class="headerlink" href="#ccaddr" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the email address(es) of the carbon-copy recipient(s) (see note
below).</div></blockquote>
</div>
<div class="section" id="bccaddr">
<h2>bccaddr<a class="headerlink" href="#bccaddr" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the email address(es) of the blind carbon-copy recipient(s) (see
note below).</div></blockquote>
</div>
<div class="section" id="bodytext">
<h2>bodytext<a class="headerlink" href="#bodytext" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>a character string to be placed in the message body (see note
below).</div></blockquote>
</div>
<div class="section" id="subjtext">
<h2>subjtext<a class="headerlink" href="#subjtext" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>a character string to be placed in the message subject line (see
note below).</div></blockquote>
</div>
<div class="section" id="charset">
<h2>charset<a class="headerlink" href="#charset" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the character set name to be included in the SMTP Content-type
header (see note below). For example, ISO-8859-15</div></blockquote>
</div>
<div class="section" id="id298">
<h2>header<a class="headerlink" href="#id298" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>additional SMTP headers to be inserted in the message. Multiple
headers may be inserted by specifying more than one HEADER
parameter.</div></blockquote>
</div>
<div class="section" id="id299">
<h2>varname<a class="headerlink" href="#id299" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the VIRTEL variable which contains data to be written as
an attached file. Multiple files may be attached by specifying more
than one FILE-OUT parameter.</div></blockquote>
</div>
<div class="section" id="id300">
<h2>filename<a class="headerlink" href="#id300" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the attached file.</div></blockquote>
</div>
<div class="section" id="filetype">
<h2>filetype<a class="headerlink" href="#filetype" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the file type to be sent in the Content-type mime header of the
attached file. For example text/plain, application/ x-tar, etc.</div></blockquote>
</div>
<div class="section" id="disp">
<h2>disp<a class="headerlink" href="#disp" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the Content-Disposition of the attached file. Possible values are
inline and attachment. This is an optional subparameter and its
default value is attachment.</div></blockquote>
</div>
<div class="section" id="altvar">
<h2>altvar<a class="headerlink" href="#altvar" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the VIRTEL variable which contains data to be written as
an alternate text file. When the ALTERNATE- TEXT parameter is
specified, the generated email will be structured as a
multipart/alternative message, and the bodytext specified in the
TEXT parameter will become a file with content type text/plain</div></blockquote>
</div>
<div class="section" id="altfn">
<h2>altfn<a class="headerlink" href="#altfn" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the alternate text file.</div></blockquote>
</div>
<div class="section" id="altft">
<h2>altft<a class="headerlink" href="#altft" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the file type of the alternate text file, usually text/html</div></blockquote>
</div>
<div class="section" id="altdp">
<h2>altdp<a class="headerlink" href="#altdp" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the Content-Disposition of the alternate text file, usually inline.</div></blockquote>
</div>
<div class="section" id="id301">
<h2>varnamep<a class="headerlink" href="#id301" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>the name of the VIRTEL variable which will contain the parameter
list.</p>
<p>Note: If the field begins with “*” then it is treated as the name
of a variable.</p>
<p>In this example, the variable DESTADDR contains the value of the TO
parameter.</p>
<p>This instruction allows to execute a SUBROUTINE scenario before
continuing in sequence.</p>
<p>It may be used in any scenario. A subroutine may contains a PERFORM$
instruction to call another subroutine up to 3 levels. For example,
main scenario may call level_1 subroutine scenario, which may call
level_2 subroutine scenario, which may call level_3 subroutine
scenario, but level_3 connot call level_4 subroutine scenario.</p>
</div></blockquote>
</div>
<div class="section" id="id302">
<h2>mylabel<a class="headerlink" href="#id302" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Specifies the subroutine scenario label to be performed.</p>
<p>HEre is a sample of the usage of PERFORM$ and LABEL$ instructions.</p>
<p>PERFORM SCREENS APPL=PERFORM,EXEC=NO</p>
<p>* SCENARIO TO TEST PERFORM$ AND SCENARIO SUBROUTINE</p>
<p>*</p>
<p>SCENARIO INITIAL</p>
<p>*</p>
<p>ERROR$ 0,&#8217;Level 0&#8217; PERFORM$ LEVEL1</p>
<p>ERROR$ 0,&#8217;Level 0&#8217; GOTO$ FIN</p>
<p>FIN LABEL$ SCENARIO END</p>
<p>*</p>
<p>LEVEL1 SCENARIO SUBROUTINE</p>
<p>ERROR$ 0,&#8217;Level 1&#8217; PERFORM$ LEVEL2</p>
<p>ERROR$ 0,&#8217;Level 1&#8217;</p>
<p>IF$ EXISTS-VARIABLE,&#8217;TOTO&#8217;,THEN=FIN,ELSE=PASFIN PASFIN LABEL$</p>
<p>GOTO$ FIN</p>
<p>FIN LABEL$ SCENARIO END</p>
<p>*</p>
<p>LEVEL2 SCENARIO SUBROUTINE</p>
<p>ERROR$ 0,&#8217;Level 2&#8217; PERFORM$ LEVEL3</p>
<p>ERROR$ 0,&#8217;Level 2&#8217;</p>
<p>ETIQ CASE$ (1,1,8),(EQ,&#8217;TOTO&#8217;,ET1),(EQ,&#8217;TITI&#8217;,ET2), *</p>
<p>(GE,&#8217;YYYY&#8217;,ET4),(LE,&#8217;ZZZ&#8217;,ET5), *</p>
<p>(EQ,VARIABLE,&#8217;VVVV&#8217;,ET6), *</p>
<p>(EQ,&#8217;*VVVV&#8217;,ET6), *</p>
<p>(EQ,STRING,&#8217;SSSS&#8217;,ET7), *</p>
<p>(BEGIN,&#8217;XXXX&#8217;,ET3), *</p>
<p>(CONTAINS,&#8217;XXXX&#8217;,ET3), *</p>
<p>ELSE=ET6</p>
<p>ET1 LABEL$</p>
<p>ET2 LABEL$</p>
<p>ET3 LABEL$</p>
<p>ET4 LABEL$</p>
<p>ET5 LABEL$</p>
<p>This instruction allows a scenario to delete values from VIRTEL
table variables.</p>
</div></blockquote>
</div>
<div class="section" id="all-values-of">
<h2>ALL-VALUES-OF<a class="headerlink" href="#all-values-of" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>indicates that all values of the table variable are to be deleted.</div></blockquote>
</div>
<div class="section" id="first-value-of">
<h2>FIRST-VALUE-OF<a class="headerlink" href="#first-value-of" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>indicates that the first value of a table variable is to be deleted.
If the variable contains only one value, then the variable is
deleted entirely.</div></blockquote>
</div>
<div class="section" id="id303">
<h2>varname<a class="headerlink" href="#id303" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>the name of the VIRTEL variable.</p>
<p>POP$ VAR=&#8217;varname&#8217; is equivalent to POP$
FIRST-VALUE-OF,VAR=&#8217;varname&#8217;</p>
<p>This instruction terminates a subroutine called by <a class="reference external" href="#_bookmark204">a “MAP$
EXECUTE”, page 177</a> instruction.</p>
<p>This instruction allows a scenario to construct the response to an
input request.</p>
<p>Sends the contents of a VIRTEL variable as the response to an HTTP
request.</p>
</div></blockquote>
</div>
<div class="section" id="id304">
<h2>varname<a class="headerlink" href="#id304" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the VIRTEL variable which contains the response data.</div></blockquote>
</div>
<div class="section" id="id305">
<h2>filetype<a class="headerlink" href="#id305" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the file type to be sent in the Content-Type HTTP header. Typical
values are text/plain, text/html, and text/xml</div></blockquote>
</div>
<div class="section" id="exphdr">
<h2>exphdr<a class="headerlink" href="#exphdr" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><strong>EXPIRES=IMMEDIATELY</strong></p>
<p>specifies that the response should not be kept in a cache (this is
the default value)</p>
</div></blockquote>
</div>
<div class="section" id="expires-endofday">
<h2>EXPIRES=ENDOFDAY<a class="headerlink" href="#expires-endofday" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>specifies that the request result can be kept in cache until end of
day</p>
<p>The SEND$ AS-ANSWER instruction is intended for use with files which
can be displayed directly by the browser (text, html, xml). For
other types of file, which are intended to be saved on the user’s
hard drive, use the SEND$ AS-FILE instruction instead.</p>
<p>If the line type is not HTTP, the SEND$ AS-ANSWER and SEND$ AS-FILE
instructions are processed as <a class="reference external" href="#_bookmark223">“SEND$ VARIABLE-</a>
<a class="reference external" href="#_bookmark223">TO-LINE”, page 188</a> with the LINE parameter set
to the line on which the scenario is running.</p>
<p>Sends the contents of a VIRTEL variable as an attached file in
response to an HTTP request. Unlike the SEND$ AS- ANSWER
instruction, the response includes a Content-Disposition: Attachment
header, which means that the browser displays a “Save As” dialog box
instead of attempting to display the file in the browser window.</p>
</div></blockquote>
</div>
<div class="section" id="id306">
<h2>varname<a class="headerlink" href="#id306" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the VIRTEL variable which contains the file.</div></blockquote>
</div>
<div class="section" id="id307">
<h2>filetype<a class="headerlink" href="#id307" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the file type to be sent in the Content-Type HTTP header. This
parameter may be specified as a literal, or as &#8216;*varname&#8217; where
varname is the name of a VIRTEL variable whose value is the
filetype. Examples of typical file types are application/pdf,
application/x-tar</div></blockquote>
</div>
<div class="section" id="id308">
<h2>filename<a class="headerlink" href="#id308" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>the file name to be included in the Content-Disposition HTTP header.
This parameter may be specified as a literal, or as &#8216;*varname&#8217;
where varname is the name of a VIRTEL variable whose value is the
filename.</p>
<p>Sends an outbound message to a VIRTEL line. The name of the
destination line is specified indirectly through a VIRTEL
transaction. The SEND$ TO instruction must be preceded by <a class="reference external" href="#_bookmark209">an
“OPTION$”, page 180</a> instruction which sets up the
parameters for the outbound message according to the line type.</p>
</div></blockquote>
</div>
<div class="section" id="id309">
<h2>tranname<a class="headerlink" href="#id309" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the external name of a VIRTEL transaction defined under the entry
point applicable to this scenario. In the transaction definition,
the “Application type” field must be 5 and the “Application” field
must be the internal or external name of a VIRTEL line.</div></blockquote>
</div>
<div class="section" id="id310">
<h2>varnamep<a class="headerlink" href="#id310" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the VIRTEL variable which contains the parameter list.
This variable must have been created by a previous OPTION$
instruction.</div></blockquote>
</div>
<div class="section" id="errlabel">
<h2>errlabel<a class="headerlink" href="#errlabel" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>A branch will be made to this label if the message cannot be sent to
the requested line.</p>
<p>Sends an outbound message on the specified line. SEND$ TO-LINE is
identical to SEND$ TO except that the name of the line is specified
directly in the scenario instead of via a transaction. The SEND$
TO-LINE instruction must be preceded by <a class="reference external" href="#_bookmark209">an “OPTION$”, page
180</a> instruction which sets up the parameters for
the outbound message according to the line type.</p>
</div></blockquote>
</div>
<div class="section" id="linename">
<h2>linename<a class="headerlink" href="#linename" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the VIRTEL line on which the message is to be sent. This
may be the internal or external name of a line defined in the VIRTEL
configuration.</div></blockquote>
</div>
<div class="section" id="id311">
<h2>varnamep<a class="headerlink" href="#id311" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the VIRTEL variable which contains the parameter list.
This variable must have been created by a previous OPTION$
instruction.</div></blockquote>
</div>
<div class="section" id="id312">
<h2>errlabel<a class="headerlink" href="#id312" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>A branch will be made to this label if the message cannot be sent to
the requested line.</p>
<p>Sends the contents of the specified variable as an outbound message
on a VIRTEL line. The name of the destination line is specified
indirectly through a VIRTEL transaction. A SEND$ VARIABLE-TO
instruction is equivalent to an <a class="reference external" href="#_bookmark209">“OPTION$ instructions”, page
180</a> instruction followed by a SEND$ TO
instruction in the case where OPTION$ specifies only a variable
name.</p>
</div></blockquote>
</div>
<div class="section" id="id313">
<h2>tranname<a class="headerlink" href="#id313" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the external name of a VIRTEL transaction defined under the entry
point applicable to this scenario. In the transaction definition,
the “Application type” field must be 5 and the “Application” field
must be the internal or external name of a VIRTEL line.</div></blockquote>
</div>
<div class="section" id="id314">
<h2>varname<a class="headerlink" href="#id314" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the VIRTEL variable which contains data to be written to
the line.</div></blockquote>
</div>
<div class="section" id="id315">
<h2>errlabel<a class="headerlink" href="#id315" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>A branch will be made to this label if the message cannot be sent to
the requested line.</p>
<p>Note: when an input scenario sends a variable to a VIRPASS line, the
response from the VIRPASS line is passed to the output scenario in
the $VIRPASS$ variable.</p>
<p>Sends the contents of the specified variable as an outbound message
on the specified VIRTEL line. SEND$ VARIABLE- TO-LINE is identical
to SEND$ VARIABLE-TO except that the name of the line is specified
directly in the scenario instead of via a transaction. A SEND$
VARIABLE-TO-LINE instruction is equivalent to <a class="reference external" href="#_bookmark209">an “OPTION$”, page
180</a> instruction followed by a SEND$ TO-LINE
instruction in the case where OPTION$ specifies only a variable
name.</p>
</div></blockquote>
</div>
<div class="section" id="id316">
<h2>varname<a class="headerlink" href="#id316" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the VIRTEL variable which contains data to be written to
the line.</div></blockquote>
</div>
<div class="section" id="id317">
<h2>linename<a class="headerlink" href="#id317" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the VIRTEL line on which the message is to be sent. This
may be the internal or external name of a line defined in the VIRTEL
configuration.</div></blockquote>
</div>
<div class="section" id="id318">
<h2>errlabel<a class="headerlink" href="#id318" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>A branch will be made to this label if the message cannot be sent to
the requested line.</p>
<p>This instruction allows various parameters to be set.</p>
<p>The SET$ ENCODING instruction allows a scenario specify the default
encoding for subsequent pages sent to the terminal, and the encoding
of subsequent URLs for this session.</p>
</div></blockquote>
</div>
<div class="section" id="utf-8">
<h2>UTF-8<a class="headerlink" href="#utf-8" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>specifies that the terminal will be placed in UTF-8 mode.</div></blockquote>
</div>
<div class="section" id="id319">
<h2>charset<a class="headerlink" href="#id319" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>specifies the name of the UTF-8 translation table to be used. Refer
to the DEFUTF8 parameter in the section “Parameters of the VIRTCT”
in the VIRTEL Installation Guide for a list of valid translation
table names. If charset is not specified, the value of the DEFUTF8
parameter in the VIRTCT is used.</div></blockquote>
</div>
<div class="section" id="iso-for-country">
<h2>ISO-FOR-COUNTRY<a class="headerlink" href="#iso-for-country" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>specifies that the terminal will be placed in ISO mode.</div></blockquote>
</div>
<div class="section" id="country">
<h2>country<a class="headerlink" href="#country" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>specifies the name of the ISO translation table to be used. Refer to
the <a class="reference external" href="#_bookmark55">“SET-COUNTRY-CODE”, page 55</a> for a list of
valid country names. If country is not specified, the value of the
COUNTRY parameter in the VIRTCT is used.</p>
<p>By default, VIRTEL expects query parameters in the URL to be encoded
in the same character set as the last page sent to the user. For the
first URL of a session, where no page has yet been sent to the user,
VIRTEL assumes the ISO encoding for the default country. The SET$
ENCODING instruction allows a scenario to override this default.</p>
<p>The following example shows part of an input scenario. The scenario
allows the user to override the default input encoding for query
parameters by specifying either IE=UTF-8 or IE=ISO as an additional
parameter of the URL.</p>
<p>See also th<a class="reference external" href="#_bookmark232">e “SET$ URL-ENCODING”, page 191</a>.</p>
<p>Indicates the name of the page template to be used for the current
3270 screen and all subsequent screens. This instruction has the
same effect as the HOST4WEB command S GLOBAL PAGE.</p>
<p>This instruction is similar to SET$ PAGE except that the name of the
page template is contained in a VIRTEL variable.</p>
</div></blockquote>
</div>
<div class="section" id="id320">
<h2>varname<a class="headerlink" href="#id320" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the VIRTEL variable which contains the page name.
Trailing blanks are removed.</div></blockquote>
</div>
<div class="section" id="suffix">
<h2>suffix<a class="headerlink" href="#suffix" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>a character string to be appended to the page name.</p>
<p>Example:</p>
<p>In this example, if row 2 column 12 of the 3270 screen contains the
characters “MAPъъ” (where ъ represents a blank) then the page name
will be set to “MAP.html”</p>
<p>Allows a running scenario to reduce its priority in order to limit
its CPU consumption.</p>
</div></blockquote>
</div>
<div class="section" id="level">
<h2>level<a class="headerlink" href="#level" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>specifies the priority to be assigned to the scenario. The following
values may be specified:</div></blockquote>
</div>
<div class="section" id="low">
<h2>LOW<a class="headerlink" href="#low" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the scenario runs at low priority</div></blockquote>
</div>
<div class="section" id="medium">
<h2>MEDIUM<a class="headerlink" href="#medium" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the scenario runs at medium priority</div></blockquote>
</div>
<div class="section" id="high">
<h2>HIGH<a class="headerlink" href="#high" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>the scenario runs at high priority. This is the default priority
assigned to a scenario if no SET$ PRIORITY instruction is executed.</p>
<p>Allows an IDENTIFICATION scenario to sign on to the security
manager.</p>
</div></blockquote>
</div>
<div class="section" id="id321">
<h2>userid<a class="headerlink" href="#id321" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The user name.</div></blockquote>
</div>
<div class="section" id="id322">
<h2>password<a class="headerlink" href="#id322" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The user’s current password.</div></blockquote>
</div>
<div class="section" id="newpassword">
<h2>newpassword<a class="headerlink" href="#newpassword" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The new password, if the user’s current password is to be changed.</div></blockquote>
</div>
<div class="section" id="id323">
<h2>retvar<a class="headerlink" href="#id323" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The name of a VIRTEL variable into which the security manager return
code will be stored. The return code is stored as a decimal string
(for example, &#8216;0&#8217;).</p>
<p>The user name and password fields may be specified as a string
constant (not recommended), or as the name of a VIRTEL variable
preceded by an asterisk. The retvar variable name is not preceded by
an asterisk.</p>
<p>Indicates the name of the page template to be used for the current
3270 screen (but not for subsequent screens). This instruction has
the same effect as the HOST4WEB command S PAGE.</p>
<p>Allows an IDENTIFICATION scenario to select the transaction which
will be executed.</p>
</div></blockquote>
</div>
<div class="section" id="id324">
<h2>tranname<a class="headerlink" href="#id324" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The external name of the transaction to be executed.</p>
<p>The SET$ URL-ENCODING instruction is similar to the SET$ ENCODING
instruction, except that SET$ URL-ENCODING applies only to URLs
received from the terminal, without affecting the default encoding
for pages sent to the terminal.</p>
<p>Refer t<a class="reference external" href="#_bookmark225">o “SET$ ENCODING”, page 189</a> for a
description of the parameters.</p>
<p>The SET$ URL-ENCODING instruction can be used in an identification
scenario to specify the encoding for the first URL of a session,
where no page has yet been sent to the user. If the encoding is not
set by a scenario, VIRTEL assumes that the first URL of a session is
encoded using the ISO encoding for the default country.</p>
<p>The TOVAR$ instruction assists in the generation of XML from a
fixed-format data area known as a commarea. The TOVAR$ instruction
works in conjunction with the MAP$ instruction, which describes the
format of the commarea and its relation to the XML datastream.</p>
<p>Whereas the MAP$ instruction allows the XML stream to be converted
into commarea format, the TOVAR$ instruction uses the MAP$
instructions to perform the reverse operation (“commarea-to-output”
conversion). In other words, it takes a commarea as input and
generates a series of VIRTEL variables, which, with the aid of a
suitable page template, can be used to generate XML. Se<a class="reference external" href="#_bookmark247">e “VIRTEL
as an XML parser/generator”, page 212</a>.</p>
<p>The input commarea is specified according to one of the several
formats of the TOVAR$ instruction, as shown in the following
paragraphs.</p>
<p>The TOVAR$ FROM-FIELD instruction requests VIRTEL to generate a set
of VIRTEL variables from an input commarea. The input commarea is
obtained from an HTML form field in the incoming HTTP request. The
TOVAR$ FROM-FIELD instruction is normally contained in an INITIAL
scenario.</p>
</div></blockquote>
</div>
<div class="section" id="id325">
<h2>groupname<a class="headerlink" href="#id325" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The label is required. It specifies the name of the input commarea.
It must match the label on a preceding MAP$ BEGIN instruction.</div></blockquote>
</div>
<div class="section" id="id326">
<h2>fieldname<a class="headerlink" href="#id326" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The name of the HTML form field which contains the input commarea
data.</p>
<p>The TOVAR$ FROM-INPUT instruction requests VIRTEL to generate a set
of VIRTEL variables from an input commarea. The input commarea is
obtained from the data area of the incoming HTTP request. The TOVAR$
FROM-INPUT instruction is normally contained in an INITIAL scenario.</p>
</div></blockquote>
</div>
<div class="section" id="id327">
<h2>groupname<a class="headerlink" href="#id327" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The label is required. It specifies the name of the input commarea.
It must match the label on a preceding MAP$ BEGIN instruction.</p>
<p>Note: TOVAR$ FROM-INPUT with a FIELD parameter is accepted and
treated as TOVAR$ FROM-FIELD</p>
<p>The TOVAR$ FROM-FIELD and TOVAR$ FROM-INPUT instructions both obtain
their data from an incoming HTTP request. The HTTP request may use
either via the GET method (where the input data is appended to the
URL) or the POST method (where the input data is contained in the
request body). The difference between the two instructions is that
TOVAR$ FROM-INPUT treats the entire data area as commarea data
without any translation, whereas TOVAR$ FROM-FIELD expects the data
to be in the format fieldname=commareadata where commareadata is
interpreted as URL-encoded data (a “+” sign represents a space, and
“%xx” represents the hexadecimal encoding of an ASCII</p>
<p>character). TOVAR$ FROM-FIELD is preferred when using the GET
method, because certain characters cannot be included in a URL
without using URL-encoding.</p>
<p>The TOVAR$ FROM-VARIABLE instruction requests VIRTEL to generate a
set of VIRTEL variables from an input commarea. The input commarea
is contained in a VIRTEL variable. The TOVAR$ FROM-VARIABLE
instruction is normally contained in an OUTPUT scenario.</p>
</div></blockquote>
</div>
<div class="section" id="id328">
<h2>groupname<a class="headerlink" href="#id328" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The label is required. It specifies the name of the input commarea.
It must match the label on a preceding MAP$ BEGIN instruction.</div></blockquote>
</div>
<div class="section" id="id329">
<h2>varname<a class="headerlink" href="#id329" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The name of the VIRTEL variable which contains the input commarea
data.</p>
<p>The VIRSV$ instruction allows a service program to be called from a
scenario. A service program is an external program which is not part
of VIRTEL but which executes in the VIRTEL address space. The VIRSV
service request manager dispatches work to service programs. Refer
to the document Using VIRSV for details of writing service programs
which execute under the control of VIRSV.</p>
</div></blockquote>
</div>
<div class="section" id="call">
<h2>CALL<a class="headerlink" href="#call" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Indicates that a new instance of the service program will be created
for each request.</div></blockquote>
</div>
<div class="section" id="call-reuse">
<h2>CALL-REUSE<a class="headerlink" href="#call-reuse" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Indicates that the request will be routed to an existing instance of
the service program, if one is available. Otherwise a new instance
of the service program will be started to process this request,
after which the service program will remain active and available to
process further requests.</div></blockquote>
</div>
<div class="section" id="transaction">
<h2>TRANSACTION<a class="headerlink" href="#transaction" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Indicates a call to the service program which is part of a VIRSV
transaction.</div></blockquote>
</div>
<div class="section" id="servname">
<h2>servname<a class="headerlink" href="#servname" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The name assigned to this service. The VIRSV service request manager
uses this name to identify the request queue which will process this
service request. Choose a unique service name for each service
program. If more than one scenario calls the same service program,
the same service name can be used by each scenario, and in this case
the scenarios will all share the same request queue. Alternatively,
each scenario can specify a different service name, in which case
there will be an independent request queue for each scenario. The
service name must consist of at least 6 alphanumeric characters and
must be in quotes.</div></blockquote>
</div>
<div class="section" id="progname">
<h2>progname<a class="headerlink" href="#progname" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The name of the service program to be called. The program name must
be in quotes.</div></blockquote>
</div>
<div class="section" id="id330">
<h2>option<a class="headerlink" href="#id330" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>One or more of the following options may be specified:</div></blockquote>
</div>
<div class="section" id="close">
<h2>CLOSE<a class="headerlink" href="#close" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>for a transaction call, specifies that the transaction is to be
closed after processing this VIRSV$ instruction.</div></blockquote>
</div>
<div class="section" id="traceopt">
<h2>traceopt<a class="headerlink" href="#traceopt" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies activation or deactivation of the VIRSV trace facility.
One or more of the following options may be specified:</div></blockquote>
</div>
<div class="section" id="application-trace-or-no-application-trace">
<h2>APPLICATION-TRACE or NO-APPLICATION-TRACE<a class="headerlink" href="#application-trace-or-no-application-trace" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>activates or deactivates tracing by the service program (if the
service program supports this type of trace).</div></blockquote>
</div>
<div class="section" id="calls-trace-or-no-calls-trace">
<h2>CALLS-TRACE or NO-CALLS-TRACE<a class="headerlink" href="#calls-trace-or-no-calls-trace" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>activates or deactivates tracing of the requests and responses
passed between VIRTEL and VIRSV.</div></blockquote>
</div>
<div class="section" id="dispatch-trace-or-no-dispatch-trace">
<h2>DISPATCH-TRACE or NO-DISPATCH-TRACE<a class="headerlink" href="#dispatch-trace-or-no-dispatch-trace" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>activates or deactivates tracing of the VIRSV request queue and task
dispatcher.</div></blockquote>
</div>
<div class="section" id="memory-trace-or-no-memory-trace">
<h2>MEMORY-TRACE or NO-MEMORY-TRACE<a class="headerlink" href="#memory-trace-or-no-memory-trace" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>activates or deactivates tracing of the memory blocks used by VIRSV
and the service program.</p>
<p>The default value of each trace option is determined by VIRSV. The
trace is written to the VSVTRACE file of the VIRTEL started task.</p>
</div></blockquote>
</div>
<div class="section" id="id331">
<h2>errlabel<a class="headerlink" href="#id331" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>A branch will be made to this label if the service cannot be called,
or if VIRSV or the service program returned a non- zero return code.</div></blockquote>
</div>
<div class="section" id="id332">
<h2>count<a class="headerlink" href="#id332" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The maximum number of concurrent instances of the service program
which can be started for this service name. If there are already
count instances of the requested service program active and in-use
under this service name, the scenario will wait until an instance
becomes available. The default value is 1. This parameter applies
only if the call type is CALL-REUSE.</p>
<p>The remaining fields indicate parameters passed to the service
program. Any number of parameters may be specified in any order. For
each parameter, VIRTEL places either one or two fullwords into the
request input area. Depending on the parameter type, these fullwords
may contain a binary value, an address, or a pair of addresses, as
described below. The address of the request input area is passed to
the service program in the LIST-ADR-REQU field of the LIST-POINTER
structure built by the CALL VSVPSYNC routine.</p>
</div></blockquote>
</div>
<div class="section" id="number-n">
<h2>(NUMBER,&#8217;n&#8217;)<a class="headerlink" href="#number-n" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Indicates a parameter passed to the service program. n is a decimal
number whose value is converted to a 32-bit binary integer and
stored in the request input area. The number n must be placed in
quotes.</div></blockquote>
</div>
<div class="section" id="pointer-to-number-n">
<h2>(POINTER-TO-NUMBER,&#8217;n&#8217;)<a class="headerlink" href="#pointer-to-number-n" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Indicates a parameter passed to the service program. n is a decimal
number whose value is converted to a 32-bit binary integer. A
fullword containing the address of this 32-bit value is stored in
the request input area. The number n must be placed in quotes.</div></blockquote>
</div>
<div class="section" id="stringz-cc-cc">
<h2>(STRINGZ,&#8217;cc..cc&#8217;)<a class="headerlink" href="#stringz-cc-cc" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Indicates a parameter passed to the service program. A terminating
character (X&#8216;00&#8217;) is appended to the character string cc..cc, and a
fullword containing the address of the string is stored in the
request input area. The string must be placed in quotes.</div></blockquote>
</div>
<div class="section" id="stringz-from-variable-varname">
<h2>(STRINGZ-FROM-VARIABLE,&#8217;varname&#8217;)<a class="headerlink" href="#stringz-from-variable-varname" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Indicates a parameter passed to the service program. The value of
the VIRTEL variable varname is copied to a character string and a
terminating character (X&#8216;00&#8217;) is appended. A fullword containing the
address of this null- terminated string is stored in the request
input area. The variable name must be placed in quotes.</div></blockquote>
</div>
<div class="section" id="in-variable-varname-len">
<h2>(IN-VARIABLE,&#8217;varname&#8217;,len)<a class="headerlink" href="#in-variable-varname-len" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Indicates a parameter passed to the service program. Two fullwords
are stored in the request input area: the first contains the address
of the value of the VIRTEL variable varname and the second contains
the address of a fullword containing the length of this value. The
len parameter is ignored unless it contains the special value *n
(see below). The variable name must be placed in quotes.</p>
<p>For a scenario which processes an inbound request on an MQ line, the
special variable name &#8216;$INFILE$&#8217; denotes the contents of the input
request.</p>
</div></blockquote>
</div>
<div class="section" id="out-variable-varname-len">
<h2>(OUT-VARIABLE,&#8217;varname&#8217;,len)<a class="headerlink" href="#out-variable-varname-len" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Indicates an output parameter returned by the service program.
VIRTEL allocates a buffer of length len and stores two fullwords in
the request input area: the first contains the address of the buffer
and the second contains the address of a fullword which contains the
buffer length. The service program places the output value in the
buffer and updates the length fullword. VIRTEL copies the contents
of the buffer into the VIRTEL variable varname after the service
program returns. The len parameter contains the desired buffer
length (nn, nnK, or nnM), or the special value</p>
<p>*n (see below). The variable name must be placed in quotes.</p>
<p>A special form of the len parameter may be used to allocate output
buffers whose length varies depending on the length of an input
variable. This is done by specifying the len parameter in the form
*n where n is a decimal number. When the len parameter of an input
variable is specified as *n this means that the actual length of
the variable is divided by n to obtain the unit of measurement.
Subsequent output variables may then specify length *m where m is a
number. This means that the buffer length for that output variable
will be m times the unit of measurement.</p>
<p>For example:</p>
<p>In this example, assume that the variable $INFILE$ has length 4500
bytes. Because its len parameter is specified as *3, VIRTEL
calculates the unit of measurement as 1500. The output variable
HEADER has len set to *1 which means that the buffer length
allocated is one unit, or 1500 bytes. The output variable BODY has
len *3 which means that its buffer length is 3 units, or 4500
bytes. By contrast, the output variable SIGNATURE has a fixed buffer
length of 4 bytes.</p>
<p>If more than one input variable specifies a len parameter in the
format *n then the largest value is taken as the unit of
measurement.</p>
<p>Many 3270 applications consist of fields which can take only one of
a restricted set of values. In this case, it is possible to offer
the end user a list of allowable values by requesting VIRTEL to
generate the field in the form of a SELECT rather than in the form
of a normal field. This type of modification is performed by the
FIELD$ instruction.</p>
<p><em>HTTP presentation module: List of values for input field</em></p>
<p><em>HTTP presentation module: Clickable fields using DECLARE$</em></p>
<p>By using a combination of an output scenario and a JavaScript
application, date fields on the 3270 screen can be transformed into
HTML fields on which a small calendar window appears when the user
clicks on the field. The user chooses the desired date from the
calendar, and VIRTEL inserts the date in the correct format into the
3270 input field.</p>
<p>An example scenario for declaring date fields is shown below. As
usual, the name of this scenario must be specified in the “Output
Scenario” field of the VIRTEL transaction which calls the host
application.</p>
<p>In this example, the correct screen is first identified by using its
screen identifier “DEM275” in row 1 column 2, then three calendar
fields are declared at row 8 column 28, row 8 column 64, and row 9
column 28. For the purposes of illustration, a different date format
is declared for each field:</p>
<p><em>HTTP presentation module: Defining calendar fields</em></p>
<p>In the DATEFMT parameter:</p>
</div></blockquote>
</div>
<div class="section" id="y">
<h2>%Y<a class="headerlink" href="#y" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>represents the year (4 digits)</div></blockquote>
</div>
<div class="section" id="id333">
<h2>%y<a class="headerlink" href="#id333" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>represents the year (2 digits)</div></blockquote>
</div>
<div class="section" id="id334">
<h2>%d<a class="headerlink" href="#id334" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>represents the day of the month (01-31)</div></blockquote>
</div>
<div class="section" id="id335">
<h2>%e<a class="headerlink" href="#id335" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>represents the day of the month (1-31)</div></blockquote>
</div>
<div class="section" id="m">
<h2>%m<a class="headerlink" href="#m" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>represents the month (01-12)</div></blockquote>
</div>
<div class="section" id="id336">
<h2>%b<a class="headerlink" href="#id336" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>represents the abbreviated month name (Jan, Feb, etc)</p>
<p>Refer to the Date.prototype.print function in the calendar.js file
for details of all of the allowable date formats.</p>
<p>The CALENDR$ macro generates two VIRTEL table variables: CALENDAR
and DATEFMT. The CALENDAR variable contains the VIRTEL-generated
names of the 3270 fields which are to be processed as calendar
fields. The DATEFMT variable contains the corresponding date formats
for each field.</p>
<p>The page template must include logic to call the calendar
application whenever the output screen has declared calendar fields.
The extract below shows the necessary statements which are included
in the VIRTEL sample page WEB2VIRT.htm:</p>
<p><em>HTML page template for calendar fields</em></p>
<p>VIRTEL Suggest is a facility which presents lists of suggested
values for specific 3270 fields. The suggested values are presented
in a drop-down list which appears automatically when the user starts
typing into a field. The list modifies itself dynamically as the
user types. At any time the user can select one of the suggested
values by clicking or moving the cursor to the desired value.</p>
<p>Fields eligible for processing by VIRTEL Suggest are identified by
means of an output scenario containing SUGGEST$ macros. Each
SUGGEST$ macro identifies a “suggest” field and indicates the data
source for the list of suggested values. The data source may be a
DB2 table, a FLECS application1, or a user-written CICS transaction.</p>
<p>An example scenario for declaring a “suggest” field is shown below.
As usual, the name of this scenario must be specified in the “Output
Scenario” field of the VIRTEL transaction which calls the host
application.</p>
<p>In this example, the correct screen is first identified by using its
screen identifier “VIR0091” in row 1 column 2, then a VIRTEL Suggest
field is declared at row 8 column 21. The data source for this field
is column “LASTNAME” in the DB2 table named “DSN8810.EMP”:</p>
<p><em>HTTP presentation module: Defining VIRTEL Suggest fields</em></p>
<p>The parameters of the SUGGEST$ macro instruction are as follows:</p>
</div></blockquote>
</div>
<div class="section" id="tran-name">
<h2>TRAN=&#8217;name&#8217;<a class="headerlink" href="#tran-name" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the VIRTEL transaction which provides the link to the
data source for the field. The following transactions are supplied
as standard in the VIRTEL entry point WEB2HOST:</div></blockquote>
</div>
<div class="section" id="suggestd">
<h2>suggestD<a class="headerlink" href="#suggestd" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Data source is a column in a DB2 table</div></blockquote>
</div>
<div class="section" id="suggestf">
<h2>suggestF<a class="headerlink" href="#suggestf" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Data source is a field in a FLECS application (via CICS)</div></blockquote>
</div>
<div class="section" id="suggestv">
<h2>suggestV<a class="headerlink" href="#suggestv" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Data source is a field in a FLECS application (via VIRTEL)</div></blockquote>
</div>
<div class="section" id="table-name">
<h2>TABLE=&#8217;name&#8217;<a class="headerlink" href="#table-name" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the DB2 table, or the name of the FLECS application</div></blockquote>
</div>
<div class="section" id="field-name">
<h2>FIELD=&#8217;name&#8217;<a class="headerlink" href="#field-name" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the name of the DB2 column, or the name of the FLECS field</div></blockquote>
</div>
<div class="section" id="screen-row-col">
<h2>SCREEN=(row,col)<a class="headerlink" href="#screen-row-col" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>the screen position (row, column) of the field on the 3270 screen</p>
<p>A SUGGEST$ instruction containing only TRAN and/or TABLE parameters
may be used to set the values for subsequent SUGGEST$ instructions.
Each SUGGEST$ instruction which contains a SCREEN parameter and a
FIELD parameter generates a VIRTEL Suggest field. If the TRAN and
TABLE parameters are not specified then the values from the previous
SUGGEST$ instruction are used.</p>
<p>Before you can use the suggestD transaction, you must install the
program VDBSUGST in your CICS system with transaction code VDBS. The
JCL to compile, link, and bind this program is in member DB2COBC of
VIRTEL.SAMPLIB. You must also update the definition of the suggestD
transaction (W2H-53 in the WEB2HOST entry point) to specify the VTAM
applid of the appropriate CICS region.</p>
<p>The suggestF transaction requires the FLECS product to be installed
in your CICS system. You must also update the definition of the
suggestF transaction (W2H-51 in the WEB2HOST entry point) to specify
the VTAM applid of the CICS region in which FLECS is installed.</p>
<p>If you plan to use the suggestV transaction, you must add DD
statements to the VIRTEL started task JCL specifying the FLECS
catalog file (F20CAT) and the pointer files it references. You must
also update the VIRTCT by adding UFILEn parameters for the FLECS
catalog file and each pointer file, together with the corresponding
ACB definitions.</p>
<p>The page template must include logic to call the data source
transaction whenever the output screen has declared VIRTEL Suggest
fields. The extract below shows the necessary statements which are
included in the VIRTEL sample page WEB2VIRT.htm:</p>
<p><em>HTML page template for VIRTEL Suggest fields</em></p>
<p>The SUGGEST$ macro instruction generates four VIRTEL table
variables: SUGGEST-ELEMENT, SUGGEST-TRANSNAME, SUGGEST-TABLENAME,
SUGGEST-FIELDNAME. The first entry in each table corresponds to the
first VIRTEL Suggest field on the page, the second entry corresponds
to the second VIRTEL Suggest field on the page, and so on.</p>
<p>The majority of host applications use the 3270 protocol in a
synchronous manner, meaning that each user input (ENTER or PF key)
generates one response consisting of a 3270 screen built by a single
VTAM message. Certain host applications, however, may build a 3270
screen in two or more segments, by sending more than one VTAM
message to the terminal. Other applications may send asynchronous
updates to a 3270 screen which are not a direct result of user
input. Such applications need special handling to ensure that VIRTEL
can present the updated 3270 screen image to the user without
requiring the user to press ENTER to refresh the screen. VIRTEL
handles this situation by means of an AJAX request containing the
VerifyVirtelSession keyword (se`e “3270 Session Management”, page
16 &lt;#_bookmark11&gt;`__). By using an output scenario with a suitable
page template, the HTML page can determine whether the 3270 screen
image has been updated, and if so can dynamically refresh the data
displayed in the browser.</p>
<p>An example scenario is shown below. As usual, the name of this
scenario must be specified in the “Output Scenario” field of the
VIRTEL transaction which calls the host application. This scenario
is supplied as member SCENREFR in the VIRTEL SAMPLIB:</p>
<p><em>HTTP presentation module: 3270 auto-refresh</em></p>
<p>This example activates auto-refresh for two specific application
screens. The first screen, identified by the word “SNACONS” in row 1
column 11, is built by the application in two parts. For this
screen, the AUTOREFRESH variable is set to “ONCE” which causes the
page template to return to VIRTEL one time only to request the
second part of the screen. The second screen, identified by
“IEE612I” in row 21 column 3, is updated continuously by the
application. For this screen, the AUTOREFRESH variable is set to “2”
which causes the browser to issue an AJAX request every two seconds
to ask VIRTEL if the screen has been updated. A positive response
from VIRTEL triggers a request to refresh the screen.</p>
<p>The following table shows the permissible values for the AUTOREFRESH
variable:</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p><em>Settings for 3270 auto-refresh</em></p>
<p>The page template must include logic to process the AUTOREFRESH
variable and issue the necessary AJAX functions. The extract below
shows the necessary statements which are included in the VIRTEL
sample page WEB2VIRT.htm:</p>
<p><em>HTML page template for 3270 auto-refresh</em></p>
<p>This page supplies a default value which takes effect if no
AUTOREFRESH variable is specified by the scenario. The default value
is set to &#8216;1.2,10&#8217; which means that a refresh will occur immediately
after each screen is loaded, another refresh will occur 1.2 seconds
later, then at intervals of 2.4 seconds, 4.8 seconds, and 9.6
seconds, and finally a refresh will occur every 10 seconds
thereafter.</p>
<p>The autorefresh function may be disabled by specifying SCENAUTN in
the “Output scenario” field of the VIRTEL transaction definition.
The source code for the SCENAUTN scenario is supplied in the VIRTEL
SAMPLIB.</p>
<p>This example shows a scenario which generates a PDF output file
using the MakePDF program product via the service program VIRSVPDF.</p>
<p><em>HTTP presentation module: PDF output generation</em></p>
<p>For the purpose of this scenario, INPUT.TXT, DOCOPT.TXT and
LAYOUT.TXT are files created on a PC, then uploaded to VIRTEL as
page templates (se`e “Uploading HTML Pages”, page
67 &lt;#_bookmark77&gt;`__). The TYPE=LINEBUFFER parameters on the COPY$
statements tell VIRTEL that these files should be converted to
MakePDF “LINEBUF” format. The VIRSV$ statement calls an intermediary
service program VIRSVPDF which sets up the commarea and calls
MakePDF. Then the SEND$ statement sends back the result file to the
browser, giving it the name my.pdf.</p>
<p>The files INPUT.TXT, DOCOPT.TXT, and LAYOUT.TXT for this example are
shown below:</p>
<p><em>MakePDF INPUT.TXT file for PDF generation</em></p>
<p><em>MakePDF DOCOPT.TXT file for PDF generation</em></p>
<p><em>MakePDF LAYOUT.TXT file for PDF generation</em></p>
<p>VIRTEL Web Integration allows XML or other web services requests to
be interpreted and transformed into requests which can be processed
by legacy applications such as CICS/COBOL, with the results being
transformed back into XML format for transmission via HTTP or SMTP.</p>
<p>By using the scenario language described in section <a class="reference external" href="#_bookmark148">“Web
Modernisation VIRTEL Scenarios”, page 142</a>, legacy
transactions can be converted into Web Services.</p>
<p>By using a combination of an INITIAL scenario and a VIRTEL
transaction script, VIRTEL can transform Query parameters in an HTTP
request into a fixed-format data area for processing by a COBOL
legacy application program.</p>
<p>The HTML page shown below generates an HTTP request with Query
parameters:</p>
<p><em>HTML form for generating Query input data (GET method)</em></p>
<p>If the user enters, for example, the values “1531499136”, “05”, and
“07/01/15” in the three fields and presses the Submit button, an
HTTP request is presented to VIRTEL in the format shown below:</p>
<p><em>Example HTTP request with Query data (GET method)</em></p>
<p>Note that the “/” characters in the user’s input have been encoded
by the browser as “%2F” because Query parameters are always
transmitted in URL-encoded format in the HTTP request.</p>
<p>By changing the FORM METHOD to POST (instead of GET) in the HTML
form, the HTTP request can be presented to VIRTEL in the alternative
format shown below:</p>
<p><em>Example HTTP request with Query data (POST method)</em></p>
<p>VIRTEL considers this POST request to be identical to the GET
request presented in the previous paragraph.</p>
<p>An example INITIAL scenario for converting this Query data to
commarea format is coded in the presentation module SCENQRYI shown
below:</p>
<p><em>HTTP presentation module for Query input data</em></p>
<p>The same presentation module may be used to process both GET and
POST requests.</p>
<p>The figure below shows the 20-byte commarea generated in the VIRTEL
variable MYAREA:</p>
<p><em>Commarea generated from Query data</em></p>
<p>The HTTP requests shown in the GET and POST examples above use the
URL querydemo.htm+tranq to invoke the VIRTEL transaction shown below
(tranq is the “external name” of the transaction). The “TIOA at
logon” field contains a connection script. After signing on to CICS,
the connection script uses the &amp;/S order to process the INITIAL
scenario in the presentation module SCENQRYI. This scenario converts
the Query parameter input data into a VIRTEL variable named MYAREA.
The script then invokes a CICS transaction VQRY, passing the
contents of MYAREA as input data. The CICS transaction performs an
EXEC CICS RECEIVE to obtain the input data.</p>
</div></blockquote>
<blockquote>
<div><p><em>VIRTEL transaction definition for Query input data</em></p>
<p>By using a combination of an INITIAL scenario and a VIRTEL
transaction script, VIRTEL can transform XML input data in an HTTP
request into a fixed-format data area for processing by a COBOL
legacy application program.</p>
<p>The simplest method of sending XML data to VIRTEL is to build an
HTTP POST request containing the raw XML data in the request body.
This is the format expected by the MAP$ FROM-INPUT instruction
described 189. The figure below shows an example of an HTTP request
containing XML input data:</p>
<p><em>Example HTTP request with XML input data</em></p>
<p>An example INITIAL scenario for processing this XML input data is
coded in the presentation module SCENXMLI shown below:</p>
<p><em>HTTP presentation module for XML input data</em></p>
<p>The figure below shows the 36-byte commarea generated in the VIRTEL
variable MYAREA:</p>
<p><em>Commarea generated from XML input data</em></p>
<p>For some applications it may be more convenient to send the XML data
as part of the URL. To conform with URL syntax rules, the XML data
is embedded in an HTML text field, and blanks and other special
characters in the XML data are replaced by their corresponding
URL-encoded values (“+” signs and “%xx” sequences). This format can
be generated by means of an HTML form, as shown in the example
below:</p>
<p><em>HTML form with XML input data embedded in a text field</em></p>
<p>The HTTP request generated by the above HTML form is presented to
VIRTEL in the format shown below:</p>
<p><em>XML input data in URL-encoded format (HTTP GET method)</em></p>
<p>By changing the FORM METHOD to POST (instead of GET), the HTTP
request can be presented to VIRTEL in the alternative format shown
below:</p>
<p><em>XML input data in URL-encoded format (HTTP POST method)</em></p>
<p>Both of these request formats can be processed by a presentation
module similar to the SCENXMLI module shown previously. The only
change necessary to process URL-encoded data is that the statement
OUTAREA MAP$ FROM- INPUT must be replaced by the statement OUTAREA
MAP$ FROM-FIELD,FIELD=&#8217;MYINPUT&#8217;</p>
<p>The HTTP requests shown above use the URL
/demohttp/xmldemo.xml+tran3 to invoke the VIRTEL transaction shown
below (tran3 is the “external name” of the transaction). The “TIOA
at logon” field contains a connection script. After signing on to
CICS, the connection script uses the &amp;/S order to process the
INITIAL scenario in the presentation module SCENXMLI. This scenario
converts the XML data into a VIRTEL variable named MYAREA. The
script then invokes a CICS transaction VHLP, passing the contents of
MYAREA as input data. The CICS transaction performs an EXEC CICS
RECEIVE to obtain the input data.</p>
</div></blockquote>
<blockquote>
<div><p><em>VIRTEL transaction definition for XML input data</em></p>
<p>The figure below shows an example of XML input data containing
attributes and repeating groups of fields:</p>
<p><em>Example XML input data with attributes and repeating groups</em></p>
<p>An INITIAL scenario for processing this XML input data is coded in
the presentation module SCENXMLA shown below:</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="15%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">COMMAREA</th>
<th class="head">MAP$</th>
<th class="head">BEGIN</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td>MAP$</td>
<td>AREA,WITH=&#8217;id&#8217;,LENGTH=5</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>MAP$</td>
<td>AREA-ATTRIBUTE,VALUEOF=&#8217;date&#8217;,LENGTH=8,TYPE=ONLY9</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>MAP$</td>
<td>AREA-ATTRIBUTE,VALUEOF=&#8217;type&#8217;,LENGTH=2</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>MAP$</td>
<td>AREA-ATTRIBUTE,VALUEOF=&#8217;numreq&#8217;,LENGTH=2,TYPE=9</td>
</tr>
<tr class="row-even"><td>DETAIL</td>
<td>MAP$</td>
<td>BEGIN,WITH=&#8217;part&#8217;,OCCURS=5</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>MAP$</td>
<td>AREA-ATTRIBUTE,WITH=&#8217;key&#8217;,VALUEOF=&#8217;suffix&#8217;,</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>LENGTH=2,TYPE=9</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>MAP$</td>
<td>AREA,LENGTH=8</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>MAP$</td>
<td>AREA,WITH=&#8217;type&#8217;,LENGTH=1</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>MAP$</td>
<td>AREA,WITH=&#8217;stat&#8217;,LENGTH=1</td>
</tr>
<tr class="row-even"><td>DETAIL</td>
<td>MAP$</td>
<td>END</td>
</tr>
<tr class="row-odd"><td>COMMAREA</td>
<td>MAP$</td>
<td>END</td>
</tr>
<tr class="row-even"><td>*</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>COMMAREA</td>
<td>MAP$</td>
<td>FROM-INPUT</td>
</tr>
<tr class="row-even"><td>COMMAREA</td>
<td>MAP$</td>
<td>TO-VARIABLE,VAR=&#8217;MYCOMMAREA&#8217;</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p><em>Presentation module for XML input with attributes and repeating
groups</em></p>
<p>The figure below shows the 77-byte commarea generated in the VIRTEL
variable MYCOMMAREA:</p>
<p><em>Commarea generated from XML input with attributes and repeating
groups</em></p>
<p>This example shows how the commarea can be redefined according to
the value of a field in the XML input. In this example, the input
can be in one of two formats, depending on the value of the field
whose name is “reqtype”:</p>
<p><em>Example XML input data with redefinition of fields</em></p>
<p>An INITIAL scenario for processing this XML input data is coded in
the presentation module SCENXMLR shown below:</p>
<p><em>Presentation module for XML input with redefinition of fields</em></p>
<p>This scenario generates two commareas, which are saved in VIRTEL
variables MYHEAD and MYBODY, as shown below:</p>
<p><em>Commarea generated from XML input with redefinition of fields</em></p>
<p>By using an output scenario and a suitable page template, VIRTEL can
transform application program output into XML when the result is
sent back in the HTTP response.</p>
<p>An output scenario is used to extract data from the output 3270 data
stream of the transaction and place it into one or more table
variables. The example presentation module SCENXMLO shown below
contains an OUTPUT scenario which creates two variables, ACCTNUM and
FULLNAME, from a table of values displayed on the 3270 screen:</p>
<p><em>HTTP presentation module for XML output</em></p>
<p>Note: It is also possible for the application program to create
VIRTEL table variables directly, either by means of an <a class="reference external" href="#_bookmark272">“FAE5”, page
236</a> structured field, or via the HOST4WEB command
“SET VARIABLE”, page 0. The FAE5 structured field allows the
application to pass large amounts of raw data to VIRTEL without
being constrained by the limitations of the 3270 screen geometry.
For such “VIRTEL-aware” applications, an output scenario is not
necessary.</p>
<p>The URL in this example is /demohttp/xmldemo.xml+tran3 which
requests VIRTEL to use the page template xmldemo.xml to process the
output of the tran3 transaction. The purpose of the page template is
to convert the transaction output into XML format.</p>
<p>In the page template xmldemo.xml shown below, the output data is
obtained from the VIRTEL table variables ACCTNUM and FULLNAME which
were created either by the output scenario SCENXMLO, or directly by
the application program:</p>
<p><em>Example page template for XML output data</em></p>
<p>An application can use the VIRTEL HTTP server as an XML
parser/generator engine. A client program establishes a TCP/ IP
session with the VIRTEL HTTP server, and sends XML or commarea data
to VIRTEL in an HTTP request. VIRTEL performs conversion to or from
XML, and returns the resulting commarea or XML data to the client
program in the HTTP response.</p>
<p>It is the INITIAL scenario associated with the VIRTEL transaction
which determines whether the conversion is from XML to commarea
format, or vice versa. Conversion from XML to commarea format is
performed by a transaction whose INITIAL scenario contains a MAP$
FROM-FIELD or MAP$ FROM-INPUT instruction. Conversion from commarea
to XML format is performed by a transaction whose INITIAL scenario
contains a TOVAR$ FROM-FIELD or TOVAR$ FROM-INPUT instruction. Both
scenarios can reference a common set of MAP$ statements which
describe the relationship between the XML stream and the commarea.
In each case an appropriate page template must also be used, as
shown in the detailed examples which follow.</p>
<p>A client program running under CICS on MVS can use VIRKIX to
establish the HTTP connection, send the request, and receive the
response. The client program may send the request in either ASCII or
EBCDIC; both formats are recognized and supported by VIRTEL. Notice
the use of the special header GIVE-LENGTH-PREFIX which requests
VIRTEL to add a</p>
<p>4-byte length prefix to the HTTP response, to conform with the
format expected by VIRKIX CALL type &#8216;M&#8217;.</p>
<p>The copy member SCONVMAP shown below contains the MAP$ statements
common to both examples presented in this section. This member is
copied into each of the scenarios SCONVXML and SCONVPLA by means of
an assembler COPY statement.</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="18%" />
<col width="66%" />
<col width="6%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">CAREA</th>
<th class="head">MAP$ MAP$</th>
<th class="head"><p class="first">BEGIN</p>
<p class="last">AREA,WITH=&#8217;date&#8217;,LENGTH=8,TYPE=(ONLY9,LEFT-ALIGNED),</p>
</th>
<th class="head">*</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>FORMAT=(&#8216;9999-99-99&#8217;,9)</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>IDENT</td>
<td>MAP$</td>
<td>BEGIN,WITH=&#8217;identity&#8217;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>MAP$</td>
<td>EVENTUAL-AREA,FROM-CONSTANT,&#8216;1&#8217;,WHEN=(ELEMENT,&#8217;bic&#8217;)</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>MAP$</td>
<td>ELSETHEN-AREA,FROM-CONSTANT,&#8216;2&#8217;,WHEN=(ELEMENT,&#8217;iban&#8217;)</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>MAP$</td>
<td>ELSETHEN-AREA,FROM-CONSTANT,&#8216;3&#8217;,WHEN=(ELEMENT,&#8217;rib&#8217;)</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>MAP$</td>
<td>ELSETHEN-AREA,FROM-CONSTANT,&#8217; &#8216;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>MAP$</td>
<td>AREA,LENGTH=8</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>IDENT</td>
<td>MAP$</td>
<td>END</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>VERIF</td>
<td>MAP$</td>
<td>BEGIN,WITH=&#8217;verified&#8217;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>MAP$</td>
<td>EVENTUAL-AREA,FROM-CONSTANT,&#8216;1&#8217;,WHEN=(VALUE,&#8217;yes&#8217;)</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>MAP$</td>
<td>ELSETHEN-AREA,FROM-CONSTANT,&#8216;0&#8217;,WHEN=(VALUE,&#8217;no&#8217;)</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>MAP$</td>
<td>ELSETHEN-AREA,FROM-CONSTANT,&#8216;0&#8217;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>VERIF</td>
<td>MAP$</td>
<td>END</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>MAP$</td>
<td>AREA,WITH=&#8217;amount&#8217;,LENGTH=5,TYPE=ONLY9,</td>
<td>*</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>FORMAT=(&#8216;$999.99&#8217;,9)</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>CAREA</td>
<td>MAP$</td>
<td>END</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p><em>MAP$ statements for VIRTEL XML parser/generator</em></p>
<p>The figure below shows an example transaction definition to be used
for XML-to-commarea conversion using the VIRTEL XML parser. The
external name “tranxml” is the name referenced in the URL of the
HTTP request which calls the transaction. The special application
name $NONE$ indicates that no host application is to be called. The
/&amp;S order specified in the “TIOA at Logon” field causes the INITIAL
scenario “SCONVXML”, page 0 to be executed.</p>
<p><em>VIRTEL transaction definition for XML-to-commarea conversion</em></p>
<p>The initial scenario for XML-to-commarea conversion is shown below:</p>
<p><em>Initial scenario for XML-to-commarea conversion</em></p>
<p>An example request for XML-to-commarea conversion using the VIRTEL
XML parser is shown in the figure below:</p>
<p><em>Input request for XML-to-commarea conversion</em></p>
<p>The HTTP request shown above specifies the use of a page template
named myarea.txt which is stored in a VIRTEL directory and is shown
in the figure below. By use of this page template, the commarea
MYAREA created by the INITIAL scenario SCONVXML is inserted into the
HTTP response data:</p>
<p><em>Page template for XML-to-commarea conversion</em></p>
<p>The figure below shows the HTTP response returned by VIRTEL. The
body of the response contains the input data converted to commarea
format:</p>
<p><em>Output response from XML-to-commarea conversion</em></p>
<p>The figure below shows an example transaction definition to be used
for commarea-to-XML conversion using the VIRTEL XML generator. The
external name “trancom” is the name referenced in the URL of the
HTTP request which calls the transaction. The special application
name $NONE$ indicates that no host application is to be called. The
/&amp;S order specified in the “TIOA at Logon” field causes the INITIAL
scenario “SCONVPLA”, page 0 to be executed.</p>
<p><em>VIRTEL transaction definition for commarea-to-XML conversion</em></p>
<p>The initial scenario for commarea-to-XML conversion is shown below:</p>
<p><em>Initial scenario for commarea-to-XML conversion</em></p>
<p>An example request for commarea-to-XML conversion using the VIRTEL
XML parser is shown in the figure below:</p>
<p><em>Input request for commarea-to-XML conversion</em></p>
<p>The HTTP request shown above specifies the use of a page template
named mydata.xml which is stored in a VIRTEL directory and is shown
in the figure below. By use of this page template, the output
variables created by the TOVAR$ instruction in the INITIAL scenario
SCONVPLA are inserted into the HTTP response data:</p>
<p><em>Page template for commarea-to-XML conversion</em></p>
<p>The figure below shows the HTTP response returned by VIRTEL. The
body of the response contains the input commarea data converted to
XML format:</p>
<p><em>Output response from commarea-to-XML conversion</em></p>
<p>The MAPGEN program allows the automatic generation of scenarios from
COBOL copybooks.</p>
<p>The input to the MAPGEN program is a COBOL copybook containing data
division definitions of a commarea. The output from the MAPGEN
program may be:</p>
</div></blockquote>
<ul>
<li><p class="first">a scenario for “input-to-commarea” conversion</p>
</li>
<li><p class="first">a scenario for “commarea-to-output” conversion</p>
</li>
<li><p class="first">an optional page template to convert the generated output variables
into XML format</p>
<blockquote>
<div><p>The MAPGEN program (MAPGREX) and the JCL to execute it (MAPGJCL) are
delivered as members of the VIRTEL SAMPLIB. The start of the MAPGJCL
job is shown below:</p>
<p><em>Automatic scenario generation: MAPGJCL job</em></p>
<p>The parameters required to customize this job are coded as SET
statements at the start of the job. The meaning of the parameters is
as follows:</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="qual-yourqual-virtnnn">
<h2>QUAL=yourqual.VIRTnnn<a class="headerlink" href="#qual-yourqual-virtnnn" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Prefix of VIRTEL dataset names. This job requires access to the
SAMPLIB, LOADLIB, and SCRNAPI.MACLIB datasets. The generated
scenario is written as a load module in the LOADLIB dataset.</div></blockquote>
</div>
<div class="section" id="copylib-your-cobol-srcelib">
<h2>COPYLIB=your.cobol.srcelib<a class="headerlink" href="#copylib-your-cobol-srcelib" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Name of library containing the input copybook</div></blockquote>
</div>
<div class="section" id="member-copybook">
<h2>MEMBER=copybook<a class="headerlink" href="#member-copybook" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Member name of the input copybook in the COPYLIB library</div></blockquote>
</div>
<div class="section" id="style-apost-quote">
<h2>STYLE=APOST|QUOTE<a class="headerlink" href="#style-apost-quote" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies whether the copybook uses single or double quotation marks
to delimit strings. APOST (single quotation marks) is the default</div></blockquote>
</div>
<div class="section" id="prefix-prefix">
<h2>PREFIX=&#8217;prefix&#8217;<a class="headerlink" href="#prefix-prefix" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(optional) If specified, the prefix will be removed from the field
names in the copybook</div></blockquote>
</div>
<div class="section" id="case-lower-upper">
<h2>CASE=LOWER|UPPER<a class="headerlink" href="#case-lower-upper" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(optional) If specified, all field names in the copybook will be
converted to LOWER or UPPER case. If not specified, the case will be
preserved.</div></blockquote>
</div>
<div class="section" id="code-encoding">
<h2>CODE=encoding<a class="headerlink" href="#code-encoding" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(optional) Specifies the encoding of HTML form-field parameters in
the input URL. The following encodings may be specified:</div></blockquote>
</div>
<div class="section" id="id337">
<h2>UTF-8<a class="headerlink" href="#id337" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Input form-fields are encoded in UTF-8 format</div></blockquote>
</div>
<div class="section" id="iso">
<h2>ISO<a class="headerlink" href="#iso" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Input form-fields are encoded in non-UTF-8 format</div></blockquote>
</div>
<div class="section" id="enc-fieldname">
<h2>&#8216;ENC=fieldname&#8217;<a class="headerlink" href="#enc-fieldname" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The contents of the URL form-field named fieldname are queried to
obtain the encoding value (UTF-8 or ISO). This allows the client to
dynamically specify the encoding method by means of a URL parameter.</p>
<p>If CODE is not specified, or if CODE=&#8217;ENC=fieldname&#8217; is specified
and the URL does not contain the parameter fieldname=UTF-8 or
fieldname=ISO, then the VIRTEL default encoding (ISO) is assumed.</p>
</div></blockquote>
</div>
<div class="section" id="format-format">
<h2>FORMAT=format<a class="headerlink" href="#format-format" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Specifies the type of scenario to be generated. The following
formats may be specified:</div></blockquote>
</div>
<div class="section" id="id338">
<h2>QUERY<a class="headerlink" href="#id338" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Generates an INITIAL scenario which accepts input data encoded as
HTML form-fields, and produces an output commarea. The generated
scenario contains <a class="reference external" href="#_bookmark206">a “MAP$ FROM-INPUT”, page 179</a>,
QUERY instruction.</div></blockquote>
</div>
<div class="section" id="xml">
<h2>XML<a class="headerlink" href="#xml" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Generates an INITIAL scenario which accepts XML input data in the
body of an HTTP request, and produces an output commarea. The
generated scenario contains <a class="reference external" href="#_bookmark206">a “MAP$ FROM-INPUT”, page
179</a>, XML instruction.</div></blockquote>
</div>
<div class="section" id="xml-fieldname">
<h2>&#8216;XML=fieldname&#8217;<a class="headerlink" href="#xml-fieldname" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Generates an INITIAL scenario which accepts XML input encoded within
an HTML form-field named fieldname, and produces an output commarea.
The generated scenario contains a <a class="reference external" href="#_bookmark205">“MAP$ FROM-FIELD”, page
178</a> instruction with the parameter
FIELD=fieldname.</div></blockquote>
</div>
<div class="section" id="com">
<h2>COM<a class="headerlink" href="#com" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>When VAR is not specified: Generates an INITIAL scenario which
accepts an input commarea in the body of an HTTP request, and
produces a set of VIRTEL variables whose names correspond to the
fields in the copybook. The generated scenario contains <a class="reference external" href="#_bookmark235">a “TOVAR$
FROM-INPUT”, page 192</a> instruction.</p>
<p>When VAR is specified: Generates an OUTPUT scenario which accepts an
input commarea contained in the VIRTEL variable named by the VAR
parameter, and produces a set of VIRTEL variables whose names
correspond to the fields in the copybook. The generated scenario
contains <a class="reference external" href="#_bookmark207">a “MAP$ FROM-VARIABLE”, page 179</a>
instruction.</p>
</div></blockquote>
</div>
<div class="section" id="com-fieldname">
<h2>&#8216;COM=fieldname&#8217;<a class="headerlink" href="#com-fieldname" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Generates an INITIAL scenario which accepts an input commarea
encoded within an HTML form-field named fieldname, and produces a
set of VIRTEL variables whose names correspond to the fields in the
copybook. The generated scenario contains <a class="reference external" href="#_bookmark205">a “MAP$ FROM-FIELD”, page
178</a> instruction with the parameter
FIELD=fieldname.</div></blockquote>
</div>
<div class="section" id="var-commareaname">
<h2>VAR=commareaname<a class="headerlink" href="#var-commareaname" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><strong>For FORMAT=QUERY, FORMAT=XML, FORMAT=&#8217;XML=fieldname&#8217;</strong></p>
<p>Specifies the name of the VIRTEL variable into which the output
commarea is written. If not specified, the default is VAR=AREA</p>
</div></blockquote>
</div>
<div class="section" id="for-format-com">
<h2>For FORMAT=COM<a class="headerlink" href="#for-format-com" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Optionally specifies the name of the VIRTEL variable which contains
the input commarea</div></blockquote>
</div>
<div class="section" id="xmlgen-yes-no">
<h2>XMLGEN=YES|NO<a class="headerlink" href="#xmlgen-yes-no" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Specifies whether an additional XMLGEN step is to be run. This
parameter is useful when FORMAT=COM or FORMAT=&#8217;COM=fieldname&#8217; is
specified. If XMLGEN=YES then the job also generates a VIRTEL page
template suitable for converting the VIRTEL result variables into
XML format. The generated page template is written to
userid.XMLGEN.OUTPUT which must be preallocated as a sequential
dataset. The contents of this dataset should then be transferred to
your workstation where it can be uploaded into a VIRTEL directory
(see <a class="reference external" href="#_bookmark77">“Uploading pages by</a> <a class="reference external" href="#_bookmark77">HTTP”, page
67</a>).</p>
<p>The arrival of an e-mail on an SMTP line can trigger one of two
types of action in VIRTEL, depending on the entry point chosen by
the rules of the SMTP line:</p>
</div></blockquote>
<ul>
<li><p class="first">Transfer of attached files to a VIRTEL directory</p>
</li>
<li><p class="first">Start a CICS transaction (or other VTAM application)</p>
<blockquote>
<div><p>When an e-mail arrives on an SMTP line, VIRTEL examines the rules of
the line to determine which entry point will be used to process the
incoming message. In the example below, the rule specifies that when
the e-mail destination address is
<a class="reference external" href="mailto:cicsmail&#37;&#52;&#48;sample&#46;com">cicsmail<span>&#64;</span>sample<span>&#46;</span>com,</a> and the sender
address is <a class="reference external" href="mailto:customer&#37;&#52;&#48;client&#46;com">customer<span>&#64;</span>client<span>&#46;</span>com,</a>
then entry point SMTPCICS will be used:</p>
</div></blockquote>
</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="40%" />
<col width="42%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">===&gt; SM200EML</th>
<th class="head">Rule priority is per name</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Status</td>
<td>===&gt; ACTIVE</td>
<td>19 May 2004 15:46:00 VIRDBA</td>
</tr>
<tr class="row-odd"><td>Description</td>
<td>===&gt; Appels entrants SMTP</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Entry point</td>
<td>===&gt; SMTPCICS</td>
<td>Target Entry Point</td>
</tr>
<tr class="row-odd"><td>Parameter</td>
<td>===&gt;</td>
<td>optional &amp;1 value</td>
</tr>
<tr class="row-even"><td>Trace</td>
<td>===&gt;</td>
<td>1=commands 2=data 3=partner</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="16%" />
<col width="13%" />
<col width="9%" />
<col width="9%" />
<col width="21%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">0</th>
<th class="head">Days</th>
<th class="head">===&gt; M:</th>
<th class="head">T:</th>
<th class="head">W:</th>
<th class="head">T: F:</th>
<th class="head">S:</th>
<th class="head">S:</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0</td>
<td>Start time</td>
<td>===&gt; H:</td>
<td>M:</td>
<td>S:</td>
<td>End time ===&gt; H:</td>
<td>&#160;</td>
<td>M:</td>
<td>S:</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="38%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">P1=Update</th>
<th class="head">P3=Return</th>
<th class="head">Enter=Add</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>P4=Activate</td>
<td>P5=Inactivate</td>
<td>P12=Entry P.</td>
</tr>
<tr class="row-odd"><td>CREATION OK</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p><em>Rule for routing an incoming e-mail on an SMTP line</em></p>
<p>An entry point which is used for file file transfer (including the
upload of HTML pages) has a single transaction which calls VIRTEL
module VIR0041B. This transaction is defined with application type 2
and startup mode 1. The menu program specified in the entry point
must be VIR0021B.</p>
<p>Only authorized users (see <a class="reference external" href="#_bookmark67">“Correspondent Management”, page
63</a>) can perform transfers.</p>
<p><em>Entry point for file transfer by SMTP</em></p>
<p><em>Transaction for file transfer by SMTP</em></p>
<p>When an entry point is used for starting an application by e-mail,
the application must be associated with a relay (or pseudo-3270
terminal) through which the application can retrieve the contents of
the e-mail. It is therefore necessary to specify the name of a relay
LU in the definition of the terminals attached to the SMTP line
(refer to the VIRTEL Connectivity Reference documentation for
details of defining an SMTP line).</p>
<p>For this type of application, the entry point chosen by the rules of
the SMTP line has a single VIRTEL transaction, defined with
application type 1 and startup mode 1, which calls the target VTAM
application (such as CICS). The name of the CICS transaction to be
started can be specified in the “TIOA at logon” field of the VIRTEL
transaction definition. The menu program specified in the entry
point must be VIR0021B.</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="56%" />
<col width="9%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Identification scenario Type 3 compression Mandatory identification</th>
<th class="head"><p class="first">===&gt;</p>
<p>===&gt;</p>
<p class="last">===&gt;</p>
</th>
<th class="head"><p class="first">eg XML identification</p>
<p>Discover typical screens (Virtel/PC)</p>
<p class="last">(PC or minitel)</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>3270 swap key</td>
<td>===&gt;</td>
<td>eg P24</td>
</tr>
<tr class="row-odd"><td>Extended colors</td>
<td>===&gt;</td>
<td>E: extended X: extended + DBCS</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p><em>Entry point for application started by SMTP</em></p>
<p><em>Transaction for application started by SMTP</em></p>
<p>The corresponding CICS definition is shown in the example below:</p>
<p><em>CICS definitions for application started by e-mail</em></p>
<p>Note that the UCTRAN(NO) parameter must be specified both in the
PROFILE and in the TYPETERM, and that the RECEIVESIZE specified in
the TYPETERM must be sufficient to contain the e-mail response data
structured field.</p>
<p>One the application has been launched, it can retrieve data from the
e-mail by sending an FAC8 code 12 structured field to VIRTEL via the
relay LU and reading the response (se`e “Retrieve Data From An
E-Mail”, page 247 &lt;#_bookmark276&gt;`__).</p>
<p>The VIRTEL Batch facility allows you to run VIRTEL as a batch job to
execute HTTP-like requests. VIRTEL reads HTTP-like requests from a
SYSIN dataset, executes the desired transaction, and writes an
HTTP-like response to a SYSOUT dataset. When all of the HTTP-like
requests have been processed, VIRTEL terminates if requested.</p>
<p>VIRTEL runs as a batch job when both of the following conditions are
true:</p>
</div></blockquote>
<ol class="arabic">
<li><p class="first">The VIRTCT contains a BATCH1 parameter. For details, refer to
“Parameters of the VIRTCT” in the VIRTEL Installation Guide manual.</p>
</li>
<li><p class="first">A BATCH line is defined in the VIRTEL configuration in the VIRARBO
file. For details, refer to “Definition of a BATCH line” in the
VIRTEL Connectivity Reference manual.</p>
<blockquote>
<div><p>Before running a VIRTEL Batch job for the first time, several
preparatory steps must be performed:</p>
</div></blockquote>
</li>
</ol>
<ol class="arabic">
<li><p class="first">A VIRTCT for VIRTEL Batch must be assembled and link-edited into the
VIRTEL load library</p>
</li>
<li><p class="first">A configuration file (VIRARBO) for VIRTEL Batch must be built</p>
</li>
<li><p class="first">A page template file (HTMLTRSF) for the VIRTEL Batch job must be
allocated and loaded</p>
</li>
<li><p class="first">Work files (VIRSWAP, VIRHTML) for the VIRTEL Batch job must be
allocated and initialized</p>
<blockquote>
<div><p>These preparatory steps, which in general only need to be performed
once, are described in the following sections.</p>
<p>VIRTEL Batch requires a special VIRTCT which must be assembled and
link-edited into the VIRTEL load library. The figure below shows
SAMPLIB member VIRTCTBA, which is an example VIRTCT suitable for
running VIRTEL Batch. The job ASMTCT in the VIRTEL SAMPLIB should be
run once to assemble and link-edit this module as VIRTCTBA in the
VIRTEL load library:</p>
<p><em>Example VIRTCT for VIRTEL Batch</em></p>
<p>VIRTEL Batch requires its own configuration file (VIRARBO) which
defines a Batch Line, the page template dataset, a Batch Entry
Point, and the Transactions which will be executed by the VIRTEL
Batch job. The figure below shows</p>
<p>SAMPLIB member VIRBATAR, which is an example of a job to create the
VIRARBO file for use by VIRTEL Batch. This job should be run once
before the first execution of a VIRTEL Batch job:</p>
<p>//VIRBATAR JOB 1,VIRBATAR,CLASS=A,MSGCLASS=X,NOTIFY=&amp;SYSUID</p>
<p>// SET LOADLIB=yourqual.VIRTnnn.LOADLIB</p>
<p>//DEFINE EXEC PGM=IDCAMS</p>
<p>//SYSPRINT DD SYSOUT=*</p>
<p>DELETE (yourqual.VIRBATCH.ARBO) CLUSTER PURGE SET MAXCC = 0</p>
<p>DEFINE CLUSTER(NAME(yourqual.VIRBATCH.ARBO) -</p>
<p>KEYS(9 0) RECSZ(100 4089) FSPC(10 10) - VOL(XXXXXX) REC(250,50)
SHR(4) SPEED) -</p>
<p>DATA(NAME(yourqual.VIRBATCH.ARBO.DATA) CISZ(4096)) -
INDEX(NAME(yourqual.VIRBATCH.ARBO.INDEX))</p>
<p>//CONFIG EXEC PGM=VIRCONF,COND=(0,NE),PARM=&#8217;LOAD,LANG=&amp;LANG&#8217;</p>
<p>//STEPLIB DD DSN=&amp;LOADLIB,DISP=SHR</p>
<p>//SYSPRINT DD SYSOUT=*</p>
<p>//VIRARBO DD DSN=yourqual.VIRBATCH.ARBO,DISP=SHR LINE
ID=B-BT1,NAME=BATCH-L1,</p>
<p>DESC=&#8217;VIRTEL Batch line&#8217;, TYPE=BATCH1,ENTRY=EPBATCH,TERMINAL=BT,
INOUT=1,PROTOCOL=VIRHTTP,RULESET=B-BT1</p>
<p>TERMINAL ID=BTLOC000,</p>
<p>DESC=&#8217;VIRTEL Batch terminals (no relay)&#8217;,
TYPE=3,COMPRESS=2,INOUT=3,STATS=12,REPEAT=4</p>
<p>TERMINAL ID=BTVTA000,RELAY=*HTTPOOL,</p>
<p>DESC=&#8217;VIRTEL Batch terminals (with relay)&#8217;,
TYPE=3,COMPRESS=2,INOUT=3,STATS=12,REPEAT=4</p>
<p>TERMINAL ID=BTVTP000,RELAY=RVIRBT00,POOL=*HTTPOOL,</p>
<p>DESC=&#8217;Relay pool for HTTP&#8217;,
TYPE=3,COMPRESS=2,INOUT=3,STATS=12,REPEAT=4</p>
<p>SUBDIR ID=W2H-DIR,</p>
<p>DESC=&#8217;Pages for WEB2HOST&#8217;, FSTYPE=V,DDNAME=HTMLTRSF,KEY=W2H-KEY,
NAMELEN=64,AUTHUP=X,AUTHDOWN=X,AUTHDEL=X</p>
<p>ENTRY ID=EPBATCH,</p>
<p>DESC=&#8217;VIRTEL Batch entry point&#8217;,
TRANSACT=BAT,TIMEOUT=1,ACTION=0,EXTCOLOR=X,
EMUL=HTML,SIGNON=VIR0020H,MENU=VIR0021A</p>
<p>TRANSACT ID=BAT-00,NAME=EPBATCH,</p>
<p>DESC=&#8217;Default directory = entry point name&#8217;, APPL=W2H-DIR,TYPE=4,
TERMINAL=BTLOC,STARTUP=2,SECURITY=0</p>
<p>TRANSACT ID=BAT-14,NAME=&#8217;Protide&#8217;,</p>
<p>DESC=&#8217;XML conversion&#8217;, APPL=$NONE$,TYPE=2,
TERMINAL=BTLOC,STARTUP=1,SECURITY=0, TIOASTA=&#8217;&amp;/S OK &amp;/T&#8217;,
EXITSTA=SCENSVIO</p>
<p>* END OF CONFIGURATION</p>
<p><em>Job to build configuration file for VIRTEL Batch</em></p>
<p>Each VIRTEL Batch job requires an HTMLTRSF file which contains the
page templates used by the transactions which will be executed by
the VIRTEL Batch job. The figure below shows SAMPLIB member
VIRBATAT, which is an example job to allocate the HTMLTRSF file and
to copy the page templates from the sample file (SAMPTRSF)
distributed with VIRTEL. This job should be run once before the
first execution of a VIRTEL Batch job:</p>
<p><em>Job to allocate page template file for VIRTEL Batch</em></p>
<p>Each VIRTEL Batch job requires its own VIRSWAP and VIRHTML files.
The figure below shows SAMPLIB member VIRBATAW, which is an example
job to allocate these files:</p>
<p><em>Job to allocate work files for VIRTEL Batch</em></p>
<p>The figure below shows SAMPLIB member VIRBATCH, which contains an
example of a VIRTEL Batch job:</p>
<p><em>Example JCL for VIRTEL Batch</em></p>
<p>The SYSIN file contains commands and data statements. The following
commands are valid in the SYSIN file:</p>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="get">
<h2>.GET<a class="headerlink" href="#get" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>indicates the start of an HTTP GET command</div></blockquote>
</div>
<div class="section" id="post">
<h2>.POST<a class="headerlink" href="#post" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>indicates the start of an HTTP POST command</div></blockquote>
</div>
<div class="section" id="raw">
<h2>.RAW<a class="headerlink" href="#raw" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>indicates the start of a raw HTTP request command</div></blockquote>
</div>
<div class="section" id="id339">
<h2>.END<a class="headerlink" href="#id339" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>indicates the end of a GET, POST, or RAW command</div></blockquote>
</div>
<div class="section" id="eoj">
<h2>.EOJ<a class="headerlink" href="#eoj" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>causes VIRTEL to terminate</p>
<p>These commands are described in the following sections.</p>
<p>The following figure shows an example SYSIN file containing two GET
commands:</p>
<p><em>Example VIRTEL Batch GET commands</em></p>
<p>Each .GET command is followed by one or more data statements.</p>
<p>The first statement following the .GET command is the VIRTEL URL of
the HTTP request (se`e “Virtel URL formats”, &lt;#_bookmark8&gt;`__ <a class="reference external" href="#_bookmark8">page
10</a>). Only the pathname, pagename, and tranname
parts of the URL are required. The <a class="reference external" href="http://ipaddr:port">http://ipaddr:port</a> part of the
URL must be omitted.</p>
<p>All subsequent statements (if any) following the .GET command are
appended to the URL as query parameters. To conform with standard
HTTP query syntax, VIRTEL adds a “?” before the first parameter and
a “&amp;” before each subsequent parameter. Thus, in the above example,
VIRTEL generates two HTTP requests:</p>
<p><em>Example VIRTEL Batch GET requests</em></p>
<p>The following figure shows an example SYSIN file containing a POST
command followed by XML data:</p>
<p><em>Example VIRTEL Batch POST command</em></p>
<p>Each .POST command is followed by two or more data statements
containing the URL and the request body.</p>
<p>The first statement following the .POST command is the VIRTEL URL of
the HTTP request (se`e “Virtel URL formats”, &lt;#_bookmark8&gt;`__ <a class="reference external" href="#_bookmark8">page
10</a>). Only the pathname, pagename, and tranname
parts of the URL are required. The <a class="reference external" href="http://ipaddr:port">http://ipaddr:port</a> part of the
URL must be omitted.</p>
<p>All subsequent statements following the .POST command are considered
to be the request body. VIRTEL automatically generates a
Content-length: header corresponding to the size of the request
body. VIRTEL also adds a Content-type: header if the content type is
specified as an operand of the .POST command as shown in the
example. Thus, in the above example, VIRTEL generates the following
HTTP request:</p>
<p><em>Example VIRTEL Batch POST request</em></p>
<p>The following figure shows an example SYSIN file containing a RAW
command followed by HTTP request data:</p>
<p><em>Example VIRTEL Batch RAW command</em></p>
<p>Each .RAW command is followed by one or more data statements
containing the HTTP request line, the request headers, and the
request body. A blank line separates the request headers from the
request body. VIRTEL generates an HTTP request exactly as contained
in the data statements.</p>
<p>When a VIRTEL Batch job terminates, the condition code is set to the
highest ERROR$ code set by the of the scenarios executed (value 0 to
255).</p>
<p>The condition code may also be set to 4 or 5 (unless a scenario has
indicated a higher value) if a request executed by the batch job
produced an HTTP response code in the range 4xx or 5xx.</p>
<p>In the case of a scenario abend, the completion code contains the
offset of the abend within the scenario.</p>
<p>If the VIRTEL Batch job terminates because of an error condition
(for example, an invalid batch command, missing DD statement, or
insufficient memory) then the condition code is set to 16.</p>
</div></blockquote>
<div class="section" id="outgoing-calls">
<h3>Outgoing Calls<a class="headerlink" href="#outgoing-calls" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>The FAD4 structured field allows a host application to send an
e-mail. This function is described in the VIRTEL Programming
Interface documentation 280.</p>
<p>The entry point used to invoke the host application must contain a
type-3 transaction with external name $MAIL$. The “Application”
field must contain the name of the SMTP line to be used for sending
the outgoing e-mail.</p>
<p>An example transaction is shown below:</p>
<p><em>Transaction definition for outgoing e-mails</em></p>
<p>Refer to the VIRTEL Connectivity Reference documentation for details
of defining transactions, entry points, and SMTP lines.</p>
</div></blockquote>
</div>
<div class="section" id="programming-interfaces">
<h3>Programming Interfaces<a class="headerlink" href="#programming-interfaces" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Certain VIRTEL functions can be driven by application programs.
These functions are generally requested by sending specially
formatted commands to VIRTEL on the same 3270 session through which
the application communicates with the end user.</p>
<p>An application can request VIRTEL functions in the following ways:</p>
</div></blockquote>
<ul>
<li><p class="first">By sending a message containing structured fields recognized by
VIRTEL</p>
</li>
<li><p class="first">By embedding HOST4WEB commands in the 3270 screen (available from
VIRTEL version 4.28 onwards)</p>
<blockquote>
<div><p>In addition to sending normal screen display data, a 3270
application may also send data in specially formatted fields known
as “structured fields”. Structured fields are sent using a special
3270 command “Write Structured Field” (code X&#8217;F3&#8217;). Each structured
field contains a 2-byte identification code. VIRTEL intercepts
structured fields whose code begins with X&#8217;FA&#8217;. By sending
structured fields to VIRTEL on the 3270 session, the VIRTEL Web
Integration application can direct VIRTEL to perform certain
functions.</p>
<p>The operations available to VIRTEL Web Integration applications via
structured fields are as follows:</p>
</div></blockquote>
</li>
<li><p class="first">Specify the HTML page template to be used to format 3270 screens for
the browser</p>
</li>
<li><p class="first">Specify the directory from which HTML page templates are to be
retrieved</p>
</li>
<li><p class="first">Send a list of values (a table variable) to an HTML page</p>
</li>
<li><p class="first">Send an outgoing e-mail</p>
</li>
<li><p class="first">Retrieve the contents of an incoming e-mail</p>
<blockquote>
<div><p>As a general rule, the format of a structured field is as shown
below:</p>
</div></blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="nnnn">
<h2>nnnn<a class="headerlink" href="#nnnn" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The length. The length includes the length of the nnnn and cccc
fields, thus nnnn is always 4 more than the length of the data.</div></blockquote>
</div>
<div class="section" id="cccc">
<h2>cccc<a class="headerlink" href="#cccc" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>the identification code</div></blockquote>
</div>
<div class="section" id="dd-dd">
<h2>dd....dd<a class="headerlink" href="#dd-dd" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>the data.</p>
<p>VIRTEL recognizes that a message contains structured fields whenever
the application uses the 3270 command X&#8217;F3&#8217; (Write Structured Field)
to send the message to the terminal.</p>
<p>For CICS applications, the STRFIELD option of the EXEC CICS SEND
command requests CICS to send the message using command code X&#8217;F3&#8217;:</p>
<p>For non-CICS applications, the appropriate method of generating a
Write Structured Field command should be used. It is also possible
to convert a normal message into a structured field message by means
of VIRTEL exit 4 (outbound message exit).</p>
<p>If the application monitor does not support the X&#8217;F3&#8217; (Write
Structured Field) command for sending structured fields (for
example, IMS), VIRTEL provides an alternative method for processing
structured field data. If the 3270 message begins with the special
header:</p>
<p>then VIRTEL treats the remainder of the message as structured
fields.</p>
<p>The SRTVIRTEL header is built by the application, and the
application monitor adds 3270 command byte X&#8217;F1&#8217; (Write), X&#8217;F5&#8217;
(Erase/Write), or X&#8216;7E&#8217; (Erase/Write Alternate), followed by an
appropriate WCC (Write Control Character).</p>
<p>For example,</p>
<p>F1 C3 1140401D40 C&#8217;SRTVIRTEL&#8217; 11404B 0016 FAE5 08 08
E3D9F0F0F0F0F0F1 818683A796A34040</p>
<p>is processed identically to:</p>
<p>F3 0016 FAE5 08 08 E3D9F0F0F0F0F0F1 818683A796A34040</p>
<p>Because the structured fields described in this chapter are
understood only by VIRTEL and not by regular 3270 terminals, your
application will need to determine whether it is communicating with
a VIRTEL pseudo-terminal before writing a VIRTEL structured field.
This section describes some techniques that your application can use
to decide if it is communicating with VIRTEL pseudo-terminal or with
a regular 3270 terminal.</p>
<p>By defining two different transaction codes which invoke the same
CICS application program (for example, DEMO for 3270, and VEMO for
VIRTEL), the application can test the field EIBTRNID to determine if
it is running under VIRTEL.</p>
<p>The figure below shows sample DFHCSDUP statements to associate two
transaction codes (DEMO and VEMO) with a single application program
DEMOPROG:</p>
<p><em>Defining an alternate CICS transaction code for an application</em></p>
<p>The figure below shows sample VIRCONF statements to define a VIRTEL
transaction which starts the application using the CICS transaction
code VEMO:</p>
<p><em>Invoking the alternate transaction code from VIRTEL</em></p>
<p>The figure below shows sample COBOL statements which allow the
DEMOPROG program to take different actions based upon the CICS
transaction code:</p>
<p><em>Detecting VIRTEL by testing the transaction code</em></p>
<p>By adding additional data after the transaction code when the
transaction is invoked by VIRTEL, the application can receive the
parameter data to verify whether it is running under VIRTEL. In the
following example we add a V after the transaction code when the
application is called via VIRTEL.</p>
<p>The figure below shows sample VIRCONF statements to define a VIRTEL
transaction which starts the CICS transaction DEMO with an
additional parameter (“V”):</p>
<p><em>Invoking a CICS transaction with additional parameters</em></p>
<p>The figure below shows sample COBOL statements which must be added
to the DEMOPROG program to receive and test the parameter data. When
the transaction is started by VIRTEL, the parameter field contains
“V”. When the transaction is started from a terminal, using the
transaction code DEMO with no additional parameters, the parameter
field contains spaces:</p>
<p><em>Detecting VIRTEL by inspecting the contents of the TIOA</em></p>
<p>Since all VIRTEL requests are made from the VIRTEL terminal pool,
the application program can test the CICS terminal id or the VTAM LU
name to determine if it is running under VIRTEL, as shown in the
following example:</p>
<p><em>Defining the VIRTEL terminal pool</em></p>
<p><em>VTAM definition for the VIRTEL terminal pool</em></p>
<p><em>Detecting VIRTEL by testing the CICS terminal id</em></p>
<p><em>Detecting VIRTEL by testing the VTAM LU name</em></p>
<p>By using the FA88 structured field, an application can request data
from an HTTP terminal without being limited to the size of a 3270
screen.</p>
<p>The application sends an FA88 structured field containing the name
of a URL parameter to be retrieved. The “send message to terminal”
flag causes VIRTEL to send an HTTP response to the terminal. When
the terminal sends its next URL, VIRTEL sends to the application an
FA88 structured field response containing the value of the URL
parameter. The application may retrieve the value in multiple
segments. If the value exceeds 32K in size then it must be retrieved
in multiple segments. Once the first segment has been received, the
application requests subsequent segments by sending another FA88
structured field containing the “immediate answer” flag and the
offset of the segment requested. VIRTEL responds with an FA88
structured field response containing the segment requested. In each</p>
<p>response VIRTEL sets the flag byte to indicate whether there is more
data to be retrieved, and if so the number of bytes remaining. The
application continues the procedure until there is no more data to
be retrieved.</p>
<p>The format of the FA88 structured field sent by the application is
shown below:</p>
<p><em>Format of structured field FA88</em></p>
<p>The format of the FA88 structured field response returned by VIRTEL
is shown below:</p>
<p><em>Format of structured field response FA88</em></p>
<p>VIRTEL recognizes the FAC8 structured field for the following
operations:</p>
</div></blockquote>
<ul>
<li><p class="first">Change of directory for HTML page templates</p>
</li>
<li><p class="first">Change of HTML page template</p>
<blockquote>
<div><p>To perform more than one function at a time, multiple FAC8
structured fields can be sent in the same message.</p>
<p>Structured field FAC8 code 06 allows the application to specify the
name of the VIRTEL directory to be used to retrieve the page
template for the current 3270 screen and all subsequent screens.</p>
<p>The format of a structured field FAC8 code 06 is:</p>
<p><em>Format of structured field FAC8 code 06</em></p>
<p>Structured field FAC8 code 07 allows the application to specify the
name of the page template for the current 3270 screen and all
subsequent screens.</p>
<p>The format of a structured field FAC8 code 07 is:</p>
<p><em>Format of structured field FAC8 code 07</em></p>
<p><em>in Working-Storage:</em></p>
<p>*////////////////////////////////////////////////////////////////*</p>
<p>*///* - FAC8 request to VIRTEL (HTML page management) *///*</p>
<p>*///* - send structured field: *///*</p>
<p>*///* F3 LLLL FAC8 F PAGE or DIRECTORY *///*</p>
<p>*///* LLLL: Length of structured field (2 BYTES) *///*</p>
<p>*///* FAC8: Structured field id code (2 BYTES) *///*</p>
<p>*///* F : Requested function (1 BYTE BINARY) *///*</p>
<p>*///* 06: change VIRTEL directory *///*</p>
<p>*///* 07: change HTML page template *///*</p>
<p>*///* PAGE or DIRECTORY: name (8 bytes) *///*</p>
<p>*////////////////////////////////////////////////////////////////*</p>
<p>01 FAC8-DEM.</p>
</div></blockquote>
</li>
</ul>
<blockquote>
<div><em>in the Procedure Division:</em></div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="20%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">MOVE LENGTH OF FAC8-DEM</th>
<th class="head">TO</th>
<th class="head">FAC8-LONG.</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>MOVE FAC8-DEM-PAGE-HTML</td>
<td>TO</td>
<td>FAC8-FONCTION.</td>
</tr>
<tr class="row-odd"><td>MOVE &#8216;TOUTNOIR&#8217;</td>
<td>TO</td>
<td>FAC8-ARGUMENT.</td>
</tr>
<tr class="row-even"><td>PERFORM 8150-ENVOI-FAC8</td>
<td>THRU</td>
<td>8150-FIN</td>
</tr>
<tr class="row-odd"><td>PERFORM 8830-ENVOI-MAP</td>
<td>THRU</td>
<td>8830-FIN.</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>*////////////////////// SEND STRUCTURED FIELD ///////////////////*
8150-ENVOI-FAC8.</p>
<p>EXEC CICS SEND FROM (FAC8-DEM) FROMLENGTH (FAC8-LONG) STRFIELD</p>
<p>END-EXEC.</p>
<p>8150-FIN.</p>
<p>*/////////////////////// SEND MESSAGE 3270
///////////////////////* 8830-ENVOI-MAP.</p>
<p>EXEC CICS SEND MAP (&#8216;NOMMAP2&#8217;) MAPSET (&#8216;NONMAP2&#8217;) ERASE</p>
<p>CURSOR (CICS-TS-POS-CURS) END-EXEC.</p>
<p>8830-FIN.</p>
<p><em>Example of sending structured field FAC8</em></p>
<p>An example of this function is supplied in member FAC8SAMP of the
VIRTEL SAMPLIB.</p>
<p>Structured field FAE5 allows the application to send a named data
table (“table variable”) to VIRTEL. The data in the table variable
is made available for insertion in the current HTML page by means of
VIRTEL tags coded in the page template (se`e “Handling table
variables”, page 43 &lt;#_bookmark44&gt;`__), or by means of a scenario
instruction (see <a class="reference external" href="#_bookmark183">“FIELD$ DEFINE-CHOICE”,</a> <a class="reference external" href="#_bookmark183">page
166</a>) which allows the application to supply lists
of drop-down values for selection fields.</p>
<p>The application can send one or more FAE5 structured fields. Each
structured field contains the name of a variable followed by a table
of values. The format of structured field FAE5 is shown below:</p>
<p><em>Format of structured field FAE5 – format 1</em></p>
<p>The above format limits the length of each value to a maximum of 255
bytes. A second format of the FAE5 structured field allows the
application to set a single value whose length is equal to the
remainder of the structured field:</p>
<p><em>Format of structured field FAE5 – format 2</em></p>
<p>After the application has sent a message containing an FAE5
structured field, VIRTEL considers the current screen complete and
sends the response to the user.</p>
<p>Structured field FAE6 is identical to FAE5, except that VIRTEL does
not consider the current screen to be complete, and waits for a
further output message from the application before sending the
response to the user.</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="34%" />
<col width="23%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">10</th>
<th class="head">FAE5-SFLENGTH-2</th>
<th class="head">PIC S9(4)</th>
<th class="head">COMP VALUE +0.</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>10</td>
<td>FILLER</td>
<td>PIC X(2)</td>
<td>VALUE X&#8217;FAE5&#8217;.</td>
</tr>
<tr class="row-odd"><td>10</td>
<td>FAE5-LONG-POSTE-2</td>
<td>PIC X</td>
<td>VALUE X&#8216;04&#8217;.</td>
</tr>
<tr class="row-even"><td>10</td>
<td>FAE5-LONG-NOM-2</td>
<td>PIC X</td>
<td>VALUE X&#8216;08&#8217;.</td>
</tr>
<tr class="row-odd"><td>10</td>
<td>FAE5-NOM-2</td>
<td>PIC X(8)</td>
<td>VALUE &#8216;VARNAME2&#8217;.</td>
</tr>
<tr class="row-even"><td>10</td>
<td>FAE5-POSTE-2-1</td>
<td>PIC 9(6)</td>
<td>VALUE 123.</td>
</tr>
<tr class="row-odd"><td>10</td>
<td>FAE5-POSTE-2-2</td>
<td>PIC 9(6)</td>
<td>VALUE 234.</td>
</tr>
<tr class="row-even"><td>10</td>
<td>FAE5-POSTE-2-3</td>
<td>PIC 9(6)</td>
<td>VALUE 456.</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p><em>Example of sending structured field FAE5</em></p>
<p>Application programs running in a CICS or IMS environment using
Language Environment (LE) can request certain VIRTEL Web Integration
functions by means of callable modules. These modules construct the
necessary structured fields and send them to VIRTEL via CICS or IMS,
thus simplifying the job of the application programmer. These
modules are primarily designed to be called by CICS or IMS-COBOL
programs, however they can also be used by application programs
written in other languages. The modules, CALL VIRSETA, CALL VIRSETV
(for CICS), CALL VIRSETAI, CALL VIRSETVI (for IMS) and CALL VIRTEL,
are described in the following sections.</p>
<p>This module allows a CICS application program to copy an array of
values into a VIRTEL table variable. The calling program supplies
the name of the variable and an array containing the values. The
VIRSETA module builds one or more FAE6 structured fields containing
the variable name and the values, and sends the structured field(s)
to VIRTEL using the EXEC CICS SEND STRFIELD command.</p>
<p>The total size of the structured fields sent by a single call to
VIRSETA cannot exceed 32K, but additional data can be added to the
VIRTEL table variable by calling VIRSETA again with the same
variable name.</p>
<p>When VIRSETA is used to copy values into a VIRTEL table variable,
all of the values must have the same length. To create a VIRTEL
table variable containing values of varying lengths, use CALL
VIRSETV described in the next section.</p>
<p>Parameters passed by calling program:</p>
</div></blockquote>
<ol class="arabic simple">
<li>DFHEIBLK</li>
<li>DFHCOMMAREA</li>
<li>Variable name (variable length EBCDIC string of 1-255 characters
terminated by blank or X&#8216;00&#8217;)</li>
<li>An array of elements each containing one data item</li>
<li>Element size (signed halfword) contains the length of each element of
the array</li>
<li>Count (signed halfword) contains the number of elements in the array</li>
<li>Data length (signed halfword) contains the length of the data item
contained in each element of the array. This may be less than or
equal to the element size.</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="40%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">10 FILLER</th>
<th class="head">PIC X(20).</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>77</td>
<td>WS-ELEMENT-SIZE</td>
<td>PIC S9(4) COMP SYNC.</td>
</tr>
<tr class="row-odd"><td>77</td>
<td>WS-COUNT</td>
<td>PIC S9(4) COMP SYNC.</td>
</tr>
<tr class="row-even"><td>77</td>
<td>WS-DATA-LENGTH</td>
<td>PIC S9(4) COMP SYNC.</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p><em>Example of VIRTEL Web Integration application using CALL VIRSETA</em></p>
<p>If the call was successful, VIRSETA returns to the calling program.
Otherwise, VIRSETA terminates with an EXEC CICS ABEND.</p>
<p>The following abend codes may be issued by VIRSETA:</p>
</div></blockquote>
</div>
<div class="section" id="vsa1">
<h2>VSA1<a class="headerlink" href="#vsa1" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Length of variable name is outside the range 1-255, or the required
terminator (blank or X&#8216;00&#8217;) is missing</div></blockquote>
</div>
<div class="section" id="vsa2">
<h2>VSA2<a class="headerlink" href="#vsa2" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Data length is less than 1, or exceeds the element length.</div></blockquote>
</div>
<div class="section" id="vsa3">
<h2>VSA3<a class="headerlink" href="#vsa3" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Count is less than 1.</div></blockquote>
</div>
<div class="section" id="vsa4">
<h2>VSA4<a class="headerlink" href="#vsa4" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Data exceeds the maximum allowed size. If the length of each data
item is 255 or less, then the total size of the data (count x data
length) must not exceed 32760 – N, where N is the number of
characters in the variable name. If the length of each data item is
256 or more, then count x (data length + 6 + N) must not exceed
32767.</p>
<p>Additionally CICS may issue an abend if the EXEC CICS SEND STRFIELD
command is unsuccessful.</p>
<p>This module allows a CICS application program to set the value of a
VIRTEL variable. The calling program supplies the name of the
variable and the value to be set. The VIRSETV module builds an FAE6
structured field containing the variable name and value, and sends
the structured field to VIRTEL using the EXEC CICS SEND STRFIELD
command.</p>
<p>VIRTEL variables containing more than one value are known as table
variables. The application program can create a table variable by
calling the VIRSETV module several times with the same variable
name. The first call creates the variable and adds the first value
to it. Subsequent calls add additional values to the table variable.</p>
<p>Parameters passed by calling program:</p>
</div></blockquote>
<ol class="arabic">
<li><p class="first">DFHEIBLK</p>
</li>
<li><p class="first">DFHCOMMAREA</p>
</li>
<li><p class="first">Variable name (variable length EBCDIC string of 1-255 characters
terminated by blank or X&#8216;00&#8217;)</p>
</li>
<li><p class="first">Value (variable length)</p>
</li>
<li><p class="first">Length (signed halfword field containing length of value)</p>
<blockquote>
<div><p><em>Example of VIRTEL Web Integration application using CALL VIRSETV</em></p>
<p>If the call was successful, VIRSETV returns to the calling program.
Otherwise, VIRSETV terminates with an EXEC CICS ABEND.</p>
<p>The following abend codes may be issued by VIRSETV:</p>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="vsv1">
<h2>VSV1<a class="headerlink" href="#vsv1" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Length of variable name is outside the range 1-255, or the required
terminator (blank or X&#8216;00&#8217;) is missing</div></blockquote>
</div>
<div class="section" id="vsv2">
<h2>VSV2<a class="headerlink" href="#vsv2" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Length of value is negative or exceeds the maximum allowed length
(32760 minus the length of the variable name).</p>
<p>Additionally CICS may issue an abend if the EXEC CICS SEND STRFIELD
command is unsuccessful.</p>
<p>This module allows an IMS application program to copy an array of
values into a VIRTEL table variable. The calling program supplies
the name of the variable and an array containing the values. The
VIRSETAI module builds one or more FAE6 structured fields containing
the variable name and the values, and sends the structured field(s)
to VIRTEL using the CALL &#8216;CBLTDLI&#8217; USING ISRT, LS-IOPCB,
OUTPUT-MESSAGE, MFS command.</p>
<p>The total size of the structured fields sent by a single call to
VIRSETAI cannot exceed 32K, but additional data can be added to the
VIRTEL table variable by calling VIRSETAI again with the same
variable name.</p>
<p>When VIRSETAI is used to copy values into a VIRTEL table variable,
all of the values must have the same length. To create a VIRTEL
table variable containing values of varying lengths, use CALL
VIRSETVI described in the next section.</p>
<p>Parameters passed by calling program:</p>
</div></blockquote>
<ol class="arabic simple">
<li>Variable name (variable length EBCDIC string of 1-255 characters
terminated by blank or X&#8216;00&#8217;)</li>
<li>An array of elements each containing one data item</li>
<li>Element size (signed halfword) contains the length of each element of
the array</li>
<li>Count (signed halfword) contains the number of elements in the array</li>
<li>Data length (signed halfword) contains the length of the data item
contained in each element of the array. This may be less than or
equal to the element size.</li>
<li>IMS I/O PCB</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="31%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">01</th>
<th class="head">WS-TABLE.</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td>05 WS-ELEMENT</td>
<td>PIC X(80) OCCURS 100 TIMES.</td>
</tr>
<tr class="row-odd"><td>77</td>
<td>WS-TESTDATA</td>
<td>PIC X(10) VALUE &#8216;TEST DATA&#8217;.</td>
</tr>
<tr class="row-even"><td>77</td>
<td>WS-ELEMSIZE</td>
<td>PIC S9(4) COMP SYNC.</td>
</tr>
<tr class="row-odd"><td>77</td>
<td>WS-COUNT</td>
<td>PIC S9(4) COMP SYNC.</td>
</tr>
<tr class="row-even"><td>77</td>
<td>WS-DATALEN</td>
<td>PIC S9(4) COMP SYNC.</td>
</tr>
<tr class="row-odd"><td>77</td>
<td>WS-RC1</td>
<td>PIC X.</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p><em>Example of VIRTEL Web Integration application using CALL VIRSETAI</em></p>
<p>This module allows an IMS application program to set the value of a
VIRTEL variable. The calling program supplies the name of the
variable and the value to be set. The VIRSETVI module builds an FAE6
structured field containing the variable name and value, and sends
the structured field to VIRTEL using the CALL &#8216;CBLTDLI&#8217; USING ISRT,
LS-IOPCB, OUTPUT-MESSAGE, MFS command.</p>
<p>VIRTEL variables containing more than one value are known as table
variables. The application program can create a table variable by
calling the VIRSETVI module several times with the same variable
name. The first call creates the variable and adds the first value
to it. Subsequent calls add additional values to the table variable.</p>
<p>Parameters passed by calling program:</p>
</div></blockquote>
<ol class="arabic">
<li><p class="first">Variable name (variable length EBCDIC string of 1-255 characters
terminated by blank or X&#8216;00&#8217;)</p>
</li>
<li><p class="first">Value (variable length)</p>
</li>
<li><p class="first">Length (signed halfword field containing length of value)</p>
</li>
<li><p class="first">IMS I/O PCB</p>
<blockquote>
<div><p><em>Example of VIRTEL Web Integration application using CALL VIRSETVI</em></p>
<p>Application programs running in a CICS environment with LE can also
call a module named VIRTEL (see source delivered in the VIRTEL
SAMPLIB library at installation time) which builds and sends the
structured fields necessary to invoke the following functions:</p>
</div></blockquote>
</li>
</ol>
<ul>
<li><p class="first">specify page template and directory (structured field FAC8)</p>
</li>
<li><p class="first">send data for table variables (structured field FAE6)</p>
<blockquote>
<div><p>The following COBOL example shows how to use CALL VIRTEL to send two
table variables (CHP_NUM1 and CPT_NUM1) and to request the use of
a specific page template (page WEB2VIRT in directory DEMO):</p>
<p><em>in Working-Storage:</em></p>
<p>* CALL &#8216;VIRTEL&#8217; takes one parameter with maximum size 2048 bytes</p>
<p>01 PARAMETRES-VIRTEL-FAC8.</p>
<p>02 VIRTEL-FONCTION-FAC8 PIC X(10) VALUE &#8216;SENDPAGW&#8217;.</p>
<p>02 VIRTEL-CODE-RETOUR-FAC8 PIC 9(02) VALUE 0.</p>
<p>02 VIRTEL-PAGE-HTML PIC X(10) VALUE &#8216;WEB2VIRT&#8217;.</p>
<p>02 VIRTEL-REPERTOIRE PIC X(10) VALUE &#8216;DEMO &#8216;.</p>
<p>02 VIRTEL-FILLER-FAC8 PIC X(2016).</p>
<p>01 PARAMETRES-VIRTEL-FAE6.</p>
<p>02 VIRTEL-FONCTION-FAE6 PIC X(10) VALUE &#8216;SENDTABW&#8217;.</p>
<p>02 VIRTEL-CODE-RETOUR-FAE6 PIC 9(02) VALUE 0.</p>
<p>02 VIRTEL-LONG-NOM PIC 9(02).</p>
<p>02 VIRTEL-LONG-POSTE PIC 9(02).</p>
<p>02 VIRTEL-NBR-POSTE PIC 9(03).</p>
<p>02 VIRTEL-FAE6-DATA.</p>
<p>05 VIRTEL-NOM PIC X(08).</p>
<p>05 VIRTEL-POSTE-01 PIC X(10).</p>
<p>05 VIRTEL-POSTE-02 PIC X(10).</p>
<p>05 VIRTEL-POSTE-03 PIC X(10).</p>
<p>05 VIRTEL-POSTE-04 PIC X(10).</p>
<p>05 VIRTEL-POSTE-05 PIC X(10).</p>
<p>05 VIRTEL-POSTE-06 PIC X(10).</p>
<p>05 VIRTEL-POSTE-07 PIC X(10).</p>
<p>05 VIRTEL-POSTE-08 PIC X(10).</p>
<p>05 VIRTEL-POSTE-09 PIC X(10).</p>
<p>05 VIRTEL-FILLER-FAE6 PIC X(1937).</p>
<p>02 VIRTEL-FAE6-DATA1 REDEFINES VIRTEL-FAE6-DATA.</p>
</div></blockquote>
</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="43%" />
<col width="17%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">05</th>
<th class="head">VIRTEL-NOM1</th>
<th class="head">PIC</th>
<th class="head">X(08).</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>05</td>
<td>VIRTEL-POSTE1-01</td>
<td>PIC</td>
<td>X(10).</td>
</tr>
<tr class="row-odd"><td>05</td>
<td>VIRTEL-POSTE1-02</td>
<td>PIC</td>
<td>X(10).</td>
</tr>
<tr class="row-even"><td>05</td>
<td>VIRTEL-POSTE1-03</td>
<td>PIC</td>
<td>X(10).</td>
</tr>
<tr class="row-odd"><td>05</td>
<td>VIRTEL-POSTE1-04</td>
<td>PIC</td>
<td>X(10).</td>
</tr>
<tr class="row-even"><td>05</td>
<td>VIRTEL-POSTE1-05</td>
<td>PIC</td>
<td>X(10).</td>
</tr>
<tr class="row-odd"><td>05</td>
<td>VIRTEL-POSTE1-06</td>
<td>PIC</td>
<td>X(10).</td>
</tr>
<tr class="row-even"><td>05</td>
<td>VIRTEL-POSTE1-07</td>
<td>PIC</td>
<td>X(10).</td>
</tr>
<tr class="row-odd"><td>05</td>
<td>VIRTEL-POSTE1-08</td>
<td>PIC</td>
<td>X(10).</td>
</tr>
<tr class="row-even"><td>05</td>
<td>VIRTEL-POSTE1-09</td>
<td>PIC</td>
<td>X(10).</td>
</tr>
<tr class="row-odd"><td>05</td>
<td>VIRTEL-FILLER1-FAE6</td>
<td>PIC</td>
<td>X(913).</td>
</tr>
</tbody>
</table>
<blockquote>
<div><em>in the Procedure Division:</em></div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="34%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">MOVE</th>
<th class="head">&#8216;SENDPAGW&#8217;</th>
<th class="head">TO VIRTEL-FONCTION-FAC8</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>MOVE</td>
<td>0</td>
<td>TO VIRTEL-CODE-RETOUR-FAC8</td>
</tr>
<tr class="row-odd"><td>MOVE</td>
<td>&#8216;WEB2VIRT&#8217;</td>
<td>TO VIRTEL-PAGE-HTML</td>
</tr>
<tr class="row-even"><td>MOVE</td>
<td>&#8216;DEMO &#8216;</td>
<td>TO VIRTEL-REPERTOIRE</td>
</tr>
<tr class="row-odd"><td>MOVE</td>
<td>SPACES</td>
<td>TO VIRTEL-FILLER-FAC8</td>
</tr>
<tr class="row-even"><td>CALL</td>
<td>&#8216;VIRTEL&#8217; USING</td>
<td>DFHEIBLK</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>PARAMETRES-VIRTEL-FAC8</td>
</tr>
<tr class="row-even"><td>MOVE</td>
<td>&#8216;SENDTABW&#8217;</td>
<td>TO VIRTEL-FONCTION-FAE6</td>
</tr>
<tr class="row-odd"><td>MOVE</td>
<td>0</td>
<td>TO VIRTEL-CODE-RETOUR-FAE6</td>
</tr>
<tr class="row-even"><td>MOVE</td>
<td>08</td>
<td>TO VIRTEL-LONG-POSTE.</td>
</tr>
<tr class="row-odd"><td>MOVE</td>
<td>9</td>
<td>TO VIRTEL-NBR-POSTE.</td>
</tr>
<tr class="row-even"><td>MOVE</td>
<td>08</td>
<td>TO VIRTEL-LONG-NOM.</td>
</tr>
<tr class="row-odd"><td>MOVE</td>
<td>&#8216;CHP_NUM1&#8217;</td>
<td>TO VIRTEL-NOM.</td>
</tr>
<tr class="row-even"><td>MOVE</td>
<td>&#8216;VAL-001&#8217;</td>
<td>TO VIRTEL-POSTE-01</td>
</tr>
<tr class="row-odd"><td>MOVE</td>
<td>&#8216;VAL-002&#8217;</td>
<td>TO VIRTEL-POSTE-02.</td>
</tr>
<tr class="row-even"><td>MOVE</td>
<td>&#8216;VAL-003&#8217;</td>
<td>TO VIRTEL-POSTE-03.</td>
</tr>
<tr class="row-odd"><td>MOVE</td>
<td>&#8216;VAL-004&#8217;</td>
<td>TO VIRTEL-POSTE-04.</td>
</tr>
<tr class="row-even"><td>MOVE</td>
<td>&#8216;VAL-005&#8217;</td>
<td>TO VIRTEL-POSTE-05.</td>
</tr>
<tr class="row-odd"><td>MOVE</td>
<td>&#8216;VAL-006&#8217;</td>
<td>TO VIRTEL-POSTE-06.</td>
</tr>
<tr class="row-even"><td>MOVE</td>
<td>&#8216;VAL-007&#8217;</td>
<td>TO VIRTEL-POSTE-07.</td>
</tr>
<tr class="row-odd"><td>MOVE</td>
<td>&#8216;VAL-008&#8217;</td>
<td>TO VIRTEL-POSTE-08.</td>
</tr>
<tr class="row-even"><td>MOVE</td>
<td>&#8216;VAL-009&#8217;</td>
<td>TO VIRTEL-POSTE-09.</td>
</tr>
<tr class="row-odd"><td>MOVE</td>
<td>SPACES</td>
<td>TO VIRTEL-FILLER-FAE6</td>
</tr>
<tr class="row-even"><td>CALL</td>
<td>&#8216;VIRTEL&#8217; USING</td>
<td>DFHEIBLK</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>&#160;</td>
<td>PARAMETRES-VIRTEL-FAE6</td>
</tr>
</tbody>
</table>
<blockquote>
<div>MOVE VIRTEL-CODE-RETOUR-FAE6 TO TD-MSG-RETCODE</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="28%" />
<col width="9%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">MOVE</th>
<th class="head">&#8216;SENDTABW&#8217;</th>
<th class="head">TO</th>
<th class="head">VIRTEL-FONCTION-FAE6</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>MOVE</td>
<td>0</td>
<td>TO</td>
<td>VIRTEL-CODE-RETOUR-FAE6</td>
</tr>
<tr class="row-odd"><td>MOVE</td>
<td>08</td>
<td>TO</td>
<td>VIRTEL-LONG-POSTE.</td>
</tr>
<tr class="row-even"><td>MOVE</td>
<td>9</td>
<td>TO</td>
<td>VIRTEL-NBR-POSTE.</td>
</tr>
<tr class="row-odd"><td>MOVE</td>
<td>08</td>
<td>TO</td>
<td>VIRTEL-LONG-NOM.</td>
</tr>
<tr class="row-even"><td>MOVE</td>
<td>&#8216;CPT_NUM1&#8217;</td>
<td>TO</td>
<td>VIRTEL-NOM1.</td>
</tr>
<tr class="row-odd"><td>MOVE</td>
<td>&#8216;CPT-0001&#8217;</td>
<td>TO</td>
<td>VIRTEL-POSTE1-01.</td>
</tr>
<tr class="row-even"><td>MOVE</td>
<td>&#8216;CPT-0002&#8217;</td>
<td>TO</td>
<td>VIRTEL-POSTE1-02.</td>
</tr>
<tr class="row-odd"><td>MOVE</td>
<td>&#8216;CPT-0003&#8217;</td>
<td>TO</td>
<td>VIRTEL-POSTE1-03.</td>
</tr>
<tr class="row-even"><td>MOVE</td>
<td>&#8216;CPT-0004&#8217;</td>
<td>TO</td>
<td>VIRTEL-POSTE1-04.</td>
</tr>
<tr class="row-odd"><td>MOVE</td>
<td>&#8216;CPT-0005&#8217;</td>
<td>TO</td>
<td>VIRTEL-POSTE1-05.</td>
</tr>
<tr class="row-even"><td>MOVE</td>
<td>&#8216;CPT-0006&#8217;</td>
<td>TO</td>
<td>VIRTEL-POSTE1-06.</td>
</tr>
<tr class="row-odd"><td>MOVE</td>
<td>&#8216;CPT-0007&#8217;</td>
<td>TO</td>
<td>VIRTEL-POSTE1-07.</td>
</tr>
<tr class="row-even"><td>MOVE</td>
<td>&#8216;CPT-0008&#8217;</td>
<td>TO</td>
<td>VIRTEL-POSTE1-08.</td>
</tr>
<tr class="row-odd"><td>MOVE</td>
<td>&#8216;CPT-0009&#8217;</td>
<td>TO</td>
<td>VIRTEL-POSTE1-09.</td>
</tr>
<tr class="row-even"><td>MOVE</td>
<td>SPACES</td>
<td>TO</td>
<td>VIRTEL-FILLER1-FAE6</td>
</tr>
</tbody>
</table>
<blockquote>
<div><em>Example of VIRTEL Web Integration application using CALL VIRTEL</em></div></blockquote>
<ol class="arabic">
<li><p class="first"><strong>Return codes for the SENDPAGW function</strong></p>
<blockquote>
<div><p>The VIRTEL-CODE-RETOUR field should be initialized to 0. The
following values may be returned:</p>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="id340">
<h2>0<a class="headerlink" href="#id340" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>OK, VIRTEL request accepted (does not guarantee that page has been
displayed in browser)</div></blockquote>
</div>
<div class="section" id="id341">
<h2>1<a class="headerlink" href="#id341" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Invalid function</div></blockquote>
</div>
<div class="section" id="id342">
<h2>2<a class="headerlink" href="#id342" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>HTML page name invalid (blank or low-value)</div></blockquote>
</div>
<div class="section" id="id343">
<h2>3<a class="headerlink" href="#id343" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Directory name invalid (blank or low-value)</div></blockquote>
<blockquote>
<div>The VIRTEL-CODE-RETOUR field should be initialized to 0. The
following values may be returned:</div></blockquote>
</div>
<div class="section" id="id344">
<h2>0<a class="headerlink" href="#id344" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>OK, VIRTEL request accepted (does not guarantee that page has been
displayed in browser)</div></blockquote>
</div>
<div class="section" id="id345">
<h2>1<a class="headerlink" href="#id345" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Invalid function</div></blockquote>
</div>
<div class="section" id="id346">
<h2>11<a class="headerlink" href="#id346" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Length of NAME non-numeric</div></blockquote>
</div>
<div class="section" id="id347">
<h2>12<a class="headerlink" href="#id347" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Length of VALUE non-numeric</div></blockquote>
</div>
<div class="section" id="id348">
<h2>13<a class="headerlink" href="#id348" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Number of values is non-numeric</p>
<p>When an application is invoked from a browser via an entry point
defined with emulation type HOST4WEB, the application can use a set
of VIRTEL control commands known as “HOST4WEB” commands, which are
coded in the 3270 screen.2</p>
<p>HOST4WEB commands are recognized by VIRTEL when the entry point
definition specifies emulation type HTML, HOST4WEB, or H4W, and any
of the following conditions is true:</p>
</div></blockquote>
<ul>
<li><p class="first">the VIRTEL transaction definition contains value 1 in the “H4W
Commands” field</p>
</li>
<li><p class="first">the VIRTEL transaction definition contains value 2 in the “H4W
Commands” field and the message has a ‘2VIRTEL’ prefix (see below)</p>
</li>
<li><p class="first">the VIRTEL transaction definition contains value 4 in the “H4W
Commands” field and the entry point definition specifies emulation
type HOST4WEB or H4W</p>
</li>
<li><p class="first">the VIRTEL transaction definition contains value 4 in the “H4W
Commands” field and the entry point definition specifies emulation
type HTML and the message has a ‘2VIRTEL’ prefix (see below)</p>
</li>
<li><p class="first">the previous screen contained the HOST4WEB command C SCAN NEXT SCREEN</p>
</li>
<li><p class="first">the application previously sent an FAD5 code 01 structured field</p>
<blockquote>
<div><p>All HOST4WEB commands must begin immediately after a 3270 attrbute
byte, in other words each command must appear at the start of a 3270
field. The non-display attribute may be used, if desired, to prevent
the command appearing on the screen. To define a non-display field
in BMS, specify ATTRB=(ASKIP,DRK). To define a non-display field in
ISPF, use an attribute character defined as INTENS(NON) in the )ATTR
section of the panel.</p>
<p>ISPF applications must use the ISPEXEC CONTROL DISPLAY REFRESH
command before the ISPEXEC DISPLAY PANEL command to ensure that
HOST4WEB commands are transmitted to VIRTEL in their entirety.</p>
<p>An application can send a 3270 message with a special prefix to
indicate to VIRTEL that the screen contains HOST4WEB commands.</p>
<p>The prefix consists of a 3270 field starting with the characters
‘2VIRTEL’. This field must be the first field transmitted in the
message.</p>
<p>The field can be defined with the “non-display” attribute, if
desired, to prevent the prefix appearing on the screen.</p>
<p>Requests VIRTEL to automatically free all variables whenever a user
response is sent to the application. This command cancels the effect
of the KEEP VARIABLES command.</p>
<p>NOTE: structured field FAD5 code 08 produces the same effect as this
command.</p>
<p>Requests VIRTEL to keep all variables created by the application.
Normally VIRTEL will free all variables whenever a user response is
sent to the application. This command allows the variables to be
kept for use by a subsequent output screen. The variables may be
freed by a subsequent KILL VARIABLES command, otherwise they will be
automatically freed at the end of the transaction.</p>
<p>NOTE: structured field FAD5 code 02 produces the same effect as this
command.</p>
<p>Requests VIRTEL to free all variables.</p>
<p>NOTE: structured field FAD5 code 04 produces the same effect as this
command.</p>
<p>Requests VIRTEL to immediately return a response to the application
with a simulated “Enter”. The screen containing this command is
never displayed to the user.</p>
<p>Indicates that the following screen will contain HOST4WEB commands,
which will be processed by VIRTEL without the need for a ‘2VIRTEL’
prefix.</p>
<p>NOTE: structured field FAD5 code 01 produces the same effect as this
command.</p>
<p>Indicates that the current screen should not be sent to the user
yet.</p>
<p>Allows a service transaction to request termination of the host
application session after the current message has been sent.</p>
<p>When VIRTEL returns the next input to the application, the contents
of this field are replaced by the emulation type defined in the
entry point.</p>
<p>When VIRTEL returns the next input to the application, the contents
of this field are replaced by the name of the current page template.</p>
<p>When VIRTEL returns the next input to the application, the contents
of this field are replaced by the value of the parameter paramname
in the URL.</p>
<p>Indicates the name of the directory from which VIRTEL is to retrieve
the page template for the current 3270 screen (but not for
subsequent screens). dirname is the name of a VIRTEL directory
defined in the Directory Management sub-application (as described
23). This name must not contain any blanks.</p>
<p>Indicates the name of the page template to be used for the current
3270 screen and all subsequent screens. This name must not contain
any blanks.</p>
<p>Indicates the name of the page template to be used for the current
3270 screen (but not for subsequent screens). This name must not
contain any blanks.</p>
<p>Adds a new value to a table variable named varname. The variable is
automatically created if necessary. The value is contained in the
3270 field immediately following the S VARIABLE varname command, and
the value has the same</p>
<p>length as the 3270 field which contains it. The “+” characters in
the figure above represent the 3270 attribute bytes which act as
field delimiters.</p>
<p>An application started by an incoming e-mail (see <a class="reference external" href="#_bookmark249">“Incomming
e-mails”, page 218</a>) can retrieve data from the
content of the e-mail. To request VIRTEL to extract the data from
the e-mail, the application sends a structured field FAC8 code 12 or
13 to the associated relay (3270 pseudo-terminal). VIRTEL intercepts
the structured field and sends a response to the application in the
form of a QUERY REPLY (x‘88’) structured field.</p>
<p>The format of a structured field FAC8 code 12 is:</p>
<p>Note: MAIL FROM and RCPT TO are respectively the name of the sender
and recipient as specified in the SMTP envelope.</p>
<p><em>Format of structured field FAC8 code 12</em></p>
<p>The response consists of one or more structured fields, prefixed by
an AID byte x‘88’ (QUERY REPLY). The format of the query reply
structured field is:</p>
<p><em>Format of the response to structured field FAC8 code 12</em></p>
<p>Notes:</p>
</div></blockquote>
</li>
<li><p class="first">Response types other than 0020 do not contain the number of lines or
flags.</p>
</li>
<li><p class="first">Response types are returned in the same order as specified in the
request.</p>
</li>
<li><p class="first">All of the response types requested are present, even if they are
zero length.</p>
</li>
<li><p class="first">Lines of message text are delimited by X&#8216;0D25&#8217; (EBCDIC
carriage-return / line-feed).</p>
<blockquote>
<div><p>Structured field FAC8 code 13 searches the e-mail for a specific
character string, then returns the string together with the
remainder of the line.</p>
<p>The format of a structured field FAC8 code 13 is:</p>
<p><em>Format of structured field FAC8 code 13</em></p>
<p>The response consists of one or more structured fields, prefixed by
an AID byte x‘88’ (QUERY REPLY). The format of the query reply
structured field is:</p>
<p><em>Format of the response to structured field FAC8 code 13</em></p>
<p>Notes:</p>
</div></blockquote>
</li>
<li><p class="first">The data returned includes the character string searched for, and all
characters which follow, up to the end of the line. The characters
X&#8216;0D25&#8217;, indicating the end of line, are not included in the
response.</p>
</li>
<li><p class="first">Response types are returned in the same order as specified in the
request.</p>
</li>
<li><p class="first">All of the response types requested are present, even if they are
zero length.</p>
</li>
<li><p class="first">Structured fields FAC8 code 12 and code 13 can be combined in the
same request / response.</p>
<blockquote>
<div><p>Example (in Cobol format) of receiving an e-mail:</p>
<p>05 FAC812-REP-TEXT-LENG PIC S9(4) COMP.</p>
<p>05 FAC812-REP-TEXT-CODE PIC X(2).</p>
<p>05 FAC812-REP-TEXT-NLIG PIC S9(8) COMP.</p>
<p>05 FAC812-REP-TEXT-FLAG PIC X(4).</p>
<p>05 FAC812-REP-TEXT-DATA.</p>
<p>10 FAC812-REP-TEXT-CHAR PIC X</p>
<p>OCCURS 0 TO 1000 TIMES DEPENDING ON TEXT-LENG.</p>
<p>05 FAC813-REP-OREF-LENG PIC S9(4) COMP.</p>
<p>05 FAC813-REP-OREF-CODE PIC X(2).</p>
<p>05 FAC813-REP-OREF-DATA.</p>
<p>10 FAC813-REP-OREF-CHAR PIC X</p>
<p>OCCURS 0 TO 256 TIMES DEPENDING ON OREF-LENG.</p>
<p>01 SUBJ-LENG PIC S9(4) COMP VALUE +0.</p>
<p>01 SUBJ-MESSAGE.</p>
<p>05 FILLER PIC X(5) VALUE &#8216;SUBJ:&#8217;.</p>
<p>05 SUBJ-DATA PIC X(50).</p>
<p>01 TEXT-LENG PIC S9(4) COMP VALUE +0.</p>
<p>01 TEXT-MESSAGE.</p>
<p>05 FILLER PIC X(5) VALUE &#8216;TEXT:&#8217;.</p>
<p>05 TEXT-DATA PIC X(80).</p>
<p>01 OREF-LENG PIC S9(4) COMP VALUE +0.</p>
<p>01 OREF-MESSAGE.</p>
<p>05 FILLER PIC X(5) VALUE &#8216;OREF:&#8217;.</p>
<p>05 OREF-DATA PIC X(50).</p>
<p>01 ERR-MESSAGE PIC X(40) VALUE &#8216;RBC8 UNEXPECTED RESPONSE FROM
VIRTEL&#8217;.</p>
<p><em>in the Procedure Division:</em></p>
<p>MOVE +256 TO SUBJ-LENG MOVE +1000 TO TEXT-LENG MOVE +256 TO
OREF-LENG</p>
<p>MOVE LENGTH OF FAC812-DEM-EMAIL TO FAC812-DEM-LENG MOVE LENGTH OF
FAC812-REP-AREA TO FAC812-REP-LENG EXEC CICS CONVERSE
FROM(FAC812-DEM-EMAIL)</p>
<p>FROMLENGTH(FAC812-DEM-LENG) INTO(FAC812-REP-AREA)
TOLENGTH(FAC812-REP-LENG) STRFIELD</p>
<p>END-EXEC</p>
<p>IF EIBAID EQUAL X&#8216;88&#8217;</p>
<p>SUBTRACT 4 FROM FAC812-REP-SUBJ-LENG GIVING SUBJ-LENG MOVE
FAC812-REP-SUBJ-DATA TO SUBJ-DATA</p>
<p>EXEC CICS WRITEQ TD QUEUE(&#8216;CSMT&#8217;)</p>
<p>FROM(SUBJ-MESSAGE)</p>
<p>END-EXEC</p>
<p>SUBTRACT 12 FROM FAC812-REP-TEXT-LENG GIVING TEXT-LENG</p>
<p>MOVE FAC812-REP-TEXT-DATA TO TEXT-DATA EXEC CICS WRITEQ TD
QUEUE(&#8216;CSMT&#8217;)</p>
<p>FROM(TEXT-MESSAGE)</p>
<p>END-EXEC</p>
<p>SUBTRACT 4 FROM FAC813-REP-OREF-LENG GIVING OREF-LENG MOVE
FAC813-REP-OREF-DATA TO OREF-DATA</p>
<p>EXEC CICS WRITEQ TD QUEUE(&#8216;CSMT&#8217;)</p>
<p>FROM(OREF-MESSAGE)</p>
</div></blockquote>
</li>
</ul>
<p>ELSE</p>
<p>END-EXEC</p>
<p>EXEC CICS WRITEQ TD QUEUE(&#8216;CSMT&#8217;)</p>
<blockquote>
<div><p>FROM(ERR-MESSAGE)</p>
<p>END-EXEC END-IF</p>
<p>EXEC CICS ISSUE DISCONNECT END-EXEC.</p>
<p><em>Example of sending structured field FAC8 code 12 and 13</em></p>
<p>It is possible at any time to send an e-mail from a host application
under VIRTEL control. This operation is performed by sending a WRITE
STRUCTURED FIELD to the 3270 session which is intercepted by VIRTEL.
The structured field data consists of a sequence of FAD4 structured
fields as described below:</p>
<p><em>Format of structured field FAD4</em></p>
<p>The possible command codes are:</p>
</div></blockquote>
</div>
<div class="section" id="id349">
<h2>N<a class="headerlink" href="#id349" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(Name) e-mail address of recipient.</div></blockquote>
</div>
<div class="section" id="f">
<h2>F<a class="headerlink" href="#f" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(From) e-mail address of sender. If this code is not supplied, the
default sender address specified on the SMTP line will be used.</div></blockquote>
</div>
<div class="section" id="x-cd">
<h2>X&#8217;CD&#8217;<a class="headerlink" href="#x-cd" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(Code) Message identification.</div></blockquote>
</div>
<div class="section" id="s">
<h2>S<a class="headerlink" href="#s" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(Subject) Message subject line.</div></blockquote>
</div>
<div class="section" id="t">
<h2>T<a class="headerlink" href="#t" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(Text) Message text. The sequence X&#8216;0D25&#8217; (EBCDIC carriage-return /
line-feed) can be used to separate lines of text.</div></blockquote>
</div>
<div class="section" id="id350">
<h2>C<a class="headerlink" href="#id350" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>(Charset) Add a message header indicating the character set used;
ISO-8859-15 for European character set with Euro currency sign.</div></blockquote>
</div>
<div class="section" id="h">
<h2>H<a class="headerlink" href="#h" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>(Header) Add one or more headers. The sequence X&#8216;0D25&#8217; (EBCDIC
carriage-return / line-feed) indicates the end of each of the
headers in this structured field.</p>
<p>The entry point used to invoke the host application must contain a
type-3 transaction whose external name is $MAIL$ and whose
“Application” field contains the name of the SMTP line to be used
for sending the outgoing e-mail.</p>
<p>Example (in Cobol format) of sending an e-mail :</p>
<p>10 FILLER PIC X VALUE &#8216;F&#8217;.</p>
<p>10 FAD4-SENDER PIC X(22) VALUE <a class="reference external" href="mailto:'virtel&#37;&#52;&#48;saint&#46;cloud&#46;com">'virtel<span>&#64;</span>saint<span>&#46;</span>cloud<span>&#46;</span>com</a>&#8216;.</p>
<p>05 FAD4-COMMANDE-CD.</p>
<p>10 FAD4-SFLENGTH-CD PIC S9(4) COMP VALUE +0.</p>
<p>10 FILLER PIC X(2) VALUE X&#8217;FAD4&#8217;.</p>
<p>10 FILLER PIC X VALUE X&#8217;CD&#8217;.</p>
<p>10 FAD4-MESSAGE-ID PIC X(32)</p>
<p>VALUE &#8216;20010321174652K07F44354K608EAF00&#8217;.</p>
<p>05 FAD4-COMMANDE-S.</p>
<p>10 FAD4-SFLENGTH-S PIC S9(4) COMP VALUE +0.</p>
<p>10 FILLER PIC X(2) VALUE X&#8217;FAD4&#8217;.</p>
<p>10 FILLER PIC X VALUE &#8216;S&#8217;.</p>
<p>10 FAD4-SUBJECT PIC X(17) VALUE &#8216;email from virtel&#8217;.</p>
<p>05 FAD4-COMMANDE-T.</p>
<p>10 FAD4-SFLENGTH-T PIC S9(4) COMP VALUE +0.</p>
<p>10 FILLER PIC X(2) VALUE X&#8217;FAD4&#8217;.</p>
<p>10 FILLER PIC X VALUE &#8216;T&#8217;.</p>
<p>10 FAD4-TEXT-LINE-1 PIC X(14) VALUE &#8216;Balance report&#8217;.</p>
<p>10 FILLER PIC X(2) VALUE X&#8216;0D25&#8217;.</p>
<p>10 FAD4-TEXT-LINE-2 PIC X(9) VALUE &#8216;Total is &#8216;.</p>
<p>10 FAD4-CURRENCY PIC X VALUE X&#8216;9F&#8217;.</p>
<p>10 FAD4-AMOUNT PIC 9999 VALUE 2345.</p>
<p>10 FILLER PIC X(2) VALUE X&#8216;0D25&#8217;.</p>
<p>05 FAD4-COMMANDE-H.</p>
<p>10 FAD4-SFLENGTH-H PIC S9(4) COMP VALUE +0.</p>
<p>10 FILLER PIC X(2) VALUE X&#8217;FAD4&#8217;.</p>
<p>10 FILLER PIC X VALUE &#8216;H&#8217;.</p>
<p>10 FAD4-HEADER-1 PIC X(33)</p>
<p>VALUE &#8216;X-Transaction-Server: CICS-TS 2.2&#8217;.</p>
<p>10 FILLER PIC X(2) VALUE X&#8216;0D25&#8217;.</p>
<p>10 FAD4-HEADER-2 PIC X(28)</p>
<p>VALUE &#8216;X-Operating-System: z/OS 1.4&#8217;.</p>
<p>10 FILLER PIC X(2) VALUE X&#8216;0D25&#8217;.</p>
<p>05 FAD4-COMMANDE-C.</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="31%" />
<col width="23%" />
<col width="38%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">10</th>
<th class="head">FAD4-SFLENGTH-C</th>
<th class="head">PIC S9(4)</th>
<th class="head">COMP VALUE +0.</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>10</td>
<td>FILLER</td>
<td>PIC X(2)</td>
<td>VALUE X&#8217;FAD4&#8217;.</td>
</tr>
<tr class="row-odd"><td>10</td>
<td>FILLER</td>
<td>PIC X</td>
<td>VALUE &#8216;C&#8217;.</td>
</tr>
<tr class="row-even"><td>10</td>
<td>FAD4-CHARSET</td>
<td>PIC X(33)</td>
<td>VALUE &#8216;ISO-8859-15&#8217;.</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p><em>in the Procedure Division:</em></p>
<p>MOVE LENGTH OF FAD4-COMMANDE-N TO FAD4-SFLENGTH-N MOVE LENGTH OF
FAD4-COMMANDE-F TO FAD4-SFLENGTH-F MOVE LENGTH OF FAD4-COMMANDE-CD
TO FAD4-SFLENGTH-CD MOVE LENGTH OF FAD4-COMMANDE-S TO
FAD4-SFLENGTH-S MOVE LENGTH OF FAD4-COMMANDE-T TO FAD4-SFLENGTH-T
MOVE LENGTH OF FAD4-COMMANDE-H TO FAD4-SFLENGTH-H MOVE LENGTH OF
FAD4-COMMANDE-C TO FAD4-SFLENGTH-C MOVE LENGTH OF FAD4-AREA TO
FAD4-LONG</p>
<p>EXEC CICS SEND FROM(FAD4-AREA)</p>
<p>LENGTH(FAD4-LONG) STRFIELD</p>
<p>END-EXEC.</p>
<p><em>Example of sending structured field FAD4</em></p>
<p>Example of the e-mail generated by the above program:</p>
<p><em>Example of e-mail generated by structured field FAD4</em></p>
</div></blockquote>
<div class="section" id="security">
<h3>Security<a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>VIRTEL examines the URL of every VIRTEL Web Access request which
arrives from a browser. Since there is no permanent IP session
between the browser and VIRTEL, there is less risk of a session
being “hijacked”. In addition to standard network security features
(firewall, network sign on, SSO, etc.), each URL sent to VIRTEL has
a structure which allows VIRTEL to enforce authorization rules based
on Entry Point, Rules, and Transactions, which are VIRTEL entities
described in the “VIRTEL Connectivity Reference” manual.</p>
<p>VIRTEL supplies a signon program for HTTP lines called VIR0020H
(refer to the “VIRTEL Connectivity Reference” manual for more
details about how to specify a signon program in an entry point).</p>
<p>When the first call is made to a secure transaction under an entry
point which specifies VIR0020H as its signon program, VIRTEL
requests the browser (via a 401 response) to display a dialog box
inviting the user to enter a userid and password. VIRTEL passes the
userid and password to the security manager (RACF, etc.) for
validation. VIRTEL can also propagate the userid and password to
other applications (for example, CICS) by means of connection /
disconnection scripts defined in the transaction (see the “VIRTEL
Connectivity Reference” manual for details).</p>
<p>Depending on the userid, the security manager may authorize or deny
access to the requested transaction.</p>
<p><a class="reference internal" href="../../../_images/image651.png"><img alt="image64" src="../../../_images/image651.png" style="width: 5.10583in; height: 3.46500in;" /></a></p>
<p><em>Example of signon dialog box displayed by browser</em></p>
<p>To display the signon dialog box shown above, the transaction under
the entry point must specify SECURITY 1 (standard). Refer to the
“Transactions” section of the “VIRTEL Connectivity Reference” manual
for details of the security field in the VIRTEL transaction
definition.</p>
<p>Security can be specified either on the application transaction
(transaction type 1, 2, 3), or on the directory transaction
(transaction type 4). In the above example, “SECURE” is the
directory transaction, and “Cics” is the application transaction.
Specifying security at the directory level can be useful in that it
forces the user to sign on even when displaying a static page which
has no associated application transaction.</p>
<p>If SECUR=RACROUTE or SECUR=(RACROUTE,RACF) is specified in the
VIRTCT, and if the security manager reports that it supports
lower-case characters in passwords, then VIRTEL will pass all
passwords to the security manager in mixed case as entered by the
user. Otherwise VIRTEL will translate all passwords to upper case
before passing them to the security manager. Message VIR0861I at
startup indicates that VIRTEL will use mixed-case passwords.</p>
<p>NTLM security allows VIRTEL to retrieve the username under which the
user has already signed on to Windows. This allows VIRTEL Web Access
to sign on the user without requiring him or her to enter a username
and password.</p>
<p>When SECURITY 2 (NTLM) is specified in the VIRTEL transaction
definition (either the application transaction or the directory
transaction) VIRTEL requests the browser to supply the Windows
username.</p>
<p>Note: when the user is identified by NTLM, VIRTEL does not have
access to the user’s password, and therefore VIRTEL cannot verify
the validity of the username, and cannot propagate the signon to
other applications such as CICS.</p>
<p>Before NTML can be used with the Firefox browser, the server name
must be configured into the browser. Type <a class="reference external" href="about:config">about:config</a> in the
address bar, and enter the VIRTEL Web Access server address (for
example, 192.168.235.61:41000) as the value of the
network.automatic-ntlm-auth.trusted-uris parameter.</p>
<p>The AT-TLS feature (“Application Transparent Transport Layer
Security”), available with z/OS Communication Server V1R7 and later
releases, allows direct access to the VIRTEL Web Access server in
SSL mode (HTTPS), without using an intermediate server. The SSLSETUP
job in the VIRTEL SAMPLIB contains an example of the definitions
required to place VIRTEL Web Access sessions under AT-TLS control.</p>
<p>For VSE sites, or earlier versions of MVS where AT-TLS is not
available, access to VIRTEL in HTTPS mode can be achieved by means
of an intermediate server (such as Apache) operating in
Reverse-Proxy mode. The function of the reverse proxy is to
transform the dataflow into HTTP mode before sending it on to
VIRTEL.</p>
<p>The definition of a transaction with SECURITY 3 (TLS) allows VIRTEL
to recognize a VIRTEL Web Access user by means of a digital
certificate installed in the user’s web browser. VIRTEL will use the
RACF userid associated with the certificate to determine the user&#8217;s
authority to execute the transaction.</p>
<p>VIRTEL is able to obtain the client’s userid, without requiring the
user to sign on, when all of the following conditions are true:</p>
</div></blockquote>
<ul>
<li><p class="first">The user enters VIRTEL via a secure https session using the AT-TLS
function of z/OS V1R7 or later</p>
</li>
<li><p class="first">The TTLSConnectionAction or TTLSEnvironmentAction statement in the
policy agent configuration file contains the parameter HandshakeRole
ServerWithClientAuth</p>
</li>
<li><p class="first">The client’s browser presents a valid certificate during SSL
handshake</p>
</li>
<li><p class="first">The z/OS Security Server (RACF) recognizes the certificate as
belonging to the user (Refer to &#8220;Chapter 21 RACF and Digital
Certificates&#8221; in &#8220;SA22-7683-05 z/OS Security Server RACF Security
Administrator&#8217;s Guide&#8221; for more information on associating user IDs
with certificates)</p>
<blockquote>
<div><p>The sample job SSLUCERT in the VIRTEL SAMPLIB illustrates how to
generate a user client certificate using RACF. The certificate is
registered in the RACF database and is exported to a PKCS12 (.P12)
file which contains both the user certificate and the user&#8217;s private
key encrypted under a passphrase. The .P12 file must be downloaded
in binary to the user&#8217;s workstation and installed in the user&#8217;s
browser.</p>
<p>Note that when a user is identified by certificate, VIRTEL does not
have access to the user’s password, and therefore cannot propagate
the signon to other applications such as CICS.</p>
<p>VIRTEL Web Access offers the possibility of encrypting passwords
(3270 non-display fields) transmitted in HTML pages. VIRTEL uses the
encryption facilities provided by the System z hardware through the
z/OS Integrated Cryptographic Service Facility (ICSF). Password
encryption is available only when using VIRTEL Web Access in Ajax
mode using the WEB2AJAX.htm page template (se`e “Presentation
modes”, page 102 &lt;#_bookmark94&gt;`__).</p>
<p>To activate the password encryption option for WEB2AJAX.htm you must
specify a CRYPTn parameter in the VIRTCT (see “Parameters of the
VIRTCT” in the VIRTEL Installation Guide). The CRYPTn parameter must
specify CRYPT3270 as the name and ICSF as the encryption engine, as
in example shown below:</p>
<p><em>CRYPTn parameter for password encryption using WEB2AJAX.htm</em></p>
<p>The definition of a transaction with SECURITY 4 (HTML) allows VIRTEL
to obtain the userid and password from fields embedded in the HTML
page.</p>
<p>When a security type 4 transaction is requested, and the user is not
already signed on, VIRTEL will send the requested page to the
browser without connecting to the application. The page template
must use the CREATE-VARIABLE-IF tag (described 62) to determine
whether signon is required, and the DECLARE-FIELD-AS tag (described
62) to declare the username and password fields.</p>
<p>Following an unsuccessful signon attempt, the special variable
$ERRMSG$ contains one or more error messages which may be included
in the page template.</p>
<p>The figure below shows an example of a transaction with security
type 4:</p>
</div></blockquote>
</li>
</ul>
<blockquote>
<div><p><em>HTML security: Example transaction with security type 4</em></p>
<p>The figure below shows an example of a page template containing
userid and password fields which can be used with the security type
4 transaction shown Figure 4 -187:</p>
<p><em>HTML security: Example page template</em></p>
<p>The rules attached to an HTTP line allow security to be implemented
at the entry point level. The following example shows a set of three
rules which are used to filter incoming HTTP calls. The first rule,
1HT00100, assigns an entry point specifically for users known to
VIRTEL and identified by means of a “cookie” included in their HTTP
request. In this case, the entry point will be chosen according to
the set of rules associated with that particular user (see
<a class="reference external" href="#_bookmark67">“Correspondent Management”, page 63</a>). The second
rule, 1HT00200, assigns the entry point EPINTERN to clients whose IP
address is 192.168.n.n, and only during the period Monday to Friday
during the hours 08:30 to 17:30. The third rule, 1HT00900, assigns
the entry point EPPUBLIC to all other requests (this entry point
could, for example, display a page containing the message “Access
not authorised”).</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="60%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name Status</th>
<th class="head">Description</th>
<th class="head">Entry</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td>Point</td>
</tr>
<tr class="row-odd"><td>1HT00100 ACTIVE</td>
<td>HTTP access (users authorised by cookie)</td>
<td>$COOKIE$</td>
</tr>
<tr class="row-even"><td>1HT00200 ACTIVE</td>
<td>HTTP access (internal network, working hours)</td>
<td>EPINTERN</td>
</tr>
<tr class="row-odd"><td>1HT00900 ACTIVE</td>
<td>HTTP access (other users)</td>
<td>EPPUBLIC</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="28%" />
<col width="25%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">P1=Update</th>
<th class="head">P2=Suppress</th>
<th class="head">P3=Return</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>P6=1st page</td>
<td>P7=Page-1</td>
<td>P8=Page+1</td>
<td>P12=Edit</td>
</tr>
</tbody>
</table>
<blockquote>
<div><em>HTTP security by rule: List of rules</em></div></blockquote>
<blockquote>
<div><em>HTTP security by rule: Users authorized by cookie</em></div></blockquote>
<blockquote>
<div><em>HTTP security by rule: Internal network, working hours</em></div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="16%" />
<col width="13%" />
<col width="9%" />
<col width="9%" />
<col width="21%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">0</th>
<th class="head">Days</th>
<th class="head">===&gt; M:</th>
<th class="head">T:</th>
<th class="head">W:</th>
<th class="head">T: F:</th>
<th class="head">S:</th>
<th class="head">S:</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0</td>
<td>Start time</td>
<td>===&gt; H:</td>
<td>M:</td>
<td>S:</td>
<td>End time ===&gt; H:</td>
<td>&#160;</td>
<td>M:</td>
<td>S:</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="38%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">P1=Update</th>
<th class="head">P3=Return</th>
<th class="head">Enter=Add</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>P4=Activate</td>
<td>P5=Inactivate</td>
<td>P12=Entry P.</td>
</tr>
</tbody>
</table>
<blockquote>
<div><em>HTTP security by rule: Other users</em></div></blockquote>
</div>
<div class="section" id="howtos">
<h3>HOWTOs<a class="headerlink" href="#howtos" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>Although the standard 3270 screen size is 24 rows by 80 columns,
certain applications benefit from the use of terminals with larger
screen sizes. The screen size is determined by the LOGMODE used for
the session between VIRTEL and the host application. VTAM offers
logmodes for the following standard screen sizes:</div></blockquote>
<ul>
<li><p class="first">model 2 : 24x80 (logmode SNX32702)</p>
</li>
<li><p class="first">model 3 : 32x80 (logmode SNX32703)</p>
</li>
<li><p class="first">model 4 : 43x80 (logmode SNX32704)</p>
</li>
<li><p class="first">model 5 : 27x132 (logmode SNX32705)</p>
<blockquote>
<div><p>There are two different ways that the VIRTEL administrator can set
up the configuration to allow the VIRTEL Web Access user to select
the desired logmode:</p>
</div></blockquote>
</li>
<li><p class="first">define a separate VIRTEL transaction for each screen size, and allow
the user to select the appropriate transaction</p>
</li>
<li><p class="first">group the VTAM relay LUs into pools, each pool having a different
logmode, and allow the user to select the pool by coding an
appropriate parameter on the URL</p>
<blockquote>
<div><p>With this method, the administrator defines multiple VIRTEL
transactions for a single application, each transaction specifying a
different logmode. For example, transactions Tso2 and Tso5 delivered
in the sample configuration both define TSO as the target
application, but specify different logmodes SNX32702 and SNX32705
respectively. The user selects the desired transaction from the
applist menu displayed by the “Other applications” link in the
VIRTEL Web Access menu.</p>
<p>The figure below shows the definition of the Tso5 transaction
defined under the WEB2HOST entry point:</p>
</div></blockquote>
</li>
</ul>
<blockquote>
<div><p><em>Example of TSO transaction TSO specifying logmode SNX32705</em></p>
<p>The URL to access this transaction could be of the format:</p>
<p><a class="reference external" href="http://n.n.n.n:41001/w2h/WEB3270.htm+Tso5">http://n.n.n.n:41001/w2h/WEB3270.htm+Tso5</a></p>
<p>The URL which allows the browser to connect to a host application
via VIRTEL may contain a parameter, such as “model5” as shown in
this example:</p>
<p><a class="reference external" href="http://n.n.n.n:41001/w2h/WEB3270.htm+Tso+model5">http://n.n.n.n:41001/w2h/WEB3270.htm+Tso+model5</a></p>
<p>This form of a VIRTEL URL is described in the section “Dynamic URL
with user data”, page 0.</p>
<p>This form of URL is processed by VIRTEL with reference to the “rule
set” associated with the HTTP line. VIRTEL looks for a rule whose
“User Data” field matches the value of the parameter (model5). The
“Parameter” field of the selected rule assigns a relay LU name from
the pool defined with logmode SNX32705.</p>
<p>The VTAM definition of the relay pool is shown in the example below.
In this example, LU names in the range RHTVT5nn are defined to have
the model5 logmode SNX32705:</p>
<p><em>VTAM definition of terminal groups</em></p>
<p>The screen below shows an example rule which assigns a relay LU from
the range RHTVT5nn when the URL contains the parameter model5:</p>
</div></blockquote>
<blockquote>
<div><p><em>Example rule for selection of logmode by URL</em></p>
<p>The LU name (RHTVT5nn) assigned by the rule must belong to the LU
pool shared assigned to the HTTP line, as shown in the example
below:</p>
<p><em>Definition of model 5 terminals in the W2HPOOL pool</em></p>
<p>When the entry point definition specifies SCENLOGM in the
“Identification scenario” field, the user may override the default
logmode by appending an additional parameter LOGMODE=modename to the
URL, as shown in this example:</p>
<p><a class="reference external" href="http://n.n.n.n:41001/w2h/WEB3270.htm+Tso?logmode=SNX32705">http://n.n.n.n:41001/w2h/WEB3270.htm+Tso?logmode=SNX32705</a></p>
<p>The source code for the SCENLOGM scenario is supplied in the VIRTEL
SAMPLIB.</p>
<p>Note: To activate this functionality, SCENLOGM must be specified in
the “Identification scenario” field of the ENTRY POINT (not the
transaction definition)</p>
<p>VIRTEL Web Access also supports the use of “dynamic” logmodes, such
as D4A32XX3, which allow the user to specify a non-standard
alternate screen size. When the entry point definition specifies
SCENLOGM in the “Identification scenario” field, the user may also
append ROWS and COLS parameters to the URL, as shown in this
example:</p>
<p><a class="reference external" href="http://n.n.n.n:41001/w2h/WEB3270.htm+Tso?logmode=D4A32XX3&amp;rows=54&amp;cols=132">http://n.n.n.n:41001/w2h/WEB3270.htm+Tso?logmode=D4A32XX3&amp;rows=54&amp;cols=132</a></p>
<p>VIRTEL allows a maximum screen size of 62 rows by 160 columns. The
host application must also support the use of non-standard screen
sizes.</p>
<p>Users who require a codepage different from the default DEFUTF8
value specified in the VIRTCT can specify the desired codepage as a
parameter of the URL, as shown in this example:</p>
<p><a class="reference external" href="http://n.n.n.n:41001/w2h/WEB2AJAX.htm+Tso?codepage=IBM1047">http://n.n.n.n:41001/w2h/WEB2AJAX.htm+Tso?codepage=IBM1047</a></p>
<p>Note: To activate this functionality, SCENLOGM must be specified in
the “Identification scenario” field of the ENTRY POINT (not the
transaction definition)</p>
<p>The value of the CODEPAGE parameter may be either:</p>
</div></blockquote>
<ul>
<li><p class="first">one of the values listed for the DEFUTF8 parameter of the VIRTCT (see
“Parameters of the VIRTCT” in the VIRTEL Installation Guide); or</p>
</li>
<li><p class="first">one of the additional codepages you have specified in the CHARSET
parameter in your VIRTCT at VIRTEL installation time</p>
<blockquote>
<div><p>When the user terminates the application session by pressing the
“Disconnect” button in the browser, various options are available:</p>
</div></blockquote>
</li>
<li><p class="first">Return to the application selection menu</p>
</li>
<li><p class="first">Display a specific HTML page</p>
</li>
<li><p class="first">Close the browser window and return to the desktop</p>
<blockquote>
<div><p>Remember that it is always best to exit cleanly from the host
application by pressing the “Disconnect” button, rather than closing
the browser window. If the browser window is closed abruptly, the
host session resources may not be freed until the expiry of the
timeout period specified in the entry point definition.</p>
<p>When a “Disconnect” request is received, VIRTEL returns to the root
URL and displays the default page for the line, which will normally
be an application selection menu. For detailed information, se<a class="reference external" href="#_bookmark8">e
“Virtel URL formats”, page 10</a>.</p>
<p>The user can then choose to connect to the same or a different
application by clicking on the appropriate link in the application
selection menu.</p>
<p>Those sites wishing to display a specific page at the end of a
session may use the “Last page” field in the definition of the entry
point associated with the HTTP line or the entry point selected by
the rules of the line. The “Last page” field indicates the name of
the page to be displayed following disconnection from the host
application. The indicated file must be uploaded to the same
directory as specified in the URL for the host application (for
example W2H-DIR if the URL specifies /w2h/WEB3270.htm).</p>
<p>The “Last page” may contain instructions to the user and may include
system information provided by VIRTEL (such as the application and
terminal name, date and time, etc.)</p>
<p>Sites who wish to close the browser window and return to the desktop
when the user disconnects from the host application may specify
close.htm in the “Last page” field of the entry point definition.
This page contains JavaScript code which will attempt to close the
current browser window. Depending on the browser version and
security settings, the window may close, a prompt may be issued, or
the window may remain open. The close.htm page is delivered as
standard in the W2H-DIR directory but may be copied to another
directory if required.</p>
<p>The figure below shows an example of an entry point definition with
close.htm specified as the “Last page”:</p>
</div></blockquote>
</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="55%" />
<col width="11%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Identification scenario Type 3 compression Mandatory identification</th>
<th class="head"><p class="first">===&gt;</p>
<p>===&gt;</p>
<p class="last">===&gt;</p>
</th>
<th class="head"><p class="first">eg XML identification</p>
<p>Discover typical screens (Virtel/PC)</p>
<p class="last">(PC or minitel)</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>3270 swap key</td>
<td>===&gt;</td>
<td>eg P24</td>
</tr>
<tr class="row-odd"><td>Extended colors</td>
<td>===&gt; X</td>
<td>E: extended X: extended + DBCS</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p><em>Example of entry point with last page</em></p>
<p>It is not always necessary to pass via an application selection menu
to connect to a host application. A host application may be accessed
directly by opening the URL containing the complete path to the
application. This URL may result in the display of the host signon
screen, the first application screen, or possibly (if a script or
scenario is used), a subsequent screen sent by the application. For
more information about how VIRTEL can be used to automate the
process of connection to a host application, se<a class="reference external" href="#_bookmark8">e “Virtel URL
formats”, page 10</a> of this manual, and “Connection/
Disconnection Scripts” in the VIRTEL Connectivity Reference manual.</p>
<p>For example, you can access the VIRTEL transaction whose external
name is “Cics” by pointing the browser at a URL of the following
format:</p>
<p><a class="reference external" href="http://n.n.n.n:41001/w2h/WEB2AJAX.htm+Cics">http://n.n.n.n:41001/w2h/WEB2AJAX.htm+Cics</a></p>
<p>At the end of the session with the host application, VIRTEL examines
the “Last page” field (see previous section) to decide whether to
return to the desktop or to redisplay the application selection
menu.</p>
<p>An application URL may be coded in the “TIOA at logon” field of the
default transaction for the entry point (the default transaction is
the transaction whose external name is the same as the entry point
name). This allows the user to go directly to the host application
simply by entering a URL of the format:</p>
<p><a class="reference external" href="http://n.n.n.n:41001">http://n.n.n.n:41001</a></p>
<p>The example below shows the default transaction for the WEB2HOST
entry point set up to go directly to the transaction whose external
name is “Cics”:</p>
<p><em>Example of default URL</em></p>
<p>For more information se<a class="reference external" href="#_bookmark8">e “Virtel URL formats”, page
10</a>.</p>
<p>The “Web Access settings menu”, page 0 allows you to change the font
family and font size. By default VIRTEL will calculate an
appropriate font size to fit the browser window size, but you can
choose a fixed font size if you prefer. VIRTEL Web Access uses a
fixed-pitch font to display the 3270 screen. If you do not like the
default font then you can choose any fixed-pitch font installed on
the workstation. Typical fonts available on Windows workstations are
Courier New, Fixedsys, Terminal, Consolas, and Lucida Console. You
can use the Windows Control Panel – Fonts dialog to view the
installed fonts.</p>
<p>Many 3270 users prefer to customize the keyboard mapping so that the
“Enter” key on the main keyboard is handled as a 3270 newline, while
the right “Ctrl” key and the “Enter” key on the numeric keypad are
treated as 3270 Enter.</p>
<p>The “Web Access settings menu”, page 0 allows you to specify this
configuration using the following settings:</p>
<p>Note however that versions 6, 7, and 8 of Internet Explorer do not
distinguish between the Enter key on the main keyboard and the Enter
key on the numeric keypad. For users who want the two “Enter” keys
to be handled differently, Syspertec supplies an additional DLL to
be installed in Internet Explorer as a “Browser Helper Object”. This
DLL can be installed by clicking on the “Install VirtKey BHO” link
on the VIRTEL Web Access menu. After installing the DLL, go to
“Tools” – “Internet Options” – “Advanced” and check that the option
“Enable third-party browser extensions” is ticked, then stop and
restart Internet Explorer. Administrator privilege is needed to
install the Browser Helper Object, but once installed the BHO can be
used by users without administrator privileges.</p>
<p>Although other browsers (including Internet Explorer 9) are capable
of recognizing the keypad Enter key without the need for a BHO,
older releases of Firefox, Chrome, and Safari do not distinguish
between the left and right Ctrl keys. This means that when “ctrl” is
set to “ENTER” then both Ctrl keys will be handled as 3270 Enter. In
addition, the AltGr key will be treated as Ctrl under Firefox. The
most recent versions of Firefox (from version 15 onwards for Windows
7 and from version 17 onwards for Windows XP) and Chrome (from
version 23 onwards) are capable of distinguishing between the left
and right Ctrl keys like Internet Explorer.</p>
<p>The site default settings for Web Access are stored in the file
w2hparm.js (see <a class="reference external" href="#_bookmark89">“Global modification of Web
Access</a> <a class="reference external" href="#_bookmark89">settings”, page 98</a>)</p>
<p>The user settings interface can be changed using the settingsGUI
parameter stored in file w2hparm.js (see <a class="reference external" href="#_bookmark89">“Global</a>
<a class="reference external" href="#_bookmark89">modification of Web Access settings”, page 98</a>)</p>
<p>If your installation uses a reverse proxy (or bastion host) between
the user’s browser and the VIRTEL Web Access server, then the VIRTEL
log and statistics file will show the IP address of the proxy
instead of the address of the end user. In order for VIRTEL to
recognize and log the originating user’s IP address, you must
declare the proxy in the HTFORWD parameter of the VIRTCT (see
“Parameters of the VIRTCT” in the VIRTEL Installation Guide) or in a
rule attached to the HTTP line (see “Rules” in the VIRTEL
Connectivity Reference manual).</p>
<p>Name-based virtual hosting is a method for supporting multiple sites
(for example, site1.mycompany.com and site2.mycompany.com) using the
same IP address and port number. By means of the “HTTP Host” field
in the rules attached to the HTTP line, VIRTEL can recognize the
site name and direct the request to a specific entry point. Refer to
“Rules” in the VIRTEL Connectivity Reference manual for further
details. You can install a set sample definitions for virtual
hosting by running the ARBOLOAD job (delivered in the VIRTEL
SAMPLIB) with the VHOST=YES parameter.</p>
</div></blockquote>
</div>
<div class="section" id="index">
<h3>Index<a class="headerlink" href="#index" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p><strong>IndexNiveau1</strong></p>
<p>IndexNiveau2 <a class="reference external" href="#_bookmark33">, 28</a></p>
</div></blockquote>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../../newsletters.html" class="btn btn-neutral float-right" title="Technical Newsletters" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../Virtel453_Installation_User_Guide/Virtel453_Installation_User_Guide.html" class="btn btn-neutral" title="Virtel 4.53 Installation Guide" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Syspertec. All rights reserved.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>